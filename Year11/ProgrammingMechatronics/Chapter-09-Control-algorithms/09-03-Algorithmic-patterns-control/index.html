
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Comprehensive educational resource for NSW HSC Software Engineering syllabus">
      
      
      
        <link rel="canonical" href="https://eatham532.github.io/Software-Engineering-HSC-Textbook/Year11/ProgrammingMechatronics/Chapter-09-Control-algorithms/09-03-Algorithmic-patterns-control/">
      
      
        <link rel="prev" href="../09-02-Autonomous-control-features/quiz/">
      
      
        <link rel="next" href="quiz/">
      
      
      <link rel="icon" href="../../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.21">
    
    
      
        <title>Content - Software Engineering Textbook HSC</title>
      
    
    
      <link rel="stylesheet" href="../../../../assets/stylesheets/main.2a3383ac.min.css">
      
        
        <link rel="stylesheet" href="../../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../../assets/diagram-modal.css">
    
      <link rel="stylesheet" href="../../../../assets/quiz.css">
    
      <link rel="stylesheet" href="../../../../assets/common.css">
    
      <link rel="stylesheet" href="../../../../assets/diagram-fix.css">
    
      <link rel="stylesheet" href="../../../../assets/cross-reference.css">
    
      <link rel="stylesheet" href="../../../../assets/site-banner.css">
    
      <link rel="stylesheet" href="../../../../assets/code-runner.css">
    
      <link rel="stylesheet" href="../../../../assets/code-editor.css">
    
    <script>__md_scope=new URL("../../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-58275RL1P9"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-58275RL1P9",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-58275RL1P9",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script>
  
    <script>if("undefined"!=typeof __md_analytics){var consent=__md_get("__consent");consent&&consent.analytics&&__md_analytics()}</script>
  

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#93-algorithmic-patterns-for-control" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
  
  
    
    
    
    <div class="site-banner site-banner--warning" data-banner data-banner-version="1" role="status" aria-live="polite">
      <div class="site-banner__inner">
        <span class="site-banner__icon" aria-hidden="true">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            
              <path d="M12 9v4"/><path d="M12 17h.01"/><path d="M10.29 3.86 1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0Z"/>
            
          </svg>
        </span>
        <p class="site-banner__text">
          This textbook is in <strong>beta</strong> ‚Äì content is actively being refined.
          
            <a class="site-banner__link" href="https://github.com/Eatham532/Software-Engineering-HSC-Textbook/issues/new/choose" target="_blank" rel="noopener">Report issues or suggestions</a>
          
        </p>
        <button type="button" class="site-banner__close" aria-label="Dismiss banner" title="Dismiss" data-banner-dismiss>&times;</button>
      </div>
    </div>
    <script>
      (function(){
        var banner=document.querySelector('[data-banner]');
        if(!banner) return;
        var version=banner.getAttribute('data-banner-version')||'1';
        var KEY='site_banner_dismissed_v'+version;
        try{ if(localStorage.getItem(KEY)){ banner.remove(); return;} }catch(e){}
        var btn=banner.querySelector('[data-banner-dismiss]');
        if(btn){ btn.addEventListener('click',function(){
          banner.classList.add('is-hiding');
          setTimeout(function(){ banner && banner.remove(); },200);
          try{ localStorage.setItem(KEY,'1'); }catch(e){}
        }); }
      })();
    </script>
  
  
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../../.." title="Software Engineering Textbook HSC" class="md-header__button md-logo" aria-label="Software Engineering Textbook HSC" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Software Engineering Textbook HSC
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Content
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9zM20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zm-9.15 3.96h2.3L12 9z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="indigo"  aria-label="Switch to system preference"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to system preference" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/Eatham532/Software-Engineering-HSC-Textbook/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    Eatham532/Software-Engineering-HSC-Textbook
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    

    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../.." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
    
  
  
    
    
      
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../../ProgrammingFundamentals/" class="md-tabs__link">
          
  
  
  Year 11

        </a>
      </li>
    
  

    
  

      
        
  
  
  
  
    
    
      
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../../Year12/ProgrammingForTheWeb/" class="md-tabs__link">
          
  
  
  Year 12

        </a>
      </li>
    
  

    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../../code-editor/" class="md-tabs__link">
        
  
  
    
  
  Code Editor

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../.." title="Software Engineering Textbook HSC" class="md-nav__button md-logo" aria-label="Software Engineering Textbook HSC" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Software Engineering Textbook HSC
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/Eatham532/Software-Engineering-HSC-Textbook/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    Eatham532/Software-Engineering-HSC-Textbook
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
    
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Year 11
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Year 11
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../../ProgrammingFundamentals/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Programming Fundamentals
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../../ObjectOrientedParadigm/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Object-Oriented Paradigm
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
      
      
    
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3" checked>
        
          
          <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Programming Mechatronics
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            Programming Mechatronics
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    
  
  
  
    <a href="../../Chapter-07-Mechatronics-foundations/07-01-Applications-of-mechatronic-systems/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Chapter 07 ‚Äî Mechatronics foundations
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    
  
  
  
    <a href="../../Chapter-08-Data-and-integration/08-01-Working-with-device-data-and-diagnostics/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Chapter 08 ‚Äî Data and integration
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

  

      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
      
      
    
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_4" checked>
        
          
          <label class="md-nav__link" for="__nav_2_3_4" id="__nav_2_3_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Chapter 09 ‚Äî Control algorithms
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_3_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2_3_4">
            <span class="md-nav__icon md-icon"></span>
            Chapter 09 ‚Äî Control algorithms
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../09-01-Open-vs-closed-loop-systems/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    9.1 Open vs closed loop systems
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../09-02-Autonomous-control-features/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    9.2 Autonomous control features
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
      
      
    
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_4_3" checked>
        
          
          <label class="md-nav__link" for="__nav_2_3_4_3" id="__nav_2_3_4_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    9.3 Algorithmic patterns control
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_3_4_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2_3_4_3">
            <span class="md-nav__icon md-icon"></span>
            9.3 Algorithmic patterns control
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Content
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Content
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#why-it-matters" class="md-nav__link">
    <span class="md-ellipsis">
      Why it matters
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#concepts" class="md-nav__link">
    <span class="md-ellipsis">
      Concepts
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Concepts">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#state-machines-managing-discrete-behaviours" class="md-nav__link">
    <span class="md-ellipsis">
      State machines: managing discrete behaviours
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#guided-example-conveyor-belt-state-machine" class="md-nav__link">
    <span class="md-ellipsis">
      Guided example: conveyor belt state machine
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pid-control-continuous-regulation" class="md-nav__link">
    <span class="md-ellipsis">
      PID control: continuous regulation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#guided-example-temperature-control-pid" class="md-nav__link">
    <span class="md-ellipsis">
      Guided example: temperature control PID
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#basic-scheduling-coordinating-multiple-tasks" class="md-nav__link">
    <span class="md-ellipsis">
      Basic scheduling: coordinating multiple tasks
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#guided-example-multi-sensor-monitoring-scheduler" class="md-nav__link">
    <span class="md-ellipsis">
      Guided example: multi-sensor monitoring scheduler
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#try-it" class="md-nav__link">
    <span class="md-ellipsis">
      Try it
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Try it">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#exercise-1-state-machine-design" class="md-nav__link">
    <span class="md-ellipsis">
      Exercise 1: state machine design
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exercise-2-pid-tuning-analysis" class="md-nav__link">
    <span class="md-ellipsis">
      Exercise 2: PID tuning analysis
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exercise-3-scheduling-optimisation" class="md-nav__link">
    <span class="md-ellipsis">
      Exercise 3: scheduling optimisation
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#recap" class="md-nav__link">
    <span class="md-ellipsis">
      Recap
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="quiz/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Quiz
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../09-04-Mechanical-constraints-and-subsystem-composition/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    9.4 Mechanical constraints and subsystem composition
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    
  
  
  
    <a href="../../Chapter-10-Programming-and-building/10-01-Simulations-and-prototypes-for-testing/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Chapter 10 ‚Äî Programming and building
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

  

      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    
  
  
  
    <a href="../../../../Year12/ProgrammingForTheWeb/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Year 12
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

  

      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../code-editor/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Code Editor
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#why-it-matters" class="md-nav__link">
    <span class="md-ellipsis">
      Why it matters
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#concepts" class="md-nav__link">
    <span class="md-ellipsis">
      Concepts
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Concepts">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#state-machines-managing-discrete-behaviours" class="md-nav__link">
    <span class="md-ellipsis">
      State machines: managing discrete behaviours
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#guided-example-conveyor-belt-state-machine" class="md-nav__link">
    <span class="md-ellipsis">
      Guided example: conveyor belt state machine
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pid-control-continuous-regulation" class="md-nav__link">
    <span class="md-ellipsis">
      PID control: continuous regulation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#guided-example-temperature-control-pid" class="md-nav__link">
    <span class="md-ellipsis">
      Guided example: temperature control PID
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#basic-scheduling-coordinating-multiple-tasks" class="md-nav__link">
    <span class="md-ellipsis">
      Basic scheduling: coordinating multiple tasks
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#guided-example-multi-sensor-monitoring-scheduler" class="md-nav__link">
    <span class="md-ellipsis">
      Guided example: multi-sensor monitoring scheduler
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#try-it" class="md-nav__link">
    <span class="md-ellipsis">
      Try it
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Try it">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#exercise-1-state-machine-design" class="md-nav__link">
    <span class="md-ellipsis">
      Exercise 1: state machine design
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exercise-2-pid-tuning-analysis" class="md-nav__link">
    <span class="md-ellipsis">
      Exercise 2: PID tuning analysis
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exercise-3-scheduling-optimisation" class="md-nav__link">
    <span class="md-ellipsis">
      Exercise 3: scheduling optimisation
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#recap" class="md-nav__link">
    <span class="md-ellipsis">
      Recap
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
    <a href="https://github.com/Eatham532/Software-Engineering-HSC-Textbook/edit/main/docs/Year11/ProgrammingMechatronics/Chapter-09-Control-algorithms/09-03-Algorithmic-patterns-control/index.md" title="Edit this page" class="md-content__button md-icon" rel="edit">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg>
    </a>
  
  
    
      
    
    <a href="https://github.com/Eatham532/Software-Engineering-HSC-Textbook/raw/main/docs/Year11/ProgrammingMechatronics/Chapter-09-Control-algorithms/09-03-Algorithmic-patterns-control/index.md" title="View source of this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.2 8.2 0 0 1-1.23-2"/></svg>
    </a>
  


<h1 id="93-algorithmic-patterns-for-control">9.3 Algorithmic patterns for control<a class="headerlink" href="#93-algorithmic-patterns-for-control" title="Permanent link">&para;</a></h1>
<h2 id="why-it-matters">Why it matters<a class="headerlink" href="#why-it-matters" title="Permanent link">&para;</a></h2>
<p>Control systems require structured approaches to manage complex behaviours and respond to changing conditions. Three fundamental algorithmic patterns form the foundation of most mechatronic control systems: state machines for managing discrete behaviours, PID controllers for continuous regulation, and scheduling algorithms for coordinating multiple tasks.</p>
<p>These patterns provide proven solutions to common control challenges, making systems more predictable, maintainable, and robust. Understanding when and how to apply each pattern is essential for designing effective mechatronic systems.</p>
<h2 id="concepts">Concepts<a class="headerlink" href="#concepts" title="Permanent link">&para;</a></h2>
<h3 id="state-machines-managing-discrete-behaviours">State machines: managing discrete behaviours<a class="headerlink" href="#state-machines-managing-discrete-behaviours" title="Permanent link">&para;</a></h3>
<p>State machines model systems that exist in distinct states and transition between them based on events or conditions. They&rsquo;re particularly useful for systems with clearly defined operating modes.</p>
<p><strong>Key components</strong>:</p>
<ul>
<li>
<p><strong>States</strong>: distinct conditions or modes the system can be in</p>
</li>
<li>
<p><strong>Transitions</strong>: rules for moving from one state to another</p>
</li>
<li>
<p><strong>Events</strong>: triggers that cause transitions</p>
</li>
<li>
<p><strong>Actions</strong>: activities performed when entering, exiting, or while in a state</p>
</li>
</ul>
<p><strong>Benefits</strong>:</p>
<ul>
<li>
<p>Clear, visual representation of system behaviour</p>
</li>
<li>
<p>Predictable responses to events</p>
</li>
<li>
<p>Easy to test and debug</p>
</li>
<li>
<p>Natural fit for many mechatronic applications</p>
</li>
</ul>
<div class="diagram-container" data-container-id="kroki-diagram-0"><button class="diagram-expand-btn" onclick="openDiagramModal('kroki-diagram-0')">üîç View Larger</button><div id="kroki-diagram-0" class="diagram-content"><p><svg xmlns="http://www.w3.org/2000/svg" contentStyleType="text/css" data-diagram-type="STATE" height="613px" preserveAspectRatio="xMaxYMax meet" style="width:1089px;height:613px;background:#FFFFFF;" version="1.1" viewBox="0 0 1089 613" width="1089px" zoomAndPan="magnify" id="Kroki" data-diagram-id="kroki-svg-0"><defs /><g><ellipse cx="717.97" cy="328.44" fill="#222222" rx="10" ry="10" style="stroke:#222222;stroke-width:1;" /><g id="Idle"><rect fill="#F1F1F1" height="50" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="50" x="650.97" y="430.44" /><line style="stroke:#181818;stroke-width:0.5;" x1="650.97" x2="700.97" y1="456.7369" y2="456.7369" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="25.5186" x="663.2107" y="448.4351">Idle</text></g><g id="Starting"><rect fill="#F1F1F1" height="50" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="75.8496" x="720.05" y="557.44" /><line style="stroke:#181818;stroke-width:0.5;" x1="720.05" x2="795.8996" y1="583.7369" y2="583.7369" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="55.8496" x="730.05" y="575.4351">Starting</text></g><g id="Running"><rect fill="#F1F1F1" height="78.2031" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="161.7031" x="415.12" y="7" /><line style="stroke:#181818;stroke-width:0.5;" x1="415.12" x2="576.8231" y1="33.2969" y2="33.2969" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="57.9961" x="466.9735" y="24.9951">Running</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="141.7031" x="420.12" y="49.4355">entry / enable_motors()</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="134.9648" x="420.12" y="63.4043">do / monitor_sensors()</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="134.7129" x="420.12" y="77.373">exit / disable_motors()</text></g><g id="Paused"><rect fill="#F1F1F1" height="64.2344" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="152.1934" x="531.88" y="162.21" /><line style="stroke:#181818;stroke-width:0.5;" x1="531.88" x2="684.0734" y1="188.5069" y2="188.5069" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="50.6885" x="582.6324" y="180.2051">Paused</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="132.1934" x="536.88" y="204.6455">entry / hold_position()</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="131.9707" x="536.88" y="218.6143">do / flash_status_led()</text></g><g id="Stopping"><rect fill="#F1F1F1" height="50" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="82.3643" x="447.79" y="303.44" /><line style="stroke:#181818;stroke-width:0.5;" x1="447.79" x2="530.1543" y1="329.7369" y2="329.7369" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="62.3643" x="457.79" y="321.4351">Stopping</text></g><g class="entity" data-entity="GMN2" data-source-line="21" data-uid="ent0003" id="entity_GMN2"><path d="M612.32,25.97 L612.32,42.1 L576.97,46.1 L612.32,50.1 L612.32,66.2356 A0,0 0 0 0 612.32,66.2356 L811.6257,66.2356 A0,0 0 0 0 811.6257,66.2356 L811.6257,35.97 L801.6257,25.97 L612.32,25.97 A0,0 0 0 0 612.32,25.97" fill="#FAFAFA" style="stroke:#181818;stroke-width:0.5;" /><path d="M801.6257,25.97 L801.6257,35.97 L811.6257,35.97 L801.6257,25.97" fill="#FAFAFA" style="stroke:#181818;stroke-width:0.5;" /><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="146.2246" x="618.32" y="43.0369">Main operational state</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="178.3057" x="618.32" y="58.1697">with continuous monitoring</text></g><g class="entity" data-entity="GMN5" data-source-line="22" data-uid="ent0006" id="entity_GMN5"><path d="M324.95,174.19 L324.95,214.4556 A0,0 0 0 0 324.95,214.4556 L496.9988,214.4556 A0,0 0 0 0 496.9988,214.4556 L496.9988,198.32 L531.79,194.32 L496.9988,190.32 L496.9988,184.19 L486.9988,174.19 L324.95,174.19 A0,0 0 0 0 324.95,174.19" fill="#FAFAFA" style="stroke:#181818;stroke-width:0.5;" /><path d="M486.9988,174.19 L486.9988,184.19 L496.9988,184.19 L486.9988,174.19" fill="#FAFAFA" style="stroke:#181818;stroke-width:0.5;" /><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="100.2041" x="330.95" y="191.2569">Temporary halt</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="151.0488" x="330.95" y="206.3897">with state preservation</text></g><g class="link" data-entity-1="*start*" data-entity-2="Idle" data-source-line="4" data-uid="lnk4" id="link_*start*_Idle"><path d="M715.42,338.23 C711.46,351.7 703.53,378.2 695.97,400.44 C692.66,410.19 690.8841,415.221 687.4241,424.461" fill="none" id="*start*-to-Idle" style="stroke:#181818;stroke-width:1;" /><polygon fill="#181818" points="685.32,430.08,692.2221,423.0543,687.0734,425.3975,684.7301,420.2488,685.32,430.08" style="stroke:#181818;stroke-width:1;" /></g><g class="link" data-entity-1="Idle" data-entity-2="Starting" data-source-line="6" data-uid="lnk6" id="link_Idle_Starting"><path d="M668.9,480.89 C666.14,495.29 665.25,513.38 672.97,527.44 C682.99,545.67 696.677,555.9699 714.227,564.6099" fill="none" id="Idle-to-Starting" style="stroke:#181818;stroke-width:1;" /><polygon fill="#181818" points="719.61,567.26,713.3022,559.6962,715.1241,565.0516,709.7687,566.8735,719.61,567.26" style="stroke:#181818;stroke-width:1;" /><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="139.8452" x="673.97" y="523.5069">power_on / initialize()</text></g><g class="link" data-entity-1="Starting" data-entity-2="Running" data-source-line="7" data-uid="lnk8" id="link_Starting_Running"><path d="M791.43,556.99 C801.11,548.55 810.95,538.42 817.97,527.44 C835.78,499.61 839.97,489.48 839.97,456.44 C839.97,193.32 839.97,193.32 839.97,193.32 C839.97,153.48 828.79,137.8 795.97,115.21 C721.58,63.98 682.31,108.23 594.97,85.21 C589.1,83.66 588.8027,83.7045 582.7927,81.7745" fill="none" id="Starting-to-Running" style="stroke:#181818;stroke-width:1;" /><polygon fill="#181818" points="577.08,79.94,584.426,86.5002,581.8406,81.4688,586.872,78.8833,577.08,79.94" style="stroke:#181818;stroke-width:1;" /><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="240.3096" x="840.97" y="333.0069">startup_complete / start_main_loop()</text></g><g class="link" data-entity-1="Running" data-entity-2="Paused" data-source-line="8" data-uid="lnk10" id="link_Running_Paused"><path d="M414.93,75.54 C385.81,90.26 364.08,109.83 381.97,132.21 C419.82,179.53 456.61,145.9 514.97,162.21 C520.38,163.72 520.2105,163.6114 525.7905,165.3114" fill="none" id="Running-to-Paused" style="stroke:#181818;stroke-width:1;" /><polygon fill="#181818" points="531.53,167.06,524.0864,160.6107,526.747,165.6028,521.7549,168.2635,531.53,167.06" style="stroke:#181818;stroke-width:1;" /><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="181.2573" x="382.97" y="128.2769">pause_button / save_state()</text></g><g class="link" data-entity-1="Paused" data-entity-2="Running" data-source-line="9" data-uid="lnk11" id="link_Paused_Running"><path d="M595.35,161.81 C588.65,146.95 579.59,129.41 568.97,115.21 C561.19,104.79 556.0381,98.7855 546.5081,89.6355" fill="none" id="Paused-to-Running" style="stroke:#181818;stroke-width:1;" /><polygon fill="#181818" points="542.18,85.48,545.9018,94.5986,545.7867,88.9429,551.4424,88.8278,542.18,85.48" style="stroke:#181818;stroke-width:1;" /><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="207.124" x="579.97" y="128.2769">resume_button / restore_state()</text></g><g class="link" data-entity-1="Running" data-entity-2="Stopping" data-source-line="10" data-uid="lnk13" id="link_Running_Stopping"><path d="M415.01,59.01 C310.32,76.25 136.9,111.72 98.97,162.21 C6,285.96 323.6219,317.5423 441.5919,324.9823" fill="none" id="Running-to-Stopping" style="stroke:#181818;stroke-width:1;" /><polygon fill="#181818" points="447.58,325.36,438.8496,320.8015,442.5899,325.0453,438.3461,328.7856,447.58,325.36" style="stroke:#181818;stroke-width:1;" /><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="206.521" x="99.97" y="198.8869">stop_button / begin_shutdown()</text></g><g class="link" data-entity-1="Paused" data-entity-2="Stopping" data-source-line="11" data-uid="lnk14" id="link_Paused_Stopping"><path d="M579.77,226.63 C558.74,249.98 534.4363,276.9725 515.0463,298.4925" fill="none" id="Paused-to-Stopping" style="stroke:#181818;stroke-width:1;" /><polygon fill="#181818" points="511.03,302.95,520.0261,298.9413,514.3769,299.2354,514.0828,293.5862,511.03,302.95" style="stroke:#181818;stroke-width:1;" /><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="206.521" x="552.97" y="269.5069">stop_button / begin_shutdown()</text></g><g class="link" data-entity-1="Stopping" data-entity-2="Idle" data-source-line="12" data-uid="lnk15" id="link_Stopping_Idle"><path d="M478.78,353.78 C474.29,368.67 472.01,387.32 481.97,400.44 C502.43,427.37 596.8586,443.6033 644.6486,450.3333" fill="none" id="Stopping-to-Idle" style="stroke:#181818;stroke-width:1;" /><polygon fill="#181818" points="650.59,451.17,642.2357,445.954,645.6389,450.4728,641.1201,453.8759,650.59,451.17" style="stroke:#181818;stroke-width:1;" /><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="204.8896" x="482.97" y="396.5069">shutdown_complete / cleanup()</text></g></g></svg></p></div></div>
<h3 id="guided-example-conveyor-belt-state-machine">Guided example: conveyor belt state machine<a class="headerlink" href="#guided-example-conveyor-belt-state-machine" title="Permanent link">&para;</a></h3>
<p>A conveyor belt system has several operational states based on safety sensors and user commands.</p>
<div class="highlight python-template" data-fence-type="template" data-language="python">
<pre><code class="language-python"><span class="kn">from</span><span class="w"> </span><span class="nn">enum</span><span class="w"> </span><span class="kn">import</span> <span class="n">Enum</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">time</span>

<span class="k">class</span><span class="w"> </span><span class="nc">ConveyorState</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
    <span class="n">STOPPED</span> <span class="o">=</span> <span class="s2">&quot;stopped&quot;</span>
    <span class="n">STARTING</span> <span class="o">=</span> <span class="s2">&quot;starting&quot;</span>
    <span class="n">RUNNING</span> <span class="o">=</span> <span class="s2">&quot;running&quot;</span>
    <span class="n">STOPPING</span> <span class="o">=</span> <span class="s2">&quot;stopping&quot;</span>
    <span class="n">ERROR</span> <span class="o">=</span> <span class="s2">&quot;error&quot;</span>

<span class="k">class</span><span class="w"> </span><span class="nc">ConveyorBelt</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="n">ConveyorState</span><span class="o">.</span><span class="n">STOPPED</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">speed</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">emergency_stop</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">safety_sensor</span> <span class="o">=</span> <span class="kc">True</span>  <span class="c1"># True = clear, False = blocked</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">start_time</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">handle_event</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Process events and handle state transitions&quot;&quot;&quot;</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Current state: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">value</span><span class="si">}</span><span class="s2">, Event: </span><span class="si">{</span><span class="n">event</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># Emergency stop overrides all other logic</span>
        <span class="k">if</span> <span class="n">event</span> <span class="o">==</span> <span class="s2">&quot;emergency_stop&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_transition_to</span><span class="p">(</span><span class="n">ConveyorState</span><span class="o">.</span><span class="n">ERROR</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="c1"># State-specific event handling</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">==</span> <span class="n">ConveyorState</span><span class="o">.</span><span class="n">STOPPED</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">event</span> <span class="o">==</span> <span class="s2">&quot;start_button&quot;</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">safety_sensor</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_transition_to</span><span class="p">(</span><span class="n">ConveyorState</span><span class="o">.</span><span class="n">STARTING</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">event</span> <span class="o">==</span> <span class="s2">&quot;start_button&quot;</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">safety_sensor</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Cannot start: safety sensor blocked&quot;</span><span class="p">)</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">==</span> <span class="n">ConveyorState</span><span class="o">.</span><span class="n">STARTING</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">event</span> <span class="o">==</span> <span class="s2">&quot;startup_complete&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_transition_to</span><span class="p">(</span><span class="n">ConveyorState</span><span class="o">.</span><span class="n">RUNNING</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">event</span> <span class="o">==</span> <span class="s2">&quot;stop_button&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_transition_to</span><span class="p">(</span><span class="n">ConveyorState</span><span class="o">.</span><span class="n">STOPPED</span><span class="p">)</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">==</span> <span class="n">ConveyorState</span><span class="o">.</span><span class="n">RUNNING</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">event</span> <span class="o">==</span> <span class="s2">&quot;stop_button&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_transition_to</span><span class="p">(</span><span class="n">ConveyorState</span><span class="o">.</span><span class="n">STOPPING</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">event</span> <span class="o">==</span> <span class="s2">&quot;safety_blocked&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_transition_to</span><span class="p">(</span><span class="n">ConveyorState</span><span class="o">.</span><span class="n">STOPPING</span><span class="p">)</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">==</span> <span class="n">ConveyorState</span><span class="o">.</span><span class="n">STOPPING</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">event</span> <span class="o">==</span> <span class="s2">&quot;stop_complete&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_transition_to</span><span class="p">(</span><span class="n">ConveyorState</span><span class="o">.</span><span class="n">STOPPED</span><span class="p">)</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">==</span> <span class="n">ConveyorState</span><span class="o">.</span><span class="n">ERROR</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">event</span> <span class="o">==</span> <span class="s2">&quot;reset_button&quot;</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">safety_sensor</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_transition_to</span><span class="p">(</span><span class="n">ConveyorState</span><span class="o">.</span><span class="n">STOPPED</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_transition_to</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">new_state</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle state transition with entry/exit actions&quot;&quot;&quot;</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Transitioning from </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">value</span><span class="si">}</span><span class="s2"> to </span><span class="si">{</span><span class="n">new_state</span><span class="o">.</span><span class="n">value</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># Exit actions for current state</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">==</span> <span class="n">ConveyorState</span><span class="o">.</span><span class="n">RUNNING</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Exiting RUNNING: disabling motor&quot;</span><span class="p">)</span>

        <span class="c1"># Entry actions for new state</span>
        <span class="k">if</span> <span class="n">new_state</span> <span class="o">==</span> <span class="n">ConveyorState</span><span class="o">.</span><span class="n">STARTING</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Entering STARTING: gradual speed increase&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">start_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">speed</span> <span class="o">=</span> <span class="mf">0.1</span>

        <span class="k">elif</span> <span class="n">new_state</span> <span class="o">==</span> <span class="n">ConveyorState</span><span class="o">.</span><span class="n">RUNNING</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Entering RUNNING: full speed operation&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">speed</span> <span class="o">=</span> <span class="mf">1.0</span>

        <span class="k">elif</span> <span class="n">new_state</span> <span class="o">==</span> <span class="n">ConveyorState</span><span class="o">.</span><span class="n">STOPPING</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Entering STOPPING: gradual speed decrease&quot;</span><span class="p">)</span>

        <span class="k">elif</span> <span class="n">new_state</span> <span class="o">==</span> <span class="n">ConveyorState</span><span class="o">.</span><span class="n">STOPPED</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Entering STOPPED: motor off&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">speed</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="k">elif</span> <span class="n">new_state</span> <span class="o">==</span> <span class="n">ConveyorState</span><span class="o">.</span><span class="n">ERROR</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Entering ERROR: emergency shutdown&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">speed</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">emergency_stop</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="n">new_state</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Called regularly to handle time-based transitions&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">==</span> <span class="n">ConveyorState</span><span class="o">.</span><span class="n">STARTING</span><span class="p">:</span>
            <span class="c1"># Automatic transition after startup delay</span>
            <span class="k">if</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">start_time</span> <span class="o">&gt;</span> <span class="mf">2.0</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">handle_event</span><span class="p">(</span><span class="s2">&quot;startup_complete&quot;</span><span class="p">)</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">==</span> <span class="n">ConveyorState</span><span class="o">.</span><span class="n">STOPPING</span><span class="p">:</span>
            <span class="c1"># Simulate gradual deceleration</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">speed</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">speed</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">speed</span> <span class="o">-</span> <span class="mf">0.1</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">handle_event</span><span class="p">(</span><span class="s2">&quot;stop_complete&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_status</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s1">&#39;state&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
            <span class="s1">&#39;speed&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">speed</span><span class="p">,</span>
            <span class="s1">&#39;emergency_stop&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">emergency_stop</span><span class="p">,</span>
            <span class="s1">&#39;safety_clear&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">safety_sensor</span>
        <span class="p">}</span>

<span class="c1"># Demonstrate state machine operation</span>
<span class="n">conveyor</span> <span class="o">=</span> <span class="n">ConveyorBelt</span><span class="p">()</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;=== Conveyor Belt State Machine Demo ===&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Initial status: </span><span class="si">{</span><span class="n">conveyor</span><span class="o">.</span><span class="n">get_status</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># Normal startup sequence</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">--- Normal Startup ---&quot;</span><span class="p">)</span>
<span class="n">conveyor</span><span class="o">.</span><span class="n">handle_event</span><span class="p">(</span><span class="s2">&quot;start_button&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Status: </span><span class="si">{</span><span class="n">conveyor</span><span class="o">.</span><span class="n">get_status</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># Simulate startup completion</span>
<span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span>  <span class="c1"># Brief pause for demo</span>
<span class="n">conveyor</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>  <span class="c1"># This would normally be called by a timer</span>
<span class="n">conveyor</span><span class="o">.</span><span class="n">handle_event</span><span class="p">(</span><span class="s2">&quot;startup_complete&quot;</span><span class="p">)</span>  <span class="c1"># Manual trigger for demo</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Status: </span><span class="si">{</span><span class="n">conveyor</span><span class="o">.</span><span class="n">get_status</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># Normal shutdown</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">--- Normal Shutdown ---&quot;</span><span class="p">)</span>
<span class="n">conveyor</span><span class="o">.</span><span class="n">handle_event</span><span class="p">(</span><span class="s2">&quot;stop_button&quot;</span><span class="p">)</span>
<span class="n">conveyor</span><span class="o">.</span><span class="n">handle_event</span><span class="p">(</span><span class="s2">&quot;stop_complete&quot;</span><span class="p">)</span>  <span class="c1"># Manual trigger for demo</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Status: </span><span class="si">{</span><span class="n">conveyor</span><span class="o">.</span><span class="n">get_status</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># Emergency scenario</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">--- Emergency Stop ---&quot;</span><span class="p">)</span>
<span class="n">conveyor</span><span class="o">.</span><span class="n">handle_event</span><span class="p">(</span><span class="s2">&quot;start_button&quot;</span><span class="p">)</span>
<span class="n">conveyor</span><span class="o">.</span><span class="n">handle_event</span><span class="p">(</span><span class="s2">&quot;startup_complete&quot;</span><span class="p">)</span>
<span class="n">conveyor</span><span class="o">.</span><span class="n">handle_event</span><span class="p">(</span><span class="s2">&quot;emergency_stop&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Status: </span><span class="si">{</span><span class="n">conveyor</span><span class="o">.</span><span class="n">get_status</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre>
</div>
<h3 id="pid-control-continuous-regulation">PID control: continuous regulation<a class="headerlink" href="#pid-control-continuous-regulation" title="Permanent link">&para;</a></h3>
<p>PID (Proportional-Integral-Derivative) controllers provide smooth, continuous regulation of system variables by calculating corrections based on error analysis.</p>
<p><strong>Components</strong>:</p>
<ul>
<li>
<p><strong>Proportional (P)</strong>: responds to current error magnitude</p>
</li>
<li>
<p><strong>Integral (I)</strong>: responds to accumulated error over time</p>
</li>
<li>
<p><strong>Derivative (D)</strong>: responds to rate of error change</p>
</li>
</ul>
<p><strong>Control equation</strong>:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>output = Kp √ó error + Ki √ó ‚à´error dt + Kd √ó (d_error/dt)
</span></code></pre></div>
<p><strong>Conceptual understanding</strong>:</p>
<ul>
<li>
<p><strong>P term</strong>: immediate correction proportional to how far off you are</p>
</li>
<li>
<p><strong>I term</strong>: correction for persistent offset (eliminates steady-state error)</p>
</li>
<li>
<p><strong>D term</strong>: dampening to prevent overshoot and oscillation</p>
</li>
</ul>
<div class="diagram-container" data-container-id="kroki-diagram-1"><button class="diagram-expand-btn" onclick="openDiagramModal('kroki-diagram-1')">üîç View Larger</button><div id="kroki-diagram-1" class="diagram-content"><p><svg xmlns="http://www.w3.org/2000/svg" contentStyleType="text/css" data-diagram-type="DESCRIPTION" height="641px" preserveAspectRatio="xMaxYMax meet" style="width:889px;height:641px;background:#FFFFFF;" version="1.1" viewBox="0 0 889 641" width="889px" zoomAndPan="magnify" id="Kroki" data-diagram-id="kroki-svg-1"><defs /><g><g class="cluster" data-entity="PID Controller" data-source-line="4" data-uid="ent0002" id="cluster_PID Controller"><path d="M8.5,6 L120.5361,6 A3.75,3.75 0 0 1 123.0361,8.5 L130.0361,28.2969 L474.5,28.2969 A2.5,2.5 0 0 1 477,30.7969 L477,632.28 A2.5,2.5 0 0 1 474.5,634.78 L8.5,634.78 A2.5,2.5 0 0 1 6,632.28 L6,8.5 A2.5,2.5 0 0 1 8.5,6" fill="none" style="stroke:#000000;stroke-width:1.5;" /><line style="stroke:#000000;stroke-width:1.5;" x1="6" x2="130.0361" y1="28.2969" y2="28.2969" /><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="111.0361" x="10" y="20.9951">PID Controller</text></g><g class="entity" data-entity="Setpoint" data-source-line="5" data-uid="ent0003" id="entity_Setpoint"><rect fill="#F1F1F1" height="46.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="98.6934" x="118.65" y="147.3" /><rect fill="#F1F1F1" height="10" style="stroke:#181818;stroke-width:0.5;" width="15" x="197.3434" y="152.3" /><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="195.3434" y="154.3" /><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="195.3434" y="158.3" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="58.6934" x="133.65" y="180.2951">Setpoint</text></g><g class="entity" data-entity="Error Calculator" data-source-line="5" data-uid="ent0004" id="entity_Error Calculator"><rect fill="#F1F1F1" height="46.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="150.2227" x="193.89" y="253.59" /><rect fill="#F1F1F1" height="10" style="stroke:#181818;stroke-width:0.5;" width="15" x="324.1127" y="258.59" /><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="322.1127" y="260.59" /><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="322.1127" y="264.59" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="110.2227" x="208.89" y="286.5851">Error Calculator</text></g><g class="entity" data-entity="Sensor Reading" data-source-line="6" data-uid="ent0006" id="entity_Sensor Reading"><rect fill="#F1F1F1" height="46.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="149.8945" x="252.05" y="147.3" /><rect fill="#F1F1F1" height="10" style="stroke:#181818;stroke-width:0.5;" width="15" x="381.9445" y="152.3" /><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="379.9445" y="154.3" /><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="379.9445" y="158.3" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="109.8945" x="267.05" y="180.2951">Sensor Reading</text></g><g class="entity" data-entity="Proportional" data-source-line="7" data-uid="ent0008" id="entity_Proportional"><rect fill="#F1F1F1" height="46.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="125.2578" x="206.37" y="359.89" /><rect fill="#F1F1F1" height="10" style="stroke:#181818;stroke-width:0.5;" width="15" x="311.6278" y="364.89" /><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="309.6278" y="366.89" /><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="309.6278" y="370.89" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="85.2578" x="221.37" y="392.8851">Proportional</text></g><g class="entity" data-entity="Integral" data-source-line="8" data-uid="ent0010" id="entity_Integral"><rect fill="#F1F1F1" height="46.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="94.2158" x="366.89" y="359.89" /><rect fill="#F1F1F1" height="10" style="stroke:#181818;stroke-width:0.5;" width="15" x="441.1058" y="364.89" /><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="439.1058" y="366.89" /><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="439.1058" y="370.89" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="54.2158" x="381.89" y="392.8851">Integral</text></g><g class="entity" data-entity="Derivative" data-source-line="9" data-uid="ent0012" id="entity_Derivative"><rect fill="#F1F1F1" height="46.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="112.1807" x="58.91" y="359.89" /><rect fill="#F1F1F1" height="10" style="stroke:#181818;stroke-width:0.5;" width="15" x="151.0907" y="364.89" /><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="149.0907" y="366.89" /><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="149.0907" y="370.89" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="72.1807" x="73.91" y="392.8851">Derivative</text></g><g class="entity" data-entity="Summer" data-source-line="11" data-uid="ent0014" id="entity_Summer"><rect fill="#F1F1F1" height="46.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="99.4043" x="142.3" y="466.19" /><rect fill="#F1F1F1" height="10" style="stroke:#181818;stroke-width:0.5;" width="15" x="221.7043" y="471.19" /><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="219.7043" y="473.19" /><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="219.7043" y="477.19" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="59.4043" x="157.3" y="499.1851">Summer</text></g><g class="entity" data-entity="Output Limiter" data-source-line="15" data-uid="ent0018" id="entity_Output Limiter"><rect fill="#F1F1F1" height="46.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="142.1563" x="32.92" y="572.48" /><rect fill="#F1F1F1" height="10" style="stroke:#181818;stroke-width:0.5;" width="15" x="155.0763" y="577.48" /><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="153.0763" y="579.48" /><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="153.0763" y="583.48" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="102.1563" x="47.92" y="605.4751">Output Limiter</text></g><g class="entity" data-entity="Plant/System" data-source-line="16" data-uid="ent0020" id="entity_Plant/System"><rect fill="#F1F1F1" height="46.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="132.1963" x="260.9" y="41" /><rect fill="#F1F1F1" height="10" style="stroke:#181818;stroke-width:0.5;" width="15" x="373.0963" y="46" /><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="371.0963" y="48" /><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="371.0963" y="52" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="92.1963" x="275.9" y="73.9951">Plant/System</text></g><g class="entity" data-entity="GMN23" data-source-line="20" data-uid="ent0024" id="entity_GMN23"><path d="M649.54,476.77 L649.54,501.9028 L738.4599,501.9028 L738.4599,486.77 L728.4599,476.77 L649.54,476.77" fill="#FAFAFA" style="stroke:#181818;stroke-width:0.5;" /><path d="M728.4599,476.77 L728.4599,486.77 L738.4599,486.77 L728.4599,476.77" fill="#FAFAFA" style="stroke:#181818;stroke-width:1;" /><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="67.9199" x="655.54" y="493.8369">Kp &#215; error</text></g><g class="entity" data-entity="GMN26" data-source-line="21" data-uid="ent0027" id="entity_GMN26"><path d="M773.73,476.77 L773.73,501.9028 L882.2642,501.9028 L882.2642,486.77 L872.2642,476.77 L773.73,476.77" fill="#FAFAFA" style="stroke:#181818;stroke-width:0.5;" /><path d="M872.2642,476.77 L872.2642,486.77 L882.2642,486.77 L872.2642,476.77" fill="#FAFAFA" style="stroke:#181818;stroke-width:1;" /><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="87.5342" x="779.73" y="493.8369">Ki &#215; &#8747;error dt</text></g><g class="entity" data-entity="GMN29" data-source-line="22" data-uid="ent0030" id="entity_GMN29"><path d="M493.3,476.77 L493.3,501.9028 L614.7009,501.9028 L614.7009,486.77 L604.7009,476.77 L493.3,476.77" fill="#FAFAFA" style="stroke:#181818;stroke-width:0.5;" /><path d="M604.7009,476.77 L604.7009,486.77 L614.7009,486.77 L604.7009,476.77" fill="#FAFAFA" style="stroke:#181818;stroke-width:1;" /><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="100.4009" x="499.3" y="493.8369">Kd &#215; d_error/dt</text></g><g class="entity" data-entity="GMN32" data-source-line="23" data-uid="ent0033" id="entity_GMN32"><path d="M492.93,44.01 L492.93,60.15 L393.46,64.15 L492.93,68.15 L492.93,84.2756 A0,0 0 0 0 492.93,84.2756 L699.0657,84.2756 A0,0 0 0 0 699.0657,84.2756 L699.0657,54.01 L689.0657,44.01 L492.93,44.01 A0,0 0 0 0 492.93,44.01" fill="#FAFAFA" style="stroke:#181818;stroke-width:0.5;" /><path d="M689.0657,44.01 L689.0657,54.01 L699.0657,54.01 L689.0657,44.01" fill="#FAFAFA" style="stroke:#181818;stroke-width:0.5;" /><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="185.1357" x="498.93" y="61.0769">The system being controlled</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="132.7041" x="498.93" y="76.2097">(motor, heater, etc.)</text></g><g class="link" data-entity-1="Setpoint" data-entity-2="Error Calculator" data-source-line="5" data-uid="lnk5" id="link_Setpoint_Error Calculator"><path d="M189.92,194.07 C206.86,211.57 226.0257,231.3601 242.9557,248.8401" fill="none" id="Setpoint-to-Error Calculator" style="stroke:#181818;stroke-width:1;" /><polygon fill="#181818" points="247.13,253.15,243.7418,243.9023,243.6514,249.5584,237.9953,249.468,247.13,253.15" style="stroke:#181818;stroke-width:1;" /></g><g class="link" data-entity-1="Sensor Reading" data-entity-2="Error Calculator" data-source-line="6" data-uid="lnk7" id="link_Sensor Reading_Error Calculator"><path d="M314.41,194.07 C304.69,211.57 294.1959,230.4262 284.4759,247.9062" fill="none" id="Sensor Reading-to-Error Calculator" style="stroke:#181818;stroke-width:1;" /><polygon fill="#181818" points="281.56,253.15,289.4297,247.2282,283.9899,248.7802,282.438,243.3404,281.56,253.15" style="stroke:#181818;stroke-width:1;" /></g><g class="link" data-entity-1="Error Calculator" data-entity-2="Proportional" data-source-line="7" data-uid="lnk9" id="link_Error Calculator_Proportional"><path d="M269,300.37 C269,317.87 269,335.97 269,353.45" fill="none" id="Error Calculator-to-Proportional" style="stroke:#181818;stroke-width:1;" /><polygon fill="#181818" points="269,359.45,273,350.45,269,354.45,265,350.45,269,359.45" style="stroke:#181818;stroke-width:1;" /></g><g class="link" data-entity-1="Error Calculator" data-entity-2="Integral" data-source-line="8" data-uid="lnk11" id="link_Error Calculator_Integral"><path d="M300.46,300.37 C324.78,317.87 353.4186,338.4672 377.7286,355.9472" fill="none" id="Error Calculator-to-Integral" style="stroke:#181818;stroke-width:1;" /><polygon fill="#181818" points="382.6,359.45,377.6281,350.9482,378.5405,356.531,372.9577,357.4435,382.6,359.45" style="stroke:#181818;stroke-width:1;" /></g><g class="link" data-entity-1="Error Calculator" data-entity-2="Derivative" data-source-line="9" data-uid="lnk13" id="link_Error Calculator_Derivative"><path d="M235.58,300.37 C209.75,317.87 179.1385,338.6064 153.3185,356.0864" fill="none" id="Error Calculator-to-Derivative" style="stroke:#181818;stroke-width:1;" /><polygon fill="#181818" points="148.35,359.45,158.0452,357.7169,152.4904,356.647,153.5603,351.0922,148.35,359.45" style="stroke:#181818;stroke-width:1;" /></g><g class="link" data-entity-1="Proportional" data-entity-2="Summer" data-source-line="11" data-uid="lnk15" id="link_Proportional_Summer"><path d="M252.29,406.67 C239.38,424.16 225.1428,443.4423 212.2428,460.9223" fill="none" id="Proportional-to-Summer" style="stroke:#181818;stroke-width:1;" /><polygon fill="#181818" points="208.68,465.75,217.2426,460.8836,211.649,461.7269,210.8057,456.1333,208.68,465.75" style="stroke:#181818;stroke-width:1;" /></g><g class="link" data-entity-1="Integral" data-entity-2="Summer" data-source-line="12" data-uid="lnk16" id="link_Integral_Summer"><path d="M366.65,406.28 C329.34,423.81 282.9605,445.5985 245.4805,463.2085" fill="none" id="Integral-to-Summer" style="stroke:#181818;stroke-width:1;" /><polygon fill="#181818" points="240.05,465.76,249.8967,465.553,244.5754,463.6337,246.4947,458.3124,240.05,465.76" style="stroke:#181818;stroke-width:1;" /></g><g class="link" data-entity-1="Derivative" data-entity-2="Summer" data-source-line="13" data-uid="lnk17" id="link_Derivative_Summer"><path d="M131.71,406.67 C144.62,424.16 158.8572,443.4423 171.7572,460.9223" fill="none" id="Derivative-to-Summer" style="stroke:#181818;stroke-width:1;" /><polygon fill="#181818" points="175.32,465.75,173.1943,456.1333,172.351,461.7269,166.7574,460.8836,175.32,465.75" style="stroke:#181818;stroke-width:1;" /></g><g class="link" data-entity-1="Summer" data-entity-2="Output Limiter" data-source-line="15" data-uid="lnk19" id="link_Summer_Output Limiter"><path d="M172.91,512.97 C158.14,530.46 141.6794,549.9744 126.9294,567.4544" fill="none" id="Summer-to-Output Limiter" style="stroke:#181818;stroke-width:1;" /><polygon fill="#181818" points="123.06,572.04,131.9212,567.7412,126.2845,568.2187,125.8071,562.582,123.06,572.04" style="stroke:#181818;stroke-width:1;" /></g><g class="link" data-entity-1="Output Limiter" data-entity-2="Plant/System" data-source-line="16" data-uid="lnk21" id="link_Output Limiter_Plant/System"><path d="M88.95,572.05 C65.53,534.63 23,456.7 23,384.04 C23,275.74 23,275.74 23,275.74 C23,208.95 49.36,189.65 101,147.3 C147.08,109.51 206.1981,89.6883 254.6581,78.3383" fill="none" id="Output Limiter-to-Plant/System" style="stroke:#181818;stroke-width:1;" /><polygon fill="#181818" points="260.5,76.97,250.825,75.1278,255.6317,78.1102,252.6493,82.917,260.5,76.97" style="stroke:#181818;stroke-width:1;" /></g><g class="link" data-entity-1="Plant/System" data-entity-2="Sensor Reading" data-source-line="17" data-uid="lnk22" id="link_Plant/System_Sensor Reading"><path d="M327,87.78 C327,105.27 327,123.37 327,140.86" fill="none" id="Plant/System-to-Sensor Reading" style="stroke:#181818;stroke-width:1;" /><polygon fill="#181818" points="327,146.86,331,137.86,327,141.86,323,137.86,327,146.86" style="stroke:#181818;stroke-width:1;" /></g><g class="link" data-entity-1="Proportional" data-entity-2="GMN23" data-source-line="20" data-uid="lnk25" id="link_Proportional_GMN23"><path d="M331.79,401.81 C337.6,403.34 343.4,404.82 349,406.19 C473.9,436.69 508.29,431.15 632,466.19 C642.23,469.08 653.21,472.8 663.04,476.35" fill="none" id="Proportional-GMN23" style="stroke:#181818;stroke-width:1;stroke-dasharray:7.0,7.0;" /></g><g class="link" data-entity-1="Integral" data-entity-2="GMN26" data-source-line="21" data-uid="lnk28" id="link_Integral_GMN26"><path d="M461.54,394.47 C527.82,409.23 651.6,437.62 756,466.19 C767.23,469.26 779.35,472.87 790.39,476.28" fill="none" id="Integral-GMN26" style="stroke:#181818;stroke-width:1;stroke-dasharray:7.0,7.0;" /></g><g class="link" data-entity-1="Derivative" data-entity-2="GMN29" data-source-line="22" data-uid="lnk31" id="link_Derivative_GMN29"><path d="M171.43,401.47 C177.34,403.13 183.28,404.74 189,406.19 C315.74,438.29 350.08,434.76 477,466.19 C489.15,469.2 502.28,472.83 514.19,476.27" fill="none" id="Derivative-GMN29" style="stroke:#181818;stroke-width:1;stroke-dasharray:7.0,7.0;" /></g></g></svg></p></div></div>
<h3 id="guided-example-temperature-control-pid">Guided example: temperature control PID<a class="headerlink" href="#guided-example-temperature-control-pid" title="Permanent link">&para;</a></h3>
<p>A heating system needs to maintain a target temperature using PID control.</p>
<div class="highlight python-template" data-fence-type="template" data-language="python">
<pre><code class="language-python"><span class="kn">import</span><span class="w"> </span><span class="nn">time</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">math</span>

<span class="k">class</span><span class="w"> </span><span class="nc">PIDController</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">kp</span><span class="p">,</span> <span class="n">ki</span><span class="p">,</span> <span class="n">kd</span><span class="p">,</span> <span class="n">setpoint</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="c1"># PID coefficients</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">kp</span> <span class="o">=</span> <span class="n">kp</span>  <span class="c1"># Proportional gain</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ki</span> <span class="o">=</span> <span class="n">ki</span>  <span class="c1"># Integral gain  </span>
        <span class="bp">self</span><span class="o">.</span><span class="n">kd</span> <span class="o">=</span> <span class="n">kd</span>  <span class="c1"># Derivative gain</span>

        <span class="c1"># Control variables</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setpoint</span> <span class="o">=</span> <span class="n">setpoint</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">previous_error</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">integral</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">previous_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>

        <span class="c1"># Output limits</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">output_min</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">output_max</span> <span class="o">=</span> <span class="mi">100</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">measured_value</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Calculate PID output based on current measurement&quot;&quot;&quot;</span>
        <span class="n">current_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="n">dt</span> <span class="o">=</span> <span class="n">current_time</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">previous_time</span>

        <span class="c1"># Calculate error</span>
        <span class="n">error</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">setpoint</span> <span class="o">-</span> <span class="n">measured_value</span>

        <span class="c1"># Proportional term</span>
        <span class="n">proportional</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">kp</span> <span class="o">*</span> <span class="n">error</span>

        <span class="c1"># Integral term (accumulated error over time)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">integral</span> <span class="o">+=</span> <span class="n">error</span> <span class="o">*</span> <span class="n">dt</span>
        <span class="n">integral_term</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ki</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">integral</span>

        <span class="c1"># Derivative term (rate of error change)</span>
        <span class="k">if</span> <span class="n">dt</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">derivative</span> <span class="o">=</span> <span class="p">(</span><span class="n">error</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">previous_error</span><span class="p">)</span> <span class="o">/</span> <span class="n">dt</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">derivative</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">derivative_term</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">kd</span> <span class="o">*</span> <span class="n">derivative</span>

        <span class="c1"># Calculate total output</span>
        <span class="n">output</span> <span class="o">=</span> <span class="n">proportional</span> <span class="o">+</span> <span class="n">integral_term</span> <span class="o">+</span> <span class="n">derivative_term</span>

        <span class="c1"># Apply output limits</span>
        <span class="n">output</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">output_min</span><span class="p">,</span> <span class="nb">min</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">output_max</span><span class="p">,</span> <span class="n">output</span><span class="p">))</span>

        <span class="c1"># Store values for next iteration</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">previous_error</span> <span class="o">=</span> <span class="n">error</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">previous_time</span> <span class="o">=</span> <span class="n">current_time</span>

        <span class="k">return</span> <span class="n">output</span><span class="p">,</span> <span class="p">{</span>
            <span class="s1">&#39;error&#39;</span><span class="p">:</span> <span class="n">error</span><span class="p">,</span>
            <span class="s1">&#39;proportional&#39;</span><span class="p">:</span> <span class="n">proportional</span><span class="p">,</span>
            <span class="s1">&#39;integral&#39;</span><span class="p">:</span> <span class="n">integral_term</span><span class="p">,</span>
            <span class="s1">&#39;derivative&#39;</span><span class="p">:</span> <span class="n">derivative_term</span><span class="p">,</span>
            <span class="s1">&#39;total_output&#39;</span><span class="p">:</span> <span class="n">output</span>
        <span class="p">}</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">set_tuning</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">kp</span><span class="p">,</span> <span class="n">ki</span><span class="p">,</span> <span class="n">kd</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Update PID tuning parameters&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">kp</span> <span class="o">=</span> <span class="n">kp</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ki</span> <span class="o">=</span> <span class="n">ki</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">kd</span> <span class="o">=</span> <span class="n">kd</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Reset integral and derivative terms&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">integral</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">previous_error</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">previous_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>

<span class="k">class</span><span class="w"> </span><span class="nc">HeatingSystem</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Simulate a heating system with thermal dynamics&quot;&quot;&quot;</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">temperature</span> <span class="o">=</span> <span class="mf">20.0</span>  <span class="c1"># Start at room temperature</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ambient_temp</span> <span class="o">=</span> <span class="mf">20.0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">thermal_mass</span> <span class="o">=</span> <span class="mf">0.95</span>  <span class="c1"># How slowly temperature changes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">heat_efficiency</span> <span class="o">=</span> <span class="mf">0.5</span>  <span class="c1"># How effectively heat input raises temp</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">apply_heat</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">heat_percentage</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Apply heat and update temperature (simplified physics)&quot;&quot;&quot;</span>
        <span class="c1"># Heat input effect</span>
        <span class="n">heat_input</span> <span class="o">=</span> <span class="n">heat_percentage</span> <span class="o">/</span> <span class="mf">100.0</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">heat_efficiency</span>

        <span class="c1"># Cooling toward ambient temperature</span>
        <span class="n">cooling</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">temperature</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">ambient_temp</span><span class="p">)</span> <span class="o">*</span> <span class="mf">0.02</span>

        <span class="c1"># Update temperature with thermal mass</span>
        <span class="n">temp_change</span> <span class="o">=</span> <span class="n">heat_input</span> <span class="o">-</span> <span class="n">cooling</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">temperature</span> <span class="o">+=</span> <span class="n">temp_change</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">thermal_mass</span><span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">temperature</span>

<span class="c1"># Demonstrate PID temperature control</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;=== PID Temperature Control Demo ===&quot;</span><span class="p">)</span>

<span class="c1"># Create PID controller and heating system</span>
<span class="c1"># PID tuning: start with P-only, then add I and D</span>
<span class="n">pid</span> <span class="o">=</span> <span class="n">PIDController</span><span class="p">(</span><span class="n">kp</span><span class="o">=</span><span class="mf">2.0</span><span class="p">,</span> <span class="n">ki</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">kd</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">setpoint</span><span class="o">=</span><span class="mf">50.0</span><span class="p">)</span>
<span class="n">heater</span> <span class="o">=</span> <span class="n">HeatingSystem</span><span class="p">()</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Target temperature: </span><span class="si">{</span><span class="n">pid</span><span class="o">.</span><span class="n">setpoint</span><span class="si">}</span><span class="s2">¬∞C&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Starting temperature: </span><span class="si">{</span><span class="n">heater</span><span class="o">.</span><span class="n">temperature</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2">¬∞C&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">()</span>

<span class="c1"># Simulate control loop</span>
<span class="k">for</span> <span class="n">step</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">20</span><span class="p">):</span>
    <span class="c1"># Get current temperature</span>
    <span class="n">current_temp</span> <span class="o">=</span> <span class="n">heater</span><span class="o">.</span><span class="n">temperature</span>

    <span class="c1"># Calculate PID output</span>
    <span class="n">heat_output</span><span class="p">,</span> <span class="n">debug_info</span> <span class="o">=</span> <span class="n">pid</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">current_temp</span><span class="p">)</span>

    <span class="c1"># Apply heat to system</span>
    <span class="n">new_temp</span> <span class="o">=</span> <span class="n">heater</span><span class="o">.</span><span class="n">apply_heat</span><span class="p">(</span><span class="n">heat_output</span><span class="p">)</span>

    <span class="c1"># Display results every few steps</span>
    <span class="k">if</span> <span class="n">step</span> <span class="o">%</span> <span class="mi">3</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Step </span><span class="si">{</span><span class="n">step</span><span class="si">:</span><span class="s2">2d</span><span class="si">}</span><span class="s2">: Temp=</span><span class="si">{</span><span class="n">current_temp</span><span class="si">:</span><span class="s2">5.1f</span><span class="si">}</span><span class="s2">¬∞C, &quot;</span>
              <span class="sa">f</span><span class="s2">&quot;Error=</span><span class="si">{</span><span class="n">debug_info</span><span class="p">[</span><span class="s1">&#39;error&#39;</span><span class="p">]</span><span class="si">:</span><span class="s2">5.1f</span><span class="si">}</span><span class="s2">, &quot;</span>
              <span class="sa">f</span><span class="s2">&quot;Heat=</span><span class="si">{</span><span class="n">heat_output</span><span class="si">:</span><span class="s2">5.1f</span><span class="si">}</span><span class="s2">%, &quot;</span>
              <span class="sa">f</span><span class="s2">&quot;P=</span><span class="si">{</span><span class="n">debug_info</span><span class="p">[</span><span class="s1">&#39;proportional&#39;</span><span class="p">]</span><span class="si">:</span><span class="s2">5.1f</span><span class="si">}</span><span class="s2">, &quot;</span>
              <span class="sa">f</span><span class="s2">&quot;I=</span><span class="si">{</span><span class="n">debug_info</span><span class="p">[</span><span class="s1">&#39;integral&#39;</span><span class="p">]</span><span class="si">:</span><span class="s2">5.1f</span><span class="si">}</span><span class="s2">, &quot;</span>
              <span class="sa">f</span><span class="s2">&quot;D=</span><span class="si">{</span><span class="n">debug_info</span><span class="p">[</span><span class="s1">&#39;derivative&#39;</span><span class="p">]</span><span class="si">:</span><span class="s2">5.1f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Small delay to simulate real-time</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.01</span><span class="p">)</span>

<span class="nb">print</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Final temperature: </span><span class="si">{</span><span class="n">heater</span><span class="o">.</span><span class="n">temperature</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2">¬∞C&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Temperature error: </span><span class="si">{</span><span class="nb">abs</span><span class="p">(</span><span class="n">pid</span><span class="o">.</span><span class="n">setpoint</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">heater</span><span class="o">.</span><span class="n">temperature</span><span class="p">)</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2">¬∞C&quot;</span><span class="p">)</span>

<span class="c1"># Demonstrate the effect of different tuning</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">=== PID Tuning Comparison ===&quot;</span><span class="p">)</span>
<span class="n">tuning_sets</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;P-only&quot;</span><span class="p">,</span> <span class="s2">&quot;kp&quot;</span><span class="p">:</span> <span class="mf">3.0</span><span class="p">,</span> <span class="s2">&quot;ki&quot;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span> <span class="s2">&quot;kd&quot;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;PI&quot;</span><span class="p">,</span> <span class="s2">&quot;kp&quot;</span><span class="p">:</span> <span class="mf">2.0</span><span class="p">,</span> <span class="s2">&quot;ki&quot;</span><span class="p">:</span> <span class="mf">0.1</span><span class="p">,</span> <span class="s2">&quot;kd&quot;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;PID&quot;</span><span class="p">,</span> <span class="s2">&quot;kp&quot;</span><span class="p">:</span> <span class="mf">2.0</span><span class="p">,</span> <span class="s2">&quot;ki&quot;</span><span class="p">:</span> <span class="mf">0.1</span><span class="p">,</span> <span class="s2">&quot;kd&quot;</span><span class="p">:</span> <span class="mf">0.5</span><span class="p">}</span>
<span class="p">]</span>

<span class="k">for</span> <span class="n">tuning</span> <span class="ow">in</span> <span class="n">tuning_sets</span><span class="p">:</span>
    <span class="c1"># Reset system</span>
    <span class="n">heater</span><span class="o">.</span><span class="n">temperature</span> <span class="o">=</span> <span class="mf">20.0</span>
    <span class="n">pid</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
    <span class="n">pid</span><span class="o">.</span><span class="n">set_tuning</span><span class="p">(</span><span class="n">tuning</span><span class="p">[</span><span class="s2">&quot;kp&quot;</span><span class="p">],</span> <span class="n">tuning</span><span class="p">[</span><span class="s2">&quot;ki&quot;</span><span class="p">],</span> <span class="n">tuning</span><span class="p">[</span><span class="s2">&quot;kd&quot;</span><span class="p">])</span>

    <span class="c1"># Run for 10 steps</span>
    <span class="n">final_error</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
        <span class="n">heat_output</span><span class="p">,</span> <span class="n">debug_info</span> <span class="o">=</span> <span class="n">pid</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">heater</span><span class="o">.</span><span class="n">temperature</span><span class="p">)</span>
        <span class="n">heater</span><span class="o">.</span><span class="n">apply_heat</span><span class="p">(</span><span class="n">heat_output</span><span class="p">)</span>
        <span class="n">final_error</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">debug_info</span><span class="p">[</span><span class="s1">&#39;error&#39;</span><span class="p">])</span>

    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">tuning</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span><span class="si">:</span><span class="s2">6s</span><span class="si">}</span><span class="s2">: Final error = </span><span class="si">{</span><span class="n">final_error</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2">¬∞C&quot;</span><span class="p">)</span>
</code></pre>
</div>
<h3 id="basic-scheduling-coordinating-multiple-tasks">Basic scheduling: coordinating multiple tasks<a class="headerlink" href="#basic-scheduling-coordinating-multiple-tasks" title="Permanent link">&para;</a></h3>
<p>Scheduling algorithms determine when and in what order different control tasks execute. This is crucial for systems with multiple sensors, actuators, and control loops.</p>
<p><strong>Common scheduling patterns</strong>:</p>
<ol>
<li>
<p><strong>Round-robin</strong>: each task gets equal time slices</p>
</li>
<li>
<p><strong>Priority-based</strong>: important tasks run first</p>
</li>
<li>
<p><strong>Rate-monotonic</strong>: tasks with higher frequencies get higher priority</p>
</li>
<li>
<p><strong>Cooperative</strong>: tasks voluntarily yield control</p>
</li>
</ol>
<h3 id="guided-example-multi-sensor-monitoring-scheduler">Guided example: multi-sensor monitoring scheduler<a class="headerlink" href="#guided-example-multi-sensor-monitoring-scheduler" title="Permanent link">&para;</a></h3>
<p>A greenhouse monitoring system must coordinate multiple sensors and control loops.</p>
<div class="highlight python-template" data-fence-type="template" data-language="python">
<pre><code class="language-python"><span class="kn">import</span><span class="w"> </span><span class="nn">time</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">dataclasses</span><span class="w"> </span><span class="kn">import</span> <span class="n">dataclass</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">enum</span><span class="w"> </span><span class="kn">import</span> <span class="n">Enum</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">List</span><span class="p">,</span> <span class="n">Callable</span>

<span class="k">class</span><span class="w"> </span><span class="nc">TaskPriority</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
    <span class="n">LOW</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">MEDIUM</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="n">HIGH</span> <span class="o">=</span> <span class="mi">3</span>
    <span class="n">CRITICAL</span> <span class="o">=</span> <span class="mi">4</span>

<span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">ScheduledTask</span><span class="p">:</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">function</span><span class="p">:</span> <span class="n">Callable</span>
    <span class="n">priority</span><span class="p">:</span> <span class="n">TaskPriority</span>
    <span class="n">frequency_hz</span><span class="p">:</span> <span class="nb">float</span>  <span class="c1"># How often to run (times per second)</span>
    <span class="n">last_run</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">execution_time</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">0</span>  <span class="c1"># Average execution time</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">period</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Time between executions in seconds&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="mf">1.0</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">frequency_hz</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">is_ready</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">current_time</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Check if this task should run now&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">current_time</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_run</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">period</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">current_time</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Run the task and record timing&quot;&quot;&quot;</span>
        <span class="n">start_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">function</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">last_run</span> <span class="o">=</span> <span class="n">current_time</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">execution_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start_time</span>
            <span class="k">return</span> <span class="n">result</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Task </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> failed: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span>

<span class="k">class</span><span class="w"> </span><span class="nc">TaskScheduler</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tasks</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">ScheduledTask</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">running</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cycle_count</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">add_task</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">task</span><span class="p">:</span> <span class="n">ScheduledTask</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Add a task to the scheduler&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tasks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">task</span><span class="p">)</span>
        <span class="c1"># Sort by priority (highest first), then by frequency</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tasks</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">t</span><span class="p">:</span> <span class="p">(</span><span class="o">-</span><span class="n">t</span><span class="o">.</span><span class="n">priority</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="o">-</span><span class="n">t</span><span class="o">.</span><span class="n">frequency_hz</span><span class="p">))</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">run_cycle</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Execute one scheduler cycle&quot;&quot;&quot;</span>
        <span class="n">current_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cycle_count</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="n">executed_tasks</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="c1"># Priority-based scheduling with frequency constraints</span>
        <span class="k">for</span> <span class="n">task</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">tasks</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">task</span><span class="o">.</span><span class="n">is_ready</span><span class="p">(</span><span class="n">current_time</span><span class="p">):</span>
                <span class="n">result</span> <span class="o">=</span> <span class="n">task</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">current_time</span><span class="p">)</span>
                <span class="n">executed_tasks</span><span class="o">.</span><span class="n">append</span><span class="p">({</span>
                    <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="n">task</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                    <span class="s1">&#39;priority&#39;</span><span class="p">:</span> <span class="n">task</span><span class="o">.</span><span class="n">priority</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                    <span class="s1">&#39;execution_time&#39;</span><span class="p">:</span> <span class="n">task</span><span class="o">.</span><span class="n">execution_time</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">,</span>  <span class="c1"># ms</span>
                    <span class="s1">&#39;result&#39;</span><span class="p">:</span> <span class="n">result</span>
                <span class="p">})</span>

        <span class="k">return</span> <span class="n">executed_tasks</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_status</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get scheduler status and task information&quot;&quot;&quot;</span>
        <span class="n">current_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="n">task_status</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">for</span> <span class="n">task</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">tasks</span><span class="p">:</span>
            <span class="n">time_since_last</span> <span class="o">=</span> <span class="n">current_time</span> <span class="o">-</span> <span class="n">task</span><span class="o">.</span><span class="n">last_run</span>
            <span class="n">time_until_next</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">task</span><span class="o">.</span><span class="n">period</span> <span class="o">-</span> <span class="n">time_since_last</span><span class="p">)</span>

            <span class="n">task_status</span><span class="o">.</span><span class="n">append</span><span class="p">({</span>
                <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="n">task</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                <span class="s1">&#39;priority&#39;</span><span class="p">:</span> <span class="n">task</span><span class="o">.</span><span class="n">priority</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                <span class="s1">&#39;frequency&#39;</span><span class="p">:</span> <span class="n">task</span><span class="o">.</span><span class="n">frequency_hz</span><span class="p">,</span>
                <span class="s1">&#39;last_run&#39;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">time_since_last</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">s ago&quot;</span><span class="p">,</span>
                <span class="s1">&#39;next_run&#39;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">time_until_next</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">s&quot;</span><span class="p">,</span>
                <span class="s1">&#39;avg_execution&#39;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">task</span><span class="o">.</span><span class="n">execution_time</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">1000</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2">ms&quot;</span>
            <span class="p">})</span>

        <span class="k">return</span> <span class="p">{</span>
            <span class="s1">&#39;cycle_count&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">cycle_count</span><span class="p">,</span>
            <span class="s1">&#39;total_tasks&#39;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tasks</span><span class="p">),</span>
            <span class="s1">&#39;tasks&#39;</span><span class="p">:</span> <span class="n">task_status</span>
        <span class="p">}</span>

<span class="c1"># Greenhouse monitoring system tasks</span>
<span class="k">class</span><span class="w"> </span><span class="nc">GreenhouseMonitor</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">temperature</span> <span class="o">=</span> <span class="mf">22.0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">humidity</span> <span class="o">=</span> <span class="mf">65.0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">light_level</span> <span class="o">=</span> <span class="mi">500</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">soil_moisture</span> <span class="o">=</span> <span class="mf">0.7</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fan_speed</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">heater_power</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">read_temperature</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;High-frequency temperature monitoring&quot;&quot;&quot;</span>
        <span class="c1"># Simulate sensor reading with small variations</span>
        <span class="kn">import</span><span class="w"> </span><span class="nn">random</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">temperature</span> <span class="o">+=</span> <span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="o">-</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;temperature&#39;</span><span class="p">:</span> <span class="nb">round</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">temperature</span><span class="p">,</span> <span class="mi">1</span><span class="p">)}</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">read_humidity</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Medium-frequency humidity monitoring&quot;&quot;&quot;</span>
        <span class="kn">import</span><span class="w"> </span><span class="nn">random</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">humidity</span> <span class="o">+=</span> <span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="o">-</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">humidity</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="nb">min</span><span class="p">(</span><span class="mi">90</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">humidity</span><span class="p">))</span>  <span class="c1"># Clamp to realistic range</span>
        <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;humidity&#39;</span><span class="p">:</span> <span class="nb">round</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">humidity</span><span class="p">,</span> <span class="mi">1</span><span class="p">)}</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">control_climate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Climate control based on current readings&quot;&quot;&quot;</span>
        <span class="c1"># Simple control logic</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">temperature</span> <span class="o">&lt;</span> <span class="mi">20</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">heater_power</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">heater_power</span> <span class="o">+</span> <span class="mi">10</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">temperature</span> <span class="o">&gt;</span> <span class="mi">25</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">heater_power</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">heater_power</span> <span class="o">-</span> <span class="mi">10</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">humidity</span> <span class="o">&gt;</span> <span class="mi">80</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fan_speed</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fan_speed</span> <span class="o">+</span> <span class="mi">20</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">humidity</span> <span class="o">&lt;</span> <span class="mi">60</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fan_speed</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fan_speed</span> <span class="o">-</span> <span class="mi">20</span><span class="p">)</span>

        <span class="k">return</span> <span class="p">{</span>
            <span class="s1">&#39;heater_power&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">heater_power</span><span class="p">,</span>
            <span class="s1">&#39;fan_speed&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">fan_speed</span>
        <span class="p">}</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">check_soil_moisture</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Low-frequency soil monitoring&quot;&quot;&quot;</span>
        <span class="kn">import</span><span class="w"> </span><span class="nn">random</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">soil_moisture</span> <span class="o">+=</span> <span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="o">-</span><span class="mf">0.02</span><span class="p">,</span> <span class="mf">0.01</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">soil_moisture</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mf">0.2</span><span class="p">,</span> <span class="nb">min</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">soil_moisture</span><span class="p">))</span>
        <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;soil_moisture&#39;</span><span class="p">:</span> <span class="nb">round</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">soil_moisture</span><span class="p">,</span> <span class="mi">2</span><span class="p">)}</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">safety_check</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Critical safety monitoring&quot;&quot;&quot;</span>
        <span class="n">issues</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">temperature</span> <span class="o">&gt;</span> <span class="mi">35</span><span class="p">:</span>
            <span class="n">issues</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;TEMPERATURE_TOO_HIGH&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">temperature</span> <span class="o">&lt;</span> <span class="mi">5</span><span class="p">:</span>
            <span class="n">issues</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;TEMPERATURE_TOO_LOW&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">humidity</span> <span class="o">&gt;</span> <span class="mi">95</span><span class="p">:</span>
            <span class="n">issues</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;HUMIDITY_CRITICAL&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;safety_issues&#39;</span><span class="p">:</span> <span class="n">issues</span><span class="p">}</span>

<span class="c1"># Create greenhouse monitor and scheduler</span>
<span class="n">greenhouse</span> <span class="o">=</span> <span class="n">GreenhouseMonitor</span><span class="p">()</span>
<span class="n">scheduler</span> <span class="o">=</span> <span class="n">TaskScheduler</span><span class="p">()</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;=== Greenhouse Monitoring Scheduler Demo ===&quot;</span><span class="p">)</span>

<span class="c1"># Add tasks with different priorities and frequencies</span>
<span class="n">tasks</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">ScheduledTask</span><span class="p">(</span><span class="s2">&quot;Safety Check&quot;</span><span class="p">,</span> <span class="n">greenhouse</span><span class="o">.</span><span class="n">safety_check</span><span class="p">,</span> <span class="n">TaskPriority</span><span class="o">.</span><span class="n">CRITICAL</span><span class="p">,</span> <span class="mf">10.0</span><span class="p">),</span>
    <span class="n">ScheduledTask</span><span class="p">(</span><span class="s2">&quot;Temperature&quot;</span><span class="p">,</span> <span class="n">greenhouse</span><span class="o">.</span><span class="n">read_temperature</span><span class="p">,</span> <span class="n">TaskPriority</span><span class="o">.</span><span class="n">HIGH</span><span class="p">,</span> <span class="mf">5.0</span><span class="p">),</span>
    <span class="n">ScheduledTask</span><span class="p">(</span><span class="s2">&quot;Climate Control&quot;</span><span class="p">,</span> <span class="n">greenhouse</span><span class="o">.</span><span class="n">control_climate</span><span class="p">,</span> <span class="n">TaskPriority</span><span class="o">.</span><span class="n">HIGH</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">),</span>
    <span class="n">ScheduledTask</span><span class="p">(</span><span class="s2">&quot;Humidity&quot;</span><span class="p">,</span> <span class="n">greenhouse</span><span class="o">.</span><span class="n">read_humidity</span><span class="p">,</span> <span class="n">TaskPriority</span><span class="o">.</span><span class="n">MEDIUM</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">),</span>
    <span class="n">ScheduledTask</span><span class="p">(</span><span class="s2">&quot;Soil Moisture&quot;</span><span class="p">,</span> <span class="n">greenhouse</span><span class="o">.</span><span class="n">check_soil_moisture</span><span class="p">,</span> <span class="n">TaskPriority</span><span class="o">.</span><span class="n">LOW</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">)</span>
<span class="p">]</span>

<span class="k">for</span> <span class="n">task</span> <span class="ow">in</span> <span class="n">tasks</span><span class="p">:</span>
    <span class="n">scheduler</span><span class="o">.</span><span class="n">add_task</span><span class="p">(</span><span class="n">task</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Scheduler configured with tasks:&quot;</span><span class="p">)</span>
<span class="n">status</span> <span class="o">=</span> <span class="n">scheduler</span><span class="o">.</span><span class="n">get_status</span><span class="p">()</span>
<span class="k">for</span> <span class="n">task_info</span> <span class="ow">in</span> <span class="n">status</span><span class="p">[</span><span class="s1">&#39;tasks&#39;</span><span class="p">]:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  </span><span class="si">{</span><span class="n">task_info</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span><span class="si">:</span><span class="s2">15s</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">task_info</span><span class="p">[</span><span class="s1">&#39;priority&#39;</span><span class="p">]</span><span class="si">:</span><span class="s2">8s</span><span class="si">}</span><span class="s2"> priority, &quot;</span>
          <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">task_info</span><span class="p">[</span><span class="s1">&#39;frequency&#39;</span><span class="p">]</span><span class="si">:</span><span class="s2">4.1f</span><span class="si">}</span><span class="s2"> Hz&quot;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">=== Running Scheduler Cycles ===&quot;</span><span class="p">)</span>

<span class="c1"># Run scheduler for several cycles</span>
<span class="k">for</span> <span class="n">cycle</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">8</span><span class="p">):</span>
    <span class="n">executed</span> <span class="o">=</span> <span class="n">scheduler</span><span class="o">.</span><span class="n">run_cycle</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">executed</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Cycle </span><span class="si">{</span><span class="n">cycle</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="si">}</span><span class="s2">:&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">task_exec</span> <span class="ow">in</span> <span class="n">executed</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  </span><span class="si">{</span><span class="n">task_exec</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span><span class="si">:</span><span class="s2">15s</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">task_exec</span><span class="p">[</span><span class="s1">&#39;execution_time&#39;</span><span class="p">]</span><span class="si">:</span><span class="s2">5.1f</span><span class="si">}</span><span class="s2">ms &quot;</span>
                  <span class="sa">f</span><span class="s2">&quot;(</span><span class="si">{</span><span class="n">task_exec</span><span class="p">[</span><span class="s1">&#39;priority&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> priority)&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">task_exec</span><span class="p">[</span><span class="s1">&#39;result&#39;</span><span class="p">]:</span>
                <span class="n">result_str</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">task_exec</span><span class="p">[</span><span class="s1">&#39;result&#39;</span><span class="p">])[:</span><span class="mi">50</span><span class="p">]</span>  <span class="c1"># Truncate long results</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;    Result: </span><span class="si">{</span><span class="n">result_str</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Simulate real-time delays</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.15</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">=== Final Scheduler Status ===&quot;</span><span class="p">)</span>
<span class="n">final_status</span> <span class="o">=</span> <span class="n">scheduler</span><span class="o">.</span><span class="n">get_status</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Total cycles executed: </span><span class="si">{</span><span class="n">final_status</span><span class="p">[</span><span class="s1">&#39;cycle_count&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Task execution summary:&quot;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">task_info</span> <span class="ow">in</span> <span class="n">final_status</span><span class="p">[</span><span class="s1">&#39;tasks&#39;</span><span class="p">]:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  </span><span class="si">{</span><span class="n">task_info</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span><span class="si">:</span><span class="s2">15s</span><span class="si">}</span><span class="s2">: last run </span><span class="si">{</span><span class="n">task_info</span><span class="p">[</span><span class="s1">&#39;last_run&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">, &quot;</span>
          <span class="sa">f</span><span class="s2">&quot;next in </span><span class="si">{</span><span class="n">task_info</span><span class="p">[</span><span class="s1">&#39;next_run&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">, &quot;</span>
          <span class="sa">f</span><span class="s2">&quot;avg time </span><span class="si">{</span><span class="n">task_info</span><span class="p">[</span><span class="s1">&#39;avg_execution&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre>
</div>
<h2 id="try-it">Try it<a class="headerlink" href="#try-it" title="Permanent link">&para;</a></h2>
<h3 id="exercise-1-state-machine-design">Exercise 1: state machine design<a class="headerlink" href="#exercise-1-state-machine-design" title="Permanent link">&para;</a></h3>
<p>Design a state machine for an automatic door system with the following requirements:</p>
<ul>
<li>
<p>States: Closed, Opening, Open, Closing, Blocked</p>
</li>
<li>
<p>Sensors: motion detector, safety beam, door position</p>
</li>
<li>
<p>Events: motion detected, safety beam broken, timer expired, manual override</p>
</li>
</ul>
<details class="success">
<summary>Sample Solution</summary>
<p><strong>State machine design</strong>:</p>
<p><strong>States and transitions</strong>:</p>
<ul>
<li>
<p><strong>Closed</strong> ‚Üí Opening: motion detected AND safety beam clear</p>
</li>
<li>
<p><strong>Opening</strong> ‚Üí Open: door fully open (position sensor)</p>
</li>
<li>
<p><strong>Open</strong> ‚Üí Closing: timer expired (5 seconds) AND no motion</p>
</li>
<li>
<p><strong>Closing</strong> ‚Üí Closed: door fully closed (position sensor)</p>
</li>
<li>
<p><strong>Closing</strong> ‚Üí Blocked: safety beam broken</p>
</li>
<li>
<p><strong>Blocked</strong> ‚Üí Opening: safety beam clear</p>
</li>
<li>
<p><strong>Any state</strong> ‚Üí Closed: manual override</p>
</li>
</ul>
<p><strong>Entry/exit actions</strong>:</p>
<ul>
<li>
<p><strong>Opening</strong>: start motor forward, start safety monitoring</p>
</li>
<li>
<p><strong>Open</strong>: stop motor, start timer</p>
</li>
<li>
<p><strong>Closing</strong>: start motor reverse, monitor safety beam</p>
</li>
<li>
<p><strong>Blocked</strong>: stop motor, sound alarm</p>
</li>
<li>
<p><strong>Closed</strong>: stop motor, disable timer</p>
</li>
</ul>
<p><strong>Safety considerations</strong>:</p>
<ul>
<li>
<p>Safety beam overrides all automatic movement</p>
</li>
<li>
<p>Manual override always works regardless of sensors</p>
</li>
<li>
<p>Motor stops immediately when entering Blocked state</p>
</li>
</ul>
</details>
<h3 id="exercise-2-pid-tuning-analysis">Exercise 2: PID tuning analysis<a class="headerlink" href="#exercise-2-pid-tuning-analysis" title="Permanent link">&para;</a></h3>
<p>A robotic arm position control system uses PID control. Given these observations, suggest tuning adjustments:</p>
<ul>
<li>
<p><strong>P-only (Kp=5)</strong>: reaches 90% of target quickly but has 10% steady-state error</p>
</li>
<li>
<p><strong>PI (Kp=5, Ki=0.5)</strong>: eliminates steady-state error but oscillates around target</p>
</li>
<li>
<p><strong>PID (Kp=5, Ki=0.5, Kd=2)</strong>: stable but very slow to reach target</p>
</li>
</ul>
<details class="success">
<summary>Sample Solution</summary>
<p><strong>Analysis and recommendations</strong>:</p>
<p><strong>P-only issues</strong>: Steady-state error indicates insufficient gain OR need for integral term</p>
<ul>
<li>Solution: Add integral term to eliminate steady-state error</li>
</ul>
<p><strong>PI oscillation</strong>: Too much integral gain causing overshoot and hunting</p>
<ul>
<li>Solution: Reduce Ki from 0.5 to 0.1-0.2, or reduce Kp slightly</li>
</ul>
<p><strong>PID sluggishness</strong>: High derivative gain is over-dampening the system</p>
<ul>
<li>Solution: Reduce Kd from 2 to 0.5-1.0</li>
</ul>
<p><strong>Recommended tuning</strong>:</p>
<ul>
<li>
<p>Start with Kp=4, Ki=0.2, Kd=0.8</p>
</li>
<li>
<p>Fine-tune by observing step response</p>
</li>
<li>
<p>Increase Kp for faster response (watch for overshoot)</p>
</li>
<li>
<p>Increase Ki only if steady-state error persists</p>
</li>
<li>
<p>Adjust Kd to balance speed vs stability</p>
</li>
</ul>
</details>
<h3 id="exercise-3-scheduling-optimisation">Exercise 3: scheduling optimisation<a class="headerlink" href="#exercise-3-scheduling-optimisation" title="Permanent link">&para;</a></h3>
<p>A manufacturing robot has these control tasks:</p>
<ul>
<li>
<p><strong>Vision processing</strong>: 20ms execution time, needs 10 Hz</p>
</li>
<li>
<p><strong>Motion control</strong>: 2ms execution time, needs 50 Hz  </p>
</li>
<li>
<p><strong>Safety monitoring</strong>: 1ms execution time, needs 100 Hz</p>
</li>
<li>
<p><strong>Data logging</strong>: 5ms execution time, needs 1 Hz</p>
</li>
</ul>
<p>Design a scheduling strategy that ensures all tasks meet their timing requirements.</p>
<details class="success">
<summary>Sample Solution</summary>
<p><strong>Timing analysis</strong>:</p>
<ul>
<li>
<p>Safety: 1ms every 10ms (10% CPU)</p>
</li>
<li>
<p>Motion: 2ms every 20ms (10% CPU)  </p>
</li>
<li>
<p>Vision: 20ms every 100ms (20% CPU)</p>
</li>
<li>
<p>Logging: 5ms every 1000ms (0.5% CPU)</p>
</li>
<li>
<p><strong>Total CPU usage</strong>: ~40.5%</p>
</li>
</ul>
<p><strong>Recommended strategy</strong>: Rate-monotonic priority scheduling</p>
<ol>
<li>
<p><strong>Highest priority</strong>: Safety (100 Hz) - most frequent, safety-critical</p>
</li>
<li>
<p><strong>High priority</strong>: Motion (50 Hz) - time-critical for smooth movement</p>
</li>
<li>
<p><strong>Medium priority</strong>: Vision (10 Hz) - important but can tolerate some jitter</p>
</li>
<li>
<p><strong>Low priority</strong>: Logging (1 Hz) - least time-critical</p>
</li>
</ol>
<p><strong>Implementation approach</strong>:</p>
<ul>
<li>
<p>Use interrupt-driven scheduling for safety monitoring</p>
</li>
<li>
<p>Run motion control in main control loop</p>
</li>
<li>
<p>Execute vision processing when motion control is idle</p>
</li>
<li>
<p>Perform data logging during low-activity periods</p>
</li>
</ul>
<p><strong>Verification</strong>: Ensure worst-case execution time for all higher-priority tasks doesn&rsquo;t exceed the period of any lower-priority task</p>
</details>
<h2 id="recap">Recap<a class="headerlink" href="#recap" title="Permanent link">&para;</a></h2>
<p>Three algorithmic patterns form the foundation of mechatronic control systems:</p>
<p><strong>State machines</strong>: manage discrete behaviours through clearly defined states, transitions, and events. Essential for systems with distinct operating modes and complex logic.</p>
<p><strong>PID controllers</strong>: provide smooth, continuous regulation by combining proportional, integral, and derivative responses to error. Critical for maintaining precise control of continuous variables.</p>
<p><strong>Scheduling algorithms</strong>: coordinate multiple tasks by determining execution order and timing. Necessary for systems with multiple sensors, actuators, and control requirements.</p>
<p><strong>Pattern selection</strong>: choose based on the nature of control requirements - discrete vs continuous, single vs multiple tasks, simple vs complex logic.</p>
<p><strong>Integration</strong>: real systems often combine all three patterns, using state machines for mode management, PID for continuous control, and scheduling for task coordination.</p>
<p>Understanding these patterns enables the design of robust, predictable, and maintainable control systems that can handle complex mechatronic applications.</p>
<p>See also <a href="../../Chapter-10-Programming-and-building/10-02-Implementing-closed-loop-control/">10.2 Implementing closed loop control</a> for practical implementation techniques.</p>







  
    
  
  


  <aside class="md-source-file">
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Last update">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date" title="October 15, 2025 07:03:58 UTC">October 15, 2025</span>
  </span>

    
    
    
    
  </aside>


  



  <form class="md-feedback" name="feedback" hidden>
    <fieldset>
      <legend class="md-feedback__title">
        Was this page helpful?
      </legend>
      <div class="md-feedback__inner">
        <div class="md-feedback__list">
          
            <button class="md-feedback__icon md-icon" type="submit" title="This page was helpful" data-md-value="1">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 12a8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8 8 8 0 0 0 8-8m2 0a10 10 0 0 1-10 10A10 10 0 0 1 2 12 10 10 0 0 1 12 2a10 10 0 0 1 10 10M10 9.5c0 .8-.7 1.5-1.5 1.5S7 10.3 7 9.5 7.7 8 8.5 8s1.5.7 1.5 1.5m7 0c0 .8-.7 1.5-1.5 1.5S14 10.3 14 9.5 14.7 8 15.5 8s1.5.7 1.5 1.5m-5 7.73c-1.75 0-3.29-.73-4.19-1.81L9.23 14c.45.72 1.52 1.23 2.77 1.23s2.32-.51 2.77-1.23l1.42 1.42c-.9 1.08-2.44 1.81-4.19 1.81"/></svg>
            </button>
          
            <button class="md-feedback__icon md-icon" type="submit" title="This page could be improved" data-md-value="0">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 12a8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8 8 8 0 0 0 8-8m2 0a10 10 0 0 1-10 10A10 10 0 0 1 2 12 10 10 0 0 1 12 2a10 10 0 0 1 10 10m-6.5-4c.8 0 1.5.7 1.5 1.5s-.7 1.5-1.5 1.5-1.5-.7-1.5-1.5.7-1.5 1.5-1.5M10 9.5c0 .8-.7 1.5-1.5 1.5S7 10.3 7 9.5 7.7 8 8.5 8s1.5.7 1.5 1.5m2 4.5c1.75 0 3.29.72 4.19 1.81l-1.42 1.42C14.32 16.5 13.25 16 12 16s-2.32.5-2.77 1.23l-1.42-1.42C8.71 14.72 10.25 14 12 14"/></svg>
            </button>
          
        </div>
        <div class="md-feedback__note">
          
            <div data-md-value="1" hidden>
              
              
                
              
              
              
                
                
              
              Thanks for your feedback!
            </div>
          
            <div data-md-value="0" hidden>
              
              
                
              
              
              
                
                
              
              Thanks for your feedback! Help us improve this page by creating an <a href="https://github.com/Eatham532/Software-Engineering-HSC-Textbook/issues/new/choose" target="_blank" rel="noopener">issue</a> on github.
            </div>
          
        </div>
      </div>
    </fieldset>
  </form>


                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        

<!-- Footer -->
<footer class="md-footer">
  
    <!-- Custom footer with left/right layout -->
    <div class="md-footer__inner md-grid">
      <!-- Left side: Copyright and cookie settings -->
      <div class="md-footer__left">
        <div class="md-footer__copyright">
          
            Copyright &copy; 2025 Eatham532 ‚Äì <a href="#__consent">Change cookie settings</a>

          
        </div>
      </div>

      <!-- Right side: Page name and BETA -->
      <div class="md-footer__right">
        <div class="md-footer__page-info">
          <span class="md-footer__page-title">Content</span>
          
            <span class="md-footer__beta-badge">BETA</span>
          
        </div>
      </div>
    </div>
  
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-progress" data-md-component="progress" role="progressbar"></div>
    
    
      <div class="md-consent" data-md-component="consent" id="__consent" hidden>
        <div class="md-consent__overlay"></div>
        <aside class="md-consent__inner">
          <form class="md-consent__form md-grid md-typeset" name="consent">
            



<h4>Cookie consent</h4>
<p>We use cookies to recognize your repeated visits and preferences, as well as to measure the effectiveness of the textbook. With your consent, you're helping us to make software engineering education better for everyone.</p>
<input class="md-toggle" type="checkbox" id="__settings" >
<div class="md-consent__settings">
  <ul class="task-list">
    
    
    
      
        
  
  
    
    
  
  <li class="task-list-item">
    <label class="task-list-control">
      <input type="checkbox" name="github" checked>
      <span class="task-list-indicator"></span>
      GitHub
    </label>
  </li>

      
    
    
      
        
  
  
    
    
  
  <li class="task-list-item">
    <label class="task-list-control">
      <input type="checkbox" name="analytics" checked>
      <span class="task-list-indicator"></span>
      Google Analytics
    </label>
  </li>

      
    
  </ul>
</div>
<div class="md-consent__controls">
  
    
      <button class="md-button md-button--primary">Accept</button>
    
    
    
  
    
    
    
      <label class="md-button" for="__settings">Manage settings</label>
    
  
</div>
          </form>
        </aside>
      </div>
      <script>var consent=__md_get("__consent");if(consent)for(var input of document.forms.consent.elements)input.name&&(input.checked=consent[input.name]||!1);else"file:"!==location.protocol&&setTimeout((function(){document.querySelector("[data-md-component=consent]").hidden=!1}),250);var form=document.forms.consent;for(var action of["submit","reset"])form.addEventListener(action,(function(e){if(e.preventDefault(),"reset"===e.type)for(var n of document.forms.consent.elements)n.name&&(n.checked=!1);__md_set("__consent",Object.fromEntries(Array.from(new FormData(form).keys()).map((function(e){return[e,!0]})))),location.hash="",location.reload()}))</script>
    
    
      
      <script id="__config" type="application/json">{"base": "../../../..", "features": ["navigation.tabs", "navigation.top", "navigation.instant", "navigation.instant.prefetch", "navigation.instant.progress", "navigation.prune", "search.highlight", "search.suggest", "content.code.annotate", "content.code.copy", "content.code.select", "content.tabs.link", "content.action.edit", "content.action.view", "toc.follow"], "search": "../../../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
        <script src="../../../../assets/diagram-modal.js"></script>
      
        <script src="../../../../assets/quiz.js"></script>
      
        <script src="../../../../assets/ide-utils.js"></script>
      
        <script src="../../../../assets/code-blocks.js"></script>
      
    
  </body>
</html>