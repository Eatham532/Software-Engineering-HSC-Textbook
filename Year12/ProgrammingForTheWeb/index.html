
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../SecureSoftwareArchitecture/">
      
      
        <link rel="next" href="../SoftwareAutomation/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.16">
    
    
      
        <title>Programming for the Web - NSW HSC Software Engineering Textbook</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.7e37652d.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/diagram-modal.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#programming-for-the-web" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="NSW HSC Software Engineering Textbook" class="md-header__button md-logo" aria-label="NSW HSC Software Engineering Textbook" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            NSW HSC Software Engineering Textbook
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Programming for the Web
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../Year11/ProgrammingFundamentals/" class="md-tabs__link">
          
  
  
  Year 11

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../SecureSoftwareArchitecture/" class="md-tabs__link">
          
  
  
  Year 12

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="NSW HSC Software Engineering Textbook" class="md-nav__button md-logo" aria-label="NSW HSC Software Engineering Textbook" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    NSW HSC Software Engineering Textbook
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Year 11
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Year 11
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Year11/ProgrammingFundamentals/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Programming Fundamentals
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Year11/ObjectOrientedParadigm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    The Object-Oriented Paradigm
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Year11/ProgrammingMechatronics/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Programming Mechatronics
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Year 12
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Year 12
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../SecureSoftwareArchitecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Secure Software Architecture
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Programming for the Web
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Programming for the Web
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#data-transmission-using-the-web" class="md-nav__link">
    <span class="md-ellipsis">
      Data Transmission Using the Web
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Data Transmission Using the Web">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    <span class="md-ellipsis">
      Introduction
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#web-programming-applications" class="md-nav__link">
    <span class="md-ellipsis">
      Web Programming Applications
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#data-packet-transfer-the-journey-of-every-web-request" class="md-nav__link">
    <span class="md-ellipsis">
      Data Packet Transfer: The Journey of Every Web Request ğŸ“¦ğŸŒ
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Data Packet Transfer: The Journey of Every Web Request ğŸ“¦ğŸŒ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ip-datagrams-the-digital-mail-system" class="md-nav__link">
    <span class="md-ellipsis">
      IP Datagrams: The Digital Mail System
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dns-resolution-the-internets-phone-book" class="md-nav__link">
    <span class="md-ellipsis">
      DNS Resolution: The Internet's Phone Book ğŸ“
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#web-protocols-ports-the-universal-language-of-the-internet" class="md-nav__link">
    <span class="md-ellipsis">
      Web Protocols &amp; Ports: The Universal Language of the Internet ğŸŒğŸšª
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Web Protocols &amp; Ports: The Universal Language of the Internet ğŸŒğŸšª">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#complete-protocol-reference-with-real-world-examples" class="md-nav__link">
    <span class="md-ellipsis">
      Complete Protocol Reference with Real-World Examples
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#protocol-selection-guide-for-different-use-cases" class="md-nav__link">
    <span class="md-ellipsis">
      Protocol Selection Guide for Different Use Cases
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#securing-web-traffic-your-digital-fortress" class="md-nav__link">
    <span class="md-ellipsis">
      Securing Web Traffic: Your Digital Fortress ğŸ”ğŸ›¡ï¸
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Securing Web Traffic: Your Digital Fortress ğŸ”ğŸ›¡ï¸">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ssltls-the-guardian-angels-of-web-security" class="md-nav__link">
    <span class="md-ellipsis">
      SSL/TLS: The Guardian Angels of Web Security
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#digital-signatures-hash-functions-ensuring-data-integrity" class="md-nav__link">
    <span class="md-ellipsis">
      Digital Signatures &amp; Hash Functions: Ensuring Data Integrity
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#common-web-security-vulnerabilities-and-prevention" class="md-nav__link">
    <span class="md-ellipsis">
      Common Web Security Vulnerabilities and Prevention
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#big-data-web-architecture-building-systems-that-scale" class="md-nav__link">
    <span class="md-ellipsis">
      Big Data &amp; Web Architecture: Building Systems That Scale ğŸ“ŠğŸ—ï¸
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Big Data &amp; Web Architecture: Building Systems That Scale ğŸ“ŠğŸ—ï¸">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-data-deluge-understanding-modern-scale" class="md-nav__link">
    <span class="md-ellipsis">
      The Data Deluge: Understanding Modern Scale
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#data-mining-metadata-extracting-intelligence-from-chaos" class="md-nav__link">
    <span class="md-ellipsis">
      Data Mining &amp; Metadata: Extracting Intelligence from Chaos
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#streaming-services-real-time-data-at-global-scale" class="md-nav__link">
    <span class="md-ellipsis">
      Streaming Services: Real-Time Data at Global Scale
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#review-reflection" class="md-nav__link">
    <span class="md-ellipsis">
      Review &amp; Reflection
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#designing-web-applications-from-concept-to-production" class="md-nav__link">
    <span class="md-ellipsis">
      Designing Web Applications: From Concept to Production ğŸ¨âš¡
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Designing Web Applications: From Concept to Production ğŸ¨âš¡">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#introduction-the-modern-web-development-landscape" class="md-nav__link">
    <span class="md-ellipsis">
      Introduction: The Modern Web Development Landscape
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#standards-governance-the-guardians-of-the-web" class="md-nav__link">
    <span class="md-ellipsis">
      Standards &amp; Governance: The Guardians of the Web ğŸ›ï¸âš–ï¸
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#system-architecture-building-the-digital-backbone" class="md-nav__link">
    <span class="md-ellipsis">
      System Architecture: Building the Digital Backbone ğŸ—ï¸âš¡
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#styling-consistency-the-art-and-science-of-beautiful-web-design" class="md-nav__link">
    <span class="md-ellipsis">
      Styling &amp; Consistency: The Art and Science of Beautiful Web Design ğŸ¨âœ¨
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#version-control-libraries-managing-code-like-a-pro" class="md-nav__link">
    <span class="md-ellipsis">
      Version Control &amp; Libraries: Managing Code Like a Pro ğŸ—‚ï¸ğŸ“š
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#open-source-cms-building-on-the-shoulders-of-giants" class="md-nav__link">
    <span class="md-ellipsis">
      Open-Source &amp; CMS: Building on the Shoulders of Giants ğŸŒŸğŸ“š
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#performance-load-management-speed-is-everything" class="md-nav__link">
    <span class="md-ellipsis">
      Performance &amp; Load Management: Speed is Everything âš¡ğŸ¯
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#back-end-processes-the-engine-room-of-the-web" class="md-nav__link">
    <span class="md-ellipsis">
      Back-End Processes: The Engine Room of the Web ğŸ”§âš™ï¸
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#full-stack-implementation" class="md-nav__link">
    <span class="md-ellipsis">
      Full-Stack Implementation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#collaboration-pwa-design" class="md-nav__link">
    <span class="md-ellipsis">
      Collaboration &amp; PWA Design
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../SoftwareAutomation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Software Automation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../SoftwareEngineeringProject/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Software Engineering Project
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#data-transmission-using-the-web" class="md-nav__link">
    <span class="md-ellipsis">
      Data Transmission Using the Web
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Data Transmission Using the Web">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    <span class="md-ellipsis">
      Introduction
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#web-programming-applications" class="md-nav__link">
    <span class="md-ellipsis">
      Web Programming Applications
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#data-packet-transfer-the-journey-of-every-web-request" class="md-nav__link">
    <span class="md-ellipsis">
      Data Packet Transfer: The Journey of Every Web Request ğŸ“¦ğŸŒ
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Data Packet Transfer: The Journey of Every Web Request ğŸ“¦ğŸŒ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ip-datagrams-the-digital-mail-system" class="md-nav__link">
    <span class="md-ellipsis">
      IP Datagrams: The Digital Mail System
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dns-resolution-the-internets-phone-book" class="md-nav__link">
    <span class="md-ellipsis">
      DNS Resolution: The Internet's Phone Book ğŸ“
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#web-protocols-ports-the-universal-language-of-the-internet" class="md-nav__link">
    <span class="md-ellipsis">
      Web Protocols &amp; Ports: The Universal Language of the Internet ğŸŒğŸšª
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Web Protocols &amp; Ports: The Universal Language of the Internet ğŸŒğŸšª">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#complete-protocol-reference-with-real-world-examples" class="md-nav__link">
    <span class="md-ellipsis">
      Complete Protocol Reference with Real-World Examples
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#protocol-selection-guide-for-different-use-cases" class="md-nav__link">
    <span class="md-ellipsis">
      Protocol Selection Guide for Different Use Cases
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#securing-web-traffic-your-digital-fortress" class="md-nav__link">
    <span class="md-ellipsis">
      Securing Web Traffic: Your Digital Fortress ğŸ”ğŸ›¡ï¸
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Securing Web Traffic: Your Digital Fortress ğŸ”ğŸ›¡ï¸">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ssltls-the-guardian-angels-of-web-security" class="md-nav__link">
    <span class="md-ellipsis">
      SSL/TLS: The Guardian Angels of Web Security
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#digital-signatures-hash-functions-ensuring-data-integrity" class="md-nav__link">
    <span class="md-ellipsis">
      Digital Signatures &amp; Hash Functions: Ensuring Data Integrity
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#common-web-security-vulnerabilities-and-prevention" class="md-nav__link">
    <span class="md-ellipsis">
      Common Web Security Vulnerabilities and Prevention
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#big-data-web-architecture-building-systems-that-scale" class="md-nav__link">
    <span class="md-ellipsis">
      Big Data &amp; Web Architecture: Building Systems That Scale ğŸ“ŠğŸ—ï¸
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Big Data &amp; Web Architecture: Building Systems That Scale ğŸ“ŠğŸ—ï¸">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-data-deluge-understanding-modern-scale" class="md-nav__link">
    <span class="md-ellipsis">
      The Data Deluge: Understanding Modern Scale
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#data-mining-metadata-extracting-intelligence-from-chaos" class="md-nav__link">
    <span class="md-ellipsis">
      Data Mining &amp; Metadata: Extracting Intelligence from Chaos
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#streaming-services-real-time-data-at-global-scale" class="md-nav__link">
    <span class="md-ellipsis">
      Streaming Services: Real-Time Data at Global Scale
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#review-reflection" class="md-nav__link">
    <span class="md-ellipsis">
      Review &amp; Reflection
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#designing-web-applications-from-concept-to-production" class="md-nav__link">
    <span class="md-ellipsis">
      Designing Web Applications: From Concept to Production ğŸ¨âš¡
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Designing Web Applications: From Concept to Production ğŸ¨âš¡">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#introduction-the-modern-web-development-landscape" class="md-nav__link">
    <span class="md-ellipsis">
      Introduction: The Modern Web Development Landscape
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#standards-governance-the-guardians-of-the-web" class="md-nav__link">
    <span class="md-ellipsis">
      Standards &amp; Governance: The Guardians of the Web ğŸ›ï¸âš–ï¸
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#system-architecture-building-the-digital-backbone" class="md-nav__link">
    <span class="md-ellipsis">
      System Architecture: Building the Digital Backbone ğŸ—ï¸âš¡
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#styling-consistency-the-art-and-science-of-beautiful-web-design" class="md-nav__link">
    <span class="md-ellipsis">
      Styling &amp; Consistency: The Art and Science of Beautiful Web Design ğŸ¨âœ¨
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#version-control-libraries-managing-code-like-a-pro" class="md-nav__link">
    <span class="md-ellipsis">
      Version Control &amp; Libraries: Managing Code Like a Pro ğŸ—‚ï¸ğŸ“š
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#open-source-cms-building-on-the-shoulders-of-giants" class="md-nav__link">
    <span class="md-ellipsis">
      Open-Source &amp; CMS: Building on the Shoulders of Giants ğŸŒŸğŸ“š
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#performance-load-management-speed-is-everything" class="md-nav__link">
    <span class="md-ellipsis">
      Performance &amp; Load Management: Speed is Everything âš¡ğŸ¯
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#back-end-processes-the-engine-room-of-the-web" class="md-nav__link">
    <span class="md-ellipsis">
      Back-End Processes: The Engine Room of the Web ğŸ”§âš™ï¸
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#full-stack-implementation" class="md-nav__link">
    <span class="md-ellipsis">
      Full-Stack Implementation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#collaboration-pwa-design" class="md-nav__link">
    <span class="md-ellipsis">
      Collaboration &amp; PWA Design
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="programming-for-the-web">Programming for the Web<a class="headerlink" href="#programming-for-the-web" title="Permanent link">&para;</a></h1>
<h2 id="data-transmission-using-the-web">Data Transmission Using the Web<a class="headerlink" href="#data-transmission-using-the-web" title="Permanent link">&para;</a></h2>
<h3 id="introduction">Introduction<a class="headerlink" href="#introduction" title="Permanent link">&para;</a></h3>
<p>Data transmission is the backbone of the internet, enabling information to move between devices, servers, and users worldwide. Every time you load a webpage, send a message, or stream a video, data travels across multiple transmission layers using standardized protocols. Understanding how data movesâ€”from physical signals to application-level exchangesâ€”is essential for web programmers, as it impacts reliability, security, and performance. Mastery of these concepts helps developers build robust, efficient, and secure web applications.</p>
<h3 id="web-programming-applications">Web Programming Applications<a class="headerlink" href="#web-programming-applications" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Interactive Websites:</strong> Real-time updates, user input, and dynamic content rely on fast, reliable data transfer between browsers and servers.</li>
<li><strong>E-Commerce Platforms:</strong> Secure transactions, inventory updates, and customer interactions depend on accurate, encrypted data exchange.</li>
<li><strong>Progressive Web Apps (PWAs):</strong> Offline access, push notifications, and seamless user experiences require efficient data synchronization and caching.</li>
</ul>
<h3 id="data-packet-transfer-the-journey-of-every-web-request">Data Packet Transfer: The Journey of Every Web Request ğŸ“¦ğŸŒ<a class="headerlink" href="#data-packet-transfer-the-journey-of-every-web-request" title="Permanent link">&para;</a></h3>
<p>Think of data transmission like a postal system - but instead of letters, we're sending digital packets at the speed of light! Every time you click a link, send a message, or stream a video, millions of data packets embark on incredible journeys across the globe.</p>
<h4 id="ip-datagrams-the-digital-mail-system"><strong>IP Datagrams: The Digital Mail System</strong><a class="headerlink" href="#ip-datagrams-the-digital-mail-system" title="Permanent link">&para;</a></h4>
<p>Just like how a letter needs an address and stamp, data packets need headers and routing information to reach their destination.</p>
<p><strong>Real-World Packet Analysis: What Happens When You Visit GitHub</strong></p>
<details class="example">
<summary>ğŸš€ Web Request Analyzer - Real-time Packet Journey</summary>
<div class="language-python highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">socket</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="kn">import</span><span class="w"> </span><span class="nn">struct</span>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="kn">import</span><span class="w"> </span><span class="nn">time</span>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="kn">from</span><span class="w"> </span><span class="nn">scapy</span><span class="w"> </span><span class="kn">import</span> <span class="o">*</span>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="k">class</span><span class="w"> </span><span class="nc">WebRequestAnalyzer</span><span class="p">:</span>
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Real-time analysis of web request packet journey&quot;&quot;&quot;</span>
</span><span id="__span-0-8"><a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>
</span><span id="__span-0-9"><a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-0-10"><a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">packet_history</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="__span-0-11"><a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">timing_data</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="__span-0-12"><a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a>
</span><span id="__span-0-13"><a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">trace_web_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="o">=</span><span class="s2">&quot;https://github.com&quot;</span><span class="p">):</span>
</span><span id="__span-0-14"><a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Follow a real web request from start to finish&quot;&quot;&quot;</span>
</span><span id="__span-0-15"><a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a>
</span><span id="__span-0-16"><a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ğŸ¯ Tracing request to: </span><span class="si">{</span><span class="n">url</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-0-17"><a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;=&quot;</span> <span class="o">*</span> <span class="mi">60</span><span class="p">)</span>
</span><span id="__span-0-18"><a id="__codelineno-0-18" name="__codelineno-0-18" href="#__codelineno-0-18"></a>
</span><span id="__span-0-19"><a id="__codelineno-0-19" name="__codelineno-0-19" href="#__codelineno-0-19"></a>        <span class="c1"># Step 1: DNS Resolution</span>
</span><span id="__span-0-20"><a id="__codelineno-0-20" name="__codelineno-0-20" href="#__codelineno-0-20"></a>        <span class="n">start_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
</span><span id="__span-0-21"><a id="__codelineno-0-21" name="__codelineno-0-21" href="#__codelineno-0-21"></a>        <span class="n">dns_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">trace_dns_lookup</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
</span><span id="__span-0-22"><a id="__codelineno-0-22" name="__codelineno-0-22" href="#__codelineno-0-22"></a>        <span class="n">dns_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start_time</span>
</span><span id="__span-0-23"><a id="__codelineno-0-23" name="__codelineno-0-23" href="#__codelineno-0-23"></a>
</span><span id="__span-0-24"><a id="__codelineno-0-24" name="__codelineno-0-24" href="#__codelineno-0-24"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ğŸ” DNS Resolution: </span><span class="si">{</span><span class="n">dns_time</span><span class="o">*</span><span class="mi">1000</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">ms&quot;</span><span class="p">)</span>
</span><span id="__span-0-25"><a id="__codelineno-0-25" name="__codelineno-0-25" href="#__codelineno-0-25"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Domain: </span><span class="si">{</span><span class="n">dns_result</span><span class="p">[</span><span class="s1">&#39;domain&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-0-26"><a id="__codelineno-0-26" name="__codelineno-0-26" href="#__codelineno-0-26"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   IP Address: </span><span class="si">{</span><span class="n">dns_result</span><span class="p">[</span><span class="s1">&#39;ip&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-0-27"><a id="__codelineno-0-27" name="__codelineno-0-27" href="#__codelineno-0-27"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Route: </span><span class="si">{</span><span class="s1">&#39; â†’ &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">dns_result</span><span class="p">[</span><span class="s1">&#39;dns_servers&#39;</span><span class="p">])</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-0-28"><a id="__codelineno-0-28" name="__codelineno-0-28" href="#__codelineno-0-28"></a>
</span><span id="__span-0-29"><a id="__codelineno-0-29" name="__codelineno-0-29" href="#__codelineno-0-29"></a>        <span class="c1"># Step 2: TCP Connection Establishment</span>
</span><span id="__span-0-30"><a id="__codelineno-0-30" name="__codelineno-0-30" href="#__codelineno-0-30"></a>        <span class="n">start_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
</span><span id="__span-0-31"><a id="__codelineno-0-31" name="__codelineno-0-31" href="#__codelineno-0-31"></a>        <span class="n">tcp_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">trace_tcp_handshake</span><span class="p">(</span><span class="n">dns_result</span><span class="p">[</span><span class="s1">&#39;ip&#39;</span><span class="p">],</span> <span class="mi">443</span><span class="p">)</span>
</span><span id="__span-0-32"><a id="__codelineno-0-32" name="__codelineno-0-32" href="#__codelineno-0-32"></a>        <span class="n">tcp_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start_time</span>
</span><span id="__span-0-33"><a id="__codelineno-0-33" name="__codelineno-0-33" href="#__codelineno-0-33"></a>
</span><span id="__span-0-34"><a id="__codelineno-0-34" name="__codelineno-0-34" href="#__codelineno-0-34"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">ğŸ¤ TCP Handshake: </span><span class="si">{</span><span class="n">tcp_time</span><span class="o">*</span><span class="mi">1000</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">ms&quot;</span><span class="p">)</span>
</span><span id="__span-0-35"><a id="__codelineno-0-35" name="__codelineno-0-35" href="#__codelineno-0-35"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   SYN â†’ </span><span class="si">{</span><span class="n">dns_result</span><span class="p">[</span><span class="s1">&#39;ip&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">:443&quot;</span><span class="p">)</span>
</span><span id="__span-0-36"><a id="__codelineno-0-36" name="__codelineno-0-36" href="#__codelineno-0-36"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   SYN-ACK â† </span><span class="si">{</span><span class="n">dns_result</span><span class="p">[</span><span class="s1">&#39;ip&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">:443&quot;</span><span class="p">)</span>
</span><span id="__span-0-37"><a id="__codelineno-0-37" name="__codelineno-0-37" href="#__codelineno-0-37"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   ACK â†’ </span><span class="si">{</span><span class="n">dns_result</span><span class="p">[</span><span class="s1">&#39;ip&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">:443&quot;</span><span class="p">)</span>
</span><span id="__span-0-38"><a id="__codelineno-0-38" name="__codelineno-0-38" href="#__codelineno-0-38"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Connection: ESTABLISHED âœ…&quot;</span><span class="p">)</span>
</span><span id="__span-0-39"><a id="__codelineno-0-39" name="__codelineno-0-39" href="#__codelineno-0-39"></a>
</span><span id="__span-0-40"><a id="__codelineno-0-40" name="__codelineno-0-40" href="#__codelineno-0-40"></a>        <span class="c1"># Step 3: TLS/SSL Negotiation</span>
</span><span id="__span-0-41"><a id="__codelineno-0-41" name="__codelineno-0-41" href="#__codelineno-0-41"></a>        <span class="n">start_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
</span><span id="__span-0-42"><a id="__codelineno-0-42" name="__codelineno-0-42" href="#__codelineno-0-42"></a>        <span class="n">tls_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">trace_tls_handshake</span><span class="p">(</span><span class="n">dns_result</span><span class="p">[</span><span class="s1">&#39;ip&#39;</span><span class="p">],</span> <span class="mi">443</span><span class="p">)</span>
</span><span id="__span-0-43"><a id="__codelineno-0-43" name="__codelineno-0-43" href="#__codelineno-0-43"></a>        <span class="n">tls_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start_time</span>
</span><span id="__span-0-44"><a id="__codelineno-0-44" name="__codelineno-0-44" href="#__codelineno-0-44"></a>
</span><span id="__span-0-45"><a id="__codelineno-0-45" name="__codelineno-0-45" href="#__codelineno-0-45"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">ğŸ” TLS Handshake: </span><span class="si">{</span><span class="n">tls_time</span><span class="o">*</span><span class="mi">1000</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">ms&quot;</span><span class="p">)</span>
</span><span id="__span-0-46"><a id="__codelineno-0-46" name="__codelineno-0-46" href="#__codelineno-0-46"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Client Hello â†’ Server&quot;</span><span class="p">)</span>
</span><span id="__span-0-47"><a id="__codelineno-0-47" name="__codelineno-0-47" href="#__codelineno-0-47"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Server Hello â† Server&quot;</span><span class="p">)</span>
</span><span id="__span-0-48"><a id="__codelineno-0-48" name="__codelineno-0-48" href="#__codelineno-0-48"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Certificate â† Server&quot;</span><span class="p">)</span>
</span><span id="__span-0-49"><a id="__codelineno-0-49" name="__codelineno-0-49" href="#__codelineno-0-49"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Key Exchange â†’ Server&quot;</span><span class="p">)</span>
</span><span id="__span-0-50"><a id="__codelineno-0-50" name="__codelineno-0-50" href="#__codelineno-0-50"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Secure Connection: ESTABLISHED ğŸ”’&quot;</span><span class="p">)</span>
</span><span id="__span-0-51"><a id="__codelineno-0-51" name="__codelineno-0-51" href="#__codelineno-0-51"></a>
</span><span id="__span-0-52"><a id="__codelineno-0-52" name="__codelineno-0-52" href="#__codelineno-0-52"></a>        <span class="c1"># Step 4: HTTP Request/Response</span>
</span><span id="__span-0-53"><a id="__codelineno-0-53" name="__codelineno-0-53" href="#__codelineno-0-53"></a>        <span class="n">start_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
</span><span id="__span-0-54"><a id="__codelineno-0-54" name="__codelineno-0-54" href="#__codelineno-0-54"></a>        <span class="n">http_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">trace_http_exchange</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
</span><span id="__span-0-55"><a id="__codelineno-0-55" name="__codelineno-0-55" href="#__codelineno-0-55"></a>        <span class="n">http_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start_time</span>
</span><span id="__span-0-56"><a id="__codelineno-0-56" name="__codelineno-0-56" href="#__codelineno-0-56"></a>
</span><span id="__span-0-57"><a id="__codelineno-0-57" name="__codelineno-0-57" href="#__codelineno-0-57"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">ğŸ“¡ HTTP Exchange: </span><span class="si">{</span><span class="n">http_time</span><span class="o">*</span><span class="mi">1000</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">ms&quot;</span><span class="p">)</span>
</span><span id="__span-0-58"><a id="__codelineno-0-58" name="__codelineno-0-58" href="#__codelineno-0-58"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   GET / HTTP/2.0 â†’ Server&quot;</span><span class="p">)</span>
</span><span id="__span-0-59"><a id="__codelineno-0-59" name="__codelineno-0-59" href="#__codelineno-0-59"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   HTTP/2.0 200 OK â† Server&quot;</span><span class="p">)</span>
</span><span id="__span-0-60"><a id="__codelineno-0-60" name="__codelineno-0-60" href="#__codelineno-0-60"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Content-Length: </span><span class="si">{</span><span class="n">http_result</span><span class="p">[</span><span class="s1">&#39;content_length&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> bytes&quot;</span><span class="p">)</span>
</span><span id="__span-0-61"><a id="__codelineno-0-61" name="__codelineno-0-61" href="#__codelineno-0-61"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Content-Type: </span><span class="si">{</span><span class="n">http_result</span><span class="p">[</span><span class="s1">&#39;content_type&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-0-62"><a id="__codelineno-0-62" name="__codelineno-0-62" href="#__codelineno-0-62"></a>
</span><span id="__span-0-63"><a id="__codelineno-0-63" name="__codelineno-0-63" href="#__codelineno-0-63"></a>        <span class="c1"># Step 5: Analysis Summary</span>
</span><span id="__span-0-64"><a id="__codelineno-0-64" name="__codelineno-0-64" href="#__codelineno-0-64"></a>        <span class="n">total_time</span> <span class="o">=</span> <span class="n">dns_time</span> <span class="o">+</span> <span class="n">tcp_time</span> <span class="o">+</span> <span class="n">tls_time</span> <span class="o">+</span> <span class="n">http_time</span>
</span><span id="__span-0-65"><a id="__codelineno-0-65" name="__codelineno-0-65" href="#__codelineno-0-65"></a>
</span><span id="__span-0-66"><a id="__codelineno-0-66" name="__codelineno-0-66" href="#__codelineno-0-66"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">ğŸ“Š Performance Analysis:&quot;</span><span class="p">)</span>
</span><span id="__span-0-67"><a id="__codelineno-0-67" name="__codelineno-0-67" href="#__codelineno-0-67"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Total Request Time: </span><span class="si">{</span><span class="n">total_time</span><span class="o">*</span><span class="mi">1000</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">ms&quot;</span><span class="p">)</span>
</span><span id="__span-0-68"><a id="__codelineno-0-68" name="__codelineno-0-68" href="#__codelineno-0-68"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   DNS Resolution: </span><span class="si">{</span><span class="p">(</span><span class="n">dns_time</span><span class="o">/</span><span class="n">total_time</span><span class="p">)</span><span class="o">*</span><span class="mi">100</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2">%&quot;</span><span class="p">)</span>
</span><span id="__span-0-69"><a id="__codelineno-0-69" name="__codelineno-0-69" href="#__codelineno-0-69"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   TCP Handshake: </span><span class="si">{</span><span class="p">(</span><span class="n">tcp_time</span><span class="o">/</span><span class="n">total_time</span><span class="p">)</span><span class="o">*</span><span class="mi">100</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2">%&quot;</span><span class="p">)</span>
</span><span id="__span-0-70"><a id="__codelineno-0-70" name="__codelineno-0-70" href="#__codelineno-0-70"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   TLS Negotiation: </span><span class="si">{</span><span class="p">(</span><span class="n">tls_time</span><span class="o">/</span><span class="n">total_time</span><span class="p">)</span><span class="o">*</span><span class="mi">100</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2">%&quot;</span><span class="p">)</span>
</span><span id="__span-0-71"><a id="__codelineno-0-71" name="__codelineno-0-71" href="#__codelineno-0-71"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   HTTP Transfer: </span><span class="si">{</span><span class="p">(</span><span class="n">http_time</span><span class="o">/</span><span class="n">total_time</span><span class="p">)</span><span class="o">*</span><span class="mi">100</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2">%&quot;</span><span class="p">)</span>
</span><span id="__span-0-72"><a id="__codelineno-0-72" name="__codelineno-0-72" href="#__codelineno-0-72"></a>
</span><span id="__span-0-73"><a id="__codelineno-0-73" name="__codelineno-0-73" href="#__codelineno-0-73"></a>        <span class="k">return</span> <span class="p">{</span>
</span><span id="__span-0-74"><a id="__codelineno-0-74" name="__codelineno-0-74" href="#__codelineno-0-74"></a>            <span class="s1">&#39;total_time&#39;</span><span class="p">:</span> <span class="n">total_time</span><span class="p">,</span>
</span><span id="__span-0-75"><a id="__codelineno-0-75" name="__codelineno-0-75" href="#__codelineno-0-75"></a>            <span class="s1">&#39;breakdown&#39;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-0-76"><a id="__codelineno-0-76" name="__codelineno-0-76" href="#__codelineno-0-76"></a>                <span class="s1">&#39;dns&#39;</span><span class="p">:</span> <span class="n">dns_time</span><span class="p">,</span>
</span><span id="__span-0-77"><a id="__codelineno-0-77" name="__codelineno-0-77" href="#__codelineno-0-77"></a>                <span class="s1">&#39;tcp&#39;</span><span class="p">:</span> <span class="n">tcp_time</span><span class="p">,</span>
</span><span id="__span-0-78"><a id="__codelineno-0-78" name="__codelineno-0-78" href="#__codelineno-0-78"></a>                <span class="s1">&#39;tls&#39;</span><span class="p">:</span> <span class="n">tls_time</span><span class="p">,</span>
</span><span id="__span-0-79"><a id="__codelineno-0-79" name="__codelineno-0-79" href="#__codelineno-0-79"></a>                <span class="s1">&#39;http&#39;</span><span class="p">:</span> <span class="n">http_time</span>
</span><span id="__span-0-80"><a id="__codelineno-0-80" name="__codelineno-0-80" href="#__codelineno-0-80"></a>            <span class="p">},</span>
</span><span id="__span-0-81"><a id="__codelineno-0-81" name="__codelineno-0-81" href="#__codelineno-0-81"></a>            <span class="s1">&#39;packet_count&#39;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">packet_history</span><span class="p">)</span>
</span><span id="__span-0-82"><a id="__codelineno-0-82" name="__codelineno-0-82" href="#__codelineno-0-82"></a>        <span class="p">}</span>
</span><span id="__span-0-83"><a id="__codelineno-0-83" name="__codelineno-0-83" href="#__codelineno-0-83"></a>
</span><span id="__span-0-84"><a id="__codelineno-0-84" name="__codelineno-0-84" href="#__codelineno-0-84"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">trace_dns_lookup</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">):</span>
</span><span id="__span-0-85"><a id="__codelineno-0-85" name="__codelineno-0-85" href="#__codelineno-0-85"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Detailed DNS resolution tracing&quot;&quot;&quot;</span>
</span><span id="__span-0-86"><a id="__codelineno-0-86" name="__codelineno-0-86" href="#__codelineno-0-86"></a>
</span><span id="__span-0-87"><a id="__codelineno-0-87" name="__codelineno-0-87" href="#__codelineno-0-87"></a>        <span class="n">domain</span> <span class="o">=</span> <span class="n">url</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;https://&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;http://&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="__span-0-88"><a id="__codelineno-0-88" name="__codelineno-0-88" href="#__codelineno-0-88"></a>
</span><span id="__span-0-89"><a id="__codelineno-0-89" name="__codelineno-0-89" href="#__codelineno-0-89"></a>        <span class="c1"># Simulate DNS lookup process</span>
</span><span id="__span-0-90"><a id="__codelineno-0-90" name="__codelineno-0-90" href="#__codelineno-0-90"></a>        <span class="n">dns_servers</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="__span-0-91"><a id="__codelineno-0-91" name="__codelineno-0-91" href="#__codelineno-0-91"></a>            <span class="s2">&quot;Local Cache&quot;</span><span class="p">,</span>
</span><span id="__span-0-92"><a id="__codelineno-0-92" name="__codelineno-0-92" href="#__codelineno-0-92"></a>            <span class="s2">&quot;Router DNS (192.168.1.1)&quot;</span><span class="p">,</span>
</span><span id="__span-0-93"><a id="__codelineno-0-93" name="__codelineno-0-93" href="#__codelineno-0-93"></a>            <span class="s2">&quot;ISP DNS (8.8.8.8)&quot;</span><span class="p">,</span>
</span><span id="__span-0-94"><a id="__codelineno-0-94" name="__codelineno-0-94" href="#__codelineno-0-94"></a>            <span class="s2">&quot;Root Server (.)&quot;</span><span class="p">,</span>
</span><span id="__span-0-95"><a id="__codelineno-0-95" name="__codelineno-0-95" href="#__codelineno-0-95"></a>            <span class="s2">&quot;TLD Server (.com)&quot;</span><span class="p">,</span>
</span><span id="__span-0-96"><a id="__codelineno-0-96" name="__codelineno-0-96" href="#__codelineno-0-96"></a>            <span class="s2">&quot;Authoritative Server&quot;</span>
</span><span id="__span-0-97"><a id="__codelineno-0-97" name="__codelineno-0-97" href="#__codelineno-0-97"></a>        <span class="p">]</span>
</span><span id="__span-0-98"><a id="__codelineno-0-98" name="__codelineno-0-98" href="#__codelineno-0-98"></a>
</span><span id="__span-0-99"><a id="__codelineno-0-99" name="__codelineno-0-99" href="#__codelineno-0-99"></a>        <span class="c1"># In reality, would use socket.gethostbyname()</span>
</span><span id="__span-0-100"><a id="__codelineno-0-100" name="__codelineno-0-100" href="#__codelineno-0-100"></a>        <span class="kn">import</span><span class="w"> </span><span class="nn">socket</span>
</span><span id="__span-0-101"><a id="__codelineno-0-101" name="__codelineno-0-101" href="#__codelineno-0-101"></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="__span-0-102"><a id="__codelineno-0-102" name="__codelineno-0-102" href="#__codelineno-0-102"></a>            <span class="n">ip_address</span> <span class="o">=</span> <span class="n">socket</span><span class="o">.</span><span class="n">gethostbyname</span><span class="p">(</span><span class="n">domain</span><span class="p">)</span>
</span><span id="__span-0-103"><a id="__codelineno-0-103" name="__codelineno-0-103" href="#__codelineno-0-103"></a>        <span class="k">except</span><span class="p">:</span>
</span><span id="__span-0-104"><a id="__codelineno-0-104" name="__codelineno-0-104" href="#__codelineno-0-104"></a>            <span class="n">ip_address</span> <span class="o">=</span> <span class="s2">&quot;140.82.113.4&quot;</span>  <span class="c1"># GitHub&#39;s IP</span>
</span><span id="__span-0-105"><a id="__codelineno-0-105" name="__codelineno-0-105" href="#__codelineno-0-105"></a>
</span><span id="__span-0-106"><a id="__codelineno-0-106" name="__codelineno-0-106" href="#__codelineno-0-106"></a>        <span class="k">return</span> <span class="p">{</span>
</span><span id="__span-0-107"><a id="__codelineno-0-107" name="__codelineno-0-107" href="#__codelineno-0-107"></a>            <span class="s1">&#39;domain&#39;</span><span class="p">:</span> <span class="n">domain</span><span class="p">,</span>
</span><span id="__span-0-108"><a id="__codelineno-0-108" name="__codelineno-0-108" href="#__codelineno-0-108"></a>            <span class="s1">&#39;ip&#39;</span><span class="p">:</span> <span class="n">ip_address</span><span class="p">,</span>
</span><span id="__span-0-109"><a id="__codelineno-0-109" name="__codelineno-0-109" href="#__codelineno-0-109"></a>            <span class="s1">&#39;dns_servers&#39;</span><span class="p">:</span> <span class="n">dns_servers</span>
</span><span id="__span-0-110"><a id="__codelineno-0-110" name="__codelineno-0-110" href="#__codelineno-0-110"></a>        <span class="p">}</span>
</span><span id="__span-0-111"><a id="__codelineno-0-111" name="__codelineno-0-111" href="#__codelineno-0-111"></a>
</span><span id="__span-0-112"><a id="__codelineno-0-112" name="__codelineno-0-112" href="#__codelineno-0-112"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">create_packet_visualization</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">packet_type</span><span class="o">=</span><span class="s2">&quot;HTTP_GET&quot;</span><span class="p">):</span>
</span><span id="__span-0-113"><a id="__codelineno-0-113" name="__codelineno-0-113" href="#__codelineno-0-113"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Create visual representation of actual packet structure&quot;&quot;&quot;</span>
</span><span id="__span-0-114"><a id="__codelineno-0-114" name="__codelineno-0-114" href="#__codelineno-0-114"></a>
</span><span id="__span-0-115"><a id="__codelineno-0-115" name="__codelineno-0-115" href="#__codelineno-0-115"></a>        <span class="k">if</span> <span class="n">packet_type</span> <span class="o">==</span> <span class="s2">&quot;HTTP_GET&quot;</span><span class="p">:</span>
</span><span id="__span-0-116"><a id="__codelineno-0-116" name="__codelineno-0-116" href="#__codelineno-0-116"></a>            <span class="n">packet_structure</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="__span-0-117"><a id="__codelineno-0-117" name="__codelineno-0-117" href="#__codelineno-0-117"></a>                <span class="s1">&#39;ethernet_header&#39;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-0-118"><a id="__codelineno-0-118" name="__codelineno-0-118" href="#__codelineno-0-118"></a>                    <span class="s1">&#39;destination_mac&#39;</span><span class="p">:</span> <span class="s1">&#39;aa:bb:cc:dd:ee:ff&#39;</span><span class="p">,</span>
</span><span id="__span-0-119"><a id="__codelineno-0-119" name="__codelineno-0-119" href="#__codelineno-0-119"></a>                    <span class="s1">&#39;source_mac&#39;</span><span class="p">:</span> <span class="s1">&#39;11:22:33:44:55:66&#39;</span><span class="p">,</span>
</span><span id="__span-0-120"><a id="__codelineno-0-120" name="__codelineno-0-120" href="#__codelineno-0-120"></a>                    <span class="s1">&#39;ethertype&#39;</span><span class="p">:</span> <span class="s1">&#39;0x0800 (IPv4)&#39;</span>
</span><span id="__span-0-121"><a id="__codelineno-0-121" name="__codelineno-0-121" href="#__codelineno-0-121"></a>                <span class="p">},</span>
</span><span id="__span-0-122"><a id="__codelineno-0-122" name="__codelineno-0-122" href="#__codelineno-0-122"></a>                <span class="s1">&#39;ip_header&#39;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-0-123"><a id="__codelineno-0-123" name="__codelineno-0-123" href="#__codelineno-0-123"></a>                    <span class="s1">&#39;version&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
</span><span id="__span-0-124"><a id="__codelineno-0-124" name="__codelineno-0-124" href="#__codelineno-0-124"></a>                    <span class="s1">&#39;header_length&#39;</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span>
</span><span id="__span-0-125"><a id="__codelineno-0-125" name="__codelineno-0-125" href="#__codelineno-0-125"></a>                    <span class="s1">&#39;total_length&#39;</span><span class="p">:</span> <span class="mi">562</span><span class="p">,</span>
</span><span id="__span-0-126"><a id="__codelineno-0-126" name="__codelineno-0-126" href="#__codelineno-0-126"></a>                    <span class="s1">&#39;identification&#39;</span><span class="p">:</span> <span class="mi">12345</span><span class="p">,</span>
</span><span id="__span-0-127"><a id="__codelineno-0-127" name="__codelineno-0-127" href="#__codelineno-0-127"></a>                    <span class="s1">&#39;flags&#39;</span><span class="p">:</span> <span class="s1">&#39;Don</span><span class="se">\&#39;</span><span class="s1">t Fragment&#39;</span><span class="p">,</span>
</span><span id="__span-0-128"><a id="__codelineno-0-128" name="__codelineno-0-128" href="#__codelineno-0-128"></a>                    <span class="s1">&#39;ttl&#39;</span><span class="p">:</span> <span class="mi">64</span><span class="p">,</span>
</span><span id="__span-0-129"><a id="__codelineno-0-129" name="__codelineno-0-129" href="#__codelineno-0-129"></a>                    <span class="s1">&#39;protocol&#39;</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span>  <span class="c1"># TCP</span>
</span><span id="__span-0-130"><a id="__codelineno-0-130" name="__codelineno-0-130" href="#__codelineno-0-130"></a>                    <span class="s1">&#39;source_ip&#39;</span><span class="p">:</span> <span class="s1">&#39;192.168.1.100&#39;</span><span class="p">,</span>
</span><span id="__span-0-131"><a id="__codelineno-0-131" name="__codelineno-0-131" href="#__codelineno-0-131"></a>                    <span class="s1">&#39;destination_ip&#39;</span><span class="p">:</span> <span class="s1">&#39;140.82.113.4&#39;</span>
</span><span id="__span-0-132"><a id="__codelineno-0-132" name="__codelineno-0-132" href="#__codelineno-0-132"></a>                <span class="p">},</span>
</span><span id="__span-0-133"><a id="__codelineno-0-133" name="__codelineno-0-133" href="#__codelineno-0-133"></a>                <span class="s1">&#39;tcp_header&#39;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-0-134"><a id="__codelineno-0-134" name="__codelineno-0-134" href="#__codelineno-0-134"></a>                    <span class="s1">&#39;source_port&#39;</span><span class="p">:</span> <span class="mi">54321</span><span class="p">,</span>
</span><span id="__span-0-135"><a id="__codelineno-0-135" name="__codelineno-0-135" href="#__codelineno-0-135"></a>                    <span class="s1">&#39;destination_port&#39;</span><span class="p">:</span> <span class="mi">443</span><span class="p">,</span>
</span><span id="__span-0-136"><a id="__codelineno-0-136" name="__codelineno-0-136" href="#__codelineno-0-136"></a>                    <span class="s1">&#39;sequence_number&#39;</span><span class="p">:</span> <span class="mi">1000000</span><span class="p">,</span>
</span><span id="__span-0-137"><a id="__codelineno-0-137" name="__codelineno-0-137" href="#__codelineno-0-137"></a>                    <span class="s1">&#39;acknowledgment&#39;</span><span class="p">:</span> <span class="mi">2000000</span><span class="p">,</span>
</span><span id="__span-0-138"><a id="__codelineno-0-138" name="__codelineno-0-138" href="#__codelineno-0-138"></a>                    <span class="s1">&#39;flags&#39;</span><span class="p">:</span> <span class="s1">&#39;PSH, ACK&#39;</span><span class="p">,</span>
</span><span id="__span-0-139"><a id="__codelineno-0-139" name="__codelineno-0-139" href="#__codelineno-0-139"></a>                    <span class="s1">&#39;window_size&#39;</span><span class="p">:</span> <span class="mi">65535</span>
</span><span id="__span-0-140"><a id="__codelineno-0-140" name="__codelineno-0-140" href="#__codelineno-0-140"></a>                <span class="p">},</span>
</span><span id="__span-0-141"><a id="__codelineno-0-141" name="__codelineno-0-141" href="#__codelineno-0-141"></a>                <span class="s1">&#39;http_data&#39;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-0-142"><a id="__codelineno-0-142" name="__codelineno-0-142" href="#__codelineno-0-142"></a>                    <span class="s1">&#39;method&#39;</span><span class="p">:</span> <span class="s1">&#39;GET&#39;</span><span class="p">,</span>
</span><span id="__span-0-143"><a id="__codelineno-0-143" name="__codelineno-0-143" href="#__codelineno-0-143"></a>                    <span class="s1">&#39;path&#39;</span><span class="p">:</span> <span class="s1">&#39;/&#39;</span><span class="p">,</span>
</span><span id="__span-0-144"><a id="__codelineno-0-144" name="__codelineno-0-144" href="#__codelineno-0-144"></a>                    <span class="s1">&#39;version&#39;</span><span class="p">:</span> <span class="s1">&#39;HTTP/2.0&#39;</span><span class="p">,</span>
</span><span id="__span-0-145"><a id="__codelineno-0-145" name="__codelineno-0-145" href="#__codelineno-0-145"></a>                    <span class="s1">&#39;headers&#39;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-0-146"><a id="__codelineno-0-146" name="__codelineno-0-146" href="#__codelineno-0-146"></a>                        <span class="s1">&#39;Host&#39;</span><span class="p">:</span> <span class="s1">&#39;github.com&#39;</span><span class="p">,</span>
</span><span id="__span-0-147"><a id="__codelineno-0-147" name="__codelineno-0-147" href="#__codelineno-0-147"></a>                        <span class="s1">&#39;User-Agent&#39;</span><span class="p">:</span> <span class="s1">&#39;Mozilla/5.0...&#39;</span><span class="p">,</span>
</span><span id="__span-0-148"><a id="__codelineno-0-148" name="__codelineno-0-148" href="#__codelineno-0-148"></a>                        <span class="s1">&#39;Accept&#39;</span><span class="p">:</span> <span class="s1">&#39;text/html,application/xhtml+xml&#39;</span><span class="p">,</span>
</span><span id="__span-0-149"><a id="__codelineno-0-149" name="__codelineno-0-149" href="#__codelineno-0-149"></a>                        <span class="s1">&#39;Accept-Language&#39;</span><span class="p">:</span> <span class="s1">&#39;en-US,en;q=0.9&#39;</span><span class="p">,</span>
</span><span id="__span-0-150"><a id="__codelineno-0-150" name="__codelineno-0-150" href="#__codelineno-0-150"></a>                        <span class="s1">&#39;Accept-Encoding&#39;</span><span class="p">:</span> <span class="s1">&#39;gzip, deflate, br&#39;</span><span class="p">,</span>
</span><span id="__span-0-151"><a id="__codelineno-0-151" name="__codelineno-0-151" href="#__codelineno-0-151"></a>                        <span class="s1">&#39;Connection&#39;</span><span class="p">:</span> <span class="s1">&#39;keep-alive&#39;</span>
</span><span id="__span-0-152"><a id="__codelineno-0-152" name="__codelineno-0-152" href="#__codelineno-0-152"></a>                    <span class="p">}</span>
</span><span id="__span-0-153"><a id="__codelineno-0-153" name="__codelineno-0-153" href="#__codelineno-0-153"></a>                <span class="p">}</span>
</span><span id="__span-0-154"><a id="__codelineno-0-154" name="__codelineno-0-154" href="#__codelineno-0-154"></a>            <span class="p">}</span>
</span><span id="__span-0-155"><a id="__codelineno-0-155" name="__codelineno-0-155" href="#__codelineno-0-155"></a>
</span><span id="__span-0-156"><a id="__codelineno-0-156" name="__codelineno-0-156" href="#__codelineno-0-156"></a>            <span class="k">return</span> <span class="n">packet_structure</span>
</span><span id="__span-0-157"><a id="__codelineno-0-157" name="__codelineno-0-157" href="#__codelineno-0-157"></a>
</span><span id="__span-0-158"><a id="__codelineno-0-158" name="__codelineno-0-158" href="#__codelineno-0-158"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">simulate_packet_loss_recovery</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-0-159"><a id="__codelineno-0-159" name="__codelineno-0-159" href="#__codelineno-0-159"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Demonstrate how TCP handles packet loss&quot;&quot;&quot;</span>
</span><span id="__span-0-160"><a id="__codelineno-0-160" name="__codelineno-0-160" href="#__codelineno-0-160"></a>
</span><span id="__span-0-161"><a id="__codelineno-0-161" name="__codelineno-0-161" href="#__codelineno-0-161"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">ğŸ”„ Packet Loss Recovery Simulation&quot;</span><span class="p">)</span>
</span><span id="__span-0-162"><a id="__codelineno-0-162" name="__codelineno-0-162" href="#__codelineno-0-162"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;-&quot;</span> <span class="o">*</span> <span class="mi">40</span><span class="p">)</span>
</span><span id="__span-0-163"><a id="__codelineno-0-163" name="__codelineno-0-163" href="#__codelineno-0-163"></a>
</span><span id="__span-0-164"><a id="__codelineno-0-164" name="__codelineno-0-164" href="#__codelineno-0-164"></a>        <span class="c1"># Simulate sending packets 1-10</span>
</span><span id="__span-0-165"><a id="__codelineno-0-165" name="__codelineno-0-165" href="#__codelineno-0-165"></a>        <span class="n">sent_packets</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">11</span><span class="p">))</span>
</span><span id="__span-0-166"><a id="__codelineno-0-166" name="__codelineno-0-166" href="#__codelineno-0-166"></a>        <span class="n">received_packets</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">]</span>  <span class="c1"># Packet 4 lost</span>
</span><span id="__span-0-167"><a id="__codelineno-0-167" name="__codelineno-0-167" href="#__codelineno-0-167"></a>
</span><span id="__span-0-168"><a id="__codelineno-0-168" name="__codelineno-0-168" href="#__codelineno-0-168"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;ğŸ“¤ Sending packets: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]&quot;</span><span class="p">)</span>
</span><span id="__span-0-169"><a id="__codelineno-0-169" name="__codelineno-0-169" href="#__codelineno-0-169"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;ğŸ“¥ Received packets: [1, 2, 3, 5, 6, 7, 8, 9, 10]&quot;</span><span class="p">)</span>
</span><span id="__span-0-170"><a id="__codelineno-0-170" name="__codelineno-0-170" href="#__codelineno-0-170"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;âŒ Lost packet: 4&quot;</span><span class="p">)</span>
</span><span id="__span-0-171"><a id="__codelineno-0-171" name="__codelineno-0-171" href="#__codelineno-0-171"></a>
</span><span id="__span-0-172"><a id="__codelineno-0-172" name="__codelineno-0-172" href="#__codelineno-0-172"></a>        <span class="c1"># TCP&#39;s response</span>
</span><span id="__span-0-173"><a id="__codelineno-0-173" name="__codelineno-0-173" href="#__codelineno-0-173"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">ğŸ”§ TCP Recovery Process:&quot;</span><span class="p">)</span>
</span><span id="__span-0-174"><a id="__codelineno-0-174" name="__codelineno-0-174" href="#__codelineno-0-174"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;1. Receiver sends ACK for packet 3 (last in-sequence)&quot;</span><span class="p">)</span>
</span><span id="__span-0-175"><a id="__codelineno-0-175" name="__codelineno-0-175" href="#__codelineno-0-175"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;2. Receiver buffers packets 5-10 (out-of-order)&quot;</span><span class="p">)</span>
</span><span id="__span-0-176"><a id="__codelineno-0-176" name="__codelineno-0-176" href="#__codelineno-0-176"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;3. Sender timeout expires for packet 4&quot;</span><span class="p">)</span>
</span><span id="__span-0-177"><a id="__codelineno-0-177" name="__codelineno-0-177" href="#__codelineno-0-177"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;4. Sender retransmits packet 4&quot;</span><span class="p">)</span>
</span><span id="__span-0-178"><a id="__codelineno-0-178" name="__codelineno-0-178" href="#__codelineno-0-178"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;5. Receiver gets packet 4, sends ACK for packet 10&quot;</span><span class="p">)</span>
</span><span id="__span-0-179"><a id="__codelineno-0-179" name="__codelineno-0-179" href="#__codelineno-0-179"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;6. All data successfully received! âœ…&quot;</span><span class="p">)</span>
</span><span id="__span-0-180"><a id="__codelineno-0-180" name="__codelineno-0-180" href="#__codelineno-0-180"></a>
</span><span id="__span-0-181"><a id="__codelineno-0-181" name="__codelineno-0-181" href="#__codelineno-0-181"></a>        <span class="k">return</span> <span class="p">{</span>
</span><span id="__span-0-182"><a id="__codelineno-0-182" name="__codelineno-0-182" href="#__codelineno-0-182"></a>            <span class="s1">&#39;original_packets&#39;</span><span class="p">:</span> <span class="n">sent_packets</span><span class="p">,</span>
</span><span id="__span-0-183"><a id="__codelineno-0-183" name="__codelineno-0-183" href="#__codelineno-0-183"></a>            <span class="s1">&#39;lost_packets&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">4</span><span class="p">],</span>
</span><span id="__span-0-184"><a id="__codelineno-0-184" name="__codelineno-0-184" href="#__codelineno-0-184"></a>            <span class="s1">&#39;recovery_time&#39;</span><span class="p">:</span> <span class="mf">0.2</span><span class="p">,</span>  <span class="c1"># seconds</span>
</span><span id="__span-0-185"><a id="__codelineno-0-185" name="__codelineno-0-185" href="#__codelineno-0-185"></a>            <span class="s1">&#39;final_status&#39;</span><span class="p">:</span> <span class="s1">&#39;SUCCESS&#39;</span>
</span><span id="__span-0-186"><a id="__codelineno-0-186" name="__codelineno-0-186" href="#__codelineno-0-186"></a>        <span class="p">}</span>
</span><span id="__span-0-187"><a id="__codelineno-0-187" name="__codelineno-0-187" href="#__codelineno-0-187"></a>
</span><span id="__span-0-188"><a id="__codelineno-0-188" name="__codelineno-0-188" href="#__codelineno-0-188"></a><span class="c1"># Demonstrate real packet analysis</span>
</span><span id="__span-0-189"><a id="__codelineno-0-189" name="__codelineno-0-189" href="#__codelineno-0-189"></a><span class="n">analyzer</span> <span class="o">=</span> <span class="n">WebRequestAnalyzer</span><span class="p">()</span>
</span><span id="__span-0-190"><a id="__codelineno-0-190" name="__codelineno-0-190" href="#__codelineno-0-190"></a>
</span><span id="__span-0-191"><a id="__codelineno-0-191" name="__codelineno-0-191" href="#__codelineno-0-191"></a><span class="c1"># Trace a real web request</span>
</span><span id="__span-0-192"><a id="__codelineno-0-192" name="__codelineno-0-192" href="#__codelineno-0-192"></a><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;ğŸŒ REAL PACKET JOURNEY ANALYSIS&quot;</span><span class="p">)</span>
</span><span id="__span-0-193"><a id="__codelineno-0-193" name="__codelineno-0-193" href="#__codelineno-0-193"></a><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Let&#39;s follow what happens when you visit a website!&quot;</span><span class="p">)</span>
</span><span id="__span-0-194"><a id="__codelineno-0-194" name="__codelineno-0-194" href="#__codelineno-0-194"></a><span class="nb">print</span><span class="p">()</span>
</span><span id="__span-0-195"><a id="__codelineno-0-195" name="__codelineno-0-195" href="#__codelineno-0-195"></a>
</span><span id="__span-0-196"><a id="__codelineno-0-196" name="__codelineno-0-196" href="#__codelineno-0-196"></a><span class="n">result</span> <span class="o">=</span> <span class="n">analyzer</span><span class="o">.</span><span class="n">trace_web_request</span><span class="p">(</span><span class="s2">&quot;https://github.com&quot;</span><span class="p">)</span>
</span><span id="__span-0-197"><a id="__codelineno-0-197" name="__codelineno-0-197" href="#__codelineno-0-197"></a>
</span><span id="__span-0-198"><a id="__codelineno-0-198" name="__codelineno-0-198" href="#__codelineno-0-198"></a><span class="c1"># Show packet structure</span>
</span><span id="__span-0-199"><a id="__codelineno-0-199" name="__codelineno-0-199" href="#__codelineno-0-199"></a><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">ğŸ“¦ ACTUAL PACKET STRUCTURE&quot;</span><span class="p">)</span>
</span><span id="__span-0-200"><a id="__codelineno-0-200" name="__codelineno-0-200" href="#__codelineno-0-200"></a><span class="n">packet</span> <span class="o">=</span> <span class="n">analyzer</span><span class="o">.</span><span class="n">create_packet_visualization</span><span class="p">()</span>
</span><span id="__span-0-201"><a id="__codelineno-0-201" name="__codelineno-0-201" href="#__codelineno-0-201"></a>
</span><span id="__span-0-202"><a id="__codelineno-0-202" name="__codelineno-0-202" href="#__codelineno-0-202"></a><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Ethernet Header:&quot;</span><span class="p">)</span>
</span><span id="__span-0-203"><a id="__codelineno-0-203" name="__codelineno-0-203" href="#__codelineno-0-203"></a><span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">packet</span><span class="p">[</span><span class="s1">&#39;ethernet_header&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="__span-0-204"><a id="__codelineno-0-204" name="__codelineno-0-204" href="#__codelineno-0-204"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  </span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-0-205"><a id="__codelineno-0-205" name="__codelineno-0-205" href="#__codelineno-0-205"></a>
</span><span id="__span-0-206"><a id="__codelineno-0-206" name="__codelineno-0-206" href="#__codelineno-0-206"></a><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">IP Header:&quot;</span><span class="p">)</span>
</span><span id="__span-0-207"><a id="__codelineno-0-207" name="__codelineno-0-207" href="#__codelineno-0-207"></a><span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">packet</span><span class="p">[</span><span class="s1">&#39;ip_header&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="__span-0-208"><a id="__codelineno-0-208" name="__codelineno-0-208" href="#__codelineno-0-208"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  </span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-0-209"><a id="__codelineno-0-209" name="__codelineno-0-209" href="#__codelineno-0-209"></a>
</span><span id="__span-0-210"><a id="__codelineno-0-210" name="__codelineno-0-210" href="#__codelineno-0-210"></a><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">TCP Header:&quot;</span><span class="p">)</span>
</span><span id="__span-0-211"><a id="__codelineno-0-211" name="__codelineno-0-211" href="#__codelineno-0-211"></a><span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">packet</span><span class="p">[</span><span class="s1">&#39;tcp_header&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="__span-0-212"><a id="__codelineno-0-212" name="__codelineno-0-212" href="#__codelineno-0-212"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  </span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-0-213"><a id="__codelineno-0-213" name="__codelineno-0-213" href="#__codelineno-0-213"></a>
</span><span id="__span-0-214"><a id="__codelineno-0-214" name="__codelineno-0-214" href="#__codelineno-0-214"></a><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">HTTP Data:&quot;</span><span class="p">)</span>
</span><span id="__span-0-215"><a id="__codelineno-0-215" name="__codelineno-0-215" href="#__codelineno-0-215"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  </span><span class="si">{</span><span class="n">packet</span><span class="p">[</span><span class="s1">&#39;http_data&#39;</span><span class="p">][</span><span class="s1">&#39;method&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">packet</span><span class="p">[</span><span class="s1">&#39;http_data&#39;</span><span class="p">][</span><span class="s1">&#39;path&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">packet</span><span class="p">[</span><span class="s1">&#39;http_data&#39;</span><span class="p">][</span><span class="s1">&#39;version&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-0-216"><a id="__codelineno-0-216" name="__codelineno-0-216" href="#__codelineno-0-216"></a><span class="k">for</span> <span class="n">header</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">packet</span><span class="p">[</span><span class="s1">&#39;http_data&#39;</span><span class="p">][</span><span class="s1">&#39;headers&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="__span-0-217"><a id="__codelineno-0-217" name="__codelineno-0-217" href="#__codelineno-0-217"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  </span><span class="si">{</span><span class="n">header</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-0-218"><a id="__codelineno-0-218" name="__codelineno-0-218" href="#__codelineno-0-218"></a>
</span><span id="__span-0-219"><a id="__codelineno-0-219" name="__codelineno-0-219" href="#__codelineno-0-219"></a><span class="c1"># Demonstrate reliability</span>
</span><span id="__span-0-220"><a id="__codelineno-0-220" name="__codelineno-0-220" href="#__codelineno-0-220"></a><span class="n">analyzer</span><span class="o">.</span><span class="n">simulate_packet_loss_recovery</span><span class="p">()</span>
</span></code></pre></div>
</details>
<details class="example">
<summary><strong>ğŸ® Interactive Packet Inspector Tool</strong></summary>
<div class="language-javascript highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="c1">// Real-time packet monitoring in browser dev tools</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="kd">class</span><span class="w"> </span><span class="nx">PacketInspector</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="w">    </span><span class="kr">constructor</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">packets</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[];</span>
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">filters</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="w">            </span><span class="nx">protocol</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;all&#39;</span><span class="p">,</span>
</span><span id="__span-1-7"><a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="w">            </span><span class="nx">minSize</span><span class="o">:</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span>
</span><span id="__span-1-8"><a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a><span class="w">            </span><span class="nx">maxSize</span><span class="o">:</span><span class="w"> </span><span class="kc">Infinity</span>
</span><span id="__span-1-9"><a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a><span class="w">        </span><span class="p">};</span>
</span><span id="__span-1-10"><a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-1-11"><a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a>
</span><span id="__span-1-12"><a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a><span class="w">    </span><span class="c1">// Monitor network requests in real-time</span>
</span><span id="__span-1-13"><a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a><span class="w">    </span><span class="nx">startCapture</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-1-14"><a id="__codelineno-1-14" name="__codelineno-1-14" href="#__codelineno-1-14"></a><span class="w">        </span><span class="c1">// Intercept fetch requests</span>
</span><span id="__span-1-15"><a id="__codelineno-1-15" name="__codelineno-1-15" href="#__codelineno-1-15"></a><span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">originalFetch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">window</span><span class="p">.</span><span class="nx">fetch</span><span class="p">;</span>
</span><span id="__span-1-16"><a id="__codelineno-1-16" name="__codelineno-1-16" href="#__codelineno-1-16"></a><span class="w">        </span><span class="nb">window</span><span class="p">.</span><span class="nx">fetch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="p">(...</span><span class="nx">args</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-1-17"><a id="__codelineno-1-17" name="__codelineno-1-17" href="#__codelineno-1-17"></a><span class="w">            </span><span class="kd">const</span><span class="w"> </span><span class="nx">startTime</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">performance</span><span class="p">.</span><span class="nx">now</span><span class="p">();</span>
</span><span id="__span-1-18"><a id="__codelineno-1-18" name="__codelineno-1-18" href="#__codelineno-1-18"></a>
</span><span id="__span-1-19"><a id="__codelineno-1-19" name="__codelineno-1-19" href="#__codelineno-1-19"></a><span class="w">            </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-1-20"><a id="__codelineno-1-20" name="__codelineno-1-20" href="#__codelineno-1-20"></a><span class="w">                </span><span class="kd">const</span><span class="w"> </span><span class="nx">response</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">originalFetch</span><span class="p">(...</span><span class="nx">args</span><span class="p">);</span>
</span><span id="__span-1-21"><a id="__codelineno-1-21" name="__codelineno-1-21" href="#__codelineno-1-21"></a><span class="w">                </span><span class="kd">const</span><span class="w"> </span><span class="nx">endTime</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">performance</span><span class="p">.</span><span class="nx">now</span><span class="p">();</span>
</span><span id="__span-1-22"><a id="__codelineno-1-22" name="__codelineno-1-22" href="#__codelineno-1-22"></a>
</span><span id="__span-1-23"><a id="__codelineno-1-23" name="__codelineno-1-23" href="#__codelineno-1-23"></a><span class="w">                </span><span class="k">this</span><span class="p">.</span><span class="nx">recordPacket</span><span class="p">({</span>
</span><span id="__span-1-24"><a id="__codelineno-1-24" name="__codelineno-1-24" href="#__codelineno-1-24"></a><span class="w">                    </span><span class="nx">url</span><span class="o">:</span><span class="w"> </span><span class="nx">args</span><span class="p">[</span><span class="mf">0</span><span class="p">],</span>
</span><span id="__span-1-25"><a id="__codelineno-1-25" name="__codelineno-1-25" href="#__codelineno-1-25"></a><span class="w">                    </span><span class="nx">method</span><span class="o">:</span><span class="w"> </span><span class="nx">args</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span><span class="o">?</span><span class="p">.</span><span class="nx">method</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="s1">&#39;GET&#39;</span><span class="p">,</span>
</span><span id="__span-1-26"><a id="__codelineno-1-26" name="__codelineno-1-26" href="#__codelineno-1-26"></a><span class="w">                    </span><span class="nx">status</span><span class="o">:</span><span class="w"> </span><span class="nx">response</span><span class="p">.</span><span class="nx">status</span><span class="p">,</span>
</span><span id="__span-1-27"><a id="__codelineno-1-27" name="__codelineno-1-27" href="#__codelineno-1-27"></a><span class="w">                    </span><span class="nx">size</span><span class="o">:</span><span class="w"> </span><span class="nx">response</span><span class="p">.</span><span class="nx">headers</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;content-length&#39;</span><span class="p">),</span>
</span><span id="__span-1-28"><a id="__codelineno-1-28" name="__codelineno-1-28" href="#__codelineno-1-28"></a><span class="w">                    </span><span class="nx">time</span><span class="o">:</span><span class="w"> </span><span class="nx">endTime</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nx">startTime</span><span class="p">,</span>
</span><span id="__span-1-29"><a id="__codelineno-1-29" name="__codelineno-1-29" href="#__codelineno-1-29"></a><span class="w">                    </span><span class="nx">timestamp</span><span class="o">:</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nb">Date</span><span class="p">()</span>
</span><span id="__span-1-30"><a id="__codelineno-1-30" name="__codelineno-1-30" href="#__codelineno-1-30"></a><span class="w">                </span><span class="p">});</span>
</span><span id="__span-1-31"><a id="__codelineno-1-31" name="__codelineno-1-31" href="#__codelineno-1-31"></a>
</span><span id="__span-1-32"><a id="__codelineno-1-32" name="__codelineno-1-32" href="#__codelineno-1-32"></a><span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="nx">response</span><span class="p">;</span>
</span><span id="__span-1-33"><a id="__codelineno-1-33" name="__codelineno-1-33" href="#__codelineno-1-33"></a><span class="w">            </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="nx">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-1-34"><a id="__codelineno-1-34" name="__codelineno-1-34" href="#__codelineno-1-34"></a><span class="w">                </span><span class="k">this</span><span class="p">.</span><span class="nx">recordError</span><span class="p">(</span><span class="nx">args</span><span class="p">[</span><span class="mf">0</span><span class="p">],</span><span class="w"> </span><span class="nx">error</span><span class="p">);</span>
</span><span id="__span-1-35"><a id="__codelineno-1-35" name="__codelineno-1-35" href="#__codelineno-1-35"></a><span class="w">                </span><span class="k">throw</span><span class="w"> </span><span class="nx">error</span><span class="p">;</span>
</span><span id="__span-1-36"><a id="__codelineno-1-36" name="__codelineno-1-36" href="#__codelineno-1-36"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-1-37"><a id="__codelineno-1-37" name="__codelineno-1-37" href="#__codelineno-1-37"></a><span class="w">        </span><span class="p">};</span>
</span><span id="__span-1-38"><a id="__codelineno-1-38" name="__codelineno-1-38" href="#__codelineno-1-38"></a>
</span><span id="__span-1-39"><a id="__codelineno-1-39" name="__codelineno-1-39" href="#__codelineno-1-39"></a><span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;ğŸ“¡ Packet Inspector started!&quot;</span><span class="p">);</span>
</span><span id="__span-1-40"><a id="__codelineno-1-40" name="__codelineno-1-40" href="#__codelineno-1-40"></a><span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;Open Network tab to see captured packets&quot;</span><span class="p">);</span>
</span><span id="__span-1-41"><a id="__codelineno-1-41" name="__codelineno-1-41" href="#__codelineno-1-41"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-1-42"><a id="__codelineno-1-42" name="__codelineno-1-42" href="#__codelineno-1-42"></a>
</span><span id="__span-1-43"><a id="__codelineno-1-43" name="__codelineno-1-43" href="#__codelineno-1-43"></a><span class="w">    </span><span class="nx">recordPacket</span><span class="p">(</span><span class="nx">packetInfo</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-1-44"><a id="__codelineno-1-44" name="__codelineno-1-44" href="#__codelineno-1-44"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">packets</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">packetInfo</span><span class="p">);</span>
</span><span id="__span-1-45"><a id="__codelineno-1-45" name="__codelineno-1-45" href="#__codelineno-1-45"></a>
</span><span id="__span-1-46"><a id="__codelineno-1-46" name="__codelineno-1-46" href="#__codelineno-1-46"></a><span class="w">        </span><span class="c1">// Real-time console output</span>
</span><span id="__span-1-47"><a id="__codelineno-1-47" name="__codelineno-1-47" href="#__codelineno-1-47"></a><span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">group</span><span class="p">(</span><span class="sb">`ğŸ“¦ Packet #</span><span class="si">${</span><span class="k">this</span><span class="p">.</span><span class="nx">packets</span><span class="p">.</span><span class="nx">length</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
</span><span id="__span-1-48"><a id="__codelineno-1-48" name="__codelineno-1-48" href="#__codelineno-1-48"></a><span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`URL: </span><span class="si">${</span><span class="nx">packetInfo</span><span class="p">.</span><span class="nx">url</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
</span><span id="__span-1-49"><a id="__codelineno-1-49" name="__codelineno-1-49" href="#__codelineno-1-49"></a><span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`Method: </span><span class="si">${</span><span class="nx">packetInfo</span><span class="p">.</span><span class="nx">method</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
</span><span id="__span-1-50"><a id="__codelineno-1-50" name="__codelineno-1-50" href="#__codelineno-1-50"></a><span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`Status: </span><span class="si">${</span><span class="nx">packetInfo</span><span class="p">.</span><span class="nx">status</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
</span><span id="__span-1-51"><a id="__codelineno-1-51" name="__codelineno-1-51" href="#__codelineno-1-51"></a><span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`Size: </span><span class="si">${</span><span class="nx">packetInfo</span><span class="p">.</span><span class="nx">size</span><span class="si">}</span><span class="sb"> bytes`</span><span class="p">);</span>
</span><span id="__span-1-52"><a id="__codelineno-1-52" name="__codelineno-1-52" href="#__codelineno-1-52"></a><span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`Time: </span><span class="si">${</span><span class="nx">packetInfo</span><span class="p">.</span><span class="nx">time</span><span class="p">.</span><span class="nx">toFixed</span><span class="p">(</span><span class="mf">2</span><span class="p">)</span><span class="si">}</span><span class="sb">ms`</span><span class="p">);</span>
</span><span id="__span-1-53"><a id="__codelineno-1-53" name="__codelineno-1-53" href="#__codelineno-1-53"></a><span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">groupEnd</span><span class="p">();</span>
</span><span id="__span-1-54"><a id="__codelineno-1-54" name="__codelineno-1-54" href="#__codelineno-1-54"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-1-55"><a id="__codelineno-1-55" name="__codelineno-1-55" href="#__codelineno-1-55"></a>
</span><span id="__span-1-56"><a id="__codelineno-1-56" name="__codelineno-1-56" href="#__codelineno-1-56"></a><span class="w">    </span><span class="nx">analyzeTraffic</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-1-57"><a id="__codelineno-1-57" name="__codelineno-1-57" href="#__codelineno-1-57"></a><span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">analysis</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-1-58"><a id="__codelineno-1-58" name="__codelineno-1-58" href="#__codelineno-1-58"></a><span class="w">            </span><span class="nx">totalPackets</span><span class="o">:</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">packets</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span>
</span><span id="__span-1-59"><a id="__codelineno-1-59" name="__codelineno-1-59" href="#__codelineno-1-59"></a><span class="w">            </span><span class="nx">totalSize</span><span class="o">:</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">packets</span><span class="p">.</span><span class="nx">reduce</span><span class="p">((</span><span class="nx">sum</span><span class="p">,</span><span class="w"> </span><span class="nx">p</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">sum</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="p">(</span><span class="nb">parseInt</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">size</span><span class="p">)</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="mf">0</span><span class="p">),</span><span class="w"> </span><span class="mf">0</span><span class="p">),</span>
</span><span id="__span-1-60"><a id="__codelineno-1-60" name="__codelineno-1-60" href="#__codelineno-1-60"></a><span class="w">            </span><span class="nx">averageTime</span><span class="o">:</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">packets</span><span class="p">.</span><span class="nx">reduce</span><span class="p">((</span><span class="nx">sum</span><span class="p">,</span><span class="w"> </span><span class="nx">p</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">sum</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">p</span><span class="p">.</span><span class="nx">time</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">packets</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span>
</span><span id="__span-1-61"><a id="__codelineno-1-61" name="__codelineno-1-61" href="#__codelineno-1-61"></a><span class="w">            </span><span class="nx">protocols</span><span class="o">:</span><span class="w"> </span><span class="p">{},</span>
</span><span id="__span-1-62"><a id="__codelineno-1-62" name="__codelineno-1-62" href="#__codelineno-1-62"></a><span class="w">            </span><span class="nx">statusCodes</span><span class="o">:</span><span class="w"> </span><span class="p">{}</span>
</span><span id="__span-1-63"><a id="__codelineno-1-63" name="__codelineno-1-63" href="#__codelineno-1-63"></a><span class="w">        </span><span class="p">};</span>
</span><span id="__span-1-64"><a id="__codelineno-1-64" name="__codelineno-1-64" href="#__codelineno-1-64"></a>
</span><span id="__span-1-65"><a id="__codelineno-1-65" name="__codelineno-1-65" href="#__codelineno-1-65"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">packets</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">packet</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-1-66"><a id="__codelineno-1-66" name="__codelineno-1-66" href="#__codelineno-1-66"></a><span class="w">            </span><span class="c1">// Count status codes</span>
</span><span id="__span-1-67"><a id="__codelineno-1-67" name="__codelineno-1-67" href="#__codelineno-1-67"></a><span class="w">            </span><span class="nx">analysis</span><span class="p">.</span><span class="nx">statusCodes</span><span class="p">[</span><span class="nx">packet</span><span class="p">.</span><span class="nx">status</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">analysis</span><span class="p">.</span><span class="nx">statusCodes</span><span class="p">[</span><span class="nx">packet</span><span class="p">.</span><span class="nx">status</span><span class="p">]</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="mf">0</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">1</span><span class="p">;</span>
</span><span id="__span-1-68"><a id="__codelineno-1-68" name="__codelineno-1-68" href="#__codelineno-1-68"></a>
</span><span id="__span-1-69"><a id="__codelineno-1-69" name="__codelineno-1-69" href="#__codelineno-1-69"></a><span class="w">            </span><span class="c1">// Determine protocol</span>
</span><span id="__span-1-70"><a id="__codelineno-1-70" name="__codelineno-1-70" href="#__codelineno-1-70"></a><span class="w">            </span><span class="kd">const</span><span class="w"> </span><span class="nx">protocol</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">packet</span><span class="p">.</span><span class="nx">url</span><span class="p">.</span><span class="nx">startsWith</span><span class="p">(</span><span class="s1">&#39;https&#39;</span><span class="p">)</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="s1">&#39;HTTPS&#39;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;HTTP&#39;</span><span class="p">;</span>
</span><span id="__span-1-71"><a id="__codelineno-1-71" name="__codelineno-1-71" href="#__codelineno-1-71"></a><span class="w">            </span><span class="nx">analysis</span><span class="p">.</span><span class="nx">protocols</span><span class="p">[</span><span class="nx">protocol</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">analysis</span><span class="p">.</span><span class="nx">protocols</span><span class="p">[</span><span class="nx">protocol</span><span class="p">]</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="mf">0</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">1</span><span class="p">;</span>
</span><span id="__span-1-72"><a id="__codelineno-1-72" name="__codelineno-1-72" href="#__codelineno-1-72"></a><span class="w">        </span><span class="p">});</span>
</span><span id="__span-1-73"><a id="__codelineno-1-73" name="__codelineno-1-73" href="#__codelineno-1-73"></a>
</span><span id="__span-1-74"><a id="__codelineno-1-74" name="__codelineno-1-74" href="#__codelineno-1-74"></a><span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">table</span><span class="p">(</span><span class="nx">analysis</span><span class="p">);</span>
</span><span id="__span-1-75"><a id="__codelineno-1-75" name="__codelineno-1-75" href="#__codelineno-1-75"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">analysis</span><span class="p">;</span>
</span><span id="__span-1-76"><a id="__codelineno-1-76" name="__codelineno-1-76" href="#__codelineno-1-76"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-1-77"><a id="__codelineno-1-77" name="__codelineno-1-77" href="#__codelineno-1-77"></a><span class="p">}</span>
</span><span id="__span-1-78"><a id="__codelineno-1-78" name="__codelineno-1-78" href="#__codelineno-1-78"></a>
</span><span id="__span-1-79"><a id="__codelineno-1-79" name="__codelineno-1-79" href="#__codelineno-1-79"></a><span class="c1">// Usage: Run this in browser console on any website</span>
</span><span id="__span-1-80"><a id="__codelineno-1-80" name="__codelineno-1-80" href="#__codelineno-1-80"></a><span class="kd">const</span><span class="w"> </span><span class="nx">inspector</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">PacketInspector</span><span class="p">();</span>
</span><span id="__span-1-81"><a id="__codelineno-1-81" name="__codelineno-1-81" href="#__codelineno-1-81"></a><span class="nx">inspector</span><span class="p">.</span><span class="nx">startCapture</span><span class="p">();</span>
</span><span id="__span-1-82"><a id="__codelineno-1-82" name="__codelineno-1-82" href="#__codelineno-1-82"></a>
</span><span id="__span-1-83"><a id="__codelineno-1-83" name="__codelineno-1-83" href="#__codelineno-1-83"></a><span class="c1">// After browsing around, analyze the traffic</span>
</span><span id="__span-1-84"><a id="__codelineno-1-84" name="__codelineno-1-84" href="#__codelineno-1-84"></a><span class="nx">setTimeout</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-1-85"><a id="__codelineno-1-85" name="__codelineno-1-85" href="#__codelineno-1-85"></a><span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;ğŸ“Š TRAFFIC ANALYSIS REPORT&quot;</span><span class="p">);</span>
</span><span id="__span-1-86"><a id="__codelineno-1-86" name="__codelineno-1-86" href="#__codelineno-1-86"></a><span class="w">    </span><span class="nx">inspector</span><span class="p">.</span><span class="nx">analyzeTraffic</span><span class="p">();</span>
</span><span id="__span-1-87"><a id="__codelineno-1-87" name="__codelineno-1-87" href="#__codelineno-1-87"></a><span class="p">},</span><span class="w"> </span><span class="mf">10000</span><span class="p">);</span>
</span></code></pre></div>
</details>
<h4 id="dns-resolution-the-internets-phone-book"><strong>DNS Resolution: The Internet's Phone Book ğŸ“</strong><a class="headerlink" href="#dns-resolution-the-internets-phone-book" title="Permanent link">&para;</a></h4>
<p>Every time you type a URL, your device embarks on a DNS treasure hunt to find the actual IP address. This process is so fast you barely notice it, but it involves multiple servers working together!</p>
<p><strong>Real DNS Lookup Simulation:</strong></p>
<details class="example">
<summary>ğŸ” DNS Explorer - Interactive Resolution System</summary>
<div class="language-python highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">dns.resolver</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="kn">import</span><span class="w"> </span><span class="nn">time</span>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a>
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="k">class</span><span class="w"> </span><span class="nc">DNSExplorer</span><span class="p">:</span>
</span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Interactive DNS resolution explorer&quot;&quot;&quot;</span>
</span><span id="__span-2-6"><a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a>
</span><span id="__span-2-7"><a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-2-8"><a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">cache</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="__span-2-9"><a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">query_history</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="__span-2-10"><a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a>
</span><span id="__span-2-11"><a id="__codelineno-2-11" name="__codelineno-2-11" href="#__codelineno-2-11"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">detailed_dns_lookup</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">domain</span><span class="p">):</span>
</span><span id="__span-2-12"><a id="__codelineno-2-12" name="__codelineno-2-12" href="#__codelineno-2-12"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Step-by-step DNS resolution with real servers&quot;&quot;&quot;</span>
</span><span id="__span-2-13"><a id="__codelineno-2-13" name="__codelineno-2-13" href="#__codelineno-2-13"></a>
</span><span id="__span-2-14"><a id="__codelineno-2-14" name="__codelineno-2-14" href="#__codelineno-2-14"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ğŸ” DNS Lookup Journey for: </span><span class="si">{</span><span class="n">domain</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-2-15"><a id="__codelineno-2-15" name="__codelineno-2-15" href="#__codelineno-2-15"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;=&quot;</span> <span class="o">*</span> <span class="mi">50</span><span class="p">)</span>
</span><span id="__span-2-16"><a id="__codelineno-2-16" name="__codelineno-2-16" href="#__codelineno-2-16"></a>
</span><span id="__span-2-17"><a id="__codelineno-2-17" name="__codelineno-2-17" href="#__codelineno-2-17"></a>        <span class="n">steps</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="__span-2-18"><a id="__codelineno-2-18" name="__codelineno-2-18" href="#__codelineno-2-18"></a>        <span class="n">start_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
</span><span id="__span-2-19"><a id="__codelineno-2-19" name="__codelineno-2-19" href="#__codelineno-2-19"></a>
</span><span id="__span-2-20"><a id="__codelineno-2-20" name="__codelineno-2-20" href="#__codelineno-2-20"></a>        <span class="c1"># Step 1: Check local cache</span>
</span><span id="__span-2-21"><a id="__codelineno-2-21" name="__codelineno-2-21" href="#__codelineno-2-21"></a>        <span class="k">if</span> <span class="n">domain</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">cache</span><span class="p">:</span>
</span><span id="__span-2-22"><a id="__codelineno-2-22" name="__codelineno-2-22" href="#__codelineno-2-22"></a>            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;âœ… Step 1: Found in local cache!&quot;</span><span class="p">)</span>
</span><span id="__span-2-23"><a id="__codelineno-2-23" name="__codelineno-2-23" href="#__codelineno-2-23"></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Cached IP: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">cache</span><span class="p">[</span><span class="n">domain</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-2-24"><a id="__codelineno-2-24" name="__codelineno-2-24" href="#__codelineno-2-24"></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">cache</span><span class="p">[</span><span class="n">domain</span><span class="p">]</span>
</span><span id="__span-2-25"><a id="__codelineno-2-25" name="__codelineno-2-25" href="#__codelineno-2-25"></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="__span-2-26"><a id="__codelineno-2-26" name="__codelineno-2-26" href="#__codelineno-2-26"></a>            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;âŒ Step 1: Not in local cache&quot;</span><span class="p">)</span>
</span><span id="__span-2-27"><a id="__codelineno-2-27" name="__codelineno-2-27" href="#__codelineno-2-27"></a>            <span class="n">steps</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;cache_miss&quot;</span><span class="p">)</span>
</span><span id="__span-2-28"><a id="__codelineno-2-28" name="__codelineno-2-28" href="#__codelineno-2-28"></a>
</span><span id="__span-2-29"><a id="__codelineno-2-29" name="__codelineno-2-29" href="#__codelineno-2-29"></a>        <span class="c1"># Step 2: Query recursive DNS server</span>
</span><span id="__span-2-30"><a id="__codelineno-2-30" name="__codelineno-2-30" href="#__codelineno-2-30"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">ğŸ”„ Step 2: Querying recursive DNS server...&quot;</span><span class="p">)</span>
</span><span id="__span-2-31"><a id="__codelineno-2-31" name="__codelineno-2-31" href="#__codelineno-2-31"></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="__span-2-32"><a id="__codelineno-2-32" name="__codelineno-2-32" href="#__codelineno-2-32"></a>            <span class="c1"># Use Google&#39;s public DNS</span>
</span><span id="__span-2-33"><a id="__codelineno-2-33" name="__codelineno-2-33" href="#__codelineno-2-33"></a>            <span class="n">resolver</span> <span class="o">=</span> <span class="n">dns</span><span class="o">.</span><span class="n">resolver</span><span class="o">.</span><span class="n">Resolver</span><span class="p">()</span>
</span><span id="__span-2-34"><a id="__codelineno-2-34" name="__codelineno-2-34" href="#__codelineno-2-34"></a>            <span class="n">resolver</span><span class="o">.</span><span class="n">nameservers</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;8.8.8.8&#39;</span><span class="p">]</span>
</span><span id="__span-2-35"><a id="__codelineno-2-35" name="__codelineno-2-35" href="#__codelineno-2-35"></a>
</span><span id="__span-2-36"><a id="__codelineno-2-36" name="__codelineno-2-36" href="#__codelineno-2-36"></a>            <span class="c1"># A record lookup</span>
</span><span id="__span-2-37"><a id="__codelineno-2-37" name="__codelineno-2-37" href="#__codelineno-2-37"></a>            <span class="n">result</span> <span class="o">=</span> <span class="n">resolver</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="n">domain</span><span class="p">,</span> <span class="s1">&#39;A&#39;</span><span class="p">)</span>
</span><span id="__span-2-38"><a id="__codelineno-2-38" name="__codelineno-2-38" href="#__codelineno-2-38"></a>            <span class="n">ip_address</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="__span-2-39"><a id="__codelineno-2-39" name="__codelineno-2-39" href="#__codelineno-2-39"></a>
</span><span id="__span-2-40"><a id="__codelineno-2-40" name="__codelineno-2-40" href="#__codelineno-2-40"></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;âœ… Recursive DNS found: </span><span class="si">{</span><span class="n">ip_address</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-2-41"><a id="__codelineno-2-41" name="__codelineno-2-41" href="#__codelineno-2-41"></a>            <span class="n">steps</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;recursive_success&quot;</span><span class="p">)</span>
</span><span id="__span-2-42"><a id="__codelineno-2-42" name="__codelineno-2-42" href="#__codelineno-2-42"></a>
</span><span id="__span-2-43"><a id="__codelineno-2-43" name="__codelineno-2-43" href="#__codelineno-2-43"></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="__span-2-44"><a id="__codelineno-2-44" name="__codelineno-2-44" href="#__codelineno-2-44"></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;âŒ Recursive DNS failed: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-2-45"><a id="__codelineno-2-45" name="__codelineno-2-45" href="#__codelineno-2-45"></a>            <span class="k">return</span> <span class="kc">None</span>
</span><span id="__span-2-46"><a id="__codelineno-2-46" name="__codelineno-2-46" href="#__codelineno-2-46"></a>
</span><span id="__span-2-47"><a id="__codelineno-2-47" name="__codelineno-2-47" href="#__codelineno-2-47"></a>        <span class="c1"># Step 3: Trace the full resolution path</span>
</span><span id="__span-2-48"><a id="__codelineno-2-48" name="__codelineno-2-48" href="#__codelineno-2-48"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">ğŸ—ºï¸ Step 3: Full resolution path:&quot;</span><span class="p">)</span>
</span><span id="__span-2-49"><a id="__codelineno-2-49" name="__codelineno-2-49" href="#__codelineno-2-49"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">trace_dns_path</span><span class="p">(</span><span class="n">domain</span><span class="p">)</span>
</span><span id="__span-2-50"><a id="__codelineno-2-50" name="__codelineno-2-50" href="#__codelineno-2-50"></a>
</span><span id="__span-2-51"><a id="__codelineno-2-51" name="__codelineno-2-51" href="#__codelineno-2-51"></a>        <span class="c1"># Step 4: Cache the result</span>
</span><span id="__span-2-52"><a id="__codelineno-2-52" name="__codelineno-2-52" href="#__codelineno-2-52"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">cache</span><span class="p">[</span><span class="n">domain</span><span class="p">]</span> <span class="o">=</span> <span class="n">ip_address</span>
</span><span id="__span-2-53"><a id="__codelineno-2-53" name="__codelineno-2-53" href="#__codelineno-2-53"></a>        <span class="n">total_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start_time</span>
</span><span id="__span-2-54"><a id="__codelineno-2-54" name="__codelineno-2-54" href="#__codelineno-2-54"></a>
</span><span id="__span-2-55"><a id="__codelineno-2-55" name="__codelineno-2-55" href="#__codelineno-2-55"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">â±ï¸ Total resolution time: </span><span class="si">{</span><span class="n">total_time</span><span class="o">*</span><span class="mi">1000</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">ms&quot;</span><span class="p">)</span>
</span><span id="__span-2-56"><a id="__codelineno-2-56" name="__codelineno-2-56" href="#__codelineno-2-56"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ğŸ¯ Final result: </span><span class="si">{</span><span class="n">domain</span><span class="si">}</span><span class="s2"> â†’ </span><span class="si">{</span><span class="n">ip_address</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-2-57"><a id="__codelineno-2-57" name="__codelineno-2-57" href="#__codelineno-2-57"></a>
</span><span id="__span-2-58"><a id="__codelineno-2-58" name="__codelineno-2-58" href="#__codelineno-2-58"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">query_history</span><span class="o">.</span><span class="n">append</span><span class="p">({</span>
</span><span id="__span-2-59"><a id="__codelineno-2-59" name="__codelineno-2-59" href="#__codelineno-2-59"></a>            <span class="s1">&#39;domain&#39;</span><span class="p">:</span> <span class="n">domain</span><span class="p">,</span>
</span><span id="__span-2-60"><a id="__codelineno-2-60" name="__codelineno-2-60" href="#__codelineno-2-60"></a>            <span class="s1">&#39;ip&#39;</span><span class="p">:</span> <span class="n">ip_address</span><span class="p">,</span>
</span><span id="__span-2-61"><a id="__codelineno-2-61" name="__codelineno-2-61" href="#__codelineno-2-61"></a>            <span class="s1">&#39;time&#39;</span><span class="p">:</span> <span class="n">total_time</span><span class="p">,</span>
</span><span id="__span-2-62"><a id="__codelineno-2-62" name="__codelineno-2-62" href="#__codelineno-2-62"></a>            <span class="s1">&#39;steps&#39;</span><span class="p">:</span> <span class="n">steps</span>
</span><span id="__span-2-63"><a id="__codelineno-2-63" name="__codelineno-2-63" href="#__codelineno-2-63"></a>        <span class="p">})</span>
</span><span id="__span-2-64"><a id="__codelineno-2-64" name="__codelineno-2-64" href="#__codelineno-2-64"></a>
</span><span id="__span-2-65"><a id="__codelineno-2-65" name="__codelineno-2-65" href="#__codelineno-2-65"></a>        <span class="k">return</span> <span class="n">ip_address</span>
</span><span id="__span-2-66"><a id="__codelineno-2-66" name="__codelineno-2-66" href="#__codelineno-2-66"></a>
</span><span id="__span-2-67"><a id="__codelineno-2-67" name="__codelineno-2-67" href="#__codelineno-2-67"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">trace_dns_path</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">domain</span><span class="p">):</span>
</span><span id="__span-2-68"><a id="__codelineno-2-68" name="__codelineno-2-68" href="#__codelineno-2-68"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Trace the complete DNS resolution path&quot;&quot;&quot;</span>
</span><span id="__span-2-69"><a id="__codelineno-2-69" name="__codelineno-2-69" href="#__codelineno-2-69"></a>
</span><span id="__span-2-70"><a id="__codelineno-2-70" name="__codelineno-2-70" href="#__codelineno-2-70"></a>        <span class="c1"># This would normally query root servers, TLD servers, etc.</span>
</span><span id="__span-2-71"><a id="__codelineno-2-71" name="__codelineno-2-71" href="#__codelineno-2-71"></a>        <span class="c1"># Simplified simulation for educational purposes</span>
</span><span id="__span-2-72"><a id="__codelineno-2-72" name="__codelineno-2-72" href="#__codelineno-2-72"></a>
</span><span id="__span-2-73"><a id="__codelineno-2-73" name="__codelineno-2-73" href="#__codelineno-2-73"></a>        <span class="n">resolution_path</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="__span-2-74"><a id="__codelineno-2-74" name="__codelineno-2-74" href="#__codelineno-2-74"></a>            <span class="p">(</span><span class="s2">&quot;Root Servers&quot;</span><span class="p">,</span> <span class="s2">&quot;.&quot;</span><span class="p">,</span> <span class="s2">&quot;Delegates to .com servers&quot;</span><span class="p">),</span>
</span><span id="__span-2-75"><a id="__codelineno-2-75" name="__codelineno-2-75" href="#__codelineno-2-75"></a>            <span class="p">(</span><span class="s2">&quot;TLD Servers&quot;</span><span class="p">,</span> <span class="s2">&quot;.com&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;Delegates to </span><span class="si">{</span><span class="n">domain</span><span class="si">}</span><span class="s2"> nameservers&quot;</span><span class="p">),</span>
</span><span id="__span-2-76"><a id="__codelineno-2-76" name="__codelineno-2-76" href="#__codelineno-2-76"></a>            <span class="p">(</span><span class="s2">&quot;Authoritative Servers&quot;</span><span class="p">,</span> <span class="n">domain</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;Returns IP address&quot;</span><span class="p">)</span>
</span><span id="__span-2-77"><a id="__codelineno-2-77" name="__codelineno-2-77" href="#__codelineno-2-77"></a>        <span class="p">]</span>
</span><span id="__span-2-78"><a id="__codelineno-2-78" name="__codelineno-2-78" href="#__codelineno-2-78"></a>
</span><span id="__span-2-79"><a id="__codelineno-2-79" name="__codelineno-2-79" href="#__codelineno-2-79"></a>        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="p">(</span><span class="n">server_type</span><span class="p">,</span> <span class="n">zone</span><span class="p">,</span> <span class="n">action</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">resolution_path</span><span class="p">,</span> <span class="mi">1</span><span class="p">):</span>
</span><span id="__span-2-80"><a id="__codelineno-2-80" name="__codelineno-2-80" href="#__codelineno-2-80"></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   </span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">. </span><span class="si">{</span><span class="n">server_type</span><span class="si">}</span><span class="s2"> (</span><span class="si">{</span><span class="n">zone</span><span class="si">}</span><span class="s2">): </span><span class="si">{</span><span class="n">action</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-2-81"><a id="__codelineno-2-81" name="__codelineno-2-81" href="#__codelineno-2-81"></a>            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span>  <span class="c1"># Simulate network delay</span>
</span><span id="__span-2-82"><a id="__codelineno-2-82" name="__codelineno-2-82" href="#__codelineno-2-82"></a>
</span><span id="__span-2-83"><a id="__codelineno-2-83" name="__codelineno-2-83" href="#__codelineno-2-83"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">dns_performance_test</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">domains</span><span class="p">):</span>
</span><span id="__span-2-84"><a id="__codelineno-2-84" name="__codelineno-2-84" href="#__codelineno-2-84"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Compare DNS performance across multiple domains&quot;&quot;&quot;</span>
</span><span id="__span-2-85"><a id="__codelineno-2-85" name="__codelineno-2-85" href="#__codelineno-2-85"></a>
</span><span id="__span-2-86"><a id="__codelineno-2-86" name="__codelineno-2-86" href="#__codelineno-2-86"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">ğŸ DNS Performance Comparison&quot;</span><span class="p">)</span>
</span><span id="__span-2-87"><a id="__codelineno-2-87" name="__codelineno-2-87" href="#__codelineno-2-87"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;-&quot;</span> <span class="o">*</span> <span class="mi">40</span><span class="p">)</span>
</span><span id="__span-2-88"><a id="__codelineno-2-88" name="__codelineno-2-88" href="#__codelineno-2-88"></a>
</span><span id="__span-2-89"><a id="__codelineno-2-89" name="__codelineno-2-89" href="#__codelineno-2-89"></a>        <span class="n">results</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="__span-2-90"><a id="__codelineno-2-90" name="__codelineno-2-90" href="#__codelineno-2-90"></a>
</span><span id="__span-2-91"><a id="__codelineno-2-91" name="__codelineno-2-91" href="#__codelineno-2-91"></a>        <span class="k">for</span> <span class="n">domain</span> <span class="ow">in</span> <span class="n">domains</span><span class="p">:</span>
</span><span id="__span-2-92"><a id="__codelineno-2-92" name="__codelineno-2-92" href="#__codelineno-2-92"></a>            <span class="n">start_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
</span><span id="__span-2-93"><a id="__codelineno-2-93" name="__codelineno-2-93" href="#__codelineno-2-93"></a>            <span class="n">ip</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">detailed_dns_lookup</span><span class="p">(</span><span class="n">domain</span><span class="p">)</span>
</span><span id="__span-2-94"><a id="__codelineno-2-94" name="__codelineno-2-94" href="#__codelineno-2-94"></a>            <span class="n">end_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
</span><span id="__span-2-95"><a id="__codelineno-2-95" name="__codelineno-2-95" href="#__codelineno-2-95"></a>
</span><span id="__span-2-96"><a id="__codelineno-2-96" name="__codelineno-2-96" href="#__codelineno-2-96"></a>            <span class="k">if</span> <span class="n">ip</span><span class="p">:</span>
</span><span id="__span-2-97"><a id="__codelineno-2-97" name="__codelineno-2-97" href="#__codelineno-2-97"></a>                <span class="n">results</span><span class="o">.</span><span class="n">append</span><span class="p">({</span>
</span><span id="__span-2-98"><a id="__codelineno-2-98" name="__codelineno-2-98" href="#__codelineno-2-98"></a>                    <span class="s1">&#39;domain&#39;</span><span class="p">:</span> <span class="n">domain</span><span class="p">,</span>
</span><span id="__span-2-99"><a id="__codelineno-2-99" name="__codelineno-2-99" href="#__codelineno-2-99"></a>                    <span class="s1">&#39;ip&#39;</span><span class="p">:</span> <span class="n">ip</span><span class="p">,</span>
</span><span id="__span-2-100"><a id="__codelineno-2-100" name="__codelineno-2-100" href="#__codelineno-2-100"></a>                    <span class="s1">&#39;time&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">end_time</span> <span class="o">-</span> <span class="n">start_time</span><span class="p">)</span> <span class="o">*</span> <span class="mi">1000</span>
</span><span id="__span-2-101"><a id="__codelineno-2-101" name="__codelineno-2-101" href="#__codelineno-2-101"></a>                <span class="p">})</span>
</span><span id="__span-2-102"><a id="__codelineno-2-102" name="__codelineno-2-102" href="#__codelineno-2-102"></a>                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;âœ… </span><span class="si">{</span><span class="n">domain</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">ip</span><span class="si">}</span><span class="s2"> (</span><span class="si">{</span><span class="n">results</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s1">&#39;time&#39;</span><span class="p">]</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">ms)&quot;</span><span class="p">)</span>
</span><span id="__span-2-103"><a id="__codelineno-2-103" name="__codelineno-2-103" href="#__codelineno-2-103"></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="__span-2-104"><a id="__codelineno-2-104" name="__codelineno-2-104" href="#__codelineno-2-104"></a>                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;âŒ </span><span class="si">{</span><span class="n">domain</span><span class="si">}</span><span class="s2">: FAILED&quot;</span><span class="p">)</span>
</span><span id="__span-2-105"><a id="__codelineno-2-105" name="__codelineno-2-105" href="#__codelineno-2-105"></a>            <span class="nb">print</span><span class="p">()</span>
</span><span id="__span-2-106"><a id="__codelineno-2-106" name="__codelineno-2-106" href="#__codelineno-2-106"></a>
</span><span id="__span-2-107"><a id="__codelineno-2-107" name="__codelineno-2-107" href="#__codelineno-2-107"></a>        <span class="c1"># Sort by speed</span>
</span><span id="__span-2-108"><a id="__codelineno-2-108" name="__codelineno-2-108" href="#__codelineno-2-108"></a>        <span class="n">results</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="s1">&#39;time&#39;</span><span class="p">])</span>
</span><span id="__span-2-109"><a id="__codelineno-2-109" name="__codelineno-2-109" href="#__codelineno-2-109"></a>
</span><span id="__span-2-110"><a id="__codelineno-2-110" name="__codelineno-2-110" href="#__codelineno-2-110"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;ğŸ† Performance Rankings:&quot;</span><span class="p">)</span>
</span><span id="__span-2-111"><a id="__codelineno-2-111" name="__codelineno-2-111" href="#__codelineno-2-111"></a>        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">result</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">results</span><span class="p">,</span> <span class="mi">1</span><span class="p">):</span>
</span><span id="__span-2-112"><a id="__codelineno-2-112" name="__codelineno-2-112" href="#__codelineno-2-112"></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   </span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">. </span><span class="si">{</span><span class="n">result</span><span class="p">[</span><span class="s1">&#39;domain&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">result</span><span class="p">[</span><span class="s1">&#39;time&#39;</span><span class="p">]</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">ms&quot;</span><span class="p">)</span>
</span><span id="__span-2-113"><a id="__codelineno-2-113" name="__codelineno-2-113" href="#__codelineno-2-113"></a>
</span><span id="__span-2-114"><a id="__codelineno-2-114" name="__codelineno-2-114" href="#__codelineno-2-114"></a>        <span class="k">return</span> <span class="n">results</span>
</span><span id="__span-2-115"><a id="__codelineno-2-115" name="__codelineno-2-115" href="#__codelineno-2-115"></a>
</span><span id="__span-2-116"><a id="__codelineno-2-116" name="__codelineno-2-116" href="#__codelineno-2-116"></a><span class="c1"># Interactive DNS exploration</span>
</span><span id="__span-2-117"><a id="__codelineno-2-117" name="__codelineno-2-117" href="#__codelineno-2-117"></a><span class="n">dns_explorer</span> <span class="o">=</span> <span class="n">DNSExplorer</span><span class="p">()</span>
</span><span id="__span-2-118"><a id="__codelineno-2-118" name="__codelineno-2-118" href="#__codelineno-2-118"></a>
</span><span id="__span-2-119"><a id="__codelineno-2-119" name="__codelineno-2-119" href="#__codelineno-2-119"></a><span class="c1"># Test popular websites</span>
</span><span id="__span-2-120"><a id="__codelineno-2-120" name="__codelineno-2-120" href="#__codelineno-2-120"></a><span class="n">test_domains</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="__span-2-121"><a id="__codelineno-2-121" name="__codelineno-2-121" href="#__codelineno-2-121"></a>    <span class="s1">&#39;google.com&#39;</span><span class="p">,</span>
</span><span id="__span-2-122"><a id="__codelineno-2-122" name="__codelineno-2-122" href="#__codelineno-2-122"></a>    <span class="s1">&#39;github.com&#39;</span><span class="p">,</span> 
</span><span id="__span-2-123"><a id="__codelineno-2-123" name="__codelineno-2-123" href="#__codelineno-2-123"></a>    <span class="s1">&#39;stackoverflow.com&#39;</span><span class="p">,</span>
</span><span id="__span-2-124"><a id="__codelineno-2-124" name="__codelineno-2-124" href="#__codelineno-2-124"></a>    <span class="s1">&#39;wikipedia.org&#39;</span><span class="p">,</span>
</span><span id="__span-2-125"><a id="__codelineno-2-125" name="__codelineno-2-125" href="#__codelineno-2-125"></a>    <span class="s1">&#39;youtube.com&#39;</span>
</span><span id="__span-2-126"><a id="__codelineno-2-126" name="__codelineno-2-126" href="#__codelineno-2-126"></a><span class="p">]</span>
</span><span id="__span-2-127"><a id="__codelineno-2-127" name="__codelineno-2-127" href="#__codelineno-2-127"></a>
</span><span id="__span-2-128"><a id="__codelineno-2-128" name="__codelineno-2-128" href="#__codelineno-2-128"></a><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;ğŸŒ INTERACTIVE DNS EXPLORATION&quot;</span><span class="p">)</span>
</span><span id="__span-2-129"><a id="__codelineno-2-129" name="__codelineno-2-129" href="#__codelineno-2-129"></a><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Let&#39;s see how fast different websites resolve!&quot;</span><span class="p">)</span>
</span><span id="__span-2-130"><a id="__codelineno-2-130" name="__codelineno-2-130" href="#__codelineno-2-130"></a><span class="nb">print</span><span class="p">()</span>
</span><span id="__span-2-131"><a id="__codelineno-2-131" name="__codelineno-2-131" href="#__codelineno-2-131"></a>
</span><span id="__span-2-132"><a id="__codelineno-2-132" name="__codelineno-2-132" href="#__codelineno-2-132"></a><span class="n">performance_results</span> <span class="o">=</span> <span class="n">dns_explorer</span><span class="o">.</span><span class="n">dns_performance_test</span><span class="p">(</span><span class="n">test_domains</span><span class="p">)</span>
</span><span id="__span-2-133"><a id="__codelineno-2-133" name="__codelineno-2-133" href="#__codelineno-2-133"></a>
</span><span id="__span-2-134"><a id="__codelineno-2-134" name="__codelineno-2-134" href="#__codelineno-2-134"></a><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">ğŸ’¡ DNS Optimization Tips:&quot;</span><span class="p">)</span>
</span><span id="__span-2-135"><a id="__codelineno-2-135" name="__codelineno-2-135" href="#__codelineno-2-135"></a><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;1. Use DNS caching to avoid repeated lookups&quot;</span><span class="p">)</span>
</span><span id="__span-2-136"><a id="__codelineno-2-136" name="__codelineno-2-136" href="#__codelineno-2-136"></a><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;2. Choose fast, reliable DNS servers (1.1.1.1, 8.8.8.8)&quot;</span><span class="p">)</span>
</span><span id="__span-2-137"><a id="__codelineno-2-137" name="__codelineno-2-137" href="#__codelineno-2-137"></a><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;3. Consider DNS prefetching for known domains&quot;</span><span class="p">)</span>
</span><span id="__span-2-138"><a id="__codelineno-2-138" name="__codelineno-2-138" href="#__codelineno-2-138"></a><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;4. Monitor DNS resolution times in production&quot;</span><span class="p">)</span>
</span></code></pre></div>
</details>
<p><strong>DNS Security Deep Dive:</strong></p>
<details class="example">
<summary>ğŸ”’ DNS Security Analyzer - Attack Detection &amp; Prevention</summary>
<div class="language-python highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="k">class</span><span class="w"> </span><span class="nc">DNSSecurityAnalyzer</span><span class="p">:</span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Analyze DNS security vulnerabilities and protections&quot;&quot;&quot;</span>
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>
</span><span id="__span-3-4"><a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-3-5"><a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">security_features</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="__span-3-6"><a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a>            <span class="s1">&#39;DNSSEC&#39;</span><span class="p">,</span>
</span><span id="__span-3-7"><a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a>            <span class="s1">&#39;DNS over HTTPS (DoH)&#39;</span><span class="p">,</span>
</span><span id="__span-3-8"><a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a>            <span class="s1">&#39;DNS over TLS (DoT)&#39;</span><span class="p">,</span>
</span><span id="__span-3-9"><a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a>            <span class="s1">&#39;DNS Filtering&#39;</span><span class="p">,</span>
</span><span id="__span-3-10"><a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a>            <span class="s1">&#39;Cache Poisoning Protection&#39;</span>
</span><span id="__span-3-11"><a id="__codelineno-3-11" name="__codelineno-3-11" href="#__codelineno-3-11"></a>        <span class="p">]</span>
</span><span id="__span-3-12"><a id="__codelineno-3-12" name="__codelineno-3-12" href="#__codelineno-3-12"></a>
</span><span id="__span-3-13"><a id="__codelineno-3-13" name="__codelineno-3-13" href="#__codelineno-3-13"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">check_dns_security</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">domain</span><span class="p">):</span>
</span><span id="__span-3-14"><a id="__codelineno-3-14" name="__codelineno-3-14" href="#__codelineno-3-14"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Comprehensive DNS security check&quot;&quot;&quot;</span>
</span><span id="__span-3-15"><a id="__codelineno-3-15" name="__codelineno-3-15" href="#__codelineno-3-15"></a>
</span><span id="__span-3-16"><a id="__codelineno-3-16" name="__codelineno-3-16" href="#__codelineno-3-16"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ğŸ”’ DNS Security Analysis for: </span><span class="si">{</span><span class="n">domain</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-3-17"><a id="__codelineno-3-17" name="__codelineno-3-17" href="#__codelineno-3-17"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;=&quot;</span> <span class="o">*</span> <span class="mi">50</span><span class="p">)</span>
</span><span id="__span-3-18"><a id="__codelineno-3-18" name="__codelineno-3-18" href="#__codelineno-3-18"></a>
</span><span id="__span-3-19"><a id="__codelineno-3-19" name="__codelineno-3-19" href="#__codelineno-3-19"></a>        <span class="n">security_status</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="__span-3-20"><a id="__codelineno-3-20" name="__codelineno-3-20" href="#__codelineno-3-20"></a>
</span><span id="__span-3-21"><a id="__codelineno-3-21" name="__codelineno-3-21" href="#__codelineno-3-21"></a>        <span class="c1"># Check DNSSEC</span>
</span><span id="__span-3-22"><a id="__codelineno-3-22" name="__codelineno-3-22" href="#__codelineno-3-22"></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="__span-3-23"><a id="__codelineno-3-23" name="__codelineno-3-23" href="#__codelineno-3-23"></a>            <span class="kn">import</span><span class="w"> </span><span class="nn">dns.resolver</span>
</span><span id="__span-3-24"><a id="__codelineno-3-24" name="__codelineno-3-24" href="#__codelineno-3-24"></a>            <span class="n">resolver</span> <span class="o">=</span> <span class="n">dns</span><span class="o">.</span><span class="n">resolver</span><span class="o">.</span><span class="n">Resolver</span><span class="p">()</span>
</span><span id="__span-3-25"><a id="__codelineno-3-25" name="__codelineno-3-25" href="#__codelineno-3-25"></a>            <span class="n">resolver</span><span class="o">.</span><span class="n">use_edns</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">dns</span><span class="o">.</span><span class="n">flags</span><span class="o">.</span><span class="n">DO</span><span class="p">)</span>  <span class="c1"># Request DNSSEC</span>
</span><span id="__span-3-26"><a id="__codelineno-3-26" name="__codelineno-3-26" href="#__codelineno-3-26"></a>
</span><span id="__span-3-27"><a id="__codelineno-3-27" name="__codelineno-3-27" href="#__codelineno-3-27"></a>            <span class="n">result</span> <span class="o">=</span> <span class="n">resolver</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="n">domain</span><span class="p">,</span> <span class="s1">&#39;A&#39;</span><span class="p">)</span>
</span><span id="__span-3-28"><a id="__codelineno-3-28" name="__codelineno-3-28" href="#__codelineno-3-28"></a>            <span class="k">if</span> <span class="n">result</span><span class="o">.</span><span class="n">response</span><span class="o">.</span><span class="n">flags</span> <span class="o">&amp;</span> <span class="n">dns</span><span class="o">.</span><span class="n">flags</span><span class="o">.</span><span class="n">AD</span><span class="p">:</span>
</span><span id="__span-3-29"><a id="__codelineno-3-29" name="__codelineno-3-29" href="#__codelineno-3-29"></a>                <span class="n">security_status</span><span class="p">[</span><span class="s1">&#39;DNSSEC&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;âœ… ENABLED&quot;</span>
</span><span id="__span-3-30"><a id="__codelineno-3-30" name="__codelineno-3-30" href="#__codelineno-3-30"></a>                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;ğŸ›¡ï¸ DNSSEC: ENABLED - DNS responses are cryptographically verified&quot;</span><span class="p">)</span>
</span><span id="__span-3-31"><a id="__codelineno-3-31" name="__codelineno-3-31" href="#__codelineno-3-31"></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="__span-3-32"><a id="__codelineno-3-32" name="__codelineno-3-32" href="#__codelineno-3-32"></a>                <span class="n">security_status</span><span class="p">[</span><span class="s1">&#39;DNSSEC&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;âŒ DISABLED&quot;</span>
</span><span id="__span-3-33"><a id="__codelineno-3-33" name="__codelineno-3-33" href="#__codelineno-3-33"></a>                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;âš ï¸ DNSSEC: DISABLED - DNS responses are not verified&quot;</span><span class="p">)</span>
</span><span id="__span-3-34"><a id="__codelineno-3-34" name="__codelineno-3-34" href="#__codelineno-3-34"></a>
</span><span id="__span-3-35"><a id="__codelineno-3-35" name="__codelineno-3-35" href="#__codelineno-3-35"></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="__span-3-36"><a id="__codelineno-3-36" name="__codelineno-3-36" href="#__codelineno-3-36"></a>            <span class="n">security_status</span><span class="p">[</span><span class="s1">&#39;DNSSEC&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;â“ UNKNOWN - </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="__span-3-37"><a id="__codelineno-3-37" name="__codelineno-3-37" href="#__codelineno-3-37"></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;â“ DNSSEC: Could not verify - </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-3-38"><a id="__codelineno-3-38" name="__codelineno-3-38" href="#__codelineno-3-38"></a>
</span><span id="__span-3-39"><a id="__codelineno-3-39" name="__codelineno-3-39" href="#__codelineno-3-39"></a>        <span class="c1"># Check for DNS over HTTPS support</span>
</span><span id="__span-3-40"><a id="__codelineno-3-40" name="__codelineno-3-40" href="#__codelineno-3-40"></a>        <span class="n">doh_servers</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="__span-3-41"><a id="__codelineno-3-41" name="__codelineno-3-41" href="#__codelineno-3-41"></a>            <span class="s1">&#39;https://cloudflare-dns.com/dns-query&#39;</span><span class="p">,</span>
</span><span id="__span-3-42"><a id="__codelineno-3-42" name="__codelineno-3-42" href="#__codelineno-3-42"></a>            <span class="s1">&#39;https://dns.google/dns-query&#39;</span>
</span><span id="__span-3-43"><a id="__codelineno-3-43" name="__codelineno-3-43" href="#__codelineno-3-43"></a>        <span class="p">]</span>
</span><span id="__span-3-44"><a id="__codelineno-3-44" name="__codelineno-3-44" href="#__codelineno-3-44"></a>
</span><span id="__span-3-45"><a id="__codelineno-3-45" name="__codelineno-3-45" href="#__codelineno-3-45"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">ğŸ” DNS over HTTPS (DoH) Support:&quot;</span><span class="p">)</span>
</span><span id="__span-3-46"><a id="__codelineno-3-46" name="__codelineno-3-46" href="#__codelineno-3-46"></a>        <span class="k">for</span> <span class="n">server</span> <span class="ow">in</span> <span class="n">doh_servers</span><span class="p">:</span>
</span><span id="__span-3-47"><a id="__codelineno-3-47" name="__codelineno-3-47" href="#__codelineno-3-47"></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   </span><span class="si">{</span><span class="n">server</span><span class="si">}</span><span class="s2">: Available&quot;</span><span class="p">)</span>
</span><span id="__span-3-48"><a id="__codelineno-3-48" name="__codelineno-3-48" href="#__codelineno-3-48"></a>            <span class="n">security_status</span><span class="p">[</span><span class="s1">&#39;DoH&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;âœ… SUPPORTED&quot;</span>
</span><span id="__span-3-49"><a id="__codelineno-3-49" name="__codelineno-3-49" href="#__codelineno-3-49"></a>
</span><span id="__span-3-50"><a id="__codelineno-3-50" name="__codelineno-3-50" href="#__codelineno-3-50"></a>        <span class="c1"># Simulate cache poisoning check</span>
</span><span id="__span-3-51"><a id="__codelineno-3-51" name="__codelineno-3-51" href="#__codelineno-3-51"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">ğŸ›¡ï¸ Cache Poisoning Protection:&quot;</span><span class="p">)</span>
</span><span id="__span-3-52"><a id="__codelineno-3-52" name="__codelineno-3-52" href="#__codelineno-3-52"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;   Random source ports: âœ… ENABLED&quot;</span><span class="p">)</span>
</span><span id="__span-3-53"><a id="__codelineno-3-53" name="__codelineno-3-53" href="#__codelineno-3-53"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;   Query ID randomization: âœ… ENABLED&quot;</span><span class="p">)</span>
</span><span id="__span-3-54"><a id="__codelineno-3-54" name="__codelineno-3-54" href="#__codelineno-3-54"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;   Response validation: âœ… ENABLED&quot;</span><span class="p">)</span>
</span><span id="__span-3-55"><a id="__codelineno-3-55" name="__codelineno-3-55" href="#__codelineno-3-55"></a>        <span class="n">security_status</span><span class="p">[</span><span class="s1">&#39;Cache_Protection&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;âœ… STRONG&quot;</span>
</span><span id="__span-3-56"><a id="__codelineno-3-56" name="__codelineno-3-56" href="#__codelineno-3-56"></a>
</span><span id="__span-3-57"><a id="__codelineno-3-57" name="__codelineno-3-57" href="#__codelineno-3-57"></a>        <span class="k">return</span> <span class="n">security_status</span>
</span><span id="__span-3-58"><a id="__codelineno-3-58" name="__codelineno-3-58" href="#__codelineno-3-58"></a>
</span><span id="__span-3-59"><a id="__codelineno-3-59" name="__codelineno-3-59" href="#__codelineno-3-59"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">demonstrate_dns_attacks</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-3-60"><a id="__codelineno-3-60" name="__codelineno-3-60" href="#__codelineno-3-60"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Educational demonstration of DNS attack vectors&quot;&quot;&quot;</span>
</span><span id="__span-3-61"><a id="__codelineno-3-61" name="__codelineno-3-61" href="#__codelineno-3-61"></a>
</span><span id="__span-3-62"><a id="__codelineno-3-62" name="__codelineno-3-62" href="#__codelineno-3-62"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">âš ï¸ EDUCATIONAL: Common DNS Attack Vectors&quot;</span><span class="p">)</span>
</span><span id="__span-3-63"><a id="__codelineno-3-63" name="__codelineno-3-63" href="#__codelineno-3-63"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;=&quot;</span> <span class="o">*</span> <span class="mi">50</span><span class="p">)</span>
</span><span id="__span-3-64"><a id="__codelineno-3-64" name="__codelineno-3-64" href="#__codelineno-3-64"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;(This is for learning - never attempt these attacks!)&quot;</span><span class="p">)</span>
</span><span id="__span-3-65"><a id="__codelineno-3-65" name="__codelineno-3-65" href="#__codelineno-3-65"></a>
</span><span id="__span-3-66"><a id="__codelineno-3-66" name="__codelineno-3-66" href="#__codelineno-3-66"></a>        <span class="n">attacks</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="__span-3-67"><a id="__codelineno-3-67" name="__codelineno-3-67" href="#__codelineno-3-67"></a>            <span class="s1">&#39;DNS Spoofing&#39;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-3-68"><a id="__codelineno-3-68" name="__codelineno-3-68" href="#__codelineno-3-68"></a>                <span class="s1">&#39;description&#39;</span><span class="p">:</span> <span class="s1">&#39;Attacker provides false DNS responses&#39;</span><span class="p">,</span>
</span><span id="__span-3-69"><a id="__codelineno-3-69" name="__codelineno-3-69" href="#__codelineno-3-69"></a>                <span class="s1">&#39;impact&#39;</span><span class="p">:</span> <span class="s1">&#39;Users redirected to malicious websites&#39;</span><span class="p">,</span>
</span><span id="__span-3-70"><a id="__codelineno-3-70" name="__codelineno-3-70" href="#__codelineno-3-70"></a>                <span class="s1">&#39;protection&#39;</span><span class="p">:</span> <span class="s1">&#39;DNSSEC, encrypted DNS (DoH/DoT)&#39;</span>
</span><span id="__span-3-71"><a id="__codelineno-3-71" name="__codelineno-3-71" href="#__codelineno-3-71"></a>            <span class="p">},</span>
</span><span id="__span-3-72"><a id="__codelineno-3-72" name="__codelineno-3-72" href="#__codelineno-3-72"></a>            <span class="s1">&#39;Cache Poisoning&#39;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-3-73"><a id="__codelineno-3-73" name="__codelineno-3-73" href="#__codelineno-3-73"></a>                <span class="s1">&#39;description&#39;</span><span class="p">:</span> <span class="s1">&#39;Corrupt DNS cache with false entries&#39;</span><span class="p">,</span>
</span><span id="__span-3-74"><a id="__codelineno-3-74" name="__codelineno-3-74" href="#__codelineno-3-74"></a>                <span class="s1">&#39;impact&#39;</span><span class="p">:</span> <span class="s1">&#39;Widespread misdirection of traffic&#39;</span><span class="p">,</span>
</span><span id="__span-3-75"><a id="__codelineno-3-75" name="__codelineno-3-75" href="#__codelineno-3-75"></a>                <span class="s1">&#39;protection&#39;</span><span class="p">:</span> <span class="s1">&#39;Random query IDs, source port randomization&#39;</span>
</span><span id="__span-3-76"><a id="__codelineno-3-76" name="__codelineno-3-76" href="#__codelineno-3-76"></a>            <span class="p">},</span>
</span><span id="__span-3-77"><a id="__codelineno-3-77" name="__codelineno-3-77" href="#__codelineno-3-77"></a>            <span class="s1">&#39;DNS Tunneling&#39;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-3-78"><a id="__codelineno-3-78" name="__codelineno-3-78" href="#__codelineno-3-78"></a>                <span class="s1">&#39;description&#39;</span><span class="p">:</span> <span class="s1">&#39;Hide malicious traffic in DNS queries&#39;</span><span class="p">,</span>
</span><span id="__span-3-79"><a id="__codelineno-3-79" name="__codelineno-3-79" href="#__codelineno-3-79"></a>                <span class="s1">&#39;impact&#39;</span><span class="p">:</span> <span class="s1">&#39;Data exfiltration, command &amp; control&#39;</span><span class="p">,</span>
</span><span id="__span-3-80"><a id="__codelineno-3-80" name="__codelineno-3-80" href="#__codelineno-3-80"></a>                <span class="s1">&#39;protection&#39;</span><span class="p">:</span> <span class="s1">&#39;DNS query monitoring, traffic analysis&#39;</span>
</span><span id="__span-3-81"><a id="__codelineno-3-81" name="__codelineno-3-81" href="#__codelineno-3-81"></a>            <span class="p">},</span>
</span><span id="__span-3-82"><a id="__codelineno-3-82" name="__codelineno-3-82" href="#__codelineno-3-82"></a>            <span class="s1">&#39;DDoS via DNS&#39;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-3-83"><a id="__codelineno-3-83" name="__codelineno-3-83" href="#__codelineno-3-83"></a>                <span class="s1">&#39;description&#39;</span><span class="p">:</span> <span class="s1">&#39;Amplify attacks using DNS responses&#39;</span><span class="p">,</span>
</span><span id="__span-3-84"><a id="__codelineno-3-84" name="__codelineno-3-84" href="#__codelineno-3-84"></a>                <span class="s1">&#39;impact&#39;</span><span class="p">:</span> <span class="s1">&#39;Overwhelm target servers&#39;</span><span class="p">,</span>
</span><span id="__span-3-85"><a id="__codelineno-3-85" name="__codelineno-3-85" href="#__codelineno-3-85"></a>                <span class="s1">&#39;protection&#39;</span><span class="p">:</span> <span class="s1">&#39;Rate limiting, BCP38 implementation&#39;</span>
</span><span id="__span-3-86"><a id="__codelineno-3-86" name="__codelineno-3-86" href="#__codelineno-3-86"></a>            <span class="p">}</span>
</span><span id="__span-3-87"><a id="__codelineno-3-87" name="__codelineno-3-87" href="#__codelineno-3-87"></a>        <span class="p">}</span>
</span><span id="__span-3-88"><a id="__codelineno-3-88" name="__codelineno-3-88" href="#__codelineno-3-88"></a>
</span><span id="__span-3-89"><a id="__codelineno-3-89" name="__codelineno-3-89" href="#__codelineno-3-89"></a>        <span class="k">for</span> <span class="n">attack</span><span class="p">,</span> <span class="n">details</span> <span class="ow">in</span> <span class="n">attacks</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="__span-3-90"><a id="__codelineno-3-90" name="__codelineno-3-90" href="#__codelineno-3-90"></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">ğŸ¯ </span><span class="si">{</span><span class="n">attack</span><span class="si">}</span><span class="s2">:&quot;</span><span class="p">)</span>
</span><span id="__span-3-91"><a id="__codelineno-3-91" name="__codelineno-3-91" href="#__codelineno-3-91"></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   What it is: </span><span class="si">{</span><span class="n">details</span><span class="p">[</span><span class="s1">&#39;description&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-3-92"><a id="__codelineno-3-92" name="__codelineno-3-92" href="#__codelineno-3-92"></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Impact: </span><span class="si">{</span><span class="n">details</span><span class="p">[</span><span class="s1">&#39;impact&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-3-93"><a id="__codelineno-3-93" name="__codelineno-3-93" href="#__codelineno-3-93"></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Protection: </span><span class="si">{</span><span class="n">details</span><span class="p">[</span><span class="s1">&#39;protection&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-3-94"><a id="__codelineno-3-94" name="__codelineno-3-94" href="#__codelineno-3-94"></a>
</span><span id="__span-3-95"><a id="__codelineno-3-95" name="__codelineno-3-95" href="#__codelineno-3-95"></a><span class="c1"># Security analysis demonstration</span>
</span><span id="__span-3-96"><a id="__codelineno-3-96" name="__codelineno-3-96" href="#__codelineno-3-96"></a><span class="n">security_analyzer</span> <span class="o">=</span> <span class="n">DNSSecurityAnalyzer</span><span class="p">()</span>
</span><span id="__span-3-97"><a id="__codelineno-3-97" name="__codelineno-3-97" href="#__codelineno-3-97"></a>
</span><span id="__span-3-98"><a id="__codelineno-3-98" name="__codelineno-3-98" href="#__codelineno-3-98"></a><span class="c1"># Check security of popular sites</span>
</span><span id="__span-3-99"><a id="__codelineno-3-99" name="__codelineno-3-99" href="#__codelineno-3-99"></a><span class="k">for</span> <span class="n">domain</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;google.com&#39;</span><span class="p">,</span> <span class="s1">&#39;github.com&#39;</span><span class="p">,</span> <span class="s1">&#39;cloudflare.com&#39;</span><span class="p">]:</span>
</span><span id="__span-3-100"><a id="__codelineno-3-100" name="__codelineno-3-100" href="#__codelineno-3-100"></a>    <span class="n">security_analyzer</span><span class="o">.</span><span class="n">check_dns_security</span><span class="p">(</span><span class="n">domain</span><span class="p">)</span>
</span><span id="__span-3-101"><a id="__codelineno-3-101" name="__codelineno-3-101" href="#__codelineno-3-101"></a>    <span class="nb">print</span><span class="p">()</span>
</span><span id="__span-3-102"><a id="__codelineno-3-102" name="__codelineno-3-102" href="#__codelineno-3-102"></a>
</span><span id="__span-3-103"><a id="__codelineno-3-103" name="__codelineno-3-103" href="#__codelineno-3-103"></a><span class="c1"># Educational attack demonstration</span>
</span><span id="__span-3-104"><a id="__codelineno-3-104" name="__codelineno-3-104" href="#__codelineno-3-104"></a><span class="n">security_analyzer</span><span class="o">.</span><span class="n">demonstrate_dns_attacks</span><span class="p">()</span>
</span></code></pre></div>
</details>
<p><strong>DNS Lookup Sequence Diagram:</strong></p>
<pre  class="mermaid"><code>sequenceDiagram
    participant User
    participant Browser
    participant LocalDNS
    participant RecursiveDNS
    participant AuthoritativeDNS
    User->>Browser: Enter domain name
    Browser->>LocalDNS: Query for IP
    LocalDNS-->>Browser: Cached IP?
    LocalDNS->>RecursiveDNS: If not cached, forward query
    RecursiveDNS->>AuthoritativeDNS: Request IP
    AuthoritativeDNS-->>RecursiveDNS: Respond with IP
    RecursiveDNS-->>LocalDNS: Return IP
    LocalDNS-->>Browser: Return IP
    Browser-->>User: Load website
</code></pre>
<h3 id="web-protocols-ports-the-universal-language-of-the-internet">Web Protocols &amp; Ports: The Universal Language of the Internet ğŸŒğŸšª<a class="headerlink" href="#web-protocols-ports-the-universal-language-of-the-internet" title="Permanent link">&para;</a></h3>
<p>Think of protocols as universal languages that allow different computers to communicate perfectly, and ports as specific "doors" where different services wait for connections. Every protocol has its own purpose, security level, and optimal use cases.</p>
<h4 id="complete-protocol-reference-with-real-world-examples"><strong>Complete Protocol Reference with Real-World Examples</strong><a class="headerlink" href="#complete-protocol-reference-with-real-world-examples" title="Permanent link">&para;</a></h4>
<table>
<thead>
<tr>
<th>Protocol</th>
<th>Purpose</th>
<th>Default Port</th>
<th>Security Level</th>
<th>Real-World Example</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>HTTP</strong></td>
<td>Web page transfer</td>
<td>80</td>
<td>âš ï¸ Unencrypted</td>
<td>Loading basic websites</td>
</tr>
<tr>
<td><strong>HTTPS</strong></td>
<td>Secure web page transfer</td>
<td>443</td>
<td>ğŸ”’ Encrypted</td>
<td>Online banking, shopping</td>
</tr>
<tr>
<td><strong>FTP</strong></td>
<td>File transfer</td>
<td>21</td>
<td>âš ï¸ Unencrypted</td>
<td>Legacy file sharing</td>
</tr>
<tr>
<td><strong>SFTP</strong></td>
<td>Secure file transfer</td>
<td>22</td>
<td>ğŸ”’ Encrypted</td>
<td>Secure server uploads</td>
</tr>
<tr>
<td><strong>SSH</strong></td>
<td>Secure remote access</td>
<td>22</td>
<td>ğŸ”’ Encrypted</td>
<td>Server administration</td>
</tr>
<tr>
<td><strong>DNS</strong></td>
<td>Domain name resolution</td>
<td>53</td>
<td>âš ï¸ Usually plain</td>
<td>Converting URLs to IPs</td>
</tr>
<tr>
<td><strong>SMTP</strong></td>
<td>Sending email</td>
<td>25/587</td>
<td>ğŸ”’ Can encrypt</td>
<td>Gmail sending emails</td>
</tr>
<tr>
<td><strong>POP3</strong></td>
<td>Receiving email (download)</td>
<td>110/995</td>
<td>ğŸ”’ Can encrypt</td>
<td>Email client downloads</td>
</tr>
<tr>
<td><strong>IMAP</strong></td>
<td>Email management (sync)</td>
<td>143/993</td>
<td>ğŸ”’ Can encrypt</td>
<td>Multi-device email sync</td>
</tr>
<tr>
<td><strong>WebSocket</strong></td>
<td>Real-time bidirectional</td>
<td>80/443</td>
<td>ğŸ”’ Can encrypt</td>
<td>Live chat, gaming</td>
</tr>
<tr>
<td><strong>MQTT</strong></td>
<td>IoT device messaging</td>
<td>1883/8883</td>
<td>ğŸ”’ Can encrypt</td>
<td>Smart home devices</td>
</tr>
<tr>
<td><strong>RDP</strong></td>
<td>Remote desktop access</td>
<td>3389</td>
<td>ğŸ”’ Encrypted</td>
<td>Windows remote control</td>
</tr>
<tr>
<td><strong>VNC</strong></td>
<td>Cross-platform remote desktop</td>
<td>5900</td>
<td>âš ï¸ Usually plain</td>
<td>Remote troubleshooting</td>
</tr>
<tr>
<td><strong>Telnet</strong></td>
<td>Remote terminal access</td>
<td>23</td>
<td>âš ï¸ Unencrypted</td>
<td>Legacy (DON'T USE!)</td>
</tr>
</tbody>
</table>
<p><strong>ğŸ› ï¸ Interactive Protocol Testing Tools:</strong></p>
<details class="example">
<summary>ğŸŒ Protocol Tester - Multi-Protocol Connection Tools</summary>
<div class="language-python highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">socket</span>
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="kn">import</span><span class="w"> </span><span class="nn">ssl</span>
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="kn">import</span><span class="w"> </span><span class="nn">smtplib</span>
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a><span class="kn">import</span><span class="w"> </span><span class="nn">poplib</span>
</span><span id="__span-4-5"><a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a><span class="kn">import</span><span class="w"> </span><span class="nn">imaplib</span>
</span><span id="__span-4-6"><a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a><span class="kn">import</span><span class="w"> </span><span class="nn">ftplib</span>
</span><span id="__span-4-7"><a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a><span class="kn">import</span><span class="w"> </span><span class="nn">time</span>
</span><span id="__span-4-8"><a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a><span class="kn">from</span><span class="w"> </span><span class="nn">urllib.parse</span><span class="w"> </span><span class="kn">import</span> <span class="n">urlparse</span>
</span><span id="__span-4-9"><a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a>
</span><span id="__span-4-10"><a id="__codelineno-4-10" name="__codelineno-4-10" href="#__codelineno-4-10"></a><span class="k">class</span><span class="w"> </span><span class="nc">ProtocolTester</span><span class="p">:</span>
</span><span id="__span-4-11"><a id="__codelineno-4-11" name="__codelineno-4-11" href="#__codelineno-4-11"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Interactive tool to test different network protocols&quot;&quot;&quot;</span>
</span><span id="__span-4-12"><a id="__codelineno-4-12" name="__codelineno-4-12" href="#__codelineno-4-12"></a>
</span><span id="__span-4-13"><a id="__codelineno-4-13" name="__codelineno-4-13" href="#__codelineno-4-13"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-4-14"><a id="__codelineno-4-14" name="__codelineno-4-14" href="#__codelineno-4-14"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">test_results</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="__span-4-15"><a id="__codelineno-4-15" name="__codelineno-4-15" href="#__codelineno-4-15"></a>
</span><span id="__span-4-16"><a id="__codelineno-4-16" name="__codelineno-4-16" href="#__codelineno-4-16"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">test_http_connection</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">):</span>
</span><span id="__span-4-17"><a id="__codelineno-4-17" name="__codelineno-4-17" href="#__codelineno-4-17"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Test HTTP connection and response&quot;&quot;&quot;</span>
</span><span id="__span-4-18"><a id="__codelineno-4-18" name="__codelineno-4-18" href="#__codelineno-4-18"></a>
</span><span id="__span-4-19"><a id="__codelineno-4-19" name="__codelineno-4-19" href="#__codelineno-4-19"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ğŸŒ Testing HTTP connection to: </span><span class="si">{</span><span class="n">url</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-4-20"><a id="__codelineno-4-20" name="__codelineno-4-20" href="#__codelineno-4-20"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;-&quot;</span> <span class="o">*</span> <span class="mi">40</span><span class="p">)</span>
</span><span id="__span-4-21"><a id="__codelineno-4-21" name="__codelineno-4-21" href="#__codelineno-4-21"></a>
</span><span id="__span-4-22"><a id="__codelineno-4-22" name="__codelineno-4-22" href="#__codelineno-4-22"></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="__span-4-23"><a id="__codelineno-4-23" name="__codelineno-4-23" href="#__codelineno-4-23"></a>            <span class="n">parsed_url</span> <span class="o">=</span> <span class="n">urlparse</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
</span><span id="__span-4-24"><a id="__codelineno-4-24" name="__codelineno-4-24" href="#__codelineno-4-24"></a>            <span class="n">host</span> <span class="o">=</span> <span class="n">parsed_url</span><span class="o">.</span><span class="n">hostname</span>
</span><span id="__span-4-25"><a id="__codelineno-4-25" name="__codelineno-4-25" href="#__codelineno-4-25"></a>            <span class="n">port</span> <span class="o">=</span> <span class="n">parsed_url</span><span class="o">.</span><span class="n">port</span> <span class="ow">or</span> <span class="p">(</span><span class="mi">443</span> <span class="k">if</span> <span class="n">parsed_url</span><span class="o">.</span><span class="n">scheme</span> <span class="o">==</span> <span class="s1">&#39;https&#39;</span> <span class="k">else</span> <span class="mi">80</span><span class="p">)</span>
</span><span id="__span-4-26"><a id="__codelineno-4-26" name="__codelineno-4-26" href="#__codelineno-4-26"></a>
</span><span id="__span-4-27"><a id="__codelineno-4-27" name="__codelineno-4-27" href="#__codelineno-4-27"></a>            <span class="c1"># Create socket connection</span>
</span><span id="__span-4-28"><a id="__codelineno-4-28" name="__codelineno-4-28" href="#__codelineno-4-28"></a>            <span class="n">start_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
</span><span id="__span-4-29"><a id="__codelineno-4-29" name="__codelineno-4-29" href="#__codelineno-4-29"></a>            <span class="n">sock</span> <span class="o">=</span> <span class="n">socket</span><span class="o">.</span><span class="n">socket</span><span class="p">(</span><span class="n">socket</span><span class="o">.</span><span class="n">AF_INET</span><span class="p">,</span> <span class="n">socket</span><span class="o">.</span><span class="n">SOCK_STREAM</span><span class="p">)</span>
</span><span id="__span-4-30"><a id="__codelineno-4-30" name="__codelineno-4-30" href="#__codelineno-4-30"></a>            <span class="n">sock</span><span class="o">.</span><span class="n">settimeout</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</span><span id="__span-4-31"><a id="__codelineno-4-31" name="__codelineno-4-31" href="#__codelineno-4-31"></a>
</span><span id="__span-4-32"><a id="__codelineno-4-32" name="__codelineno-4-32" href="#__codelineno-4-32"></a>            <span class="k">if</span> <span class="n">parsed_url</span><span class="o">.</span><span class="n">scheme</span> <span class="o">==</span> <span class="s1">&#39;https&#39;</span><span class="p">:</span>
</span><span id="__span-4-33"><a id="__codelineno-4-33" name="__codelineno-4-33" href="#__codelineno-4-33"></a>                <span class="c1"># Wrap with SSL for HTTPS</span>
</span><span id="__span-4-34"><a id="__codelineno-4-34" name="__codelineno-4-34" href="#__codelineno-4-34"></a>                <span class="n">context</span> <span class="o">=</span> <span class="n">ssl</span><span class="o">.</span><span class="n">create_default_context</span><span class="p">()</span>
</span><span id="__span-4-35"><a id="__codelineno-4-35" name="__codelineno-4-35" href="#__codelineno-4-35"></a>                <span class="n">sock</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">wrap_socket</span><span class="p">(</span><span class="n">sock</span><span class="p">,</span> <span class="n">server_hostname</span><span class="o">=</span><span class="n">host</span><span class="p">)</span>
</span><span id="__span-4-36"><a id="__codelineno-4-36" name="__codelineno-4-36" href="#__codelineno-4-36"></a>
</span><span id="__span-4-37"><a id="__codelineno-4-37" name="__codelineno-4-37" href="#__codelineno-4-37"></a>            <span class="c1"># Connect and send HTTP request</span>
</span><span id="__span-4-38"><a id="__codelineno-4-38" name="__codelineno-4-38" href="#__codelineno-4-38"></a>            <span class="n">sock</span><span class="o">.</span><span class="n">connect</span><span class="p">((</span><span class="n">host</span><span class="p">,</span> <span class="n">port</span><span class="p">))</span>
</span><span id="__span-4-39"><a id="__codelineno-4-39" name="__codelineno-4-39" href="#__codelineno-4-39"></a>
</span><span id="__span-4-40"><a id="__codelineno-4-40" name="__codelineno-4-40" href="#__codelineno-4-40"></a>            <span class="n">request</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;GET </span><span class="si">{</span><span class="n">parsed_url</span><span class="o">.</span><span class="n">path</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="s1">&#39;/&#39;</span><span class="si">}</span><span class="s2"> HTTP/1.1</span><span class="se">\r\n</span><span class="s2">&quot;</span>
</span><span id="__span-4-41"><a id="__codelineno-4-41" name="__codelineno-4-41" href="#__codelineno-4-41"></a>            <span class="n">request</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;Host: </span><span class="si">{</span><span class="n">host</span><span class="si">}</span><span class="se">\r\n</span><span class="s2">&quot;</span>
</span><span id="__span-4-42"><a id="__codelineno-4-42" name="__codelineno-4-42" href="#__codelineno-4-42"></a>            <span class="n">request</span> <span class="o">+=</span> <span class="s2">&quot;Connection: close</span><span class="se">\r\n\r\n</span><span class="s2">&quot;</span>
</span><span id="__span-4-43"><a id="__codelineno-4-43" name="__codelineno-4-43" href="#__codelineno-4-43"></a>
</span><span id="__span-4-44"><a id="__codelineno-4-44" name="__codelineno-4-44" href="#__codelineno-4-44"></a>            <span class="n">sock</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">encode</span><span class="p">())</span>
</span><span id="__span-4-45"><a id="__codelineno-4-45" name="__codelineno-4-45" href="#__codelineno-4-45"></a>
</span><span id="__span-4-46"><a id="__codelineno-4-46" name="__codelineno-4-46" href="#__codelineno-4-46"></a>            <span class="c1"># Receive response</span>
</span><span id="__span-4-47"><a id="__codelineno-4-47" name="__codelineno-4-47" href="#__codelineno-4-47"></a>            <span class="n">response</span> <span class="o">=</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span>
</span><span id="__span-4-48"><a id="__codelineno-4-48" name="__codelineno-4-48" href="#__codelineno-4-48"></a>            <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="__span-4-49"><a id="__codelineno-4-49" name="__codelineno-4-49" href="#__codelineno-4-49"></a>                <span class="n">chunk</span> <span class="o">=</span> <span class="n">sock</span><span class="o">.</span><span class="n">recv</span><span class="p">(</span><span class="mi">4096</span><span class="p">)</span>
</span><span id="__span-4-50"><a id="__codelineno-4-50" name="__codelineno-4-50" href="#__codelineno-4-50"></a>                <span class="k">if</span> <span class="ow">not</span> <span class="n">chunk</span><span class="p">:</span>
</span><span id="__span-4-51"><a id="__codelineno-4-51" name="__codelineno-4-51" href="#__codelineno-4-51"></a>                    <span class="k">break</span>
</span><span id="__span-4-52"><a id="__codelineno-4-52" name="__codelineno-4-52" href="#__codelineno-4-52"></a>                <span class="n">response</span> <span class="o">+=</span> <span class="n">chunk</span>
</span><span id="__span-4-53"><a id="__codelineno-4-53" name="__codelineno-4-53" href="#__codelineno-4-53"></a>
</span><span id="__span-4-54"><a id="__codelineno-4-54" name="__codelineno-4-54" href="#__codelineno-4-54"></a>            <span class="n">connection_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start_time</span>
</span><span id="__span-4-55"><a id="__codelineno-4-55" name="__codelineno-4-55" href="#__codelineno-4-55"></a>
</span><span id="__span-4-56"><a id="__codelineno-4-56" name="__codelineno-4-56" href="#__codelineno-4-56"></a>            <span class="c1"># Parse response</span>
</span><span id="__span-4-57"><a id="__codelineno-4-57" name="__codelineno-4-57" href="#__codelineno-4-57"></a>            <span class="n">response_text</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;ignore&#39;</span><span class="p">)</span>
</span><span id="__span-4-58"><a id="__codelineno-4-58" name="__codelineno-4-58" href="#__codelineno-4-58"></a>            <span class="n">lines</span> <span class="o">=</span> <span class="n">response_text</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\r\n</span><span class="s1">&#39;</span><span class="p">)</span>
</span><span id="__span-4-59"><a id="__codelineno-4-59" name="__codelineno-4-59" href="#__codelineno-4-59"></a>            <span class="n">status_line</span> <span class="o">=</span> <span class="n">lines</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="__span-4-60"><a id="__codelineno-4-60" name="__codelineno-4-60" href="#__codelineno-4-60"></a>
</span><span id="__span-4-61"><a id="__codelineno-4-61" name="__codelineno-4-61" href="#__codelineno-4-61"></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;âœ… Connection successful!&quot;</span><span class="p">)</span>
</span><span id="__span-4-62"><a id="__codelineno-4-62" name="__codelineno-4-62" href="#__codelineno-4-62"></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Status: </span><span class="si">{</span><span class="n">status_line</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-4-63"><a id="__codelineno-4-63" name="__codelineno-4-63" href="#__codelineno-4-63"></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Connection time: </span><span class="si">{</span><span class="n">connection_time</span><span class="o">*</span><span class="mi">1000</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">ms&quot;</span><span class="p">)</span>
</span><span id="__span-4-64"><a id="__codelineno-4-64" name="__codelineno-4-64" href="#__codelineno-4-64"></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Protocol: </span><span class="si">{</span><span class="n">parsed_url</span><span class="o">.</span><span class="n">scheme</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-4-65"><a id="__codelineno-4-65" name="__codelineno-4-65" href="#__codelineno-4-65"></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Port: </span><span class="si">{</span><span class="n">port</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-4-66"><a id="__codelineno-4-66" name="__codelineno-4-66" href="#__codelineno-4-66"></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   SSL/TLS: </span><span class="si">{</span><span class="s1">&#39;Yes&#39;</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">parsed_url</span><span class="o">.</span><span class="n">scheme</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s1">&#39;https&#39;</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s1">&#39;No&#39;</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-4-67"><a id="__codelineno-4-67" name="__codelineno-4-67" href="#__codelineno-4-67"></a>
</span><span id="__span-4-68"><a id="__codelineno-4-68" name="__codelineno-4-68" href="#__codelineno-4-68"></a>            <span class="c1"># Extract key headers</span>
</span><span id="__span-4-69"><a id="__codelineno-4-69" name="__codelineno-4-69" href="#__codelineno-4-69"></a>            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="__span-4-70"><a id="__codelineno-4-70" name="__codelineno-4-70" href="#__codelineno-4-70"></a>            <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">lines</span><span class="p">[</span><span class="mi">1</span><span class="p">:]:</span>
</span><span id="__span-4-71"><a id="__codelineno-4-71" name="__codelineno-4-71" href="#__codelineno-4-71"></a>                <span class="k">if</span> <span class="s1">&#39;:&#39;</span> <span class="ow">in</span> <span class="n">line</span><span class="p">:</span>
</span><span id="__span-4-72"><a id="__codelineno-4-72" name="__codelineno-4-72" href="#__codelineno-4-72"></a>                    <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;:&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="__span-4-73"><a id="__codelineno-4-73" name="__codelineno-4-73" href="#__codelineno-4-73"></a>                    <span class="n">headers</span><span class="p">[</span><span class="n">key</span><span class="o">.</span><span class="n">strip</span><span class="p">()]</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span><span id="__span-4-74"><a id="__codelineno-4-74" name="__codelineno-4-74" href="#__codelineno-4-74"></a>
</span><span id="__span-4-75"><a id="__codelineno-4-75" name="__codelineno-4-75" href="#__codelineno-4-75"></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Server: </span><span class="si">{</span><span class="n">headers</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;Server&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Unknown&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-4-76"><a id="__codelineno-4-76" name="__codelineno-4-76" href="#__codelineno-4-76"></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Content-Type: </span><span class="si">{</span><span class="n">headers</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;Content-Type&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Unknown&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-4-77"><a id="__codelineno-4-77" name="__codelineno-4-77" href="#__codelineno-4-77"></a>
</span><span id="__span-4-78"><a id="__codelineno-4-78" name="__codelineno-4-78" href="#__codelineno-4-78"></a>            <span class="n">sock</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span id="__span-4-79"><a id="__codelineno-4-79" name="__codelineno-4-79" href="#__codelineno-4-79"></a>            <span class="k">return</span> <span class="kc">True</span>
</span><span id="__span-4-80"><a id="__codelineno-4-80" name="__codelineno-4-80" href="#__codelineno-4-80"></a>
</span><span id="__span-4-81"><a id="__codelineno-4-81" name="__codelineno-4-81" href="#__codelineno-4-81"></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="__span-4-82"><a id="__codelineno-4-82" name="__codelineno-4-82" href="#__codelineno-4-82"></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;âŒ Connection failed: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-4-83"><a id="__codelineno-4-83" name="__codelineno-4-83" href="#__codelineno-4-83"></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="__span-4-84"><a id="__codelineno-4-84" name="__codelineno-4-84" href="#__codelineno-4-84"></a>
</span><span id="__span-4-85"><a id="__codelineno-4-85" name="__codelineno-4-85" href="#__codelineno-4-85"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">test_smtp_connection</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">smtp_server</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">587</span><span class="p">):</span>
</span><span id="__span-4-86"><a id="__codelineno-4-86" name="__codelineno-4-86" href="#__codelineno-4-86"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Test SMTP email server connection&quot;&quot;&quot;</span>
</span><span id="__span-4-87"><a id="__codelineno-4-87" name="__codelineno-4-87" href="#__codelineno-4-87"></a>
</span><span id="__span-4-88"><a id="__codelineno-4-88" name="__codelineno-4-88" href="#__codelineno-4-88"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ğŸ“§ Testing SMTP connection to: </span><span class="si">{</span><span class="n">smtp_server</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">port</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-4-89"><a id="__codelineno-4-89" name="__codelineno-4-89" href="#__codelineno-4-89"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;-&quot;</span> <span class="o">*</span> <span class="mi">40</span><span class="p">)</span>
</span><span id="__span-4-90"><a id="__codelineno-4-90" name="__codelineno-4-90" href="#__codelineno-4-90"></a>
</span><span id="__span-4-91"><a id="__codelineno-4-91" name="__codelineno-4-91" href="#__codelineno-4-91"></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="__span-4-92"><a id="__codelineno-4-92" name="__codelineno-4-92" href="#__codelineno-4-92"></a>            <span class="n">start_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
</span><span id="__span-4-93"><a id="__codelineno-4-93" name="__codelineno-4-93" href="#__codelineno-4-93"></a>
</span><span id="__span-4-94"><a id="__codelineno-4-94" name="__codelineno-4-94" href="#__codelineno-4-94"></a>            <span class="c1"># Connect to SMTP server</span>
</span><span id="__span-4-95"><a id="__codelineno-4-95" name="__codelineno-4-95" href="#__codelineno-4-95"></a>            <span class="n">server</span> <span class="o">=</span> <span class="n">smtplib</span><span class="o">.</span><span class="n">SMTP</span><span class="p">(</span><span class="n">smtp_server</span><span class="p">,</span> <span class="n">port</span><span class="p">)</span>
</span><span id="__span-4-96"><a id="__codelineno-4-96" name="__codelineno-4-96" href="#__codelineno-4-96"></a>            <span class="n">server</span><span class="o">.</span><span class="n">set_debuglevel</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>  <span class="c1"># Disable debug output</span>
</span><span id="__span-4-97"><a id="__codelineno-4-97" name="__codelineno-4-97" href="#__codelineno-4-97"></a>
</span><span id="__span-4-98"><a id="__codelineno-4-98" name="__codelineno-4-98" href="#__codelineno-4-98"></a>            <span class="c1"># Start TLS encryption</span>
</span><span id="__span-4-99"><a id="__codelineno-4-99" name="__codelineno-4-99" href="#__codelineno-4-99"></a>            <span class="n">server</span><span class="o">.</span><span class="n">starttls</span><span class="p">()</span>
</span><span id="__span-4-100"><a id="__codelineno-4-100" name="__codelineno-4-100" href="#__codelineno-4-100"></a>
</span><span id="__span-4-101"><a id="__codelineno-4-101" name="__codelineno-4-101" href="#__codelineno-4-101"></a>            <span class="n">connection_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start_time</span>
</span><span id="__span-4-102"><a id="__codelineno-4-102" name="__codelineno-4-102" href="#__codelineno-4-102"></a>
</span><span id="__span-4-103"><a id="__codelineno-4-103" name="__codelineno-4-103" href="#__codelineno-4-103"></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;âœ… SMTP connection successful!&quot;</span><span class="p">)</span>
</span><span id="__span-4-104"><a id="__codelineno-4-104" name="__codelineno-4-104" href="#__codelineno-4-104"></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Server: </span><span class="si">{</span><span class="n">smtp_server</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-4-105"><a id="__codelineno-4-105" name="__codelineno-4-105" href="#__codelineno-4-105"></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Port: </span><span class="si">{</span><span class="n">port</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-4-106"><a id="__codelineno-4-106" name="__codelineno-4-106" href="#__codelineno-4-106"></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Connection time: </span><span class="si">{</span><span class="n">connection_time</span><span class="o">*</span><span class="mi">1000</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">ms&quot;</span><span class="p">)</span>
</span><span id="__span-4-107"><a id="__codelineno-4-107" name="__codelineno-4-107" href="#__codelineno-4-107"></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Encryption: STARTTLS enabled&quot;</span><span class="p">)</span>
</span><span id="__span-4-108"><a id="__codelineno-4-108" name="__codelineno-4-108" href="#__codelineno-4-108"></a>
</span><span id="__span-4-109"><a id="__codelineno-4-109" name="__codelineno-4-109" href="#__codelineno-4-109"></a>            <span class="c1"># Get server features</span>
</span><span id="__span-4-110"><a id="__codelineno-4-110" name="__codelineno-4-110" href="#__codelineno-4-110"></a>            <span class="n">features</span> <span class="o">=</span> <span class="n">server</span><span class="o">.</span><span class="n">esmtp_features</span>
</span><span id="__span-4-111"><a id="__codelineno-4-111" name="__codelineno-4-111" href="#__codelineno-4-111"></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Supported features: </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">features</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-4-112"><a id="__codelineno-4-112" name="__codelineno-4-112" href="#__codelineno-4-112"></a>
</span><span id="__span-4-113"><a id="__codelineno-4-113" name="__codelineno-4-113" href="#__codelineno-4-113"></a>            <span class="n">server</span><span class="o">.</span><span class="n">quit</span><span class="p">()</span>
</span><span id="__span-4-114"><a id="__codelineno-4-114" name="__codelineno-4-114" href="#__codelineno-4-114"></a>            <span class="k">return</span> <span class="kc">True</span>
</span><span id="__span-4-115"><a id="__codelineno-4-115" name="__codelineno-4-115" href="#__codelineno-4-115"></a>
</span><span id="__span-4-116"><a id="__codelineno-4-116" name="__codelineno-4-116" href="#__codelineno-4-116"></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="__span-4-117"><a id="__codelineno-4-117" name="__codelineno-4-117" href="#__codelineno-4-117"></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;âŒ SMTP connection failed: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-4-118"><a id="__codelineno-4-118" name="__codelineno-4-118" href="#__codelineno-4-118"></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="__span-4-119"><a id="__codelineno-4-119" name="__codelineno-4-119" href="#__codelineno-4-119"></a>
</span><span id="__span-4-120"><a id="__codelineno-4-120" name="__codelineno-4-120" href="#__codelineno-4-120"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">test_dns_resolution</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">domain</span><span class="p">):</span>
</span><span id="__span-4-121"><a id="__codelineno-4-121" name="__codelineno-4-121" href="#__codelineno-4-121"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Test DNS resolution for a domain&quot;&quot;&quot;</span>
</span><span id="__span-4-122"><a id="__codelineno-4-122" name="__codelineno-4-122" href="#__codelineno-4-122"></a>
</span><span id="__span-4-123"><a id="__codelineno-4-123" name="__codelineno-4-123" href="#__codelineno-4-123"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ğŸ” Testing DNS resolution for: </span><span class="si">{</span><span class="n">domain</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-4-124"><a id="__codelineno-4-124" name="__codelineno-4-124" href="#__codelineno-4-124"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;-&quot;</span> <span class="o">*</span> <span class="mi">40</span><span class="p">)</span>
</span><span id="__span-4-125"><a id="__codelineno-4-125" name="__codelineno-4-125" href="#__codelineno-4-125"></a>
</span><span id="__span-4-126"><a id="__codelineno-4-126" name="__codelineno-4-126" href="#__codelineno-4-126"></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="__span-4-127"><a id="__codelineno-4-127" name="__codelineno-4-127" href="#__codelineno-4-127"></a>            <span class="n">start_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
</span><span id="__span-4-128"><a id="__codelineno-4-128" name="__codelineno-4-128" href="#__codelineno-4-128"></a>
</span><span id="__span-4-129"><a id="__codelineno-4-129" name="__codelineno-4-129" href="#__codelineno-4-129"></a>            <span class="c1"># Basic DNS lookup</span>
</span><span id="__span-4-130"><a id="__codelineno-4-130" name="__codelineno-4-130" href="#__codelineno-4-130"></a>            <span class="n">ip_address</span> <span class="o">=</span> <span class="n">socket</span><span class="o">.</span><span class="n">gethostbyname</span><span class="p">(</span><span class="n">domain</span><span class="p">)</span>
</span><span id="__span-4-131"><a id="__codelineno-4-131" name="__codelineno-4-131" href="#__codelineno-4-131"></a>            <span class="n">resolution_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start_time</span>
</span><span id="__span-4-132"><a id="__codelineno-4-132" name="__codelineno-4-132" href="#__codelineno-4-132"></a>
</span><span id="__span-4-133"><a id="__codelineno-4-133" name="__codelineno-4-133" href="#__codelineno-4-133"></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;âœ… DNS resolution successful!&quot;</span><span class="p">)</span>
</span><span id="__span-4-134"><a id="__codelineno-4-134" name="__codelineno-4-134" href="#__codelineno-4-134"></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Domain: </span><span class="si">{</span><span class="n">domain</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-4-135"><a id="__codelineno-4-135" name="__codelineno-4-135" href="#__codelineno-4-135"></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   IP Address: </span><span class="si">{</span><span class="n">ip_address</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-4-136"><a id="__codelineno-4-136" name="__codelineno-4-136" href="#__codelineno-4-136"></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Resolution time: </span><span class="si">{</span><span class="n">resolution_time</span><span class="o">*</span><span class="mi">1000</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">ms&quot;</span><span class="p">)</span>
</span><span id="__span-4-137"><a id="__codelineno-4-137" name="__codelineno-4-137" href="#__codelineno-4-137"></a>
</span><span id="__span-4-138"><a id="__codelineno-4-138" name="__codelineno-4-138" href="#__codelineno-4-138"></a>            <span class="c1"># Try to get additional DNS records</span>
</span><span id="__span-4-139"><a id="__codelineno-4-139" name="__codelineno-4-139" href="#__codelineno-4-139"></a>            <span class="k">try</span><span class="p">:</span>
</span><span id="__span-4-140"><a id="__codelineno-4-140" name="__codelineno-4-140" href="#__codelineno-4-140"></a>                <span class="kn">import</span><span class="w"> </span><span class="nn">dns.resolver</span>
</span><span id="__span-4-141"><a id="__codelineno-4-141" name="__codelineno-4-141" href="#__codelineno-4-141"></a>
</span><span id="__span-4-142"><a id="__codelineno-4-142" name="__codelineno-4-142" href="#__codelineno-4-142"></a>                <span class="c1"># Get MX records (mail servers)</span>
</span><span id="__span-4-143"><a id="__codelineno-4-143" name="__codelineno-4-143" href="#__codelineno-4-143"></a>                <span class="n">mx_records</span> <span class="o">=</span> <span class="n">dns</span><span class="o">.</span><span class="n">resolver</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="n">domain</span><span class="p">,</span> <span class="s1">&#39;MX&#39;</span><span class="p">)</span>
</span><span id="__span-4-144"><a id="__codelineno-4-144" name="__codelineno-4-144" href="#__codelineno-4-144"></a>                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   MX Records:&quot;</span><span class="p">)</span>
</span><span id="__span-4-145"><a id="__codelineno-4-145" name="__codelineno-4-145" href="#__codelineno-4-145"></a>                <span class="k">for</span> <span class="n">mx</span> <span class="ow">in</span> <span class="n">mx_records</span><span class="p">:</span>
</span><span id="__span-4-146"><a id="__codelineno-4-146" name="__codelineno-4-146" href="#__codelineno-4-146"></a>                    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;     </span><span class="si">{</span><span class="n">mx</span><span class="o">.</span><span class="n">preference</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">mx</span><span class="o">.</span><span class="n">exchange</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-4-147"><a id="__codelineno-4-147" name="__codelineno-4-147" href="#__codelineno-4-147"></a>
</span><span id="__span-4-148"><a id="__codelineno-4-148" name="__codelineno-4-148" href="#__codelineno-4-148"></a>                <span class="c1"># Get CNAME records</span>
</span><span id="__span-4-149"><a id="__codelineno-4-149" name="__codelineno-4-149" href="#__codelineno-4-149"></a>                <span class="k">try</span><span class="p">:</span>
</span><span id="__span-4-150"><a id="__codelineno-4-150" name="__codelineno-4-150" href="#__codelineno-4-150"></a>                    <span class="n">cname_records</span> <span class="o">=</span> <span class="n">dns</span><span class="o">.</span><span class="n">resolver</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="n">domain</span><span class="p">,</span> <span class="s1">&#39;CNAME&#39;</span><span class="p">)</span>
</span><span id="__span-4-151"><a id="__codelineno-4-151" name="__codelineno-4-151" href="#__codelineno-4-151"></a>                    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   CNAME Records:&quot;</span><span class="p">)</span>
</span><span id="__span-4-152"><a id="__codelineno-4-152" name="__codelineno-4-152" href="#__codelineno-4-152"></a>                    <span class="k">for</span> <span class="n">cname</span> <span class="ow">in</span> <span class="n">cname_records</span><span class="p">:</span>
</span><span id="__span-4-153"><a id="__codelineno-4-153" name="__codelineno-4-153" href="#__codelineno-4-153"></a>                        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;     </span><span class="si">{</span><span class="n">cname</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-4-154"><a id="__codelineno-4-154" name="__codelineno-4-154" href="#__codelineno-4-154"></a>                <span class="k">except</span><span class="p">:</span>
</span><span id="__span-4-155"><a id="__codelineno-4-155" name="__codelineno-4-155" href="#__codelineno-4-155"></a>                    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   CNAME Records: None&quot;</span><span class="p">)</span>
</span><span id="__span-4-156"><a id="__codelineno-4-156" name="__codelineno-4-156" href="#__codelineno-4-156"></a>
</span><span id="__span-4-157"><a id="__codelineno-4-157" name="__codelineno-4-157" href="#__codelineno-4-157"></a>            <span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
</span><span id="__span-4-158"><a id="__codelineno-4-158" name="__codelineno-4-158" href="#__codelineno-4-158"></a>                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;   (Install dnspython for detailed DNS records)&quot;</span><span class="p">)</span>
</span><span id="__span-4-159"><a id="__codelineno-4-159" name="__codelineno-4-159" href="#__codelineno-4-159"></a>            <span class="k">except</span><span class="p">:</span>
</span><span id="__span-4-160"><a id="__codelineno-4-160" name="__codelineno-4-160" href="#__codelineno-4-160"></a>                <span class="k">pass</span>
</span><span id="__span-4-161"><a id="__codelineno-4-161" name="__codelineno-4-161" href="#__codelineno-4-161"></a>
</span><span id="__span-4-162"><a id="__codelineno-4-162" name="__codelineno-4-162" href="#__codelineno-4-162"></a>            <span class="k">return</span> <span class="kc">True</span>
</span><span id="__span-4-163"><a id="__codelineno-4-163" name="__codelineno-4-163" href="#__codelineno-4-163"></a>
</span><span id="__span-4-164"><a id="__codelineno-4-164" name="__codelineno-4-164" href="#__codelineno-4-164"></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="__span-4-165"><a id="__codelineno-4-165" name="__codelineno-4-165" href="#__codelineno-4-165"></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;âŒ DNS resolution failed: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-4-166"><a id="__codelineno-4-166" name="__codelineno-4-166" href="#__codelineno-4-166"></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="__span-4-167"><a id="__codelineno-4-167" name="__codelineno-4-167" href="#__codelineno-4-167"></a>
</span><span id="__span-4-168"><a id="__codelineno-4-168" name="__codelineno-4-168" href="#__codelineno-4-168"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">test_websocket_connection</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ws_url</span><span class="p">):</span>
</span><span id="__span-4-169"><a id="__codelineno-4-169" name="__codelineno-4-169" href="#__codelineno-4-169"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Test WebSocket connection&quot;&quot;&quot;</span>
</span><span id="__span-4-170"><a id="__codelineno-4-170" name="__codelineno-4-170" href="#__codelineno-4-170"></a>
</span><span id="__span-4-171"><a id="__codelineno-4-171" name="__codelineno-4-171" href="#__codelineno-4-171"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ğŸ”Œ Testing WebSocket connection to: </span><span class="si">{</span><span class="n">ws_url</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-4-172"><a id="__codelineno-4-172" name="__codelineno-4-172" href="#__codelineno-4-172"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;-&quot;</span> <span class="o">*</span> <span class="mi">40</span><span class="p">)</span>
</span><span id="__span-4-173"><a id="__codelineno-4-173" name="__codelineno-4-173" href="#__codelineno-4-173"></a>
</span><span id="__span-4-174"><a id="__codelineno-4-174" name="__codelineno-4-174" href="#__codelineno-4-174"></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="__span-4-175"><a id="__codelineno-4-175" name="__codelineno-4-175" href="#__codelineno-4-175"></a>            <span class="c1"># Simple WebSocket test (would need websocket-client library for full test)</span>
</span><span id="__span-4-176"><a id="__codelineno-4-176" name="__codelineno-4-176" href="#__codelineno-4-176"></a>            <span class="n">parsed_url</span> <span class="o">=</span> <span class="n">urlparse</span><span class="p">(</span><span class="n">ws_url</span><span class="p">)</span>
</span><span id="__span-4-177"><a id="__codelineno-4-177" name="__codelineno-4-177" href="#__codelineno-4-177"></a>            <span class="n">host</span> <span class="o">=</span> <span class="n">parsed_url</span><span class="o">.</span><span class="n">hostname</span>
</span><span id="__span-4-178"><a id="__codelineno-4-178" name="__codelineno-4-178" href="#__codelineno-4-178"></a>            <span class="n">port</span> <span class="o">=</span> <span class="n">parsed_url</span><span class="o">.</span><span class="n">port</span> <span class="ow">or</span> <span class="p">(</span><span class="mi">443</span> <span class="k">if</span> <span class="n">parsed_url</span><span class="o">.</span><span class="n">scheme</span> <span class="o">==</span> <span class="s1">&#39;wss&#39;</span> <span class="k">else</span> <span class="mi">80</span><span class="p">)</span>
</span><span id="__span-4-179"><a id="__codelineno-4-179" name="__codelineno-4-179" href="#__codelineno-4-179"></a>
</span><span id="__span-4-180"><a id="__codelineno-4-180" name="__codelineno-4-180" href="#__codelineno-4-180"></a>            <span class="c1"># Test basic TCP connection</span>
</span><span id="__span-4-181"><a id="__codelineno-4-181" name="__codelineno-4-181" href="#__codelineno-4-181"></a>            <span class="n">sock</span> <span class="o">=</span> <span class="n">socket</span><span class="o">.</span><span class="n">socket</span><span class="p">(</span><span class="n">socket</span><span class="o">.</span><span class="n">AF_INET</span><span class="p">,</span> <span class="n">socket</span><span class="o">.</span><span class="n">SOCK_STREAM</span><span class="p">)</span>
</span><span id="__span-4-182"><a id="__codelineno-4-182" name="__codelineno-4-182" href="#__codelineno-4-182"></a>            <span class="n">sock</span><span class="o">.</span><span class="n">settimeout</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</span><span id="__span-4-183"><a id="__codelineno-4-183" name="__codelineno-4-183" href="#__codelineno-4-183"></a>
</span><span id="__span-4-184"><a id="__codelineno-4-184" name="__codelineno-4-184" href="#__codelineno-4-184"></a>            <span class="n">start_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
</span><span id="__span-4-185"><a id="__codelineno-4-185" name="__codelineno-4-185" href="#__codelineno-4-185"></a>            <span class="n">sock</span><span class="o">.</span><span class="n">connect</span><span class="p">((</span><span class="n">host</span><span class="p">,</span> <span class="n">port</span><span class="p">))</span>
</span><span id="__span-4-186"><a id="__codelineno-4-186" name="__codelineno-4-186" href="#__codelineno-4-186"></a>            <span class="n">connection_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start_time</span>
</span><span id="__span-4-187"><a id="__codelineno-4-187" name="__codelineno-4-187" href="#__codelineno-4-187"></a>
</span><span id="__span-4-188"><a id="__codelineno-4-188" name="__codelineno-4-188" href="#__codelineno-4-188"></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;âœ… TCP connection successful!&quot;</span><span class="p">)</span>
</span><span id="__span-4-189"><a id="__codelineno-4-189" name="__codelineno-4-189" href="#__codelineno-4-189"></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Host: </span><span class="si">{</span><span class="n">host</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-4-190"><a id="__codelineno-4-190" name="__codelineno-4-190" href="#__codelineno-4-190"></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Port: </span><span class="si">{</span><span class="n">port</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-4-191"><a id="__codelineno-4-191" name="__codelineno-4-191" href="#__codelineno-4-191"></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Connection time: </span><span class="si">{</span><span class="n">connection_time</span><span class="o">*</span><span class="mi">1000</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">ms&quot;</span><span class="p">)</span>
</span><span id="__span-4-192"><a id="__codelineno-4-192" name="__codelineno-4-192" href="#__codelineno-4-192"></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Protocol: </span><span class="si">{</span><span class="n">parsed_url</span><span class="o">.</span><span class="n">scheme</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-4-193"><a id="__codelineno-4-193" name="__codelineno-4-193" href="#__codelineno-4-193"></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Note: Full WebSocket handshake requires websocket library&quot;</span><span class="p">)</span>
</span><span id="__span-4-194"><a id="__codelineno-4-194" name="__codelineno-4-194" href="#__codelineno-4-194"></a>
</span><span id="__span-4-195"><a id="__codelineno-4-195" name="__codelineno-4-195" href="#__codelineno-4-195"></a>            <span class="n">sock</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span id="__span-4-196"><a id="__codelineno-4-196" name="__codelineno-4-196" href="#__codelineno-4-196"></a>            <span class="k">return</span> <span class="kc">True</span>
</span><span id="__span-4-197"><a id="__codelineno-4-197" name="__codelineno-4-197" href="#__codelineno-4-197"></a>
</span><span id="__span-4-198"><a id="__codelineno-4-198" name="__codelineno-4-198" href="#__codelineno-4-198"></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="__span-4-199"><a id="__codelineno-4-199" name="__codelineno-4-199" href="#__codelineno-4-199"></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;âŒ WebSocket connection failed: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-4-200"><a id="__codelineno-4-200" name="__codelineno-4-200" href="#__codelineno-4-200"></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="__span-4-201"><a id="__codelineno-4-201" name="__codelineno-4-201" href="#__codelineno-4-201"></a>
</span><span id="__span-4-202"><a id="__codelineno-4-202" name="__codelineno-4-202" href="#__codelineno-4-202"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">port_scan_demo</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">host</span><span class="p">,</span> <span class="n">ports</span><span class="p">):</span>
</span><span id="__span-4-203"><a id="__codelineno-4-203" name="__codelineno-4-203" href="#__codelineno-4-203"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Educational port scanning demonstration&quot;&quot;&quot;</span>
</span><span id="__span-4-204"><a id="__codelineno-4-204" name="__codelineno-4-204" href="#__codelineno-4-204"></a>
</span><span id="__span-4-205"><a id="__codelineno-4-205" name="__codelineno-4-205" href="#__codelineno-4-205"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ğŸ” Port Scan Demo for: </span><span class="si">{</span><span class="n">host</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-4-206"><a id="__codelineno-4-206" name="__codelineno-4-206" href="#__codelineno-4-206"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;-&quot;</span> <span class="o">*</span> <span class="mi">40</span><span class="p">)</span>
</span><span id="__span-4-207"><a id="__codelineno-4-207" name="__codelineno-4-207" href="#__codelineno-4-207"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;âš ï¸ EDUCATIONAL ONLY - Only scan hosts you own!&quot;</span><span class="p">)</span>
</span><span id="__span-4-208"><a id="__codelineno-4-208" name="__codelineno-4-208" href="#__codelineno-4-208"></a>
</span><span id="__span-4-209"><a id="__codelineno-4-209" name="__codelineno-4-209" href="#__codelineno-4-209"></a>        <span class="n">open_ports</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="__span-4-210"><a id="__codelineno-4-210" name="__codelineno-4-210" href="#__codelineno-4-210"></a>
</span><span id="__span-4-211"><a id="__codelineno-4-211" name="__codelineno-4-211" href="#__codelineno-4-211"></a>        <span class="k">for</span> <span class="n">port</span> <span class="ow">in</span> <span class="n">ports</span><span class="p">:</span>
</span><span id="__span-4-212"><a id="__codelineno-4-212" name="__codelineno-4-212" href="#__codelineno-4-212"></a>            <span class="k">try</span><span class="p">:</span>
</span><span id="__span-4-213"><a id="__codelineno-4-213" name="__codelineno-4-213" href="#__codelineno-4-213"></a>                <span class="n">sock</span> <span class="o">=</span> <span class="n">socket</span><span class="o">.</span><span class="n">socket</span><span class="p">(</span><span class="n">socket</span><span class="o">.</span><span class="n">AF_INET</span><span class="p">,</span> <span class="n">socket</span><span class="o">.</span><span class="n">SOCK_STREAM</span><span class="p">)</span>
</span><span id="__span-4-214"><a id="__codelineno-4-214" name="__codelineno-4-214" href="#__codelineno-4-214"></a>                <span class="n">sock</span><span class="o">.</span><span class="n">settimeout</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span><span id="__span-4-215"><a id="__codelineno-4-215" name="__codelineno-4-215" href="#__codelineno-4-215"></a>                <span class="n">result</span> <span class="o">=</span> <span class="n">sock</span><span class="o">.</span><span class="n">connect_ex</span><span class="p">((</span><span class="n">host</span><span class="p">,</span> <span class="n">port</span><span class="p">))</span>
</span><span id="__span-4-216"><a id="__codelineno-4-216" name="__codelineno-4-216" href="#__codelineno-4-216"></a>
</span><span id="__span-4-217"><a id="__codelineno-4-217" name="__codelineno-4-217" href="#__codelineno-4-217"></a>                <span class="k">if</span> <span class="n">result</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="__span-4-218"><a id="__codelineno-4-218" name="__codelineno-4-218" href="#__codelineno-4-218"></a>                    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Port </span><span class="si">{</span><span class="n">port</span><span class="si">}</span><span class="s2">: âœ… OPEN&quot;</span><span class="p">)</span>
</span><span id="__span-4-219"><a id="__codelineno-4-219" name="__codelineno-4-219" href="#__codelineno-4-219"></a>                    <span class="n">open_ports</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">port</span><span class="p">)</span>
</span><span id="__span-4-220"><a id="__codelineno-4-220" name="__codelineno-4-220" href="#__codelineno-4-220"></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="__span-4-221"><a id="__codelineno-4-221" name="__codelineno-4-221" href="#__codelineno-4-221"></a>                    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Port </span><span class="si">{</span><span class="n">port</span><span class="si">}</span><span class="s2">: âŒ CLOSED&quot;</span><span class="p">)</span>
</span><span id="__span-4-222"><a id="__codelineno-4-222" name="__codelineno-4-222" href="#__codelineno-4-222"></a>
</span><span id="__span-4-223"><a id="__codelineno-4-223" name="__codelineno-4-223" href="#__codelineno-4-223"></a>                <span class="n">sock</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span id="__span-4-224"><a id="__codelineno-4-224" name="__codelineno-4-224" href="#__codelineno-4-224"></a>
</span><span id="__span-4-225"><a id="__codelineno-4-225" name="__codelineno-4-225" href="#__codelineno-4-225"></a>            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="__span-4-226"><a id="__codelineno-4-226" name="__codelineno-4-226" href="#__codelineno-4-226"></a>                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Port </span><span class="si">{</span><span class="n">port</span><span class="si">}</span><span class="s2">: â“ ERROR - </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-4-227"><a id="__codelineno-4-227" name="__codelineno-4-227" href="#__codelineno-4-227"></a>
</span><span id="__span-4-228"><a id="__codelineno-4-228" name="__codelineno-4-228" href="#__codelineno-4-228"></a>        <span class="k">return</span> <span class="n">open_ports</span>
</span><span id="__span-4-229"><a id="__codelineno-4-229" name="__codelineno-4-229" href="#__codelineno-4-229"></a>
</span><span id="__span-4-230"><a id="__codelineno-4-230" name="__codelineno-4-230" href="#__codelineno-4-230"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">comprehensive_protocol_test</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-4-231"><a id="__codelineno-4-231" name="__codelineno-4-231" href="#__codelineno-4-231"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Run comprehensive tests across multiple protocols&quot;&quot;&quot;</span>
</span><span id="__span-4-232"><a id="__codelineno-4-232" name="__codelineno-4-232" href="#__codelineno-4-232"></a>
</span><span id="__span-4-233"><a id="__codelineno-4-233" name="__codelineno-4-233" href="#__codelineno-4-233"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;ğŸš€ COMPREHENSIVE PROTOCOL TESTING SUITE&quot;</span><span class="p">)</span>
</span><span id="__span-4-234"><a id="__codelineno-4-234" name="__codelineno-4-234" href="#__codelineno-4-234"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;=&quot;</span> <span class="o">*</span> <span class="mi">60</span><span class="p">)</span>
</span><span id="__span-4-235"><a id="__codelineno-4-235" name="__codelineno-4-235" href="#__codelineno-4-235"></a>
</span><span id="__span-4-236"><a id="__codelineno-4-236" name="__codelineno-4-236" href="#__codelineno-4-236"></a>        <span class="n">test_cases</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="__span-4-237"><a id="__codelineno-4-237" name="__codelineno-4-237" href="#__codelineno-4-237"></a>            <span class="p">(</span><span class="s2">&quot;HTTP&quot;</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">test_http_connection</span><span class="p">(</span><span class="s2">&quot;http://httpbin.org/get&quot;</span><span class="p">)),</span>
</span><span id="__span-4-238"><a id="__codelineno-4-238" name="__codelineno-4-238" href="#__codelineno-4-238"></a>            <span class="p">(</span><span class="s2">&quot;HTTPS&quot;</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">test_http_connection</span><span class="p">(</span><span class="s2">&quot;https://httpbin.org/get&quot;</span><span class="p">)),</span>
</span><span id="__span-4-239"><a id="__codelineno-4-239" name="__codelineno-4-239" href="#__codelineno-4-239"></a>            <span class="p">(</span><span class="s2">&quot;DNS&quot;</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">test_dns_resolution</span><span class="p">(</span><span class="s2">&quot;google.com&quot;</span><span class="p">)),</span>
</span><span id="__span-4-240"><a id="__codelineno-4-240" name="__codelineno-4-240" href="#__codelineno-4-240"></a>            <span class="p">(</span><span class="s2">&quot;SMTP&quot;</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">test_smtp_connection</span><span class="p">(</span><span class="s2">&quot;smtp.gmail.com&quot;</span><span class="p">,</span> <span class="mi">587</span><span class="p">)),</span>
</span><span id="__span-4-241"><a id="__codelineno-4-241" name="__codelineno-4-241" href="#__codelineno-4-241"></a>        <span class="p">]</span>
</span><span id="__span-4-242"><a id="__codelineno-4-242" name="__codelineno-4-242" href="#__codelineno-4-242"></a>
</span><span id="__span-4-243"><a id="__codelineno-4-243" name="__codelineno-4-243" href="#__codelineno-4-243"></a>        <span class="n">results</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="__span-4-244"><a id="__codelineno-4-244" name="__codelineno-4-244" href="#__codelineno-4-244"></a>
</span><span id="__span-4-245"><a id="__codelineno-4-245" name="__codelineno-4-245" href="#__codelineno-4-245"></a>        <span class="k">for</span> <span class="n">protocol</span><span class="p">,</span> <span class="n">test_func</span> <span class="ow">in</span> <span class="n">test_cases</span><span class="p">:</span>
</span><span id="__span-4-246"><a id="__codelineno-4-246" name="__codelineno-4-246" href="#__codelineno-4-246"></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="si">{</span><span class="s1">&#39;=&#39;</span><span class="o">*</span><span class="mi">20</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">protocol</span><span class="si">}</span><span class="s2"> TEST </span><span class="si">{</span><span class="s1">&#39;=&#39;</span><span class="o">*</span><span class="mi">20</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-4-247"><a id="__codelineno-4-247" name="__codelineno-4-247" href="#__codelineno-4-247"></a>            <span class="n">results</span><span class="p">[</span><span class="n">protocol</span><span class="p">]</span> <span class="o">=</span> <span class="n">test_func</span><span class="p">()</span>
</span><span id="__span-4-248"><a id="__codelineno-4-248" name="__codelineno-4-248" href="#__codelineno-4-248"></a>            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>  <span class="c1"># Brief pause between tests</span>
</span><span id="__span-4-249"><a id="__codelineno-4-249" name="__codelineno-4-249" href="#__codelineno-4-249"></a>
</span><span id="__span-4-250"><a id="__codelineno-4-250" name="__codelineno-4-250" href="#__codelineno-4-250"></a>        <span class="c1"># Summary</span>
</span><span id="__span-4-251"><a id="__codelineno-4-251" name="__codelineno-4-251" href="#__codelineno-4-251"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="si">{</span><span class="s1">&#39;=&#39;</span><span class="o">*</span><span class="mi">20</span><span class="si">}</span><span class="s2"> TEST SUMMARY </span><span class="si">{</span><span class="s1">&#39;=&#39;</span><span class="o">*</span><span class="mi">20</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-4-252"><a id="__codelineno-4-252" name="__codelineno-4-252" href="#__codelineno-4-252"></a>        <span class="k">for</span> <span class="n">protocol</span><span class="p">,</span> <span class="n">success</span> <span class="ow">in</span> <span class="n">results</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="__span-4-253"><a id="__codelineno-4-253" name="__codelineno-4-253" href="#__codelineno-4-253"></a>            <span class="n">status</span> <span class="o">=</span> <span class="s2">&quot;âœ… PASS&quot;</span> <span class="k">if</span> <span class="n">success</span> <span class="k">else</span> <span class="s2">&quot;âŒ FAIL&quot;</span>
</span><span id="__span-4-254"><a id="__codelineno-4-254" name="__codelineno-4-254" href="#__codelineno-4-254"></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   </span><span class="si">{</span><span class="n">protocol</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">status</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-4-255"><a id="__codelineno-4-255" name="__codelineno-4-255" href="#__codelineno-4-255"></a>
</span><span id="__span-4-256"><a id="__codelineno-4-256" name="__codelineno-4-256" href="#__codelineno-4-256"></a>        <span class="k">return</span> <span class="n">results</span>
</span><span id="__span-4-257"><a id="__codelineno-4-257" name="__codelineno-4-257" href="#__codelineno-4-257"></a>
</span><span id="__span-4-258"><a id="__codelineno-4-258" name="__codelineno-4-258" href="#__codelineno-4-258"></a><span class="c1"># Interactive protocol testing</span>
</span><span id="__span-4-259"><a id="__codelineno-4-259" name="__codelineno-4-259" href="#__codelineno-4-259"></a><span class="n">tester</span> <span class="o">=</span> <span class="n">ProtocolTester</span><span class="p">()</span>
</span><span id="__span-4-260"><a id="__codelineno-4-260" name="__codelineno-4-260" href="#__codelineno-4-260"></a>
</span><span id="__span-4-261"><a id="__codelineno-4-261" name="__codelineno-4-261" href="#__codelineno-4-261"></a><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;ğŸŒ INTERACTIVE PROTOCOL EXPLORER&quot;</span><span class="p">)</span>
</span><span id="__span-4-262"><a id="__codelineno-4-262" name="__codelineno-4-262" href="#__codelineno-4-262"></a><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Let&#39;s test real network protocols!&quot;</span><span class="p">)</span>
</span><span id="__span-4-263"><a id="__codelineno-4-263" name="__codelineno-4-263" href="#__codelineno-4-263"></a><span class="nb">print</span><span class="p">()</span>
</span><span id="__span-4-264"><a id="__codelineno-4-264" name="__codelineno-4-264" href="#__codelineno-4-264"></a>
</span><span id="__span-4-265"><a id="__codelineno-4-265" name="__codelineno-4-265" href="#__codelineno-4-265"></a><span class="c1"># Run comprehensive tests</span>
</span><span id="__span-4-266"><a id="__codelineno-4-266" name="__codelineno-4-266" href="#__codelineno-4-266"></a><span class="n">results</span> <span class="o">=</span> <span class="n">tester</span><span class="o">.</span><span class="n">comprehensive_protocol_test</span><span class="p">()</span>
</span><span id="__span-4-267"><a id="__codelineno-4-267" name="__codelineno-4-267" href="#__codelineno-4-267"></a>
</span><span id="__span-4-268"><a id="__codelineno-4-268" name="__codelineno-4-268" href="#__codelineno-4-268"></a><span class="c1"># Port scanning demo (educational)</span>
</span><span id="__span-4-269"><a id="__codelineno-4-269" name="__codelineno-4-269" href="#__codelineno-4-269"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">ğŸ” Educational Port Scan Demo&quot;</span><span class="p">)</span>
</span><span id="__span-4-270"><a id="__codelineno-4-270" name="__codelineno-4-270" href="#__codelineno-4-270"></a><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Scanning common ports on httpbin.org...&quot;</span><span class="p">)</span>
</span><span id="__span-4-271"><a id="__codelineno-4-271" name="__codelineno-4-271" href="#__codelineno-4-271"></a><span class="n">common_ports</span> <span class="o">=</span> <span class="p">[</span><span class="mi">80</span><span class="p">,</span> <span class="mi">443</span><span class="p">,</span> <span class="mi">22</span><span class="p">,</span> <span class="mi">21</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">53</span><span class="p">,</span> <span class="mi">110</span><span class="p">,</span> <span class="mi">143</span><span class="p">,</span> <span class="mi">993</span><span class="p">,</span> <span class="mi">995</span><span class="p">]</span>
</span><span id="__span-4-272"><a id="__codelineno-4-272" name="__codelineno-4-272" href="#__codelineno-4-272"></a><span class="n">open_ports</span> <span class="o">=</span> <span class="n">tester</span><span class="o">.</span><span class="n">port_scan_demo</span><span class="p">(</span><span class="s2">&quot;httpbin.org&quot;</span><span class="p">,</span> <span class="n">common_ports</span><span class="p">)</span>
</span><span id="__span-4-273"><a id="__codelineno-4-273" name="__codelineno-4-273" href="#__codelineno-4-273"></a>
</span><span id="__span-4-274"><a id="__codelineno-4-274" name="__codelineno-4-274" href="#__codelineno-4-274"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Open ports found: </span><span class="si">{</span><span class="n">open_ports</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span></code></pre></div>
</details>
<p><strong>ğŸ” Protocol Security Analysis:</strong></p>
<details class="example">
<summary>ğŸ”’ Protocol Security Analyzer - Security Assessment Tools</summary>
<div class="language-python highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="k">class</span><span class="w"> </span><span class="nc">ProtocolSecurityAnalyzer</span><span class="p">:</span>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Analyze security characteristics of different protocols&quot;&quot;&quot;</span>
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a>
</span><span id="__span-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-5-5"><a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">protocol_security</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="__span-5-6"><a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a>            <span class="s1">&#39;HTTP&#39;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-5-7"><a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a>                <span class="s1">&#39;encryption&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="__span-5-8"><a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a>                <span class="s1">&#39;authentication&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="__span-5-9"><a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a>                <span class="s1">&#39;integrity&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="__span-5-10"><a id="__codelineno-5-10" name="__codelineno-5-10" href="#__codelineno-5-10"></a>                <span class="s1">&#39;vulnerabilities&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;Man-in-the-middle&#39;</span><span class="p">,</span> <span class="s1">&#39;Eavesdropping&#39;</span><span class="p">,</span> <span class="s1">&#39;Data tampering&#39;</span><span class="p">],</span>
</span><span id="__span-5-11"><a id="__codelineno-5-11" name="__codelineno-5-11" href="#__codelineno-5-11"></a>                <span class="s1">&#39;recommendation&#39;</span><span class="p">:</span> <span class="s1">&#39;Use HTTPS instead&#39;</span>
</span><span id="__span-5-12"><a id="__codelineno-5-12" name="__codelineno-5-12" href="#__codelineno-5-12"></a>            <span class="p">},</span>
</span><span id="__span-5-13"><a id="__codelineno-5-13" name="__codelineno-5-13" href="#__codelineno-5-13"></a>            <span class="s1">&#39;HTTPS&#39;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-5-14"><a id="__codelineno-5-14" name="__codelineno-5-14" href="#__codelineno-5-14"></a>                <span class="s1">&#39;encryption&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="__span-5-15"><a id="__codelineno-5-15" name="__codelineno-5-15" href="#__codelineno-5-15"></a>                <span class="s1">&#39;authentication&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="__span-5-16"><a id="__codelineno-5-16" name="__codelineno-5-16" href="#__codelineno-5-16"></a>                <span class="s1">&#39;integrity&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="__span-5-17"><a id="__codelineno-5-17" name="__codelineno-5-17" href="#__codelineno-5-17"></a>                <span class="s1">&#39;vulnerabilities&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;Certificate attacks&#39;</span><span class="p">,</span> <span class="s1">&#39;Weak ciphers&#39;</span><span class="p">],</span>
</span><span id="__span-5-18"><a id="__codelineno-5-18" name="__codelineno-5-18" href="#__codelineno-5-18"></a>                <span class="s1">&#39;recommendation&#39;</span><span class="p">:</span> <span class="s1">&#39;Use strong TLS versions (1.2+)&#39;</span>
</span><span id="__span-5-19"><a id="__codelineno-5-19" name="__codelineno-5-19" href="#__codelineno-5-19"></a>            <span class="p">},</span>
</span><span id="__span-5-20"><a id="__codelineno-5-20" name="__codelineno-5-20" href="#__codelineno-5-20"></a>            <span class="s1">&#39;FTP&#39;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-5-21"><a id="__codelineno-5-21" name="__codelineno-5-21" href="#__codelineno-5-21"></a>                <span class="s1">&#39;encryption&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="__span-5-22"><a id="__codelineno-5-22" name="__codelineno-5-22" href="#__codelineno-5-22"></a>                <span class="s1">&#39;authentication&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="__span-5-23"><a id="__codelineno-5-23" name="__codelineno-5-23" href="#__codelineno-5-23"></a>                <span class="s1">&#39;integrity&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="__span-5-24"><a id="__codelineno-5-24" name="__codelineno-5-24" href="#__codelineno-5-24"></a>                <span class="s1">&#39;vulnerabilities&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;Password sniffing&#39;</span><span class="p">,</span> <span class="s1">&#39;Data interception&#39;</span><span class="p">],</span>
</span><span id="__span-5-25"><a id="__codelineno-5-25" name="__codelineno-5-25" href="#__codelineno-5-25"></a>                <span class="s1">&#39;recommendation&#39;</span><span class="p">:</span> <span class="s1">&#39;Use SFTP or FTPS instead&#39;</span>
</span><span id="__span-5-26"><a id="__codelineno-5-26" name="__codelineno-5-26" href="#__codelineno-5-26"></a>            <span class="p">},</span>
</span><span id="__span-5-27"><a id="__codelineno-5-27" name="__codelineno-5-27" href="#__codelineno-5-27"></a>            <span class="s1">&#39;SFTP&#39;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-5-28"><a id="__codelineno-5-28" name="__codelineno-5-28" href="#__codelineno-5-28"></a>                <span class="s1">&#39;encryption&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="__span-5-29"><a id="__codelineno-5-29" name="__codelineno-5-29" href="#__codelineno-5-29"></a>                <span class="s1">&#39;authentication&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="__span-5-30"><a id="__codelineno-5-30" name="__codelineno-5-30" href="#__codelineno-5-30"></a>                <span class="s1">&#39;integrity&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="__span-5-31"><a id="__codelineno-5-31" name="__codelineno-5-31" href="#__codelineno-5-31"></a>                <span class="s1">&#39;vulnerabilities&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;Weak SSH configuration&#39;</span><span class="p">],</span>
</span><span id="__span-5-32"><a id="__codelineno-5-32" name="__codelineno-5-32" href="#__codelineno-5-32"></a>                <span class="s1">&#39;recommendation&#39;</span><span class="p">:</span> <span class="s1">&#39;Use strong SSH keys, disable password auth&#39;</span>
</span><span id="__span-5-33"><a id="__codelineno-5-33" name="__codelineno-5-33" href="#__codelineno-5-33"></a>            <span class="p">},</span>
</span><span id="__span-5-34"><a id="__codelineno-5-34" name="__codelineno-5-34" href="#__codelineno-5-34"></a>            <span class="s1">&#39;Telnet&#39;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-5-35"><a id="__codelineno-5-35" name="__codelineno-5-35" href="#__codelineno-5-35"></a>                <span class="s1">&#39;encryption&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="__span-5-36"><a id="__codelineno-5-36" name="__codelineno-5-36" href="#__codelineno-5-36"></a>                <span class="s1">&#39;authentication&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="__span-5-37"><a id="__codelineno-5-37" name="__codelineno-5-37" href="#__codelineno-5-37"></a>                <span class="s1">&#39;integrity&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="__span-5-38"><a id="__codelineno-5-38" name="__codelineno-5-38" href="#__codelineno-5-38"></a>                <span class="s1">&#39;vulnerabilities&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;Password sniffing&#39;</span><span class="p">,</span> <span class="s1">&#39;Session hijacking&#39;</span><span class="p">],</span>
</span><span id="__span-5-39"><a id="__codelineno-5-39" name="__codelineno-5-39" href="#__codelineno-5-39"></a>                <span class="s1">&#39;recommendation&#39;</span><span class="p">:</span> <span class="s1">&#39;NEVER USE - Use SSH instead&#39;</span>
</span><span id="__span-5-40"><a id="__codelineno-5-40" name="__codelineno-5-40" href="#__codelineno-5-40"></a>            <span class="p">},</span>
</span><span id="__span-5-41"><a id="__codelineno-5-41" name="__codelineno-5-41" href="#__codelineno-5-41"></a>            <span class="s1">&#39;SSH&#39;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-5-42"><a id="__codelineno-5-42" name="__codelineno-5-42" href="#__codelineno-5-42"></a>                <span class="s1">&#39;encryption&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="__span-5-43"><a id="__codelineno-5-43" name="__codelineno-5-43" href="#__codelineno-5-43"></a>                <span class="s1">&#39;authentication&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="__span-5-44"><a id="__codelineno-5-44" name="__codelineno-5-44" href="#__codelineno-5-44"></a>                <span class="s1">&#39;integrity&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="__span-5-45"><a id="__codelineno-5-45" name="__codelineno-5-45" href="#__codelineno-5-45"></a>                <span class="s1">&#39;vulnerabilities&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;Weak keys&#39;</span><span class="p">,</span> <span class="s1">&#39;Brute force attacks&#39;</span><span class="p">],</span>
</span><span id="__span-5-46"><a id="__codelineno-5-46" name="__codelineno-5-46" href="#__codelineno-5-46"></a>                <span class="s1">&#39;recommendation&#39;</span><span class="p">:</span> <span class="s1">&#39;Use key-based auth, strong algorithms&#39;</span>
</span><span id="__span-5-47"><a id="__codelineno-5-47" name="__codelineno-5-47" href="#__codelineno-5-47"></a>            <span class="p">}</span>
</span><span id="__span-5-48"><a id="__codelineno-5-48" name="__codelineno-5-48" href="#__codelineno-5-48"></a>        <span class="p">}</span>
</span><span id="__span-5-49"><a id="__codelineno-5-49" name="__codelineno-5-49" href="#__codelineno-5-49"></a>
</span><span id="__span-5-50"><a id="__codelineno-5-50" name="__codelineno-5-50" href="#__codelineno-5-50"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">analyze_protocol_security</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">protocol</span><span class="p">):</span>
</span><span id="__span-5-51"><a id="__codelineno-5-51" name="__codelineno-5-51" href="#__codelineno-5-51"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Detailed security analysis of a protocol&quot;&quot;&quot;</span>
</span><span id="__span-5-52"><a id="__codelineno-5-52" name="__codelineno-5-52" href="#__codelineno-5-52"></a>
</span><span id="__span-5-53"><a id="__codelineno-5-53" name="__codelineno-5-53" href="#__codelineno-5-53"></a>        <span class="k">if</span> <span class="n">protocol</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">protocol_security</span><span class="p">:</span>
</span><span id="__span-5-54"><a id="__codelineno-5-54" name="__codelineno-5-54" href="#__codelineno-5-54"></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;â“ Unknown protocol: </span><span class="si">{</span><span class="n">protocol</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-5-55"><a id="__codelineno-5-55" name="__codelineno-5-55" href="#__codelineno-5-55"></a>            <span class="k">return</span>
</span><span id="__span-5-56"><a id="__codelineno-5-56" name="__codelineno-5-56" href="#__codelineno-5-56"></a>
</span><span id="__span-5-57"><a id="__codelineno-5-57" name="__codelineno-5-57" href="#__codelineno-5-57"></a>        <span class="n">info</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">protocol_security</span><span class="p">[</span><span class="n">protocol</span><span class="p">]</span>
</span><span id="__span-5-58"><a id="__codelineno-5-58" name="__codelineno-5-58" href="#__codelineno-5-58"></a>
</span><span id="__span-5-59"><a id="__codelineno-5-59" name="__codelineno-5-59" href="#__codelineno-5-59"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ğŸ”’ Security Analysis: </span><span class="si">{</span><span class="n">protocol</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-5-60"><a id="__codelineno-5-60" name="__codelineno-5-60" href="#__codelineno-5-60"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;-&quot;</span> <span class="o">*</span> <span class="mi">40</span><span class="p">)</span>
</span><span id="__span-5-61"><a id="__codelineno-5-61" name="__codelineno-5-61" href="#__codelineno-5-61"></a>
</span><span id="__span-5-62"><a id="__codelineno-5-62" name="__codelineno-5-62" href="#__codelineno-5-62"></a>        <span class="c1"># Security features</span>
</span><span id="__span-5-63"><a id="__codelineno-5-63" name="__codelineno-5-63" href="#__codelineno-5-63"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Security Features:&quot;</span><span class="p">)</span>
</span><span id="__span-5-64"><a id="__codelineno-5-64" name="__codelineno-5-64" href="#__codelineno-5-64"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Encryption: </span><span class="si">{</span><span class="s1">&#39;âœ… Yes&#39;</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">info</span><span class="p">[</span><span class="s1">&#39;encryption&#39;</span><span class="p">]</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s1">&#39;âŒ No&#39;</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-5-65"><a id="__codelineno-5-65" name="__codelineno-5-65" href="#__codelineno-5-65"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Authentication: </span><span class="si">{</span><span class="s1">&#39;âœ… Yes&#39;</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">info</span><span class="p">[</span><span class="s1">&#39;authentication&#39;</span><span class="p">]</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s1">&#39;âŒ No&#39;</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-5-66"><a id="__codelineno-5-66" name="__codelineno-5-66" href="#__codelineno-5-66"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Data Integrity: </span><span class="si">{</span><span class="s1">&#39;âœ… Yes&#39;</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">info</span><span class="p">[</span><span class="s1">&#39;integrity&#39;</span><span class="p">]</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s1">&#39;âŒ No&#39;</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-5-67"><a id="__codelineno-5-67" name="__codelineno-5-67" href="#__codelineno-5-67"></a>
</span><span id="__span-5-68"><a id="__codelineno-5-68" name="__codelineno-5-68" href="#__codelineno-5-68"></a>        <span class="c1"># Vulnerabilities</span>
</span><span id="__span-5-69"><a id="__codelineno-5-69" name="__codelineno-5-69" href="#__codelineno-5-69"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Known Vulnerabilities:&quot;</span><span class="p">)</span>
</span><span id="__span-5-70"><a id="__codelineno-5-70" name="__codelineno-5-70" href="#__codelineno-5-70"></a>        <span class="k">for</span> <span class="n">vuln</span> <span class="ow">in</span> <span class="n">info</span><span class="p">[</span><span class="s1">&#39;vulnerabilities&#39;</span><span class="p">]:</span>
</span><span id="__span-5-71"><a id="__codelineno-5-71" name="__codelineno-5-71" href="#__codelineno-5-71"></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   âš ï¸ </span><span class="si">{</span><span class="n">vuln</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-5-72"><a id="__codelineno-5-72" name="__codelineno-5-72" href="#__codelineno-5-72"></a>
</span><span id="__span-5-73"><a id="__codelineno-5-73" name="__codelineno-5-73" href="#__codelineno-5-73"></a>        <span class="c1"># Recommendation</span>
</span><span id="__span-5-74"><a id="__codelineno-5-74" name="__codelineno-5-74" href="#__codelineno-5-74"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Recommendation:&quot;</span><span class="p">)</span>
</span><span id="__span-5-75"><a id="__codelineno-5-75" name="__codelineno-5-75" href="#__codelineno-5-75"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   ğŸ’¡ </span><span class="si">{</span><span class="n">info</span><span class="p">[</span><span class="s1">&#39;recommendation&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-5-76"><a id="__codelineno-5-76" name="__codelineno-5-76" href="#__codelineno-5-76"></a>
</span><span id="__span-5-77"><a id="__codelineno-5-77" name="__codelineno-5-77" href="#__codelineno-5-77"></a>        <span class="c1"># Security score</span>
</span><span id="__span-5-78"><a id="__codelineno-5-78" name="__codelineno-5-78" href="#__codelineno-5-78"></a>        <span class="n">score</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">([</span><span class="n">info</span><span class="p">[</span><span class="s1">&#39;encryption&#39;</span><span class="p">],</span> <span class="n">info</span><span class="p">[</span><span class="s1">&#39;authentication&#39;</span><span class="p">],</span> <span class="n">info</span><span class="p">[</span><span class="s1">&#39;integrity&#39;</span><span class="p">]])</span>
</span><span id="__span-5-79"><a id="__codelineno-5-79" name="__codelineno-5-79" href="#__codelineno-5-79"></a>        <span class="n">security_level</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">:</span> <span class="s2">&quot;ğŸ”´ Very Low&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">:</span> <span class="s2">&quot;ğŸŸ  Low&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span> <span class="s2">&quot;ğŸŸ¡ Medium&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">:</span> <span class="s2">&quot;ğŸŸ¢ High&quot;</span><span class="p">}</span>
</span><span id="__span-5-80"><a id="__codelineno-5-80" name="__codelineno-5-80" href="#__codelineno-5-80"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Security Score: </span><span class="si">{</span><span class="n">score</span><span class="si">}</span><span class="s2">/3 - </span><span class="si">{</span><span class="n">security_level</span><span class="p">[</span><span class="n">score</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-5-81"><a id="__codelineno-5-81" name="__codelineno-5-81" href="#__codelineno-5-81"></a>
</span><span id="__span-5-82"><a id="__codelineno-5-82" name="__codelineno-5-82" href="#__codelineno-5-82"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">protocol_comparison</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">protocols</span><span class="p">):</span>
</span><span id="__span-5-83"><a id="__codelineno-5-83" name="__codelineno-5-83" href="#__codelineno-5-83"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Compare security of multiple protocols&quot;&quot;&quot;</span>
</span><span id="__span-5-84"><a id="__codelineno-5-84" name="__codelineno-5-84" href="#__codelineno-5-84"></a>
</span><span id="__span-5-85"><a id="__codelineno-5-85" name="__codelineno-5-85" href="#__codelineno-5-85"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;ğŸ“Š Protocol Security Comparison&quot;</span><span class="p">)</span>
</span><span id="__span-5-86"><a id="__codelineno-5-86" name="__codelineno-5-86" href="#__codelineno-5-86"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;=&quot;</span> <span class="o">*</span> <span class="mi">50</span><span class="p">)</span>
</span><span id="__span-5-87"><a id="__codelineno-5-87" name="__codelineno-5-87" href="#__codelineno-5-87"></a>
</span><span id="__span-5-88"><a id="__codelineno-5-88" name="__codelineno-5-88" href="#__codelineno-5-88"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="s1">&#39;Protocol&#39;</span><span class="si">:</span><span class="s2">&lt;10</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="s1">&#39;Encrypt&#39;</span><span class="si">:</span><span class="s2">&lt;8</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="s1">&#39;Auth&#39;</span><span class="si">:</span><span class="s2">&lt;6</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="s1">&#39;Integrity&#39;</span><span class="si">:</span><span class="s2">&lt;10</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="s1">&#39;Score&#39;</span><span class="si">:</span><span class="s2">&lt;8</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-5-89"><a id="__codelineno-5-89" name="__codelineno-5-89" href="#__codelineno-5-89"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;-&quot;</span> <span class="o">*</span> <span class="mi">50</span><span class="p">)</span>
</span><span id="__span-5-90"><a id="__codelineno-5-90" name="__codelineno-5-90" href="#__codelineno-5-90"></a>
</span><span id="__span-5-91"><a id="__codelineno-5-91" name="__codelineno-5-91" href="#__codelineno-5-91"></a>        <span class="k">for</span> <span class="n">protocol</span> <span class="ow">in</span> <span class="n">protocols</span><span class="p">:</span>
</span><span id="__span-5-92"><a id="__codelineno-5-92" name="__codelineno-5-92" href="#__codelineno-5-92"></a>            <span class="k">if</span> <span class="n">protocol</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">protocol_security</span><span class="p">:</span>
</span><span id="__span-5-93"><a id="__codelineno-5-93" name="__codelineno-5-93" href="#__codelineno-5-93"></a>                <span class="n">info</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">protocol_security</span><span class="p">[</span><span class="n">protocol</span><span class="p">]</span>
</span><span id="__span-5-94"><a id="__codelineno-5-94" name="__codelineno-5-94" href="#__codelineno-5-94"></a>                <span class="n">encrypt</span> <span class="o">=</span> <span class="s2">&quot;âœ…&quot;</span> <span class="k">if</span> <span class="n">info</span><span class="p">[</span><span class="s1">&#39;encryption&#39;</span><span class="p">]</span> <span class="k">else</span> <span class="s2">&quot;âŒ&quot;</span>
</span><span id="__span-5-95"><a id="__codelineno-5-95" name="__codelineno-5-95" href="#__codelineno-5-95"></a>                <span class="n">auth</span> <span class="o">=</span> <span class="s2">&quot;âœ…&quot;</span> <span class="k">if</span> <span class="n">info</span><span class="p">[</span><span class="s1">&#39;authentication&#39;</span><span class="p">]</span> <span class="k">else</span> <span class="s2">&quot;âŒ&quot;</span>
</span><span id="__span-5-96"><a id="__codelineno-5-96" name="__codelineno-5-96" href="#__codelineno-5-96"></a>                <span class="n">integrity</span> <span class="o">=</span> <span class="s2">&quot;âœ…&quot;</span> <span class="k">if</span> <span class="n">info</span><span class="p">[</span><span class="s1">&#39;integrity&#39;</span><span class="p">]</span> <span class="k">else</span> <span class="s2">&quot;âŒ&quot;</span>
</span><span id="__span-5-97"><a id="__codelineno-5-97" name="__codelineno-5-97" href="#__codelineno-5-97"></a>                <span class="n">score</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">([</span><span class="n">info</span><span class="p">[</span><span class="s1">&#39;encryption&#39;</span><span class="p">],</span> <span class="n">info</span><span class="p">[</span><span class="s1">&#39;authentication&#39;</span><span class="p">],</span> <span class="n">info</span><span class="p">[</span><span class="s1">&#39;integrity&#39;</span><span class="p">]])</span>
</span><span id="__span-5-98"><a id="__codelineno-5-98" name="__codelineno-5-98" href="#__codelineno-5-98"></a>
</span><span id="__span-5-99"><a id="__codelineno-5-99" name="__codelineno-5-99" href="#__codelineno-5-99"></a>                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">protocol</span><span class="si">:</span><span class="s2">&lt;10</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">encrypt</span><span class="si">:</span><span class="s2">&lt;8</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">auth</span><span class="si">:</span><span class="s2">&lt;6</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">integrity</span><span class="si">:</span><span class="s2">&lt;10</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">score</span><span class="si">}</span><span class="s2">/3&quot;</span><span class="p">)</span>
</span><span id="__span-5-100"><a id="__codelineno-5-100" name="__codelineno-5-100" href="#__codelineno-5-100"></a>
</span><span id="__span-5-101"><a id="__codelineno-5-101" name="__codelineno-5-101" href="#__codelineno-5-101"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Recommendation: Always prefer protocols with 3/3 security score!&quot;</span><span class="p">)</span>
</span><span id="__span-5-102"><a id="__codelineno-5-102" name="__codelineno-5-102" href="#__codelineno-5-102"></a>
</span><span id="__span-5-103"><a id="__codelineno-5-103" name="__codelineno-5-103" href="#__codelineno-5-103"></a><span class="c1"># Security analysis demonstration</span>
</span><span id="__span-5-104"><a id="__codelineno-5-104" name="__codelineno-5-104" href="#__codelineno-5-104"></a><span class="n">analyzer</span> <span class="o">=</span> <span class="n">ProtocolSecurityAnalyzer</span><span class="p">()</span>
</span><span id="__span-5-105"><a id="__codelineno-5-105" name="__codelineno-5-105" href="#__codelineno-5-105"></a>
</span><span id="__span-5-106"><a id="__codelineno-5-106" name="__codelineno-5-106" href="#__codelineno-5-106"></a><span class="c1"># Analyze individual protocols</span>
</span><span id="__span-5-107"><a id="__codelineno-5-107" name="__codelineno-5-107" href="#__codelineno-5-107"></a><span class="n">protocols_to_analyze</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;HTTP&#39;</span><span class="p">,</span> <span class="s1">&#39;HTTPS&#39;</span><span class="p">,</span> <span class="s1">&#39;FTP&#39;</span><span class="p">,</span> <span class="s1">&#39;SFTP&#39;</span><span class="p">,</span> <span class="s1">&#39;Telnet&#39;</span><span class="p">,</span> <span class="s1">&#39;SSH&#39;</span><span class="p">]</span>
</span><span id="__span-5-108"><a id="__codelineno-5-108" name="__codelineno-5-108" href="#__codelineno-5-108"></a>
</span><span id="__span-5-109"><a id="__codelineno-5-109" name="__codelineno-5-109" href="#__codelineno-5-109"></a><span class="k">for</span> <span class="n">protocol</span> <span class="ow">in</span> <span class="n">protocols_to_analyze</span><span class="p">:</span>
</span><span id="__span-5-110"><a id="__codelineno-5-110" name="__codelineno-5-110" href="#__codelineno-5-110"></a>    <span class="n">analyzer</span><span class="o">.</span><span class="n">analyze_protocol_security</span><span class="p">(</span><span class="n">protocol</span><span class="p">)</span>
</span><span id="__span-5-111"><a id="__codelineno-5-111" name="__codelineno-5-111" href="#__codelineno-5-111"></a>    <span class="nb">print</span><span class="p">()</span>
</span><span id="__span-5-112"><a id="__codelineno-5-112" name="__codelineno-5-112" href="#__codelineno-5-112"></a>
</span><span id="__span-5-113"><a id="__codelineno-5-113" name="__codelineno-5-113" href="#__codelineno-5-113"></a><span class="c1"># Compare all protocols</span>
</span><span id="__span-5-114"><a id="__codelineno-5-114" name="__codelineno-5-114" href="#__codelineno-5-114"></a><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;=&quot;</span><span class="o">*</span><span class="mi">60</span><span class="p">)</span>
</span><span id="__span-5-115"><a id="__codelineno-5-115" name="__codelineno-5-115" href="#__codelineno-5-115"></a><span class="n">analyzer</span><span class="o">.</span><span class="n">protocol_comparison</span><span class="p">(</span><span class="n">protocols_to_analyze</span><span class="p">)</span>
</span></code></pre></div>
</details>
<h4 id="protocol-selection-guide-for-different-use-cases"><strong>Protocol Selection Guide for Different Use Cases</strong><a class="headerlink" href="#protocol-selection-guide-for-different-use-cases" title="Permanent link">&para;</a></h4>
<p><strong>ğŸŒ Web Development:</strong></p>
<ul>
<li><strong>Development:</strong> HTTP (local only)</li>
<li><strong>Production:</strong> HTTPS (always!)</li>
<li><strong>APIs:</strong> HTTPS with proper authentication</li>
<li><strong>Real-time features:</strong> WebSocket over WSS</li>
</ul>
<p><strong>ğŸ“ File Transfer:</strong></p>
<ul>
<li><strong>Legacy systems:</strong> FTP (if absolutely necessary)</li>
<li><strong>Secure transfer:</strong> SFTP or SCP</li>
<li><strong>Web uploads:</strong> HTTPS with multipart forms</li>
<li><strong>Large files:</strong> Consider resumable upload protocols</li>
</ul>
<p><strong>ğŸ“§ Email Systems:</strong></p>
<ul>
<li><strong>Sending:</strong> SMTP with STARTTLS (port 587)</li>
<li><strong>Receiving:</strong> IMAP with SSL (port 993) </li>
<li><strong>Mobile apps:</strong> IMAP with OAuth2</li>
<li><strong>Avoid:</strong> POP3 (unless specific requirements)</li>
</ul>
<p><strong>ğŸ”§ Remote Administration:</strong></p>
<ul>
<li><strong>Unix/Linux:</strong> SSH (port 22)</li>
<li><strong>Windows:</strong> RDP with NLA (port 3389)</li>
<li><strong>Never use:</strong> Telnet, unencrypted protocols</li>
<li><strong>VPN:</strong> Always when accessing over internet</li>
</ul>
<p><strong>ğŸ  IoT and Embedded:</strong></p>
<ul>
<li><strong>Lightweight messaging:</strong> MQTT over TLS</li>
<li><strong>Web interfaces:</strong> HTTPS even on local network</li>
<li><strong>Device updates:</strong> HTTPS with certificate pinning</li>
<li><strong>Sensor data:</strong> Consider CoAP for resource-constrained devices</li>
</ul>
<h3 id="securing-web-traffic-your-digital-fortress">Securing Web Traffic: Your Digital Fortress ğŸ”ğŸ›¡ï¸<a class="headerlink" href="#securing-web-traffic-your-digital-fortress" title="Permanent link">&para;</a></h3>
<p>In a world where cyber attacks happen every 39 seconds, securing web traffic isn't optionalâ€”it's survival. Every piece of data traveling across the internet is potentially vulnerable to interception, modification, or theft. Understanding encryption, authentication, and security protocols is crucial for any web developer.</p>
<h4 id="ssltls-the-guardian-angels-of-web-security"><strong>SSL/TLS: The Guardian Angels of Web Security</strong><a class="headerlink" href="#ssltls-the-guardian-angels-of-web-security" title="Permanent link">&para;</a></h4>
<p>SSL (Secure Sockets Layer) and its successor TLS (Transport Layer Security) are like having a team of bodyguards for your data. They create an encrypted tunnel between your browser and the server, ensuring that even if someone intercepts your data, they can't read it.</p>
<p><strong>Real SSL/TLS Handshake Demonstration:</strong></p>
<details class="example">
<summary>ğŸ” SSL/TLS Handshake Analyzer - Security Protocol Deep Dive</summary>
<div class="language-python highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">ssl</span>
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="kn">import</span><span class="w"> </span><span class="nn">socket</span>
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="kn">import</span><span class="w"> </span><span class="nn">hashlib</span>
</span><span id="__span-6-4"><a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a><span class="kn">import</span><span class="w"> </span><span class="nn">base64</span>
</span><span id="__span-6-5"><a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a><span class="kn">import</span><span class="w"> </span><span class="nn">time</span>
</span><span id="__span-6-6"><a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a><span class="kn">from</span><span class="w"> </span><span class="nn">cryptography</span><span class="w"> </span><span class="kn">import</span> <span class="n">x509</span>
</span><span id="__span-6-7"><a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a><span class="kn">from</span><span class="w"> </span><span class="nn">cryptography.hazmat.primitives</span><span class="w"> </span><span class="kn">import</span> <span class="n">serialization</span><span class="p">,</span> <span class="n">hashes</span>
</span><span id="__span-6-8"><a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a><span class="kn">from</span><span class="w"> </span><span class="nn">cryptography.hazmat.primitives.asymmetric</span><span class="w"> </span><span class="kn">import</span> <span class="n">rsa</span><span class="p">,</span> <span class="n">padding</span>
</span><span id="__span-6-9"><a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a>
</span><span id="__span-6-10"><a id="__codelineno-6-10" name="__codelineno-6-10" href="#__codelineno-6-10"></a><span class="k">class</span><span class="w"> </span><span class="nc">SSLSecurityAnalyzer</span><span class="p">:</span>
</span><span id="__span-6-11"><a id="__codelineno-6-11" name="__codelineno-6-11" href="#__codelineno-6-11"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Complete SSL/TLS security analysis and demonstration&quot;&quot;&quot;</span>
</span><span id="__span-6-12"><a id="__codelineno-6-12" name="__codelineno-6-12" href="#__codelineno-6-12"></a>
</span><span id="__span-6-13"><a id="__codelineno-6-13" name="__codelineno-6-13" href="#__codelineno-6-13"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-6-14"><a id="__codelineno-6-14" name="__codelineno-6-14" href="#__codelineno-6-14"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">cipher_strengths</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="__span-6-15"><a id="__codelineno-6-15" name="__codelineno-6-15" href="#__codelineno-6-15"></a>            <span class="s1">&#39;AES256-GCM-SHA384&#39;</span><span class="p">:</span> <span class="s1">&#39;EXCELLENT&#39;</span><span class="p">,</span>
</span><span id="__span-6-16"><a id="__codelineno-6-16" name="__codelineno-6-16" href="#__codelineno-6-16"></a>            <span class="s1">&#39;AES128-GCM-SHA256&#39;</span><span class="p">:</span> <span class="s1">&#39;EXCELLENT&#39;</span><span class="p">,</span> 
</span><span id="__span-6-17"><a id="__codelineno-6-17" name="__codelineno-6-17" href="#__codelineno-6-17"></a>            <span class="s1">&#39;CHACHA20-POLY1305&#39;</span><span class="p">:</span> <span class="s1">&#39;EXCELLENT&#39;</span><span class="p">,</span>
</span><span id="__span-6-18"><a id="__codelineno-6-18" name="__codelineno-6-18" href="#__codelineno-6-18"></a>            <span class="s1">&#39;AES256-CBC-SHA256&#39;</span><span class="p">:</span> <span class="s1">&#39;GOOD&#39;</span><span class="p">,</span>
</span><span id="__span-6-19"><a id="__codelineno-6-19" name="__codelineno-6-19" href="#__codelineno-6-19"></a>            <span class="s1">&#39;AES128-CBC-SHA256&#39;</span><span class="p">:</span> <span class="s1">&#39;GOOD&#39;</span><span class="p">,</span>
</span><span id="__span-6-20"><a id="__codelineno-6-20" name="__codelineno-6-20" href="#__codelineno-6-20"></a>            <span class="s1">&#39;RC4-MD5&#39;</span><span class="p">:</span> <span class="s1">&#39;WEAK - AVOID&#39;</span><span class="p">,</span>
</span><span id="__span-6-21"><a id="__codelineno-6-21" name="__codelineno-6-21" href="#__codelineno-6-21"></a>            <span class="s1">&#39;DES-CBC3-SHA&#39;</span><span class="p">:</span> <span class="s1">&#39;WEAK - AVOID&#39;</span>
</span><span id="__span-6-22"><a id="__codelineno-6-22" name="__codelineno-6-22" href="#__codelineno-6-22"></a>        <span class="p">}</span>
</span><span id="__span-6-23"><a id="__codelineno-6-23" name="__codelineno-6-23" href="#__codelineno-6-23"></a>
</span><span id="__span-6-24"><a id="__codelineno-6-24" name="__codelineno-6-24" href="#__codelineno-6-24"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">analyze_ssl_certificate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">hostname</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">443</span><span class="p">):</span>
</span><span id="__span-6-25"><a id="__codelineno-6-25" name="__codelineno-6-25" href="#__codelineno-6-25"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Comprehensive SSL certificate analysis&quot;&quot;&quot;</span>
</span><span id="__span-6-26"><a id="__codelineno-6-26" name="__codelineno-6-26" href="#__codelineno-6-26"></a>
</span><span id="__span-6-27"><a id="__codelineno-6-27" name="__codelineno-6-27" href="#__codelineno-6-27"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ğŸ”’ SSL Certificate Analysis for: </span><span class="si">{</span><span class="n">hostname</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">port</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-6-28"><a id="__codelineno-6-28" name="__codelineno-6-28" href="#__codelineno-6-28"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;=&quot;</span> <span class="o">*</span> <span class="mi">60</span><span class="p">)</span>
</span><span id="__span-6-29"><a id="__codelineno-6-29" name="__codelineno-6-29" href="#__codelineno-6-29"></a>
</span><span id="__span-6-30"><a id="__codelineno-6-30" name="__codelineno-6-30" href="#__codelineno-6-30"></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="__span-6-31"><a id="__codelineno-6-31" name="__codelineno-6-31" href="#__codelineno-6-31"></a>            <span class="c1"># Create SSL context</span>
</span><span id="__span-6-32"><a id="__codelineno-6-32" name="__codelineno-6-32" href="#__codelineno-6-32"></a>            <span class="n">context</span> <span class="o">=</span> <span class="n">ssl</span><span class="o">.</span><span class="n">create_default_context</span><span class="p">()</span>
</span><span id="__span-6-33"><a id="__codelineno-6-33" name="__codelineno-6-33" href="#__codelineno-6-33"></a>
</span><span id="__span-6-34"><a id="__codelineno-6-34" name="__codelineno-6-34" href="#__codelineno-6-34"></a>            <span class="c1"># Connect and get certificate</span>
</span><span id="__span-6-35"><a id="__codelineno-6-35" name="__codelineno-6-35" href="#__codelineno-6-35"></a>            <span class="k">with</span> <span class="n">socket</span><span class="o">.</span><span class="n">create_connection</span><span class="p">((</span><span class="n">hostname</span><span class="p">,</span> <span class="n">port</span><span class="p">),</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span> <span class="k">as</span> <span class="n">sock</span><span class="p">:</span>
</span><span id="__span-6-36"><a id="__codelineno-6-36" name="__codelineno-6-36" href="#__codelineno-6-36"></a>                <span class="k">with</span> <span class="n">context</span><span class="o">.</span><span class="n">wrap_socket</span><span class="p">(</span><span class="n">sock</span><span class="p">,</span> <span class="n">server_hostname</span><span class="o">=</span><span class="n">hostname</span><span class="p">)</span> <span class="k">as</span> <span class="n">ssock</span><span class="p">:</span>
</span><span id="__span-6-37"><a id="__codelineno-6-37" name="__codelineno-6-37" href="#__codelineno-6-37"></a>
</span><span id="__span-6-38"><a id="__codelineno-6-38" name="__codelineno-6-38" href="#__codelineno-6-38"></a>                    <span class="c1"># Get SSL information</span>
</span><span id="__span-6-39"><a id="__codelineno-6-39" name="__codelineno-6-39" href="#__codelineno-6-39"></a>                    <span class="n">ssl_info</span> <span class="o">=</span> <span class="n">ssock</span><span class="o">.</span><span class="n">getpeercert</span><span class="p">()</span>
</span><span id="__span-6-40"><a id="__codelineno-6-40" name="__codelineno-6-40" href="#__codelineno-6-40"></a>                    <span class="n">cipher</span> <span class="o">=</span> <span class="n">ssock</span><span class="o">.</span><span class="n">cipher</span><span class="p">()</span>
</span><span id="__span-6-41"><a id="__codelineno-6-41" name="__codelineno-6-41" href="#__codelineno-6-41"></a>                    <span class="n">version</span> <span class="o">=</span> <span class="n">ssock</span><span class="o">.</span><span class="n">version</span><span class="p">()</span>
</span><span id="__span-6-42"><a id="__codelineno-6-42" name="__codelineno-6-42" href="#__codelineno-6-42"></a>
</span><span id="__span-6-43"><a id="__codelineno-6-43" name="__codelineno-6-43" href="#__codelineno-6-43"></a>                    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ğŸ“‹ Certificate Information:&quot;</span><span class="p">)</span>
</span><span id="__span-6-44"><a id="__codelineno-6-44" name="__codelineno-6-44" href="#__codelineno-6-44"></a>                    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Subject: </span><span class="si">{</span><span class="n">ssl_info</span><span class="p">[</span><span class="s1">&#39;subject&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-6-45"><a id="__codelineno-6-45" name="__codelineno-6-45" href="#__codelineno-6-45"></a>                    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Issuer: </span><span class="si">{</span><span class="n">ssl_info</span><span class="p">[</span><span class="s1">&#39;issuer&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-6-46"><a id="__codelineno-6-46" name="__codelineno-6-46" href="#__codelineno-6-46"></a>                    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Valid From: </span><span class="si">{</span><span class="n">ssl_info</span><span class="p">[</span><span class="s1">&#39;notBefore&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-6-47"><a id="__codelineno-6-47" name="__codelineno-6-47" href="#__codelineno-6-47"></a>                    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Valid Until: </span><span class="si">{</span><span class="n">ssl_info</span><span class="p">[</span><span class="s1">&#39;notAfter&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-6-48"><a id="__codelineno-6-48" name="__codelineno-6-48" href="#__codelineno-6-48"></a>                    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Serial Number: </span><span class="si">{</span><span class="n">ssl_info</span><span class="p">[</span><span class="s1">&#39;serialNumber&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-6-49"><a id="__codelineno-6-49" name="__codelineno-6-49" href="#__codelineno-6-49"></a>
</span><span id="__span-6-50"><a id="__codelineno-6-50" name="__codelineno-6-50" href="#__codelineno-6-50"></a>                    <span class="c1"># Subject Alternative Names</span>
</span><span id="__span-6-51"><a id="__codelineno-6-51" name="__codelineno-6-51" href="#__codelineno-6-51"></a>                    <span class="k">if</span> <span class="s1">&#39;subjectAltName&#39;</span> <span class="ow">in</span> <span class="n">ssl_info</span><span class="p">:</span>
</span><span id="__span-6-52"><a id="__codelineno-6-52" name="__codelineno-6-52" href="#__codelineno-6-52"></a>                        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Alternative Names:&quot;</span><span class="p">)</span>
</span><span id="__span-6-53"><a id="__codelineno-6-53" name="__codelineno-6-53" href="#__codelineno-6-53"></a>                        <span class="k">for</span> <span class="n">alt_name</span> <span class="ow">in</span> <span class="n">ssl_info</span><span class="p">[</span><span class="s1">&#39;subjectAltName&#39;</span><span class="p">]:</span>
</span><span id="__span-6-54"><a id="__codelineno-6-54" name="__codelineno-6-54" href="#__codelineno-6-54"></a>                            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;     </span><span class="si">{</span><span class="n">alt_name</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-6-55"><a id="__codelineno-6-55" name="__codelineno-6-55" href="#__codelineno-6-55"></a>
</span><span id="__span-6-56"><a id="__codelineno-6-56" name="__codelineno-6-56" href="#__codelineno-6-56"></a>                    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">ğŸ” Encryption Details:&quot;</span><span class="p">)</span>
</span><span id="__span-6-57"><a id="__codelineno-6-57" name="__codelineno-6-57" href="#__codelineno-6-57"></a>                    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   TLS Version: </span><span class="si">{</span><span class="n">version</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-6-58"><a id="__codelineno-6-58" name="__codelineno-6-58" href="#__codelineno-6-58"></a>                    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Cipher Suite: </span><span class="si">{</span><span class="n">cipher</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-6-59"><a id="__codelineno-6-59" name="__codelineno-6-59" href="#__codelineno-6-59"></a>                    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Key Exchange: </span><span class="si">{</span><span class="n">cipher</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-6-60"><a id="__codelineno-6-60" name="__codelineno-6-60" href="#__codelineno-6-60"></a>                    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Authentication: </span><span class="si">{</span><span class="n">cipher</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-6-61"><a id="__codelineno-6-61" name="__codelineno-6-61" href="#__codelineno-6-61"></a>
</span><span id="__span-6-62"><a id="__codelineno-6-62" name="__codelineno-6-62" href="#__codelineno-6-62"></a>                    <span class="c1"># Security assessment</span>
</span><span id="__span-6-63"><a id="__codelineno-6-63" name="__codelineno-6-63" href="#__codelineno-6-63"></a>                    <span class="n">cipher_strength</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cipher_strengths</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">cipher</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s1">&#39;UNKNOWN&#39;</span><span class="p">)</span>
</span><span id="__span-6-64"><a id="__codelineno-6-64" name="__codelineno-6-64" href="#__codelineno-6-64"></a>                    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Cipher Strength: </span><span class="si">{</span><span class="n">cipher_strength</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-6-65"><a id="__codelineno-6-65" name="__codelineno-6-65" href="#__codelineno-6-65"></a>
</span><span id="__span-6-66"><a id="__codelineno-6-66" name="__codelineno-6-66" href="#__codelineno-6-66"></a>                    <span class="c1"># Check certificate expiry</span>
</span><span id="__span-6-67"><a id="__codelineno-6-67" name="__codelineno-6-67" href="#__codelineno-6-67"></a>                    <span class="kn">from</span><span class="w"> </span><span class="nn">datetime</span><span class="w"> </span><span class="kn">import</span> <span class="n">datetime</span>
</span><span id="__span-6-68"><a id="__codelineno-6-68" name="__codelineno-6-68" href="#__codelineno-6-68"></a>                    <span class="n">expiry_date</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">ssl_info</span><span class="p">[</span><span class="s1">&#39;notAfter&#39;</span><span class="p">],</span> <span class="s1">&#39;%b </span><span class="si">%d</span><span class="s1"> %H:%M:%S %Y %Z&#39;</span><span class="p">)</span>
</span><span id="__span-6-69"><a id="__codelineno-6-69" name="__codelineno-6-69" href="#__codelineno-6-69"></a>                    <span class="n">days_until_expiry</span> <span class="o">=</span> <span class="p">(</span><span class="n">expiry_date</span> <span class="o">-</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">())</span><span class="o">.</span><span class="n">days</span>
</span><span id="__span-6-70"><a id="__codelineno-6-70" name="__codelineno-6-70" href="#__codelineno-6-70"></a>
</span><span id="__span-6-71"><a id="__codelineno-6-71" name="__codelineno-6-71" href="#__codelineno-6-71"></a>                    <span class="k">if</span> <span class="n">days_until_expiry</span> <span class="o">&gt;</span> <span class="mi">30</span><span class="p">:</span>
</span><span id="__span-6-72"><a id="__codelineno-6-72" name="__codelineno-6-72" href="#__codelineno-6-72"></a>                        <span class="n">expiry_status</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;âœ… </span><span class="si">{</span><span class="n">days_until_expiry</span><span class="si">}</span><span class="s2"> days remaining&quot;</span>
</span><span id="__span-6-73"><a id="__codelineno-6-73" name="__codelineno-6-73" href="#__codelineno-6-73"></a>                    <span class="k">elif</span> <span class="n">days_until_expiry</span> <span class="o">&gt;</span> <span class="mi">7</span><span class="p">:</span>
</span><span id="__span-6-74"><a id="__codelineno-6-74" name="__codelineno-6-74" href="#__codelineno-6-74"></a>                        <span class="n">expiry_status</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;âš ï¸ </span><span class="si">{</span><span class="n">days_until_expiry</span><span class="si">}</span><span class="s2"> days remaining - Renew soon!&quot;</span>
</span><span id="__span-6-75"><a id="__codelineno-6-75" name="__codelineno-6-75" href="#__codelineno-6-75"></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="__span-6-76"><a id="__codelineno-6-76" name="__codelineno-6-76" href="#__codelineno-6-76"></a>                        <span class="n">expiry_status</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;ğŸš¨ </span><span class="si">{</span><span class="n">days_until_expiry</span><span class="si">}</span><span class="s2"> days remaining - URGENT!&quot;</span>
</span><span id="__span-6-77"><a id="__codelineno-6-77" name="__codelineno-6-77" href="#__codelineno-6-77"></a>
</span><span id="__span-6-78"><a id="__codelineno-6-78" name="__codelineno-6-78" href="#__codelineno-6-78"></a>                    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Certificate Expiry: </span><span class="si">{</span><span class="n">expiry_status</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-6-79"><a id="__codelineno-6-79" name="__codelineno-6-79" href="#__codelineno-6-79"></a>
</span><span id="__span-6-80"><a id="__codelineno-6-80" name="__codelineno-6-80" href="#__codelineno-6-80"></a>                    <span class="c1"># Security score</span>
</span><span id="__span-6-81"><a id="__codelineno-6-81" name="__codelineno-6-81" href="#__codelineno-6-81"></a>                    <span class="n">security_score</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">calculate_ssl_score</span><span class="p">(</span><span class="n">version</span><span class="p">,</span> <span class="n">cipher</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">days_until_expiry</span><span class="p">)</span>
</span><span id="__span-6-82"><a id="__codelineno-6-82" name="__codelineno-6-82" href="#__codelineno-6-82"></a>                    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">ğŸ† Overall Security Score: </span><span class="si">{</span><span class="n">security_score</span><span class="si">}</span><span class="s2">/100&quot;</span><span class="p">)</span>
</span><span id="__span-6-83"><a id="__codelineno-6-83" name="__codelineno-6-83" href="#__codelineno-6-83"></a>
</span><span id="__span-6-84"><a id="__codelineno-6-84" name="__codelineno-6-84" href="#__codelineno-6-84"></a>                    <span class="k">return</span> <span class="p">{</span>
</span><span id="__span-6-85"><a id="__codelineno-6-85" name="__codelineno-6-85" href="#__codelineno-6-85"></a>                        <span class="s1">&#39;certificate&#39;</span><span class="p">:</span> <span class="n">ssl_info</span><span class="p">,</span>
</span><span id="__span-6-86"><a id="__codelineno-6-86" name="__codelineno-6-86" href="#__codelineno-6-86"></a>                        <span class="s1">&#39;cipher&#39;</span><span class="p">:</span> <span class="n">cipher</span><span class="p">,</span>
</span><span id="__span-6-87"><a id="__codelineno-6-87" name="__codelineno-6-87" href="#__codelineno-6-87"></a>                        <span class="s1">&#39;version&#39;</span><span class="p">:</span> <span class="n">version</span><span class="p">,</span>
</span><span id="__span-6-88"><a id="__codelineno-6-88" name="__codelineno-6-88" href="#__codelineno-6-88"></a>                        <span class="s1">&#39;security_score&#39;</span><span class="p">:</span> <span class="n">security_score</span><span class="p">,</span>
</span><span id="__span-6-89"><a id="__codelineno-6-89" name="__codelineno-6-89" href="#__codelineno-6-89"></a>                        <span class="s1">&#39;days_until_expiry&#39;</span><span class="p">:</span> <span class="n">days_until_expiry</span>
</span><span id="__span-6-90"><a id="__codelineno-6-90" name="__codelineno-6-90" href="#__codelineno-6-90"></a>                    <span class="p">}</span>
</span><span id="__span-6-91"><a id="__codelineno-6-91" name="__codelineno-6-91" href="#__codelineno-6-91"></a>
</span><span id="__span-6-92"><a id="__codelineno-6-92" name="__codelineno-6-92" href="#__codelineno-6-92"></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="__span-6-93"><a id="__codelineno-6-93" name="__codelineno-6-93" href="#__codelineno-6-93"></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;âŒ SSL analysis failed: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-6-94"><a id="__codelineno-6-94" name="__codelineno-6-94" href="#__codelineno-6-94"></a>            <span class="k">return</span> <span class="kc">None</span>
</span><span id="__span-6-95"><a id="__codelineno-6-95" name="__codelineno-6-95" href="#__codelineno-6-95"></a>
</span><span id="__span-6-96"><a id="__codelineno-6-96" name="__codelineno-6-96" href="#__codelineno-6-96"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">calculate_ssl_score</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tls_version</span><span class="p">,</span> <span class="n">cipher</span><span class="p">,</span> <span class="n">days_until_expiry</span><span class="p">):</span>
</span><span id="__span-6-97"><a id="__codelineno-6-97" name="__codelineno-6-97" href="#__codelineno-6-97"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Calculate overall SSL security score&quot;&quot;&quot;</span>
</span><span id="__span-6-98"><a id="__codelineno-6-98" name="__codelineno-6-98" href="#__codelineno-6-98"></a>
</span><span id="__span-6-99"><a id="__codelineno-6-99" name="__codelineno-6-99" href="#__codelineno-6-99"></a>        <span class="n">score</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="__span-6-100"><a id="__codelineno-6-100" name="__codelineno-6-100" href="#__codelineno-6-100"></a>
</span><span id="__span-6-101"><a id="__codelineno-6-101" name="__codelineno-6-101" href="#__codelineno-6-101"></a>        <span class="c1"># TLS version scoring</span>
</span><span id="__span-6-102"><a id="__codelineno-6-102" name="__codelineno-6-102" href="#__codelineno-6-102"></a>        <span class="n">version_scores</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="__span-6-103"><a id="__codelineno-6-103" name="__codelineno-6-103" href="#__codelineno-6-103"></a>            <span class="s1">&#39;TLSv1.3&#39;</span><span class="p">:</span> <span class="mi">40</span><span class="p">,</span>
</span><span id="__span-6-104"><a id="__codelineno-6-104" name="__codelineno-6-104" href="#__codelineno-6-104"></a>            <span class="s1">&#39;TLSv1.2&#39;</span><span class="p">:</span> <span class="mi">35</span><span class="p">,</span>
</span><span id="__span-6-105"><a id="__codelineno-6-105" name="__codelineno-6-105" href="#__codelineno-6-105"></a>            <span class="s1">&#39;TLSv1.1&#39;</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span>
</span><span id="__span-6-106"><a id="__codelineno-6-106" name="__codelineno-6-106" href="#__codelineno-6-106"></a>            <span class="s1">&#39;TLSv1&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
</span><span id="__span-6-107"><a id="__codelineno-6-107" name="__codelineno-6-107" href="#__codelineno-6-107"></a>            <span class="s1">&#39;SSLv3&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
</span><span id="__span-6-108"><a id="__codelineno-6-108" name="__codelineno-6-108" href="#__codelineno-6-108"></a>            <span class="s1">&#39;SSLv2&#39;</span><span class="p">:</span> <span class="mi">0</span>
</span><span id="__span-6-109"><a id="__codelineno-6-109" name="__codelineno-6-109" href="#__codelineno-6-109"></a>        <span class="p">}</span>
</span><span id="__span-6-110"><a id="__codelineno-6-110" name="__codelineno-6-110" href="#__codelineno-6-110"></a>        <span class="n">score</span> <span class="o">+=</span> <span class="n">version_scores</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">tls_version</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</span><span id="__span-6-111"><a id="__codelineno-6-111" name="__codelineno-6-111" href="#__codelineno-6-111"></a>
</span><span id="__span-6-112"><a id="__codelineno-6-112" name="__codelineno-6-112" href="#__codelineno-6-112"></a>        <span class="c1"># Cipher strength scoring</span>
</span><span id="__span-6-113"><a id="__codelineno-6-113" name="__codelineno-6-113" href="#__codelineno-6-113"></a>        <span class="k">if</span> <span class="s1">&#39;AES256&#39;</span> <span class="ow">in</span> <span class="n">cipher</span> <span class="ow">and</span> <span class="s1">&#39;GCM&#39;</span> <span class="ow">in</span> <span class="n">cipher</span><span class="p">:</span>
</span><span id="__span-6-114"><a id="__codelineno-6-114" name="__codelineno-6-114" href="#__codelineno-6-114"></a>            <span class="n">score</span> <span class="o">+=</span> <span class="mi">35</span>
</span><span id="__span-6-115"><a id="__codelineno-6-115" name="__codelineno-6-115" href="#__codelineno-6-115"></a>        <span class="k">elif</span> <span class="s1">&#39;AES128&#39;</span> <span class="ow">in</span> <span class="n">cipher</span> <span class="ow">and</span> <span class="s1">&#39;GCM&#39;</span> <span class="ow">in</span> <span class="n">cipher</span><span class="p">:</span>
</span><span id="__span-6-116"><a id="__codelineno-6-116" name="__codelineno-6-116" href="#__codelineno-6-116"></a>            <span class="n">score</span> <span class="o">+=</span> <span class="mi">30</span>
</span><span id="__span-6-117"><a id="__codelineno-6-117" name="__codelineno-6-117" href="#__codelineno-6-117"></a>        <span class="k">elif</span> <span class="s1">&#39;AES&#39;</span> <span class="ow">in</span> <span class="n">cipher</span><span class="p">:</span>
</span><span id="__span-6-118"><a id="__codelineno-6-118" name="__codelineno-6-118" href="#__codelineno-6-118"></a>            <span class="n">score</span> <span class="o">+=</span> <span class="mi">25</span>
</span><span id="__span-6-119"><a id="__codelineno-6-119" name="__codelineno-6-119" href="#__codelineno-6-119"></a>        <span class="k">elif</span> <span class="s1">&#39;RC4&#39;</span> <span class="ow">in</span> <span class="n">cipher</span><span class="p">:</span>
</span><span id="__span-6-120"><a id="__codelineno-6-120" name="__codelineno-6-120" href="#__codelineno-6-120"></a>            <span class="n">score</span> <span class="o">+=</span> <span class="mi">5</span>  <span class="c1"># Very weak</span>
</span><span id="__span-6-121"><a id="__codelineno-6-121" name="__codelineno-6-121" href="#__codelineno-6-121"></a>
</span><span id="__span-6-122"><a id="__codelineno-6-122" name="__codelineno-6-122" href="#__codelineno-6-122"></a>        <span class="c1"># Certificate validity scoring</span>
</span><span id="__span-6-123"><a id="__codelineno-6-123" name="__codelineno-6-123" href="#__codelineno-6-123"></a>        <span class="k">if</span> <span class="n">days_until_expiry</span> <span class="o">&gt;</span> <span class="mi">30</span><span class="p">:</span>
</span><span id="__span-6-124"><a id="__codelineno-6-124" name="__codelineno-6-124" href="#__codelineno-6-124"></a>            <span class="n">score</span> <span class="o">+=</span> <span class="mi">25</span>
</span><span id="__span-6-125"><a id="__codelineno-6-125" name="__codelineno-6-125" href="#__codelineno-6-125"></a>        <span class="k">elif</span> <span class="n">days_until_expiry</span> <span class="o">&gt;</span> <span class="mi">7</span><span class="p">:</span>
</span><span id="__span-6-126"><a id="__codelineno-6-126" name="__codelineno-6-126" href="#__codelineno-6-126"></a>            <span class="n">score</span> <span class="o">+=</span> <span class="mi">15</span>
</span><span id="__span-6-127"><a id="__codelineno-6-127" name="__codelineno-6-127" href="#__codelineno-6-127"></a>        <span class="k">elif</span> <span class="n">days_until_expiry</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="__span-6-128"><a id="__codelineno-6-128" name="__codelineno-6-128" href="#__codelineno-6-128"></a>            <span class="n">score</span> <span class="o">+=</span> <span class="mi">5</span>
</span><span id="__span-6-129"><a id="__codelineno-6-129" name="__codelineno-6-129" href="#__codelineno-6-129"></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="__span-6-130"><a id="__codelineno-6-130" name="__codelineno-6-130" href="#__codelineno-6-130"></a>            <span class="n">score</span> <span class="o">+=</span> <span class="mi">0</span>  <span class="c1"># Expired certificate</span>
</span><span id="__span-6-131"><a id="__codelineno-6-131" name="__codelineno-6-131" href="#__codelineno-6-131"></a>
</span><span id="__span-6-132"><a id="__codelineno-6-132" name="__codelineno-6-132" href="#__codelineno-6-132"></a>        <span class="k">return</span> <span class="nb">min</span><span class="p">(</span><span class="n">score</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
</span><span id="__span-6-133"><a id="__codelineno-6-133" name="__codelineno-6-133" href="#__codelineno-6-133"></a>
</span><span id="__span-6-134"><a id="__codelineno-6-134" name="__codelineno-6-134" href="#__codelineno-6-134"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">demonstrate_encryption_decryption</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-6-135"><a id="__codelineno-6-135" name="__codelineno-6-135" href="#__codelineno-6-135"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Interactive encryption/decryption demonstration&quot;&quot;&quot;</span>
</span><span id="__span-6-136"><a id="__codelineno-6-136" name="__codelineno-6-136" href="#__codelineno-6-136"></a>
</span><span id="__span-6-137"><a id="__codelineno-6-137" name="__codelineno-6-137" href="#__codelineno-6-137"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">ğŸ” ENCRYPTION/DECRYPTION DEMONSTRATION&quot;</span><span class="p">)</span>
</span><span id="__span-6-138"><a id="__codelineno-6-138" name="__codelineno-6-138" href="#__codelineno-6-138"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;=&quot;</span> <span class="o">*</span> <span class="mi">50</span><span class="p">)</span>
</span><span id="__span-6-139"><a id="__codelineno-6-139" name="__codelineno-6-139" href="#__codelineno-6-139"></a>
</span><span id="__span-6-140"><a id="__codelineno-6-140" name="__codelineno-6-140" href="#__codelineno-6-140"></a>        <span class="c1"># Generate RSA key pair (simplified for demo)</span>
</span><span id="__span-6-141"><a id="__codelineno-6-141" name="__codelineno-6-141" href="#__codelineno-6-141"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;1ï¸âƒ£ Generating RSA Key Pair...&quot;</span><span class="p">)</span>
</span><span id="__span-6-142"><a id="__codelineno-6-142" name="__codelineno-6-142" href="#__codelineno-6-142"></a>
</span><span id="__span-6-143"><a id="__codelineno-6-143" name="__codelineno-6-143" href="#__codelineno-6-143"></a>        <span class="c1"># Simulate key generation (normally much more complex)</span>
</span><span id="__span-6-144"><a id="__codelineno-6-144" name="__codelineno-6-144" href="#__codelineno-6-144"></a>        <span class="n">plaintext_message</span> <span class="o">=</span> <span class="s2">&quot;Hello, this is a secret message from the web app!&quot;</span>
</span><span id="__span-6-145"><a id="__codelineno-6-145" name="__codelineno-6-145" href="#__codelineno-6-145"></a>
</span><span id="__span-6-146"><a id="__codelineno-6-146" name="__codelineno-6-146" href="#__codelineno-6-146"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Original message: &#39;</span><span class="si">{</span><span class="n">plaintext_message</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
</span><span id="__span-6-147"><a id="__codelineno-6-147" name="__codelineno-6-147" href="#__codelineno-6-147"></a>
</span><span id="__span-6-148"><a id="__codelineno-6-148" name="__codelineno-6-148" href="#__codelineno-6-148"></a>        <span class="c1"># Simple Caesar cipher for demonstration (NOT for real use!)</span>
</span><span id="__span-6-149"><a id="__codelineno-6-149" name="__codelineno-6-149" href="#__codelineno-6-149"></a>        <span class="k">def</span><span class="w"> </span><span class="nf">simple_encrypt</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">shift</span><span class="o">=</span><span class="mi">13</span><span class="p">):</span>
</span><span id="__span-6-150"><a id="__codelineno-6-150" name="__codelineno-6-150" href="#__codelineno-6-150"></a>            <span class="n">encrypted</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="__span-6-151"><a id="__codelineno-6-151" name="__codelineno-6-151" href="#__codelineno-6-151"></a>            <span class="k">for</span> <span class="n">char</span> <span class="ow">in</span> <span class="n">text</span><span class="p">:</span>
</span><span id="__span-6-152"><a id="__codelineno-6-152" name="__codelineno-6-152" href="#__codelineno-6-152"></a>                <span class="k">if</span> <span class="n">char</span><span class="o">.</span><span class="n">isalpha</span><span class="p">():</span>
</span><span id="__span-6-153"><a id="__codelineno-6-153" name="__codelineno-6-153" href="#__codelineno-6-153"></a>                    <span class="n">ascii_offset</span> <span class="o">=</span> <span class="mi">65</span> <span class="k">if</span> <span class="n">char</span><span class="o">.</span><span class="n">isupper</span><span class="p">()</span> <span class="k">else</span> <span class="mi">97</span>
</span><span id="__span-6-154"><a id="__codelineno-6-154" name="__codelineno-6-154" href="#__codelineno-6-154"></a>                    <span class="n">encrypted</span> <span class="o">+=</span> <span class="nb">chr</span><span class="p">((</span><span class="nb">ord</span><span class="p">(</span><span class="n">char</span><span class="p">)</span> <span class="o">-</span> <span class="n">ascii_offset</span> <span class="o">+</span> <span class="n">shift</span><span class="p">)</span> <span class="o">%</span> <span class="mi">26</span> <span class="o">+</span> <span class="n">ascii_offset</span><span class="p">)</span>
</span><span id="__span-6-155"><a id="__codelineno-6-155" name="__codelineno-6-155" href="#__codelineno-6-155"></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="__span-6-156"><a id="__codelineno-6-156" name="__codelineno-6-156" href="#__codelineno-6-156"></a>                    <span class="n">encrypted</span> <span class="o">+=</span> <span class="n">char</span>
</span><span id="__span-6-157"><a id="__codelineno-6-157" name="__codelineno-6-157" href="#__codelineno-6-157"></a>            <span class="k">return</span> <span class="n">encrypted</span>
</span><span id="__span-6-158"><a id="__codelineno-6-158" name="__codelineno-6-158" href="#__codelineno-6-158"></a>
</span><span id="__span-6-159"><a id="__codelineno-6-159" name="__codelineno-6-159" href="#__codelineno-6-159"></a>        <span class="k">def</span><span class="w"> </span><span class="nf">simple_decrypt</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">shift</span><span class="o">=</span><span class="mi">13</span><span class="p">):</span>
</span><span id="__span-6-160"><a id="__codelineno-6-160" name="__codelineno-6-160" href="#__codelineno-6-160"></a>            <span class="k">return</span> <span class="n">simple_encrypt</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="o">-</span><span class="n">shift</span><span class="p">)</span>
</span><span id="__span-6-161"><a id="__codelineno-6-161" name="__codelineno-6-161" href="#__codelineno-6-161"></a>
</span><span id="__span-6-162"><a id="__codelineno-6-162" name="__codelineno-6-162" href="#__codelineno-6-162"></a>        <span class="c1"># Demonstrate encryption</span>
</span><span id="__span-6-163"><a id="__codelineno-6-163" name="__codelineno-6-163" href="#__codelineno-6-163"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">2ï¸âƒ£ Encrypting message...&quot;</span><span class="p">)</span>
</span><span id="__span-6-164"><a id="__codelineno-6-164" name="__codelineno-6-164" href="#__codelineno-6-164"></a>        <span class="n">encrypted_message</span> <span class="o">=</span> <span class="n">simple_encrypt</span><span class="p">(</span><span class="n">plaintext_message</span><span class="p">)</span>
</span><span id="__span-6-165"><a id="__codelineno-6-165" name="__codelineno-6-165" href="#__codelineno-6-165"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Encrypted (ciphertext): &#39;</span><span class="si">{</span><span class="n">encrypted_message</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
</span><span id="__span-6-166"><a id="__codelineno-6-166" name="__codelineno-6-166" href="#__codelineno-6-166"></a>
</span><span id="__span-6-167"><a id="__codelineno-6-167" name="__codelineno-6-167" href="#__codelineno-6-167"></a>        <span class="c1"># Demonstrate hash for integrity</span>
</span><span id="__span-6-168"><a id="__codelineno-6-168" name="__codelineno-6-168" href="#__codelineno-6-168"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">3ï¸âƒ£ Creating hash for integrity check...&quot;</span><span class="p">)</span>
</span><span id="__span-6-169"><a id="__codelineno-6-169" name="__codelineno-6-169" href="#__codelineno-6-169"></a>        <span class="n">message_hash</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">(</span><span class="n">plaintext_message</span><span class="o">.</span><span class="n">encode</span><span class="p">())</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">()</span>
</span><span id="__span-6-170"><a id="__codelineno-6-170" name="__codelineno-6-170" href="#__codelineno-6-170"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   SHA-256 hash: </span><span class="si">{</span><span class="n">message_hash</span><span class="p">[:</span><span class="mi">32</span><span class="p">]</span><span class="si">}</span><span class="s2">...&quot;</span><span class="p">)</span>
</span><span id="__span-6-171"><a id="__codelineno-6-171" name="__codelineno-6-171" href="#__codelineno-6-171"></a>
</span><span id="__span-6-172"><a id="__codelineno-6-172" name="__codelineno-6-172" href="#__codelineno-6-172"></a>        <span class="c1"># Demonstrate decryption</span>
</span><span id="__span-6-173"><a id="__codelineno-6-173" name="__codelineno-6-173" href="#__codelineno-6-173"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">4ï¸âƒ£ Decrypting message...&quot;</span><span class="p">)</span>
</span><span id="__span-6-174"><a id="__codelineno-6-174" name="__codelineno-6-174" href="#__codelineno-6-174"></a>        <span class="n">decrypted_message</span> <span class="o">=</span> <span class="n">simple_decrypt</span><span class="p">(</span><span class="n">encrypted_message</span><span class="p">)</span>
</span><span id="__span-6-175"><a id="__codelineno-6-175" name="__codelineno-6-175" href="#__codelineno-6-175"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Decrypted message: &#39;</span><span class="si">{</span><span class="n">decrypted_message</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
</span><span id="__span-6-176"><a id="__codelineno-6-176" name="__codelineno-6-176" href="#__codelineno-6-176"></a>
</span><span id="__span-6-177"><a id="__codelineno-6-177" name="__codelineno-6-177" href="#__codelineno-6-177"></a>        <span class="c1"># Verify integrity</span>
</span><span id="__span-6-178"><a id="__codelineno-6-178" name="__codelineno-6-178" href="#__codelineno-6-178"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">5ï¸âƒ£ Verifying integrity...&quot;</span><span class="p">)</span>
</span><span id="__span-6-179"><a id="__codelineno-6-179" name="__codelineno-6-179" href="#__codelineno-6-179"></a>        <span class="n">new_hash</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">(</span><span class="n">decrypted_message</span><span class="o">.</span><span class="n">encode</span><span class="p">())</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">()</span>
</span><span id="__span-6-180"><a id="__codelineno-6-180" name="__codelineno-6-180" href="#__codelineno-6-180"></a>        <span class="k">if</span> <span class="n">message_hash</span> <span class="o">==</span> <span class="n">new_hash</span><span class="p">:</span>
</span><span id="__span-6-181"><a id="__codelineno-6-181" name="__codelineno-6-181" href="#__codelineno-6-181"></a>            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;   âœ… Message integrity verified!&quot;</span><span class="p">)</span>
</span><span id="__span-6-182"><a id="__codelineno-6-182" name="__codelineno-6-182" href="#__codelineno-6-182"></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="__span-6-183"><a id="__codelineno-6-183" name="__codelineno-6-183" href="#__codelineno-6-183"></a>            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;   âŒ Message integrity compromised!&quot;</span><span class="p">)</span>
</span><span id="__span-6-184"><a id="__codelineno-6-184" name="__codelineno-6-184" href="#__codelineno-6-184"></a>
</span><span id="__span-6-185"><a id="__codelineno-6-185" name="__codelineno-6-185" href="#__codelineno-6-185"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">ğŸ’¡ Real-world encryption uses:&quot;</span><span class="p">)</span>
</span><span id="__span-6-186"><a id="__codelineno-6-186" name="__codelineno-6-186" href="#__codelineno-6-186"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;   â€¢ AES-256 for symmetric encryption&quot;</span><span class="p">)</span>
</span><span id="__span-6-187"><a id="__codelineno-6-187" name="__codelineno-6-187" href="#__codelineno-6-187"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;   â€¢ RSA-2048+ or ECC for key exchange&quot;</span><span class="p">)</span>
</span><span id="__span-6-188"><a id="__codelineno-6-188" name="__codelineno-6-188" href="#__codelineno-6-188"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;   â€¢ SHA-256+ for hashing&quot;</span><span class="p">)</span>
</span><span id="__span-6-189"><a id="__codelineno-6-189" name="__codelineno-6-189" href="#__codelineno-6-189"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;   â€¢ HMAC for message authentication&quot;</span><span class="p">)</span>
</span><span id="__span-6-190"><a id="__codelineno-6-190" name="__codelineno-6-190" href="#__codelineno-6-190"></a>
</span><span id="__span-6-191"><a id="__codelineno-6-191" name="__codelineno-6-191" href="#__codelineno-6-191"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">web_security_best_practices</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-6-192"><a id="__codelineno-6-192" name="__codelineno-6-192" href="#__codelineno-6-192"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Comprehensive web security implementation guide&quot;&quot;&quot;</span>
</span><span id="__span-6-193"><a id="__codelineno-6-193" name="__codelineno-6-193" href="#__codelineno-6-193"></a>
</span><span id="__span-6-194"><a id="__codelineno-6-194" name="__codelineno-6-194" href="#__codelineno-6-194"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">ğŸ›¡ï¸ WEB SECURITY BEST PRACTICES GUIDE&quot;</span><span class="p">)</span>
</span><span id="__span-6-195"><a id="__codelineno-6-195" name="__codelineno-6-195" href="#__codelineno-6-195"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;=&quot;</span> <span class="o">*</span> <span class="mi">60</span><span class="p">)</span>
</span><span id="__span-6-196"><a id="__codelineno-6-196" name="__codelineno-6-196" href="#__codelineno-6-196"></a>
</span><span id="__span-6-197"><a id="__codelineno-6-197" name="__codelineno-6-197" href="#__codelineno-6-197"></a>        <span class="n">practices</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="__span-6-198"><a id="__codelineno-6-198" name="__codelineno-6-198" href="#__codelineno-6-198"></a>            <span class="s2">&quot;ğŸ”’ HTTPS Everywhere&quot;</span><span class="p">:</span> <span class="p">[</span>
</span><span id="__span-6-199"><a id="__codelineno-6-199" name="__codelineno-6-199" href="#__codelineno-6-199"></a>                <span class="s2">&quot;Force HTTPS redirects for all pages&quot;</span><span class="p">,</span>
</span><span id="__span-6-200"><a id="__codelineno-6-200" name="__codelineno-6-200" href="#__codelineno-6-200"></a>                <span class="s2">&quot;Use HSTS (HTTP Strict Transport Security)&quot;</span><span class="p">,</span>
</span><span id="__span-6-201"><a id="__codelineno-6-201" name="__codelineno-6-201" href="#__codelineno-6-201"></a>                <span class="s2">&quot;Implement certificate pinning for APIs&quot;</span><span class="p">,</span>
</span><span id="__span-6-202"><a id="__codelineno-6-202" name="__codelineno-6-202" href="#__codelineno-6-202"></a>                <span class="s2">&quot;Regular certificate renewal automation&quot;</span>
</span><span id="__span-6-203"><a id="__codelineno-6-203" name="__codelineno-6-203" href="#__codelineno-6-203"></a>            <span class="p">],</span>
</span><span id="__span-6-204"><a id="__codelineno-6-204" name="__codelineno-6-204" href="#__codelineno-6-204"></a>            <span class="s2">&quot;ğŸ”‘ Authentication &amp; Authorization&quot;</span><span class="p">:</span> <span class="p">[</span>
</span><span id="__span-6-205"><a id="__codelineno-6-205" name="__codelineno-6-205" href="#__codelineno-6-205"></a>                <span class="s2">&quot;Multi-factor authentication (MFA)&quot;</span><span class="p">,</span>
</span><span id="__span-6-206"><a id="__codelineno-6-206" name="__codelineno-6-206" href="#__codelineno-6-206"></a>                <span class="s2">&quot;OAuth 2.0 / OpenID Connect for third-party auth&quot;</span><span class="p">,</span>
</span><span id="__span-6-207"><a id="__codelineno-6-207" name="__codelineno-6-207" href="#__codelineno-6-207"></a>                <span class="s2">&quot;Strong password policies&quot;</span><span class="p">,</span>
</span><span id="__span-6-208"><a id="__codelineno-6-208" name="__codelineno-6-208" href="#__codelineno-6-208"></a>                <span class="s2">&quot;Session management with secure cookies&quot;</span>
</span><span id="__span-6-209"><a id="__codelineno-6-209" name="__codelineno-6-209" href="#__codelineno-6-209"></a>            <span class="p">],</span>
</span><span id="__span-6-210"><a id="__codelineno-6-210" name="__codelineno-6-210" href="#__codelineno-6-210"></a>            <span class="s2">&quot;ğŸ›¡ï¸ Input Validation &amp; Sanitization&quot;</span><span class="p">:</span> <span class="p">[</span>
</span><span id="__span-6-211"><a id="__codelineno-6-211" name="__codelineno-6-211" href="#__codelineno-6-211"></a>                <span class="s2">&quot;Validate all user inputs server-side&quot;</span><span class="p">,</span>
</span><span id="__span-6-212"><a id="__codelineno-6-212" name="__codelineno-6-212" href="#__codelineno-6-212"></a>                <span class="s2">&quot;Use parameterized queries (prevent SQL injection)&quot;</span><span class="p">,</span>
</span><span id="__span-6-213"><a id="__codelineno-6-213" name="__codelineno-6-213" href="#__codelineno-6-213"></a>                <span class="s2">&quot;Implement Content Security Policy (CSP)&quot;</span><span class="p">,</span>
</span><span id="__span-6-214"><a id="__codelineno-6-214" name="__codelineno-6-214" href="#__codelineno-6-214"></a>                <span class="s2">&quot;XSS protection with proper encoding&quot;</span>
</span><span id="__span-6-215"><a id="__codelineno-6-215" name="__codelineno-6-215" href="#__codelineno-6-215"></a>            <span class="p">],</span>
</span><span id="__span-6-216"><a id="__codelineno-6-216" name="__codelineno-6-216" href="#__codelineno-6-216"></a>            <span class="s2">&quot;ğŸ“Š Security Headers&quot;</span><span class="p">:</span> <span class="p">[</span>
</span><span id="__span-6-217"><a id="__codelineno-6-217" name="__codelineno-6-217" href="#__codelineno-6-217"></a>                <span class="s2">&quot;X-Content-Type-Options: nosniff&quot;</span><span class="p">,</span>
</span><span id="__span-6-218"><a id="__codelineno-6-218" name="__codelineno-6-218" href="#__codelineno-6-218"></a>                <span class="s2">&quot;X-Frame-Options: DENY&quot;</span><span class="p">,</span>
</span><span id="__span-6-219"><a id="__codelineno-6-219" name="__codelineno-6-219" href="#__codelineno-6-219"></a>                <span class="s2">&quot;X-XSS-Protection: 1; mode=block&quot;</span><span class="p">,</span>
</span><span id="__span-6-220"><a id="__codelineno-6-220" name="__codelineno-6-220" href="#__codelineno-6-220"></a>                <span class="s2">&quot;Referrer-Policy: strict-origin-when-cross-origin&quot;</span>
</span><span id="__span-6-221"><a id="__codelineno-6-221" name="__codelineno-6-221" href="#__codelineno-6-221"></a>            <span class="p">],</span>
</span><span id="__span-6-222"><a id="__codelineno-6-222" name="__codelineno-6-222" href="#__codelineno-6-222"></a>            <span class="s2">&quot;ğŸ” Data Protection&quot;</span><span class="p">:</span> <span class="p">[</span>
</span><span id="__span-6-223"><a id="__codelineno-6-223" name="__codelineno-6-223" href="#__codelineno-6-223"></a>                <span class="s2">&quot;Encrypt sensitive data at rest&quot;</span><span class="p">,</span>
</span><span id="__span-6-224"><a id="__codelineno-6-224" name="__codelineno-6-224" href="#__codelineno-6-224"></a>                <span class="s2">&quot;Use secure key management&quot;</span><span class="p">,</span>
</span><span id="__span-6-225"><a id="__codelineno-6-225" name="__codelineno-6-225" href="#__codelineno-6-225"></a>                <span class="s2">&quot;Implement proper data retention policies&quot;</span><span class="p">,</span>
</span><span id="__span-6-226"><a id="__codelineno-6-226" name="__codelineno-6-226" href="#__codelineno-6-226"></a>                <span class="s2">&quot;Regular security audits and penetration testing&quot;</span>
</span><span id="__span-6-227"><a id="__codelineno-6-227" name="__codelineno-6-227" href="#__codelineno-6-227"></a>            <span class="p">]</span>
</span><span id="__span-6-228"><a id="__codelineno-6-228" name="__codelineno-6-228" href="#__codelineno-6-228"></a>        <span class="p">}</span>
</span><span id="__span-6-229"><a id="__codelineno-6-229" name="__codelineno-6-229" href="#__codelineno-6-229"></a>
</span><span id="__span-6-230"><a id="__codelineno-6-230" name="__codelineno-6-230" href="#__codelineno-6-230"></a>        <span class="k">for</span> <span class="n">category</span><span class="p">,</span> <span class="n">items</span> <span class="ow">in</span> <span class="n">practices</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="__span-6-231"><a id="__codelineno-6-231" name="__codelineno-6-231" href="#__codelineno-6-231"></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="si">{</span><span class="n">category</span><span class="si">}</span><span class="s2">:&quot;</span><span class="p">)</span>
</span><span id="__span-6-232"><a id="__codelineno-6-232" name="__codelineno-6-232" href="#__codelineno-6-232"></a>            <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">items</span><span class="p">:</span>
</span><span id="__span-6-233"><a id="__codelineno-6-233" name="__codelineno-6-233" href="#__codelineno-6-233"></a>                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   âœ… </span><span class="si">{</span><span class="n">item</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-6-234"><a id="__codelineno-6-234" name="__codelineno-6-234" href="#__codelineno-6-234"></a>
</span><span id="__span-6-235"><a id="__codelineno-6-235" name="__codelineno-6-235" href="#__codelineno-6-235"></a>        <span class="k">return</span> <span class="n">practices</span>
</span><span id="__span-6-236"><a id="__codelineno-6-236" name="__codelineno-6-236" href="#__codelineno-6-236"></a>
</span><span id="__span-6-237"><a id="__codelineno-6-237" name="__codelineno-6-237" href="#__codelineno-6-237"></a><span class="c1"># Comprehensive SSL security analysis</span>
</span><span id="__span-6-238"><a id="__codelineno-6-238" name="__codelineno-6-238" href="#__codelineno-6-238"></a><span class="n">analyzer</span> <span class="o">=</span> <span class="n">SSLSecurityAnalyzer</span><span class="p">()</span>
</span><span id="__span-6-239"><a id="__codelineno-6-239" name="__codelineno-6-239" href="#__codelineno-6-239"></a>
</span><span id="__span-6-240"><a id="__codelineno-6-240" name="__codelineno-6-240" href="#__codelineno-6-240"></a><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;ğŸ”’ COMPREHENSIVE WEB SECURITY ANALYSIS&quot;</span><span class="p">)</span>
</span><span id="__span-6-241"><a id="__codelineno-6-241" name="__codelineno-6-241" href="#__codelineno-6-241"></a><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Let&#39;s analyze real SSL certificates and security!&quot;</span><span class="p">)</span>
</span><span id="__span-6-242"><a id="__codelineno-6-242" name="__codelineno-6-242" href="#__codelineno-6-242"></a><span class="nb">print</span><span class="p">()</span>
</span><span id="__span-6-243"><a id="__codelineno-6-243" name="__codelineno-6-243" href="#__codelineno-6-243"></a>
</span><span id="__span-6-244"><a id="__codelineno-6-244" name="__codelineno-6-244" href="#__codelineno-6-244"></a><span class="c1"># Test popular secure websites</span>
</span><span id="__span-6-245"><a id="__codelineno-6-245" name="__codelineno-6-245" href="#__codelineno-6-245"></a><span class="n">secure_sites</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="__span-6-246"><a id="__codelineno-6-246" name="__codelineno-6-246" href="#__codelineno-6-246"></a>    <span class="s1">&#39;github.com&#39;</span><span class="p">,</span>
</span><span id="__span-6-247"><a id="__codelineno-6-247" name="__codelineno-6-247" href="#__codelineno-6-247"></a>    <span class="s1">&#39;google.com&#39;</span><span class="p">,</span> 
</span><span id="__span-6-248"><a id="__codelineno-6-248" name="__codelineno-6-248" href="#__codelineno-6-248"></a>    <span class="s1">&#39;stackoverflow.com&#39;</span>
</span><span id="__span-6-249"><a id="__codelineno-6-249" name="__codelineno-6-249" href="#__codelineno-6-249"></a><span class="p">]</span>
</span><span id="__span-6-250"><a id="__codelineno-6-250" name="__codelineno-6-250" href="#__codelineno-6-250"></a>
</span><span id="__span-6-251"><a id="__codelineno-6-251" name="__codelineno-6-251" href="#__codelineno-6-251"></a><span class="n">ssl_results</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="__span-6-252"><a id="__codelineno-6-252" name="__codelineno-6-252" href="#__codelineno-6-252"></a><span class="k">for</span> <span class="n">site</span> <span class="ow">in</span> <span class="n">secure_sites</span><span class="p">:</span>
</span><span id="__span-6-253"><a id="__codelineno-6-253" name="__codelineno-6-253" href="#__codelineno-6-253"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="si">{</span><span class="s1">&#39;=&#39;</span><span class="o">*</span><span class="mi">20</span><span class="si">}</span><span class="s2"> ANALYZING </span><span class="si">{</span><span class="n">site</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="s1">&#39;=&#39;</span><span class="o">*</span><span class="mi">20</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-6-254"><a id="__codelineno-6-254" name="__codelineno-6-254" href="#__codelineno-6-254"></a>    <span class="n">ssl_results</span><span class="p">[</span><span class="n">site</span><span class="p">]</span> <span class="o">=</span> <span class="n">analyzer</span><span class="o">.</span><span class="n">analyze_ssl_certificate</span><span class="p">(</span><span class="n">site</span><span class="p">)</span>
</span><span id="__span-6-255"><a id="__codelineno-6-255" name="__codelineno-6-255" href="#__codelineno-6-255"></a>    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>  <span class="c1"># Be nice to servers</span>
</span><span id="__span-6-256"><a id="__codelineno-6-256" name="__codelineno-6-256" href="#__codelineno-6-256"></a>
</span><span id="__span-6-257"><a id="__codelineno-6-257" name="__codelineno-6-257" href="#__codelineno-6-257"></a><span class="c1"># Interactive encryption demonstration</span>
</span><span id="__span-6-258"><a id="__codelineno-6-258" name="__codelineno-6-258" href="#__codelineno-6-258"></a><span class="n">analyzer</span><span class="o">.</span><span class="n">demonstrate_encryption_decryption</span><span class="p">()</span>
</span><span id="__span-6-259"><a id="__codelineno-6-259" name="__codelineno-6-259" href="#__codelineno-6-259"></a>
</span><span id="__span-6-260"><a id="__codelineno-6-260" name="__codelineno-6-260" href="#__codelineno-6-260"></a><span class="c1"># Security best practices</span>
</span><span id="__span-6-261"><a id="__codelineno-6-261" name="__codelineno-6-261" href="#__codelineno-6-261"></a><span class="n">analyzer</span><span class="o">.</span><span class="n">web_security_best_practices</span><span class="p">()</span>
</span></code></pre></div>
</details>
<p><strong>Authentication &amp; Authorization Deep Dive:</strong></p>
<details class="example">
<summary>ğŸ”‘ Web Authentication System - Complete Identity Management</summary>
<div class="language-python highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">hashlib</span>
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="kn">import</span><span class="w"> </span><span class="nn">secrets</span>
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a><span class="kn">import</span><span class="w"> </span><span class="nn">jwt</span>
</span><span id="__span-7-4"><a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a><span class="kn">import</span><span class="w"> </span><span class="nn">time</span>
</span><span id="__span-7-5"><a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a><span class="kn">from</span><span class="w"> </span><span class="nn">datetime</span><span class="w"> </span><span class="kn">import</span> <span class="n">datetime</span><span class="p">,</span> <span class="n">timedelta</span>
</span><span id="__span-7-6"><a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a>
</span><span id="__span-7-7"><a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a><span class="k">class</span><span class="w"> </span><span class="nc">WebAuthenticationSystem</span><span class="p">:</span>
</span><span id="__span-7-8"><a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Complete web authentication and authorization system&quot;&quot;&quot;</span>
</span><span id="__span-7-9"><a id="__codelineno-7-9" name="__codelineno-7-9" href="#__codelineno-7-9"></a>
</span><span id="__span-7-10"><a id="__codelineno-7-10" name="__codelineno-7-10" href="#__codelineno-7-10"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-7-11"><a id="__codelineno-7-11" name="__codelineno-7-11" href="#__codelineno-7-11"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">users</span> <span class="o">=</span> <span class="p">{}</span>  <span class="c1"># In-memory user store (use database in production)</span>
</span><span id="__span-7-12"><a id="__codelineno-7-12" name="__codelineno-7-12" href="#__codelineno-7-12"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">sessions</span> <span class="o">=</span> <span class="p">{}</span>  <span class="c1"># Active sessions</span>
</span><span id="__span-7-13"><a id="__codelineno-7-13" name="__codelineno-7-13" href="#__codelineno-7-13"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">failed_attempts</span> <span class="o">=</span> <span class="p">{}</span>  <span class="c1"># Rate limiting</span>
</span><span id="__span-7-14"><a id="__codelineno-7-14" name="__codelineno-7-14" href="#__codelineno-7-14"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">jwt_secret</span> <span class="o">=</span> <span class="n">secrets</span><span class="o">.</span><span class="n">token_urlsafe</span><span class="p">(</span><span class="mi">32</span><span class="p">)</span>
</span><span id="__span-7-15"><a id="__codelineno-7-15" name="__codelineno-7-15" href="#__codelineno-7-15"></a>
</span><span id="__span-7-16"><a id="__codelineno-7-16" name="__codelineno-7-16" href="#__codelineno-7-16"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">secure_password_hash</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">password</span><span class="p">,</span> <span class="n">salt</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="__span-7-17"><a id="__codelineno-7-17" name="__codelineno-7-17" href="#__codelineno-7-17"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Secure password hashing with salt&quot;&quot;&quot;</span>
</span><span id="__span-7-18"><a id="__codelineno-7-18" name="__codelineno-7-18" href="#__codelineno-7-18"></a>
</span><span id="__span-7-19"><a id="__codelineno-7-19" name="__codelineno-7-19" href="#__codelineno-7-19"></a>        <span class="k">if</span> <span class="n">salt</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="__span-7-20"><a id="__codelineno-7-20" name="__codelineno-7-20" href="#__codelineno-7-20"></a>            <span class="n">salt</span> <span class="o">=</span> <span class="n">secrets</span><span class="o">.</span><span class="n">token_urlsafe</span><span class="p">(</span><span class="mi">16</span><span class="p">)</span>
</span><span id="__span-7-21"><a id="__codelineno-7-21" name="__codelineno-7-21" href="#__codelineno-7-21"></a>
</span><span id="__span-7-22"><a id="__codelineno-7-22" name="__codelineno-7-22" href="#__codelineno-7-22"></a>        <span class="c1"># Use PBKDF2 with SHA-256 (better than plain SHA-256)</span>
</span><span id="__span-7-23"><a id="__codelineno-7-23" name="__codelineno-7-23" href="#__codelineno-7-23"></a>        <span class="n">password_hash</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">pbkdf2_hmac</span><span class="p">(</span>
</span><span id="__span-7-24"><a id="__codelineno-7-24" name="__codelineno-7-24" href="#__codelineno-7-24"></a>            <span class="s1">&#39;sha256&#39;</span><span class="p">,</span>
</span><span id="__span-7-25"><a id="__codelineno-7-25" name="__codelineno-7-25" href="#__codelineno-7-25"></a>            <span class="n">password</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">),</span>
</span><span id="__span-7-26"><a id="__codelineno-7-26" name="__codelineno-7-26" href="#__codelineno-7-26"></a>            <span class="n">salt</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">),</span>
</span><span id="__span-7-27"><a id="__codelineno-7-27" name="__codelineno-7-27" href="#__codelineno-7-27"></a>            <span class="mi">100000</span>  <span class="c1"># 100,000 iterations</span>
</span><span id="__span-7-28"><a id="__codelineno-7-28" name="__codelineno-7-28" href="#__codelineno-7-28"></a>        <span class="p">)</span>
</span><span id="__span-7-29"><a id="__codelineno-7-29" name="__codelineno-7-29" href="#__codelineno-7-29"></a>
</span><span id="__span-7-30"><a id="__codelineno-7-30" name="__codelineno-7-30" href="#__codelineno-7-30"></a>        <span class="k">return</span> <span class="p">{</span>
</span><span id="__span-7-31"><a id="__codelineno-7-31" name="__codelineno-7-31" href="#__codelineno-7-31"></a>            <span class="s1">&#39;hash&#39;</span><span class="p">:</span> <span class="n">password_hash</span><span class="o">.</span><span class="n">hex</span><span class="p">(),</span>
</span><span id="__span-7-32"><a id="__codelineno-7-32" name="__codelineno-7-32" href="#__codelineno-7-32"></a>            <span class="s1">&#39;salt&#39;</span><span class="p">:</span> <span class="n">salt</span><span class="p">,</span>
</span><span id="__span-7-33"><a id="__codelineno-7-33" name="__codelineno-7-33" href="#__codelineno-7-33"></a>            <span class="s1">&#39;algorithm&#39;</span><span class="p">:</span> <span class="s1">&#39;PBKDF2-SHA256&#39;</span><span class="p">,</span>
</span><span id="__span-7-34"><a id="__codelineno-7-34" name="__codelineno-7-34" href="#__codelineno-7-34"></a>            <span class="s1">&#39;iterations&#39;</span><span class="p">:</span> <span class="mi">100000</span>
</span><span id="__span-7-35"><a id="__codelineno-7-35" name="__codelineno-7-35" href="#__codelineno-7-35"></a>        <span class="p">}</span>
</span><span id="__span-7-36"><a id="__codelineno-7-36" name="__codelineno-7-36" href="#__codelineno-7-36"></a>
</span><span id="__span-7-37"><a id="__codelineno-7-37" name="__codelineno-7-37" href="#__codelineno-7-37"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">register_user</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">username</span><span class="p">,</span> <span class="n">password</span><span class="p">,</span> <span class="n">email</span><span class="p">):</span>
</span><span id="__span-7-38"><a id="__codelineno-7-38" name="__codelineno-7-38" href="#__codelineno-7-38"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Secure user registration with validation&quot;&quot;&quot;</span>
</span><span id="__span-7-39"><a id="__codelineno-7-39" name="__codelineno-7-39" href="#__codelineno-7-39"></a>
</span><span id="__span-7-40"><a id="__codelineno-7-40" name="__codelineno-7-40" href="#__codelineno-7-40"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ğŸ‘¤ Registering user: </span><span class="si">{</span><span class="n">username</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-7-41"><a id="__codelineno-7-41" name="__codelineno-7-41" href="#__codelineno-7-41"></a>
</span><span id="__span-7-42"><a id="__codelineno-7-42" name="__codelineno-7-42" href="#__codelineno-7-42"></a>        <span class="c1"># Input validation</span>
</span><span id="__span-7-43"><a id="__codelineno-7-43" name="__codelineno-7-43" href="#__codelineno-7-43"></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">username</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">:</span>
</span><span id="__span-7-44"><a id="__codelineno-7-44" name="__codelineno-7-44" href="#__codelineno-7-44"></a>            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;âŒ Username must be at least 3 characters&quot;</span><span class="p">)</span>
</span><span id="__span-7-45"><a id="__codelineno-7-45" name="__codelineno-7-45" href="#__codelineno-7-45"></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="__span-7-46"><a id="__codelineno-7-46" name="__codelineno-7-46" href="#__codelineno-7-46"></a>
</span><span id="__span-7-47"><a id="__codelineno-7-47" name="__codelineno-7-47" href="#__codelineno-7-47"></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">password</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">8</span><span class="p">:</span>
</span><span id="__span-7-48"><a id="__codelineno-7-48" name="__codelineno-7-48" href="#__codelineno-7-48"></a>            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;âŒ Password must be at least 8 characters&quot;</span><span class="p">)</span>
</span><span id="__span-7-49"><a id="__codelineno-7-49" name="__codelineno-7-49" href="#__codelineno-7-49"></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="__span-7-50"><a id="__codelineno-7-50" name="__codelineno-7-50" href="#__codelineno-7-50"></a>
</span><span id="__span-7-51"><a id="__codelineno-7-51" name="__codelineno-7-51" href="#__codelineno-7-51"></a>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_password_strength</span><span class="p">(</span><span class="n">password</span><span class="p">):</span>
</span><span id="__span-7-52"><a id="__codelineno-7-52" name="__codelineno-7-52" href="#__codelineno-7-52"></a>            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;âŒ Password doesn&#39;t meet strength requirements&quot;</span><span class="p">)</span>
</span><span id="__span-7-53"><a id="__codelineno-7-53" name="__codelineno-7-53" href="#__codelineno-7-53"></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="__span-7-54"><a id="__codelineno-7-54" name="__codelineno-7-54" href="#__codelineno-7-54"></a>
</span><span id="__span-7-55"><a id="__codelineno-7-55" name="__codelineno-7-55" href="#__codelineno-7-55"></a>        <span class="k">if</span> <span class="n">username</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">users</span><span class="p">:</span>
</span><span id="__span-7-56"><a id="__codelineno-7-56" name="__codelineno-7-56" href="#__codelineno-7-56"></a>            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;âŒ Username already exists&quot;</span><span class="p">)</span>
</span><span id="__span-7-57"><a id="__codelineno-7-57" name="__codelineno-7-57" href="#__codelineno-7-57"></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="__span-7-58"><a id="__codelineno-7-58" name="__codelineno-7-58" href="#__codelineno-7-58"></a>
</span><span id="__span-7-59"><a id="__codelineno-7-59" name="__codelineno-7-59" href="#__codelineno-7-59"></a>        <span class="c1"># Hash password securely</span>
</span><span id="__span-7-60"><a id="__codelineno-7-60" name="__codelineno-7-60" href="#__codelineno-7-60"></a>        <span class="n">password_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">secure_password_hash</span><span class="p">(</span><span class="n">password</span><span class="p">)</span>
</span><span id="__span-7-61"><a id="__codelineno-7-61" name="__codelineno-7-61" href="#__codelineno-7-61"></a>
</span><span id="__span-7-62"><a id="__codelineno-7-62" name="__codelineno-7-62" href="#__codelineno-7-62"></a>        <span class="c1"># Store user data</span>
</span><span id="__span-7-63"><a id="__codelineno-7-63" name="__codelineno-7-63" href="#__codelineno-7-63"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">users</span><span class="p">[</span><span class="n">username</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="__span-7-64"><a id="__codelineno-7-64" name="__codelineno-7-64" href="#__codelineno-7-64"></a>            <span class="s1">&#39;email&#39;</span><span class="p">:</span> <span class="n">email</span><span class="p">,</span>
</span><span id="__span-7-65"><a id="__codelineno-7-65" name="__codelineno-7-65" href="#__codelineno-7-65"></a>            <span class="s1">&#39;password_hash&#39;</span><span class="p">:</span> <span class="n">password_data</span><span class="p">[</span><span class="s1">&#39;hash&#39;</span><span class="p">],</span>
</span><span id="__span-7-66"><a id="__codelineno-7-66" name="__codelineno-7-66" href="#__codelineno-7-66"></a>            <span class="s1">&#39;salt&#39;</span><span class="p">:</span> <span class="n">password_data</span><span class="p">[</span><span class="s1">&#39;salt&#39;</span><span class="p">],</span>
</span><span id="__span-7-67"><a id="__codelineno-7-67" name="__codelineno-7-67" href="#__codelineno-7-67"></a>            <span class="s1">&#39;created_at&#39;</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">(),</span>
</span><span id="__span-7-68"><a id="__codelineno-7-68" name="__codelineno-7-68" href="#__codelineno-7-68"></a>            <span class="s1">&#39;last_login&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="__span-7-69"><a id="__codelineno-7-69" name="__codelineno-7-69" href="#__codelineno-7-69"></a>            <span class="s1">&#39;failed_attempts&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
</span><span id="__span-7-70"><a id="__codelineno-7-70" name="__codelineno-7-70" href="#__codelineno-7-70"></a>            <span class="s1">&#39;account_locked&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="__span-7-71"><a id="__codelineno-7-71" name="__codelineno-7-71" href="#__codelineno-7-71"></a>            <span class="s1">&#39;roles&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;user&#39;</span><span class="p">]</span>  <span class="c1"># Basic role</span>
</span><span id="__span-7-72"><a id="__codelineno-7-72" name="__codelineno-7-72" href="#__codelineno-7-72"></a>        <span class="p">}</span>
</span><span id="__span-7-73"><a id="__codelineno-7-73" name="__codelineno-7-73" href="#__codelineno-7-73"></a>
</span><span id="__span-7-74"><a id="__codelineno-7-74" name="__codelineno-7-74" href="#__codelineno-7-74"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;âœ… User </span><span class="si">{</span><span class="n">username</span><span class="si">}</span><span class="s2"> registered successfully!&quot;</span><span class="p">)</span>
</span><span id="__span-7-75"><a id="__codelineno-7-75" name="__codelineno-7-75" href="#__codelineno-7-75"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Password hash: </span><span class="si">{</span><span class="n">password_data</span><span class="p">[</span><span class="s1">&#39;hash&#39;</span><span class="p">][:</span><span class="mi">20</span><span class="p">]</span><span class="si">}</span><span class="s2">...&quot;</span><span class="p">)</span>
</span><span id="__span-7-76"><a id="__codelineno-7-76" name="__codelineno-7-76" href="#__codelineno-7-76"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Salt: </span><span class="si">{</span><span class="n">password_data</span><span class="p">[</span><span class="s1">&#39;salt&#39;</span><span class="p">][:</span><span class="mi">10</span><span class="p">]</span><span class="si">}</span><span class="s2">...&quot;</span><span class="p">)</span>
</span><span id="__span-7-77"><a id="__codelineno-7-77" name="__codelineno-7-77" href="#__codelineno-7-77"></a>
</span><span id="__span-7-78"><a id="__codelineno-7-78" name="__codelineno-7-78" href="#__codelineno-7-78"></a>        <span class="k">return</span> <span class="kc">True</span>
</span><span id="__span-7-79"><a id="__codelineno-7-79" name="__codelineno-7-79" href="#__codelineno-7-79"></a>
</span><span id="__span-7-80"><a id="__codelineno-7-80" name="__codelineno-7-80" href="#__codelineno-7-80"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">validate_password_strength</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">password</span><span class="p">):</span>
</span><span id="__span-7-81"><a id="__codelineno-7-81" name="__codelineno-7-81" href="#__codelineno-7-81"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Validate password meets security requirements&quot;&quot;&quot;</span>
</span><span id="__span-7-82"><a id="__codelineno-7-82" name="__codelineno-7-82" href="#__codelineno-7-82"></a>
</span><span id="__span-7-83"><a id="__codelineno-7-83" name="__codelineno-7-83" href="#__codelineno-7-83"></a>        <span class="n">requirements</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="__span-7-84"><a id="__codelineno-7-84" name="__codelineno-7-84" href="#__codelineno-7-84"></a>            <span class="s1">&#39;length&#39;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">password</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">8</span><span class="p">,</span>
</span><span id="__span-7-85"><a id="__codelineno-7-85" name="__codelineno-7-85" href="#__codelineno-7-85"></a>            <span class="s1">&#39;uppercase&#39;</span><span class="p">:</span> <span class="nb">any</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">isupper</span><span class="p">()</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">password</span><span class="p">),</span>
</span><span id="__span-7-86"><a id="__codelineno-7-86" name="__codelineno-7-86" href="#__codelineno-7-86"></a>            <span class="s1">&#39;lowercase&#39;</span><span class="p">:</span> <span class="nb">any</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">islower</span><span class="p">()</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">password</span><span class="p">),</span>
</span><span id="__span-7-87"><a id="__codelineno-7-87" name="__codelineno-7-87" href="#__codelineno-7-87"></a>            <span class="s1">&#39;digit&#39;</span><span class="p">:</span> <span class="nb">any</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">isdigit</span><span class="p">()</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">password</span><span class="p">),</span>
</span><span id="__span-7-88"><a id="__codelineno-7-88" name="__codelineno-7-88" href="#__codelineno-7-88"></a>            <span class="s1">&#39;special&#39;</span><span class="p">:</span> <span class="nb">any</span><span class="p">(</span><span class="n">c</span> <span class="ow">in</span> <span class="s1">&#39;!@#$%^&amp;*()_+-=[]</span><span class="si">{}</span><span class="s1">|;:,.&lt;&gt;?&#39;</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">password</span><span class="p">)</span>
</span><span id="__span-7-89"><a id="__codelineno-7-89" name="__codelineno-7-89" href="#__codelineno-7-89"></a>        <span class="p">}</span>
</span><span id="__span-7-90"><a id="__codelineno-7-90" name="__codelineno-7-90" href="#__codelineno-7-90"></a>
</span><span id="__span-7-91"><a id="__codelineno-7-91" name="__codelineno-7-91" href="#__codelineno-7-91"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;ğŸ”’ Password Strength Check:&quot;</span><span class="p">)</span>
</span><span id="__span-7-92"><a id="__codelineno-7-92" name="__codelineno-7-92" href="#__codelineno-7-92"></a>        <span class="k">for</span> <span class="n">requirement</span><span class="p">,</span> <span class="n">met</span> <span class="ow">in</span> <span class="n">requirements</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="__span-7-93"><a id="__codelineno-7-93" name="__codelineno-7-93" href="#__codelineno-7-93"></a>            <span class="n">status</span> <span class="o">=</span> <span class="s2">&quot;âœ…&quot;</span> <span class="k">if</span> <span class="n">met</span> <span class="k">else</span> <span class="s2">&quot;âŒ&quot;</span>
</span><span id="__span-7-94"><a id="__codelineno-7-94" name="__codelineno-7-94" href="#__codelineno-7-94"></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   </span><span class="si">{</span><span class="n">requirement</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">status</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-7-95"><a id="__codelineno-7-95" name="__codelineno-7-95" href="#__codelineno-7-95"></a>
</span><span id="__span-7-96"><a id="__codelineno-7-96" name="__codelineno-7-96" href="#__codelineno-7-96"></a>        <span class="k">return</span> <span class="nb">all</span><span class="p">(</span><span class="n">requirements</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
</span><span id="__span-7-97"><a id="__codelineno-7-97" name="__codelineno-7-97" href="#__codelineno-7-97"></a>
</span><span id="__span-7-98"><a id="__codelineno-7-98" name="__codelineno-7-98" href="#__codelineno-7-98"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">authenticate_user</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">username</span><span class="p">,</span> <span class="n">password</span><span class="p">):</span>
</span><span id="__span-7-99"><a id="__codelineno-7-99" name="__codelineno-7-99" href="#__codelineno-7-99"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Secure user authentication with rate limiting&quot;&quot;&quot;</span>
</span><span id="__span-7-100"><a id="__codelineno-7-100" name="__codelineno-7-100" href="#__codelineno-7-100"></a>
</span><span id="__span-7-101"><a id="__codelineno-7-101" name="__codelineno-7-101" href="#__codelineno-7-101"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ğŸ” Authenticating user: </span><span class="si">{</span><span class="n">username</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-7-102"><a id="__codelineno-7-102" name="__codelineno-7-102" href="#__codelineno-7-102"></a>
</span><span id="__span-7-103"><a id="__codelineno-7-103" name="__codelineno-7-103" href="#__codelineno-7-103"></a>        <span class="c1"># Check if user exists</span>
</span><span id="__span-7-104"><a id="__codelineno-7-104" name="__codelineno-7-104" href="#__codelineno-7-104"></a>        <span class="k">if</span> <span class="n">username</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">users</span><span class="p">:</span>
</span><span id="__span-7-105"><a id="__codelineno-7-105" name="__codelineno-7-105" href="#__codelineno-7-105"></a>            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;âŒ User not found&quot;</span><span class="p">)</span>
</span><span id="__span-7-106"><a id="__codelineno-7-106" name="__codelineno-7-106" href="#__codelineno-7-106"></a>            <span class="k">return</span> <span class="kc">None</span>
</span><span id="__span-7-107"><a id="__codelineno-7-107" name="__codelineno-7-107" href="#__codelineno-7-107"></a>
</span><span id="__span-7-108"><a id="__codelineno-7-108" name="__codelineno-7-108" href="#__codelineno-7-108"></a>        <span class="n">user</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">users</span><span class="p">[</span><span class="n">username</span><span class="p">]</span>
</span><span id="__span-7-109"><a id="__codelineno-7-109" name="__codelineno-7-109" href="#__codelineno-7-109"></a>
</span><span id="__span-7-110"><a id="__codelineno-7-110" name="__codelineno-7-110" href="#__codelineno-7-110"></a>        <span class="c1"># Check account lockout</span>
</span><span id="__span-7-111"><a id="__codelineno-7-111" name="__codelineno-7-111" href="#__codelineno-7-111"></a>        <span class="k">if</span> <span class="n">user</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;account_locked&#39;</span><span class="p">,</span> <span class="kc">False</span><span class="p">):</span>
</span><span id="__span-7-112"><a id="__codelineno-7-112" name="__codelineno-7-112" href="#__codelineno-7-112"></a>            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;ğŸ”’ Account is locked due to too many failed attempts&quot;</span><span class="p">)</span>
</span><span id="__span-7-113"><a id="__codelineno-7-113" name="__codelineno-7-113" href="#__codelineno-7-113"></a>            <span class="k">return</span> <span class="kc">None</span>
</span><span id="__span-7-114"><a id="__codelineno-7-114" name="__codelineno-7-114" href="#__codelineno-7-114"></a>
</span><span id="__span-7-115"><a id="__codelineno-7-115" name="__codelineno-7-115" href="#__codelineno-7-115"></a>        <span class="c1"># Rate limiting check</span>
</span><span id="__span-7-116"><a id="__codelineno-7-116" name="__codelineno-7-116" href="#__codelineno-7-116"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_rate_limited</span><span class="p">(</span><span class="n">username</span><span class="p">):</span>
</span><span id="__span-7-117"><a id="__codelineno-7-117" name="__codelineno-7-117" href="#__codelineno-7-117"></a>            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;â° Too many attempts. Please try again later.&quot;</span><span class="p">)</span>
</span><span id="__span-7-118"><a id="__codelineno-7-118" name="__codelineno-7-118" href="#__codelineno-7-118"></a>            <span class="k">return</span> <span class="kc">None</span>
</span><span id="__span-7-119"><a id="__codelineno-7-119" name="__codelineno-7-119" href="#__codelineno-7-119"></a>
</span><span id="__span-7-120"><a id="__codelineno-7-120" name="__codelineno-7-120" href="#__codelineno-7-120"></a>        <span class="c1"># Verify password</span>
</span><span id="__span-7-121"><a id="__codelineno-7-121" name="__codelineno-7-121" href="#__codelineno-7-121"></a>        <span class="n">password_hash</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">pbkdf2_hmac</span><span class="p">(</span>
</span><span id="__span-7-122"><a id="__codelineno-7-122" name="__codelineno-7-122" href="#__codelineno-7-122"></a>            <span class="s1">&#39;sha256&#39;</span><span class="p">,</span>
</span><span id="__span-7-123"><a id="__codelineno-7-123" name="__codelineno-7-123" href="#__codelineno-7-123"></a>            <span class="n">password</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">),</span>
</span><span id="__span-7-124"><a id="__codelineno-7-124" name="__codelineno-7-124" href="#__codelineno-7-124"></a>            <span class="n">user</span><span class="p">[</span><span class="s1">&#39;salt&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">),</span>
</span><span id="__span-7-125"><a id="__codelineno-7-125" name="__codelineno-7-125" href="#__codelineno-7-125"></a>            <span class="mi">100000</span>
</span><span id="__span-7-126"><a id="__codelineno-7-126" name="__codelineno-7-126" href="#__codelineno-7-126"></a>        <span class="p">)</span>
</span><span id="__span-7-127"><a id="__codelineno-7-127" name="__codelineno-7-127" href="#__codelineno-7-127"></a>
</span><span id="__span-7-128"><a id="__codelineno-7-128" name="__codelineno-7-128" href="#__codelineno-7-128"></a>        <span class="k">if</span> <span class="n">password_hash</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span> <span class="o">==</span> <span class="n">user</span><span class="p">[</span><span class="s1">&#39;password_hash&#39;</span><span class="p">]:</span>
</span><span id="__span-7-129"><a id="__codelineno-7-129" name="__codelineno-7-129" href="#__codelineno-7-129"></a>            <span class="c1"># Successful authentication</span>
</span><span id="__span-7-130"><a id="__codelineno-7-130" name="__codelineno-7-130" href="#__codelineno-7-130"></a>            <span class="n">user</span><span class="p">[</span><span class="s1">&#39;last_login&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
</span><span id="__span-7-131"><a id="__codelineno-7-131" name="__codelineno-7-131" href="#__codelineno-7-131"></a>            <span class="n">user</span><span class="p">[</span><span class="s1">&#39;failed_attempts&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="__span-7-132"><a id="__codelineno-7-132" name="__codelineno-7-132" href="#__codelineno-7-132"></a>
</span><span id="__span-7-133"><a id="__codelineno-7-133" name="__codelineno-7-133" href="#__codelineno-7-133"></a>            <span class="c1"># Generate JWT token</span>
</span><span id="__span-7-134"><a id="__codelineno-7-134" name="__codelineno-7-134" href="#__codelineno-7-134"></a>            <span class="n">token</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">generate_jwt_token</span><span class="p">(</span><span class="n">username</span><span class="p">,</span> <span class="n">user</span><span class="p">[</span><span class="s1">&#39;roles&#39;</span><span class="p">])</span>
</span><span id="__span-7-135"><a id="__codelineno-7-135" name="__codelineno-7-135" href="#__codelineno-7-135"></a>
</span><span id="__span-7-136"><a id="__codelineno-7-136" name="__codelineno-7-136" href="#__codelineno-7-136"></a>            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;âœ… Authentication successful!&quot;</span><span class="p">)</span>
</span><span id="__span-7-137"><a id="__codelineno-7-137" name="__codelineno-7-137" href="#__codelineno-7-137"></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Last login: </span><span class="si">{</span><span class="n">user</span><span class="p">[</span><span class="s1">&#39;last_login&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-7-138"><a id="__codelineno-7-138" name="__codelineno-7-138" href="#__codelineno-7-138"></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   JWT token: </span><span class="si">{</span><span class="n">token</span><span class="p">[:</span><span class="mi">30</span><span class="p">]</span><span class="si">}</span><span class="s2">...&quot;</span><span class="p">)</span>
</span><span id="__span-7-139"><a id="__codelineno-7-139" name="__codelineno-7-139" href="#__codelineno-7-139"></a>
</span><span id="__span-7-140"><a id="__codelineno-7-140" name="__codelineno-7-140" href="#__codelineno-7-140"></a>            <span class="k">return</span> <span class="p">{</span>
</span><span id="__span-7-141"><a id="__codelineno-7-141" name="__codelineno-7-141" href="#__codelineno-7-141"></a>                <span class="s1">&#39;username&#39;</span><span class="p">:</span> <span class="n">username</span><span class="p">,</span>
</span><span id="__span-7-142"><a id="__codelineno-7-142" name="__codelineno-7-142" href="#__codelineno-7-142"></a>                <span class="s1">&#39;token&#39;</span><span class="p">:</span> <span class="n">token</span><span class="p">,</span>
</span><span id="__span-7-143"><a id="__codelineno-7-143" name="__codelineno-7-143" href="#__codelineno-7-143"></a>                <span class="s1">&#39;roles&#39;</span><span class="p">:</span> <span class="n">user</span><span class="p">[</span><span class="s1">&#39;roles&#39;</span><span class="p">]</span>
</span><span id="__span-7-144"><a id="__codelineno-7-144" name="__codelineno-7-144" href="#__codelineno-7-144"></a>            <span class="p">}</span>
</span><span id="__span-7-145"><a id="__codelineno-7-145" name="__codelineno-7-145" href="#__codelineno-7-145"></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="__span-7-146"><a id="__codelineno-7-146" name="__codelineno-7-146" href="#__codelineno-7-146"></a>            <span class="c1"># Failed authentication</span>
</span><span id="__span-7-147"><a id="__codelineno-7-147" name="__codelineno-7-147" href="#__codelineno-7-147"></a>            <span class="n">user</span><span class="p">[</span><span class="s1">&#39;failed_attempts&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="__span-7-148"><a id="__codelineno-7-148" name="__codelineno-7-148" href="#__codelineno-7-148"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">failed_attempts</span><span class="p">[</span><span class="n">username</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">failed_attempts</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">username</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>
</span><span id="__span-7-149"><a id="__codelineno-7-149" name="__codelineno-7-149" href="#__codelineno-7-149"></a>
</span><span id="__span-7-150"><a id="__codelineno-7-150" name="__codelineno-7-150" href="#__codelineno-7-150"></a>            <span class="c1"># Lock account after 5 failed attempts</span>
</span><span id="__span-7-151"><a id="__codelineno-7-151" name="__codelineno-7-151" href="#__codelineno-7-151"></a>            <span class="k">if</span> <span class="n">user</span><span class="p">[</span><span class="s1">&#39;failed_attempts&#39;</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mi">5</span><span class="p">:</span>
</span><span id="__span-7-152"><a id="__codelineno-7-152" name="__codelineno-7-152" href="#__codelineno-7-152"></a>                <span class="n">user</span><span class="p">[</span><span class="s1">&#39;account_locked&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="__span-7-153"><a id="__codelineno-7-153" name="__codelineno-7-153" href="#__codelineno-7-153"></a>                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;ğŸ”’ Account locked after 5 failed attempts&quot;</span><span class="p">)</span>
</span><span id="__span-7-154"><a id="__codelineno-7-154" name="__codelineno-7-154" href="#__codelineno-7-154"></a>
</span><span id="__span-7-155"><a id="__codelineno-7-155" name="__codelineno-7-155" href="#__codelineno-7-155"></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;âŒ Authentication failed (attempt </span><span class="si">{</span><span class="n">user</span><span class="p">[</span><span class="s1">&#39;failed_attempts&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>
</span><span id="__span-7-156"><a id="__codelineno-7-156" name="__codelineno-7-156" href="#__codelineno-7-156"></a>            <span class="k">return</span> <span class="kc">None</span>
</span><span id="__span-7-157"><a id="__codelineno-7-157" name="__codelineno-7-157" href="#__codelineno-7-157"></a>
</span><span id="__span-7-158"><a id="__codelineno-7-158" name="__codelineno-7-158" href="#__codelineno-7-158"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">generate_jwt_token</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">username</span><span class="p">,</span> <span class="n">roles</span><span class="p">):</span>
</span><span id="__span-7-159"><a id="__codelineno-7-159" name="__codelineno-7-159" href="#__codelineno-7-159"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Generate JWT token for authenticated user&quot;&quot;&quot;</span>
</span><span id="__span-7-160"><a id="__codelineno-7-160" name="__codelineno-7-160" href="#__codelineno-7-160"></a>
</span><span id="__span-7-161"><a id="__codelineno-7-161" name="__codelineno-7-161" href="#__codelineno-7-161"></a>        <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="__span-7-162"><a id="__codelineno-7-162" name="__codelineno-7-162" href="#__codelineno-7-162"></a>            <span class="s1">&#39;username&#39;</span><span class="p">:</span> <span class="n">username</span><span class="p">,</span>
</span><span id="__span-7-163"><a id="__codelineno-7-163" name="__codelineno-7-163" href="#__codelineno-7-163"></a>            <span class="s1">&#39;roles&#39;</span><span class="p">:</span> <span class="n">roles</span><span class="p">,</span>
</span><span id="__span-7-164"><a id="__codelineno-7-164" name="__codelineno-7-164" href="#__codelineno-7-164"></a>            <span class="s1">&#39;iat&#39;</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">utcnow</span><span class="p">(),</span>
</span><span id="__span-7-165"><a id="__codelineno-7-165" name="__codelineno-7-165" href="#__codelineno-7-165"></a>            <span class="s1">&#39;exp&#39;</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">utcnow</span><span class="p">()</span> <span class="o">+</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">hours</span><span class="o">=</span><span class="mi">24</span><span class="p">)</span>  <span class="c1"># 24 hour expiry</span>
</span><span id="__span-7-166"><a id="__codelineno-7-166" name="__codelineno-7-166" href="#__codelineno-7-166"></a>        <span class="p">}</span>
</span><span id="__span-7-167"><a id="__codelineno-7-167" name="__codelineno-7-167" href="#__codelineno-7-167"></a>
</span><span id="__span-7-168"><a id="__codelineno-7-168" name="__codelineno-7-168" href="#__codelineno-7-168"></a>        <span class="n">token</span> <span class="o">=</span> <span class="n">jwt</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">payload</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">jwt_secret</span><span class="p">,</span> <span class="n">algorithm</span><span class="o">=</span><span class="s1">&#39;HS256&#39;</span><span class="p">)</span>
</span><span id="__span-7-169"><a id="__codelineno-7-169" name="__codelineno-7-169" href="#__codelineno-7-169"></a>        <span class="k">return</span> <span class="n">token</span>
</span><span id="__span-7-170"><a id="__codelineno-7-170" name="__codelineno-7-170" href="#__codelineno-7-170"></a>
</span><span id="__span-7-171"><a id="__codelineno-7-171" name="__codelineno-7-171" href="#__codelineno-7-171"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">verify_jwt_token</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">token</span><span class="p">):</span>
</span><span id="__span-7-172"><a id="__codelineno-7-172" name="__codelineno-7-172" href="#__codelineno-7-172"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Verify and decode JWT token&quot;&quot;&quot;</span>
</span><span id="__span-7-173"><a id="__codelineno-7-173" name="__codelineno-7-173" href="#__codelineno-7-173"></a>
</span><span id="__span-7-174"><a id="__codelineno-7-174" name="__codelineno-7-174" href="#__codelineno-7-174"></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="__span-7-175"><a id="__codelineno-7-175" name="__codelineno-7-175" href="#__codelineno-7-175"></a>            <span class="n">payload</span> <span class="o">=</span> <span class="n">jwt</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">jwt_secret</span><span class="p">,</span> <span class="n">algorithms</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;HS256&#39;</span><span class="p">])</span>
</span><span id="__span-7-176"><a id="__codelineno-7-176" name="__codelineno-7-176" href="#__codelineno-7-176"></a>
</span><span id="__span-7-177"><a id="__codelineno-7-177" name="__codelineno-7-177" href="#__codelineno-7-177"></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;âœ… Valid token for user: </span><span class="si">{</span><span class="n">payload</span><span class="p">[</span><span class="s1">&#39;username&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-7-178"><a id="__codelineno-7-178" name="__codelineno-7-178" href="#__codelineno-7-178"></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Roles: </span><span class="si">{</span><span class="n">payload</span><span class="p">[</span><span class="s1">&#39;roles&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-7-179"><a id="__codelineno-7-179" name="__codelineno-7-179" href="#__codelineno-7-179"></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Expires: </span><span class="si">{</span><span class="n">payload</span><span class="p">[</span><span class="s1">&#39;exp&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-7-180"><a id="__codelineno-7-180" name="__codelineno-7-180" href="#__codelineno-7-180"></a>
</span><span id="__span-7-181"><a id="__codelineno-7-181" name="__codelineno-7-181" href="#__codelineno-7-181"></a>            <span class="k">return</span> <span class="n">payload</span>
</span><span id="__span-7-182"><a id="__codelineno-7-182" name="__codelineno-7-182" href="#__codelineno-7-182"></a>
</span><span id="__span-7-183"><a id="__codelineno-7-183" name="__codelineno-7-183" href="#__codelineno-7-183"></a>        <span class="k">except</span> <span class="n">jwt</span><span class="o">.</span><span class="n">ExpiredSignatureError</span><span class="p">:</span>
</span><span id="__span-7-184"><a id="__codelineno-7-184" name="__codelineno-7-184" href="#__codelineno-7-184"></a>            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;âŒ Token has expired&quot;</span><span class="p">)</span>
</span><span id="__span-7-185"><a id="__codelineno-7-185" name="__codelineno-7-185" href="#__codelineno-7-185"></a>            <span class="k">return</span> <span class="kc">None</span>
</span><span id="__span-7-186"><a id="__codelineno-7-186" name="__codelineno-7-186" href="#__codelineno-7-186"></a>        <span class="k">except</span> <span class="n">jwt</span><span class="o">.</span><span class="n">InvalidTokenError</span><span class="p">:</span>
</span><span id="__span-7-187"><a id="__codelineno-7-187" name="__codelineno-7-187" href="#__codelineno-7-187"></a>            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;âŒ Invalid token&quot;</span><span class="p">)</span>
</span><span id="__span-7-188"><a id="__codelineno-7-188" name="__codelineno-7-188" href="#__codelineno-7-188"></a>            <span class="k">return</span> <span class="kc">None</span>
</span><span id="__span-7-189"><a id="__codelineno-7-189" name="__codelineno-7-189" href="#__codelineno-7-189"></a>
</span><span id="__span-7-190"><a id="__codelineno-7-190" name="__codelineno-7-190" href="#__codelineno-7-190"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">is_rate_limited</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">username</span><span class="p">):</span>
</span><span id="__span-7-191"><a id="__codelineno-7-191" name="__codelineno-7-191" href="#__codelineno-7-191"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Simple rate limiting implementation&quot;&quot;&quot;</span>
</span><span id="__span-7-192"><a id="__codelineno-7-192" name="__codelineno-7-192" href="#__codelineno-7-192"></a>
</span><span id="__span-7-193"><a id="__codelineno-7-193" name="__codelineno-7-193" href="#__codelineno-7-193"></a>        <span class="n">max_attempts</span> <span class="o">=</span> <span class="mi">10</span>
</span><span id="__span-7-194"><a id="__codelineno-7-194" name="__codelineno-7-194" href="#__codelineno-7-194"></a>        <span class="n">time_window</span> <span class="o">=</span> <span class="mi">300</span>  <span class="c1"># 5 minutes</span>
</span><span id="__span-7-195"><a id="__codelineno-7-195" name="__codelineno-7-195" href="#__codelineno-7-195"></a>
</span><span id="__span-7-196"><a id="__codelineno-7-196" name="__codelineno-7-196" href="#__codelineno-7-196"></a>        <span class="n">current_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
</span><span id="__span-7-197"><a id="__codelineno-7-197" name="__codelineno-7-197" href="#__codelineno-7-197"></a>
</span><span id="__span-7-198"><a id="__codelineno-7-198" name="__codelineno-7-198" href="#__codelineno-7-198"></a>        <span class="k">if</span> <span class="n">username</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">failed_attempts</span><span class="p">:</span>
</span><span id="__span-7-199"><a id="__codelineno-7-199" name="__codelineno-7-199" href="#__codelineno-7-199"></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="__span-7-200"><a id="__codelineno-7-200" name="__codelineno-7-200" href="#__codelineno-7-200"></a>
</span><span id="__span-7-201"><a id="__codelineno-7-201" name="__codelineno-7-201" href="#__codelineno-7-201"></a>        <span class="c1"># Reset counter if time window has passed</span>
</span><span id="__span-7-202"><a id="__codelineno-7-202" name="__codelineno-7-202" href="#__codelineno-7-202"></a>        <span class="k">if</span> <span class="n">current_time</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">failed_attempts</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">username</span><span class="si">}</span><span class="s2">_last_attempt&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">time_window</span><span class="p">:</span>
</span><span id="__span-7-203"><a id="__codelineno-7-203" name="__codelineno-7-203" href="#__codelineno-7-203"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">failed_attempts</span><span class="p">[</span><span class="n">username</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="__span-7-204"><a id="__codelineno-7-204" name="__codelineno-7-204" href="#__codelineno-7-204"></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="__span-7-205"><a id="__codelineno-7-205" name="__codelineno-7-205" href="#__codelineno-7-205"></a>
</span><span id="__span-7-206"><a id="__codelineno-7-206" name="__codelineno-7-206" href="#__codelineno-7-206"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">failed_attempts</span><span class="p">[</span><span class="n">username</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">max_attempts</span>
</span><span id="__span-7-207"><a id="__codelineno-7-207" name="__codelineno-7-207" href="#__codelineno-7-207"></a>
</span><span id="__span-7-208"><a id="__codelineno-7-208" name="__codelineno-7-208" href="#__codelineno-7-208"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">authorize_action</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">token</span><span class="p">,</span> <span class="n">required_role</span><span class="p">):</span>
</span><span id="__span-7-209"><a id="__codelineno-7-209" name="__codelineno-7-209" href="#__codelineno-7-209"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Role-based authorization&quot;&quot;&quot;</span>
</span><span id="__span-7-210"><a id="__codelineno-7-210" name="__codelineno-7-210" href="#__codelineno-7-210"></a>
</span><span id="__span-7-211"><a id="__codelineno-7-211" name="__codelineno-7-211" href="#__codelineno-7-211"></a>        <span class="n">payload</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">verify_jwt_token</span><span class="p">(</span><span class="n">token</span><span class="p">)</span>
</span><span id="__span-7-212"><a id="__codelineno-7-212" name="__codelineno-7-212" href="#__codelineno-7-212"></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">payload</span><span class="p">:</span>
</span><span id="__span-7-213"><a id="__codelineno-7-213" name="__codelineno-7-213" href="#__codelineno-7-213"></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="__span-7-214"><a id="__codelineno-7-214" name="__codelineno-7-214" href="#__codelineno-7-214"></a>
</span><span id="__span-7-215"><a id="__codelineno-7-215" name="__codelineno-7-215" href="#__codelineno-7-215"></a>        <span class="n">user_roles</span> <span class="o">=</span> <span class="n">payload</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;roles&#39;</span><span class="p">,</span> <span class="p">[])</span>
</span><span id="__span-7-216"><a id="__codelineno-7-216" name="__codelineno-7-216" href="#__codelineno-7-216"></a>
</span><span id="__span-7-217"><a id="__codelineno-7-217" name="__codelineno-7-217" href="#__codelineno-7-217"></a>        <span class="n">role_hierarchy</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="__span-7-218"><a id="__codelineno-7-218" name="__codelineno-7-218" href="#__codelineno-7-218"></a>            <span class="s1">&#39;admin&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;admin&#39;</span><span class="p">,</span> <span class="s1">&#39;moderator&#39;</span><span class="p">,</span> <span class="s1">&#39;user&#39;</span><span class="p">],</span>
</span><span id="__span-7-219"><a id="__codelineno-7-219" name="__codelineno-7-219" href="#__codelineno-7-219"></a>            <span class="s1">&#39;moderator&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;moderator&#39;</span><span class="p">,</span> <span class="s1">&#39;user&#39;</span><span class="p">],</span>
</span><span id="__span-7-220"><a id="__codelineno-7-220" name="__codelineno-7-220" href="#__codelineno-7-220"></a>            <span class="s1">&#39;user&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;user&#39;</span><span class="p">]</span>
</span><span id="__span-7-221"><a id="__codelineno-7-221" name="__codelineno-7-221" href="#__codelineno-7-221"></a>        <span class="p">}</span>
</span><span id="__span-7-222"><a id="__codelineno-7-222" name="__codelineno-7-222" href="#__codelineno-7-222"></a>
</span><span id="__span-7-223"><a id="__codelineno-7-223" name="__codelineno-7-223" href="#__codelineno-7-223"></a>        <span class="n">allowed_roles</span> <span class="o">=</span> <span class="n">role_hierarchy</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">required_role</span><span class="p">,</span> <span class="p">[</span><span class="n">required_role</span><span class="p">])</span>
</span><span id="__span-7-224"><a id="__codelineno-7-224" name="__codelineno-7-224" href="#__codelineno-7-224"></a>
</span><span id="__span-7-225"><a id="__codelineno-7-225" name="__codelineno-7-225" href="#__codelineno-7-225"></a>        <span class="n">has_permission</span> <span class="o">=</span> <span class="nb">any</span><span class="p">(</span><span class="n">role</span> <span class="ow">in</span> <span class="n">user_roles</span> <span class="k">for</span> <span class="n">role</span> <span class="ow">in</span> <span class="n">allowed_roles</span><span class="p">)</span>
</span><span id="__span-7-226"><a id="__codelineno-7-226" name="__codelineno-7-226" href="#__codelineno-7-226"></a>
</span><span id="__span-7-227"><a id="__codelineno-7-227" name="__codelineno-7-227" href="#__codelineno-7-227"></a>        <span class="k">if</span> <span class="n">has_permission</span><span class="p">:</span>
</span><span id="__span-7-228"><a id="__codelineno-7-228" name="__codelineno-7-228" href="#__codelineno-7-228"></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;âœ… Authorization granted for </span><span class="si">{</span><span class="n">required_role</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-7-229"><a id="__codelineno-7-229" name="__codelineno-7-229" href="#__codelineno-7-229"></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="__span-7-230"><a id="__codelineno-7-230" name="__codelineno-7-230" href="#__codelineno-7-230"></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;âŒ Authorization denied for </span><span class="si">{</span><span class="n">required_role</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-7-231"><a id="__codelineno-7-231" name="__codelineno-7-231" href="#__codelineno-7-231"></a>
</span><span id="__span-7-232"><a id="__codelineno-7-232" name="__codelineno-7-232" href="#__codelineno-7-232"></a>        <span class="k">return</span> <span class="n">has_permission</span>
</span><span id="__span-7-233"><a id="__codelineno-7-233" name="__codelineno-7-233" href="#__codelineno-7-233"></a>
</span><span id="__span-7-234"><a id="__codelineno-7-234" name="__codelineno-7-234" href="#__codelineno-7-234"></a><span class="c1"># Demonstration of complete authentication system</span>
</span><span id="__span-7-235"><a id="__codelineno-7-235" name="__codelineno-7-235" href="#__codelineno-7-235"></a><span class="n">auth_system</span> <span class="o">=</span> <span class="n">WebAuthenticationSystem</span><span class="p">()</span>
</span><span id="__span-7-236"><a id="__codelineno-7-236" name="__codelineno-7-236" href="#__codelineno-7-236"></a>
</span><span id="__span-7-237"><a id="__codelineno-7-237" name="__codelineno-7-237" href="#__codelineno-7-237"></a><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;ğŸ” COMPLETE WEB AUTHENTICATION SYSTEM DEMO&quot;</span><span class="p">)</span>
</span><span id="__span-7-238"><a id="__codelineno-7-238" name="__codelineno-7-238" href="#__codelineno-7-238"></a><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;=&quot;</span> <span class="o">*</span> <span class="mi">60</span><span class="p">)</span>
</span><span id="__span-7-239"><a id="__codelineno-7-239" name="__codelineno-7-239" href="#__codelineno-7-239"></a>
</span><span id="__span-7-240"><a id="__codelineno-7-240" name="__codelineno-7-240" href="#__codelineno-7-240"></a><span class="c1"># Register users</span>
</span><span id="__span-7-241"><a id="__codelineno-7-241" name="__codelineno-7-241" href="#__codelineno-7-241"></a><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">ğŸ“ User Registration:&quot;</span><span class="p">)</span>
</span><span id="__span-7-242"><a id="__codelineno-7-242" name="__codelineno-7-242" href="#__codelineno-7-242"></a><span class="n">auth_system</span><span class="o">.</span><span class="n">register_user</span><span class="p">(</span><span class="s2">&quot;alice&quot;</span><span class="p">,</span> <span class="s2">&quot;SecurePass123!&quot;</span><span class="p">,</span> <span class="s2">&quot;alice@example.com&quot;</span><span class="p">)</span>
</span><span id="__span-7-243"><a id="__codelineno-7-243" name="__codelineno-7-243" href="#__codelineno-7-243"></a><span class="n">auth_system</span><span class="o">.</span><span class="n">register_user</span><span class="p">(</span><span class="s2">&quot;bob&quot;</span><span class="p">,</span> <span class="s2">&quot;MyPassword456@&quot;</span><span class="p">,</span> <span class="s2">&quot;bob@example.com&quot;</span><span class="p">)</span>
</span><span id="__span-7-244"><a id="__codelineno-7-244" name="__codelineno-7-244" href="#__codelineno-7-244"></a>
</span><span id="__span-7-245"><a id="__codelineno-7-245" name="__codelineno-7-245" href="#__codelineno-7-245"></a><span class="c1"># Authenticate users</span>
</span><span id="__span-7-246"><a id="__codelineno-7-246" name="__codelineno-7-246" href="#__codelineno-7-246"></a><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">ğŸ”‘ User Authentication:&quot;</span><span class="p">)</span>
</span><span id="__span-7-247"><a id="__codelineno-7-247" name="__codelineno-7-247" href="#__codelineno-7-247"></a><span class="n">alice_auth</span> <span class="o">=</span> <span class="n">auth_system</span><span class="o">.</span><span class="n">authenticate_user</span><span class="p">(</span><span class="s2">&quot;alice&quot;</span><span class="p">,</span> <span class="s2">&quot;SecurePass123!&quot;</span><span class="p">)</span>
</span><span id="__span-7-248"><a id="__codelineno-7-248" name="__codelineno-7-248" href="#__codelineno-7-248"></a><span class="n">bob_auth</span> <span class="o">=</span> <span class="n">auth_system</span><span class="o">.</span><span class="n">authenticate_user</span><span class="p">(</span><span class="s2">&quot;bob&quot;</span><span class="p">,</span> <span class="s2">&quot;WrongPassword&quot;</span><span class="p">)</span>  <span class="c1"># Intentional failure</span>
</span><span id="__span-7-249"><a id="__codelineno-7-249" name="__codelineno-7-249" href="#__codelineno-7-249"></a>
</span><span id="__span-7-250"><a id="__codelineno-7-250" name="__codelineno-7-250" href="#__codelineno-7-250"></a><span class="c1"># Test authorization</span>
</span><span id="__span-7-251"><a id="__codelineno-7-251" name="__codelineno-7-251" href="#__codelineno-7-251"></a><span class="k">if</span> <span class="n">alice_auth</span><span class="p">:</span>
</span><span id="__span-7-252"><a id="__codelineno-7-252" name="__codelineno-7-252" href="#__codelineno-7-252"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">ğŸ›¡ï¸ Authorization Testing:&quot;</span><span class="p">)</span>
</span><span id="__span-7-253"><a id="__codelineno-7-253" name="__codelineno-7-253" href="#__codelineno-7-253"></a>    <span class="n">auth_system</span><span class="o">.</span><span class="n">authorize_action</span><span class="p">(</span><span class="n">alice_auth</span><span class="p">[</span><span class="s1">&#39;token&#39;</span><span class="p">],</span> <span class="s1">&#39;user&#39;</span><span class="p">)</span>  <span class="c1"># Should pass</span>
</span><span id="__span-7-254"><a id="__codelineno-7-254" name="__codelineno-7-254" href="#__codelineno-7-254"></a>    <span class="n">auth_system</span><span class="o">.</span><span class="n">authorize_action</span><span class="p">(</span><span class="n">alice_auth</span><span class="p">[</span><span class="s1">&#39;token&#39;</span><span class="p">],</span> <span class="s1">&#39;admin&#39;</span><span class="p">)</span>  <span class="c1"># Should fail</span>
</span><span id="__span-7-255"><a id="__codelineno-7-255" name="__codelineno-7-255" href="#__codelineno-7-255"></a>
</span><span id="__span-7-256"><a id="__codelineno-7-256" name="__codelineno-7-256" href="#__codelineno-7-256"></a><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">ğŸ’¡ Security Implementation Summary:&quot;</span><span class="p">)</span>
</span><span id="__span-7-257"><a id="__codelineno-7-257" name="__codelineno-7-257" href="#__codelineno-7-257"></a><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;âœ… Secure password hashing with PBKDF2&quot;</span><span class="p">)</span>
</span><span id="__span-7-258"><a id="__codelineno-7-258" name="__codelineno-7-258" href="#__codelineno-7-258"></a><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;âœ… Account lockout after failed attempts&quot;</span><span class="p">)</span>
</span><span id="__span-7-259"><a id="__codelineno-7-259" name="__codelineno-7-259" href="#__codelineno-7-259"></a><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;âœ… Rate limiting to prevent brute force&quot;</span><span class="p">)</span>
</span><span id="__span-7-260"><a id="__codelineno-7-260" name="__codelineno-7-260" href="#__codelineno-7-260"></a><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;âœ… JWT tokens for stateless authentication&quot;</span><span class="p">)</span>
</span><span id="__span-7-261"><a id="__codelineno-7-261" name="__codelineno-7-261" href="#__codelineno-7-261"></a><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;âœ… Role-based authorization&quot;</span><span class="p">)</span>
</span><span id="__span-7-262"><a id="__codelineno-7-262" name="__codelineno-7-262" href="#__codelineno-7-262"></a><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;âœ… Input validation and sanitization&quot;</span><span class="p">)</span>
</span></code></pre></div>
</details>
<h4 id="digital-signatures-hash-functions-ensuring-data-integrity"><strong>Digital Signatures &amp; Hash Functions: Ensuring Data Integrity</strong><a class="headerlink" href="#digital-signatures-hash-functions-ensuring-data-integrity" title="Permanent link">&para;</a></h4>
<p>Digital signatures are like wax seals on medieval lettersâ€”they prove authenticity and detect tampering.</p>
<p><strong>Hash Functions in Action:</strong></p>
<details class="example">
<summary>ğŸ” Data Integrity Demo - Hash Functions &amp; Digital Signatures</summary>
<div class="language-python highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">hashlib</span>
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="kn">import</span><span class="w"> </span><span class="nn">hmac</span>
</span><span id="__span-8-3"><a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a>
</span><span id="__span-8-4"><a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a><span class="k">class</span><span class="w"> </span><span class="nc">DataIntegrityDemo</span><span class="p">:</span>
</span><span id="__span-8-5"><a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Demonstrate hash functions and digital signatures&quot;&quot;&quot;</span>
</span><span id="__span-8-6"><a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a>
</span><span id="__span-8-7"><a id="__codelineno-8-7" name="__codelineno-8-7" href="#__codelineno-8-7"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-8-8"><a id="__codelineno-8-8" name="__codelineno-8-8" href="#__codelineno-8-8"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">secret_key</span> <span class="o">=</span> <span class="sa">b</span><span class="s2">&quot;super_secret_key_for_hmac&quot;</span>
</span><span id="__span-8-9"><a id="__codelineno-8-9" name="__codelineno-8-9" href="#__codelineno-8-9"></a>
</span><span id="__span-8-10"><a id="__codelineno-8-10" name="__codelineno-8-10" href="#__codelineno-8-10"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">hash_comparison</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
</span><span id="__span-8-11"><a id="__codelineno-8-11" name="__codelineno-8-11" href="#__codelineno-8-11"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Compare different hash algorithms&quot;&quot;&quot;</span>
</span><span id="__span-8-12"><a id="__codelineno-8-12" name="__codelineno-8-12" href="#__codelineno-8-12"></a>
</span><span id="__span-8-13"><a id="__codelineno-8-13" name="__codelineno-8-13" href="#__codelineno-8-13"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ğŸ” Hashing data: &#39;</span><span class="si">{</span><span class="n">data</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
</span><span id="__span-8-14"><a id="__codelineno-8-14" name="__codelineno-8-14" href="#__codelineno-8-14"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;-&quot;</span> <span class="o">*</span> <span class="mi">40</span><span class="p">)</span>
</span><span id="__span-8-15"><a id="__codelineno-8-15" name="__codelineno-8-15" href="#__codelineno-8-15"></a>
</span><span id="__span-8-16"><a id="__codelineno-8-16" name="__codelineno-8-16" href="#__codelineno-8-16"></a>        <span class="n">algorithms</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;md5&#39;</span><span class="p">,</span> <span class="s1">&#39;sha1&#39;</span><span class="p">,</span> <span class="s1">&#39;sha256&#39;</span><span class="p">,</span> <span class="s1">&#39;sha384&#39;</span><span class="p">,</span> <span class="s1">&#39;sha512&#39;</span><span class="p">]</span>
</span><span id="__span-8-17"><a id="__codelineno-8-17" name="__codelineno-8-17" href="#__codelineno-8-17"></a>
</span><span id="__span-8-18"><a id="__codelineno-8-18" name="__codelineno-8-18" href="#__codelineno-8-18"></a>        <span class="k">for</span> <span class="n">algo</span> <span class="ow">in</span> <span class="n">algorithms</span><span class="p">:</span>
</span><span id="__span-8-19"><a id="__codelineno-8-19" name="__codelineno-8-19" href="#__codelineno-8-19"></a>            <span class="n">hasher</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">algo</span><span class="p">)</span>
</span><span id="__span-8-20"><a id="__codelineno-8-20" name="__codelineno-8-20" href="#__codelineno-8-20"></a>            <span class="n">hasher</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">encode</span><span class="p">())</span>
</span><span id="__span-8-21"><a id="__codelineno-8-21" name="__codelineno-8-21" href="#__codelineno-8-21"></a>            <span class="n">hash_value</span> <span class="o">=</span> <span class="n">hasher</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">()</span>
</span><span id="__span-8-22"><a id="__codelineno-8-22" name="__codelineno-8-22" href="#__codelineno-8-22"></a>
</span><span id="__span-8-23"><a id="__codelineno-8-23" name="__codelineno-8-23" href="#__codelineno-8-23"></a>            <span class="n">security_status</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="__span-8-24"><a id="__codelineno-8-24" name="__codelineno-8-24" href="#__codelineno-8-24"></a>                <span class="s1">&#39;md5&#39;</span><span class="p">:</span> <span class="s1">&#39;ğŸ”´ BROKEN - Don</span><span class="se">\&#39;</span><span class="s1">t use&#39;</span><span class="p">,</span>
</span><span id="__span-8-25"><a id="__codelineno-8-25" name="__codelineno-8-25" href="#__codelineno-8-25"></a>                <span class="s1">&#39;sha1&#39;</span><span class="p">:</span> <span class="s1">&#39;ğŸŸ  WEAK - Avoid&#39;</span><span class="p">,</span>
</span><span id="__span-8-26"><a id="__codelineno-8-26" name="__codelineno-8-26" href="#__codelineno-8-26"></a>                <span class="s1">&#39;sha256&#39;</span><span class="p">:</span> <span class="s1">&#39;ğŸŸ¢ SECURE - Recommended&#39;</span><span class="p">,</span>
</span><span id="__span-8-27"><a id="__codelineno-8-27" name="__codelineno-8-27" href="#__codelineno-8-27"></a>                <span class="s1">&#39;sha384&#39;</span><span class="p">:</span> <span class="s1">&#39;ğŸŸ¢ SECURE - Good choice&#39;</span><span class="p">,</span>
</span><span id="__span-8-28"><a id="__codelineno-8-28" name="__codelineno-8-28" href="#__codelineno-8-28"></a>                <span class="s1">&#39;sha512&#39;</span><span class="p">:</span> <span class="s1">&#39;ğŸŸ¢ SECURE - Strongest&#39;</span>
</span><span id="__span-8-29"><a id="__codelineno-8-29" name="__codelineno-8-29" href="#__codelineno-8-29"></a>            <span class="p">}</span>
</span><span id="__span-8-30"><a id="__codelineno-8-30" name="__codelineno-8-30" href="#__codelineno-8-30"></a>
</span><span id="__span-8-31"><a id="__codelineno-8-31" name="__codelineno-8-31" href="#__codelineno-8-31"></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">algo</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">hash_value</span><span class="p">[:</span><span class="mi">20</span><span class="p">]</span><span class="si">}</span><span class="s2">... </span><span class="si">{</span><span class="n">security_status</span><span class="p">[</span><span class="n">algo</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-8-32"><a id="__codelineno-8-32" name="__codelineno-8-32" href="#__codelineno-8-32"></a>
</span><span id="__span-8-33"><a id="__codelineno-8-33" name="__codelineno-8-33" href="#__codelineno-8-33"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">demonstrate_integrity_check</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">original_data</span><span class="p">,</span> <span class="n">modified_data</span><span class="p">):</span>
</span><span id="__span-8-34"><a id="__codelineno-8-34" name="__codelineno-8-34" href="#__codelineno-8-34"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Show how hash detects data tampering&quot;&quot;&quot;</span>
</span><span id="__span-8-35"><a id="__codelineno-8-35" name="__codelineno-8-35" href="#__codelineno-8-35"></a>
</span><span id="__span-8-36"><a id="__codelineno-8-36" name="__codelineno-8-36" href="#__codelineno-8-36"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">ğŸ›¡ï¸ Data Integrity Check Demo&quot;</span><span class="p">)</span>
</span><span id="__span-8-37"><a id="__codelineno-8-37" name="__codelineno-8-37" href="#__codelineno-8-37"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;-&quot;</span> <span class="o">*</span> <span class="mi">40</span><span class="p">)</span>
</span><span id="__span-8-38"><a id="__codelineno-8-38" name="__codelineno-8-38" href="#__codelineno-8-38"></a>
</span><span id="__span-8-39"><a id="__codelineno-8-39" name="__codelineno-8-39" href="#__codelineno-8-39"></a>        <span class="c1"># Hash original data</span>
</span><span id="__span-8-40"><a id="__codelineno-8-40" name="__codelineno-8-40" href="#__codelineno-8-40"></a>        <span class="n">original_hash</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">(</span><span class="n">original_data</span><span class="o">.</span><span class="n">encode</span><span class="p">())</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">()</span>
</span><span id="__span-8-41"><a id="__codelineno-8-41" name="__codelineno-8-41" href="#__codelineno-8-41"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Original data: &#39;</span><span class="si">{</span><span class="n">original_data</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
</span><span id="__span-8-42"><a id="__codelineno-8-42" name="__codelineno-8-42" href="#__codelineno-8-42"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Original hash: </span><span class="si">{</span><span class="n">original_hash</span><span class="p">[:</span><span class="mi">32</span><span class="p">]</span><span class="si">}</span><span class="s2">...&quot;</span><span class="p">)</span>
</span><span id="__span-8-43"><a id="__codelineno-8-43" name="__codelineno-8-43" href="#__codelineno-8-43"></a>
</span><span id="__span-8-44"><a id="__codelineno-8-44" name="__codelineno-8-44" href="#__codelineno-8-44"></a>        <span class="c1"># Hash modified data</span>
</span><span id="__span-8-45"><a id="__codelineno-8-45" name="__codelineno-8-45" href="#__codelineno-8-45"></a>        <span class="n">modified_hash</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">(</span><span class="n">modified_data</span><span class="o">.</span><span class="n">encode</span><span class="p">())</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">()</span>
</span><span id="__span-8-46"><a id="__codelineno-8-46" name="__codelineno-8-46" href="#__codelineno-8-46"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Modified data: &#39;</span><span class="si">{</span><span class="n">modified_data</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
</span><span id="__span-8-47"><a id="__codelineno-8-47" name="__codelineno-8-47" href="#__codelineno-8-47"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Modified hash: </span><span class="si">{</span><span class="n">modified_hash</span><span class="p">[:</span><span class="mi">32</span><span class="p">]</span><span class="si">}</span><span class="s2">...&quot;</span><span class="p">)</span>
</span><span id="__span-8-48"><a id="__codelineno-8-48" name="__codelineno-8-48" href="#__codelineno-8-48"></a>
</span><span id="__span-8-49"><a id="__codelineno-8-49" name="__codelineno-8-49" href="#__codelineno-8-49"></a>        <span class="c1"># Compare hashes</span>
</span><span id="__span-8-50"><a id="__codelineno-8-50" name="__codelineno-8-50" href="#__codelineno-8-50"></a>        <span class="k">if</span> <span class="n">original_hash</span> <span class="o">==</span> <span class="n">modified_hash</span><span class="p">:</span>
</span><span id="__span-8-51"><a id="__codelineno-8-51" name="__codelineno-8-51" href="#__codelineno-8-51"></a>            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">âœ… Data integrity verified - No tampering detected&quot;</span><span class="p">)</span>
</span><span id="__span-8-52"><a id="__codelineno-8-52" name="__codelineno-8-52" href="#__codelineno-8-52"></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="__span-8-53"><a id="__codelineno-8-53" name="__codelineno-8-53" href="#__codelineno-8-53"></a>            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">âŒ Data integrity compromised - Tampering detected!&quot;</span><span class="p">)</span>
</span><span id="__span-8-54"><a id="__codelineno-8-54" name="__codelineno-8-54" href="#__codelineno-8-54"></a>
</span><span id="__span-8-55"><a id="__codelineno-8-55" name="__codelineno-8-55" href="#__codelineno-8-55"></a>        <span class="k">return</span> <span class="n">original_hash</span> <span class="o">==</span> <span class="n">modified_hash</span>
</span><span id="__span-8-56"><a id="__codelineno-8-56" name="__codelineno-8-56" href="#__codelineno-8-56"></a>
</span><span id="__span-8-57"><a id="__codelineno-8-57" name="__codelineno-8-57" href="#__codelineno-8-57"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">hmac_authentication</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">):</span>
</span><span id="__span-8-58"><a id="__codelineno-8-58" name="__codelineno-8-58" href="#__codelineno-8-58"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Demonstrate HMAC for message authentication&quot;&quot;&quot;</span>
</span><span id="__span-8-59"><a id="__codelineno-8-59" name="__codelineno-8-59" href="#__codelineno-8-59"></a>
</span><span id="__span-8-60"><a id="__codelineno-8-60" name="__codelineno-8-60" href="#__codelineno-8-60"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">ğŸ” HMAC Message Authentication&quot;</span><span class="p">)</span>
</span><span id="__span-8-61"><a id="__codelineno-8-61" name="__codelineno-8-61" href="#__codelineno-8-61"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;-&quot;</span> <span class="o">*</span> <span class="mi">40</span><span class="p">)</span>
</span><span id="__span-8-62"><a id="__codelineno-8-62" name="__codelineno-8-62" href="#__codelineno-8-62"></a>
</span><span id="__span-8-63"><a id="__codelineno-8-63" name="__codelineno-8-63" href="#__codelineno-8-63"></a>        <span class="c1"># Create HMAC</span>
</span><span id="__span-8-64"><a id="__codelineno-8-64" name="__codelineno-8-64" href="#__codelineno-8-64"></a>        <span class="n">mac</span> <span class="o">=</span> <span class="n">hmac</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">secret_key</span><span class="p">,</span> <span class="n">message</span><span class="o">.</span><span class="n">encode</span><span class="p">(),</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">)</span>
</span><span id="__span-8-65"><a id="__codelineno-8-65" name="__codelineno-8-65" href="#__codelineno-8-65"></a>        <span class="n">mac_value</span> <span class="o">=</span> <span class="n">mac</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">()</span>
</span><span id="__span-8-66"><a id="__codelineno-8-66" name="__codelineno-8-66" href="#__codelineno-8-66"></a>
</span><span id="__span-8-67"><a id="__codelineno-8-67" name="__codelineno-8-67" href="#__codelineno-8-67"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Message: &#39;</span><span class="si">{</span><span class="n">message</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
</span><span id="__span-8-68"><a id="__codelineno-8-68" name="__codelineno-8-68" href="#__codelineno-8-68"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;HMAC: </span><span class="si">{</span><span class="n">mac_value</span><span class="p">[:</span><span class="mi">32</span><span class="p">]</span><span class="si">}</span><span class="s2">...&quot;</span><span class="p">)</span>
</span><span id="__span-8-69"><a id="__codelineno-8-69" name="__codelineno-8-69" href="#__codelineno-8-69"></a>
</span><span id="__span-8-70"><a id="__codelineno-8-70" name="__codelineno-8-70" href="#__codelineno-8-70"></a>        <span class="c1"># Verify HMAC</span>
</span><span id="__span-8-71"><a id="__codelineno-8-71" name="__codelineno-8-71" href="#__codelineno-8-71"></a>        <span class="n">verification_mac</span> <span class="o">=</span> <span class="n">hmac</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">secret_key</span><span class="p">,</span> <span class="n">message</span><span class="o">.</span><span class="n">encode</span><span class="p">(),</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">)</span>
</span><span id="__span-8-72"><a id="__codelineno-8-72" name="__codelineno-8-72" href="#__codelineno-8-72"></a>
</span><span id="__span-8-73"><a id="__codelineno-8-73" name="__codelineno-8-73" href="#__codelineno-8-73"></a>        <span class="k">if</span> <span class="n">hmac</span><span class="o">.</span><span class="n">compare_digest</span><span class="p">(</span><span class="n">mac_value</span><span class="p">,</span> <span class="n">verification_mac</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">()):</span>
</span><span id="__span-8-74"><a id="__codelineno-8-74" name="__codelineno-8-74" href="#__codelineno-8-74"></a>            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;âœ… HMAC verification successful - Message authenticated&quot;</span><span class="p">)</span>
</span><span id="__span-8-75"><a id="__codelineno-8-75" name="__codelineno-8-75" href="#__codelineno-8-75"></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="__span-8-76"><a id="__codelineno-8-76" name="__codelineno-8-76" href="#__codelineno-8-76"></a>            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;âŒ HMAC verification failed - Message not authentic&quot;</span><span class="p">)</span>
</span><span id="__span-8-77"><a id="__codelineno-8-77" name="__codelineno-8-77" href="#__codelineno-8-77"></a>
</span><span id="__span-8-78"><a id="__codelineno-8-78" name="__codelineno-8-78" href="#__codelineno-8-78"></a>        <span class="k">return</span> <span class="n">mac_value</span>
</span><span id="__span-8-79"><a id="__codelineno-8-79" name="__codelineno-8-79" href="#__codelineno-8-79"></a>
</span><span id="__span-8-80"><a id="__codelineno-8-80" name="__codelineno-8-80" href="#__codelineno-8-80"></a><span class="c1"># Integrity demonstration</span>
</span><span id="__span-8-81"><a id="__codelineno-8-81" name="__codelineno-8-81" href="#__codelineno-8-81"></a><span class="n">integrity_demo</span> <span class="o">=</span> <span class="n">DataIntegrityDemo</span><span class="p">()</span>
</span><span id="__span-8-82"><a id="__codelineno-8-82" name="__codelineno-8-82" href="#__codelineno-8-82"></a>
</span><span id="__span-8-83"><a id="__codelineno-8-83" name="__codelineno-8-83" href="#__codelineno-8-83"></a><span class="c1"># Hash comparison</span>
</span><span id="__span-8-84"><a id="__codelineno-8-84" name="__codelineno-8-84" href="#__codelineno-8-84"></a><span class="n">integrity_demo</span><span class="o">.</span><span class="n">hash_comparison</span><span class="p">(</span><span class="s2">&quot;Hello, World!&quot;</span><span class="p">)</span>
</span><span id="__span-8-85"><a id="__codelineno-8-85" name="__codelineno-8-85" href="#__codelineno-8-85"></a>
</span><span id="__span-8-86"><a id="__codelineno-8-86" name="__codelineno-8-86" href="#__codelineno-8-86"></a><span class="c1"># Integrity check</span>
</span><span id="__span-8-87"><a id="__codelineno-8-87" name="__codelineno-8-87" href="#__codelineno-8-87"></a><span class="n">integrity_demo</span><span class="o">.</span><span class="n">demonstrate_integrity_check</span><span class="p">(</span>
</span><span id="__span-8-88"><a id="__codelineno-8-88" name="__codelineno-8-88" href="#__codelineno-8-88"></a>    <span class="s2">&quot;Transfer $100 to Account A&quot;</span><span class="p">,</span>
</span><span id="__span-8-89"><a id="__codelineno-8-89" name="__codelineno-8-89" href="#__codelineno-8-89"></a>    <span class="s2">&quot;Transfer $1000 to Account B&quot;</span>  <span class="c1"># Tampered data</span>
</span><span id="__span-8-90"><a id="__codelineno-8-90" name="__codelineno-8-90" href="#__codelineno-8-90"></a><span class="p">)</span>
</span><span id="__span-8-91"><a id="__codelineno-8-91" name="__codelineno-8-91" href="#__codelineno-8-91"></a>
</span><span id="__span-8-92"><a id="__codelineno-8-92" name="__codelineno-8-92" href="#__codelineno-8-92"></a><span class="c1"># HMAC authentication</span>
</span><span id="__span-8-93"><a id="__codelineno-8-93" name="__codelineno-8-93" href="#__codelineno-8-93"></a><span class="n">integrity_demo</span><span class="o">.</span><span class="n">hmac_authentication</span><span class="p">(</span><span class="s2">&quot;API request: GET /user/profile&quot;</span><span class="p">)</span>
</span></code></pre></div>
</details>
<h4 id="common-web-security-vulnerabilities-and-prevention"><strong>Common Web Security Vulnerabilities and Prevention</strong><a class="headerlink" href="#common-web-security-vulnerabilities-and-prevention" title="Permanent link">&para;</a></h4>
<p><strong>The OWASP Top 10 (2021) with Prevention Strategies:</strong></p>
<p><strong>OWASP Top 10 (2021) with Prevention Strategies:</strong></p>
<ul>
<li>
<p><strong>ğŸ”“ Broken Access Control</strong><br />
<em>Risk:</em> Users can access unauthorized data/functions<br />
<em>Prevention:</em> Implement proper authorization checks, deny by default</p>
</li>
<li>
<p><strong>ğŸ’‰ Cryptographic Failures</strong><br />
<em>Risk:</em> Sensitive data exposed due to weak encryption<br />
<em>Prevention:</em> Use strong encryption, proper key management</p>
</li>
<li>
<p><strong>ğŸ¦  Injection Attacks</strong><br />
<em>Risk:</em> Malicious code executed via user input<br />
<em>Prevention:</em> Input validation, parameterized queries, sanitization</p>
</li>
<li>
<p><strong>ğŸ—ï¸ Insecure Design</strong><br />
<em>Risk:</em> Fundamental security flaws in application architecture<br />
<em>Prevention:</em> Security by design, threat modeling, secure coding practices</p>
</li>
<li>
<p><strong>âš™ï¸ Security Misconfiguration</strong><br />
<em>Risk:</em> Default/weak configurations expose vulnerabilities<br />
<em>Prevention:</em> Security hardening, regular updates, configuration reviews</p>
</li>
</ul>
<p><strong>Practical Security Implementation:</strong></p>
<details class="example">
<summary>ğŸ›¡ï¸ Web Security Guard - Client-side Security Implementation</summary>
<div class="language-javascript highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="c1">// Client-side security best practices</span>
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a><span class="kd">class</span><span class="w"> </span><span class="nx">WebSecurityGuard</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-9-3"><a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a><span class="w">    </span><span class="kr">constructor</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-9-4"><a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">initializeSecurityHeaders</span><span class="p">();</span>
</span><span id="__span-9-5"><a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">setupCSP</span><span class="p">();</span>
</span><span id="__span-9-6"><a id="__codelineno-9-6" name="__codelineno-9-6" href="#__codelineno-9-6"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-9-7"><a id="__codelineno-9-7" name="__codelineno-9-7" href="#__codelineno-9-7"></a>
</span><span id="__span-9-8"><a id="__codelineno-9-8" name="__codelineno-9-8" href="#__codelineno-9-8"></a><span class="w">    </span><span class="nx">initializeSecurityHeaders</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-9-9"><a id="__codelineno-9-9" name="__codelineno-9-9" href="#__codelineno-9-9"></a><span class="w">        </span><span class="c1">// Set security headers (would be done server-side in production)</span>
</span><span id="__span-9-10"><a id="__codelineno-9-10" name="__codelineno-9-10" href="#__codelineno-9-10"></a><span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">headers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-9-11"><a id="__codelineno-9-11" name="__codelineno-9-11" href="#__codelineno-9-11"></a><span class="w">            </span><span class="s1">&#39;X-Content-Type-Options&#39;</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;nosniff&#39;</span><span class="p">,</span>
</span><span id="__span-9-12"><a id="__codelineno-9-12" name="__codelineno-9-12" href="#__codelineno-9-12"></a><span class="w">            </span><span class="s1">&#39;X-Frame-Options&#39;</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;DENY&#39;</span><span class="p">,</span>
</span><span id="__span-9-13"><a id="__codelineno-9-13" name="__codelineno-9-13" href="#__codelineno-9-13"></a><span class="w">            </span><span class="s1">&#39;X-XSS-Protection&#39;</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;1; mode=block&#39;</span><span class="p">,</span>
</span><span id="__span-9-14"><a id="__codelineno-9-14" name="__codelineno-9-14" href="#__codelineno-9-14"></a><span class="w">            </span><span class="s1">&#39;Strict-Transport-Security&#39;</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;max-age=31536000; includeSubDomains&#39;</span>
</span><span id="__span-9-15"><a id="__codelineno-9-15" name="__codelineno-9-15" href="#__codelineno-9-15"></a><span class="w">        </span><span class="p">};</span>
</span><span id="__span-9-16"><a id="__codelineno-9-16" name="__codelineno-9-16" href="#__codelineno-9-16"></a>
</span><span id="__span-9-17"><a id="__codelineno-9-17" name="__codelineno-9-17" href="#__codelineno-9-17"></a><span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;ğŸ›¡ï¸ Security headers configured:&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">headers</span><span class="p">);</span>
</span><span id="__span-9-18"><a id="__codelineno-9-18" name="__codelineno-9-18" href="#__codelineno-9-18"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-9-19"><a id="__codelineno-9-19" name="__codelineno-9-19" href="#__codelineno-9-19"></a>
</span><span id="__span-9-20"><a id="__codelineno-9-20" name="__codelineno-9-20" href="#__codelineno-9-20"></a><span class="w">    </span><span class="nx">sanitizeInput</span><span class="p">(</span><span class="nx">userInput</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-9-21"><a id="__codelineno-9-21" name="__codelineno-9-21" href="#__codelineno-9-21"></a><span class="w">        </span><span class="c1">// Basic XSS prevention</span>
</span><span id="__span-9-22"><a id="__codelineno-9-22" name="__codelineno-9-22" href="#__codelineno-9-22"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">userInput</span>
</span><span id="__span-9-23"><a id="__codelineno-9-23" name="__codelineno-9-23" href="#__codelineno-9-23"></a><span class="w">            </span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/&lt;/g</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;&amp;lt;&#39;</span><span class="p">)</span>
</span><span id="__span-9-24"><a id="__codelineno-9-24" name="__codelineno-9-24" href="#__codelineno-9-24"></a><span class="w">            </span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/&gt;/g</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;&amp;gt;&#39;</span><span class="p">)</span>
</span><span id="__span-9-25"><a id="__codelineno-9-25" name="__codelineno-9-25" href="#__codelineno-9-25"></a><span class="w">            </span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/&quot;/g</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;&amp;quot;&#39;</span><span class="p">)</span>
</span><span id="__span-9-26"><a id="__codelineno-9-26" name="__codelineno-9-26" href="#__codelineno-9-26"></a><span class="w">            </span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/&#39;/g</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;&amp;#x27;&#39;</span><span class="p">)</span>
</span><span id="__span-9-27"><a id="__codelineno-9-27" name="__codelineno-9-27" href="#__codelineno-9-27"></a><span class="w">            </span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\//g</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;&amp;#x2F;&#39;</span><span class="p">);</span>
</span><span id="__span-9-28"><a id="__codelineno-9-28" name="__codelineno-9-28" href="#__codelineno-9-28"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-9-29"><a id="__codelineno-9-29" name="__codelineno-9-29" href="#__codelineno-9-29"></a>
</span><span id="__span-9-30"><a id="__codelineno-9-30" name="__codelineno-9-30" href="#__codelineno-9-30"></a><span class="w">    </span><span class="nx">validateInput</span><span class="p">(</span><span class="nx">input</span><span class="p">,</span><span class="w"> </span><span class="nx">type</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-9-31"><a id="__codelineno-9-31" name="__codelineno-9-31" href="#__codelineno-9-31"></a><span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">validators</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-9-32"><a id="__codelineno-9-32" name="__codelineno-9-32" href="#__codelineno-9-32"></a><span class="w">            </span><span class="nx">email</span><span class="o">:</span><span class="w"> </span><span class="sr">/^[^\s@]+@[^\s@]+\.[^\s@]+$/</span><span class="p">,</span>
</span><span id="__span-9-33"><a id="__codelineno-9-33" name="__codelineno-9-33" href="#__codelineno-9-33"></a><span class="w">            </span><span class="nx">url</span><span class="o">:</span><span class="w"> </span><span class="sr">/^https?:\/\/.+/</span><span class="p">,</span>
</span><span id="__span-9-34"><a id="__codelineno-9-34" name="__codelineno-9-34" href="#__codelineno-9-34"></a><span class="w">            </span><span class="nx">alphanumeric</span><span class="o">:</span><span class="w"> </span><span class="sr">/^[a-zA-Z0-9]+$/</span>
</span><span id="__span-9-35"><a id="__codelineno-9-35" name="__codelineno-9-35" href="#__codelineno-9-35"></a><span class="w">        </span><span class="p">};</span>
</span><span id="__span-9-36"><a id="__codelineno-9-36" name="__codelineno-9-36" href="#__codelineno-9-36"></a>
</span><span id="__span-9-37"><a id="__codelineno-9-37" name="__codelineno-9-37" href="#__codelineno-9-37"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">validators</span><span class="p">[</span><span class="nx">type</span><span class="p">]</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="nx">validators</span><span class="p">[</span><span class="nx">type</span><span class="p">].</span><span class="nx">test</span><span class="p">(</span><span class="nx">input</span><span class="p">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span>
</span><span id="__span-9-38"><a id="__codelineno-9-38" name="__codelineno-9-38" href="#__codelineno-9-38"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-9-39"><a id="__codelineno-9-39" name="__codelineno-9-39" href="#__codelineno-9-39"></a>
</span><span id="__span-9-40"><a id="__codelineno-9-40" name="__codelineno-9-40" href="#__codelineno-9-40"></a><span class="w">    </span><span class="nx">setupCSP</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-9-41"><a id="__codelineno-9-41" name="__codelineno-9-41" href="#__codelineno-9-41"></a><span class="w">        </span><span class="c1">// Content Security Policy</span>
</span><span id="__span-9-42"><a id="__codelineno-9-42" name="__codelineno-9-42" href="#__codelineno-9-42"></a><span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">csp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;default-src &#39;self&#39;; script-src &#39;self&#39; &#39;unsafe-inline&#39;; style-src &#39;self&#39; &#39;unsafe-inline&#39;&quot;</span><span class="p">;</span>
</span><span id="__span-9-43"><a id="__codelineno-9-43" name="__codelineno-9-43" href="#__codelineno-9-43"></a><span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;ğŸ”’ Content Security Policy:&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">csp</span><span class="p">);</span>
</span><span id="__span-9-44"><a id="__codelineno-9-44" name="__codelineno-9-44" href="#__codelineno-9-44"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-9-45"><a id="__codelineno-9-45" name="__codelineno-9-45" href="#__codelineno-9-45"></a><span class="p">}</span>
</span><span id="__span-9-46"><a id="__codelineno-9-46" name="__codelineno-9-46" href="#__codelineno-9-46"></a>
</span><span id="__span-9-47"><a id="__codelineno-9-47" name="__codelineno-9-47" href="#__codelineno-9-47"></a><span class="c1">// Initialize security</span>
</span><span id="__span-9-48"><a id="__codelineno-9-48" name="__codelineno-9-48" href="#__codelineno-9-48"></a><span class="kd">const</span><span class="w"> </span><span class="nx">security</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">WebSecurityGuard</span><span class="p">();</span>
</span><span id="__span-9-49"><a id="__codelineno-9-49" name="__codelineno-9-49" href="#__codelineno-9-49"></a>
</span><span id="__span-9-50"><a id="__codelineno-9-50" name="__codelineno-9-50" href="#__codelineno-9-50"></a><span class="c1">// Example usage</span>
</span><span id="__span-9-51"><a id="__codelineno-9-51" name="__codelineno-9-51" href="#__codelineno-9-51"></a><span class="kd">const</span><span class="w"> </span><span class="nx">userInput</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;&lt;script&gt;alert(&#39;XSS&#39;)&lt;/script&gt;&quot;</span><span class="p">;</span>
</span><span id="__span-9-52"><a id="__codelineno-9-52" name="__codelineno-9-52" href="#__codelineno-9-52"></a><span class="kd">const</span><span class="w"> </span><span class="nx">sanitized</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">security</span><span class="p">.</span><span class="nx">sanitizeInput</span><span class="p">(</span><span class="nx">userInput</span><span class="p">);</span>
</span><span id="__span-9-53"><a id="__codelineno-9-53" name="__codelineno-9-53" href="#__codelineno-9-53"></a><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;Original:&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">userInput</span><span class="p">);</span>
</span><span id="__span-9-54"><a id="__codelineno-9-54" name="__codelineno-9-54" href="#__codelineno-9-54"></a><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;Sanitized:&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">sanitized</span><span class="p">);</span>
</span></code></pre></div>
</details>
<h3 id="big-data-web-architecture-building-systems-that-scale">Big Data &amp; Web Architecture: Building Systems That Scale ğŸ“ŠğŸ—ï¸<a class="headerlink" href="#big-data-web-architecture-building-systems-that-scale" title="Permanent link">&para;</a></h3>
<p>Modern web applications handle mind-boggling amounts of dataâ€”YouTube processes over 500 hours of video uploads every minute, Google handles 8.5 billion searches daily, and Netflix streams petabytes of content. Understanding how to architect systems that can handle this scale is crucial for any serious web developer.</p>
<h4 id="the-data-deluge-understanding-modern-scale"><strong>The Data Deluge: Understanding Modern Scale</strong><a class="headerlink" href="#the-data-deluge-understanding-modern-scale" title="Permanent link">&para;</a></h4>
<p><strong>Real-World Scale Examples:</strong></p>
<ul>
<li><strong>Facebook:</strong> 2.9 billion monthly active users, 350 million photos per day</li>
<li><strong>Twitter:</strong> 500 million tweets per day, 1.5 billion search queries daily  </li>
<li><strong>Amazon:</strong> 300 million active customers, 13 billion searches per month</li>
<li><strong>Netflix:</strong> 230 million subscribers, 1 billion hours watched weekly</li>
</ul>
<details class="example">
<summary>ğŸ—ï¸ Scalable Web Architecture - Distributed Systems Design</summary>
<div class="language-python highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">time</span>
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="kn">import</span><span class="w"> </span><span class="nn">random</span>
</span><span id="__span-10-3"><a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a><span class="kn">import</span><span class="w"> </span><span class="nn">threading</span>
</span><span id="__span-10-4"><a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a><span class="kn">import</span><span class="w"> </span><span class="nn">queue</span>
</span><span id="__span-10-5"><a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a><span class="kn">from</span><span class="w"> </span><span class="nn">collections</span><span class="w"> </span><span class="kn">import</span> <span class="n">defaultdict</span><span class="p">,</span> <span class="n">deque</span>
</span><span id="__span-10-6"><a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a><span class="kn">from</span><span class="w"> </span><span class="nn">datetime</span><span class="w"> </span><span class="kn">import</span> <span class="n">datetime</span><span class="p">,</span> <span class="n">timedelta</span>
</span><span id="__span-10-7"><a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a><span class="kn">import</span><span class="w"> </span><span class="nn">json</span>
</span><span id="__span-10-8"><a id="__codelineno-10-8" name="__codelineno-10-8" href="#__codelineno-10-8"></a>
</span><span id="__span-10-9"><a id="__codelineno-10-9" name="__codelineno-10-9" href="#__codelineno-10-9"></a><span class="k">class</span><span class="w"> </span><span class="nc">ScalableWebArchitecture</span><span class="p">:</span>
</span><span id="__span-10-10"><a id="__codelineno-10-10" name="__codelineno-10-10" href="#__codelineno-10-10"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Demonstration of scalable web architecture patterns&quot;&quot;&quot;</span>
</span><span id="__span-10-11"><a id="__codelineno-10-11" name="__codelineno-10-11" href="#__codelineno-10-11"></a>
</span><span id="__span-10-12"><a id="__codelineno-10-12" name="__codelineno-10-12" href="#__codelineno-10-12"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-10-13"><a id="__codelineno-10-13" name="__codelineno-10-13" href="#__codelineno-10-13"></a>        <span class="c1"># Simulated servers</span>
</span><span id="__span-10-14"><a id="__codelineno-10-14" name="__codelineno-10-14" href="#__codelineno-10-14"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">web_servers</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="__span-10-15"><a id="__codelineno-10-15" name="__codelineno-10-15" href="#__codelineno-10-15"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">database_servers</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="__span-10-16"><a id="__codelineno-10-16" name="__codelineno-10-16" href="#__codelineno-10-16"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">cache_servers</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="__span-10-17"><a id="__codelineno-10-17" name="__codelineno-10-17" href="#__codelineno-10-17"></a>
</span><span id="__span-10-18"><a id="__codelineno-10-18" name="__codelineno-10-18" href="#__codelineno-10-18"></a>        <span class="c1"># Load balancer</span>
</span><span id="__span-10-19"><a id="__codelineno-10-19" name="__codelineno-10-19" href="#__codelineno-10-19"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">load_balancer</span> <span class="o">=</span> <span class="n">LoadBalancer</span><span class="p">()</span>
</span><span id="__span-10-20"><a id="__codelineno-10-20" name="__codelineno-10-20" href="#__codelineno-10-20"></a>
</span><span id="__span-10-21"><a id="__codelineno-10-21" name="__codelineno-10-21" href="#__codelineno-10-21"></a>        <span class="c1"># Monitoring</span>
</span><span id="__span-10-22"><a id="__codelineno-10-22" name="__codelineno-10-22" href="#__codelineno-10-22"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">metrics</span> <span class="o">=</span> <span class="n">MetricsCollector</span><span class="p">()</span>
</span><span id="__span-10-23"><a id="__codelineno-10-23" name="__codelineno-10-23" href="#__codelineno-10-23"></a>
</span><span id="__span-10-24"><a id="__codelineno-10-24" name="__codelineno-10-24" href="#__codelineno-10-24"></a>        <span class="c1"># Data processing</span>
</span><span id="__span-10-25"><a id="__codelineno-10-25" name="__codelineno-10-25" href="#__codelineno-10-25"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">stream_processor</span> <span class="o">=</span> <span class="n">StreamProcessor</span><span class="p">()</span>
</span><span id="__span-10-26"><a id="__codelineno-10-26" name="__codelineno-10-26" href="#__codelineno-10-26"></a>
</span><span id="__span-10-27"><a id="__codelineno-10-27" name="__codelineno-10-27" href="#__codelineno-10-27"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;ğŸ—ï¸ Initializing scalable web architecture...&quot;</span><span class="p">)</span>
</span><span id="__span-10-28"><a id="__codelineno-10-28" name="__codelineno-10-28" href="#__codelineno-10-28"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">setup_infrastructure</span><span class="p">()</span>
</span><span id="__span-10-29"><a id="__codelineno-10-29" name="__codelineno-10-29" href="#__codelineno-10-29"></a>
</span><span id="__span-10-30"><a id="__codelineno-10-30" name="__codelineno-10-30" href="#__codelineno-10-30"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">setup_infrastructure</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-10-31"><a id="__codelineno-10-31" name="__codelineno-10-31" href="#__codelineno-10-31"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize the distributed system components&quot;&quot;&quot;</span>
</span><span id="__span-10-32"><a id="__codelineno-10-32" name="__codelineno-10-32" href="#__codelineno-10-32"></a>
</span><span id="__span-10-33"><a id="__codelineno-10-33" name="__codelineno-10-33" href="#__codelineno-10-33"></a>        <span class="c1"># Create web server cluster</span>
</span><span id="__span-10-34"><a id="__codelineno-10-34" name="__codelineno-10-34" href="#__codelineno-10-34"></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
</span><span id="__span-10-35"><a id="__codelineno-10-35" name="__codelineno-10-35" href="#__codelineno-10-35"></a>            <span class="n">server</span> <span class="o">=</span> <span class="n">WebServer</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;web-</span><span class="si">{</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">capacity</span><span class="o">=</span><span class="mi">1000</span><span class="p">)</span>
</span><span id="__span-10-36"><a id="__codelineno-10-36" name="__codelineno-10-36" href="#__codelineno-10-36"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">web_servers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">server</span><span class="p">)</span>
</span><span id="__span-10-37"><a id="__codelineno-10-37" name="__codelineno-10-37" href="#__codelineno-10-37"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">load_balancer</span><span class="o">.</span><span class="n">add_server</span><span class="p">(</span><span class="n">server</span><span class="p">)</span>
</span><span id="__span-10-38"><a id="__codelineno-10-38" name="__codelineno-10-38" href="#__codelineno-10-38"></a>
</span><span id="__span-10-39"><a id="__codelineno-10-39" name="__codelineno-10-39" href="#__codelineno-10-39"></a>        <span class="c1"># Create database cluster with replication</span>
</span><span id="__span-10-40"><a id="__codelineno-10-40" name="__codelineno-10-40" href="#__codelineno-10-40"></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">):</span>
</span><span id="__span-10-41"><a id="__codelineno-10-41" name="__codelineno-10-41" href="#__codelineno-10-41"></a>            <span class="n">db_server</span> <span class="o">=</span> <span class="n">DatabaseServer</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;db-</span><span class="si">{</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">is_master</span><span class="o">=</span><span class="p">(</span><span class="n">i</span><span class="o">==</span><span class="mi">0</span><span class="p">))</span>
</span><span id="__span-10-42"><a id="__codelineno-10-42" name="__codelineno-10-42" href="#__codelineno-10-42"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">database_servers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">db_server</span><span class="p">)</span>
</span><span id="__span-10-43"><a id="__codelineno-10-43" name="__codelineno-10-43" href="#__codelineno-10-43"></a>
</span><span id="__span-10-44"><a id="__codelineno-10-44" name="__codelineno-10-44" href="#__codelineno-10-44"></a>        <span class="c1"># Create cache cluster</span>
</span><span id="__span-10-45"><a id="__codelineno-10-45" name="__codelineno-10-45" href="#__codelineno-10-45"></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">):</span>
</span><span id="__span-10-46"><a id="__codelineno-10-46" name="__codelineno-10-46" href="#__codelineno-10-46"></a>            <span class="n">cache_server</span> <span class="o">=</span> <span class="n">CacheServer</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;cache-</span><span class="si">{</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-10-47"><a id="__codelineno-10-47" name="__codelineno-10-47" href="#__codelineno-10-47"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">cache_servers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">cache_server</span><span class="p">)</span>
</span><span id="__span-10-48"><a id="__codelineno-10-48" name="__codelineno-10-48" href="#__codelineno-10-48"></a>
</span><span id="__span-10-49"><a id="__codelineno-10-49" name="__codelineno-10-49" href="#__codelineno-10-49"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;âœ… Infrastructure setup complete!&quot;</span><span class="p">)</span>
</span><span id="__span-10-50"><a id="__codelineno-10-50" name="__codelineno-10-50" href="#__codelineno-10-50"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Web servers: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">web_servers</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-10-51"><a id="__codelineno-10-51" name="__codelineno-10-51" href="#__codelineno-10-51"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Database servers: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">database_servers</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-10-52"><a id="__codelineno-10-52" name="__codelineno-10-52" href="#__codelineno-10-52"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Cache servers: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cache_servers</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-10-53"><a id="__codelineno-10-53" name="__codelineno-10-53" href="#__codelineno-10-53"></a>
</span><span id="__span-10-54"><a id="__codelineno-10-54" name="__codelineno-10-54" href="#__codelineno-10-54"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">simulate_traffic_spike</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">duration_seconds</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">requests_per_second</span><span class="o">=</span><span class="mi">500</span><span class="p">):</span>
</span><span id="__span-10-55"><a id="__codelineno-10-55" name="__codelineno-10-55" href="#__codelineno-10-55"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Simulate high traffic load to test scalability&quot;&quot;&quot;</span>
</span><span id="__span-10-56"><a id="__codelineno-10-56" name="__codelineno-10-56" href="#__codelineno-10-56"></a>
</span><span id="__span-10-57"><a id="__codelineno-10-57" name="__codelineno-10-57" href="#__codelineno-10-57"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">ğŸš€ SIMULATING TRAFFIC SPIKE&quot;</span><span class="p">)</span>
</span><span id="__span-10-58"><a id="__codelineno-10-58" name="__codelineno-10-58" href="#__codelineno-10-58"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Duration: </span><span class="si">{</span><span class="n">duration_seconds</span><span class="si">}</span><span class="s2">s, RPS: </span><span class="si">{</span><span class="n">requests_per_second</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-10-59"><a id="__codelineno-10-59" name="__codelineno-10-59" href="#__codelineno-10-59"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;=&quot;</span> <span class="o">*</span> <span class="mi">50</span><span class="p">)</span>
</span><span id="__span-10-60"><a id="__codelineno-10-60" name="__codelineno-10-60" href="#__codelineno-10-60"></a>
</span><span id="__span-10-61"><a id="__codelineno-10-61" name="__codelineno-10-61" href="#__codelineno-10-61"></a>        <span class="n">start_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
</span><span id="__span-10-62"><a id="__codelineno-10-62" name="__codelineno-10-62" href="#__codelineno-10-62"></a>        <span class="n">request_count</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="__span-10-63"><a id="__codelineno-10-63" name="__codelineno-10-63" href="#__codelineno-10-63"></a>        <span class="n">error_count</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="__span-10-64"><a id="__codelineno-10-64" name="__codelineno-10-64" href="#__codelineno-10-64"></a>
</span><span id="__span-10-65"><a id="__codelineno-10-65" name="__codelineno-10-65" href="#__codelineno-10-65"></a>        <span class="k">while</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start_time</span> <span class="o">&lt;</span> <span class="n">duration_seconds</span><span class="p">:</span>
</span><span id="__span-10-66"><a id="__codelineno-10-66" name="__codelineno-10-66" href="#__codelineno-10-66"></a>            <span class="n">batch_start</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
</span><span id="__span-10-67"><a id="__codelineno-10-67" name="__codelineno-10-67" href="#__codelineno-10-67"></a>
</span><span id="__span-10-68"><a id="__codelineno-10-68" name="__codelineno-10-68" href="#__codelineno-10-68"></a>            <span class="c1"># Send batch of requests</span>
</span><span id="__span-10-69"><a id="__codelineno-10-69" name="__codelineno-10-69" href="#__codelineno-10-69"></a>            <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">requests_per_second</span> <span class="o">//</span> <span class="mi">10</span><span class="p">):</span>  <span class="c1"># 10 batches per second</span>
</span><span id="__span-10-70"><a id="__codelineno-10-70" name="__codelineno-10-70" href="#__codelineno-10-70"></a>                <span class="k">try</span><span class="p">:</span>
</span><span id="__span-10-71"><a id="__codelineno-10-71" name="__codelineno-10-71" href="#__codelineno-10-71"></a>                    <span class="c1"># Simulate different types of requests</span>
</span><span id="__span-10-72"><a id="__codelineno-10-72" name="__codelineno-10-72" href="#__codelineno-10-72"></a>                    <span class="n">request_type</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">([</span><span class="s1">&#39;read&#39;</span><span class="p">,</span> <span class="s1">&#39;write&#39;</span><span class="p">,</span> <span class="s1">&#39;search&#39;</span><span class="p">,</span> <span class="s1">&#39;upload&#39;</span><span class="p">])</span>
</span><span id="__span-10-73"><a id="__codelineno-10-73" name="__codelineno-10-73" href="#__codelineno-10-73"></a>                    <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">handle_request</span><span class="p">(</span><span class="n">request_type</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;request_</span><span class="si">{</span><span class="n">request_count</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-10-74"><a id="__codelineno-10-74" name="__codelineno-10-74" href="#__codelineno-10-74"></a>
</span><span id="__span-10-75"><a id="__codelineno-10-75" name="__codelineno-10-75" href="#__codelineno-10-75"></a>                    <span class="k">if</span> <span class="n">response</span><span class="p">[</span><span class="s1">&#39;status&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;success&#39;</span><span class="p">:</span>
</span><span id="__span-10-76"><a id="__codelineno-10-76" name="__codelineno-10-76" href="#__codelineno-10-76"></a>                        <span class="n">request_count</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="__span-10-77"><a id="__codelineno-10-77" name="__codelineno-10-77" href="#__codelineno-10-77"></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="__span-10-78"><a id="__codelineno-10-78" name="__codelineno-10-78" href="#__codelineno-10-78"></a>                        <span class="n">error_count</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="__span-10-79"><a id="__codelineno-10-79" name="__codelineno-10-79" href="#__codelineno-10-79"></a>
</span><span id="__span-10-80"><a id="__codelineno-10-80" name="__codelineno-10-80" href="#__codelineno-10-80"></a>                <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="__span-10-81"><a id="__codelineno-10-81" name="__codelineno-10-81" href="#__codelineno-10-81"></a>                    <span class="n">error_count</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="__span-10-82"><a id="__codelineno-10-82" name="__codelineno-10-82" href="#__codelineno-10-82"></a>
</span><span id="__span-10-83"><a id="__codelineno-10-83" name="__codelineno-10-83" href="#__codelineno-10-83"></a>            <span class="c1"># Maintain timing</span>
</span><span id="__span-10-84"><a id="__codelineno-10-84" name="__codelineno-10-84" href="#__codelineno-10-84"></a>            <span class="n">batch_duration</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">batch_start</span>
</span><span id="__span-10-85"><a id="__codelineno-10-85" name="__codelineno-10-85" href="#__codelineno-10-85"></a>            <span class="k">if</span> <span class="n">batch_duration</span> <span class="o">&lt;</span> <span class="mf">0.1</span><span class="p">:</span>  <span class="c1"># 10 batches per second</span>
</span><span id="__span-10-86"><a id="__codelineno-10-86" name="__codelineno-10-86" href="#__codelineno-10-86"></a>                <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.1</span> <span class="o">-</span> <span class="n">batch_duration</span><span class="p">)</span>
</span><span id="__span-10-87"><a id="__codelineno-10-87" name="__codelineno-10-87" href="#__codelineno-10-87"></a>
</span><span id="__span-10-88"><a id="__codelineno-10-88" name="__codelineno-10-88" href="#__codelineno-10-88"></a>            <span class="c1"># Real-time metrics</span>
</span><span id="__span-10-89"><a id="__codelineno-10-89" name="__codelineno-10-89" href="#__codelineno-10-89"></a>            <span class="k">if</span> <span class="n">request_count</span> <span class="o">%</span> <span class="mi">100</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="__span-10-90"><a id="__codelineno-10-90" name="__codelineno-10-90" href="#__codelineno-10-90"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">metrics</span><span class="o">.</span><span class="n">log_performance</span><span class="p">()</span>
</span><span id="__span-10-91"><a id="__codelineno-10-91" name="__codelineno-10-91" href="#__codelineno-10-91"></a>
</span><span id="__span-10-92"><a id="__codelineno-10-92" name="__codelineno-10-92" href="#__codelineno-10-92"></a>        <span class="c1"># Final report</span>
</span><span id="__span-10-93"><a id="__codelineno-10-93" name="__codelineno-10-93" href="#__codelineno-10-93"></a>        <span class="n">total_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start_time</span>
</span><span id="__span-10-94"><a id="__codelineno-10-94" name="__codelineno-10-94" href="#__codelineno-10-94"></a>        <span class="n">success_rate</span> <span class="o">=</span> <span class="p">(</span><span class="n">request_count</span> <span class="o">/</span> <span class="p">(</span><span class="n">request_count</span> <span class="o">+</span> <span class="n">error_count</span><span class="p">))</span> <span class="o">*</span> <span class="mi">100</span>
</span><span id="__span-10-95"><a id="__codelineno-10-95" name="__codelineno-10-95" href="#__codelineno-10-95"></a>        <span class="n">actual_rps</span> <span class="o">=</span> <span class="n">request_count</span> <span class="o">/</span> <span class="n">total_time</span>
</span><span id="__span-10-96"><a id="__codelineno-10-96" name="__codelineno-10-96" href="#__codelineno-10-96"></a>
</span><span id="__span-10-97"><a id="__codelineno-10-97" name="__codelineno-10-97" href="#__codelineno-10-97"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">ğŸ“Š Traffic Spike Results:&quot;</span><span class="p">)</span>
</span><span id="__span-10-98"><a id="__codelineno-10-98" name="__codelineno-10-98" href="#__codelineno-10-98"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Total requests: </span><span class="si">{</span><span class="n">request_count</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-10-99"><a id="__codelineno-10-99" name="__codelineno-10-99" href="#__codelineno-10-99"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Errors: </span><span class="si">{</span><span class="n">error_count</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-10-100"><a id="__codelineno-10-100" name="__codelineno-10-100" href="#__codelineno-10-100"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Success rate: </span><span class="si">{</span><span class="n">success_rate</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">%&quot;</span><span class="p">)</span>
</span><span id="__span-10-101"><a id="__codelineno-10-101" name="__codelineno-10-101" href="#__codelineno-10-101"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Actual RPS: </span><span class="si">{</span><span class="n">actual_rps</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-10-102"><a id="__codelineno-10-102" name="__codelineno-10-102" href="#__codelineno-10-102"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Average response time: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">metrics</span><span class="o">.</span><span class="n">get_avg_response_time</span><span class="p">()</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2">s&quot;</span><span class="p">)</span>
</span><span id="__span-10-103"><a id="__codelineno-10-103" name="__codelineno-10-103" href="#__codelineno-10-103"></a>
</span><span id="__span-10-104"><a id="__codelineno-10-104" name="__codelineno-10-104" href="#__codelineno-10-104"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">handle_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request_type</span><span class="p">,</span> <span class="n">request_id</span><span class="p">):</span>
</span><span id="__span-10-105"><a id="__codelineno-10-105" name="__codelineno-10-105" href="#__codelineno-10-105"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Process different types of requests through the architecture&quot;&quot;&quot;</span>
</span><span id="__span-10-106"><a id="__codelineno-10-106" name="__codelineno-10-106" href="#__codelineno-10-106"></a>
</span><span id="__span-10-107"><a id="__codelineno-10-107" name="__codelineno-10-107" href="#__codelineno-10-107"></a>        <span class="n">start_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
</span><span id="__span-10-108"><a id="__codelineno-10-108" name="__codelineno-10-108" href="#__codelineno-10-108"></a>
</span><span id="__span-10-109"><a id="__codelineno-10-109" name="__codelineno-10-109" href="#__codelineno-10-109"></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="__span-10-110"><a id="__codelineno-10-110" name="__codelineno-10-110" href="#__codelineno-10-110"></a>            <span class="c1"># Route through load balancer</span>
</span><span id="__span-10-111"><a id="__codelineno-10-111" name="__codelineno-10-111" href="#__codelineno-10-111"></a>            <span class="n">server</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">load_balancer</span><span class="o">.</span><span class="n">get_next_server</span><span class="p">()</span>
</span><span id="__span-10-112"><a id="__codelineno-10-112" name="__codelineno-10-112" href="#__codelineno-10-112"></a>
</span><span id="__span-10-113"><a id="__codelineno-10-113" name="__codelineno-10-113" href="#__codelineno-10-113"></a>            <span class="k">if</span> <span class="n">request_type</span> <span class="o">==</span> <span class="s1">&#39;read&#39;</span><span class="p">:</span>
</span><span id="__span-10-114"><a id="__codelineno-10-114" name="__codelineno-10-114" href="#__codelineno-10-114"></a>                <span class="c1"># Try cache first, then database</span>
</span><span id="__span-10-115"><a id="__codelineno-10-115" name="__codelineno-10-115" href="#__codelineno-10-115"></a>                <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">handle_read_request</span><span class="p">(</span><span class="n">request_id</span><span class="p">)</span>
</span><span id="__span-10-116"><a id="__codelineno-10-116" name="__codelineno-10-116" href="#__codelineno-10-116"></a>            <span class="k">elif</span> <span class="n">request_type</span> <span class="o">==</span> <span class="s1">&#39;write&#39;</span><span class="p">:</span>
</span><span id="__span-10-117"><a id="__codelineno-10-117" name="__codelineno-10-117" href="#__codelineno-10-117"></a>                <span class="c1"># Write to database with cache invalidation</span>
</span><span id="__span-10-118"><a id="__codelineno-10-118" name="__codelineno-10-118" href="#__codelineno-10-118"></a>                <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">handle_write_request</span><span class="p">(</span><span class="n">request_id</span><span class="p">)</span>
</span><span id="__span-10-119"><a id="__codelineno-10-119" name="__codelineno-10-119" href="#__codelineno-10-119"></a>            <span class="k">elif</span> <span class="n">request_type</span> <span class="o">==</span> <span class="s1">&#39;search&#39;</span><span class="p">:</span>
</span><span id="__span-10-120"><a id="__codelineno-10-120" name="__codelineno-10-120" href="#__codelineno-10-120"></a>                <span class="c1"># Complex search operation</span>
</span><span id="__span-10-121"><a id="__codelineno-10-121" name="__codelineno-10-121" href="#__codelineno-10-121"></a>                <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">handle_search_request</span><span class="p">(</span><span class="n">request_id</span><span class="p">)</span>
</span><span id="__span-10-122"><a id="__codelineno-10-122" name="__codelineno-10-122" href="#__codelineno-10-122"></a>            <span class="k">elif</span> <span class="n">request_type</span> <span class="o">==</span> <span class="s1">&#39;upload&#39;</span><span class="p">:</span>
</span><span id="__span-10-123"><a id="__codelineno-10-123" name="__codelineno-10-123" href="#__codelineno-10-123"></a>                <span class="c1"># File upload processing</span>
</span><span id="__span-10-124"><a id="__codelineno-10-124" name="__codelineno-10-124" href="#__codelineno-10-124"></a>                <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">handle_upload_request</span><span class="p">(</span><span class="n">request_id</span><span class="p">)</span>
</span><span id="__span-10-125"><a id="__codelineno-10-125" name="__codelineno-10-125" href="#__codelineno-10-125"></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="__span-10-126"><a id="__codelineno-10-126" name="__codelineno-10-126" href="#__codelineno-10-126"></a>                <span class="n">result</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;Unknown request type&#39;</span><span class="p">}</span>
</span><span id="__span-10-127"><a id="__codelineno-10-127" name="__codelineno-10-127" href="#__codelineno-10-127"></a>
</span><span id="__span-10-128"><a id="__codelineno-10-128" name="__codelineno-10-128" href="#__codelineno-10-128"></a>            <span class="c1"># Record metrics</span>
</span><span id="__span-10-129"><a id="__codelineno-10-129" name="__codelineno-10-129" href="#__codelineno-10-129"></a>            <span class="n">response_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start_time</span>
</span><span id="__span-10-130"><a id="__codelineno-10-130" name="__codelineno-10-130" href="#__codelineno-10-130"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">metrics</span><span class="o">.</span><span class="n">record_request</span><span class="p">(</span><span class="n">request_type</span><span class="p">,</span> <span class="n">response_time</span><span class="p">,</span> <span class="n">result</span><span class="p">[</span><span class="s1">&#39;status&#39;</span><span class="p">])</span>
</span><span id="__span-10-131"><a id="__codelineno-10-131" name="__codelineno-10-131" href="#__codelineno-10-131"></a>
</span><span id="__span-10-132"><a id="__codelineno-10-132" name="__codelineno-10-132" href="#__codelineno-10-132"></a>            <span class="k">return</span> <span class="n">result</span>
</span><span id="__span-10-133"><a id="__codelineno-10-133" name="__codelineno-10-133" href="#__codelineno-10-133"></a>
</span><span id="__span-10-134"><a id="__codelineno-10-134" name="__codelineno-10-134" href="#__codelineno-10-134"></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="__span-10-135"><a id="__codelineno-10-135" name="__codelineno-10-135" href="#__codelineno-10-135"></a>            <span class="n">response_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start_time</span>
</span><span id="__span-10-136"><a id="__codelineno-10-136" name="__codelineno-10-136" href="#__codelineno-10-136"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">metrics</span><span class="o">.</span><span class="n">record_request</span><span class="p">(</span><span class="n">request_type</span><span class="p">,</span> <span class="n">response_time</span><span class="p">,</span> <span class="s1">&#39;error&#39;</span><span class="p">)</span>
</span><span id="__span-10-137"><a id="__codelineno-10-137" name="__codelineno-10-137" href="#__codelineno-10-137"></a>            <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)}</span>
</span><span id="__span-10-138"><a id="__codelineno-10-138" name="__codelineno-10-138" href="#__codelineno-10-138"></a>
</span><span id="__span-10-139"><a id="__codelineno-10-139" name="__codelineno-10-139" href="#__codelineno-10-139"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">handle_read_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request_id</span><span class="p">):</span>
</span><span id="__span-10-140"><a id="__codelineno-10-140" name="__codelineno-10-140" href="#__codelineno-10-140"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle read requests with caching&quot;&quot;&quot;</span>
</span><span id="__span-10-141"><a id="__codelineno-10-141" name="__codelineno-10-141" href="#__codelineno-10-141"></a>
</span><span id="__span-10-142"><a id="__codelineno-10-142" name="__codelineno-10-142" href="#__codelineno-10-142"></a>        <span class="c1"># Check cache first</span>
</span><span id="__span-10-143"><a id="__codelineno-10-143" name="__codelineno-10-143" href="#__codelineno-10-143"></a>        <span class="n">cache_server</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cache_servers</span><span class="p">)</span>
</span><span id="__span-10-144"><a id="__codelineno-10-144" name="__codelineno-10-144" href="#__codelineno-10-144"></a>        <span class="n">cached_data</span> <span class="o">=</span> <span class="n">cache_server</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">request_id</span><span class="p">)</span>
</span><span id="__span-10-145"><a id="__codelineno-10-145" name="__codelineno-10-145" href="#__codelineno-10-145"></a>
</span><span id="__span-10-146"><a id="__codelineno-10-146" name="__codelineno-10-146" href="#__codelineno-10-146"></a>        <span class="k">if</span> <span class="n">cached_data</span><span class="p">:</span>
</span><span id="__span-10-147"><a id="__codelineno-10-147" name="__codelineno-10-147" href="#__codelineno-10-147"></a>            <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;success&#39;</span><span class="p">,</span> <span class="s1">&#39;source&#39;</span><span class="p">:</span> <span class="s1">&#39;cache&#39;</span><span class="p">,</span> <span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="n">cached_data</span><span class="p">}</span>
</span><span id="__span-10-148"><a id="__codelineno-10-148" name="__codelineno-10-148" href="#__codelineno-10-148"></a>
</span><span id="__span-10-149"><a id="__codelineno-10-149" name="__codelineno-10-149" href="#__codelineno-10-149"></a>        <span class="c1"># Cache miss - read from database</span>
</span><span id="__span-10-150"><a id="__codelineno-10-150" name="__codelineno-10-150" href="#__codelineno-10-150"></a>        <span class="n">db_server</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_read_database</span><span class="p">()</span>
</span><span id="__span-10-151"><a id="__codelineno-10-151" name="__codelineno-10-151" href="#__codelineno-10-151"></a>        <span class="n">data</span> <span class="o">=</span> <span class="n">db_server</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">request_id</span><span class="p">)</span>
</span><span id="__span-10-152"><a id="__codelineno-10-152" name="__codelineno-10-152" href="#__codelineno-10-152"></a>
</span><span id="__span-10-153"><a id="__codelineno-10-153" name="__codelineno-10-153" href="#__codelineno-10-153"></a>        <span class="c1"># Cache the result</span>
</span><span id="__span-10-154"><a id="__codelineno-10-154" name="__codelineno-10-154" href="#__codelineno-10-154"></a>        <span class="n">cache_server</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">request_id</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
</span><span id="__span-10-155"><a id="__codelineno-10-155" name="__codelineno-10-155" href="#__codelineno-10-155"></a>
</span><span id="__span-10-156"><a id="__codelineno-10-156" name="__codelineno-10-156" href="#__codelineno-10-156"></a>        <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;success&#39;</span><span class="p">,</span> <span class="s1">&#39;source&#39;</span><span class="p">:</span> <span class="s1">&#39;database&#39;</span><span class="p">,</span> <span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="n">data</span><span class="p">}</span>
</span><span id="__span-10-157"><a id="__codelineno-10-157" name="__codelineno-10-157" href="#__codelineno-10-157"></a>
</span><span id="__span-10-158"><a id="__codelineno-10-158" name="__codelineno-10-158" href="#__codelineno-10-158"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">handle_write_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request_id</span><span class="p">):</span>
</span><span id="__span-10-159"><a id="__codelineno-10-159" name="__codelineno-10-159" href="#__codelineno-10-159"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle write requests with replication&quot;&quot;&quot;</span>
</span><span id="__span-10-160"><a id="__codelineno-10-160" name="__codelineno-10-160" href="#__codelineno-10-160"></a>
</span><span id="__span-10-161"><a id="__codelineno-10-161" name="__codelineno-10-161" href="#__codelineno-10-161"></a>        <span class="c1"># Write to master database</span>
</span><span id="__span-10-162"><a id="__codelineno-10-162" name="__codelineno-10-162" href="#__codelineno-10-162"></a>        <span class="n">master_db</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_master_database</span><span class="p">()</span>
</span><span id="__span-10-163"><a id="__codelineno-10-163" name="__codelineno-10-163" href="#__codelineno-10-163"></a>        <span class="n">result</span> <span class="o">=</span> <span class="n">master_db</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">request_id</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;data_for_</span><span class="si">{</span><span class="n">request_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-10-164"><a id="__codelineno-10-164" name="__codelineno-10-164" href="#__codelineno-10-164"></a>
</span><span id="__span-10-165"><a id="__codelineno-10-165" name="__codelineno-10-165" href="#__codelineno-10-165"></a>        <span class="c1"># Invalidate cache</span>
</span><span id="__span-10-166"><a id="__codelineno-10-166" name="__codelineno-10-166" href="#__codelineno-10-166"></a>        <span class="k">for</span> <span class="n">cache_server</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">cache_servers</span><span class="p">:</span>
</span><span id="__span-10-167"><a id="__codelineno-10-167" name="__codelineno-10-167" href="#__codelineno-10-167"></a>            <span class="n">cache_server</span><span class="o">.</span><span class="n">invalidate</span><span class="p">(</span><span class="n">request_id</span><span class="p">)</span>
</span><span id="__span-10-168"><a id="__codelineno-10-168" name="__codelineno-10-168" href="#__codelineno-10-168"></a>
</span><span id="__span-10-169"><a id="__codelineno-10-169" name="__codelineno-10-169" href="#__codelineno-10-169"></a>        <span class="c1"># Replicate to slave databases (async simulation)</span>
</span><span id="__span-10-170"><a id="__codelineno-10-170" name="__codelineno-10-170" href="#__codelineno-10-170"></a>        <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">replicate_to_slaves</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="n">request_id</span><span class="p">,))</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</span><span id="__span-10-171"><a id="__codelineno-10-171" name="__codelineno-10-171" href="#__codelineno-10-171"></a>
</span><span id="__span-10-172"><a id="__codelineno-10-172" name="__codelineno-10-172" href="#__codelineno-10-172"></a>        <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;success&#39;</span><span class="p">,</span> <span class="s1">&#39;action&#39;</span><span class="p">:</span> <span class="s1">&#39;write_completed&#39;</span><span class="p">}</span>
</span><span id="__span-10-173"><a id="__codelineno-10-173" name="__codelineno-10-173" href="#__codelineno-10-173"></a>
</span><span id="__span-10-174"><a id="__codelineno-10-174" name="__codelineno-10-174" href="#__codelineno-10-174"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_master_database</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-10-175"><a id="__codelineno-10-175" name="__codelineno-10-175" href="#__codelineno-10-175"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the master database server&quot;&quot;&quot;</span>
</span><span id="__span-10-176"><a id="__codelineno-10-176" name="__codelineno-10-176" href="#__codelineno-10-176"></a>        <span class="k">return</span> <span class="nb">next</span><span class="p">(</span><span class="n">db</span> <span class="k">for</span> <span class="n">db</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">database_servers</span> <span class="k">if</span> <span class="n">db</span><span class="o">.</span><span class="n">is_master</span><span class="p">)</span>
</span><span id="__span-10-177"><a id="__codelineno-10-177" name="__codelineno-10-177" href="#__codelineno-10-177"></a>
</span><span id="__span-10-178"><a id="__codelineno-10-178" name="__codelineno-10-178" href="#__codelineno-10-178"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_read_database</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-10-179"><a id="__codelineno-10-179" name="__codelineno-10-179" href="#__codelineno-10-179"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a database server for read operations (load balancing)&quot;&quot;&quot;</span>
</span><span id="__span-10-180"><a id="__codelineno-10-180" name="__codelineno-10-180" href="#__codelineno-10-180"></a>        <span class="k">return</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">database_servers</span><span class="p">)</span>
</span><span id="__span-10-181"><a id="__codelineno-10-181" name="__codelineno-10-181" href="#__codelineno-10-181"></a>
</span><span id="__span-10-182"><a id="__codelineno-10-182" name="__codelineno-10-182" href="#__codelineno-10-182"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">replicate_to_slaves</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request_id</span><span class="p">):</span>
</span><span id="__span-10-183"><a id="__codelineno-10-183" name="__codelineno-10-183" href="#__codelineno-10-183"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Replicate data to slave databases&quot;&quot;&quot;</span>
</span><span id="__span-10-184"><a id="__codelineno-10-184" name="__codelineno-10-184" href="#__codelineno-10-184"></a>        <span class="k">for</span> <span class="n">db_server</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">database_servers</span><span class="p">:</span>
</span><span id="__span-10-185"><a id="__codelineno-10-185" name="__codelineno-10-185" href="#__codelineno-10-185"></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">db_server</span><span class="o">.</span><span class="n">is_master</span><span class="p">:</span>
</span><span id="__span-10-186"><a id="__codelineno-10-186" name="__codelineno-10-186" href="#__codelineno-10-186"></a>                <span class="n">db_server</span><span class="o">.</span><span class="n">replicate</span><span class="p">(</span><span class="n">request_id</span><span class="p">)</span>
</span><span id="__span-10-187"><a id="__codelineno-10-187" name="__codelineno-10-187" href="#__codelineno-10-187"></a>
</span><span id="__span-10-188"><a id="__codelineno-10-188" name="__codelineno-10-188" href="#__codelineno-10-188"></a><span class="k">class</span><span class="w"> </span><span class="nc">LoadBalancer</span><span class="p">:</span>
</span><span id="__span-10-189"><a id="__codelineno-10-189" name="__codelineno-10-189" href="#__codelineno-10-189"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Simple round-robin load balancer&quot;&quot;&quot;</span>
</span><span id="__span-10-190"><a id="__codelineno-10-190" name="__codelineno-10-190" href="#__codelineno-10-190"></a>
</span><span id="__span-10-191"><a id="__codelineno-10-191" name="__codelineno-10-191" href="#__codelineno-10-191"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-10-192"><a id="__codelineno-10-192" name="__codelineno-10-192" href="#__codelineno-10-192"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">servers</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="__span-10-193"><a id="__codelineno-10-193" name="__codelineno-10-193" href="#__codelineno-10-193"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">current_index</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="__span-10-194"><a id="__codelineno-10-194" name="__codelineno-10-194" href="#__codelineno-10-194"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">server_health</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="__span-10-195"><a id="__codelineno-10-195" name="__codelineno-10-195" href="#__codelineno-10-195"></a>
</span><span id="__span-10-196"><a id="__codelineno-10-196" name="__codelineno-10-196" href="#__codelineno-10-196"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">add_server</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">server</span><span class="p">):</span>
</span><span id="__span-10-197"><a id="__codelineno-10-197" name="__codelineno-10-197" href="#__codelineno-10-197"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">servers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">server</span><span class="p">)</span>
</span><span id="__span-10-198"><a id="__codelineno-10-198" name="__codelineno-10-198" href="#__codelineno-10-198"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">server_health</span><span class="p">[</span><span class="n">server</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="__span-10-199"><a id="__codelineno-10-199" name="__codelineno-10-199" href="#__codelineno-10-199"></a>
</span><span id="__span-10-200"><a id="__codelineno-10-200" name="__codelineno-10-200" href="#__codelineno-10-200"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_next_server</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-10-201"><a id="__codelineno-10-201" name="__codelineno-10-201" href="#__codelineno-10-201"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get next available server using round-robin&quot;&quot;&quot;</span>
</span><span id="__span-10-202"><a id="__codelineno-10-202" name="__codelineno-10-202" href="#__codelineno-10-202"></a>
</span><span id="__span-10-203"><a id="__codelineno-10-203" name="__codelineno-10-203" href="#__codelineno-10-203"></a>        <span class="c1"># Health check and failover</span>
</span><span id="__span-10-204"><a id="__codelineno-10-204" name="__codelineno-10-204" href="#__codelineno-10-204"></a>        <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">servers</span><span class="p">)):</span>
</span><span id="__span-10-205"><a id="__codelineno-10-205" name="__codelineno-10-205" href="#__codelineno-10-205"></a>            <span class="n">server</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">servers</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">current_index</span><span class="p">]</span>
</span><span id="__span-10-206"><a id="__codelineno-10-206" name="__codelineno-10-206" href="#__codelineno-10-206"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">current_index</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">current_index</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">servers</span><span class="p">)</span>
</span><span id="__span-10-207"><a id="__codelineno-10-207" name="__codelineno-10-207" href="#__codelineno-10-207"></a>
</span><span id="__span-10-208"><a id="__codelineno-10-208" name="__codelineno-10-208" href="#__codelineno-10-208"></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">server_health</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">server</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span> <span class="ow">and</span> <span class="n">server</span><span class="o">.</span><span class="n">is_healthy</span><span class="p">():</span>
</span><span id="__span-10-209"><a id="__codelineno-10-209" name="__codelineno-10-209" href="#__codelineno-10-209"></a>                <span class="k">return</span> <span class="n">server</span>
</span><span id="__span-10-210"><a id="__codelineno-10-210" name="__codelineno-10-210" href="#__codelineno-10-210"></a>
</span><span id="__span-10-211"><a id="__codelineno-10-211" name="__codelineno-10-211" href="#__codelineno-10-211"></a>        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;No healthy servers available&quot;</span><span class="p">)</span>
</span><span id="__span-10-212"><a id="__codelineno-10-212" name="__codelineno-10-212" href="#__codelineno-10-212"></a>
</span><span id="__span-10-213"><a id="__codelineno-10-213" name="__codelineno-10-213" href="#__codelineno-10-213"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">mark_server_down</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">server_name</span><span class="p">):</span>
</span><span id="__span-10-214"><a id="__codelineno-10-214" name="__codelineno-10-214" href="#__codelineno-10-214"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">server_health</span><span class="p">[</span><span class="n">server_name</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="__span-10-215"><a id="__codelineno-10-215" name="__codelineno-10-215" href="#__codelineno-10-215"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;âš ï¸ Server </span><span class="si">{</span><span class="n">server_name</span><span class="si">}</span><span class="s2"> marked as down&quot;</span><span class="p">)</span>
</span><span id="__span-10-216"><a id="__codelineno-10-216" name="__codelineno-10-216" href="#__codelineno-10-216"></a>
</span><span id="__span-10-217"><a id="__codelineno-10-217" name="__codelineno-10-217" href="#__codelineno-10-217"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">mark_server_up</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">server_name</span><span class="p">):</span>
</span><span id="__span-10-218"><a id="__codelineno-10-218" name="__codelineno-10-218" href="#__codelineno-10-218"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">server_health</span><span class="p">[</span><span class="n">server_name</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="__span-10-219"><a id="__codelineno-10-219" name="__codelineno-10-219" href="#__codelineno-10-219"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;âœ… Server </span><span class="si">{</span><span class="n">server_name</span><span class="si">}</span><span class="s2"> back online&quot;</span><span class="p">)</span>
</span><span id="__span-10-220"><a id="__codelineno-10-220" name="__codelineno-10-220" href="#__codelineno-10-220"></a>
</span><span id="__span-10-221"><a id="__codelineno-10-221" name="__codelineno-10-221" href="#__codelineno-10-221"></a><span class="k">class</span><span class="w"> </span><span class="nc">WebServer</span><span class="p">:</span>
</span><span id="__span-10-222"><a id="__codelineno-10-222" name="__codelineno-10-222" href="#__codelineno-10-222"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Simulated web server with capacity limits&quot;&quot;&quot;</span>
</span><span id="__span-10-223"><a id="__codelineno-10-223" name="__codelineno-10-223" href="#__codelineno-10-223"></a>
</span><span id="__span-10-224"><a id="__codelineno-10-224" name="__codelineno-10-224" href="#__codelineno-10-224"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">capacity</span><span class="o">=</span><span class="mi">1000</span><span class="p">):</span>
</span><span id="__span-10-225"><a id="__codelineno-10-225" name="__codelineno-10-225" href="#__codelineno-10-225"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
</span><span id="__span-10-226"><a id="__codelineno-10-226" name="__codelineno-10-226" href="#__codelineno-10-226"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">capacity</span> <span class="o">=</span> <span class="n">capacity</span>
</span><span id="__span-10-227"><a id="__codelineno-10-227" name="__codelineno-10-227" href="#__codelineno-10-227"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">current_load</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="__span-10-228"><a id="__codelineno-10-228" name="__codelineno-10-228" href="#__codelineno-10-228"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">request_count</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="__span-10-229"><a id="__codelineno-10-229" name="__codelineno-10-229" href="#__codelineno-10-229"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">error_count</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="__span-10-230"><a id="__codelineno-10-230" name="__codelineno-10-230" href="#__codelineno-10-230"></a>
</span><span id="__span-10-231"><a id="__codelineno-10-231" name="__codelineno-10-231" href="#__codelineno-10-231"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">is_healthy</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-10-232"><a id="__codelineno-10-232" name="__codelineno-10-232" href="#__codelineno-10-232"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Check server health&quot;&quot;&quot;</span>
</span><span id="__span-10-233"><a id="__codelineno-10-233" name="__codelineno-10-233" href="#__codelineno-10-233"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_load</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">capacity</span> <span class="o">*</span> <span class="mf">0.9</span>  <span class="c1"># 90% capacity threshold</span>
</span><span id="__span-10-234"><a id="__codelineno-10-234" name="__codelineno-10-234" href="#__codelineno-10-234"></a>
</span><span id="__span-10-235"><a id="__codelineno-10-235" name="__codelineno-10-235" href="#__codelineno-10-235"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">process_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
</span><span id="__span-10-236"><a id="__codelineno-10-236" name="__codelineno-10-236" href="#__codelineno-10-236"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Process a request on this server&quot;&quot;&quot;</span>
</span><span id="__span-10-237"><a id="__codelineno-10-237" name="__codelineno-10-237" href="#__codelineno-10-237"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">current_load</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="__span-10-238"><a id="__codelineno-10-238" name="__codelineno-10-238" href="#__codelineno-10-238"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">request_count</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="__span-10-239"><a id="__codelineno-10-239" name="__codelineno-10-239" href="#__codelineno-10-239"></a>
</span><span id="__span-10-240"><a id="__codelineno-10-240" name="__codelineno-10-240" href="#__codelineno-10-240"></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="__span-10-241"><a id="__codelineno-10-241" name="__codelineno-10-241" href="#__codelineno-10-241"></a>            <span class="c1"># Simulate processing time</span>
</span><span id="__span-10-242"><a id="__codelineno-10-242" name="__codelineno-10-242" href="#__codelineno-10-242"></a>            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="mf">0.001</span><span class="p">,</span> <span class="mf">0.01</span><span class="p">))</span>
</span><span id="__span-10-243"><a id="__codelineno-10-243" name="__codelineno-10-243" href="#__codelineno-10-243"></a>
</span><span id="__span-10-244"><a id="__codelineno-10-244" name="__codelineno-10-244" href="#__codelineno-10-244"></a>            <span class="c1"># Simulate occasional failures under high load</span>
</span><span id="__span-10-245"><a id="__codelineno-10-245" name="__codelineno-10-245" href="#__codelineno-10-245"></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_load</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">capacity</span> <span class="o">*</span> <span class="mf">0.8</span> <span class="ow">and</span> <span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span> <span class="o">&lt;</span> <span class="mf">0.05</span><span class="p">:</span>
</span><span id="__span-10-246"><a id="__codelineno-10-246" name="__codelineno-10-246" href="#__codelineno-10-246"></a>                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Server overloaded&quot;</span><span class="p">)</span>
</span><span id="__span-10-247"><a id="__codelineno-10-247" name="__codelineno-10-247" href="#__codelineno-10-247"></a>
</span><span id="__span-10-248"><a id="__codelineno-10-248" name="__codelineno-10-248" href="#__codelineno-10-248"></a>            <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;success&#39;</span><span class="p">,</span> <span class="s1">&#39;server&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">}</span>
</span><span id="__span-10-249"><a id="__codelineno-10-249" name="__codelineno-10-249" href="#__codelineno-10-249"></a>
</span><span id="__span-10-250"><a id="__codelineno-10-250" name="__codelineno-10-250" href="#__codelineno-10-250"></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="__span-10-251"><a id="__codelineno-10-251" name="__codelineno-10-251" href="#__codelineno-10-251"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">error_count</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="__span-10-252"><a id="__codelineno-10-252" name="__codelineno-10-252" href="#__codelineno-10-252"></a>            <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)}</span>
</span><span id="__span-10-253"><a id="__codelineno-10-253" name="__codelineno-10-253" href="#__codelineno-10-253"></a>        <span class="k">finally</span><span class="p">:</span>
</span><span id="__span-10-254"><a id="__codelineno-10-254" name="__codelineno-10-254" href="#__codelineno-10-254"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">current_load</span> <span class="o">-=</span> <span class="mi">1</span>
</span><span id="__span-10-255"><a id="__codelineno-10-255" name="__codelineno-10-255" href="#__codelineno-10-255"></a>
</span><span id="__span-10-256"><a id="__codelineno-10-256" name="__codelineno-10-256" href="#__codelineno-10-256"></a><span class="k">class</span><span class="w"> </span><span class="nc">DatabaseServer</span><span class="p">:</span>
</span><span id="__span-10-257"><a id="__codelineno-10-257" name="__codelineno-10-257" href="#__codelineno-10-257"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Simulated database server with master/slave replication&quot;&quot;&quot;</span>
</span><span id="__span-10-258"><a id="__codelineno-10-258" name="__codelineno-10-258" href="#__codelineno-10-258"></a>
</span><span id="__span-10-259"><a id="__codelineno-10-259" name="__codelineno-10-259" href="#__codelineno-10-259"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">is_master</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
</span><span id="__span-10-260"><a id="__codelineno-10-260" name="__codelineno-10-260" href="#__codelineno-10-260"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
</span><span id="__span-10-261"><a id="__codelineno-10-261" name="__codelineno-10-261" href="#__codelineno-10-261"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">is_master</span> <span class="o">=</span> <span class="n">is_master</span>
</span><span id="__span-10-262"><a id="__codelineno-10-262" name="__codelineno-10-262" href="#__codelineno-10-262"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="__span-10-263"><a id="__codelineno-10-263" name="__codelineno-10-263" href="#__codelineno-10-263"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">transaction_log</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="__span-10-264"><a id="__codelineno-10-264" name="__codelineno-10-264" href="#__codelineno-10-264"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">read_count</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="__span-10-265"><a id="__codelineno-10-265" name="__codelineno-10-265" href="#__codelineno-10-265"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">write_count</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="__span-10-266"><a id="__codelineno-10-266" name="__codelineno-10-266" href="#__codelineno-10-266"></a>
</span><span id="__span-10-267"><a id="__codelineno-10-267" name="__codelineno-10-267" href="#__codelineno-10-267"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">read</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
</span><span id="__span-10-268"><a id="__codelineno-10-268" name="__codelineno-10-268" href="#__codelineno-10-268"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Read data from database&quot;&quot;&quot;</span>
</span><span id="__span-10-269"><a id="__codelineno-10-269" name="__codelineno-10-269" href="#__codelineno-10-269"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">read_count</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="__span-10-270"><a id="__codelineno-10-270" name="__codelineno-10-270" href="#__codelineno-10-270"></a>        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="mf">0.001</span><span class="p">,</span> <span class="mf">0.005</span><span class="p">))</span>  <span class="c1"># Simulate DB query time</span>
</span><span id="__span-10-271"><a id="__codelineno-10-271" name="__codelineno-10-271" href="#__codelineno-10-271"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;default_data_for_</span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-10-272"><a id="__codelineno-10-272" name="__codelineno-10-272" href="#__codelineno-10-272"></a>
</span><span id="__span-10-273"><a id="__codelineno-10-273" name="__codelineno-10-273" href="#__codelineno-10-273"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">write</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
</span><span id="__span-10-274"><a id="__codelineno-10-274" name="__codelineno-10-274" href="#__codelineno-10-274"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Write data to database&quot;&quot;&quot;</span>
</span><span id="__span-10-275"><a id="__codelineno-10-275" name="__codelineno-10-275" href="#__codelineno-10-275"></a>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_master</span><span class="p">:</span>
</span><span id="__span-10-276"><a id="__codelineno-10-276" name="__codelineno-10-276" href="#__codelineno-10-276"></a>            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Write operations only allowed on master&quot;</span><span class="p">)</span>
</span><span id="__span-10-277"><a id="__codelineno-10-277" name="__codelineno-10-277" href="#__codelineno-10-277"></a>
</span><span id="__span-10-278"><a id="__codelineno-10-278" name="__codelineno-10-278" href="#__codelineno-10-278"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">write_count</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="__span-10-279"><a id="__codelineno-10-279" name="__codelineno-10-279" href="#__codelineno-10-279"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
</span><span id="__span-10-280"><a id="__codelineno-10-280" name="__codelineno-10-280" href="#__codelineno-10-280"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">transaction_log</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="s1">&#39;key&#39;</span><span class="p">:</span> <span class="n">key</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="n">value</span><span class="p">,</span> <span class="s1">&#39;timestamp&#39;</span><span class="p">:</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()})</span>
</span><span id="__span-10-281"><a id="__codelineno-10-281" name="__codelineno-10-281" href="#__codelineno-10-281"></a>
</span><span id="__span-10-282"><a id="__codelineno-10-282" name="__codelineno-10-282" href="#__codelineno-10-282"></a>        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="mf">0.002</span><span class="p">,</span> <span class="mf">0.01</span><span class="p">))</span>  <span class="c1"># Simulate write time</span>
</span><span id="__span-10-283"><a id="__codelineno-10-283" name="__codelineno-10-283" href="#__codelineno-10-283"></a>        <span class="k">return</span> <span class="kc">True</span>
</span><span id="__span-10-284"><a id="__codelineno-10-284" name="__codelineno-10-284" href="#__codelineno-10-284"></a>
</span><span id="__span-10-285"><a id="__codelineno-10-285" name="__codelineno-10-285" href="#__codelineno-10-285"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">replicate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
</span><span id="__span-10-286"><a id="__codelineno-10-286" name="__codelineno-10-286" href="#__codelineno-10-286"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Replicate data from master&quot;&quot;&quot;</span>
</span><span id="__span-10-287"><a id="__codelineno-10-287" name="__codelineno-10-287" href="#__codelineno-10-287"></a>        <span class="c1"># Simulate replication delay</span>
</span><span id="__span-10-288"><a id="__codelineno-10-288" name="__codelineno-10-288" href="#__codelineno-10-288"></a>        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="mf">0.01</span><span class="p">,</span> <span class="mf">0.05</span><span class="p">))</span>
</span><span id="__span-10-289"><a id="__codelineno-10-289" name="__codelineno-10-289" href="#__codelineno-10-289"></a>        <span class="c1"># In real implementation, would sync from master</span>
</span><span id="__span-10-290"><a id="__codelineno-10-290" name="__codelineno-10-290" href="#__codelineno-10-290"></a>        <span class="k">pass</span>
</span><span id="__span-10-291"><a id="__codelineno-10-291" name="__codelineno-10-291" href="#__codelineno-10-291"></a>
</span><span id="__span-10-292"><a id="__codelineno-10-292" name="__codelineno-10-292" href="#__codelineno-10-292"></a><span class="k">class</span><span class="w"> </span><span class="nc">CacheServer</span><span class="p">:</span>
</span><span id="__span-10-293"><a id="__codelineno-10-293" name="__codelineno-10-293" href="#__codelineno-10-293"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Simulated in-memory cache server&quot;&quot;&quot;</span>
</span><span id="__span-10-294"><a id="__codelineno-10-294" name="__codelineno-10-294" href="#__codelineno-10-294"></a>
</span><span id="__span-10-295"><a id="__codelineno-10-295" name="__codelineno-10-295" href="#__codelineno-10-295"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">max_size</span><span class="o">=</span><span class="mi">10000</span><span class="p">):</span>
</span><span id="__span-10-296"><a id="__codelineno-10-296" name="__codelineno-10-296" href="#__codelineno-10-296"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
</span><span id="__span-10-297"><a id="__codelineno-10-297" name="__codelineno-10-297" href="#__codelineno-10-297"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">cache</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="__span-10-298"><a id="__codelineno-10-298" name="__codelineno-10-298" href="#__codelineno-10-298"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">max_size</span> <span class="o">=</span> <span class="n">max_size</span>
</span><span id="__span-10-299"><a id="__codelineno-10-299" name="__codelineno-10-299" href="#__codelineno-10-299"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">hit_count</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="__span-10-300"><a id="__codelineno-10-300" name="__codelineno-10-300" href="#__codelineno-10-300"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">miss_count</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="__span-10-301"><a id="__codelineno-10-301" name="__codelineno-10-301" href="#__codelineno-10-301"></a>
</span><span id="__span-10-302"><a id="__codelineno-10-302" name="__codelineno-10-302" href="#__codelineno-10-302"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
</span><span id="__span-10-303"><a id="__codelineno-10-303" name="__codelineno-10-303" href="#__codelineno-10-303"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get value from cache&quot;&quot;&quot;</span>
</span><span id="__span-10-304"><a id="__codelineno-10-304" name="__codelineno-10-304" href="#__codelineno-10-304"></a>        <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">cache</span><span class="p">:</span>
</span><span id="__span-10-305"><a id="__codelineno-10-305" name="__codelineno-10-305" href="#__codelineno-10-305"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">hit_count</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="__span-10-306"><a id="__codelineno-10-306" name="__codelineno-10-306" href="#__codelineno-10-306"></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">cache</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
</span><span id="__span-10-307"><a id="__codelineno-10-307" name="__codelineno-10-307" href="#__codelineno-10-307"></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="__span-10-308"><a id="__codelineno-10-308" name="__codelineno-10-308" href="#__codelineno-10-308"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">miss_count</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="__span-10-309"><a id="__codelineno-10-309" name="__codelineno-10-309" href="#__codelineno-10-309"></a>            <span class="k">return</span> <span class="kc">None</span>
</span><span id="__span-10-310"><a id="__codelineno-10-310" name="__codelineno-10-310" href="#__codelineno-10-310"></a>
</span><span id="__span-10-311"><a id="__codelineno-10-311" name="__codelineno-10-311" href="#__codelineno-10-311"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">set</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
</span><span id="__span-10-312"><a id="__codelineno-10-312" name="__codelineno-10-312" href="#__codelineno-10-312"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Set value in cache&quot;&quot;&quot;</span>
</span><span id="__span-10-313"><a id="__codelineno-10-313" name="__codelineno-10-313" href="#__codelineno-10-313"></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cache</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">max_size</span><span class="p">:</span>
</span><span id="__span-10-314"><a id="__codelineno-10-314" name="__codelineno-10-314" href="#__codelineno-10-314"></a>            <span class="c1"># Simple LRU eviction (remove oldest)</span>
</span><span id="__span-10-315"><a id="__codelineno-10-315" name="__codelineno-10-315" href="#__codelineno-10-315"></a>            <span class="n">oldest_key</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="nb">iter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cache</span><span class="p">))</span>
</span><span id="__span-10-316"><a id="__codelineno-10-316" name="__codelineno-10-316" href="#__codelineno-10-316"></a>            <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">cache</span><span class="p">[</span><span class="n">oldest_key</span><span class="p">]</span>
</span><span id="__span-10-317"><a id="__codelineno-10-317" name="__codelineno-10-317" href="#__codelineno-10-317"></a>
</span><span id="__span-10-318"><a id="__codelineno-10-318" name="__codelineno-10-318" href="#__codelineno-10-318"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">cache</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
</span><span id="__span-10-319"><a id="__codelineno-10-319" name="__codelineno-10-319" href="#__codelineno-10-319"></a>
</span><span id="__span-10-320"><a id="__codelineno-10-320" name="__codelineno-10-320" href="#__codelineno-10-320"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">invalidate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
</span><span id="__span-10-321"><a id="__codelineno-10-321" name="__codelineno-10-321" href="#__codelineno-10-321"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Remove key from cache&quot;&quot;&quot;</span>
</span><span id="__span-10-322"><a id="__codelineno-10-322" name="__codelineno-10-322" href="#__codelineno-10-322"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="__span-10-323"><a id="__codelineno-10-323" name="__codelineno-10-323" href="#__codelineno-10-323"></a>
</span><span id="__span-10-324"><a id="__codelineno-10-324" name="__codelineno-10-324" href="#__codelineno-10-324"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_hit_rate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-10-325"><a id="__codelineno-10-325" name="__codelineno-10-325" href="#__codelineno-10-325"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Calculate cache hit rate&quot;&quot;&quot;</span>
</span><span id="__span-10-326"><a id="__codelineno-10-326" name="__codelineno-10-326" href="#__codelineno-10-326"></a>        <span class="n">total</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">hit_count</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">miss_count</span>
</span><span id="__span-10-327"><a id="__codelineno-10-327" name="__codelineno-10-327" href="#__codelineno-10-327"></a>        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">hit_count</span> <span class="o">/</span> <span class="n">total</span> <span class="o">*</span> <span class="mi">100</span><span class="p">)</span> <span class="k">if</span> <span class="n">total</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="mi">0</span>
</span><span id="__span-10-328"><a id="__codelineno-10-328" name="__codelineno-10-328" href="#__codelineno-10-328"></a>
</span><span id="__span-10-329"><a id="__codelineno-10-329" name="__codelineno-10-329" href="#__codelineno-10-329"></a><span class="k">class</span><span class="w"> </span><span class="nc">MetricsCollector</span><span class="p">:</span>
</span><span id="__span-10-330"><a id="__codelineno-10-330" name="__codelineno-10-330" href="#__codelineno-10-330"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Collect and analyze system metrics&quot;&quot;&quot;</span>
</span><span id="__span-10-331"><a id="__codelineno-10-331" name="__codelineno-10-331" href="#__codelineno-10-331"></a>
</span><span id="__span-10-332"><a id="__codelineno-10-332" name="__codelineno-10-332" href="#__codelineno-10-332"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-10-333"><a id="__codelineno-10-333" name="__codelineno-10-333" href="#__codelineno-10-333"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">request_times</span> <span class="o">=</span> <span class="n">deque</span><span class="p">(</span><span class="n">maxlen</span><span class="o">=</span><span class="mi">1000</span><span class="p">)</span>  <span class="c1"># Keep last 1000 requests</span>
</span><span id="__span-10-334"><a id="__codelineno-10-334" name="__codelineno-10-334" href="#__codelineno-10-334"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">request_counts</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
</span><span id="__span-10-335"><a id="__codelineno-10-335" name="__codelineno-10-335" href="#__codelineno-10-335"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">error_counts</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
</span><span id="__span-10-336"><a id="__codelineno-10-336" name="__codelineno-10-336" href="#__codelineno-10-336"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">start_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
</span><span id="__span-10-337"><a id="__codelineno-10-337" name="__codelineno-10-337" href="#__codelineno-10-337"></a>
</span><span id="__span-10-338"><a id="__codelineno-10-338" name="__codelineno-10-338" href="#__codelineno-10-338"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">record_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request_type</span><span class="p">,</span> <span class="n">response_time</span><span class="p">,</span> <span class="n">status</span><span class="p">):</span>
</span><span id="__span-10-339"><a id="__codelineno-10-339" name="__codelineno-10-339" href="#__codelineno-10-339"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Record metrics for a request&quot;&quot;&quot;</span>
</span><span id="__span-10-340"><a id="__codelineno-10-340" name="__codelineno-10-340" href="#__codelineno-10-340"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">request_times</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">response_time</span><span class="p">)</span>
</span><span id="__span-10-341"><a id="__codelineno-10-341" name="__codelineno-10-341" href="#__codelineno-10-341"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">request_counts</span><span class="p">[</span><span class="n">request_type</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="__span-10-342"><a id="__codelineno-10-342" name="__codelineno-10-342" href="#__codelineno-10-342"></a>
</span><span id="__span-10-343"><a id="__codelineno-10-343" name="__codelineno-10-343" href="#__codelineno-10-343"></a>        <span class="k">if</span> <span class="n">status</span> <span class="o">!=</span> <span class="s1">&#39;success&#39;</span><span class="p">:</span>
</span><span id="__span-10-344"><a id="__codelineno-10-344" name="__codelineno-10-344" href="#__codelineno-10-344"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">error_counts</span><span class="p">[</span><span class="n">request_type</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="__span-10-345"><a id="__codelineno-10-345" name="__codelineno-10-345" href="#__codelineno-10-345"></a>
</span><span id="__span-10-346"><a id="__codelineno-10-346" name="__codelineno-10-346" href="#__codelineno-10-346"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_avg_response_time</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-10-347"><a id="__codelineno-10-347" name="__codelineno-10-347" href="#__codelineno-10-347"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get average response time&quot;&quot;&quot;</span>
</span><span id="__span-10-348"><a id="__codelineno-10-348" name="__codelineno-10-348" href="#__codelineno-10-348"></a>        <span class="k">return</span> <span class="nb">sum</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">request_times</span><span class="p">)</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">request_times</span><span class="p">)</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">request_times</span> <span class="k">else</span> <span class="mi">0</span>
</span><span id="__span-10-349"><a id="__codelineno-10-349" name="__codelineno-10-349" href="#__codelineno-10-349"></a>
</span><span id="__span-10-350"><a id="__codelineno-10-350" name="__codelineno-10-350" href="#__codelineno-10-350"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">log_performance</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-10-351"><a id="__codelineno-10-351" name="__codelineno-10-351" href="#__codelineno-10-351"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Log current performance metrics&quot;&quot;&quot;</span>
</span><span id="__span-10-352"><a id="__codelineno-10-352" name="__codelineno-10-352" href="#__codelineno-10-352"></a>        <span class="n">uptime</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">start_time</span>
</span><span id="__span-10-353"><a id="__codelineno-10-353" name="__codelineno-10-353" href="#__codelineno-10-353"></a>        <span class="n">total_requests</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">request_counts</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
</span><span id="__span-10-354"><a id="__codelineno-10-354" name="__codelineno-10-354" href="#__codelineno-10-354"></a>        <span class="n">total_errors</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">error_counts</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
</span><span id="__span-10-355"><a id="__codelineno-10-355" name="__codelineno-10-355" href="#__codelineno-10-355"></a>
</span><span id="__span-10-356"><a id="__codelineno-10-356" name="__codelineno-10-356" href="#__codelineno-10-356"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ğŸ“Š Metrics: </span><span class="si">{</span><span class="n">total_requests</span><span class="si">}</span><span class="s2"> requests, &quot;</span>
</span><span id="__span-10-357"><a id="__codelineno-10-357" name="__codelineno-10-357" href="#__codelineno-10-357"></a>              <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">total_errors</span><span class="si">}</span><span class="s2"> errors, &quot;</span>
</span><span id="__span-10-358"><a id="__codelineno-10-358" name="__codelineno-10-358" href="#__codelineno-10-358"></a>              <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_avg_response_time</span><span class="p">()</span><span class="o">*</span><span class="mi">1000</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2">ms avg response, &quot;</span>
</span><span id="__span-10-359"><a id="__codelineno-10-359" name="__codelineno-10-359" href="#__codelineno-10-359"></a>              <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">uptime</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2">s uptime&quot;</span><span class="p">)</span>
</span><span id="__span-10-360"><a id="__codelineno-10-360" name="__codelineno-10-360" href="#__codelineno-10-360"></a>
</span><span id="__span-10-361"><a id="__codelineno-10-361" name="__codelineno-10-361" href="#__codelineno-10-361"></a><span class="c1"># Demonstrate scalable architecture</span>
</span><span id="__span-10-362"><a id="__codelineno-10-362" name="__codelineno-10-362" href="#__codelineno-10-362"></a><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;ğŸ—ï¸ SCALABLE WEB ARCHITECTURE DEMONSTRATION&quot;</span><span class="p">)</span>
</span><span id="__span-10-363"><a id="__codelineno-10-363" name="__codelineno-10-363" href="#__codelineno-10-363"></a><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Let&#39;s build and test a system that can handle massive traffic!&quot;</span><span class="p">)</span>
</span><span id="__span-10-364"><a id="__codelineno-10-364" name="__codelineno-10-364" href="#__codelineno-10-364"></a><span class="nb">print</span><span class="p">()</span>
</span><span id="__span-10-365"><a id="__codelineno-10-365" name="__codelineno-10-365" href="#__codelineno-10-365"></a>
</span><span id="__span-10-366"><a id="__codelineno-10-366" name="__codelineno-10-366" href="#__codelineno-10-366"></a><span class="c1"># Initialize architecture</span>
</span><span id="__span-10-367"><a id="__codelineno-10-367" name="__codelineno-10-367" href="#__codelineno-10-367"></a><span class="n">architecture</span> <span class="o">=</span> <span class="n">ScalableWebArchitecture</span><span class="p">()</span>
</span><span id="__span-10-368"><a id="__codelineno-10-368" name="__codelineno-10-368" href="#__codelineno-10-368"></a>
</span><span id="__span-10-369"><a id="__codelineno-10-369" name="__codelineno-10-369" href="#__codelineno-10-369"></a><span class="c1"># Simulate normal traffic</span>
</span><span id="__span-10-370"><a id="__codelineno-10-370" name="__codelineno-10-370" href="#__codelineno-10-370"></a><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">ğŸŒ Normal Traffic Simulation&quot;</span><span class="p">)</span>
</span><span id="__span-10-371"><a id="__codelineno-10-371" name="__codelineno-10-371" href="#__codelineno-10-371"></a><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
</span><span id="__span-10-372"><a id="__codelineno-10-372" name="__codelineno-10-372" href="#__codelineno-10-372"></a>    <span class="n">result</span> <span class="o">=</span> <span class="n">architecture</span><span class="o">.</span><span class="n">handle_request</span><span class="p">(</span><span class="s1">&#39;read&#39;</span><span class="p">,</span> <span class="sa">f</span><span class="s1">&#39;test_request_</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</span><span id="__span-10-373"><a id="__codelineno-10-373" name="__codelineno-10-373" href="#__codelineno-10-373"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Request </span><span class="si">{</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">result</span><span class="p">[</span><span class="s1">&#39;status&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> from </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;source&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;unknown&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-10-374"><a id="__codelineno-10-374" name="__codelineno-10-374" href="#__codelineno-10-374"></a>
</span><span id="__span-10-375"><a id="__codelineno-10-375" name="__codelineno-10-375" href="#__codelineno-10-375"></a><span class="c1"># Simulate traffic spike</span>
</span><span id="__span-10-376"><a id="__codelineno-10-376" name="__codelineno-10-376" href="#__codelineno-10-376"></a><span class="n">architecture</span><span class="o">.</span><span class="n">simulate_traffic_spike</span><span class="p">(</span><span class="n">duration_seconds</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">requests_per_second</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
</span><span id="__span-10-377"><a id="__codelineno-10-377" name="__codelineno-10-377" href="#__codelineno-10-377"></a>
</span><span id="__span-10-378"><a id="__codelineno-10-378" name="__codelineno-10-378" href="#__codelineno-10-378"></a><span class="c1"># Show cache performance</span>
</span><span id="__span-10-379"><a id="__codelineno-10-379" name="__codelineno-10-379" href="#__codelineno-10-379"></a><span class="n">cache_server</span> <span class="o">=</span> <span class="n">architecture</span><span class="o">.</span><span class="n">cache_servers</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="__span-10-380"><a id="__codelineno-10-380" name="__codelineno-10-380" href="#__codelineno-10-380"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">ğŸ’¾ Cache Performance:&quot;</span><span class="p">)</span>
</span><span id="__span-10-381"><a id="__codelineno-10-381" name="__codelineno-10-381" href="#__codelineno-10-381"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Hit rate: </span><span class="si">{</span><span class="n">cache_server</span><span class="o">.</span><span class="n">get_hit_rate</span><span class="p">()</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2">%&quot;</span><span class="p">)</span>
</span><span id="__span-10-382"><a id="__codelineno-10-382" name="__codelineno-10-382" href="#__codelineno-10-382"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Hits: </span><span class="si">{</span><span class="n">cache_server</span><span class="o">.</span><span class="n">hit_count</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-10-383"><a id="__codelineno-10-383" name="__codelineno-10-383" href="#__codelineno-10-383"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Misses: </span><span class="si">{</span><span class="n">cache_server</span><span class="o">.</span><span class="n">miss_count</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span></code></pre></div>
</details>
<details class="example">
<summary>Content Delivery Network (CDN) Implementation</summary>
<div class="language-python highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">math</span>
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a><span class="kn">from</span><span class="w"> </span><span class="nn">geopy.distance</span><span class="w"> </span><span class="kn">import</span> <span class="n">geodesic</span>
</span><span id="__span-11-3"><a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a>
</span><span id="__span-11-4"><a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a><span class="k">class</span><span class="w"> </span><span class="nc">GlobalCDN</span><span class="p">:</span>
</span><span id="__span-11-5"><a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Simulate a global Content Delivery Network&quot;&quot;&quot;</span>
</span><span id="__span-11-6"><a id="__codelineno-11-6" name="__codelineno-11-6" href="#__codelineno-11-6"></a>
</span><span id="__span-11-7"><a id="__codelineno-11-7" name="__codelineno-11-7" href="#__codelineno-11-7"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-11-8"><a id="__codelineno-11-8" name="__codelineno-11-8" href="#__codelineno-11-8"></a>        <span class="c1"># Global CDN edge locations (simplified)</span>
</span><span id="__span-11-9"><a id="__codelineno-11-9" name="__codelineno-11-9" href="#__codelineno-11-9"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">edge_locations</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="__span-11-10"><a id="__codelineno-11-10" name="__codelineno-11-10" href="#__codelineno-11-10"></a>            <span class="s1">&#39;us-east&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;lat&#39;</span><span class="p">:</span> <span class="mf">39.0458</span><span class="p">,</span> <span class="s1">&#39;lon&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mf">76.6413</span><span class="p">,</span> <span class="s1">&#39;capacity&#39;</span><span class="p">:</span> <span class="mi">1000</span><span class="p">},</span>      <span class="c1"># Virginia</span>
</span><span id="__span-11-11"><a id="__codelineno-11-11" name="__codelineno-11-11" href="#__codelineno-11-11"></a>            <span class="s1">&#39;us-west&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;lat&#39;</span><span class="p">:</span> <span class="mf">37.4419</span><span class="p">,</span> <span class="s1">&#39;lon&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mf">122.1430</span><span class="p">,</span> <span class="s1">&#39;capacity&#39;</span><span class="p">:</span> <span class="mi">1000</span><span class="p">},</span>    <span class="c1"># California</span>
</span><span id="__span-11-12"><a id="__codelineno-11-12" name="__codelineno-11-12" href="#__codelineno-11-12"></a>            <span class="s1">&#39;eu-west&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;lat&#39;</span><span class="p">:</span> <span class="mf">53.4084</span><span class="p">,</span> <span class="s1">&#39;lon&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mf">2.9916</span><span class="p">,</span> <span class="s1">&#39;capacity&#39;</span><span class="p">:</span> <span class="mi">800</span><span class="p">},</span>       <span class="c1"># Ireland</span>
</span><span id="__span-11-13"><a id="__codelineno-11-13" name="__codelineno-11-13" href="#__codelineno-11-13"></a>            <span class="s1">&#39;ap-southeast&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;lat&#39;</span><span class="p">:</span> <span class="mf">1.3521</span><span class="p">,</span> <span class="s1">&#39;lon&#39;</span><span class="p">:</span> <span class="mf">103.8198</span><span class="p">,</span> <span class="s1">&#39;capacity&#39;</span><span class="p">:</span> <span class="mi">600</span><span class="p">},</span>  <span class="c1"># Singapore</span>
</span><span id="__span-11-14"><a id="__codelineno-11-14" name="__codelineno-11-14" href="#__codelineno-11-14"></a>            <span class="s1">&#39;ap-northeast&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;lat&#39;</span><span class="p">:</span> <span class="mf">35.6762</span><span class="p">,</span> <span class="s1">&#39;lon&#39;</span><span class="p">:</span> <span class="mf">139.6503</span><span class="p">,</span> <span class="s1">&#39;capacity&#39;</span><span class="p">:</span> <span class="mi">800</span><span class="p">},</span> <span class="c1"># Tokyo</span>
</span><span id="__span-11-15"><a id="__codelineno-11-15" name="__codelineno-11-15" href="#__codelineno-11-15"></a>            <span class="s1">&#39;sa-east&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;lat&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mf">23.5505</span><span class="p">,</span> <span class="s1">&#39;lon&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mf">46.6333</span><span class="p">,</span> <span class="s1">&#39;capacity&#39;</span><span class="p">:</span> <span class="mi">400</span><span class="p">}</span>      <span class="c1"># SÃ£o Paulo</span>
</span><span id="__span-11-16"><a id="__codelineno-11-16" name="__codelineno-11-16" href="#__codelineno-11-16"></a>        <span class="p">}</span>
</span><span id="__span-11-17"><a id="__codelineno-11-17" name="__codelineno-11-17" href="#__codelineno-11-17"></a>
</span><span id="__span-11-18"><a id="__codelineno-11-18" name="__codelineno-11-18" href="#__codelineno-11-18"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">content_cache</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="__span-11-19"><a id="__codelineno-11-19" name="__codelineno-11-19" href="#__codelineno-11-19"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">request_routing</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="__span-11-20"><a id="__codelineno-11-20" name="__codelineno-11-20" href="#__codelineno-11-20"></a>
</span><span id="__span-11-21"><a id="__codelineno-11-21" name="__codelineno-11-21" href="#__codelineno-11-21"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">find_nearest_edge</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_lat</span><span class="p">,</span> <span class="n">user_lon</span><span class="p">):</span>
</span><span id="__span-11-22"><a id="__codelineno-11-22" name="__codelineno-11-22" href="#__codelineno-11-22"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Find the nearest CDN edge location to the user&quot;&quot;&quot;</span>
</span><span id="__span-11-23"><a id="__codelineno-11-23" name="__codelineno-11-23" href="#__codelineno-11-23"></a>
</span><span id="__span-11-24"><a id="__codelineno-11-24" name="__codelineno-11-24" href="#__codelineno-11-24"></a>        <span class="n">user_location</span> <span class="o">=</span> <span class="p">(</span><span class="n">user_lat</span><span class="p">,</span> <span class="n">user_lon</span><span class="p">)</span>
</span><span id="__span-11-25"><a id="__codelineno-11-25" name="__codelineno-11-25" href="#__codelineno-11-25"></a>        <span class="n">nearest_edge</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="__span-11-26"><a id="__codelineno-11-26" name="__codelineno-11-26" href="#__codelineno-11-26"></a>        <span class="n">min_distance</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="s1">&#39;inf&#39;</span><span class="p">)</span>
</span><span id="__span-11-27"><a id="__codelineno-11-27" name="__codelineno-11-27" href="#__codelineno-11-27"></a>
</span><span id="__span-11-28"><a id="__codelineno-11-28" name="__codelineno-11-28" href="#__codelineno-11-28"></a>        <span class="k">for</span> <span class="n">edge_name</span><span class="p">,</span> <span class="n">edge_info</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">edge_locations</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="__span-11-29"><a id="__codelineno-11-29" name="__codelineno-11-29" href="#__codelineno-11-29"></a>            <span class="n">edge_location</span> <span class="o">=</span> <span class="p">(</span><span class="n">edge_info</span><span class="p">[</span><span class="s1">&#39;lat&#39;</span><span class="p">],</span> <span class="n">edge_info</span><span class="p">[</span><span class="s1">&#39;lon&#39;</span><span class="p">])</span>
</span><span id="__span-11-30"><a id="__codelineno-11-30" name="__codelineno-11-30" href="#__codelineno-11-30"></a>            <span class="n">distance</span> <span class="o">=</span> <span class="n">geodesic</span><span class="p">(</span><span class="n">user_location</span><span class="p">,</span> <span class="n">edge_location</span><span class="p">)</span><span class="o">.</span><span class="n">kilometers</span>
</span><span id="__span-11-31"><a id="__codelineno-11-31" name="__codelineno-11-31" href="#__codelineno-11-31"></a>
</span><span id="__span-11-32"><a id="__codelineno-11-32" name="__codelineno-11-32" href="#__codelineno-11-32"></a>            <span class="k">if</span> <span class="n">distance</span> <span class="o">&lt;</span> <span class="n">min_distance</span><span class="p">:</span>
</span><span id="__span-11-33"><a id="__codelineno-11-33" name="__codelineno-11-33" href="#__codelineno-11-33"></a>                <span class="n">min_distance</span> <span class="o">=</span> <span class="n">distance</span>
</span><span id="__span-11-34"><a id="__codelineno-11-34" name="__codelineno-11-34" href="#__codelineno-11-34"></a>                <span class="n">nearest_edge</span> <span class="o">=</span> <span class="n">edge_name</span>
</span><span id="__span-11-35"><a id="__codelineno-11-35" name="__codelineno-11-35" href="#__codelineno-11-35"></a>
</span><span id="__span-11-36"><a id="__codelineno-11-36" name="__codelineno-11-36" href="#__codelineno-11-36"></a>        <span class="k">return</span> <span class="n">nearest_edge</span><span class="p">,</span> <span class="n">min_distance</span>
</span><span id="__span-11-37"><a id="__codelineno-11-37" name="__codelineno-11-37" href="#__codelineno-11-37"></a>
</span><span id="__span-11-38"><a id="__codelineno-11-38" name="__codelineno-11-38" href="#__codelineno-11-38"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">deliver_content</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_lat</span><span class="p">,</span> <span class="n">user_lon</span><span class="p">,</span> <span class="n">content_id</span><span class="p">):</span>
</span><span id="__span-11-39"><a id="__codelineno-11-39" name="__codelineno-11-39" href="#__codelineno-11-39"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Deliver content from the nearest edge location&quot;&quot;&quot;</span>
</span><span id="__span-11-40"><a id="__codelineno-11-40" name="__codelineno-11-40" href="#__codelineno-11-40"></a>
</span><span id="__span-11-41"><a id="__codelineno-11-41" name="__codelineno-11-41" href="#__codelineno-11-41"></a>        <span class="n">nearest_edge</span><span class="p">,</span> <span class="n">distance</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">find_nearest_edge</span><span class="p">(</span><span class="n">user_lat</span><span class="p">,</span> <span class="n">user_lon</span><span class="p">)</span>
</span><span id="__span-11-42"><a id="__codelineno-11-42" name="__codelineno-11-42" href="#__codelineno-11-42"></a>
</span><span id="__span-11-43"><a id="__codelineno-11-43" name="__codelineno-11-43" href="#__codelineno-11-43"></a>        <span class="c1"># Calculate estimated latency based on distance</span>
</span><span id="__span-11-44"><a id="__codelineno-11-44" name="__codelineno-11-44" href="#__codelineno-11-44"></a>        <span class="c1"># Simplified: ~0.1ms per 10km + base latency</span>
</span><span id="__span-11-45"><a id="__codelineno-11-45" name="__codelineno-11-45" href="#__codelineno-11-45"></a>        <span class="n">estimated_latency</span> <span class="o">=</span> <span class="p">(</span><span class="n">distance</span> <span class="o">/</span> <span class="mi">10</span><span class="p">)</span> <span class="o">*</span> <span class="mf">0.1</span> <span class="o">+</span> <span class="mi">5</span>  <span class="c1"># milliseconds</span>
</span><span id="__span-11-46"><a id="__codelineno-11-46" name="__codelineno-11-46" href="#__codelineno-11-46"></a>
</span><span id="__span-11-47"><a id="__codelineno-11-47" name="__codelineno-11-47" href="#__codelineno-11-47"></a>        <span class="c1"># Check if content is cached at edge</span>
</span><span id="__span-11-48"><a id="__codelineno-11-48" name="__codelineno-11-48" href="#__codelineno-11-48"></a>        <span class="n">cache_key</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">nearest_edge</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">content_id</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="__span-11-49"><a id="__codelineno-11-49" name="__codelineno-11-49" href="#__codelineno-11-49"></a>
</span><span id="__span-11-50"><a id="__codelineno-11-50" name="__codelineno-11-50" href="#__codelineno-11-50"></a>        <span class="k">if</span> <span class="n">cache_key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">content_cache</span><span class="p">:</span>
</span><span id="__span-11-51"><a id="__codelineno-11-51" name="__codelineno-11-51" href="#__codelineno-11-51"></a>            <span class="n">cache_status</span> <span class="o">=</span> <span class="s2">&quot;HIT&quot;</span>
</span><span id="__span-11-52"><a id="__codelineno-11-52" name="__codelineno-11-52" href="#__codelineno-11-52"></a>            <span class="n">delivery_time</span> <span class="o">=</span> <span class="n">estimated_latency</span>
</span><span id="__span-11-53"><a id="__codelineno-11-53" name="__codelineno-11-53" href="#__codelineno-11-53"></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="__span-11-54"><a id="__codelineno-11-54" name="__codelineno-11-54" href="#__codelineno-11-54"></a>            <span class="n">cache_status</span> <span class="o">=</span> <span class="s2">&quot;MISS&quot;</span>
</span><span id="__span-11-55"><a id="__codelineno-11-55" name="__codelineno-11-55" href="#__codelineno-11-55"></a>            <span class="c1"># Need to fetch from origin server (add extra latency)</span>
</span><span id="__span-11-56"><a id="__codelineno-11-56" name="__codelineno-11-56" href="#__codelineno-11-56"></a>            <span class="n">delivery_time</span> <span class="o">=</span> <span class="n">estimated_latency</span> <span class="o">+</span> <span class="mi">50</span>  <span class="c1"># Extra 50ms for origin fetch</span>
</span><span id="__span-11-57"><a id="__codelineno-11-57" name="__codelineno-11-57" href="#__codelineno-11-57"></a>
</span><span id="__span-11-58"><a id="__codelineno-11-58" name="__codelineno-11-58" href="#__codelineno-11-58"></a>            <span class="c1"># Cache the content</span>
</span><span id="__span-11-59"><a id="__codelineno-11-59" name="__codelineno-11-59" href="#__codelineno-11-59"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">content_cache</span><span class="p">[</span><span class="n">cache_key</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="__span-11-60"><a id="__codelineno-11-60" name="__codelineno-11-60" href="#__codelineno-11-60"></a>
</span><span id="__span-11-61"><a id="__codelineno-11-61" name="__codelineno-11-61" href="#__codelineno-11-61"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ğŸŒ Content Delivery:&quot;</span><span class="p">)</span>
</span><span id="__span-11-62"><a id="__codelineno-11-62" name="__codelineno-11-62" href="#__codelineno-11-62"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   User location: (</span><span class="si">{</span><span class="n">user_lat</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">user_lon</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>
</span><span id="__span-11-63"><a id="__codelineno-11-63" name="__codelineno-11-63" href="#__codelineno-11-63"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Nearest edge: </span><span class="si">{</span><span class="n">nearest_edge</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-11-64"><a id="__codelineno-11-64" name="__codelineno-11-64" href="#__codelineno-11-64"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Distance: </span><span class="si">{</span><span class="n">distance</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2"> km&quot;</span><span class="p">)</span>
</span><span id="__span-11-65"><a id="__codelineno-11-65" name="__codelineno-11-65" href="#__codelineno-11-65"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Cache status: </span><span class="si">{</span><span class="n">cache_status</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-11-66"><a id="__codelineno-11-66" name="__codelineno-11-66" href="#__codelineno-11-66"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Delivery time: </span><span class="si">{</span><span class="n">delivery_time</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2"> ms&quot;</span><span class="p">)</span>
</span><span id="__span-11-67"><a id="__codelineno-11-67" name="__codelineno-11-67" href="#__codelineno-11-67"></a>
</span><span id="__span-11-68"><a id="__codelineno-11-68" name="__codelineno-11-68" href="#__codelineno-11-68"></a>        <span class="k">return</span> <span class="p">{</span>
</span><span id="__span-11-69"><a id="__codelineno-11-69" name="__codelineno-11-69" href="#__codelineno-11-69"></a>            <span class="s1">&#39;edge_location&#39;</span><span class="p">:</span> <span class="n">nearest_edge</span><span class="p">,</span>
</span><span id="__span-11-70"><a id="__codelineno-11-70" name="__codelineno-11-70" href="#__codelineno-11-70"></a>            <span class="s1">&#39;distance_km&#39;</span><span class="p">:</span> <span class="n">distance</span><span class="p">,</span>
</span><span id="__span-11-71"><a id="__codelineno-11-71" name="__codelineno-11-71" href="#__codelineno-11-71"></a>            <span class="s1">&#39;cache_status&#39;</span><span class="p">:</span> <span class="n">cache_status</span><span class="p">,</span>
</span><span id="__span-11-72"><a id="__codelineno-11-72" name="__codelineno-11-72" href="#__codelineno-11-72"></a>            <span class="s1">&#39;delivery_time_ms&#39;</span><span class="p">:</span> <span class="n">delivery_time</span>
</span><span id="__span-11-73"><a id="__codelineno-11-73" name="__codelineno-11-73" href="#__codelineno-11-73"></a>        <span class="p">}</span>
</span><span id="__span-11-74"><a id="__codelineno-11-74" name="__codelineno-11-74" href="#__codelineno-11-74"></a>
</span><span id="__span-11-75"><a id="__codelineno-11-75" name="__codelineno-11-75" href="#__codelineno-11-75"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">analyze_global_performance</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-11-76"><a id="__codelineno-11-76" name="__codelineno-11-76" href="#__codelineno-11-76"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Analyze CDN performance across different regions&quot;&quot;&quot;</span>
</span><span id="__span-11-77"><a id="__codelineno-11-77" name="__codelineno-11-77" href="#__codelineno-11-77"></a>
</span><span id="__span-11-78"><a id="__codelineno-11-78" name="__codelineno-11-78" href="#__codelineno-11-78"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">ğŸŒ GLOBAL CDN PERFORMANCE ANALYSIS&quot;</span><span class="p">)</span>
</span><span id="__span-11-79"><a id="__codelineno-11-79" name="__codelineno-11-79" href="#__codelineno-11-79"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;=&quot;</span> <span class="o">*</span> <span class="mi">50</span><span class="p">)</span>
</span><span id="__span-11-80"><a id="__codelineno-11-80" name="__codelineno-11-80" href="#__codelineno-11-80"></a>
</span><span id="__span-11-81"><a id="__codelineno-11-81" name="__codelineno-11-81" href="#__codelineno-11-81"></a>        <span class="c1"># Test users from different locations</span>
</span><span id="__span-11-82"><a id="__codelineno-11-82" name="__codelineno-11-82" href="#__codelineno-11-82"></a>        <span class="n">test_users</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="__span-11-83"><a id="__codelineno-11-83" name="__codelineno-11-83" href="#__codelineno-11-83"></a>            <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;New York&#39;</span><span class="p">,</span> <span class="s1">&#39;lat&#39;</span><span class="p">:</span> <span class="mf">40.7128</span><span class="p">,</span> <span class="s1">&#39;lon&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mf">74.0060</span><span class="p">},</span>
</span><span id="__span-11-84"><a id="__codelineno-11-84" name="__codelineno-11-84" href="#__codelineno-11-84"></a>            <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;London&#39;</span><span class="p">,</span> <span class="s1">&#39;lat&#39;</span><span class="p">:</span> <span class="mf">51.5074</span><span class="p">,</span> <span class="s1">&#39;lon&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mf">0.1278</span><span class="p">},</span>
</span><span id="__span-11-85"><a id="__codelineno-11-85" name="__codelineno-11-85" href="#__codelineno-11-85"></a>            <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;Tokyo&#39;</span><span class="p">,</span> <span class="s1">&#39;lat&#39;</span><span class="p">:</span> <span class="mf">35.6762</span><span class="p">,</span> <span class="s1">&#39;lon&#39;</span><span class="p">:</span> <span class="mf">139.6503</span><span class="p">},</span>
</span><span id="__span-11-86"><a id="__codelineno-11-86" name="__codelineno-11-86" href="#__codelineno-11-86"></a>            <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;Sydney&#39;</span><span class="p">,</span> <span class="s1">&#39;lat&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mf">33.8688</span><span class="p">,</span> <span class="s1">&#39;lon&#39;</span><span class="p">:</span> <span class="mf">151.2093</span><span class="p">},</span>
</span><span id="__span-11-87"><a id="__codelineno-11-87" name="__codelineno-11-87" href="#__codelineno-11-87"></a>            <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;SÃ£o Paulo&#39;</span><span class="p">,</span> <span class="s1">&#39;lat&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mf">23.5505</span><span class="p">,</span> <span class="s1">&#39;lon&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mf">46.6333</span><span class="p">},</span>
</span><span id="__span-11-88"><a id="__codelineno-11-88" name="__codelineno-11-88" href="#__codelineno-11-88"></a>            <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;Mumbai&#39;</span><span class="p">,</span> <span class="s1">&#39;lat&#39;</span><span class="p">:</span> <span class="mf">19.0760</span><span class="p">,</span> <span class="s1">&#39;lon&#39;</span><span class="p">:</span> <span class="mf">72.8777</span><span class="p">}</span>
</span><span id="__span-11-89"><a id="__codelineno-11-89" name="__codelineno-11-89" href="#__codelineno-11-89"></a>        <span class="p">]</span>
</span><span id="__span-11-90"><a id="__codelineno-11-90" name="__codelineno-11-90" href="#__codelineno-11-90"></a>
</span><span id="__span-11-91"><a id="__codelineno-11-91" name="__codelineno-11-91" href="#__codelineno-11-91"></a>        <span class="n">total_latency</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="__span-11-92"><a id="__codelineno-11-92" name="__codelineno-11-92" href="#__codelineno-11-92"></a>        <span class="n">cache_hits</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="__span-11-93"><a id="__codelineno-11-93" name="__codelineno-11-93" href="#__codelineno-11-93"></a>
</span><span id="__span-11-94"><a id="__codelineno-11-94" name="__codelineno-11-94" href="#__codelineno-11-94"></a>        <span class="k">for</span> <span class="n">user</span> <span class="ow">in</span> <span class="n">test_users</span><span class="p">:</span>
</span><span id="__span-11-95"><a id="__codelineno-11-95" name="__codelineno-11-95" href="#__codelineno-11-95"></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">ğŸ“ Testing from </span><span class="si">{</span><span class="n">user</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">:&quot;</span><span class="p">)</span>
</span><span id="__span-11-96"><a id="__codelineno-11-96" name="__codelineno-11-96" href="#__codelineno-11-96"></a>            <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">deliver_content</span><span class="p">(</span><span class="n">user</span><span class="p">[</span><span class="s1">&#39;lat&#39;</span><span class="p">],</span> <span class="n">user</span><span class="p">[</span><span class="s1">&#39;lon&#39;</span><span class="p">],</span> <span class="s1">&#39;popular_video.mp4&#39;</span><span class="p">)</span>
</span><span id="__span-11-97"><a id="__codelineno-11-97" name="__codelineno-11-97" href="#__codelineno-11-97"></a>
</span><span id="__span-11-98"><a id="__codelineno-11-98" name="__codelineno-11-98" href="#__codelineno-11-98"></a>            <span class="n">total_latency</span> <span class="o">+=</span> <span class="n">result</span><span class="p">[</span><span class="s1">&#39;delivery_time_ms&#39;</span><span class="p">]</span>
</span><span id="__span-11-99"><a id="__codelineno-11-99" name="__codelineno-11-99" href="#__codelineno-11-99"></a>            <span class="k">if</span> <span class="n">result</span><span class="p">[</span><span class="s1">&#39;cache_status&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;HIT&#39;</span><span class="p">:</span>
</span><span id="__span-11-100"><a id="__codelineno-11-100" name="__codelineno-11-100" href="#__codelineno-11-100"></a>                <span class="n">cache_hits</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="__span-11-101"><a id="__codelineno-11-101" name="__codelineno-11-101" href="#__codelineno-11-101"></a>
</span><span id="__span-11-102"><a id="__codelineno-11-102" name="__codelineno-11-102" href="#__codelineno-11-102"></a>        <span class="n">avg_latency</span> <span class="o">=</span> <span class="n">total_latency</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">test_users</span><span class="p">)</span>
</span><span id="__span-11-103"><a id="__codelineno-11-103" name="__codelineno-11-103" href="#__codelineno-11-103"></a>        <span class="n">cache_hit_rate</span> <span class="o">=</span> <span class="p">(</span><span class="n">cache_hits</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">test_users</span><span class="p">))</span> <span class="o">*</span> <span class="mi">100</span>
</span><span id="__span-11-104"><a id="__codelineno-11-104" name="__codelineno-11-104" href="#__codelineno-11-104"></a>
</span><span id="__span-11-105"><a id="__codelineno-11-105" name="__codelineno-11-105" href="#__codelineno-11-105"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">ğŸ“Š Global Performance Summary:&quot;</span><span class="p">)</span>
</span><span id="__span-11-106"><a id="__codelineno-11-106" name="__codelineno-11-106" href="#__codelineno-11-106"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Average latency: </span><span class="si">{</span><span class="n">avg_latency</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2"> ms&quot;</span><span class="p">)</span>
</span><span id="__span-11-107"><a id="__codelineno-11-107" name="__codelineno-11-107" href="#__codelineno-11-107"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Cache hit rate: </span><span class="si">{</span><span class="n">cache_hit_rate</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2">%&quot;</span><span class="p">)</span>
</span><span id="__span-11-108"><a id="__codelineno-11-108" name="__codelineno-11-108" href="#__codelineno-11-108"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Edge locations: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">edge_locations</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-11-109"><a id="__codelineno-11-109" name="__codelineno-11-109" href="#__codelineno-11-109"></a>
</span><span id="__span-11-110"><a id="__codelineno-11-110" name="__codelineno-11-110" href="#__codelineno-11-110"></a>        <span class="n">performance_rating</span> <span class="o">=</span> <span class="s2">&quot;EXCELLENT&quot;</span> <span class="k">if</span> <span class="n">avg_latency</span> <span class="o">&lt;</span> <span class="mi">20</span> <span class="k">else</span> <span class="s2">&quot;GOOD&quot;</span> <span class="k">if</span> <span class="n">avg_latency</span> <span class="o">&lt;</span> <span class="mi">50</span> <span class="k">else</span> <span class="s2">&quot;NEEDS_IMPROVEMENT&quot;</span>
</span><span id="__span-11-111"><a id="__codelineno-11-111" name="__codelineno-11-111" href="#__codelineno-11-111"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Performance rating: </span><span class="si">{</span><span class="n">performance_rating</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-11-112"><a id="__codelineno-11-112" name="__codelineno-11-112" href="#__codelineno-11-112"></a>
</span><span id="__span-11-113"><a id="__codelineno-11-113" name="__codelineno-11-113" href="#__codelineno-11-113"></a><span class="c1"># Demonstrate CDN</span>
</span><span id="__span-11-114"><a id="__codelineno-11-114" name="__codelineno-11-114" href="#__codelineno-11-114"></a><span class="n">cdn</span> <span class="o">=</span> <span class="n">GlobalCDN</span><span class="p">()</span>
</span><span id="__span-11-115"><a id="__codelineno-11-115" name="__codelineno-11-115" href="#__codelineno-11-115"></a><span class="n">cdn</span><span class="o">.</span><span class="n">analyze_global_performance</span><span class="p">()</span>
</span></code></pre></div>
</details>
<p><strong>Big Data Processing Pipeline:</strong></p>
<details class="example">
<summary>ğŸ“Š Big Data Processor - Real-time Analytics Pipeline</summary>
<div class="language-python highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">json</span>
</span><span id="__span-12-2"><a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a><span class="kn">import</span><span class="w"> </span><span class="nn">time</span>
</span><span id="__span-12-3"><a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a><span class="kn">import</span><span class="w"> </span><span class="nn">random</span>
</span><span id="__span-12-4"><a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a><span class="kn">from</span><span class="w"> </span><span class="nn">datetime</span><span class="w"> </span><span class="kn">import</span> <span class="n">datetime</span>
</span><span id="__span-12-5"><a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a><span class="kn">from</span><span class="w"> </span><span class="nn">collections</span><span class="w"> </span><span class="kn">import</span> <span class="n">deque</span><span class="p">,</span> <span class="n">Counter</span>
</span><span id="__span-12-6"><a id="__codelineno-12-6" name="__codelineno-12-6" href="#__codelineno-12-6"></a>
</span><span id="__span-12-7"><a id="__codelineno-12-7" name="__codelineno-12-7" href="#__codelineno-12-7"></a><span class="k">class</span><span class="w"> </span><span class="nc">BigDataProcessor</span><span class="p">:</span>
</span><span id="__span-12-8"><a id="__codelineno-12-8" name="__codelineno-12-8" href="#__codelineno-12-8"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Simulate big data processing for web analytics&quot;&quot;&quot;</span>
</span><span id="__span-12-9"><a id="__codelineno-12-9" name="__codelineno-12-9" href="#__codelineno-12-9"></a>
</span><span id="__span-12-10"><a id="__codelineno-12-10" name="__codelineno-12-10" href="#__codelineno-12-10"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-12-11"><a id="__codelineno-12-11" name="__codelineno-12-11" href="#__codelineno-12-11"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">data_buffer</span> <span class="o">=</span> <span class="n">deque</span><span class="p">(</span><span class="n">maxlen</span><span class="o">=</span><span class="mi">10000</span><span class="p">)</span>  <span class="c1"># Rolling buffer</span>
</span><span id="__span-12-12"><a id="__codelineno-12-12" name="__codelineno-12-12" href="#__codelineno-12-12"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">processed_data</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="__span-12-13"><a id="__codelineno-12-13" name="__codelineno-12-13" href="#__codelineno-12-13"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">real_time_metrics</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="__span-12-14"><a id="__codelineno-12-14" name="__codelineno-12-14" href="#__codelineno-12-14"></a>
</span><span id="__span-12-15"><a id="__codelineno-12-15" name="__codelineno-12-15" href="#__codelineno-12-15"></a>        <span class="c1"># Simulate different data sources</span>
</span><span id="__span-12-16"><a id="__codelineno-12-16" name="__codelineno-12-16" href="#__codelineno-12-16"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">data_sources</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;web_logs&#39;</span><span class="p">,</span> <span class="s1">&#39;user_events&#39;</span><span class="p">,</span> <span class="s1">&#39;api_calls&#39;</span><span class="p">,</span> <span class="s1">&#39;mobile_app&#39;</span><span class="p">]</span>
</span><span id="__span-12-17"><a id="__codelineno-12-17" name="__codelineno-12-17" href="#__codelineno-12-17"></a>
</span><span id="__span-12-18"><a id="__codelineno-12-18" name="__codelineno-12-18" href="#__codelineno-12-18"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">generate_sample_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">count</span><span class="o">=</span><span class="mi">1000</span><span class="p">):</span>
</span><span id="__span-12-19"><a id="__codelineno-12-19" name="__codelineno-12-19" href="#__codelineno-12-19"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Generate sample web traffic data&quot;&quot;&quot;</span>
</span><span id="__span-12-20"><a id="__codelineno-12-20" name="__codelineno-12-20" href="#__codelineno-12-20"></a>
</span><span id="__span-12-21"><a id="__codelineno-12-21" name="__codelineno-12-21" href="#__codelineno-12-21"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ğŸ“Š Generating </span><span class="si">{</span><span class="n">count</span><span class="si">}</span><span class="s2"> sample data points...&quot;</span><span class="p">)</span>
</span><span id="__span-12-22"><a id="__codelineno-12-22" name="__codelineno-12-22" href="#__codelineno-12-22"></a>
</span><span id="__span-12-23"><a id="__codelineno-12-23" name="__codelineno-12-23" href="#__codelineno-12-23"></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">count</span><span class="p">):</span>
</span><span id="__span-12-24"><a id="__codelineno-12-24" name="__codelineno-12-24" href="#__codelineno-12-24"></a>            <span class="n">data_point</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="__span-12-25"><a id="__codelineno-12-25" name="__codelineno-12-25" href="#__codelineno-12-25"></a>                <span class="s1">&#39;timestamp&#39;</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">isoformat</span><span class="p">(),</span>
</span><span id="__span-12-26"><a id="__codelineno-12-26" name="__codelineno-12-26" href="#__codelineno-12-26"></a>                <span class="s1">&#39;source&#39;</span><span class="p">:</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data_sources</span><span class="p">),</span>
</span><span id="__span-12-27"><a id="__codelineno-12-27" name="__codelineno-12-27" href="#__codelineno-12-27"></a>                <span class="s1">&#39;user_id&#39;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;user_</span><span class="si">{</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">10000</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
</span><span id="__span-12-28"><a id="__codelineno-12-28" name="__codelineno-12-28" href="#__codelineno-12-28"></a>                <span class="s1">&#39;event_type&#39;</span><span class="p">:</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">([</span><span class="s1">&#39;page_view&#39;</span><span class="p">,</span> <span class="s1">&#39;click&#39;</span><span class="p">,</span> <span class="s1">&#39;purchase&#39;</span><span class="p">,</span> <span class="s1">&#39;signup&#39;</span><span class="p">]),</span>
</span><span id="__span-12-29"><a id="__codelineno-12-29" name="__codelineno-12-29" href="#__codelineno-12-29"></a>                <span class="s1">&#39;page_url&#39;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;/page_</span><span class="si">{</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">100</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
</span><span id="__span-12-30"><a id="__codelineno-12-30" name="__codelineno-12-30" href="#__codelineno-12-30"></a>                <span class="s1">&#39;session_duration&#39;</span><span class="p">:</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">3600</span><span class="p">),</span>  <span class="c1"># seconds</span>
</span><span id="__span-12-31"><a id="__codelineno-12-31" name="__codelineno-12-31" href="#__codelineno-12-31"></a>                <span class="s1">&#39;device_type&#39;</span><span class="p">:</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">([</span><span class="s1">&#39;desktop&#39;</span><span class="p">,</span> <span class="s1">&#39;mobile&#39;</span><span class="p">,</span> <span class="s1">&#39;tablet&#39;</span><span class="p">]),</span>
</span><span id="__span-12-32"><a id="__codelineno-12-32" name="__codelineno-12-32" href="#__codelineno-12-32"></a>                <span class="s1">&#39;browser&#39;</span><span class="p">:</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">([</span><span class="s1">&#39;Chrome&#39;</span><span class="p">,</span> <span class="s1">&#39;Firefox&#39;</span><span class="p">,</span> <span class="s1">&#39;Safari&#39;</span><span class="p">,</span> <span class="s1">&#39;Edge&#39;</span><span class="p">]),</span>
</span><span id="__span-12-33"><a id="__codelineno-12-33" name="__codelineno-12-33" href="#__codelineno-12-33"></a>                <span class="s1">&#39;country&#39;</span><span class="p">:</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">([</span><span class="s1">&#39;US&#39;</span><span class="p">,</span> <span class="s1">&#39;UK&#39;</span><span class="p">,</span> <span class="s1">&#39;CA&#39;</span><span class="p">,</span> <span class="s1">&#39;AU&#39;</span><span class="p">,</span> <span class="s1">&#39;DE&#39;</span><span class="p">,</span> <span class="s1">&#39;FR&#39;</span><span class="p">,</span> <span class="s1">&#39;JP&#39;</span><span class="p">]),</span>
</span><span id="__span-12-34"><a id="__codelineno-12-34" name="__codelineno-12-34" href="#__codelineno-12-34"></a>                <span class="s1">&#39;revenue&#39;</span><span class="p">:</span> <span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">500</span><span class="p">)</span> <span class="k">if</span> <span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span> <span class="o">&lt;</span> <span class="mf">0.1</span> <span class="k">else</span> <span class="mi">0</span>  <span class="c1"># 10% conversion</span>
</span><span id="__span-12-35"><a id="__codelineno-12-35" name="__codelineno-12-35" href="#__codelineno-12-35"></a>            <span class="p">}</span>
</span><span id="__span-12-36"><a id="__codelineno-12-36" name="__codelineno-12-36" href="#__codelineno-12-36"></a>
</span><span id="__span-12-37"><a id="__codelineno-12-37" name="__codelineno-12-37" href="#__codelineno-12-37"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">data_buffer</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">data_point</span><span class="p">)</span>
</span><span id="__span-12-38"><a id="__codelineno-12-38" name="__codelineno-12-38" href="#__codelineno-12-38"></a>
</span><span id="__span-12-39"><a id="__codelineno-12-39" name="__codelineno-12-39" href="#__codelineno-12-39"></a>            <span class="c1"># Process in real-time batches</span>
</span><span id="__span-12-40"><a id="__codelineno-12-40" name="__codelineno-12-40" href="#__codelineno-12-40"></a>            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data_buffer</span><span class="p">)</span> <span class="o">%</span> <span class="mi">100</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="__span-12-41"><a id="__codelineno-12-41" name="__codelineno-12-41" href="#__codelineno-12-41"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">process_batch</span><span class="p">()</span>
</span><span id="__span-12-42"><a id="__codelineno-12-42" name="__codelineno-12-42" href="#__codelineno-12-42"></a>
</span><span id="__span-12-43"><a id="__codelineno-12-43" name="__codelineno-12-43" href="#__codelineno-12-43"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">process_batch</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-12-44"><a id="__codelineno-12-44" name="__codelineno-12-44" href="#__codelineno-12-44"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Process a batch of data for real-time analytics&quot;&quot;&quot;</span>
</span><span id="__span-12-45"><a id="__codelineno-12-45" name="__codelineno-12-45" href="#__codelineno-12-45"></a>
</span><span id="__span-12-46"><a id="__codelineno-12-46" name="__codelineno-12-46" href="#__codelineno-12-46"></a>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_buffer</span><span class="p">:</span>
</span><span id="__span-12-47"><a id="__codelineno-12-47" name="__codelineno-12-47" href="#__codelineno-12-47"></a>            <span class="k">return</span>
</span><span id="__span-12-48"><a id="__codelineno-12-48" name="__codelineno-12-48" href="#__codelineno-12-48"></a>
</span><span id="__span-12-49"><a id="__codelineno-12-49" name="__codelineno-12-49" href="#__codelineno-12-49"></a>        <span class="c1"># Get last 100 records</span>
</span><span id="__span-12-50"><a id="__codelineno-12-50" name="__codelineno-12-50" href="#__codelineno-12-50"></a>        <span class="n">batch</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data_buffer</span><span class="p">)[</span><span class="o">-</span><span class="mi">100</span><span class="p">:]</span>
</span><span id="__span-12-51"><a id="__codelineno-12-51" name="__codelineno-12-51" href="#__codelineno-12-51"></a>
</span><span id="__span-12-52"><a id="__codelineno-12-52" name="__codelineno-12-52" href="#__codelineno-12-52"></a>        <span class="c1"># Real-time analytics</span>
</span><span id="__span-12-53"><a id="__codelineno-12-53" name="__codelineno-12-53" href="#__codelineno-12-53"></a>        <span class="n">analytics</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="__span-12-54"><a id="__codelineno-12-54" name="__codelineno-12-54" href="#__codelineno-12-54"></a>            <span class="s1">&#39;timestamp&#39;</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">isoformat</span><span class="p">(),</span>
</span><span id="__span-12-55"><a id="__codelineno-12-55" name="__codelineno-12-55" href="#__codelineno-12-55"></a>            <span class="s1">&#39;total_events&#39;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">batch</span><span class="p">),</span>
</span><span id="__span-12-56"><a id="__codelineno-12-56" name="__codelineno-12-56" href="#__codelineno-12-56"></a>            <span class="s1">&#39;unique_users&#39;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">item</span><span class="p">[</span><span class="s1">&#39;user_id&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">batch</span><span class="p">)),</span>
</span><span id="__span-12-57"><a id="__codelineno-12-57" name="__codelineno-12-57" href="#__codelineno-12-57"></a>            <span class="s1">&#39;page_views&#39;</span><span class="p">:</span> <span class="nb">sum</span><span class="p">(</span><span class="mi">1</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">batch</span> <span class="k">if</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;event_type&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;page_view&#39;</span><span class="p">),</span>
</span><span id="__span-12-58"><a id="__codelineno-12-58" name="__codelineno-12-58" href="#__codelineno-12-58"></a>            <span class="s1">&#39;conversions&#39;</span><span class="p">:</span> <span class="nb">sum</span><span class="p">(</span><span class="mi">1</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">batch</span> <span class="k">if</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;revenue&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">),</span>
</span><span id="__span-12-59"><a id="__codelineno-12-59" name="__codelineno-12-59" href="#__codelineno-12-59"></a>            <span class="s1">&#39;total_revenue&#39;</span><span class="p">:</span> <span class="nb">sum</span><span class="p">(</span><span class="n">item</span><span class="p">[</span><span class="s1">&#39;revenue&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">batch</span><span class="p">),</span>
</span><span id="__span-12-60"><a id="__codelineno-12-60" name="__codelineno-12-60" href="#__codelineno-12-60"></a>            <span class="s1">&#39;top_pages&#39;</span><span class="p">:</span> <span class="n">Counter</span><span class="p">(</span><span class="n">item</span><span class="p">[</span><span class="s1">&#39;page_url&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">batch</span><span class="p">)</span><span class="o">.</span><span class="n">most_common</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span>
</span><span id="__span-12-61"><a id="__codelineno-12-61" name="__codelineno-12-61" href="#__codelineno-12-61"></a>            <span class="s1">&#39;device_breakdown&#39;</span><span class="p">:</span> <span class="n">Counter</span><span class="p">(</span><span class="n">item</span><span class="p">[</span><span class="s1">&#39;device_type&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">batch</span><span class="p">),</span>
</span><span id="__span-12-62"><a id="__codelineno-12-62" name="__codelineno-12-62" href="#__codelineno-12-62"></a>            <span class="s1">&#39;country_breakdown&#39;</span><span class="p">:</span> <span class="n">Counter</span><span class="p">(</span><span class="n">item</span><span class="p">[</span><span class="s1">&#39;country&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">batch</span><span class="p">)</span>
</span><span id="__span-12-63"><a id="__codelineno-12-63" name="__codelineno-12-63" href="#__codelineno-12-63"></a>        <span class="p">}</span>
</span><span id="__span-12-64"><a id="__codelineno-12-64" name="__codelineno-12-64" href="#__codelineno-12-64"></a>
</span><span id="__span-12-65"><a id="__codelineno-12-65" name="__codelineno-12-65" href="#__codelineno-12-65"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">real_time_metrics</span> <span class="o">=</span> <span class="n">analytics</span>
</span><span id="__span-12-66"><a id="__codelineno-12-66" name="__codelineno-12-66" href="#__codelineno-12-66"></a>
</span><span id="__span-12-67"><a id="__codelineno-12-67" name="__codelineno-12-67" href="#__codelineno-12-67"></a>        <span class="c1"># Store processed analytics</span>
</span><span id="__span-12-68"><a id="__codelineno-12-68" name="__codelineno-12-68" href="#__codelineno-12-68"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">processed_data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">analytics</span><span class="p">)</span>
</span><span id="__span-12-69"><a id="__codelineno-12-69" name="__codelineno-12-69" href="#__codelineno-12-69"></a>
</span><span id="__span-12-70"><a id="__codelineno-12-70" name="__codelineno-12-70" href="#__codelineno-12-70"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;âš¡ Real-time batch processed: </span><span class="si">{</span><span class="n">analytics</span><span class="p">[</span><span class="s1">&#39;total_events&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> events, &quot;</span>
</span><span id="__span-12-71"><a id="__codelineno-12-71" name="__codelineno-12-71" href="#__codelineno-12-71"></a>              <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">analytics</span><span class="p">[</span><span class="s1">&#39;unique_users&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> users, &quot;</span>
</span><span id="__span-12-72"><a id="__codelineno-12-72" name="__codelineno-12-72" href="#__codelineno-12-72"></a>              <span class="sa">f</span><span class="s2">&quot;$</span><span class="si">{</span><span class="n">analytics</span><span class="p">[</span><span class="s1">&#39;total_revenue&#39;</span><span class="p">]</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2"> revenue&quot;</span><span class="p">)</span>
</span><span id="__span-12-73"><a id="__codelineno-12-73" name="__codelineno-12-73" href="#__codelineno-12-73"></a>
</span><span id="__span-12-74"><a id="__codelineno-12-74" name="__codelineno-12-74" href="#__codelineno-12-74"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">generate_dashboard_data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-12-75"><a id="__codelineno-12-75" name="__codelineno-12-75" href="#__codelineno-12-75"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Generate data for real-time dashboard&quot;&quot;&quot;</span>
</span><span id="__span-12-76"><a id="__codelineno-12-76" name="__codelineno-12-76" href="#__codelineno-12-76"></a>
</span><span id="__span-12-77"><a id="__codelineno-12-77" name="__codelineno-12-77" href="#__codelineno-12-77"></a>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">processed_data</span><span class="p">:</span>
</span><span id="__span-12-78"><a id="__codelineno-12-78" name="__codelineno-12-78" href="#__codelineno-12-78"></a>            <span class="k">return</span> <span class="kc">None</span>
</span><span id="__span-12-79"><a id="__codelineno-12-79" name="__codelineno-12-79" href="#__codelineno-12-79"></a>
</span><span id="__span-12-80"><a id="__codelineno-12-80" name="__codelineno-12-80" href="#__codelineno-12-80"></a>        <span class="n">recent_batches</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">processed_data</span><span class="p">[</span><span class="o">-</span><span class="mi">10</span><span class="p">:]</span>  <span class="c1"># Last 10 batches</span>
</span><span id="__span-12-81"><a id="__codelineno-12-81" name="__codelineno-12-81" href="#__codelineno-12-81"></a>
</span><span id="__span-12-82"><a id="__codelineno-12-82" name="__codelineno-12-82" href="#__codelineno-12-82"></a>        <span class="n">dashboard</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="__span-12-83"><a id="__codelineno-12-83" name="__codelineno-12-83" href="#__codelineno-12-83"></a>            <span class="s1">&#39;current_time&#39;</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">isoformat</span><span class="p">(),</span>
</span><span id="__span-12-84"><a id="__codelineno-12-84" name="__codelineno-12-84" href="#__codelineno-12-84"></a>            <span class="s1">&#39;total_events_last_hour&#39;</span><span class="p">:</span> <span class="nb">sum</span><span class="p">(</span><span class="n">batch</span><span class="p">[</span><span class="s1">&#39;total_events&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">batch</span> <span class="ow">in</span> <span class="n">recent_batches</span><span class="p">),</span>
</span><span id="__span-12-85"><a id="__codelineno-12-85" name="__codelineno-12-85" href="#__codelineno-12-85"></a>            <span class="s1">&#39;unique_users_last_hour&#39;</span><span class="p">:</span> <span class="nb">sum</span><span class="p">(</span><span class="n">batch</span><span class="p">[</span><span class="s1">&#39;unique_users&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">batch</span> <span class="ow">in</span> <span class="n">recent_batches</span><span class="p">),</span>
</span><span id="__span-12-86"><a id="__codelineno-12-86" name="__codelineno-12-86" href="#__codelineno-12-86"></a>            <span class="s1">&#39;conversion_rate&#39;</span><span class="p">:</span> <span class="p">(</span><span class="nb">sum</span><span class="p">(</span><span class="n">batch</span><span class="p">[</span><span class="s1">&#39;conversions&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">batch</span> <span class="ow">in</span> <span class="n">recent_batches</span><span class="p">)</span> <span class="o">/</span> 
</span><span id="__span-12-87"><a id="__codelineno-12-87" name="__codelineno-12-87" href="#__codelineno-12-87"></a>                              <span class="nb">sum</span><span class="p">(</span><span class="n">batch</span><span class="p">[</span><span class="s1">&#39;total_events&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">batch</span> <span class="ow">in</span> <span class="n">recent_batches</span><span class="p">)</span> <span class="o">*</span> <span class="mi">100</span><span class="p">),</span>
</span><span id="__span-12-88"><a id="__codelineno-12-88" name="__codelineno-12-88" href="#__codelineno-12-88"></a>            <span class="s1">&#39;revenue_last_hour&#39;</span><span class="p">:</span> <span class="nb">sum</span><span class="p">(</span><span class="n">batch</span><span class="p">[</span><span class="s1">&#39;total_revenue&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">batch</span> <span class="ow">in</span> <span class="n">recent_batches</span><span class="p">),</span>
</span><span id="__span-12-89"><a id="__codelineno-12-89" name="__codelineno-12-89" href="#__codelineno-12-89"></a>            <span class="s1">&#39;top_performing_pages&#39;</span><span class="p">:</span> <span class="n">Counter</span><span class="p">(),</span>
</span><span id="__span-12-90"><a id="__codelineno-12-90" name="__codelineno-12-90" href="#__codelineno-12-90"></a>            <span class="s1">&#39;traffic_by_device&#39;</span><span class="p">:</span> <span class="n">Counter</span><span class="p">(),</span>
</span><span id="__span-12-91"><a id="__codelineno-12-91" name="__codelineno-12-91" href="#__codelineno-12-91"></a>            <span class="s1">&#39;global_traffic&#39;</span><span class="p">:</span> <span class="n">Counter</span><span class="p">()</span>
</span><span id="__span-12-92"><a id="__codelineno-12-92" name="__codelineno-12-92" href="#__codelineno-12-92"></a>        <span class="p">}</span>
</span><span id="__span-12-93"><a id="__codelineno-12-93" name="__codelineno-12-93" href="#__codelineno-12-93"></a>
</span><span id="__span-12-94"><a id="__codelineno-12-94" name="__codelineno-12-94" href="#__codelineno-12-94"></a>        <span class="c1"># Aggregate data across batches</span>
</span><span id="__span-12-95"><a id="__codelineno-12-95" name="__codelineno-12-95" href="#__codelineno-12-95"></a>        <span class="k">for</span> <span class="n">batch</span> <span class="ow">in</span> <span class="n">recent_batches</span><span class="p">:</span>
</span><span id="__span-12-96"><a id="__codelineno-12-96" name="__codelineno-12-96" href="#__codelineno-12-96"></a>            <span class="n">dashboard</span><span class="p">[</span><span class="s1">&#39;top_performing_pages&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">batch</span><span class="p">[</span><span class="s1">&#39;top_pages&#39;</span><span class="p">]))</span>
</span><span id="__span-12-97"><a id="__codelineno-12-97" name="__codelineno-12-97" href="#__codelineno-12-97"></a>            <span class="n">dashboard</span><span class="p">[</span><span class="s1">&#39;traffic_by_device&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">batch</span><span class="p">[</span><span class="s1">&#39;device_breakdown&#39;</span><span class="p">])</span>
</span><span id="__span-12-98"><a id="__codelineno-12-98" name="__codelineno-12-98" href="#__codelineno-12-98"></a>            <span class="n">dashboard</span><span class="p">[</span><span class="s1">&#39;global_traffic&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">batch</span><span class="p">[</span><span class="s1">&#39;country_breakdown&#39;</span><span class="p">])</span>
</span><span id="__span-12-99"><a id="__codelineno-12-99" name="__codelineno-12-99" href="#__codelineno-12-99"></a>
</span><span id="__span-12-100"><a id="__codelineno-12-100" name="__codelineno-12-100" href="#__codelineno-12-100"></a>        <span class="k">return</span> <span class="n">dashboard</span>
</span><span id="__span-12-101"><a id="__codelineno-12-101" name="__codelineno-12-101" href="#__codelineno-12-101"></a>
</span><span id="__span-12-102"><a id="__codelineno-12-102" name="__codelineno-12-102" href="#__codelineno-12-102"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">simulate_real_time_processing</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">duration_seconds</span><span class="o">=</span><span class="mi">30</span><span class="p">):</span>
</span><span id="__span-12-103"><a id="__codelineno-12-103" name="__codelineno-12-103" href="#__codelineno-12-103"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Simulate real-time data processing for a dashboard&quot;&quot;&quot;</span>
</span><span id="__span-12-104"><a id="__codelineno-12-104" name="__codelineno-12-104" href="#__codelineno-12-104"></a>
</span><span id="__span-12-105"><a id="__codelineno-12-105" name="__codelineno-12-105" href="#__codelineno-12-105"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">ğŸ“ˆ REAL-TIME BIG DATA PROCESSING SIMULATION&quot;</span><span class="p">)</span>
</span><span id="__span-12-106"><a id="__codelineno-12-106" name="__codelineno-12-106" href="#__codelineno-12-106"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Duration: </span><span class="si">{</span><span class="n">duration_seconds</span><span class="si">}</span><span class="s2"> seconds&quot;</span><span class="p">)</span>
</span><span id="__span-12-107"><a id="__codelineno-12-107" name="__codelineno-12-107" href="#__codelineno-12-107"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;=&quot;</span> <span class="o">*</span> <span class="mi">60</span><span class="p">)</span>
</span><span id="__span-12-108"><a id="__codelineno-12-108" name="__codelineno-12-108" href="#__codelineno-12-108"></a>
</span><span id="__span-12-109"><a id="__codelineno-12-109" name="__codelineno-12-109" href="#__codelineno-12-109"></a>        <span class="n">start_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
</span><span id="__span-12-110"><a id="__codelineno-12-110" name="__codelineno-12-110" href="#__codelineno-12-110"></a>
</span><span id="__span-12-111"><a id="__codelineno-12-111" name="__codelineno-12-111" href="#__codelineno-12-111"></a>        <span class="k">while</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start_time</span> <span class="o">&lt;</span> <span class="n">duration_seconds</span><span class="p">:</span>
</span><span id="__span-12-112"><a id="__codelineno-12-112" name="__codelineno-12-112" href="#__codelineno-12-112"></a>            <span class="c1"># Generate new data points</span>
</span><span id="__span-12-113"><a id="__codelineno-12-113" name="__codelineno-12-113" href="#__codelineno-12-113"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">generate_sample_data</span><span class="p">(</span><span class="n">count</span><span class="o">=</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="mi">200</span><span class="p">))</span>
</span><span id="__span-12-114"><a id="__codelineno-12-114" name="__codelineno-12-114" href="#__codelineno-12-114"></a>
</span><span id="__span-12-115"><a id="__codelineno-12-115" name="__codelineno-12-115" href="#__codelineno-12-115"></a>            <span class="c1"># Generate dashboard update</span>
</span><span id="__span-12-116"><a id="__codelineno-12-116" name="__codelineno-12-116" href="#__codelineno-12-116"></a>            <span class="n">dashboard</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">generate_dashboard_data</span><span class="p">()</span>
</span><span id="__span-12-117"><a id="__codelineno-12-117" name="__codelineno-12-117" href="#__codelineno-12-117"></a>
</span><span id="__span-12-118"><a id="__codelineno-12-118" name="__codelineno-12-118" href="#__codelineno-12-118"></a>            <span class="k">if</span> <span class="n">dashboard</span><span class="p">:</span>
</span><span id="__span-12-119"><a id="__codelineno-12-119" name="__codelineno-12-119" href="#__codelineno-12-119"></a>                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">ğŸ¯ Dashboard Update (</span><span class="si">{</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%H:%M:%S&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">):&quot;</span><span class="p">)</span>
</span><span id="__span-12-120"><a id="__codelineno-12-120" name="__codelineno-12-120" href="#__codelineno-12-120"></a>                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Events/hour: </span><span class="si">{</span><span class="n">dashboard</span><span class="p">[</span><span class="s1">&#39;total_events_last_hour&#39;</span><span class="p">]</span><span class="si">:</span><span class="s2">,</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-12-121"><a id="__codelineno-12-121" name="__codelineno-12-121" href="#__codelineno-12-121"></a>                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Users/hour: </span><span class="si">{</span><span class="n">dashboard</span><span class="p">[</span><span class="s1">&#39;unique_users_last_hour&#39;</span><span class="p">]</span><span class="si">:</span><span class="s2">,</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-12-122"><a id="__codelineno-12-122" name="__codelineno-12-122" href="#__codelineno-12-122"></a>                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Conversion rate: </span><span class="si">{</span><span class="n">dashboard</span><span class="p">[</span><span class="s1">&#39;conversion_rate&#39;</span><span class="p">]</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">%&quot;</span><span class="p">)</span>
</span><span id="__span-12-123"><a id="__codelineno-12-123" name="__codelineno-12-123" href="#__codelineno-12-123"></a>                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Revenue/hour: $</span><span class="si">{</span><span class="n">dashboard</span><span class="p">[</span><span class="s1">&#39;revenue_last_hour&#39;</span><span class="p">]</span><span class="si">:</span><span class="s2">,.2f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-12-124"><a id="__codelineno-12-124" name="__codelineno-12-124" href="#__codelineno-12-124"></a>
</span><span id="__span-12-125"><a id="__codelineno-12-125" name="__codelineno-12-125" href="#__codelineno-12-125"></a>                <span class="c1"># Top pages</span>
</span><span id="__span-12-126"><a id="__codelineno-12-126" name="__codelineno-12-126" href="#__codelineno-12-126"></a>                <span class="n">top_pages</span> <span class="o">=</span> <span class="n">dashboard</span><span class="p">[</span><span class="s1">&#39;top_performing_pages&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">most_common</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</span><span id="__span-12-127"><a id="__codelineno-12-127" name="__codelineno-12-127" href="#__codelineno-12-127"></a>                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Top pages: </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">page</span><span class="si">}</span><span class="s1">(</span><span class="si">{</span><span class="n">count</span><span class="si">}</span><span class="s1">)&#39;</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">page</span><span class="p">,</span><span class="w"> </span><span class="n">count</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">top_pages</span><span class="p">])</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-12-128"><a id="__codelineno-12-128" name="__codelineno-12-128" href="#__codelineno-12-128"></a>
</span><span id="__span-12-129"><a id="__codelineno-12-129" name="__codelineno-12-129" href="#__codelineno-12-129"></a>            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>  <span class="c1"># Update every 2 seconds</span>
</span><span id="__span-12-130"><a id="__codelineno-12-130" name="__codelineno-12-130" href="#__codelineno-12-130"></a>
</span><span id="__span-12-131"><a id="__codelineno-12-131" name="__codelineno-12-131" href="#__codelineno-12-131"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">âœ… Real-time processing simulation complete!&quot;</span><span class="p">)</span>
</span><span id="__span-12-132"><a id="__codelineno-12-132" name="__codelineno-12-132" href="#__codelineno-12-132"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Total data points processed: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data_buffer</span><span class="p">)</span><span class="si">:</span><span class="s2">,</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-12-133"><a id="__codelineno-12-133" name="__codelineno-12-133" href="#__codelineno-12-133"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Analytics batches generated: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">processed_data</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-12-134"><a id="__codelineno-12-134" name="__codelineno-12-134" href="#__codelineno-12-134"></a>
</span><span id="__span-12-135"><a id="__codelineno-12-135" name="__codelineno-12-135" href="#__codelineno-12-135"></a><span class="c1"># Demonstrate big data processing</span>
</span><span id="__span-12-136"><a id="__codelineno-12-136" name="__codelineno-12-136" href="#__codelineno-12-136"></a><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;ğŸ“Š BIG DATA PROCESSING DEMONSTRATION&quot;</span><span class="p">)</span>
</span><span id="__span-12-137"><a id="__codelineno-12-137" name="__codelineno-12-137" href="#__codelineno-12-137"></a><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Let&#39;s process streaming web analytics data in real-time!&quot;</span><span class="p">)</span>
</span><span id="__span-12-138"><a id="__codelineno-12-138" name="__codelineno-12-138" href="#__codelineno-12-138"></a><span class="nb">print</span><span class="p">()</span>
</span><span id="__span-12-139"><a id="__codelineno-12-139" name="__codelineno-12-139" href="#__codelineno-12-139"></a>
</span><span id="__span-12-140"><a id="__codelineno-12-140" name="__codelineno-12-140" href="#__codelineno-12-140"></a><span class="n">processor</span> <span class="o">=</span> <span class="n">BigDataProcessor</span><span class="p">()</span>
</span><span id="__span-12-141"><a id="__codelineno-12-141" name="__codelineno-12-141" href="#__codelineno-12-141"></a>
</span><span id="__span-12-142"><a id="__codelineno-12-142" name="__codelineno-12-142" href="#__codelineno-12-142"></a><span class="c1"># Generate initial dataset</span>
</span><span id="__span-12-143"><a id="__codelineno-12-143" name="__codelineno-12-143" href="#__codelineno-12-143"></a><span class="n">processor</span><span class="o">.</span><span class="n">generate_sample_data</span><span class="p">(</span><span class="n">count</span><span class="o">=</span><span class="mi">500</span><span class="p">)</span>
</span><span id="__span-12-144"><a id="__codelineno-12-144" name="__codelineno-12-144" href="#__codelineno-12-144"></a>
</span><span id="__span-12-145"><a id="__codelineno-12-145" name="__codelineno-12-145" href="#__codelineno-12-145"></a><span class="c1"># Simulate real-time processing</span>
</span><span id="__span-12-146"><a id="__codelineno-12-146" name="__codelineno-12-146" href="#__codelineno-12-146"></a><span class="n">processor</span><span class="o">.</span><span class="n">simulate_real_time_processing</span><span class="p">(</span><span class="n">duration_seconds</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
</span><span id="__span-12-147"><a id="__codelineno-12-147" name="__codelineno-12-147" href="#__codelineno-12-147"></a>
</span><span id="__span-12-148"><a id="__codelineno-12-148" name="__codelineno-12-148" href="#__codelineno-12-148"></a><span class="c1"># Final analytics summary</span>
</span><span id="__span-12-149"><a id="__codelineno-12-149" name="__codelineno-12-149" href="#__codelineno-12-149"></a><span class="n">final_dashboard</span> <span class="o">=</span> <span class="n">processor</span><span class="o">.</span><span class="n">generate_dashboard_data</span><span class="p">()</span>
</span><span id="__span-12-150"><a id="__codelineno-12-150" name="__codelineno-12-150" href="#__codelineno-12-150"></a><span class="k">if</span> <span class="n">final_dashboard</span><span class="p">:</span>
</span><span id="__span-12-151"><a id="__codelineno-12-151" name="__codelineno-12-151" href="#__codelineno-12-151"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">ğŸ“‹ FINAL ANALYTICS REPORT&quot;</span><span class="p">)</span>
</span><span id="__span-12-152"><a id="__codelineno-12-152" name="__codelineno-12-152" href="#__codelineno-12-152"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;=&quot;</span> <span class="o">*</span> <span class="mi">40</span><span class="p">)</span>
</span><span id="__span-12-153"><a id="__codelineno-12-153" name="__codelineno-12-153" href="#__codelineno-12-153"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Total events processed: </span><span class="si">{</span><span class="n">final_dashboard</span><span class="p">[</span><span class="s1">&#39;total_events_last_hour&#39;</span><span class="p">]</span><span class="si">:</span><span class="s2">,</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-12-154"><a id="__codelineno-12-154" name="__codelineno-12-154" href="#__codelineno-12-154"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unique users: </span><span class="si">{</span><span class="n">final_dashboard</span><span class="p">[</span><span class="s1">&#39;unique_users_last_hour&#39;</span><span class="p">]</span><span class="si">:</span><span class="s2">,</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-12-155"><a id="__codelineno-12-155" name="__codelineno-12-155" href="#__codelineno-12-155"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Conversion rate: </span><span class="si">{</span><span class="n">final_dashboard</span><span class="p">[</span><span class="s1">&#39;conversion_rate&#39;</span><span class="p">]</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">%&quot;</span><span class="p">)</span>
</span><span id="__span-12-156"><a id="__codelineno-12-156" name="__codelineno-12-156" href="#__codelineno-12-156"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Total revenue: $</span><span class="si">{</span><span class="n">final_dashboard</span><span class="p">[</span><span class="s1">&#39;revenue_last_hour&#39;</span><span class="p">]</span><span class="si">:</span><span class="s2">,.2f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span></code></pre></div>
</details>
<h4 id="data-mining-metadata-extracting-intelligence-from-chaos"><strong>Data Mining &amp; Metadata: Extracting Intelligence from Chaos</strong><a class="headerlink" href="#data-mining-metadata-extracting-intelligence-from-chaos" title="Permanent link">&para;</a></h4>
<p>Modern web applications generate enormous amounts of metadataâ€”information about information. Understanding how to mine this data for insights is crucial for business intelligence, user experience optimization, and predictive analytics.</p>
<details class="example">
<summary>Practical Data Mining Example</summary>
<div class="language-python highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
</span><span id="__span-13-2"><a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a><span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
</span><span id="__span-13-3"><a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a><span class="kn">from</span><span class="w"> </span><span class="nn">collections</span><span class="w"> </span><span class="kn">import</span> <span class="n">defaultdict</span>
</span><span id="__span-13-4"><a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a><span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>
</span><span id="__span-13-5"><a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a><span class="kn">from</span><span class="w"> </span><span class="nn">datetime</span><span class="w"> </span><span class="kn">import</span> <span class="n">datetime</span><span class="p">,</span> <span class="n">timedelta</span>
</span><span id="__span-13-6"><a id="__codelineno-13-6" name="__codelineno-13-6" href="#__codelineno-13-6"></a>
</span><span id="__span-13-7"><a id="__codelineno-13-7" name="__codelineno-13-7" href="#__codelineno-13-7"></a><span class="k">class</span><span class="w"> </span><span class="nc">WebDataMiner</span><span class="p">:</span>
</span><span id="__span-13-8"><a id="__codelineno-13-8" name="__codelineno-13-8" href="#__codelineno-13-8"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Extract insights from web application data&quot;&quot;&quot;</span>
</span><span id="__span-13-9"><a id="__codelineno-13-9" name="__codelineno-13-9" href="#__codelineno-13-9"></a>
</span><span id="__span-13-10"><a id="__codelineno-13-10" name="__codelineno-13-10" href="#__codelineno-13-10"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-13-11"><a id="__codelineno-13-11" name="__codelineno-13-11" href="#__codelineno-13-11"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">user_behavior_data</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="__span-13-12"><a id="__codelineno-13-12" name="__codelineno-13-12" href="#__codelineno-13-12"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">content_performance_data</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="__span-13-13"><a id="__codelineno-13-13" name="__codelineno-13-13" href="#__codelineno-13-13"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">system_performance_data</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="__span-13-14"><a id="__codelineno-13-14" name="__codelineno-13-14" href="#__codelineno-13-14"></a>
</span><span id="__span-13-15"><a id="__codelineno-13-15" name="__codelineno-13-15" href="#__codelineno-13-15"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">analyze_user_journey</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">session_data</span><span class="p">):</span>
</span><span id="__span-13-16"><a id="__codelineno-13-16" name="__codelineno-13-16" href="#__codelineno-13-16"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Analyze user journey patterns&quot;&quot;&quot;</span>
</span><span id="__span-13-17"><a id="__codelineno-13-17" name="__codelineno-13-17" href="#__codelineno-13-17"></a>
</span><span id="__span-13-18"><a id="__codelineno-13-18" name="__codelineno-13-18" href="#__codelineno-13-18"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;ğŸ” USER JOURNEY ANALYSIS&quot;</span><span class="p">)</span>
</span><span id="__span-13-19"><a id="__codelineno-13-19" name="__codelineno-13-19" href="#__codelineno-13-19"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;-&quot;</span> <span class="o">*</span> <span class="mi">30</span><span class="p">)</span>
</span><span id="__span-13-20"><a id="__codelineno-13-20" name="__codelineno-13-20" href="#__codelineno-13-20"></a>
</span><span id="__span-13-21"><a id="__codelineno-13-21" name="__codelineno-13-21" href="#__codelineno-13-21"></a>        <span class="c1"># Common paths through the website</span>
</span><span id="__span-13-22"><a id="__codelineno-13-22" name="__codelineno-13-22" href="#__codelineno-13-22"></a>        <span class="n">path_analysis</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
</span><span id="__span-13-23"><a id="__codelineno-13-23" name="__codelineno-13-23" href="#__codelineno-13-23"></a>        <span class="n">conversion_funnels</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">list</span><span class="p">)</span>
</span><span id="__span-13-24"><a id="__codelineno-13-24" name="__codelineno-13-24" href="#__codelineno-13-24"></a>
</span><span id="__span-13-25"><a id="__codelineno-13-25" name="__codelineno-13-25" href="#__codelineno-13-25"></a>        <span class="k">for</span> <span class="n">session</span> <span class="ow">in</span> <span class="n">session_data</span><span class="p">:</span>
</span><span id="__span-13-26"><a id="__codelineno-13-26" name="__codelineno-13-26" href="#__codelineno-13-26"></a>            <span class="n">pages</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;pages_visited&#39;</span><span class="p">,</span> <span class="p">[])</span>
</span><span id="__span-13-27"><a id="__codelineno-13-27" name="__codelineno-13-27" href="#__codelineno-13-27"></a>
</span><span id="__span-13-28"><a id="__codelineno-13-28" name="__codelineno-13-28" href="#__codelineno-13-28"></a>            <span class="c1"># Analyze page sequences</span>
</span><span id="__span-13-29"><a id="__codelineno-13-29" name="__codelineno-13-29" href="#__codelineno-13-29"></a>            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">pages</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
</span><span id="__span-13-30"><a id="__codelineno-13-30" name="__codelineno-13-30" href="#__codelineno-13-30"></a>                <span class="n">path</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">pages</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="si">}</span><span class="s2"> â†’ </span><span class="si">{</span><span class="n">pages</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="__span-13-31"><a id="__codelineno-13-31" name="__codelineno-13-31" href="#__codelineno-13-31"></a>                <span class="n">path_analysis</span><span class="p">[</span><span class="n">path</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="__span-13-32"><a id="__codelineno-13-32" name="__codelineno-13-32" href="#__codelineno-13-32"></a>
</span><span id="__span-13-33"><a id="__codelineno-13-33" name="__codelineno-13-33" href="#__codelineno-13-33"></a>            <span class="c1"># Track conversion funnel</span>
</span><span id="__span-13-34"><a id="__codelineno-13-34" name="__codelineno-13-34" href="#__codelineno-13-34"></a>            <span class="k">if</span> <span class="s1">&#39;product&#39;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">pages</span><span class="p">)</span> <span class="ow">and</span> <span class="s1">&#39;checkout&#39;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">pages</span><span class="p">):</span>
</span><span id="__span-13-35"><a id="__codelineno-13-35" name="__codelineno-13-35" href="#__codelineno-13-35"></a>                <span class="n">conversion_funnels</span><span class="p">[</span><span class="s1">&#39;converted&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">session</span><span class="p">)</span>
</span><span id="__span-13-36"><a id="__codelineno-13-36" name="__codelineno-13-36" href="#__codelineno-13-36"></a>            <span class="k">elif</span> <span class="s1">&#39;product&#39;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">pages</span><span class="p">):</span>
</span><span id="__span-13-37"><a id="__codelineno-13-37" name="__codelineno-13-37" href="#__codelineno-13-37"></a>                <span class="n">conversion_funnels</span><span class="p">[</span><span class="s1">&#39;interested&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">session</span><span class="p">)</span>
</span><span id="__span-13-38"><a id="__codelineno-13-38" name="__codelineno-13-38" href="#__codelineno-13-38"></a>
</span><span id="__span-13-39"><a id="__codelineno-13-39" name="__codelineno-13-39" href="#__codelineno-13-39"></a>        <span class="c1"># Top user paths</span>
</span><span id="__span-13-40"><a id="__codelineno-13-40" name="__codelineno-13-40" href="#__codelineno-13-40"></a>        <span class="n">top_paths</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">path_analysis</span><span class="o">.</span><span class="n">items</span><span class="p">(),</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)[:</span><span class="mi">5</span><span class="p">]</span>
</span><span id="__span-13-41"><a id="__codelineno-13-41" name="__codelineno-13-41" href="#__codelineno-13-41"></a>
</span><span id="__span-13-42"><a id="__codelineno-13-42" name="__codelineno-13-42" href="#__codelineno-13-42"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;ğŸ›¤ï¸ Most Common User Paths:&quot;</span><span class="p">)</span>
</span><span id="__span-13-43"><a id="__codelineno-13-43" name="__codelineno-13-43" href="#__codelineno-13-43"></a>        <span class="k">for</span> <span class="n">path</span><span class="p">,</span> <span class="n">count</span> <span class="ow">in</span> <span class="n">top_paths</span><span class="p">:</span>
</span><span id="__span-13-44"><a id="__codelineno-13-44" name="__codelineno-13-44" href="#__codelineno-13-44"></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   </span><span class="si">{</span><span class="n">path</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">count</span><span class="si">}</span><span class="s2"> users&quot;</span><span class="p">)</span>
</span><span id="__span-13-45"><a id="__codelineno-13-45" name="__codelineno-13-45" href="#__codelineno-13-45"></a>
</span><span id="__span-13-46"><a id="__codelineno-13-46" name="__codelineno-13-46" href="#__codelineno-13-46"></a>        <span class="c1"># Conversion analysis</span>
</span><span id="__span-13-47"><a id="__codelineno-13-47" name="__codelineno-13-47" href="#__codelineno-13-47"></a>        <span class="n">total_sessions</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">session_data</span><span class="p">)</span>
</span><span id="__span-13-48"><a id="__codelineno-13-48" name="__codelineno-13-48" href="#__codelineno-13-48"></a>        <span class="n">interested_users</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">conversion_funnels</span><span class="p">[</span><span class="s1">&#39;interested&#39;</span><span class="p">])</span>
</span><span id="__span-13-49"><a id="__codelineno-13-49" name="__codelineno-13-49" href="#__codelineno-13-49"></a>        <span class="n">converted_users</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">conversion_funnels</span><span class="p">[</span><span class="s1">&#39;converted&#39;</span><span class="p">])</span>
</span><span id="__span-13-50"><a id="__codelineno-13-50" name="__codelineno-13-50" href="#__codelineno-13-50"></a>
</span><span id="__span-13-51"><a id="__codelineno-13-51" name="__codelineno-13-51" href="#__codelineno-13-51"></a>        <span class="k">if</span> <span class="n">interested_users</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="__span-13-52"><a id="__codelineno-13-52" name="__codelineno-13-52" href="#__codelineno-13-52"></a>            <span class="n">conversion_rate</span> <span class="o">=</span> <span class="p">(</span><span class="n">converted_users</span> <span class="o">/</span> <span class="n">interested_users</span><span class="p">)</span> <span class="o">*</span> <span class="mi">100</span>
</span><span id="__span-13-53"><a id="__codelineno-13-53" name="__codelineno-13-53" href="#__codelineno-13-53"></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">ğŸ’° Conversion Analysis:&quot;</span><span class="p">)</span>
</span><span id="__span-13-54"><a id="__codelineno-13-54" name="__codelineno-13-54" href="#__codelineno-13-54"></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Total sessions: </span><span class="si">{</span><span class="n">total_sessions</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-13-55"><a id="__codelineno-13-55" name="__codelineno-13-55" href="#__codelineno-13-55"></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Interested users: </span><span class="si">{</span><span class="n">interested_users</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-13-56"><a id="__codelineno-13-56" name="__codelineno-13-56" href="#__codelineno-13-56"></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Converted users: </span><span class="si">{</span><span class="n">converted_users</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-13-57"><a id="__codelineno-13-57" name="__codelineno-13-57" href="#__codelineno-13-57"></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Conversion rate: </span><span class="si">{</span><span class="n">conversion_rate</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">%&quot;</span><span class="p">)</span>
</span><span id="__span-13-58"><a id="__codelineno-13-58" name="__codelineno-13-58" href="#__codelineno-13-58"></a>
</span><span id="__span-13-59"><a id="__codelineno-13-59" name="__codelineno-13-59" href="#__codelineno-13-59"></a>        <span class="k">return</span> <span class="p">{</span>
</span><span id="__span-13-60"><a id="__codelineno-13-60" name="__codelineno-13-60" href="#__codelineno-13-60"></a>            <span class="s1">&#39;top_paths&#39;</span><span class="p">:</span> <span class="n">top_paths</span><span class="p">,</span>
</span><span id="__span-13-61"><a id="__codelineno-13-61" name="__codelineno-13-61" href="#__codelineno-13-61"></a>            <span class="s1">&#39;conversion_rate&#39;</span><span class="p">:</span> <span class="n">conversion_rate</span> <span class="k">if</span> <span class="n">interested_users</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="mi">0</span><span class="p">,</span>
</span><span id="__span-13-62"><a id="__codelineno-13-62" name="__codelineno-13-62" href="#__codelineno-13-62"></a>            <span class="s1">&#39;funnel_data&#39;</span><span class="p">:</span> <span class="n">conversion_funnels</span>
</span><span id="__span-13-63"><a id="__codelineno-13-63" name="__codelineno-13-63" href="#__codelineno-13-63"></a>        <span class="p">}</span>
</span><span id="__span-13-64"><a id="__codelineno-13-64" name="__codelineno-13-64" href="#__codelineno-13-64"></a>
</span><span id="__span-13-65"><a id="__codelineno-13-65" name="__codelineno-13-65" href="#__codelineno-13-65"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">content_performance_analysis</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">content_data</span><span class="p">):</span>
</span><span id="__span-13-66"><a id="__codelineno-13-66" name="__codelineno-13-66" href="#__codelineno-13-66"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Analyze which content performs best&quot;&quot;&quot;</span>
</span><span id="__span-13-67"><a id="__codelineno-13-67" name="__codelineno-13-67" href="#__codelineno-13-67"></a>
</span><span id="__span-13-68"><a id="__codelineno-13-68" name="__codelineno-13-68" href="#__codelineno-13-68"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">ğŸ“ CONTENT PERFORMANCE ANALYSIS&quot;</span><span class="p">)</span>
</span><span id="__span-13-69"><a id="__codelineno-13-69" name="__codelineno-13-69" href="#__codelineno-13-69"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;-&quot;</span> <span class="o">*</span> <span class="mi">35</span><span class="p">)</span>
</span><span id="__span-13-70"><a id="__codelineno-13-70" name="__codelineno-13-70" href="#__codelineno-13-70"></a>
</span><span id="__span-13-71"><a id="__codelineno-13-71" name="__codelineno-13-71" href="#__codelineno-13-71"></a>        <span class="c1"># Analyze content metrics</span>
</span><span id="__span-13-72"><a id="__codelineno-13-72" name="__codelineno-13-72" href="#__codelineno-13-72"></a>        <span class="n">content_metrics</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="__span-13-73"><a id="__codelineno-13-73" name="__codelineno-13-73" href="#__codelineno-13-73"></a>
</span><span id="__span-13-74"><a id="__codelineno-13-74" name="__codelineno-13-74" href="#__codelineno-13-74"></a>        <span class="k">for</span> <span class="n">content</span> <span class="ow">in</span> <span class="n">content_data</span><span class="p">:</span>
</span><span id="__span-13-75"><a id="__codelineno-13-75" name="__codelineno-13-75" href="#__codelineno-13-75"></a>            <span class="n">content_id</span> <span class="o">=</span> <span class="n">content</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span>
</span><span id="__span-13-76"><a id="__codelineno-13-76" name="__codelineno-13-76" href="#__codelineno-13-76"></a>            <span class="n">content_metrics</span><span class="p">[</span><span class="n">content_id</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="__span-13-77"><a id="__codelineno-13-77" name="__codelineno-13-77" href="#__codelineno-13-77"></a>                <span class="s1">&#39;views&#39;</span><span class="p">:</span> <span class="n">content</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;views&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
</span><span id="__span-13-78"><a id="__codelineno-13-78" name="__codelineno-13-78" href="#__codelineno-13-78"></a>                <span class="s1">&#39;time_on_page&#39;</span><span class="p">:</span> <span class="n">content</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;avg_time_on_page&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
</span><span id="__span-13-79"><a id="__codelineno-13-79" name="__codelineno-13-79" href="#__codelineno-13-79"></a>                <span class="s1">&#39;bounce_rate&#39;</span><span class="p">:</span> <span class="n">content</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;bounce_rate&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
</span><span id="__span-13-80"><a id="__codelineno-13-80" name="__codelineno-13-80" href="#__codelineno-13-80"></a>                <span class="s1">&#39;shares&#39;</span><span class="p">:</span> <span class="n">content</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;social_shares&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
</span><span id="__span-13-81"><a id="__codelineno-13-81" name="__codelineno-13-81" href="#__codelineno-13-81"></a>                <span class="s1">&#39;comments&#39;</span><span class="p">:</span> <span class="n">content</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;comments&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</span><span id="__span-13-82"><a id="__codelineno-13-82" name="__codelineno-13-82" href="#__codelineno-13-82"></a>            <span class="p">}</span>
</span><span id="__span-13-83"><a id="__codelineno-13-83" name="__codelineno-13-83" href="#__codelineno-13-83"></a>
</span><span id="__span-13-84"><a id="__codelineno-13-84" name="__codelineno-13-84" href="#__codelineno-13-84"></a>        <span class="c1"># Calculate engagement score</span>
</span><span id="__span-13-85"><a id="__codelineno-13-85" name="__codelineno-13-85" href="#__codelineno-13-85"></a>        <span class="k">for</span> <span class="n">content_id</span><span class="p">,</span> <span class="n">metrics</span> <span class="ow">in</span> <span class="n">content_metrics</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="__span-13-86"><a id="__codelineno-13-86" name="__codelineno-13-86" href="#__codelineno-13-86"></a>            <span class="n">engagement_score</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="__span-13-87"><a id="__codelineno-13-87" name="__codelineno-13-87" href="#__codelineno-13-87"></a>                <span class="p">(</span><span class="n">metrics</span><span class="p">[</span><span class="s1">&#39;time_on_page&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="mi">60</span><span class="p">)</span> <span class="o">*</span> <span class="mf">0.3</span> <span class="o">+</span>  <span class="c1"># Time weight</span>
</span><span id="__span-13-88"><a id="__codelineno-13-88" name="__codelineno-13-88" href="#__codelineno-13-88"></a>                <span class="p">(</span><span class="mi">100</span> <span class="o">-</span> <span class="n">metrics</span><span class="p">[</span><span class="s1">&#39;bounce_rate&#39;</span><span class="p">])</span> <span class="o">*</span> <span class="mf">0.3</span> <span class="o">+</span>   <span class="c1"># Retention weight</span>
</span><span id="__span-13-89"><a id="__codelineno-13-89" name="__codelineno-13-89" href="#__codelineno-13-89"></a>                <span class="n">metrics</span><span class="p">[</span><span class="s1">&#39;shares&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="mf">0.2</span> <span class="o">+</span>                <span class="c1"># Social weight</span>
</span><span id="__span-13-90"><a id="__codelineno-13-90" name="__codelineno-13-90" href="#__codelineno-13-90"></a>                <span class="n">metrics</span><span class="p">[</span><span class="s1">&#39;comments&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="mf">0.2</span>                <span class="c1"># Interaction weight</span>
</span><span id="__span-13-91"><a id="__codelineno-13-91" name="__codelineno-13-91" href="#__codelineno-13-91"></a>            <span class="p">)</span>
</span><span id="__span-13-92"><a id="__codelineno-13-92" name="__codelineno-13-92" href="#__codelineno-13-92"></a>            <span class="n">metrics</span><span class="p">[</span><span class="s1">&#39;engagement_score&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">engagement_score</span>
</span><span id="__span-13-93"><a id="__codelineno-13-93" name="__codelineno-13-93" href="#__codelineno-13-93"></a>
</span><span id="__span-13-94"><a id="__codelineno-13-94" name="__codelineno-13-94" href="#__codelineno-13-94"></a>        <span class="c1"># Top performing content</span>
</span><span id="__span-13-95"><a id="__codelineno-13-95" name="__codelineno-13-95" href="#__codelineno-13-95"></a>        <span class="n">top_content</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span>
</span><span id="__span-13-96"><a id="__codelineno-13-96" name="__codelineno-13-96" href="#__codelineno-13-96"></a>            <span class="n">content_metrics</span><span class="o">.</span><span class="n">items</span><span class="p">(),</span> 
</span><span id="__span-13-97"><a id="__codelineno-13-97" name="__codelineno-13-97" href="#__codelineno-13-97"></a>            <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="s1">&#39;engagement_score&#39;</span><span class="p">],</span> 
</span><span id="__span-13-98"><a id="__codelineno-13-98" name="__codelineno-13-98" href="#__codelineno-13-98"></a>            <span class="n">reverse</span><span class="o">=</span><span class="kc">True</span>
</span><span id="__span-13-99"><a id="__codelineno-13-99" name="__codelineno-13-99" href="#__codelineno-13-99"></a>        <span class="p">)[:</span><span class="mi">5</span><span class="p">]</span>
</span><span id="__span-13-100"><a id="__codelineno-13-100" name="__codelineno-13-100" href="#__codelineno-13-100"></a>
</span><span id="__span-13-101"><a id="__codelineno-13-101" name="__codelineno-13-101" href="#__codelineno-13-101"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;ğŸ† Top Performing Content:&quot;</span><span class="p">)</span>
</span><span id="__span-13-102"><a id="__codelineno-13-102" name="__codelineno-13-102" href="#__codelineno-13-102"></a>        <span class="k">for</span> <span class="n">content_id</span><span class="p">,</span> <span class="n">metrics</span> <span class="ow">in</span> <span class="n">top_content</span><span class="p">:</span>
</span><span id="__span-13-103"><a id="__codelineno-13-103" name="__codelineno-13-103" href="#__codelineno-13-103"></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   </span><span class="si">{</span><span class="n">content_id</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">metrics</span><span class="p">[</span><span class="s1">&#39;engagement_score&#39;</span><span class="p">]</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2"> engagement score&quot;</span><span class="p">)</span>
</span><span id="__span-13-104"><a id="__codelineno-13-104" name="__codelineno-13-104" href="#__codelineno-13-104"></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;     Views: </span><span class="si">{</span><span class="n">metrics</span><span class="p">[</span><span class="s1">&#39;views&#39;</span><span class="p">]</span><span class="si">:</span><span class="s2">,</span><span class="si">}</span><span class="s2">, Time: </span><span class="si">{</span><span class="n">metrics</span><span class="p">[</span><span class="s1">&#39;time_on_page&#39;</span><span class="p">]</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2">s&quot;</span><span class="p">)</span>
</span><span id="__span-13-105"><a id="__codelineno-13-105" name="__codelineno-13-105" href="#__codelineno-13-105"></a>
</span><span id="__span-13-106"><a id="__codelineno-13-106" name="__codelineno-13-106" href="#__codelineno-13-106"></a>        <span class="k">return</span> <span class="n">content_metrics</span>
</span><span id="__span-13-107"><a id="__codelineno-13-107" name="__codelineno-13-107" href="#__codelineno-13-107"></a>
</span><span id="__span-13-108"><a id="__codelineno-13-108" name="__codelineno-13-108" href="#__codelineno-13-108"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">predictive_analytics</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">historical_data</span><span class="p">):</span>
</span><span id="__span-13-109"><a id="__codelineno-13-109" name="__codelineno-13-109" href="#__codelineno-13-109"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Simple predictive analytics for web traffic&quot;&quot;&quot;</span>
</span><span id="__span-13-110"><a id="__codelineno-13-110" name="__codelineno-13-110" href="#__codelineno-13-110"></a>
</span><span id="__span-13-111"><a id="__codelineno-13-111" name="__codelineno-13-111" href="#__codelineno-13-111"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">ğŸ”® PREDICTIVE ANALYTICS&quot;</span><span class="p">)</span>
</span><span id="__span-13-112"><a id="__codelineno-13-112" name="__codelineno-13-112" href="#__codelineno-13-112"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;-&quot;</span> <span class="o">*</span> <span class="mi">25</span><span class="p">)</span>
</span><span id="__span-13-113"><a id="__codelineno-13-113" name="__codelineno-13-113" href="#__codelineno-13-113"></a>
</span><span id="__span-13-114"><a id="__codelineno-13-114" name="__codelineno-13-114" href="#__codelineno-13-114"></a>        <span class="c1"># Analyze traffic patterns</span>
</span><span id="__span-13-115"><a id="__codelineno-13-115" name="__codelineno-13-115" href="#__codelineno-13-115"></a>        <span class="n">daily_traffic</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">list</span><span class="p">)</span>
</span><span id="__span-13-116"><a id="__codelineno-13-116" name="__codelineno-13-116" href="#__codelineno-13-116"></a>        <span class="n">hourly_patterns</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">list</span><span class="p">)</span>
</span><span id="__span-13-117"><a id="__codelineno-13-117" name="__codelineno-13-117" href="#__codelineno-13-117"></a>
</span><span id="__span-13-118"><a id="__codelineno-13-118" name="__codelineno-13-118" href="#__codelineno-13-118"></a>        <span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="n">historical_data</span><span class="p">:</span>
</span><span id="__span-13-119"><a id="__codelineno-13-119" name="__codelineno-13-119" href="#__codelineno-13-119"></a>            <span class="n">date</span> <span class="o">=</span> <span class="n">record</span><span class="p">[</span><span class="s1">&#39;timestamp&#39;</span><span class="p">][:</span><span class="mi">10</span><span class="p">]</span>  <span class="c1"># Extract date</span>
</span><span id="__span-13-120"><a id="__codelineno-13-120" name="__codelineno-13-120" href="#__codelineno-13-120"></a>            <span class="n">hour</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">record</span><span class="p">[</span><span class="s1">&#39;timestamp&#39;</span><span class="p">][</span><span class="mi">11</span><span class="p">:</span><span class="mi">13</span><span class="p">])</span>  <span class="c1"># Extract hour</span>
</span><span id="__span-13-121"><a id="__codelineno-13-121" name="__codelineno-13-121" href="#__codelineno-13-121"></a>
</span><span id="__span-13-122"><a id="__codelineno-13-122" name="__codelineno-13-122" href="#__codelineno-13-122"></a>            <span class="n">daily_traffic</span><span class="p">[</span><span class="n">date</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">record</span><span class="p">)</span>
</span><span id="__span-13-123"><a id="__codelineno-13-123" name="__codelineno-13-123" href="#__codelineno-13-123"></a>            <span class="n">hourly_patterns</span><span class="p">[</span><span class="n">hour</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">record</span><span class="p">)</span>
</span><span id="__span-13-124"><a id="__codelineno-13-124" name="__codelineno-13-124" href="#__codelineno-13-124"></a>
</span><span id="__span-13-125"><a id="__codelineno-13-125" name="__codelineno-13-125" href="#__codelineno-13-125"></a>        <span class="c1"># Calculate averages</span>
</span><span id="__span-13-126"><a id="__codelineno-13-126" name="__codelineno-13-126" href="#__codelineno-13-126"></a>        <span class="n">avg_daily_traffic</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">([</span><span class="nb">len</span><span class="p">(</span><span class="n">records</span><span class="p">)</span> <span class="k">for</span> <span class="n">records</span> <span class="ow">in</span> <span class="n">daily_traffic</span><span class="o">.</span><span class="n">values</span><span class="p">()])</span>
</span><span id="__span-13-127"><a id="__codelineno-13-127" name="__codelineno-13-127" href="#__codelineno-13-127"></a>
</span><span id="__span-13-128"><a id="__codelineno-13-128" name="__codelineno-13-128" href="#__codelineno-13-128"></a>        <span class="c1"># Hourly pattern analysis</span>
</span><span id="__span-13-129"><a id="__codelineno-13-129" name="__codelineno-13-129" href="#__codelineno-13-129"></a>        <span class="n">hourly_averages</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="__span-13-130"><a id="__codelineno-13-130" name="__codelineno-13-130" href="#__codelineno-13-130"></a>        <span class="k">for</span> <span class="n">hour</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">24</span><span class="p">):</span>
</span><span id="__span-13-131"><a id="__codelineno-13-131" name="__codelineno-13-131" href="#__codelineno-13-131"></a>            <span class="n">hourly_averages</span><span class="p">[</span><span class="n">hour</span><span class="p">]</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">hourly_patterns</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">hour</span><span class="p">,</span> <span class="p">[]))</span>
</span><span id="__span-13-132"><a id="__codelineno-13-132" name="__codelineno-13-132" href="#__codelineno-13-132"></a>
</span><span id="__span-13-133"><a id="__codelineno-13-133" name="__codelineno-13-133" href="#__codelineno-13-133"></a>        <span class="c1"># Find peak hours</span>
</span><span id="__span-13-134"><a id="__codelineno-13-134" name="__codelineno-13-134" href="#__codelineno-13-134"></a>        <span class="n">peak_hour</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">hourly_averages</span><span class="o">.</span><span class="n">items</span><span class="p">(),</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span><span id="__span-13-135"><a id="__codelineno-13-135" name="__codelineno-13-135" href="#__codelineno-13-135"></a>        <span class="n">low_hour</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">hourly_averages</span><span class="o">.</span><span class="n">items</span><span class="p">(),</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span><span id="__span-13-136"><a id="__codelineno-13-136" name="__codelineno-13-136" href="#__codelineno-13-136"></a>
</span><span id="__span-13-137"><a id="__codelineno-13-137" name="__codelineno-13-137" href="#__codelineno-13-137"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ğŸ“Š Traffic Patterns:&quot;</span><span class="p">)</span>
</span><span id="__span-13-138"><a id="__codelineno-13-138" name="__codelineno-13-138" href="#__codelineno-13-138"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Average daily traffic: </span><span class="si">{</span><span class="n">avg_daily_traffic</span><span class="si">:</span><span class="s2">.0f</span><span class="si">}</span><span class="s2"> requests&quot;</span><span class="p">)</span>
</span><span id="__span-13-139"><a id="__codelineno-13-139" name="__codelineno-13-139" href="#__codelineno-13-139"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Peak hour: </span><span class="si">{</span><span class="n">peak_hour</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">:00 (</span><span class="si">{</span><span class="n">peak_hour</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2"> requests)&quot;</span><span class="p">)</span>
</span><span id="__span-13-140"><a id="__codelineno-13-140" name="__codelineno-13-140" href="#__codelineno-13-140"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Low hour: </span><span class="si">{</span><span class="n">low_hour</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">:00 (</span><span class="si">{</span><span class="n">low_hour</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2"> requests)&quot;</span><span class="p">)</span>
</span><span id="__span-13-141"><a id="__codelineno-13-141" name="__codelineno-13-141" href="#__codelineno-13-141"></a>
</span><span id="__span-13-142"><a id="__codelineno-13-142" name="__codelineno-13-142" href="#__codelineno-13-142"></a>        <span class="c1"># Simple trend prediction (linear)</span>
</span><span id="__span-13-143"><a id="__codelineno-13-143" name="__codelineno-13-143" href="#__codelineno-13-143"></a>        <span class="n">recent_days</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">daily_traffic</span><span class="o">.</span><span class="n">keys</span><span class="p">())[</span><span class="o">-</span><span class="mi">7</span><span class="p">:]</span>  <span class="c1"># Last 7 days</span>
</span><span id="__span-13-144"><a id="__codelineno-13-144" name="__codelineno-13-144" href="#__codelineno-13-144"></a>        <span class="n">recent_traffic</span> <span class="o">=</span> <span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">daily_traffic</span><span class="p">[</span><span class="n">day</span><span class="p">])</span> <span class="k">for</span> <span class="n">day</span> <span class="ow">in</span> <span class="n">recent_days</span><span class="p">]</span>
</span><span id="__span-13-145"><a id="__codelineno-13-145" name="__codelineno-13-145" href="#__codelineno-13-145"></a>
</span><span id="__span-13-146"><a id="__codelineno-13-146" name="__codelineno-13-146" href="#__codelineno-13-146"></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">recent_traffic</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="__span-13-147"><a id="__codelineno-13-147" name="__codelineno-13-147" href="#__codelineno-13-147"></a>            <span class="c1"># Simple linear trend</span>
</span><span id="__span-13-148"><a id="__codelineno-13-148" name="__codelineno-13-148" href="#__codelineno-13-148"></a>            <span class="n">trend</span> <span class="o">=</span> <span class="p">(</span><span class="n">recent_traffic</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">recent_traffic</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">recent_traffic</span><span class="p">)</span>
</span><span id="__span-13-149"><a id="__codelineno-13-149" name="__codelineno-13-149" href="#__codelineno-13-149"></a>            <span class="n">predicted_tomorrow</span> <span class="o">=</span> <span class="n">recent_traffic</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">trend</span>
</span><span id="__span-13-150"><a id="__codelineno-13-150" name="__codelineno-13-150" href="#__codelineno-13-150"></a>
</span><span id="__span-13-151"><a id="__codelineno-13-151" name="__codelineno-13-151" href="#__codelineno-13-151"></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">ğŸ”® Predictions:&quot;</span><span class="p">)</span>
</span><span id="__span-13-152"><a id="__codelineno-13-152" name="__codelineno-13-152" href="#__codelineno-13-152"></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Traffic trend: </span><span class="si">{</span><span class="s1">&#39;+&#39;</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">trend</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="si">}{</span><span class="n">trend</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2"> requests/day&quot;</span><span class="p">)</span>
</span><span id="__span-13-153"><a id="__codelineno-13-153" name="__codelineno-13-153" href="#__codelineno-13-153"></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Tomorrow&#39;s predicted traffic: </span><span class="si">{</span><span class="n">predicted_tomorrow</span><span class="si">:</span><span class="s2">.0f</span><span class="si">}</span><span class="s2"> requests&quot;</span><span class="p">)</span>
</span><span id="__span-13-154"><a id="__codelineno-13-154" name="__codelineno-13-154" href="#__codelineno-13-154"></a>
</span><span id="__span-13-155"><a id="__codelineno-13-155" name="__codelineno-13-155" href="#__codelineno-13-155"></a>        <span class="k">return</span> <span class="p">{</span>
</span><span id="__span-13-156"><a id="__codelineno-13-156" name="__codelineno-13-156" href="#__codelineno-13-156"></a>            <span class="s1">&#39;daily_average&#39;</span><span class="p">:</span> <span class="n">avg_daily_traffic</span><span class="p">,</span>
</span><span id="__span-13-157"><a id="__codelineno-13-157" name="__codelineno-13-157" href="#__codelineno-13-157"></a>            <span class="s1">&#39;peak_hour&#39;</span><span class="p">:</span> <span class="n">peak_hour</span><span class="p">,</span>
</span><span id="__span-13-158"><a id="__codelineno-13-158" name="__codelineno-13-158" href="#__codelineno-13-158"></a>            <span class="s1">&#39;hourly_patterns&#39;</span><span class="p">:</span> <span class="n">hourly_averages</span><span class="p">,</span>
</span><span id="__span-13-159"><a id="__codelineno-13-159" name="__codelineno-13-159" href="#__codelineno-13-159"></a>            <span class="s1">&#39;trend&#39;</span><span class="p">:</span> <span class="n">trend</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">recent_traffic</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="k">else</span> <span class="mi">0</span>
</span><span id="__span-13-160"><a id="__codelineno-13-160" name="__codelineno-13-160" href="#__codelineno-13-160"></a>        <span class="p">}</span>
</span><span id="__span-13-161"><a id="__codelineno-13-161" name="__codelineno-13-161" href="#__codelineno-13-161"></a>
</span><span id="__span-13-162"><a id="__codelineno-13-162" name="__codelineno-13-162" href="#__codelineno-13-162"></a><span class="c1"># Generate sample data for demonstration</span>
</span><span id="__span-13-163"><a id="__codelineno-13-163" name="__codelineno-13-163" href="#__codelineno-13-163"></a><span class="n">sample_sessions</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="__span-13-164"><a id="__codelineno-13-164" name="__codelineno-13-164" href="#__codelineno-13-164"></a>    <span class="p">{</span><span class="s1">&#39;user_id&#39;</span><span class="p">:</span> <span class="sa">f</span><span class="s1">&#39;user_</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;pages_visited&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;home&#39;</span><span class="p">,</span> <span class="s1">&#39;product&#39;</span><span class="p">,</span> <span class="s1">&#39;checkout&#39;</span><span class="p">,</span> <span class="s1">&#39;thank-you&#39;</span><span class="p">]}</span>
</span><span id="__span-13-165"><a id="__codelineno-13-165" name="__codelineno-13-165" href="#__codelineno-13-165"></a>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span>
</span><span id="__span-13-166"><a id="__codelineno-13-166" name="__codelineno-13-166" href="#__codelineno-13-166"></a><span class="p">]</span> <span class="o">+</span> <span class="p">[</span>
</span><span id="__span-13-167"><a id="__codelineno-13-167" name="__codelineno-13-167" href="#__codelineno-13-167"></a>    <span class="p">{</span><span class="s1">&#39;user_id&#39;</span><span class="p">:</span> <span class="sa">f</span><span class="s1">&#39;user_</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;pages_visited&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;home&#39;</span><span class="p">,</span> <span class="s1">&#39;product&#39;</span><span class="p">,</span> <span class="s1">&#39;exit&#39;</span><span class="p">]}</span>
</span><span id="__span-13-168"><a id="__codelineno-13-168" name="__codelineno-13-168" href="#__codelineno-13-168"></a>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="mi">150</span><span class="p">)</span>
</span><span id="__span-13-169"><a id="__codelineno-13-169" name="__codelineno-13-169" href="#__codelineno-13-169"></a><span class="p">]</span> <span class="o">+</span> <span class="p">[</span>
</span><span id="__span-13-170"><a id="__codelineno-13-170" name="__codelineno-13-170" href="#__codelineno-13-170"></a>    <span class="p">{</span><span class="s1">&#39;user_id&#39;</span><span class="p">:</span> <span class="sa">f</span><span class="s1">&#39;user_</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;pages_visited&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;home&#39;</span><span class="p">,</span> <span class="s1">&#39;about&#39;</span><span class="p">,</span> <span class="s1">&#39;exit&#39;</span><span class="p">]}</span>
</span><span id="__span-13-171"><a id="__codelineno-13-171" name="__codelineno-13-171" href="#__codelineno-13-171"></a>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">150</span><span class="p">,</span> <span class="mi">200</span><span class="p">)</span>
</span><span id="__span-13-172"><a id="__codelineno-13-172" name="__codelineno-13-172" href="#__codelineno-13-172"></a><span class="p">]</span>
</span><span id="__span-13-173"><a id="__codelineno-13-173" name="__codelineno-13-173" href="#__codelineno-13-173"></a>
</span><span id="__span-13-174"><a id="__codelineno-13-174" name="__codelineno-13-174" href="#__codelineno-13-174"></a><span class="n">sample_content</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="__span-13-175"><a id="__codelineno-13-175" name="__codelineno-13-175" href="#__codelineno-13-175"></a>    <span class="p">{</span><span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="s1">&#39;blog_post_1&#39;</span><span class="p">,</span> <span class="s1">&#39;views&#39;</span><span class="p">:</span> <span class="mi">1500</span><span class="p">,</span> <span class="s1">&#39;avg_time_on_page&#39;</span><span class="p">:</span> <span class="mi">180</span><span class="p">,</span> <span class="s1">&#39;bounce_rate&#39;</span><span class="p">:</span> <span class="mi">45</span><span class="p">,</span> <span class="s1">&#39;social_shares&#39;</span><span class="p">:</span> <span class="mi">25</span><span class="p">,</span> <span class="s1">&#39;comments&#39;</span><span class="p">:</span> <span class="mi">8</span><span class="p">},</span>
</span><span id="__span-13-176"><a id="__codelineno-13-176" name="__codelineno-13-176" href="#__codelineno-13-176"></a>    <span class="p">{</span><span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="s1">&#39;product_page_1&#39;</span><span class="p">,</span> <span class="s1">&#39;views&#39;</span><span class="p">:</span> <span class="mi">3000</span><span class="p">,</span> <span class="s1">&#39;avg_time_on_page&#39;</span><span class="p">:</span> <span class="mi">120</span><span class="p">,</span> <span class="s1">&#39;bounce_rate&#39;</span><span class="p">:</span> <span class="mi">35</span><span class="p">,</span> <span class="s1">&#39;social_shares&#39;</span><span class="p">:</span> <span class="mi">15</span><span class="p">,</span> <span class="s1">&#39;comments&#39;</span><span class="p">:</span> <span class="mi">12</span><span class="p">},</span>
</span><span id="__span-13-177"><a id="__codelineno-13-177" name="__codelineno-13-177" href="#__codelineno-13-177"></a>    <span class="p">{</span><span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="s1">&#39;help_article_1&#39;</span><span class="p">,</span> <span class="s1">&#39;views&#39;</span><span class="p">:</span> <span class="mi">800</span><span class="p">,</span> <span class="s1">&#39;avg_time_on_page&#39;</span><span class="p">:</span> <span class="mi">240</span><span class="p">,</span> <span class="s1">&#39;bounce_rate&#39;</span><span class="p">:</span> <span class="mi">25</span><span class="p">,</span> <span class="s1">&#39;social_shares&#39;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;comments&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">},</span>
</span><span id="__span-13-178"><a id="__codelineno-13-178" name="__codelineno-13-178" href="#__codelineno-13-178"></a><span class="p">]</span>
</span><span id="__span-13-179"><a id="__codelineno-13-179" name="__codelineno-13-179" href="#__codelineno-13-179"></a>
</span><span id="__span-13-180"><a id="__codelineno-13-180" name="__codelineno-13-180" href="#__codelineno-13-180"></a><span class="n">sample_historical</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="__span-13-181"><a id="__codelineno-13-181" name="__codelineno-13-181" href="#__codelineno-13-181"></a>    <span class="p">{</span><span class="s1">&#39;timestamp&#39;</span><span class="p">:</span> <span class="sa">f</span><span class="s1">&#39;2024-01-</span><span class="si">{</span><span class="n">day</span><span class="si">:</span><span class="s1">02d</span><span class="si">}</span><span class="s1"> </span><span class="si">{</span><span class="n">hour</span><span class="si">:</span><span class="s1">02d</span><span class="si">}</span><span class="s1">:00:00&#39;</span><span class="p">,</span> <span class="s1">&#39;requests&#39;</span><span class="p">:</span> <span class="mi">100</span> <span class="o">+</span> <span class="p">(</span><span class="n">hour</span> <span class="o">*</span> <span class="mi">5</span><span class="p">)</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="o">-</span><span class="mi">20</span><span class="p">,</span> <span class="mi">20</span><span class="p">)}</span>
</span><span id="__span-13-182"><a id="__codelineno-13-182" name="__codelineno-13-182" href="#__codelineno-13-182"></a>    <span class="k">for</span> <span class="n">day</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span> <span class="k">for</span> <span class="n">hour</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">24</span><span class="p">)</span>
</span><span id="__span-13-183"><a id="__codelineno-13-183" name="__codelineno-13-183" href="#__codelineno-13-183"></a><span class="p">]</span>
</span><span id="__span-13-184"><a id="__codelineno-13-184" name="__codelineno-13-184" href="#__codelineno-13-184"></a>
</span><span id="__span-13-185"><a id="__codelineno-13-185" name="__codelineno-13-185" href="#__codelineno-13-185"></a><span class="c1"># Run data mining analysis</span>
</span><span id="__span-13-186"><a id="__codelineno-13-186" name="__codelineno-13-186" href="#__codelineno-13-186"></a><span class="n">miner</span> <span class="o">=</span> <span class="n">WebDataMiner</span><span class="p">()</span>
</span><span id="__span-13-187"><a id="__codelineno-13-187" name="__codelineno-13-187" href="#__codelineno-13-187"></a>
</span><span id="__span-13-188"><a id="__codelineno-13-188" name="__codelineno-13-188" href="#__codelineno-13-188"></a><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;ğŸ” WEB DATA MINING DEMONSTRATION&quot;</span><span class="p">)</span>
</span><span id="__span-13-189"><a id="__codelineno-13-189" name="__codelineno-13-189" href="#__codelineno-13-189"></a><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Let&#39;s extract insights from web application data!&quot;</span><span class="p">)</span>
</span><span id="__span-13-190"><a id="__codelineno-13-190" name="__codelineno-13-190" href="#__codelineno-13-190"></a><span class="nb">print</span><span class="p">()</span>
</span><span id="__span-13-191"><a id="__codelineno-13-191" name="__codelineno-13-191" href="#__codelineno-13-191"></a>
</span><span id="__span-13-192"><a id="__codelineno-13-192" name="__codelineno-13-192" href="#__codelineno-13-192"></a><span class="c1"># Analyze user journeys</span>
</span><span id="__span-13-193"><a id="__codelineno-13-193" name="__codelineno-13-193" href="#__codelineno-13-193"></a><span class="n">journey_analysis</span> <span class="o">=</span> <span class="n">miner</span><span class="o">.</span><span class="n">analyze_user_journey</span><span class="p">(</span><span class="n">sample_sessions</span><span class="p">)</span>
</span><span id="__span-13-194"><a id="__codelineno-13-194" name="__codelineno-13-194" href="#__codelineno-13-194"></a>
</span><span id="__span-13-195"><a id="__codelineno-13-195" name="__codelineno-13-195" href="#__codelineno-13-195"></a><span class="c1"># Analyze content performance</span>
</span><span id="__span-13-196"><a id="__codelineno-13-196" name="__codelineno-13-196" href="#__codelineno-13-196"></a><span class="n">content_analysis</span> <span class="o">=</span> <span class="n">miner</span><span class="o">.</span><span class="n">content_performance_analysis</span><span class="p">(</span><span class="n">sample_content</span><span class="p">)</span>
</span><span id="__span-13-197"><a id="__codelineno-13-197" name="__codelineno-13-197" href="#__codelineno-13-197"></a>
</span><span id="__span-13-198"><a id="__codelineno-13-198" name="__codelineno-13-198" href="#__codelineno-13-198"></a><span class="c1"># Predictive analytics</span>
</span><span id="__span-13-199"><a id="__codelineno-13-199" name="__codelineno-13-199" href="#__codelineno-13-199"></a><span class="n">predictions</span> <span class="o">=</span> <span class="n">miner</span><span class="o">.</span><span class="n">predictive_analytics</span><span class="p">(</span><span class="n">sample_historical</span><span class="p">)</span>
</span><span id="__span-13-200"><a id="__codelineno-13-200" name="__codelineno-13-200" href="#__codelineno-13-200"></a>
</span><span id="__span-13-201"><a id="__codelineno-13-201" name="__codelineno-13-201" href="#__codelineno-13-201"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">ğŸ’¡ KEY INSIGHTS SUMMARY:&quot;</span><span class="p">)</span>
</span><span id="__span-13-202"><a id="__codelineno-13-202" name="__codelineno-13-202" href="#__codelineno-13-202"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   User conversion rate: </span><span class="si">{</span><span class="n">journey_analysis</span><span class="p">[</span><span class="s1">&#39;conversion_rate&#39;</span><span class="p">]</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">%&quot;</span><span class="p">)</span>
</span><span id="__span-13-203"><a id="__codelineno-13-203" name="__codelineno-13-203" href="#__codelineno-13-203"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Average daily traffic: </span><span class="si">{</span><span class="n">predictions</span><span class="p">[</span><span class="s1">&#39;daily_average&#39;</span><span class="p">]</span><span class="si">:</span><span class="s2">.0f</span><span class="si">}</span><span class="s2"> requests&quot;</span><span class="p">)</span>
</span><span id="__span-13-204"><a id="__codelineno-13-204" name="__codelineno-13-204" href="#__codelineno-13-204"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Peak traffic hour: </span><span class="si">{</span><span class="n">predictions</span><span class="p">[</span><span class="s1">&#39;peak_hour&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">:00&quot;</span><span class="p">)</span>
</span><span id="__span-13-205"><a id="__codelineno-13-205" name="__codelineno-13-205" href="#__codelineno-13-205"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Traffic trend: </span><span class="si">{</span><span class="s1">&#39;+&#39;</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">predictions</span><span class="p">[</span><span class="s1">&#39;trend&#39;</span><span class="p">]</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="si">}{</span><span class="n">predictions</span><span class="p">[</span><span class="s1">&#39;trend&#39;</span><span class="p">]</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2"> requests/day&quot;</span><span class="p">)</span>
</span></code></pre></div>
</details>
<h4 id="streaming-services-real-time-data-at-global-scale"><strong>Streaming Services: Real-Time Data at Global Scale</strong><a class="headerlink" href="#streaming-services-real-time-data-at-global-scale" title="Permanent link">&para;</a></h4>
<p>Modern streaming services like Netflix, YouTube, and Spotify handle millions of concurrent users streaming petabytes of content. The architecture challenges are immense:</p>
<ul>
<li><strong>Netflix:</strong> 230M+ subscribers, 15,000+ titles, 1B+ hours watched weekly</li>
<li><strong>YouTube:</strong> 2B+ logged-in users, 500+ hours uploaded per minute</li>
<li><strong>Spotify:</strong> 400M+ users, 80M+ songs, 4B+ playlists</li>
</ul>
<p>The key technologies enabling this scale include:</p>
<ol>
<li><strong>Microservices Architecture:</strong> Break the system into small, independent services</li>
<li><strong>Content Delivery Networks (CDNs):</strong> Cache content globally for low latency</li>
<li><strong>Adaptive Bitrate Streaming:</strong> Adjust quality based on network conditions</li>
<li><strong>Recommendation Algorithms:</strong> Machine learning for personalized content</li>
<li><strong>Auto-scaling Infrastructure:</strong> Automatically handle traffic spikes</li>
</ol>
<hr />
<h2 id="review-reflection">Review &amp; Reflection<a class="headerlink" href="#review-reflection" title="Permanent link">&para;</a></h2>
<p><strong>Key Learning Outcomes:</strong></p>
<p>-Understand how data is transmitted across the web and the importance of protocols and layers.
- Recognize the role of DNS, IP addresses, and packet routing in web applications.
- Identify major web protocols and their default ports.
- Explain how encryption, authentication, and authorization secure web traffic.
- Appreciate the impact of big data on web architecture and delivery.</p>
<p><strong>Reflection Questions:</strong>
1. Why is it important for web programmers to understand transmission layers and protocols?
2. How does DNS resolution work, and why is it critical for web browsing?
3. What are the differences between HTTP and HTTPS?
4. How do SSL certificates and encryption protect user data?
5. How does big data influence the design of modern web servers and content delivery?</p>
<hr />
<h2 id="designing-web-applications-from-concept-to-production">Designing Web Applications: From Concept to Production ğŸ¨âš¡<a class="headerlink" href="#designing-web-applications-from-concept-to-production" title="Permanent link">&para;</a></h2>
<p>Creating modern web applications is like orchestrating a symphonyâ€”every component must work in harmony to create an experience that delights users while being maintainable, scalable, and secure. Today's web apps aren't just websites; they're sophisticated software platforms that rival desktop applications in functionality and user experience.</p>
<h3 id="introduction-the-modern-web-development-landscape">Introduction: The Modern Web Development Landscape<a class="headerlink" href="#introduction-the-modern-web-development-landscape" title="Permanent link">&para;</a></h3>
<p>Web development has evolved dramatically from static HTML pages to dynamic, interactive applications that power everything from social media platforms to banking systems. Modern web applications must handle millions of users, process real-time data, work across all devices, and provide experiences that users expect to be as smooth as native mobile apps.</p>
<p><strong>The Evolution of Web Applications:</strong>
- <strong>Web 1.0 (1990s):</strong> Static HTML pages, one-way information flow
- <strong>Web 2.0 (2000s):</strong> Dynamic content, user interaction, social features
- <strong>Web 3.0 (2010s):</strong> Mobile-first, real-time, cloud-native applications
- <strong>Web 4.0 (2020s):</strong> AI-powered, voice interfaces, immersive experiences</p>
<details class="example">
<summary>Real-World Web Application Architecture</summary>
<div class="language-python highlight"><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">os</span>
</span><span id="__span-14-2"><a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a><span class="kn">import</span><span class="w"> </span><span class="nn">json</span>
</span><span id="__span-14-3"><a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a><span class="kn">import</span><span class="w"> </span><span class="nn">sqlite3</span>
</span><span id="__span-14-4"><a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a><span class="kn">from</span><span class="w"> </span><span class="nn">datetime</span><span class="w"> </span><span class="kn">import</span> <span class="n">datetime</span><span class="p">,</span> <span class="n">timedelta</span>
</span><span id="__span-14-5"><a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a><span class="kn">from</span><span class="w"> </span><span class="nn">flask</span><span class="w"> </span><span class="kn">import</span> <span class="n">Flask</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">jsonify</span><span class="p">,</span> <span class="n">render_template</span><span class="p">,</span> <span class="n">session</span>
</span><span id="__span-14-6"><a id="__codelineno-14-6" name="__codelineno-14-6" href="#__codelineno-14-6"></a><span class="kn">from</span><span class="w"> </span><span class="nn">werkzeug.security</span><span class="w"> </span><span class="kn">import</span> <span class="n">generate_password_hash</span><span class="p">,</span> <span class="n">check_password_hash</span>
</span><span id="__span-14-7"><a id="__codelineno-14-7" name="__codelineno-14-7" href="#__codelineno-14-7"></a><span class="kn">import</span><span class="w"> </span><span class="nn">jwt</span>
</span><span id="__span-14-8"><a id="__codelineno-14-8" name="__codelineno-14-8" href="#__codelineno-14-8"></a><span class="kn">from</span><span class="w"> </span><span class="nn">functools</span><span class="w"> </span><span class="kn">import</span> <span class="n">wraps</span>
</span><span id="__span-14-9"><a id="__codelineno-14-9" name="__codelineno-14-9" href="#__codelineno-14-9"></a>
</span><span id="__span-14-10"><a id="__codelineno-14-10" name="__codelineno-14-10" href="#__codelineno-14-10"></a><span class="k">class</span><span class="w"> </span><span class="nc">ModernWebApplication</span><span class="p">:</span>
</span><span id="__span-14-11"><a id="__codelineno-14-11" name="__codelineno-14-11" href="#__codelineno-14-11"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Complete modern web application with all essential features&quot;&quot;&quot;</span>
</span><span id="__span-14-12"><a id="__codelineno-14-12" name="__codelineno-14-12" href="#__codelineno-14-12"></a>
</span><span id="__span-14-13"><a id="__codelineno-14-13" name="__codelineno-14-13" href="#__codelineno-14-13"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-14-14"><a id="__codelineno-14-14" name="__codelineno-14-14" href="#__codelineno-14-14"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
</span><span id="__span-14-15"><a id="__codelineno-14-15" name="__codelineno-14-15" href="#__codelineno-14-15"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">secret_key</span> <span class="o">=</span> <span class="s1">&#39;your-secret-key-here&#39;</span>
</span><span id="__span-14-16"><a id="__codelineno-14-16" name="__codelineno-14-16" href="#__codelineno-14-16"></a>
</span><span id="__span-14-17"><a id="__codelineno-14-17" name="__codelineno-14-17" href="#__codelineno-14-17"></a>        <span class="c1"># Initialize database</span>
</span><span id="__span-14-18"><a id="__codelineno-14-18" name="__codelineno-14-18" href="#__codelineno-14-18"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">init_database</span><span class="p">()</span>
</span><span id="__span-14-19"><a id="__codelineno-14-19" name="__codelineno-14-19" href="#__codelineno-14-19"></a>
</span><span id="__span-14-20"><a id="__codelineno-14-20" name="__codelineno-14-20" href="#__codelineno-14-20"></a>        <span class="c1"># Setup routes</span>
</span><span id="__span-14-21"><a id="__codelineno-14-21" name="__codelineno-14-21" href="#__codelineno-14-21"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">setup_routes</span><span class="p">()</span>
</span><span id="__span-14-22"><a id="__codelineno-14-22" name="__codelineno-14-22" href="#__codelineno-14-22"></a>
</span><span id="__span-14-23"><a id="__codelineno-14-23" name="__codelineno-14-23" href="#__codelineno-14-23"></a>        <span class="c1"># Configure security headers</span>
</span><span id="__span-14-24"><a id="__codelineno-14-24" name="__codelineno-14-24" href="#__codelineno-14-24"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">setup_security</span><span class="p">()</span>
</span><span id="__span-14-25"><a id="__codelineno-14-25" name="__codelineno-14-25" href="#__codelineno-14-25"></a>
</span><span id="__span-14-26"><a id="__codelineno-14-26" name="__codelineno-14-26" href="#__codelineno-14-26"></a>        <span class="c1"># Initialize monitoring</span>
</span><span id="__span-14-27"><a id="__codelineno-14-27" name="__codelineno-14-27" href="#__codelineno-14-27"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">setup_monitoring</span><span class="p">()</span>
</span><span id="__span-14-28"><a id="__codelineno-14-28" name="__codelineno-14-28" href="#__codelineno-14-28"></a>
</span><span id="__span-14-29"><a id="__codelineno-14-29" name="__codelineno-14-29" href="#__codelineno-14-29"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;ğŸŒ Modern Web Application Initialized!&quot;</span><span class="p">)</span>
</span><span id="__span-14-30"><a id="__codelineno-14-30" name="__codelineno-14-30" href="#__codelineno-14-30"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Features: Authentication, API, Database, Security, Monitoring&quot;</span><span class="p">)</span>
</span><span id="__span-14-31"><a id="__codelineno-14-31" name="__codelineno-14-31" href="#__codelineno-14-31"></a>
</span><span id="__span-14-32"><a id="__codelineno-14-32" name="__codelineno-14-32" href="#__codelineno-14-32"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">init_database</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-14-33"><a id="__codelineno-14-33" name="__codelineno-14-33" href="#__codelineno-14-33"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize SQLite database with proper schema&quot;&quot;&quot;</span>
</span><span id="__span-14-34"><a id="__codelineno-14-34" name="__codelineno-14-34" href="#__codelineno-14-34"></a>
</span><span id="__span-14-35"><a id="__codelineno-14-35" name="__codelineno-14-35" href="#__codelineno-14-35"></a>        <span class="n">conn</span> <span class="o">=</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;webapp.db&#39;</span><span class="p">)</span>
</span><span id="__span-14-36"><a id="__codelineno-14-36" name="__codelineno-14-36" href="#__codelineno-14-36"></a>        <span class="n">cursor</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
</span><span id="__span-14-37"><a id="__codelineno-14-37" name="__codelineno-14-37" href="#__codelineno-14-37"></a>
</span><span id="__span-14-38"><a id="__codelineno-14-38" name="__codelineno-14-38" href="#__codelineno-14-38"></a>        <span class="c1"># Users table</span>
</span><span id="__span-14-39"><a id="__codelineno-14-39" name="__codelineno-14-39" href="#__codelineno-14-39"></a>        <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
</span><span id="__span-14-40"><a id="__codelineno-14-40" name="__codelineno-14-40" href="#__codelineno-14-40"></a><span class="s1">            CREATE TABLE IF NOT EXISTS users (</span>
</span><span id="__span-14-41"><a id="__codelineno-14-41" name="__codelineno-14-41" href="#__codelineno-14-41"></a><span class="s1">                id INTEGER PRIMARY KEY AUTOINCREMENT,</span>
</span><span id="__span-14-42"><a id="__codelineno-14-42" name="__codelineno-14-42" href="#__codelineno-14-42"></a><span class="s1">                username TEXT UNIQUE NOT NULL,</span>
</span><span id="__span-14-43"><a id="__codelineno-14-43" name="__codelineno-14-43" href="#__codelineno-14-43"></a><span class="s1">                email TEXT UNIQUE NOT NULL,</span>
</span><span id="__span-14-44"><a id="__codelineno-14-44" name="__codelineno-14-44" href="#__codelineno-14-44"></a><span class="s1">                password_hash TEXT NOT NULL,</span>
</span><span id="__span-14-45"><a id="__codelineno-14-45" name="__codelineno-14-45" href="#__codelineno-14-45"></a><span class="s1">                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,</span>
</span><span id="__span-14-46"><a id="__codelineno-14-46" name="__codelineno-14-46" href="#__codelineno-14-46"></a><span class="s1">                last_login TIMESTAMP,</span>
</span><span id="__span-14-47"><a id="__codelineno-14-47" name="__codelineno-14-47" href="#__codelineno-14-47"></a><span class="s1">                is_active BOOLEAN DEFAULT 1,</span>
</span><span id="__span-14-48"><a id="__codelineno-14-48" name="__codelineno-14-48" href="#__codelineno-14-48"></a><span class="s1">                role TEXT DEFAULT &#39;user&#39;</span>
</span><span id="__span-14-49"><a id="__codelineno-14-49" name="__codelineno-14-49" href="#__codelineno-14-49"></a><span class="s1">            )</span>
</span><span id="__span-14-50"><a id="__codelineno-14-50" name="__codelineno-14-50" href="#__codelineno-14-50"></a><span class="s1">        &#39;&#39;&#39;</span><span class="p">)</span>
</span><span id="__span-14-51"><a id="__codelineno-14-51" name="__codelineno-14-51" href="#__codelineno-14-51"></a>
</span><span id="__span-14-52"><a id="__codelineno-14-52" name="__codelineno-14-52" href="#__codelineno-14-52"></a>        <span class="c1"># Posts table (for a blog-like application)</span>
</span><span id="__span-14-53"><a id="__codelineno-14-53" name="__codelineno-14-53" href="#__codelineno-14-53"></a>        <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
</span><span id="__span-14-54"><a id="__codelineno-14-54" name="__codelineno-14-54" href="#__codelineno-14-54"></a><span class="s1">            CREATE TABLE IF NOT EXISTS posts (</span>
</span><span id="__span-14-55"><a id="__codelineno-14-55" name="__codelineno-14-55" href="#__codelineno-14-55"></a><span class="s1">                id INTEGER PRIMARY KEY AUTOINCREMENT,</span>
</span><span id="__span-14-56"><a id="__codelineno-14-56" name="__codelineno-14-56" href="#__codelineno-14-56"></a><span class="s1">                title TEXT NOT NULL,</span>
</span><span id="__span-14-57"><a id="__codelineno-14-57" name="__codelineno-14-57" href="#__codelineno-14-57"></a><span class="s1">                content TEXT NOT NULL,</span>
</span><span id="__span-14-58"><a id="__codelineno-14-58" name="__codelineno-14-58" href="#__codelineno-14-58"></a><span class="s1">                author_id INTEGER NOT NULL,</span>
</span><span id="__span-14-59"><a id="__codelineno-14-59" name="__codelineno-14-59" href="#__codelineno-14-59"></a><span class="s1">                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,</span>
</span><span id="__span-14-60"><a id="__codelineno-14-60" name="__codelineno-14-60" href="#__codelineno-14-60"></a><span class="s1">                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,</span>
</span><span id="__span-14-61"><a id="__codelineno-14-61" name="__codelineno-14-61" href="#__codelineno-14-61"></a><span class="s1">                published BOOLEAN DEFAULT 0,</span>
</span><span id="__span-14-62"><a id="__codelineno-14-62" name="__codelineno-14-62" href="#__codelineno-14-62"></a><span class="s1">                views INTEGER DEFAULT 0,</span>
</span><span id="__span-14-63"><a id="__codelineno-14-63" name="__codelineno-14-63" href="#__codelineno-14-63"></a><span class="s1">                FOREIGN KEY (author_id) REFERENCES users (id)</span>
</span><span id="__span-14-64"><a id="__codelineno-14-64" name="__codelineno-14-64" href="#__codelineno-14-64"></a><span class="s1">            )</span>
</span><span id="__span-14-65"><a id="__codelineno-14-65" name="__codelineno-14-65" href="#__codelineno-14-65"></a><span class="s1">        &#39;&#39;&#39;</span><span class="p">)</span>
</span><span id="__span-14-66"><a id="__codelineno-14-66" name="__codelineno-14-66" href="#__codelineno-14-66"></a>
</span><span id="__span-14-67"><a id="__codelineno-14-67" name="__codelineno-14-67" href="#__codelineno-14-67"></a>        <span class="c1"># Comments table</span>
</span><span id="__span-14-68"><a id="__codelineno-14-68" name="__codelineno-14-68" href="#__codelineno-14-68"></a>        <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
</span><span id="__span-14-69"><a id="__codelineno-14-69" name="__codelineno-14-69" href="#__codelineno-14-69"></a><span class="s1">            CREATE TABLE IF NOT EXISTS comments (</span>
</span><span id="__span-14-70"><a id="__codelineno-14-70" name="__codelineno-14-70" href="#__codelineno-14-70"></a><span class="s1">                id INTEGER PRIMARY KEY AUTOINCREMENT,</span>
</span><span id="__span-14-71"><a id="__codelineno-14-71" name="__codelineno-14-71" href="#__codelineno-14-71"></a><span class="s1">                post_id INTEGER NOT NULL,</span>
</span><span id="__span-14-72"><a id="__codelineno-14-72" name="__codelineno-14-72" href="#__codelineno-14-72"></a><span class="s1">                author_id INTEGER NOT NULL,</span>
</span><span id="__span-14-73"><a id="__codelineno-14-73" name="__codelineno-14-73" href="#__codelineno-14-73"></a><span class="s1">                content TEXT NOT NULL,</span>
</span><span id="__span-14-74"><a id="__codelineno-14-74" name="__codelineno-14-74" href="#__codelineno-14-74"></a><span class="s1">                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,</span>
</span><span id="__span-14-75"><a id="__codelineno-14-75" name="__codelineno-14-75" href="#__codelineno-14-75"></a><span class="s1">                FOREIGN KEY (post_id) REFERENCES posts (id),</span>
</span><span id="__span-14-76"><a id="__codelineno-14-76" name="__codelineno-14-76" href="#__codelineno-14-76"></a><span class="s1">                FOREIGN KEY (author_id) REFERENCES users (id)</span>
</span><span id="__span-14-77"><a id="__codelineno-14-77" name="__codelineno-14-77" href="#__codelineno-14-77"></a><span class="s1">            )</span>
</span><span id="__span-14-78"><a id="__codelineno-14-78" name="__codelineno-14-78" href="#__codelineno-14-78"></a><span class="s1">        &#39;&#39;&#39;</span><span class="p">)</span>
</span><span id="__span-14-79"><a id="__codelineno-14-79" name="__codelineno-14-79" href="#__codelineno-14-79"></a>
</span><span id="__span-14-80"><a id="__codelineno-14-80" name="__codelineno-14-80" href="#__codelineno-14-80"></a>        <span class="c1"># Analytics table</span>
</span><span id="__span-14-81"><a id="__codelineno-14-81" name="__codelineno-14-81" href="#__codelineno-14-81"></a>        <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
</span><span id="__span-14-82"><a id="__codelineno-14-82" name="__codelineno-14-82" href="#__codelineno-14-82"></a><span class="s1">            CREATE TABLE IF NOT EXISTS analytics (</span>
</span><span id="__span-14-83"><a id="__codelineno-14-83" name="__codelineno-14-83" href="#__codelineno-14-83"></a><span class="s1">                id INTEGER PRIMARY KEY AUTOINCREMENT,</span>
</span><span id="__span-14-84"><a id="__codelineno-14-84" name="__codelineno-14-84" href="#__codelineno-14-84"></a><span class="s1">                event_type TEXT NOT NULL,</span>
</span><span id="__span-14-85"><a id="__codelineno-14-85" name="__codelineno-14-85" href="#__codelineno-14-85"></a><span class="s1">                user_id INTEGER,</span>
</span><span id="__span-14-86"><a id="__codelineno-14-86" name="__codelineno-14-86" href="#__codelineno-14-86"></a><span class="s1">                session_id TEXT,</span>
</span><span id="__span-14-87"><a id="__codelineno-14-87" name="__codelineno-14-87" href="#__codelineno-14-87"></a><span class="s1">                page_url TEXT,</span>
</span><span id="__span-14-88"><a id="__codelineno-14-88" name="__codelineno-14-88" href="#__codelineno-14-88"></a><span class="s1">                timestamp TIMESTAMP DEFAULT CURRENT_TIMESTAMP,</span>
</span><span id="__span-14-89"><a id="__codelineno-14-89" name="__codelineno-14-89" href="#__codelineno-14-89"></a><span class="s1">                user_agent TEXT,</span>
</span><span id="__span-14-90"><a id="__codelineno-14-90" name="__codelineno-14-90" href="#__codelineno-14-90"></a><span class="s1">                ip_address TEXT</span>
</span><span id="__span-14-91"><a id="__codelineno-14-91" name="__codelineno-14-91" href="#__codelineno-14-91"></a><span class="s1">            )</span>
</span><span id="__span-14-92"><a id="__codelineno-14-92" name="__codelineno-14-92" href="#__codelineno-14-92"></a><span class="s1">        &#39;&#39;&#39;</span><span class="p">)</span>
</span><span id="__span-14-93"><a id="__codelineno-14-93" name="__codelineno-14-93" href="#__codelineno-14-93"></a>
</span><span id="__span-14-94"><a id="__codelineno-14-94" name="__codelineno-14-94" href="#__codelineno-14-94"></a>        <span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
</span><span id="__span-14-95"><a id="__codelineno-14-95" name="__codelineno-14-95" href="#__codelineno-14-95"></a>        <span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span id="__span-14-96"><a id="__codelineno-14-96" name="__codelineno-14-96" href="#__codelineno-14-96"></a>
</span><span id="__span-14-97"><a id="__codelineno-14-97" name="__codelineno-14-97" href="#__codelineno-14-97"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;âœ… Database initialized with proper schema&quot;</span><span class="p">)</span>
</span><span id="__span-14-98"><a id="__codelineno-14-98" name="__codelineno-14-98" href="#__codelineno-14-98"></a>
</span><span id="__span-14-99"><a id="__codelineno-14-99" name="__codelineno-14-99" href="#__codelineno-14-99"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">setup_routes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-14-100"><a id="__codelineno-14-100" name="__codelineno-14-100" href="#__codelineno-14-100"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Setup all application routes&quot;&quot;&quot;</span>
</span><span id="__span-14-101"><a id="__codelineno-14-101" name="__codelineno-14-101" href="#__codelineno-14-101"></a>
</span><span id="__span-14-102"><a id="__codelineno-14-102" name="__codelineno-14-102" href="#__codelineno-14-102"></a>        <span class="nd">@self</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
</span><span id="__span-14-103"><a id="__codelineno-14-103" name="__codelineno-14-103" href="#__codelineno-14-103"></a>        <span class="k">def</span><span class="w"> </span><span class="nf">home</span><span class="p">():</span>
</span><span id="__span-14-104"><a id="__codelineno-14-104" name="__codelineno-14-104" href="#__codelineno-14-104"></a><span class="w">            </span><span class="sd">&quot;&quot;&quot;Home page with recent posts&quot;&quot;&quot;</span>
</span><span id="__span-14-105"><a id="__codelineno-14-105" name="__codelineno-14-105" href="#__codelineno-14-105"></a>            <span class="n">posts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_recent_posts</span><span class="p">(</span><span class="n">limit</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
</span><span id="__span-14-106"><a id="__codelineno-14-106" name="__codelineno-14-106" href="#__codelineno-14-106"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">track_analytics</span><span class="p">(</span><span class="s1">&#39;page_view&#39;</span><span class="p">,</span> <span class="n">page_url</span><span class="o">=</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
</span><span id="__span-14-107"><a id="__codelineno-14-107" name="__codelineno-14-107" href="#__codelineno-14-107"></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">render_json_response</span><span class="p">({</span>
</span><span id="__span-14-108"><a id="__codelineno-14-108" name="__codelineno-14-108" href="#__codelineno-14-108"></a>                <span class="s1">&#39;page&#39;</span><span class="p">:</span> <span class="s1">&#39;home&#39;</span><span class="p">,</span>
</span><span id="__span-14-109"><a id="__codelineno-14-109" name="__codelineno-14-109" href="#__codelineno-14-109"></a>                <span class="s1">&#39;posts&#39;</span><span class="p">:</span> <span class="n">posts</span><span class="p">,</span>
</span><span id="__span-14-110"><a id="__codelineno-14-110" name="__codelineno-14-110" href="#__codelineno-14-110"></a>                <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;Welcome to our Modern Web App!&#39;</span>
</span><span id="__span-14-111"><a id="__codelineno-14-111" name="__codelineno-14-111" href="#__codelineno-14-111"></a>            <span class="p">})</span>
</span><span id="__span-14-112"><a id="__codelineno-14-112" name="__codelineno-14-112" href="#__codelineno-14-112"></a>
</span><span id="__span-14-113"><a id="__codelineno-14-113" name="__codelineno-14-113" href="#__codelineno-14-113"></a>        <span class="nd">@self</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/api/register&#39;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;POST&#39;</span><span class="p">])</span>
</span><span id="__span-14-114"><a id="__codelineno-14-114" name="__codelineno-14-114" href="#__codelineno-14-114"></a>        <span class="k">def</span><span class="w"> </span><span class="nf">register</span><span class="p">():</span>
</span><span id="__span-14-115"><a id="__codelineno-14-115" name="__codelineno-14-115" href="#__codelineno-14-115"></a><span class="w">            </span><span class="sd">&quot;&quot;&quot;User registration endpoint&quot;&quot;&quot;</span>
</span><span id="__span-14-116"><a id="__codelineno-14-116" name="__codelineno-14-116" href="#__codelineno-14-116"></a>
</span><span id="__span-14-117"><a id="__codelineno-14-117" name="__codelineno-14-117" href="#__codelineno-14-117"></a>            <span class="n">data</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">get_json</span><span class="p">()</span>
</span><span id="__span-14-118"><a id="__codelineno-14-118" name="__codelineno-14-118" href="#__codelineno-14-118"></a>
</span><span id="__span-14-119"><a id="__codelineno-14-119" name="__codelineno-14-119" href="#__codelineno-14-119"></a>            <span class="c1"># Input validation</span>
</span><span id="__span-14-120"><a id="__codelineno-14-120" name="__codelineno-14-120" href="#__codelineno-14-120"></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">data</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;username&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;email&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;password&#39;</span><span class="p">):</span>
</span><span id="__span-14-121"><a id="__codelineno-14-121" name="__codelineno-14-121" href="#__codelineno-14-121"></a>                <span class="k">return</span> <span class="n">jsonify</span><span class="p">({</span><span class="s1">&#39;error&#39;</span><span class="p">:</span> <span class="s1">&#39;Missing required fields&#39;</span><span class="p">}),</span> <span class="mi">400</span>
</span><span id="__span-14-122"><a id="__codelineno-14-122" name="__codelineno-14-122" href="#__codelineno-14-122"></a>
</span><span id="__span-14-123"><a id="__codelineno-14-123" name="__codelineno-14-123" href="#__codelineno-14-123"></a>            <span class="c1"># Check if user exists</span>
</span><span id="__span-14-124"><a id="__codelineno-14-124" name="__codelineno-14-124" href="#__codelineno-14-124"></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_exists</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;username&#39;</span><span class="p">],</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;email&#39;</span><span class="p">]):</span>
</span><span id="__span-14-125"><a id="__codelineno-14-125" name="__codelineno-14-125" href="#__codelineno-14-125"></a>                <span class="k">return</span> <span class="n">jsonify</span><span class="p">({</span><span class="s1">&#39;error&#39;</span><span class="p">:</span> <span class="s1">&#39;User already exists&#39;</span><span class="p">}),</span> <span class="mi">409</span>
</span><span id="__span-14-126"><a id="__codelineno-14-126" name="__codelineno-14-126" href="#__codelineno-14-126"></a>
</span><span id="__span-14-127"><a id="__codelineno-14-127" name="__codelineno-14-127" href="#__codelineno-14-127"></a>            <span class="c1"># Validate password strength</span>
</span><span id="__span-14-128"><a id="__codelineno-14-128" name="__codelineno-14-128" href="#__codelineno-14-128"></a>            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_password</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;password&#39;</span><span class="p">]):</span>
</span><span id="__span-14-129"><a id="__codelineno-14-129" name="__codelineno-14-129" href="#__codelineno-14-129"></a>                <span class="k">return</span> <span class="n">jsonify</span><span class="p">({</span><span class="s1">&#39;error&#39;</span><span class="p">:</span> <span class="s1">&#39;Password too weak&#39;</span><span class="p">}),</span> <span class="mi">400</span>
</span><span id="__span-14-130"><a id="__codelineno-14-130" name="__codelineno-14-130" href="#__codelineno-14-130"></a>
</span><span id="__span-14-131"><a id="__codelineno-14-131" name="__codelineno-14-131" href="#__codelineno-14-131"></a>            <span class="c1"># Create user</span>
</span><span id="__span-14-132"><a id="__codelineno-14-132" name="__codelineno-14-132" href="#__codelineno-14-132"></a>            <span class="n">user_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_user</span><span class="p">(</span>
</span><span id="__span-14-133"><a id="__codelineno-14-133" name="__codelineno-14-133" href="#__codelineno-14-133"></a>                <span class="n">data</span><span class="p">[</span><span class="s1">&#39;username&#39;</span><span class="p">],</span> 
</span><span id="__span-14-134"><a id="__codelineno-14-134" name="__codelineno-14-134" href="#__codelineno-14-134"></a>                <span class="n">data</span><span class="p">[</span><span class="s1">&#39;email&#39;</span><span class="p">],</span> 
</span><span id="__span-14-135"><a id="__codelineno-14-135" name="__codelineno-14-135" href="#__codelineno-14-135"></a>                <span class="n">data</span><span class="p">[</span><span class="s1">&#39;password&#39;</span><span class="p">]</span>
</span><span id="__span-14-136"><a id="__codelineno-14-136" name="__codelineno-14-136" href="#__codelineno-14-136"></a>            <span class="p">)</span>
</span><span id="__span-14-137"><a id="__codelineno-14-137" name="__codelineno-14-137" href="#__codelineno-14-137"></a>
</span><span id="__span-14-138"><a id="__codelineno-14-138" name="__codelineno-14-138" href="#__codelineno-14-138"></a>            <span class="k">if</span> <span class="n">user_id</span><span class="p">:</span>
</span><span id="__span-14-139"><a id="__codelineno-14-139" name="__codelineno-14-139" href="#__codelineno-14-139"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">track_analytics</span><span class="p">(</span><span class="s1">&#39;user_registration&#39;</span><span class="p">,</span> <span class="n">user_id</span><span class="o">=</span><span class="n">user_id</span><span class="p">)</span>
</span><span id="__span-14-140"><a id="__codelineno-14-140" name="__codelineno-14-140" href="#__codelineno-14-140"></a>                <span class="k">return</span> <span class="n">jsonify</span><span class="p">({</span>
</span><span id="__span-14-141"><a id="__codelineno-14-141" name="__codelineno-14-141" href="#__codelineno-14-141"></a>                    <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;User registered successfully&#39;</span><span class="p">,</span>
</span><span id="__span-14-142"><a id="__codelineno-14-142" name="__codelineno-14-142" href="#__codelineno-14-142"></a>                    <span class="s1">&#39;user_id&#39;</span><span class="p">:</span> <span class="n">user_id</span>
</span><span id="__span-14-143"><a id="__codelineno-14-143" name="__codelineno-14-143" href="#__codelineno-14-143"></a>                <span class="p">}),</span> <span class="mi">201</span>
</span><span id="__span-14-144"><a id="__codelineno-14-144" name="__codelineno-14-144" href="#__codelineno-14-144"></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="__span-14-145"><a id="__codelineno-14-145" name="__codelineno-14-145" href="#__codelineno-14-145"></a>                <span class="k">return</span> <span class="n">jsonify</span><span class="p">({</span><span class="s1">&#39;error&#39;</span><span class="p">:</span> <span class="s1">&#39;Registration failed&#39;</span><span class="p">}),</span> <span class="mi">500</span>
</span><span id="__span-14-146"><a id="__codelineno-14-146" name="__codelineno-14-146" href="#__codelineno-14-146"></a>
</span><span id="__span-14-147"><a id="__codelineno-14-147" name="__codelineno-14-147" href="#__codelineno-14-147"></a>        <span class="nd">@self</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/api/login&#39;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;POST&#39;</span><span class="p">])</span>
</span><span id="__span-14-148"><a id="__codelineno-14-148" name="__codelineno-14-148" href="#__codelineno-14-148"></a>        <span class="k">def</span><span class="w"> </span><span class="nf">login</span><span class="p">():</span>
</span><span id="__span-14-149"><a id="__codelineno-14-149" name="__codelineno-14-149" href="#__codelineno-14-149"></a><span class="w">            </span><span class="sd">&quot;&quot;&quot;User login endpoint&quot;&quot;&quot;</span>
</span><span id="__span-14-150"><a id="__codelineno-14-150" name="__codelineno-14-150" href="#__codelineno-14-150"></a>
</span><span id="__span-14-151"><a id="__codelineno-14-151" name="__codelineno-14-151" href="#__codelineno-14-151"></a>            <span class="n">data</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">get_json</span><span class="p">()</span>
</span><span id="__span-14-152"><a id="__codelineno-14-152" name="__codelineno-14-152" href="#__codelineno-14-152"></a>
</span><span id="__span-14-153"><a id="__codelineno-14-153" name="__codelineno-14-153" href="#__codelineno-14-153"></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">data</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;username&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;password&#39;</span><span class="p">):</span>
</span><span id="__span-14-154"><a id="__codelineno-14-154" name="__codelineno-14-154" href="#__codelineno-14-154"></a>                <span class="k">return</span> <span class="n">jsonify</span><span class="p">({</span><span class="s1">&#39;error&#39;</span><span class="p">:</span> <span class="s1">&#39;Missing credentials&#39;</span><span class="p">}),</span> <span class="mi">400</span>
</span><span id="__span-14-155"><a id="__codelineno-14-155" name="__codelineno-14-155" href="#__codelineno-14-155"></a>
</span><span id="__span-14-156"><a id="__codelineno-14-156" name="__codelineno-14-156" href="#__codelineno-14-156"></a>            <span class="n">user</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">authenticate_user</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;username&#39;</span><span class="p">],</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;password&#39;</span><span class="p">])</span>
</span><span id="__span-14-157"><a id="__codelineno-14-157" name="__codelineno-14-157" href="#__codelineno-14-157"></a>
</span><span id="__span-14-158"><a id="__codelineno-14-158" name="__codelineno-14-158" href="#__codelineno-14-158"></a>            <span class="k">if</span> <span class="n">user</span><span class="p">:</span>
</span><span id="__span-14-159"><a id="__codelineno-14-159" name="__codelineno-14-159" href="#__codelineno-14-159"></a>                <span class="c1"># Generate JWT token</span>
</span><span id="__span-14-160"><a id="__codelineno-14-160" name="__codelineno-14-160" href="#__codelineno-14-160"></a>                <span class="n">token</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">generate_jwt_token</span><span class="p">(</span><span class="n">user</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">],</span> <span class="n">user</span><span class="p">[</span><span class="s1">&#39;username&#39;</span><span class="p">])</span>
</span><span id="__span-14-161"><a id="__codelineno-14-161" name="__codelineno-14-161" href="#__codelineno-14-161"></a>
</span><span id="__span-14-162"><a id="__codelineno-14-162" name="__codelineno-14-162" href="#__codelineno-14-162"></a>                <span class="c1"># Update last login</span>
</span><span id="__span-14-163"><a id="__codelineno-14-163" name="__codelineno-14-163" href="#__codelineno-14-163"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">update_last_login</span><span class="p">(</span><span class="n">user</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">])</span>
</span><span id="__span-14-164"><a id="__codelineno-14-164" name="__codelineno-14-164" href="#__codelineno-14-164"></a>
</span><span id="__span-14-165"><a id="__codelineno-14-165" name="__codelineno-14-165" href="#__codelineno-14-165"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">track_analytics</span><span class="p">(</span><span class="s1">&#39;user_login&#39;</span><span class="p">,</span> <span class="n">user_id</span><span class="o">=</span><span class="n">user</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">])</span>
</span><span id="__span-14-166"><a id="__codelineno-14-166" name="__codelineno-14-166" href="#__codelineno-14-166"></a>
</span><span id="__span-14-167"><a id="__codelineno-14-167" name="__codelineno-14-167" href="#__codelineno-14-167"></a>                <span class="k">return</span> <span class="n">jsonify</span><span class="p">({</span>
</span><span id="__span-14-168"><a id="__codelineno-14-168" name="__codelineno-14-168" href="#__codelineno-14-168"></a>                    <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;Login successful&#39;</span><span class="p">,</span>
</span><span id="__span-14-169"><a id="__codelineno-14-169" name="__codelineno-14-169" href="#__codelineno-14-169"></a>                    <span class="s1">&#39;token&#39;</span><span class="p">:</span> <span class="n">token</span><span class="p">,</span>
</span><span id="__span-14-170"><a id="__codelineno-14-170" name="__codelineno-14-170" href="#__codelineno-14-170"></a>                    <span class="s1">&#39;user&#39;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-14-171"><a id="__codelineno-14-171" name="__codelineno-14-171" href="#__codelineno-14-171"></a>                        <span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="n">user</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">],</span>
</span><span id="__span-14-172"><a id="__codelineno-14-172" name="__codelineno-14-172" href="#__codelineno-14-172"></a>                        <span class="s1">&#39;username&#39;</span><span class="p">:</span> <span class="n">user</span><span class="p">[</span><span class="s1">&#39;username&#39;</span><span class="p">],</span>
</span><span id="__span-14-173"><a id="__codelineno-14-173" name="__codelineno-14-173" href="#__codelineno-14-173"></a>                        <span class="s1">&#39;email&#39;</span><span class="p">:</span> <span class="n">user</span><span class="p">[</span><span class="s1">&#39;email&#39;</span><span class="p">],</span>
</span><span id="__span-14-174"><a id="__codelineno-14-174" name="__codelineno-14-174" href="#__codelineno-14-174"></a>                        <span class="s1">&#39;role&#39;</span><span class="p">:</span> <span class="n">user</span><span class="p">[</span><span class="s1">&#39;role&#39;</span><span class="p">]</span>
</span><span id="__span-14-175"><a id="__codelineno-14-175" name="__codelineno-14-175" href="#__codelineno-14-175"></a>                    <span class="p">}</span>
</span><span id="__span-14-176"><a id="__codelineno-14-176" name="__codelineno-14-176" href="#__codelineno-14-176"></a>                <span class="p">})</span>
</span><span id="__span-14-177"><a id="__codelineno-14-177" name="__codelineno-14-177" href="#__codelineno-14-177"></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="__span-14-178"><a id="__codelineno-14-178" name="__codelineno-14-178" href="#__codelineno-14-178"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">track_analytics</span><span class="p">(</span><span class="s1">&#39;login_failed&#39;</span><span class="p">)</span>
</span><span id="__span-14-179"><a id="__codelineno-14-179" name="__codelineno-14-179" href="#__codelineno-14-179"></a>                <span class="k">return</span> <span class="n">jsonify</span><span class="p">({</span><span class="s1">&#39;error&#39;</span><span class="p">:</span> <span class="s1">&#39;Invalid credentials&#39;</span><span class="p">}),</span> <span class="mi">401</span>
</span><span id="__span-14-180"><a id="__codelineno-14-180" name="__codelineno-14-180" href="#__codelineno-14-180"></a>
</span><span id="__span-14-181"><a id="__codelineno-14-181" name="__codelineno-14-181" href="#__codelineno-14-181"></a>        <span class="nd">@self</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/api/posts&#39;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;GET&#39;</span><span class="p">,</span> <span class="s1">&#39;POST&#39;</span><span class="p">])</span>
</span><span id="__span-14-182"><a id="__codelineno-14-182" name="__codelineno-14-182" href="#__codelineno-14-182"></a>        <span class="nd">@self</span><span class="o">.</span><span class="n">require_auth</span>
</span><span id="__span-14-183"><a id="__codelineno-14-183" name="__codelineno-14-183" href="#__codelineno-14-183"></a>        <span class="k">def</span><span class="w"> </span><span class="nf">posts</span><span class="p">(</span><span class="n">current_user</span><span class="p">):</span>
</span><span id="__span-14-184"><a id="__codelineno-14-184" name="__codelineno-14-184" href="#__codelineno-14-184"></a><span class="w">            </span><span class="sd">&quot;&quot;&quot;Posts endpoint - GET to list, POST to create&quot;&quot;&quot;</span>
</span><span id="__span-14-185"><a id="__codelineno-14-185" name="__codelineno-14-185" href="#__codelineno-14-185"></a>
</span><span id="__span-14-186"><a id="__codelineno-14-186" name="__codelineno-14-186" href="#__codelineno-14-186"></a>            <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="s1">&#39;GET&#39;</span><span class="p">:</span>
</span><span id="__span-14-187"><a id="__codelineno-14-187" name="__codelineno-14-187" href="#__codelineno-14-187"></a>                <span class="c1"># Get all posts with pagination</span>
</span><span id="__span-14-188"><a id="__codelineno-14-188" name="__codelineno-14-188" href="#__codelineno-14-188"></a>                <span class="n">page</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">args</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;page&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">)</span>
</span><span id="__span-14-189"><a id="__codelineno-14-189" name="__codelineno-14-189" href="#__codelineno-14-189"></a>                <span class="n">limit</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">args</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;limit&#39;</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">)</span>
</span><span id="__span-14-190"><a id="__codelineno-14-190" name="__codelineno-14-190" href="#__codelineno-14-190"></a>
</span><span id="__span-14-191"><a id="__codelineno-14-191" name="__codelineno-14-191" href="#__codelineno-14-191"></a>                <span class="n">posts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_posts_paginated</span><span class="p">(</span><span class="n">page</span><span class="p">,</span> <span class="n">limit</span><span class="p">)</span>
</span><span id="__span-14-192"><a id="__codelineno-14-192" name="__codelineno-14-192" href="#__codelineno-14-192"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">track_analytics</span><span class="p">(</span><span class="s1">&#39;posts_viewed&#39;</span><span class="p">,</span> <span class="n">user_id</span><span class="o">=</span><span class="n">current_user</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">])</span>
</span><span id="__span-14-193"><a id="__codelineno-14-193" name="__codelineno-14-193" href="#__codelineno-14-193"></a>
</span><span id="__span-14-194"><a id="__codelineno-14-194" name="__codelineno-14-194" href="#__codelineno-14-194"></a>                <span class="k">return</span> <span class="n">jsonify</span><span class="p">({</span>
</span><span id="__span-14-195"><a id="__codelineno-14-195" name="__codelineno-14-195" href="#__codelineno-14-195"></a>                    <span class="s1">&#39;posts&#39;</span><span class="p">:</span> <span class="n">posts</span><span class="p">,</span>
</span><span id="__span-14-196"><a id="__codelineno-14-196" name="__codelineno-14-196" href="#__codelineno-14-196"></a>                    <span class="s1">&#39;page&#39;</span><span class="p">:</span> <span class="n">page</span><span class="p">,</span>
</span><span id="__span-14-197"><a id="__codelineno-14-197" name="__codelineno-14-197" href="#__codelineno-14-197"></a>                    <span class="s1">&#39;total&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_posts_count</span><span class="p">()</span>
</span><span id="__span-14-198"><a id="__codelineno-14-198" name="__codelineno-14-198" href="#__codelineno-14-198"></a>                <span class="p">})</span>
</span><span id="__span-14-199"><a id="__codelineno-14-199" name="__codelineno-14-199" href="#__codelineno-14-199"></a>
</span><span id="__span-14-200"><a id="__codelineno-14-200" name="__codelineno-14-200" href="#__codelineno-14-200"></a>            <span class="k">elif</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="s1">&#39;POST&#39;</span><span class="p">:</span>
</span><span id="__span-14-201"><a id="__codelineno-14-201" name="__codelineno-14-201" href="#__codelineno-14-201"></a>                <span class="c1"># Create new post</span>
</span><span id="__span-14-202"><a id="__codelineno-14-202" name="__codelineno-14-202" href="#__codelineno-14-202"></a>                <span class="n">data</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">get_json</span><span class="p">()</span>
</span><span id="__span-14-203"><a id="__codelineno-14-203" name="__codelineno-14-203" href="#__codelineno-14-203"></a>
</span><span id="__span-14-204"><a id="__codelineno-14-204" name="__codelineno-14-204" href="#__codelineno-14-204"></a>                <span class="k">if</span> <span class="ow">not</span> <span class="n">data</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;content&#39;</span><span class="p">):</span>
</span><span id="__span-14-205"><a id="__codelineno-14-205" name="__codelineno-14-205" href="#__codelineno-14-205"></a>                    <span class="k">return</span> <span class="n">jsonify</span><span class="p">({</span><span class="s1">&#39;error&#39;</span><span class="p">:</span> <span class="s1">&#39;Missing title or content&#39;</span><span class="p">}),</span> <span class="mi">400</span>
</span><span id="__span-14-206"><a id="__codelineno-14-206" name="__codelineno-14-206" href="#__codelineno-14-206"></a>
</span><span id="__span-14-207"><a id="__codelineno-14-207" name="__codelineno-14-207" href="#__codelineno-14-207"></a>                <span class="n">post_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_post</span><span class="p">(</span>
</span><span id="__span-14-208"><a id="__codelineno-14-208" name="__codelineno-14-208" href="#__codelineno-14-208"></a>                    <span class="n">data</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">],</span>
</span><span id="__span-14-209"><a id="__codelineno-14-209" name="__codelineno-14-209" href="#__codelineno-14-209"></a>                    <span class="n">data</span><span class="p">[</span><span class="s1">&#39;content&#39;</span><span class="p">],</span>
</span><span id="__span-14-210"><a id="__codelineno-14-210" name="__codelineno-14-210" href="#__codelineno-14-210"></a>                    <span class="n">current_user</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span>
</span><span id="__span-14-211"><a id="__codelineno-14-211" name="__codelineno-14-211" href="#__codelineno-14-211"></a>                <span class="p">)</span>
</span><span id="__span-14-212"><a id="__codelineno-14-212" name="__codelineno-14-212" href="#__codelineno-14-212"></a>
</span><span id="__span-14-213"><a id="__codelineno-14-213" name="__codelineno-14-213" href="#__codelineno-14-213"></a>                <span class="k">if</span> <span class="n">post_id</span><span class="p">:</span>
</span><span id="__span-14-214"><a id="__codelineno-14-214" name="__codelineno-14-214" href="#__codelineno-14-214"></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">track_analytics</span><span class="p">(</span><span class="s1">&#39;post_created&#39;</span><span class="p">,</span> <span class="n">user_id</span><span class="o">=</span><span class="n">current_user</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">])</span>
</span><span id="__span-14-215"><a id="__codelineno-14-215" name="__codelineno-14-215" href="#__codelineno-14-215"></a>                    <span class="k">return</span> <span class="n">jsonify</span><span class="p">({</span>
</span><span id="__span-14-216"><a id="__codelineno-14-216" name="__codelineno-14-216" href="#__codelineno-14-216"></a>                        <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;Post created successfully&#39;</span><span class="p">,</span>
</span><span id="__span-14-217"><a id="__codelineno-14-217" name="__codelineno-14-217" href="#__codelineno-14-217"></a>                        <span class="s1">&#39;post_id&#39;</span><span class="p">:</span> <span class="n">post_id</span>
</span><span id="__span-14-218"><a id="__codelineno-14-218" name="__codelineno-14-218" href="#__codelineno-14-218"></a>                    <span class="p">}),</span> <span class="mi">201</span>
</span><span id="__span-14-219"><a id="__codelineno-14-219" name="__codelineno-14-219" href="#__codelineno-14-219"></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="__span-14-220"><a id="__codelineno-14-220" name="__codelineno-14-220" href="#__codelineno-14-220"></a>                    <span class="k">return</span> <span class="n">jsonify</span><span class="p">({</span><span class="s1">&#39;error&#39;</span><span class="p">:</span> <span class="s1">&#39;Failed to create post&#39;</span><span class="p">}),</span> <span class="mi">500</span>
</span><span id="__span-14-221"><a id="__codelineno-14-221" name="__codelineno-14-221" href="#__codelineno-14-221"></a>
</span><span id="__span-14-222"><a id="__codelineno-14-222" name="__codelineno-14-222" href="#__codelineno-14-222"></a>        <span class="nd">@self</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/api/posts/&lt;int:post_id&gt;&#39;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;GET&#39;</span><span class="p">,</span> <span class="s1">&#39;PUT&#39;</span><span class="p">,</span> <span class="s1">&#39;DELETE&#39;</span><span class="p">])</span>
</span><span id="__span-14-223"><a id="__codelineno-14-223" name="__codelineno-14-223" href="#__codelineno-14-223"></a>        <span class="nd">@self</span><span class="o">.</span><span class="n">require_auth</span>
</span><span id="__span-14-224"><a id="__codelineno-14-224" name="__codelineno-14-224" href="#__codelineno-14-224"></a>        <span class="k">def</span><span class="w"> </span><span class="nf">single_post</span><span class="p">(</span><span class="n">current_user</span><span class="p">,</span> <span class="n">post_id</span><span class="p">):</span>
</span><span id="__span-14-225"><a id="__codelineno-14-225" name="__codelineno-14-225" href="#__codelineno-14-225"></a><span class="w">            </span><span class="sd">&quot;&quot;&quot;Single post operations&quot;&quot;&quot;</span>
</span><span id="__span-14-226"><a id="__codelineno-14-226" name="__codelineno-14-226" href="#__codelineno-14-226"></a>
</span><span id="__span-14-227"><a id="__codelineno-14-227" name="__codelineno-14-227" href="#__codelineno-14-227"></a>            <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="s1">&#39;GET&#39;</span><span class="p">:</span>
</span><span id="__span-14-228"><a id="__codelineno-14-228" name="__codelineno-14-228" href="#__codelineno-14-228"></a>                <span class="n">post</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_post_by_id</span><span class="p">(</span><span class="n">post_id</span><span class="p">)</span>
</span><span id="__span-14-229"><a id="__codelineno-14-229" name="__codelineno-14-229" href="#__codelineno-14-229"></a>                <span class="k">if</span> <span class="n">post</span><span class="p">:</span>
</span><span id="__span-14-230"><a id="__codelineno-14-230" name="__codelineno-14-230" href="#__codelineno-14-230"></a>                    <span class="c1"># Increment view count</span>
</span><span id="__span-14-231"><a id="__codelineno-14-231" name="__codelineno-14-231" href="#__codelineno-14-231"></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">increment_post_views</span><span class="p">(</span><span class="n">post_id</span><span class="p">)</span>
</span><span id="__span-14-232"><a id="__codelineno-14-232" name="__codelineno-14-232" href="#__codelineno-14-232"></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">track_analytics</span><span class="p">(</span><span class="s1">&#39;post_viewed&#39;</span><span class="p">,</span> <span class="n">user_id</span><span class="o">=</span><span class="n">current_user</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">])</span>
</span><span id="__span-14-233"><a id="__codelineno-14-233" name="__codelineno-14-233" href="#__codelineno-14-233"></a>                    <span class="k">return</span> <span class="n">jsonify</span><span class="p">(</span><span class="n">post</span><span class="p">)</span>
</span><span id="__span-14-234"><a id="__codelineno-14-234" name="__codelineno-14-234" href="#__codelineno-14-234"></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="__span-14-235"><a id="__codelineno-14-235" name="__codelineno-14-235" href="#__codelineno-14-235"></a>                    <span class="k">return</span> <span class="n">jsonify</span><span class="p">({</span><span class="s1">&#39;error&#39;</span><span class="p">:</span> <span class="s1">&#39;Post not found&#39;</span><span class="p">}),</span> <span class="mi">404</span>
</span><span id="__span-14-236"><a id="__codelineno-14-236" name="__codelineno-14-236" href="#__codelineno-14-236"></a>
</span><span id="__span-14-237"><a id="__codelineno-14-237" name="__codelineno-14-237" href="#__codelineno-14-237"></a>            <span class="k">elif</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="s1">&#39;PUT&#39;</span><span class="p">:</span>
</span><span id="__span-14-238"><a id="__codelineno-14-238" name="__codelineno-14-238" href="#__codelineno-14-238"></a>                <span class="c1"># Update post (only by author or admin)</span>
</span><span id="__span-14-239"><a id="__codelineno-14-239" name="__codelineno-14-239" href="#__codelineno-14-239"></a>                <span class="n">post</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_post_by_id</span><span class="p">(</span><span class="n">post_id</span><span class="p">)</span>
</span><span id="__span-14-240"><a id="__codelineno-14-240" name="__codelineno-14-240" href="#__codelineno-14-240"></a>                <span class="k">if</span> <span class="ow">not</span> <span class="n">post</span><span class="p">:</span>
</span><span id="__span-14-241"><a id="__codelineno-14-241" name="__codelineno-14-241" href="#__codelineno-14-241"></a>                    <span class="k">return</span> <span class="n">jsonify</span><span class="p">({</span><span class="s1">&#39;error&#39;</span><span class="p">:</span> <span class="s1">&#39;Post not found&#39;</span><span class="p">}),</span> <span class="mi">404</span>
</span><span id="__span-14-242"><a id="__codelineno-14-242" name="__codelineno-14-242" href="#__codelineno-14-242"></a>
</span><span id="__span-14-243"><a id="__codelineno-14-243" name="__codelineno-14-243" href="#__codelineno-14-243"></a>                <span class="k">if</span> <span class="n">post</span><span class="p">[</span><span class="s1">&#39;author_id&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="n">current_user</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span> <span class="ow">and</span> <span class="n">current_user</span><span class="p">[</span><span class="s1">&#39;role&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;admin&#39;</span><span class="p">:</span>
</span><span id="__span-14-244"><a id="__codelineno-14-244" name="__codelineno-14-244" href="#__codelineno-14-244"></a>                    <span class="k">return</span> <span class="n">jsonify</span><span class="p">({</span><span class="s1">&#39;error&#39;</span><span class="p">:</span> <span class="s1">&#39;Unauthorized&#39;</span><span class="p">}),</span> <span class="mi">403</span>
</span><span id="__span-14-245"><a id="__codelineno-14-245" name="__codelineno-14-245" href="#__codelineno-14-245"></a>
</span><span id="__span-14-246"><a id="__codelineno-14-246" name="__codelineno-14-246" href="#__codelineno-14-246"></a>                <span class="n">data</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">get_json</span><span class="p">()</span>
</span><span id="__span-14-247"><a id="__codelineno-14-247" name="__codelineno-14-247" href="#__codelineno-14-247"></a>                <span class="n">success</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">update_post</span><span class="p">(</span><span class="n">post_id</span><span class="p">,</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="p">),</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;content&#39;</span><span class="p">))</span>
</span><span id="__span-14-248"><a id="__codelineno-14-248" name="__codelineno-14-248" href="#__codelineno-14-248"></a>
</span><span id="__span-14-249"><a id="__codelineno-14-249" name="__codelineno-14-249" href="#__codelineno-14-249"></a>                <span class="k">if</span> <span class="n">success</span><span class="p">:</span>
</span><span id="__span-14-250"><a id="__codelineno-14-250" name="__codelineno-14-250" href="#__codelineno-14-250"></a>                    <span class="k">return</span> <span class="n">jsonify</span><span class="p">({</span><span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;Post updated successfully&#39;</span><span class="p">})</span>
</span><span id="__span-14-251"><a id="__codelineno-14-251" name="__codelineno-14-251" href="#__codelineno-14-251"></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="__span-14-252"><a id="__codelineno-14-252" name="__codelineno-14-252" href="#__codelineno-14-252"></a>                    <span class="k">return</span> <span class="n">jsonify</span><span class="p">({</span><span class="s1">&#39;error&#39;</span><span class="p">:</span> <span class="s1">&#39;Update failed&#39;</span><span class="p">}),</span> <span class="mi">500</span>
</span><span id="__span-14-253"><a id="__codelineno-14-253" name="__codelineno-14-253" href="#__codelineno-14-253"></a>
</span><span id="__span-14-254"><a id="__codelineno-14-254" name="__codelineno-14-254" href="#__codelineno-14-254"></a>            <span class="k">elif</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="s1">&#39;DELETE&#39;</span><span class="p">:</span>
</span><span id="__span-14-255"><a id="__codelineno-14-255" name="__codelineno-14-255" href="#__codelineno-14-255"></a>                <span class="c1"># Delete post (only by author or admin)</span>
</span><span id="__span-14-256"><a id="__codelineno-14-256" name="__codelineno-14-256" href="#__codelineno-14-256"></a>                <span class="n">post</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_post_by_id</span><span class="p">(</span><span class="n">post_id</span><span class="p">)</span>
</span><span id="__span-14-257"><a id="__codelineno-14-257" name="__codelineno-14-257" href="#__codelineno-14-257"></a>                <span class="k">if</span> <span class="ow">not</span> <span class="n">post</span><span class="p">:</span>
</span><span id="__span-14-258"><a id="__codelineno-14-258" name="__codelineno-14-258" href="#__codelineno-14-258"></a>                    <span class="k">return</span> <span class="n">jsonify</span><span class="p">({</span><span class="s1">&#39;error&#39;</span><span class="p">:</span> <span class="s1">&#39;Post not found&#39;</span><span class="p">}),</span> <span class="mi">404</span>
</span><span id="__span-14-259"><a id="__codelineno-14-259" name="__codelineno-14-259" href="#__codelineno-14-259"></a>
</span><span id="__span-14-260"><a id="__codelineno-14-260" name="__codelineno-14-260" href="#__codelineno-14-260"></a>                <span class="k">if</span> <span class="n">post</span><span class="p">[</span><span class="s1">&#39;author_id&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="n">current_user</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span> <span class="ow">and</span> <span class="n">current_user</span><span class="p">[</span><span class="s1">&#39;role&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;admin&#39;</span><span class="p">:</span>
</span><span id="__span-14-261"><a id="__codelineno-14-261" name="__codelineno-14-261" href="#__codelineno-14-261"></a>                    <span class="k">return</span> <span class="n">jsonify</span><span class="p">({</span><span class="s1">&#39;error&#39;</span><span class="p">:</span> <span class="s1">&#39;Unauthorized&#39;</span><span class="p">}),</span> <span class="mi">403</span>
</span><span id="__span-14-262"><a id="__codelineno-14-262" name="__codelineno-14-262" href="#__codelineno-14-262"></a>
</span><span id="__span-14-263"><a id="__codelineno-14-263" name="__codelineno-14-263" href="#__codelineno-14-263"></a>                <span class="n">success</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">delete_post</span><span class="p">(</span><span class="n">post_id</span><span class="p">)</span>
</span><span id="__span-14-264"><a id="__codelineno-14-264" name="__codelineno-14-264" href="#__codelineno-14-264"></a>
</span><span id="__span-14-265"><a id="__codelineno-14-265" name="__codelineno-14-265" href="#__codelineno-14-265"></a>                <span class="k">if</span> <span class="n">success</span><span class="p">:</span>
</span><span id="__span-14-266"><a id="__codelineno-14-266" name="__codelineno-14-266" href="#__codelineno-14-266"></a>                    <span class="k">return</span> <span class="n">jsonify</span><span class="p">({</span><span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;Post deleted successfully&#39;</span><span class="p">})</span>
</span><span id="__span-14-267"><a id="__codelineno-14-267" name="__codelineno-14-267" href="#__codelineno-14-267"></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="__span-14-268"><a id="__codelineno-14-268" name="__codelineno-14-268" href="#__codelineno-14-268"></a>                    <span class="k">return</span> <span class="n">jsonify</span><span class="p">({</span><span class="s1">&#39;error&#39;</span><span class="p">:</span> <span class="s1">&#39;Delete failed&#39;</span><span class="p">}),</span> <span class="mi">500</span>
</span><span id="__span-14-269"><a id="__codelineno-14-269" name="__codelineno-14-269" href="#__codelineno-14-269"></a>
</span><span id="__span-14-270"><a id="__codelineno-14-270" name="__codelineno-14-270" href="#__codelineno-14-270"></a>        <span class="nd">@self</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/api/analytics&#39;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;GET&#39;</span><span class="p">])</span>
</span><span id="__span-14-271"><a id="__codelineno-14-271" name="__codelineno-14-271" href="#__codelineno-14-271"></a>        <span class="nd">@self</span><span class="o">.</span><span class="n">require_auth</span>
</span><span id="__span-14-272"><a id="__codelineno-14-272" name="__codelineno-14-272" href="#__codelineno-14-272"></a>        <span class="k">def</span><span class="w"> </span><span class="nf">analytics</span><span class="p">(</span><span class="n">current_user</span><span class="p">):</span>
</span><span id="__span-14-273"><a id="__codelineno-14-273" name="__codelineno-14-273" href="#__codelineno-14-273"></a><span class="w">            </span><span class="sd">&quot;&quot;&quot;Get analytics data (admin only)&quot;&quot;&quot;</span>
</span><span id="__span-14-274"><a id="__codelineno-14-274" name="__codelineno-14-274" href="#__codelineno-14-274"></a>
</span><span id="__span-14-275"><a id="__codelineno-14-275" name="__codelineno-14-275" href="#__codelineno-14-275"></a>            <span class="k">if</span> <span class="n">current_user</span><span class="p">[</span><span class="s1">&#39;role&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;admin&#39;</span><span class="p">:</span>
</span><span id="__span-14-276"><a id="__codelineno-14-276" name="__codelineno-14-276" href="#__codelineno-14-276"></a>                <span class="k">return</span> <span class="n">jsonify</span><span class="p">({</span><span class="s1">&#39;error&#39;</span><span class="p">:</span> <span class="s1">&#39;Admin access required&#39;</span><span class="p">}),</span> <span class="mi">403</span>
</span><span id="__span-14-277"><a id="__codelineno-14-277" name="__codelineno-14-277" href="#__codelineno-14-277"></a>
</span><span id="__span-14-278"><a id="__codelineno-14-278" name="__codelineno-14-278" href="#__codelineno-14-278"></a>            <span class="n">analytics_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_analytics_summary</span><span class="p">()</span>
</span><span id="__span-14-279"><a id="__codelineno-14-279" name="__codelineno-14-279" href="#__codelineno-14-279"></a>            <span class="k">return</span> <span class="n">jsonify</span><span class="p">(</span><span class="n">analytics_data</span><span class="p">)</span>
</span><span id="__span-14-280"><a id="__codelineno-14-280" name="__codelineno-14-280" href="#__codelineno-14-280"></a>
</span><span id="__span-14-281"><a id="__codelineno-14-281" name="__codelineno-14-281" href="#__codelineno-14-281"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">setup_security</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-14-282"><a id="__codelineno-14-282" name="__codelineno-14-282" href="#__codelineno-14-282"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Setup security headers and middleware&quot;&quot;&quot;</span>
</span><span id="__span-14-283"><a id="__codelineno-14-283" name="__codelineno-14-283" href="#__codelineno-14-283"></a>
</span><span id="__span-14-284"><a id="__codelineno-14-284" name="__codelineno-14-284" href="#__codelineno-14-284"></a>        <span class="nd">@self</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">after_request</span>
</span><span id="__span-14-285"><a id="__codelineno-14-285" name="__codelineno-14-285" href="#__codelineno-14-285"></a>        <span class="k">def</span><span class="w"> </span><span class="nf">after_request</span><span class="p">(</span><span class="n">response</span><span class="p">):</span>
</span><span id="__span-14-286"><a id="__codelineno-14-286" name="__codelineno-14-286" href="#__codelineno-14-286"></a>            <span class="c1"># Security headers</span>
</span><span id="__span-14-287"><a id="__codelineno-14-287" name="__codelineno-14-287" href="#__codelineno-14-287"></a>            <span class="n">response</span><span class="o">.</span><span class="n">headers</span><span class="p">[</span><span class="s1">&#39;X-Content-Type-Options&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;nosniff&#39;</span>
</span><span id="__span-14-288"><a id="__codelineno-14-288" name="__codelineno-14-288" href="#__codelineno-14-288"></a>            <span class="n">response</span><span class="o">.</span><span class="n">headers</span><span class="p">[</span><span class="s1">&#39;X-Frame-Options&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;DENY&#39;</span>
</span><span id="__span-14-289"><a id="__codelineno-14-289" name="__codelineno-14-289" href="#__codelineno-14-289"></a>            <span class="n">response</span><span class="o">.</span><span class="n">headers</span><span class="p">[</span><span class="s1">&#39;X-XSS-Protection&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;1; mode=block&#39;</span>
</span><span id="__span-14-290"><a id="__codelineno-14-290" name="__codelineno-14-290" href="#__codelineno-14-290"></a>            <span class="n">response</span><span class="o">.</span><span class="n">headers</span><span class="p">[</span><span class="s1">&#39;Strict-Transport-Security&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;max-age=31536000; includeSubDomains&#39;</span>
</span><span id="__span-14-291"><a id="__codelineno-14-291" name="__codelineno-14-291" href="#__codelineno-14-291"></a>            <span class="n">response</span><span class="o">.</span><span class="n">headers</span><span class="p">[</span><span class="s1">&#39;Content-Security-Policy&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;default-src &#39;self&#39;&quot;</span>
</span><span id="__span-14-292"><a id="__codelineno-14-292" name="__codelineno-14-292" href="#__codelineno-14-292"></a>
</span><span id="__span-14-293"><a id="__codelineno-14-293" name="__codelineno-14-293" href="#__codelineno-14-293"></a>            <span class="c1"># CORS for API</span>
</span><span id="__span-14-294"><a id="__codelineno-14-294" name="__codelineno-14-294" href="#__codelineno-14-294"></a>            <span class="n">response</span><span class="o">.</span><span class="n">headers</span><span class="p">[</span><span class="s1">&#39;Access-Control-Allow-Origin&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;*&#39;</span>
</span><span id="__span-14-295"><a id="__codelineno-14-295" name="__codelineno-14-295" href="#__codelineno-14-295"></a>            <span class="n">response</span><span class="o">.</span><span class="n">headers</span><span class="p">[</span><span class="s1">&#39;Access-Control-Allow-Methods&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;GET, POST, PUT, DELETE, OPTIONS&#39;</span>
</span><span id="__span-14-296"><a id="__codelineno-14-296" name="__codelineno-14-296" href="#__codelineno-14-296"></a>            <span class="n">response</span><span class="o">.</span><span class="n">headers</span><span class="p">[</span><span class="s1">&#39;Access-Control-Allow-Headers&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;Content-Type, Authorization&#39;</span>
</span><span id="__span-14-297"><a id="__codelineno-14-297" name="__codelineno-14-297" href="#__codelineno-14-297"></a>
</span><span id="__span-14-298"><a id="__codelineno-14-298" name="__codelineno-14-298" href="#__codelineno-14-298"></a>            <span class="k">return</span> <span class="n">response</span>
</span><span id="__span-14-299"><a id="__codelineno-14-299" name="__codelineno-14-299" href="#__codelineno-14-299"></a>
</span><span id="__span-14-300"><a id="__codelineno-14-300" name="__codelineno-14-300" href="#__codelineno-14-300"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;ğŸ”’ Security headers configured&quot;</span><span class="p">)</span>
</span><span id="__span-14-301"><a id="__codelineno-14-301" name="__codelineno-14-301" href="#__codelineno-14-301"></a>
</span><span id="__span-14-302"><a id="__codelineno-14-302" name="__codelineno-14-302" href="#__codelineno-14-302"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">setup_monitoring</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-14-303"><a id="__codelineno-14-303" name="__codelineno-14-303" href="#__codelineno-14-303"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Setup application monitoring and logging&quot;&quot;&quot;</span>
</span><span id="__span-14-304"><a id="__codelineno-14-304" name="__codelineno-14-304" href="#__codelineno-14-304"></a>
</span><span id="__span-14-305"><a id="__codelineno-14-305" name="__codelineno-14-305" href="#__codelineno-14-305"></a>        <span class="nd">@self</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">before_request</span>
</span><span id="__span-14-306"><a id="__codelineno-14-306" name="__codelineno-14-306" href="#__codelineno-14-306"></a>        <span class="k">def</span><span class="w"> </span><span class="nf">before_request</span><span class="p">():</span>
</span><span id="__span-14-307"><a id="__codelineno-14-307" name="__codelineno-14-307" href="#__codelineno-14-307"></a>            <span class="c1"># Log all requests</span>
</span><span id="__span-14-308"><a id="__codelineno-14-308" name="__codelineno-14-308" href="#__codelineno-14-308"></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ğŸ“ </span><span class="si">{</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="si">}</span><span class="s2"> - </span><span class="si">{</span><span class="n">request</span><span class="o">.</span><span class="n">method</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">request</span><span class="o">.</span><span class="n">path</span><span class="si">}</span><span class="s2"> from </span><span class="si">{</span><span class="n">request</span><span class="o">.</span><span class="n">remote_addr</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-14-309"><a id="__codelineno-14-309" name="__codelineno-14-309" href="#__codelineno-14-309"></a>
</span><span id="__span-14-310"><a id="__codelineno-14-310" name="__codelineno-14-310" href="#__codelineno-14-310"></a>        <span class="nd">@self</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">errorhandler</span><span class="p">(</span><span class="mi">404</span><span class="p">)</span>
</span><span id="__span-14-311"><a id="__codelineno-14-311" name="__codelineno-14-311" href="#__codelineno-14-311"></a>        <span class="k">def</span><span class="w"> </span><span class="nf">not_found</span><span class="p">(</span><span class="n">error</span><span class="p">):</span>
</span><span id="__span-14-312"><a id="__codelineno-14-312" name="__codelineno-14-312" href="#__codelineno-14-312"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">track_analytics</span><span class="p">(</span><span class="s1">&#39;404_error&#39;</span><span class="p">,</span> <span class="n">page_url</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>
</span><span id="__span-14-313"><a id="__codelineno-14-313" name="__codelineno-14-313" href="#__codelineno-14-313"></a>            <span class="k">return</span> <span class="n">jsonify</span><span class="p">({</span><span class="s1">&#39;error&#39;</span><span class="p">:</span> <span class="s1">&#39;Not found&#39;</span><span class="p">}),</span> <span class="mi">404</span>
</span><span id="__span-14-314"><a id="__codelineno-14-314" name="__codelineno-14-314" href="#__codelineno-14-314"></a>
</span><span id="__span-14-315"><a id="__codelineno-14-315" name="__codelineno-14-315" href="#__codelineno-14-315"></a>        <span class="nd">@self</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">errorhandler</span><span class="p">(</span><span class="mi">500</span><span class="p">)</span>
</span><span id="__span-14-316"><a id="__codelineno-14-316" name="__codelineno-14-316" href="#__codelineno-14-316"></a>        <span class="k">def</span><span class="w"> </span><span class="nf">internal_error</span><span class="p">(</span><span class="n">error</span><span class="p">):</span>
</span><span id="__span-14-317"><a id="__codelineno-14-317" name="__codelineno-14-317" href="#__codelineno-14-317"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">track_analytics</span><span class="p">(</span><span class="s1">&#39;500_error&#39;</span><span class="p">,</span> <span class="n">page_url</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>
</span><span id="__span-14-318"><a id="__codelineno-14-318" name="__codelineno-14-318" href="#__codelineno-14-318"></a>            <span class="k">return</span> <span class="n">jsonify</span><span class="p">({</span><span class="s1">&#39;error&#39;</span><span class="p">:</span> <span class="s1">&#39;Internal server error&#39;</span><span class="p">}),</span> <span class="mi">500</span>
</span><span id="__span-14-319"><a id="__codelineno-14-319" name="__codelineno-14-319" href="#__codelineno-14-319"></a>
</span><span id="__span-14-320"><a id="__codelineno-14-320" name="__codelineno-14-320" href="#__codelineno-14-320"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;ğŸ“Š Monitoring and error handling configured&quot;</span><span class="p">)</span>
</span><span id="__span-14-321"><a id="__codelineno-14-321" name="__codelineno-14-321" href="#__codelineno-14-321"></a>
</span><span id="__span-14-322"><a id="__codelineno-14-322" name="__codelineno-14-322" href="#__codelineno-14-322"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">require_auth</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">):</span>
</span><span id="__span-14-323"><a id="__codelineno-14-323" name="__codelineno-14-323" href="#__codelineno-14-323"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Decorator to require authentication&quot;&quot;&quot;</span>
</span><span id="__span-14-324"><a id="__codelineno-14-324" name="__codelineno-14-324" href="#__codelineno-14-324"></a>
</span><span id="__span-14-325"><a id="__codelineno-14-325" name="__codelineno-14-325" href="#__codelineno-14-325"></a>        <span class="nd">@wraps</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
</span><span id="__span-14-326"><a id="__codelineno-14-326" name="__codelineno-14-326" href="#__codelineno-14-326"></a>        <span class="k">def</span><span class="w"> </span><span class="nf">decorated</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span><span id="__span-14-327"><a id="__codelineno-14-327" name="__codelineno-14-327" href="#__codelineno-14-327"></a>            <span class="n">token</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="__span-14-328"><a id="__codelineno-14-328" name="__codelineno-14-328" href="#__codelineno-14-328"></a>
</span><span id="__span-14-329"><a id="__codelineno-14-329" name="__codelineno-14-329" href="#__codelineno-14-329"></a>            <span class="k">if</span> <span class="s1">&#39;Authorization&#39;</span> <span class="ow">in</span> <span class="n">request</span><span class="o">.</span><span class="n">headers</span><span class="p">:</span>
</span><span id="__span-14-330"><a id="__codelineno-14-330" name="__codelineno-14-330" href="#__codelineno-14-330"></a>                <span class="n">auth_header</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">headers</span><span class="p">[</span><span class="s1">&#39;Authorization&#39;</span><span class="p">]</span>
</span><span id="__span-14-331"><a id="__codelineno-14-331" name="__codelineno-14-331" href="#__codelineno-14-331"></a>                <span class="k">try</span><span class="p">:</span>
</span><span id="__span-14-332"><a id="__codelineno-14-332" name="__codelineno-14-332" href="#__codelineno-14-332"></a>                    <span class="n">token</span> <span class="o">=</span> <span class="n">auth_header</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>  <span class="c1"># Bearer &lt;token&gt;</span>
</span><span id="__span-14-333"><a id="__codelineno-14-333" name="__codelineno-14-333" href="#__codelineno-14-333"></a>                <span class="k">except</span> <span class="ne">IndexError</span><span class="p">:</span>
</span><span id="__span-14-334"><a id="__codelineno-14-334" name="__codelineno-14-334" href="#__codelineno-14-334"></a>                    <span class="k">return</span> <span class="n">jsonify</span><span class="p">({</span><span class="s1">&#39;error&#39;</span><span class="p">:</span> <span class="s1">&#39;Invalid token format&#39;</span><span class="p">}),</span> <span class="mi">401</span>
</span><span id="__span-14-335"><a id="__codelineno-14-335" name="__codelineno-14-335" href="#__codelineno-14-335"></a>
</span><span id="__span-14-336"><a id="__codelineno-14-336" name="__codelineno-14-336" href="#__codelineno-14-336"></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">token</span><span class="p">:</span>
</span><span id="__span-14-337"><a id="__codelineno-14-337" name="__codelineno-14-337" href="#__codelineno-14-337"></a>                <span class="k">return</span> <span class="n">jsonify</span><span class="p">({</span><span class="s1">&#39;error&#39;</span><span class="p">:</span> <span class="s1">&#39;Token is missing&#39;</span><span class="p">}),</span> <span class="mi">401</span>
</span><span id="__span-14-338"><a id="__codelineno-14-338" name="__codelineno-14-338" href="#__codelineno-14-338"></a>
</span><span id="__span-14-339"><a id="__codelineno-14-339" name="__codelineno-14-339" href="#__codelineno-14-339"></a>            <span class="k">try</span><span class="p">:</span>
</span><span id="__span-14-340"><a id="__codelineno-14-340" name="__codelineno-14-340" href="#__codelineno-14-340"></a>                <span class="n">data</span> <span class="o">=</span> <span class="n">jwt</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">secret_key</span><span class="p">,</span> <span class="n">algorithms</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;HS256&#39;</span><span class="p">])</span>
</span><span id="__span-14-341"><a id="__codelineno-14-341" name="__codelineno-14-341" href="#__codelineno-14-341"></a>                <span class="n">current_user</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_user_by_id</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;user_id&#39;</span><span class="p">])</span>
</span><span id="__span-14-342"><a id="__codelineno-14-342" name="__codelineno-14-342" href="#__codelineno-14-342"></a>
</span><span id="__span-14-343"><a id="__codelineno-14-343" name="__codelineno-14-343" href="#__codelineno-14-343"></a>                <span class="k">if</span> <span class="ow">not</span> <span class="n">current_user</span><span class="p">:</span>
</span><span id="__span-14-344"><a id="__codelineno-14-344" name="__codelineno-14-344" href="#__codelineno-14-344"></a>                    <span class="k">return</span> <span class="n">jsonify</span><span class="p">({</span><span class="s1">&#39;error&#39;</span><span class="p">:</span> <span class="s1">&#39;Invalid token&#39;</span><span class="p">}),</span> <span class="mi">401</span>
</span><span id="__span-14-345"><a id="__codelineno-14-345" name="__codelineno-14-345" href="#__codelineno-14-345"></a>
</span><span id="__span-14-346"><a id="__codelineno-14-346" name="__codelineno-14-346" href="#__codelineno-14-346"></a>            <span class="k">except</span> <span class="n">jwt</span><span class="o">.</span><span class="n">ExpiredSignatureError</span><span class="p">:</span>
</span><span id="__span-14-347"><a id="__codelineno-14-347" name="__codelineno-14-347" href="#__codelineno-14-347"></a>                <span class="k">return</span> <span class="n">jsonify</span><span class="p">({</span><span class="s1">&#39;error&#39;</span><span class="p">:</span> <span class="s1">&#39;Token has expired&#39;</span><span class="p">}),</span> <span class="mi">401</span>
</span><span id="__span-14-348"><a id="__codelineno-14-348" name="__codelineno-14-348" href="#__codelineno-14-348"></a>            <span class="k">except</span> <span class="n">jwt</span><span class="o">.</span><span class="n">InvalidTokenError</span><span class="p">:</span>
</span><span id="__span-14-349"><a id="__codelineno-14-349" name="__codelineno-14-349" href="#__codelineno-14-349"></a>                <span class="k">return</span> <span class="n">jsonify</span><span class="p">({</span><span class="s1">&#39;error&#39;</span><span class="p">:</span> <span class="s1">&#39;Invalid token&#39;</span><span class="p">}),</span> <span class="mi">401</span>
</span><span id="__span-14-350"><a id="__codelineno-14-350" name="__codelineno-14-350" href="#__codelineno-14-350"></a>
</span><span id="__span-14-351"><a id="__codelineno-14-351" name="__codelineno-14-351" href="#__codelineno-14-351"></a>            <span class="k">return</span> <span class="n">f</span><span class="p">(</span><span class="n">current_user</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="__span-14-352"><a id="__codelineno-14-352" name="__codelineno-14-352" href="#__codelineno-14-352"></a>
</span><span id="__span-14-353"><a id="__codelineno-14-353" name="__codelineno-14-353" href="#__codelineno-14-353"></a>        <span class="k">return</span> <span class="n">decorated</span>
</span><span id="__span-14-354"><a id="__codelineno-14-354" name="__codelineno-14-354" href="#__codelineno-14-354"></a>
</span><span id="__span-14-355"><a id="__codelineno-14-355" name="__codelineno-14-355" href="#__codelineno-14-355"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">generate_jwt_token</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_id</span><span class="p">,</span> <span class="n">username</span><span class="p">):</span>
</span><span id="__span-14-356"><a id="__codelineno-14-356" name="__codelineno-14-356" href="#__codelineno-14-356"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Generate JWT token for authenticated user&quot;&quot;&quot;</span>
</span><span id="__span-14-357"><a id="__codelineno-14-357" name="__codelineno-14-357" href="#__codelineno-14-357"></a>
</span><span id="__span-14-358"><a id="__codelineno-14-358" name="__codelineno-14-358" href="#__codelineno-14-358"></a>        <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="__span-14-359"><a id="__codelineno-14-359" name="__codelineno-14-359" href="#__codelineno-14-359"></a>            <span class="s1">&#39;user_id&#39;</span><span class="p">:</span> <span class="n">user_id</span><span class="p">,</span>
</span><span id="__span-14-360"><a id="__codelineno-14-360" name="__codelineno-14-360" href="#__codelineno-14-360"></a>            <span class="s1">&#39;username&#39;</span><span class="p">:</span> <span class="n">username</span><span class="p">,</span>
</span><span id="__span-14-361"><a id="__codelineno-14-361" name="__codelineno-14-361" href="#__codelineno-14-361"></a>            <span class="s1">&#39;exp&#39;</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">utcnow</span><span class="p">()</span> <span class="o">+</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="__span-14-362"><a id="__codelineno-14-362" name="__codelineno-14-362" href="#__codelineno-14-362"></a>        <span class="p">}</span>
</span><span id="__span-14-363"><a id="__codelineno-14-363" name="__codelineno-14-363" href="#__codelineno-14-363"></a>
</span><span id="__span-14-364"><a id="__codelineno-14-364" name="__codelineno-14-364" href="#__codelineno-14-364"></a>        <span class="n">token</span> <span class="o">=</span> <span class="n">jwt</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">payload</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">secret_key</span><span class="p">,</span> <span class="n">algorithm</span><span class="o">=</span><span class="s1">&#39;HS256&#39;</span><span class="p">)</span>
</span><span id="__span-14-365"><a id="__codelineno-14-365" name="__codelineno-14-365" href="#__codelineno-14-365"></a>        <span class="k">return</span> <span class="n">token</span>
</span><span id="__span-14-366"><a id="__codelineno-14-366" name="__codelineno-14-366" href="#__codelineno-14-366"></a>
</span><span id="__span-14-367"><a id="__codelineno-14-367" name="__codelineno-14-367" href="#__codelineno-14-367"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">create_user</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">username</span><span class="p">,</span> <span class="n">email</span><span class="p">,</span> <span class="n">password</span><span class="p">):</span>
</span><span id="__span-14-368"><a id="__codelineno-14-368" name="__codelineno-14-368" href="#__codelineno-14-368"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a new user&quot;&quot;&quot;</span>
</span><span id="__span-14-369"><a id="__codelineno-14-369" name="__codelineno-14-369" href="#__codelineno-14-369"></a>
</span><span id="__span-14-370"><a id="__codelineno-14-370" name="__codelineno-14-370" href="#__codelineno-14-370"></a>        <span class="n">conn</span> <span class="o">=</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;webapp.db&#39;</span><span class="p">)</span>
</span><span id="__span-14-371"><a id="__codelineno-14-371" name="__codelineno-14-371" href="#__codelineno-14-371"></a>        <span class="n">cursor</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
</span><span id="__span-14-372"><a id="__codelineno-14-372" name="__codelineno-14-372" href="#__codelineno-14-372"></a>
</span><span id="__span-14-373"><a id="__codelineno-14-373" name="__codelineno-14-373" href="#__codelineno-14-373"></a>        <span class="n">password_hash</span> <span class="o">=</span> <span class="n">generate_password_hash</span><span class="p">(</span><span class="n">password</span><span class="p">)</span>
</span><span id="__span-14-374"><a id="__codelineno-14-374" name="__codelineno-14-374" href="#__codelineno-14-374"></a>
</span><span id="__span-14-375"><a id="__codelineno-14-375" name="__codelineno-14-375" href="#__codelineno-14-375"></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="__span-14-376"><a id="__codelineno-14-376" name="__codelineno-14-376" href="#__codelineno-14-376"></a>            <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
</span><span id="__span-14-377"><a id="__codelineno-14-377" name="__codelineno-14-377" href="#__codelineno-14-377"></a><span class="s1">                INSERT INTO users (username, email, password_hash)</span>
</span><span id="__span-14-378"><a id="__codelineno-14-378" name="__codelineno-14-378" href="#__codelineno-14-378"></a><span class="s1">                VALUES (?, ?, ?)</span>
</span><span id="__span-14-379"><a id="__codelineno-14-379" name="__codelineno-14-379" href="#__codelineno-14-379"></a><span class="s1">            &#39;&#39;&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">username</span><span class="p">,</span> <span class="n">email</span><span class="p">,</span> <span class="n">password_hash</span><span class="p">))</span>
</span><span id="__span-14-380"><a id="__codelineno-14-380" name="__codelineno-14-380" href="#__codelineno-14-380"></a>
</span><span id="__span-14-381"><a id="__codelineno-14-381" name="__codelineno-14-381" href="#__codelineno-14-381"></a>            <span class="n">user_id</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">lastrowid</span>
</span><span id="__span-14-382"><a id="__codelineno-14-382" name="__codelineno-14-382" href="#__codelineno-14-382"></a>            <span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
</span><span id="__span-14-383"><a id="__codelineno-14-383" name="__codelineno-14-383" href="#__codelineno-14-383"></a>            <span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span id="__span-14-384"><a id="__codelineno-14-384" name="__codelineno-14-384" href="#__codelineno-14-384"></a>
</span><span id="__span-14-385"><a id="__codelineno-14-385" name="__codelineno-14-385" href="#__codelineno-14-385"></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;âœ… User created: </span><span class="si">{</span><span class="n">username</span><span class="si">}</span><span class="s2"> (ID: </span><span class="si">{</span><span class="n">user_id</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>
</span><span id="__span-14-386"><a id="__codelineno-14-386" name="__codelineno-14-386" href="#__codelineno-14-386"></a>            <span class="k">return</span> <span class="n">user_id</span>
</span><span id="__span-14-387"><a id="__codelineno-14-387" name="__codelineno-14-387" href="#__codelineno-14-387"></a>
</span><span id="__span-14-388"><a id="__codelineno-14-388" name="__codelineno-14-388" href="#__codelineno-14-388"></a>        <span class="k">except</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">IntegrityError</span><span class="p">:</span>
</span><span id="__span-14-389"><a id="__codelineno-14-389" name="__codelineno-14-389" href="#__codelineno-14-389"></a>            <span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span id="__span-14-390"><a id="__codelineno-14-390" name="__codelineno-14-390" href="#__codelineno-14-390"></a>            <span class="k">return</span> <span class="kc">None</span>
</span><span id="__span-14-391"><a id="__codelineno-14-391" name="__codelineno-14-391" href="#__codelineno-14-391"></a>
</span><span id="__span-14-392"><a id="__codelineno-14-392" name="__codelineno-14-392" href="#__codelineno-14-392"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">authenticate_user</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">username</span><span class="p">,</span> <span class="n">password</span><span class="p">):</span>
</span><span id="__span-14-393"><a id="__codelineno-14-393" name="__codelineno-14-393" href="#__codelineno-14-393"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Authenticate user credentials&quot;&quot;&quot;</span>
</span><span id="__span-14-394"><a id="__codelineno-14-394" name="__codelineno-14-394" href="#__codelineno-14-394"></a>
</span><span id="__span-14-395"><a id="__codelineno-14-395" name="__codelineno-14-395" href="#__codelineno-14-395"></a>        <span class="n">conn</span> <span class="o">=</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;webapp.db&#39;</span><span class="p">)</span>
</span><span id="__span-14-396"><a id="__codelineno-14-396" name="__codelineno-14-396" href="#__codelineno-14-396"></a>        <span class="n">conn</span><span class="o">.</span><span class="n">row_factory</span> <span class="o">=</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">Row</span>
</span><span id="__span-14-397"><a id="__codelineno-14-397" name="__codelineno-14-397" href="#__codelineno-14-397"></a>        <span class="n">cursor</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
</span><span id="__span-14-398"><a id="__codelineno-14-398" name="__codelineno-14-398" href="#__codelineno-14-398"></a>
</span><span id="__span-14-399"><a id="__codelineno-14-399" name="__codelineno-14-399" href="#__codelineno-14-399"></a>        <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
</span><span id="__span-14-400"><a id="__codelineno-14-400" name="__codelineno-14-400" href="#__codelineno-14-400"></a><span class="s1">            SELECT * FROM users </span>
</span><span id="__span-14-401"><a id="__codelineno-14-401" name="__codelineno-14-401" href="#__codelineno-14-401"></a><span class="s1">            WHERE username = ? AND is_active = 1</span>
</span><span id="__span-14-402"><a id="__codelineno-14-402" name="__codelineno-14-402" href="#__codelineno-14-402"></a><span class="s1">        &#39;&#39;&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">username</span><span class="p">,))</span>
</span><span id="__span-14-403"><a id="__codelineno-14-403" name="__codelineno-14-403" href="#__codelineno-14-403"></a>
</span><span id="__span-14-404"><a id="__codelineno-14-404" name="__codelineno-14-404" href="#__codelineno-14-404"></a>        <span class="n">user</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchone</span><span class="p">()</span>
</span><span id="__span-14-405"><a id="__codelineno-14-405" name="__codelineno-14-405" href="#__codelineno-14-405"></a>        <span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span id="__span-14-406"><a id="__codelineno-14-406" name="__codelineno-14-406" href="#__codelineno-14-406"></a>
</span><span id="__span-14-407"><a id="__codelineno-14-407" name="__codelineno-14-407" href="#__codelineno-14-407"></a>        <span class="k">if</span> <span class="n">user</span> <span class="ow">and</span> <span class="n">check_password_hash</span><span class="p">(</span><span class="n">user</span><span class="p">[</span><span class="s1">&#39;password_hash&#39;</span><span class="p">],</span> <span class="n">password</span><span class="p">):</span>
</span><span id="__span-14-408"><a id="__codelineno-14-408" name="__codelineno-14-408" href="#__codelineno-14-408"></a>            <span class="k">return</span> <span class="nb">dict</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>
</span><span id="__span-14-409"><a id="__codelineno-14-409" name="__codelineno-14-409" href="#__codelineno-14-409"></a>
</span><span id="__span-14-410"><a id="__codelineno-14-410" name="__codelineno-14-410" href="#__codelineno-14-410"></a>        <span class="k">return</span> <span class="kc">None</span>
</span><span id="__span-14-411"><a id="__codelineno-14-411" name="__codelineno-14-411" href="#__codelineno-14-411"></a>
</span><span id="__span-14-412"><a id="__codelineno-14-412" name="__codelineno-14-412" href="#__codelineno-14-412"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">track_analytics</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event_type</span><span class="p">,</span> <span class="n">user_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">page_url</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="__span-14-413"><a id="__codelineno-14-413" name="__codelineno-14-413" href="#__codelineno-14-413"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Track analytics events&quot;&quot;&quot;</span>
</span><span id="__span-14-414"><a id="__codelineno-14-414" name="__codelineno-14-414" href="#__codelineno-14-414"></a>
</span><span id="__span-14-415"><a id="__codelineno-14-415" name="__codelineno-14-415" href="#__codelineno-14-415"></a>        <span class="n">conn</span> <span class="o">=</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;webapp.db&#39;</span><span class="p">)</span>
</span><span id="__span-14-416"><a id="__codelineno-14-416" name="__codelineno-14-416" href="#__codelineno-14-416"></a>        <span class="n">cursor</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
</span><span id="__span-14-417"><a id="__codelineno-14-417" name="__codelineno-14-417" href="#__codelineno-14-417"></a>
</span><span id="__span-14-418"><a id="__codelineno-14-418" name="__codelineno-14-418" href="#__codelineno-14-418"></a>        <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
</span><span id="__span-14-419"><a id="__codelineno-14-419" name="__codelineno-14-419" href="#__codelineno-14-419"></a><span class="s1">            INSERT INTO analytics (event_type, user_id, page_url, user_agent, ip_address)</span>
</span><span id="__span-14-420"><a id="__codelineno-14-420" name="__codelineno-14-420" href="#__codelineno-14-420"></a><span class="s1">            VALUES (?, ?, ?, ?, ?)</span>
</span><span id="__span-14-421"><a id="__codelineno-14-421" name="__codelineno-14-421" href="#__codelineno-14-421"></a><span class="s1">        &#39;&#39;&#39;</span><span class="p">,</span> <span class="p">(</span>
</span><span id="__span-14-422"><a id="__codelineno-14-422" name="__codelineno-14-422" href="#__codelineno-14-422"></a>            <span class="n">event_type</span><span class="p">,</span>
</span><span id="__span-14-423"><a id="__codelineno-14-423" name="__codelineno-14-423" href="#__codelineno-14-423"></a>            <span class="n">user_id</span><span class="p">,</span>
</span><span id="__span-14-424"><a id="__codelineno-14-424" name="__codelineno-14-424" href="#__codelineno-14-424"></a>            <span class="n">page_url</span> <span class="ow">or</span> <span class="n">request</span><span class="o">.</span><span class="n">path</span> <span class="k">if</span> <span class="n">request</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="__span-14-425"><a id="__codelineno-14-425" name="__codelineno-14-425" href="#__codelineno-14-425"></a>            <span class="n">request</span><span class="o">.</span><span class="n">user_agent</span><span class="o">.</span><span class="n">string</span> <span class="k">if</span> <span class="n">request</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="__span-14-426"><a id="__codelineno-14-426" name="__codelineno-14-426" href="#__codelineno-14-426"></a>            <span class="n">request</span><span class="o">.</span><span class="n">remote_addr</span> <span class="k">if</span> <span class="n">request</span> <span class="k">else</span> <span class="kc">None</span>
</span><span id="__span-14-427"><a id="__codelineno-14-427" name="__codelineno-14-427" href="#__codelineno-14-427"></a>        <span class="p">))</span>
</span><span id="__span-14-428"><a id="__codelineno-14-428" name="__codelineno-14-428" href="#__codelineno-14-428"></a>
</span><span id="__span-14-429"><a id="__codelineno-14-429" name="__codelineno-14-429" href="#__codelineno-14-429"></a>        <span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
</span><span id="__span-14-430"><a id="__codelineno-14-430" name="__codelineno-14-430" href="#__codelineno-14-430"></a>        <span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span id="__span-14-431"><a id="__codelineno-14-431" name="__codelineno-14-431" href="#__codelineno-14-431"></a>
</span><span id="__span-14-432"><a id="__codelineno-14-432" name="__codelineno-14-432" href="#__codelineno-14-432"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_analytics_summary</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-14-433"><a id="__codelineno-14-433" name="__codelineno-14-433" href="#__codelineno-14-433"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get analytics summary&quot;&quot;&quot;</span>
</span><span id="__span-14-434"><a id="__codelineno-14-434" name="__codelineno-14-434" href="#__codelineno-14-434"></a>
</span><span id="__span-14-435"><a id="__codelineno-14-435" name="__codelineno-14-435" href="#__codelineno-14-435"></a>        <span class="n">conn</span> <span class="o">=</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;webapp.db&#39;</span><span class="p">)</span>
</span><span id="__span-14-436"><a id="__codelineno-14-436" name="__codelineno-14-436" href="#__codelineno-14-436"></a>        <span class="n">cursor</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
</span><span id="__span-14-437"><a id="__codelineno-14-437" name="__codelineno-14-437" href="#__codelineno-14-437"></a>
</span><span id="__span-14-438"><a id="__codelineno-14-438" name="__codelineno-14-438" href="#__codelineno-14-438"></a>        <span class="c1"># Total events</span>
</span><span id="__span-14-439"><a id="__codelineno-14-439" name="__codelineno-14-439" href="#__codelineno-14-439"></a>        <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;SELECT COUNT(*) FROM analytics&#39;</span><span class="p">)</span>
</span><span id="__span-14-440"><a id="__codelineno-14-440" name="__codelineno-14-440" href="#__codelineno-14-440"></a>        <span class="n">total_events</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchone</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="__span-14-441"><a id="__codelineno-14-441" name="__codelineno-14-441" href="#__codelineno-14-441"></a>
</span><span id="__span-14-442"><a id="__codelineno-14-442" name="__codelineno-14-442" href="#__codelineno-14-442"></a>        <span class="c1"># Events by type</span>
</span><span id="__span-14-443"><a id="__codelineno-14-443" name="__codelineno-14-443" href="#__codelineno-14-443"></a>        <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
</span><span id="__span-14-444"><a id="__codelineno-14-444" name="__codelineno-14-444" href="#__codelineno-14-444"></a><span class="s1">            SELECT event_type, COUNT(*) as count</span>
</span><span id="__span-14-445"><a id="__codelineno-14-445" name="__codelineno-14-445" href="#__codelineno-14-445"></a><span class="s1">            FROM analytics</span>
</span><span id="__span-14-446"><a id="__codelineno-14-446" name="__codelineno-14-446" href="#__codelineno-14-446"></a><span class="s1">            GROUP BY event_type</span>
</span><span id="__span-14-447"><a id="__codelineno-14-447" name="__codelineno-14-447" href="#__codelineno-14-447"></a><span class="s1">            ORDER BY count DESC</span>
</span><span id="__span-14-448"><a id="__codelineno-14-448" name="__codelineno-14-448" href="#__codelineno-14-448"></a><span class="s1">        &#39;&#39;&#39;</span><span class="p">)</span>
</span><span id="__span-14-449"><a id="__codelineno-14-449" name="__codelineno-14-449" href="#__codelineno-14-449"></a>        <span class="n">events_by_type</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
</span><span id="__span-14-450"><a id="__codelineno-14-450" name="__codelineno-14-450" href="#__codelineno-14-450"></a>
</span><span id="__span-14-451"><a id="__codelineno-14-451" name="__codelineno-14-451" href="#__codelineno-14-451"></a>        <span class="c1"># Top pages</span>
</span><span id="__span-14-452"><a id="__codelineno-14-452" name="__codelineno-14-452" href="#__codelineno-14-452"></a>        <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
</span><span id="__span-14-453"><a id="__codelineno-14-453" name="__codelineno-14-453" href="#__codelineno-14-453"></a><span class="s1">            SELECT page_url, COUNT(*) as views</span>
</span><span id="__span-14-454"><a id="__codelineno-14-454" name="__codelineno-14-454" href="#__codelineno-14-454"></a><span class="s1">            FROM analytics</span>
</span><span id="__span-14-455"><a id="__codelineno-14-455" name="__codelineno-14-455" href="#__codelineno-14-455"></a><span class="s1">            WHERE page_url IS NOT NULL</span>
</span><span id="__span-14-456"><a id="__codelineno-14-456" name="__codelineno-14-456" href="#__codelineno-14-456"></a><span class="s1">            GROUP BY page_url</span>
</span><span id="__span-14-457"><a id="__codelineno-14-457" name="__codelineno-14-457" href="#__codelineno-14-457"></a><span class="s1">            ORDER BY views DESC</span>
</span><span id="__span-14-458"><a id="__codelineno-14-458" name="__codelineno-14-458" href="#__codelineno-14-458"></a><span class="s1">            LIMIT 10</span>
</span><span id="__span-14-459"><a id="__codelineno-14-459" name="__codelineno-14-459" href="#__codelineno-14-459"></a><span class="s1">        &#39;&#39;&#39;</span><span class="p">)</span>
</span><span id="__span-14-460"><a id="__codelineno-14-460" name="__codelineno-14-460" href="#__codelineno-14-460"></a>        <span class="n">top_pages</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
</span><span id="__span-14-461"><a id="__codelineno-14-461" name="__codelineno-14-461" href="#__codelineno-14-461"></a>
</span><span id="__span-14-462"><a id="__codelineno-14-462" name="__codelineno-14-462" href="#__codelineno-14-462"></a>        <span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span id="__span-14-463"><a id="__codelineno-14-463" name="__codelineno-14-463" href="#__codelineno-14-463"></a>
</span><span id="__span-14-464"><a id="__codelineno-14-464" name="__codelineno-14-464" href="#__codelineno-14-464"></a>        <span class="k">return</span> <span class="p">{</span>
</span><span id="__span-14-465"><a id="__codelineno-14-465" name="__codelineno-14-465" href="#__codelineno-14-465"></a>            <span class="s1">&#39;total_events&#39;</span><span class="p">:</span> <span class="n">total_events</span><span class="p">,</span>
</span><span id="__span-14-466"><a id="__codelineno-14-466" name="__codelineno-14-466" href="#__codelineno-14-466"></a>            <span class="s1">&#39;events_by_type&#39;</span><span class="p">:</span> <span class="nb">dict</span><span class="p">(</span><span class="n">events_by_type</span><span class="p">),</span>
</span><span id="__span-14-467"><a id="__codelineno-14-467" name="__codelineno-14-467" href="#__codelineno-14-467"></a>            <span class="s1">&#39;top_pages&#39;</span><span class="p">:</span> <span class="nb">dict</span><span class="p">(</span><span class="n">top_pages</span><span class="p">)</span>
</span><span id="__span-14-468"><a id="__codelineno-14-468" name="__codelineno-14-468" href="#__codelineno-14-468"></a>        <span class="p">}</span>
</span><span id="__span-14-469"><a id="__codelineno-14-469" name="__codelineno-14-469" href="#__codelineno-14-469"></a>
</span><span id="__span-14-470"><a id="__codelineno-14-470" name="__codelineno-14-470" href="#__codelineno-14-470"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">run_development_server</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-14-471"><a id="__codelineno-14-471" name="__codelineno-14-471" href="#__codelineno-14-471"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Run the development server&quot;&quot;&quot;</span>
</span><span id="__span-14-472"><a id="__codelineno-14-472" name="__codelineno-14-472" href="#__codelineno-14-472"></a>
</span><span id="__span-14-473"><a id="__codelineno-14-473" name="__codelineno-14-473" href="#__codelineno-14-473"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">ğŸš€ Starting Modern Web Application&quot;</span><span class="p">)</span>
</span><span id="__span-14-474"><a id="__codelineno-14-474" name="__codelineno-14-474" href="#__codelineno-14-474"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;=&quot;</span> <span class="o">*</span> <span class="mi">50</span><span class="p">)</span>
</span><span id="__span-14-475"><a id="__codelineno-14-475" name="__codelineno-14-475" href="#__codelineno-14-475"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Features enabled:&quot;</span><span class="p">)</span>
</span><span id="__span-14-476"><a id="__codelineno-14-476" name="__codelineno-14-476" href="#__codelineno-14-476"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;âœ… RESTful API endpoints&quot;</span><span class="p">)</span>
</span><span id="__span-14-477"><a id="__codelineno-14-477" name="__codelineno-14-477" href="#__codelineno-14-477"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;âœ… JWT authentication&quot;</span><span class="p">)</span>
</span><span id="__span-14-478"><a id="__codelineno-14-478" name="__codelineno-14-478" href="#__codelineno-14-478"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;âœ… Database operations&quot;</span><span class="p">)</span> 
</span><span id="__span-14-479"><a id="__codelineno-14-479" name="__codelineno-14-479" href="#__codelineno-14-479"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;âœ… Security headers&quot;</span><span class="p">)</span>
</span><span id="__span-14-480"><a id="__codelineno-14-480" name="__codelineno-14-480" href="#__codelineno-14-480"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;âœ… Analytics tracking&quot;</span><span class="p">)</span>
</span><span id="__span-14-481"><a id="__codelineno-14-481" name="__codelineno-14-481" href="#__codelineno-14-481"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;âœ… Error handling&quot;</span><span class="p">)</span>
</span><span id="__span-14-482"><a id="__codelineno-14-482" name="__codelineno-14-482" href="#__codelineno-14-482"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;âœ… Request logging&quot;</span><span class="p">)</span>
</span><span id="__span-14-483"><a id="__codelineno-14-483" name="__codelineno-14-483" href="#__codelineno-14-483"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">API Endpoints:&quot;</span><span class="p">)</span>
</span><span id="__span-14-484"><a id="__codelineno-14-484" name="__codelineno-14-484" href="#__codelineno-14-484"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;POST /api/register - User registration&quot;</span><span class="p">)</span>
</span><span id="__span-14-485"><a id="__codelineno-14-485" name="__codelineno-14-485" href="#__codelineno-14-485"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;POST /api/login - User login&quot;</span><span class="p">)</span>
</span><span id="__span-14-486"><a id="__codelineno-14-486" name="__codelineno-14-486" href="#__codelineno-14-486"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;GET /api/posts - List posts&quot;</span><span class="p">)</span>
</span><span id="__span-14-487"><a id="__codelineno-14-487" name="__codelineno-14-487" href="#__codelineno-14-487"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;POST /api/posts - Create post&quot;</span><span class="p">)</span>
</span><span id="__span-14-488"><a id="__codelineno-14-488" name="__codelineno-14-488" href="#__codelineno-14-488"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;GET /api/posts/&lt;id&gt; - Get specific post&quot;</span><span class="p">)</span>
</span><span id="__span-14-489"><a id="__codelineno-14-489" name="__codelineno-14-489" href="#__codelineno-14-489"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;PUT /api/posts/&lt;id&gt; - Update post&quot;</span><span class="p">)</span>
</span><span id="__span-14-490"><a id="__codelineno-14-490" name="__codelineno-14-490" href="#__codelineno-14-490"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;DELETE /api/posts/&lt;id&gt; - Delete post&quot;</span><span class="p">)</span>
</span><span id="__span-14-491"><a id="__codelineno-14-491" name="__codelineno-14-491" href="#__codelineno-14-491"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;GET /api/analytics - Analytics data&quot;</span><span class="p">)</span>
</span><span id="__span-14-492"><a id="__codelineno-14-492" name="__codelineno-14-492" href="#__codelineno-14-492"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="s2">&quot;=&quot;</span><span class="o">*</span><span class="mi">50</span><span class="p">)</span>
</span><span id="__span-14-493"><a id="__codelineno-14-493" name="__codelineno-14-493" href="#__codelineno-14-493"></a>
</span><span id="__span-14-494"><a id="__codelineno-14-494" name="__codelineno-14-494" href="#__codelineno-14-494"></a>        <span class="c1"># Create sample data</span>
</span><span id="__span-14-495"><a id="__codelineno-14-495" name="__codelineno-14-495" href="#__codelineno-14-495"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">create_sample_data</span><span class="p">()</span>
</span><span id="__span-14-496"><a id="__codelineno-14-496" name="__codelineno-14-496" href="#__codelineno-14-496"></a>
</span><span id="__span-14-497"><a id="__codelineno-14-497" name="__codelineno-14-497" href="#__codelineno-14-497"></a>        <span class="c1"># Run server</span>
</span><span id="__span-14-498"><a id="__codelineno-14-498" name="__codelineno-14-498" href="#__codelineno-14-498"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">host</span><span class="o">=</span><span class="s1">&#39;0.0.0.0&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">5000</span><span class="p">)</span>
</span><span id="__span-14-499"><a id="__codelineno-14-499" name="__codelineno-14-499" href="#__codelineno-14-499"></a>
</span><span id="__span-14-500"><a id="__codelineno-14-500" name="__codelineno-14-500" href="#__codelineno-14-500"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">create_sample_data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-14-501"><a id="__codelineno-14-501" name="__codelineno-14-501" href="#__codelineno-14-501"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Create sample data for demonstration&quot;&quot;&quot;</span>
</span><span id="__span-14-502"><a id="__codelineno-14-502" name="__codelineno-14-502" href="#__codelineno-14-502"></a>
</span><span id="__span-14-503"><a id="__codelineno-14-503" name="__codelineno-14-503" href="#__codelineno-14-503"></a>        <span class="c1"># Create sample users</span>
</span><span id="__span-14-504"><a id="__codelineno-14-504" name="__codelineno-14-504" href="#__codelineno-14-504"></a>        <span class="n">sample_users</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="__span-14-505"><a id="__codelineno-14-505" name="__codelineno-14-505" href="#__codelineno-14-505"></a>            <span class="p">(</span><span class="s1">&#39;admin&#39;</span><span class="p">,</span> <span class="s1">&#39;admin@example.com&#39;</span><span class="p">,</span> <span class="s1">&#39;SecurePassword123!&#39;</span><span class="p">,</span> <span class="s1">&#39;admin&#39;</span><span class="p">),</span>
</span><span id="__span-14-506"><a id="__codelineno-14-506" name="__codelineno-14-506" href="#__codelineno-14-506"></a>            <span class="p">(</span><span class="s1">&#39;john_doe&#39;</span><span class="p">,</span> <span class="s1">&#39;john@example.com&#39;</span><span class="p">,</span> <span class="s1">&#39;MyPassword456!&#39;</span><span class="p">,</span> <span class="s1">&#39;user&#39;</span><span class="p">),</span>
</span><span id="__span-14-507"><a id="__codelineno-14-507" name="__codelineno-14-507" href="#__codelineno-14-507"></a>            <span class="p">(</span><span class="s1">&#39;jane_smith&#39;</span><span class="p">,</span> <span class="s1">&#39;jane@example.com&#39;</span><span class="p">,</span> <span class="s1">&#39;AnotherPass789!&#39;</span><span class="p">,</span> <span class="s1">&#39;user&#39;</span><span class="p">)</span>
</span><span id="__span-14-508"><a id="__codelineno-14-508" name="__codelineno-14-508" href="#__codelineno-14-508"></a>        <span class="p">]</span>
</span><span id="__span-14-509"><a id="__codelineno-14-509" name="__codelineno-14-509" href="#__codelineno-14-509"></a>
</span><span id="__span-14-510"><a id="__codelineno-14-510" name="__codelineno-14-510" href="#__codelineno-14-510"></a>        <span class="n">conn</span> <span class="o">=</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;webapp.db&#39;</span><span class="p">)</span>
</span><span id="__span-14-511"><a id="__codelineno-14-511" name="__codelineno-14-511" href="#__codelineno-14-511"></a>        <span class="n">cursor</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
</span><span id="__span-14-512"><a id="__codelineno-14-512" name="__codelineno-14-512" href="#__codelineno-14-512"></a>
</span><span id="__span-14-513"><a id="__codelineno-14-513" name="__codelineno-14-513" href="#__codelineno-14-513"></a>        <span class="k">for</span> <span class="n">username</span><span class="p">,</span> <span class="n">email</span><span class="p">,</span> <span class="n">password</span><span class="p">,</span> <span class="n">role</span> <span class="ow">in</span> <span class="n">sample_users</span><span class="p">:</span>
</span><span id="__span-14-514"><a id="__codelineno-14-514" name="__codelineno-14-514" href="#__codelineno-14-514"></a>            <span class="c1"># Check if user exists</span>
</span><span id="__span-14-515"><a id="__codelineno-14-515" name="__codelineno-14-515" href="#__codelineno-14-515"></a>            <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;SELECT id FROM users WHERE username = ?&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">username</span><span class="p">,))</span>
</span><span id="__span-14-516"><a id="__codelineno-14-516" name="__codelineno-14-516" href="#__codelineno-14-516"></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchone</span><span class="p">():</span>
</span><span id="__span-14-517"><a id="__codelineno-14-517" name="__codelineno-14-517" href="#__codelineno-14-517"></a>                <span class="n">password_hash</span> <span class="o">=</span> <span class="n">generate_password_hash</span><span class="p">(</span><span class="n">password</span><span class="p">)</span>
</span><span id="__span-14-518"><a id="__codelineno-14-518" name="__codelineno-14-518" href="#__codelineno-14-518"></a>                <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
</span><span id="__span-14-519"><a id="__codelineno-14-519" name="__codelineno-14-519" href="#__codelineno-14-519"></a><span class="s1">                    INSERT INTO users (username, email, password_hash, role)</span>
</span><span id="__span-14-520"><a id="__codelineno-14-520" name="__codelineno-14-520" href="#__codelineno-14-520"></a><span class="s1">                    VALUES (?, ?, ?, ?)</span>
</span><span id="__span-14-521"><a id="__codelineno-14-521" name="__codelineno-14-521" href="#__codelineno-14-521"></a><span class="s1">                &#39;&#39;&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">username</span><span class="p">,</span> <span class="n">email</span><span class="p">,</span> <span class="n">password_hash</span><span class="p">,</span> <span class="n">role</span><span class="p">))</span>
</span><span id="__span-14-522"><a id="__codelineno-14-522" name="__codelineno-14-522" href="#__codelineno-14-522"></a>                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ğŸ“ Sample user created: </span><span class="si">{</span><span class="n">username</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-14-523"><a id="__codelineno-14-523" name="__codelineno-14-523" href="#__codelineno-14-523"></a>
</span><span id="__span-14-524"><a id="__codelineno-14-524" name="__codelineno-14-524" href="#__codelineno-14-524"></a>        <span class="c1"># Create sample posts</span>
</span><span id="__span-14-525"><a id="__codelineno-14-525" name="__codelineno-14-525" href="#__codelineno-14-525"></a>        <span class="n">sample_posts</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="__span-14-526"><a id="__codelineno-14-526" name="__codelineno-14-526" href="#__codelineno-14-526"></a>            <span class="p">(</span><span class="s1">&#39;Welcome to Our Blog&#39;</span><span class="p">,</span> <span class="s1">&#39;This is our first blog post!&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
</span><span id="__span-14-527"><a id="__codelineno-14-527" name="__codelineno-14-527" href="#__codelineno-14-527"></a>            <span class="p">(</span><span class="s1">&#39;Web Development Tips&#39;</span><span class="p">,</span> <span class="s1">&#39;Here are some great tips for web developers...&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>
</span><span id="__span-14-528"><a id="__codelineno-14-528" name="__codelineno-14-528" href="#__codelineno-14-528"></a>            <span class="p">(</span><span class="s1">&#39;Modern JavaScript Features&#39;</span><span class="p">,</span> <span class="s1">&#39;ES2021 brings exciting new features...&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
</span><span id="__span-14-529"><a id="__codelineno-14-529" name="__codelineno-14-529" href="#__codelineno-14-529"></a>        <span class="p">]</span>
</span><span id="__span-14-530"><a id="__codelineno-14-530" name="__codelineno-14-530" href="#__codelineno-14-530"></a>
</span><span id="__span-14-531"><a id="__codelineno-14-531" name="__codelineno-14-531" href="#__codelineno-14-531"></a>        <span class="k">for</span> <span class="n">title</span><span class="p">,</span> <span class="n">content</span><span class="p">,</span> <span class="n">author_id</span> <span class="ow">in</span> <span class="n">sample_posts</span><span class="p">:</span>
</span><span id="__span-14-532"><a id="__codelineno-14-532" name="__codelineno-14-532" href="#__codelineno-14-532"></a>            <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;SELECT id FROM posts WHERE title = ?&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">title</span><span class="p">,))</span>
</span><span id="__span-14-533"><a id="__codelineno-14-533" name="__codelineno-14-533" href="#__codelineno-14-533"></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchone</span><span class="p">():</span>
</span><span id="__span-14-534"><a id="__codelineno-14-534" name="__codelineno-14-534" href="#__codelineno-14-534"></a>                <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
</span><span id="__span-14-535"><a id="__codelineno-14-535" name="__codelineno-14-535" href="#__codelineno-14-535"></a><span class="s1">                    INSERT INTO posts (title, content, author_id, published)</span>
</span><span id="__span-14-536"><a id="__codelineno-14-536" name="__codelineno-14-536" href="#__codelineno-14-536"></a><span class="s1">                    VALUES (?, ?, ?, 1)</span>
</span><span id="__span-14-537"><a id="__codelineno-14-537" name="__codelineno-14-537" href="#__codelineno-14-537"></a><span class="s1">                &#39;&#39;&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">title</span><span class="p">,</span> <span class="n">content</span><span class="p">,</span> <span class="n">author_id</span><span class="p">))</span>
</span><span id="__span-14-538"><a id="__codelineno-14-538" name="__codelineno-14-538" href="#__codelineno-14-538"></a>                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ğŸ“„ Sample post created: </span><span class="si">{</span><span class="n">title</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-14-539"><a id="__codelineno-14-539" name="__codelineno-14-539" href="#__codelineno-14-539"></a>
</span><span id="__span-14-540"><a id="__codelineno-14-540" name="__codelineno-14-540" href="#__codelineno-14-540"></a>        <span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
</span><span id="__span-14-541"><a id="__codelineno-14-541" name="__codelineno-14-541" href="#__codelineno-14-541"></a>        <span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span id="__span-14-542"><a id="__codelineno-14-542" name="__codelineno-14-542" href="#__codelineno-14-542"></a>
</span><span id="__span-14-543"><a id="__codelineno-14-543" name="__codelineno-14-543" href="#__codelineno-14-543"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">render_json_response</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
</span><span id="__span-14-544"><a id="__codelineno-14-544" name="__codelineno-14-544" href="#__codelineno-14-544"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Helper to render JSON responses&quot;&quot;&quot;</span>
</span><span id="__span-14-545"><a id="__codelineno-14-545" name="__codelineno-14-545" href="#__codelineno-14-545"></a>        <span class="k">return</span> <span class="n">jsonify</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</span><span id="__span-14-546"><a id="__codelineno-14-546" name="__codelineno-14-546" href="#__codelineno-14-546"></a>
</span><span id="__span-14-547"><a id="__codelineno-14-547" name="__codelineno-14-547" href="#__codelineno-14-547"></a><span class="c1"># Additional utility functions for the web application</span>
</span><span id="__span-14-548"><a id="__codelineno-14-548" name="__codelineno-14-548" href="#__codelineno-14-548"></a><span class="k">def</span><span class="w"> </span><span class="nf">validate_password</span><span class="p">(</span><span class="n">password</span><span class="p">):</span>
</span><span id="__span-14-549"><a id="__codelineno-14-549" name="__codelineno-14-549" href="#__codelineno-14-549"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Validate password strength&quot;&quot;&quot;</span>
</span><span id="__span-14-550"><a id="__codelineno-14-550" name="__codelineno-14-550" href="#__codelineno-14-550"></a>
</span><span id="__span-14-551"><a id="__codelineno-14-551" name="__codelineno-14-551" href="#__codelineno-14-551"></a>    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">password</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">8</span><span class="p">:</span>
</span><span id="__span-14-552"><a id="__codelineno-14-552" name="__codelineno-14-552" href="#__codelineno-14-552"></a>        <span class="k">return</span> <span class="kc">False</span>
</span><span id="__span-14-553"><a id="__codelineno-14-553" name="__codelineno-14-553" href="#__codelineno-14-553"></a>
</span><span id="__span-14-554"><a id="__codelineno-14-554" name="__codelineno-14-554" href="#__codelineno-14-554"></a>    <span class="n">has_upper</span> <span class="o">=</span> <span class="nb">any</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">isupper</span><span class="p">()</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">password</span><span class="p">)</span>
</span><span id="__span-14-555"><a id="__codelineno-14-555" name="__codelineno-14-555" href="#__codelineno-14-555"></a>    <span class="n">has_lower</span> <span class="o">=</span> <span class="nb">any</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">islower</span><span class="p">()</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">password</span><span class="p">)</span>
</span><span id="__span-14-556"><a id="__codelineno-14-556" name="__codelineno-14-556" href="#__codelineno-14-556"></a>    <span class="n">has_digit</span> <span class="o">=</span> <span class="nb">any</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">isdigit</span><span class="p">()</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">password</span><span class="p">)</span>
</span><span id="__span-14-557"><a id="__codelineno-14-557" name="__codelineno-14-557" href="#__codelineno-14-557"></a>    <span class="n">has_special</span> <span class="o">=</span> <span class="nb">any</span><span class="p">(</span><span class="n">c</span> <span class="ow">in</span> <span class="s1">&#39;!@#$%^&amp;*()_+-=[]</span><span class="si">{}</span><span class="s1">|;:,.&lt;&gt;?&#39;</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">password</span><span class="p">)</span>
</span><span id="__span-14-558"><a id="__codelineno-14-558" name="__codelineno-14-558" href="#__codelineno-14-558"></a>
</span><span id="__span-14-559"><a id="__codelineno-14-559" name="__codelineno-14-559" href="#__codelineno-14-559"></a>    <span class="k">return</span> <span class="n">has_upper</span> <span class="ow">and</span> <span class="n">has_lower</span> <span class="ow">and</span> <span class="n">has_digit</span> <span class="ow">and</span> <span class="n">has_special</span>
</span><span id="__span-14-560"><a id="__codelineno-14-560" name="__codelineno-14-560" href="#__codelineno-14-560"></a>
</span><span id="__span-14-561"><a id="__codelineno-14-561" name="__codelineno-14-561" href="#__codelineno-14-561"></a><span class="c1"># Create and run the web application</span>
</span><span id="__span-14-562"><a id="__codelineno-14-562" name="__codelineno-14-562" href="#__codelineno-14-562"></a><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
</span><span id="__span-14-563"><a id="__codelineno-14-563" name="__codelineno-14-563" href="#__codelineno-14-563"></a>    <span class="n">app</span> <span class="o">=</span> <span class="n">ModernWebApplication</span><span class="p">()</span>
</span><span id="__span-14-564"><a id="__codelineno-14-564" name="__codelineno-14-564" href="#__codelineno-14-564"></a>
</span><span id="__span-14-565"><a id="__codelineno-14-565" name="__codelineno-14-565" href="#__codelineno-14-565"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;ğŸŒ MODERN WEB APPLICATION DEMO&quot;</span><span class="p">)</span>
</span><span id="__span-14-566"><a id="__codelineno-14-566" name="__codelineno-14-566" href="#__codelineno-14-566"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Complete full-stack application with authentication, API, and database!&quot;</span><span class="p">)</span>
</span><span id="__span-14-567"><a id="__codelineno-14-567" name="__codelineno-14-567" href="#__codelineno-14-567"></a>    <span class="nb">print</span><span class="p">()</span>
</span><span id="__span-14-568"><a id="__codelineno-14-568" name="__codelineno-14-568" href="#__codelineno-14-568"></a>
</span><span id="__span-14-569"><a id="__codelineno-14-569" name="__codelineno-14-569" href="#__codelineno-14-569"></a>    <span class="c1"># You can uncomment the line below to run the actual web server</span>
</span><span id="__span-14-570"><a id="__codelineno-14-570" name="__codelineno-14-570" href="#__codelineno-14-570"></a>    <span class="c1"># app.run_development_server()</span>
</span><span id="__span-14-571"><a id="__codelineno-14-571" name="__codelineno-14-571" href="#__codelineno-14-571"></a>
</span><span id="__span-14-572"><a id="__codelineno-14-572" name="__codelineno-14-572" href="#__codelineno-14-572"></a>    <span class="c1"># For now, just show the features</span>
</span><span id="__span-14-573"><a id="__codelineno-14-573" name="__codelineno-14-573" href="#__codelineno-14-573"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;âœ… Web application configured with:&quot;</span><span class="p">)</span>
</span><span id="__span-14-574"><a id="__codelineno-14-574" name="__codelineno-14-574" href="#__codelineno-14-574"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;   â€¢ RESTful API endpoints&quot;</span><span class="p">)</span>
</span><span id="__span-14-575"><a id="__codelineno-14-575" name="__codelineno-14-575" href="#__codelineno-14-575"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;   â€¢ JWT authentication &amp; authorization&quot;</span><span class="p">)</span>
</span><span id="__span-14-576"><a id="__codelineno-14-576" name="__codelineno-14-576" href="#__codelineno-14-576"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;   â€¢ SQLite database with proper schema&quot;</span><span class="p">)</span>
</span><span id="__span-14-577"><a id="__codelineno-14-577" name="__codelineno-14-577" href="#__codelineno-14-577"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;   â€¢ Security headers &amp; CORS&quot;</span><span class="p">)</span>
</span><span id="__span-14-578"><a id="__codelineno-14-578" name="__codelineno-14-578" href="#__codelineno-14-578"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;   â€¢ Analytics tracking&quot;</span><span class="p">)</span>
</span><span id="__span-14-579"><a id="__codelineno-14-579" name="__codelineno-14-579" href="#__codelineno-14-579"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;   â€¢ Error handling &amp; logging&quot;</span><span class="p">)</span>
</span><span id="__span-14-580"><a id="__codelineno-14-580" name="__codelineno-14-580" href="#__codelineno-14-580"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;   â€¢ Input validation &amp; sanitization&quot;</span><span class="p">)</span>
</span><span id="__span-14-581"><a id="__codelineno-14-581" name="__codelineno-14-581" href="#__codelineno-14-581"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">ğŸ’¡ This demonstrates enterprise-grade web application architecture!&quot;</span><span class="p">)</span>
</span></code></pre></div>
</details>
<details class="example">
<summary>Frontend JavaScript Integration</summary>
<div class="language-javascript highlight"><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="c1">// Modern frontend JavaScript for the web application</span>
</span><span id="__span-15-2"><a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a><span class="kd">class</span><span class="w"> </span><span class="nx">WebAppClient</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-15-3"><a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a><span class="w">    </span><span class="kr">constructor</span><span class="p">(</span><span class="nx">baseUrl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;http://localhost:5000&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-15-4"><a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">baseUrl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">baseUrl</span><span class="p">;</span>
</span><span id="__span-15-5"><a id="__codelineno-15-5" name="__codelineno-15-5" href="#__codelineno-15-5"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">token</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">localStorage</span><span class="p">.</span><span class="nx">getItem</span><span class="p">(</span><span class="s1">&#39;authToken&#39;</span><span class="p">);</span>
</span><span id="__span-15-6"><a id="__codelineno-15-6" name="__codelineno-15-6" href="#__codelineno-15-6"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">currentUser</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span>
</span><span id="__span-15-7"><a id="__codelineno-15-7" name="__codelineno-15-7" href="#__codelineno-15-7"></a>
</span><span id="__span-15-8"><a id="__codelineno-15-8" name="__codelineno-15-8" href="#__codelineno-15-8"></a><span class="w">        </span><span class="c1">// Initialize the application</span>
</span><span id="__span-15-9"><a id="__codelineno-15-9" name="__codelineno-15-9" href="#__codelineno-15-9"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">init</span><span class="p">();</span>
</span><span id="__span-15-10"><a id="__codelineno-15-10" name="__codelineno-15-10" href="#__codelineno-15-10"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-15-11"><a id="__codelineno-15-11" name="__codelineno-15-11" href="#__codelineno-15-11"></a>
</span><span id="__span-15-12"><a id="__codelineno-15-12" name="__codelineno-15-12" href="#__codelineno-15-12"></a><span class="w">    </span><span class="k">async</span><span class="w"> </span><span class="nx">init</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-15-13"><a id="__codelineno-15-13" name="__codelineno-15-13" href="#__codelineno-15-13"></a><span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;ğŸš€ Initializing Web App Client&#39;</span><span class="p">);</span>
</span><span id="__span-15-14"><a id="__codelineno-15-14" name="__codelineno-15-14" href="#__codelineno-15-14"></a>
</span><span id="__span-15-15"><a id="__codelineno-15-15" name="__codelineno-15-15" href="#__codelineno-15-15"></a><span class="w">        </span><span class="c1">// Check if user is already logged in</span>
</span><span id="__span-15-16"><a id="__codelineno-15-16" name="__codelineno-15-16" href="#__codelineno-15-16"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">token</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-15-17"><a id="__codelineno-15-17" name="__codelineno-15-17" href="#__codelineno-15-17"></a><span class="w">            </span><span class="k">await</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">loadCurrentUser</span><span class="p">();</span>
</span><span id="__span-15-18"><a id="__codelineno-15-18" name="__codelineno-15-18" href="#__codelineno-15-18"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-15-19"><a id="__codelineno-15-19" name="__codelineno-15-19" href="#__codelineno-15-19"></a>
</span><span id="__span-15-20"><a id="__codelineno-15-20" name="__codelineno-15-20" href="#__codelineno-15-20"></a><span class="w">        </span><span class="c1">// Setup event listeners</span>
</span><span id="__span-15-21"><a id="__codelineno-15-21" name="__codelineno-15-21" href="#__codelineno-15-21"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">setupEventListeners</span><span class="p">();</span>
</span><span id="__span-15-22"><a id="__codelineno-15-22" name="__codelineno-15-22" href="#__codelineno-15-22"></a>
</span><span id="__span-15-23"><a id="__codelineno-15-23" name="__codelineno-15-23" href="#__codelineno-15-23"></a><span class="w">        </span><span class="c1">// Load initial data</span>
</span><span id="__span-15-24"><a id="__codelineno-15-24" name="__codelineno-15-24" href="#__codelineno-15-24"></a><span class="w">        </span><span class="k">await</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">loadPosts</span><span class="p">();</span>
</span><span id="__span-15-25"><a id="__codelineno-15-25" name="__codelineno-15-25" href="#__codelineno-15-25"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-15-26"><a id="__codelineno-15-26" name="__codelineno-15-26" href="#__codelineno-15-26"></a>
</span><span id="__span-15-27"><a id="__codelineno-15-27" name="__codelineno-15-27" href="#__codelineno-15-27"></a><span class="w">    </span><span class="nx">setupEventListeners</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-15-28"><a id="__codelineno-15-28" name="__codelineno-15-28" href="#__codelineno-15-28"></a><span class="w">        </span><span class="c1">// Login form</span>
</span><span id="__span-15-29"><a id="__codelineno-15-29" name="__codelineno-15-29" href="#__codelineno-15-29"></a><span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">loginForm</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;loginForm&#39;</span><span class="p">);</span>
</span><span id="__span-15-30"><a id="__codelineno-15-30" name="__codelineno-15-30" href="#__codelineno-15-30"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">loginForm</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-15-31"><a id="__codelineno-15-31" name="__codelineno-15-31" href="#__codelineno-15-31"></a><span class="w">            </span><span class="nx">loginForm</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;submit&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="nx">e</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-15-32"><a id="__codelineno-15-32" name="__codelineno-15-32" href="#__codelineno-15-32"></a><span class="w">                </span><span class="nx">e</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
</span><span id="__span-15-33"><a id="__codelineno-15-33" name="__codelineno-15-33" href="#__codelineno-15-33"></a><span class="w">                </span><span class="k">this</span><span class="p">.</span><span class="nx">handleLogin</span><span class="p">();</span>
</span><span id="__span-15-34"><a id="__codelineno-15-34" name="__codelineno-15-34" href="#__codelineno-15-34"></a><span class="w">            </span><span class="p">});</span>
</span><span id="__span-15-35"><a id="__codelineno-15-35" name="__codelineno-15-35" href="#__codelineno-15-35"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-15-36"><a id="__codelineno-15-36" name="__codelineno-15-36" href="#__codelineno-15-36"></a>
</span><span id="__span-15-37"><a id="__codelineno-15-37" name="__codelineno-15-37" href="#__codelineno-15-37"></a><span class="w">        </span><span class="c1">// Register form</span>
</span><span id="__span-15-38"><a id="__codelineno-15-38" name="__codelineno-15-38" href="#__codelineno-15-38"></a><span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">registerForm</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;registerForm&#39;</span><span class="p">);</span>
</span><span id="__span-15-39"><a id="__codelineno-15-39" name="__codelineno-15-39" href="#__codelineno-15-39"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">registerForm</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-15-40"><a id="__codelineno-15-40" name="__codelineno-15-40" href="#__codelineno-15-40"></a><span class="w">            </span><span class="nx">registerForm</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;submit&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="nx">e</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-15-41"><a id="__codelineno-15-41" name="__codelineno-15-41" href="#__codelineno-15-41"></a><span class="w">                </span><span class="nx">e</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
</span><span id="__span-15-42"><a id="__codelineno-15-42" name="__codelineno-15-42" href="#__codelineno-15-42"></a><span class="w">                </span><span class="k">this</span><span class="p">.</span><span class="nx">handleRegister</span><span class="p">();</span>
</span><span id="__span-15-43"><a id="__codelineno-15-43" name="__codelineno-15-43" href="#__codelineno-15-43"></a><span class="w">            </span><span class="p">});</span>
</span><span id="__span-15-44"><a id="__codelineno-15-44" name="__codelineno-15-44" href="#__codelineno-15-44"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-15-45"><a id="__codelineno-15-45" name="__codelineno-15-45" href="#__codelineno-15-45"></a>
</span><span id="__span-15-46"><a id="__codelineno-15-46" name="__codelineno-15-46" href="#__codelineno-15-46"></a><span class="w">        </span><span class="c1">// New post form</span>
</span><span id="__span-15-47"><a id="__codelineno-15-47" name="__codelineno-15-47" href="#__codelineno-15-47"></a><span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">postForm</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;postForm&#39;</span><span class="p">);</span>
</span><span id="__span-15-48"><a id="__codelineno-15-48" name="__codelineno-15-48" href="#__codelineno-15-48"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">postForm</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-15-49"><a id="__codelineno-15-49" name="__codelineno-15-49" href="#__codelineno-15-49"></a><span class="w">            </span><span class="nx">postForm</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;submit&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="nx">e</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-15-50"><a id="__codelineno-15-50" name="__codelineno-15-50" href="#__codelineno-15-50"></a><span class="w">                </span><span class="nx">e</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
</span><span id="__span-15-51"><a id="__codelineno-15-51" name="__codelineno-15-51" href="#__codelineno-15-51"></a><span class="w">                </span><span class="k">this</span><span class="p">.</span><span class="nx">handleCreatePost</span><span class="p">();</span>
</span><span id="__span-15-52"><a id="__codelineno-15-52" name="__codelineno-15-52" href="#__codelineno-15-52"></a><span class="w">            </span><span class="p">});</span>
</span><span id="__span-15-53"><a id="__codelineno-15-53" name="__codelineno-15-53" href="#__codelineno-15-53"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-15-54"><a id="__codelineno-15-54" name="__codelineno-15-54" href="#__codelineno-15-54"></a>
</span><span id="__span-15-55"><a id="__codelineno-15-55" name="__codelineno-15-55" href="#__codelineno-15-55"></a><span class="w">        </span><span class="c1">// Logout button</span>
</span><span id="__span-15-56"><a id="__codelineno-15-56" name="__codelineno-15-56" href="#__codelineno-15-56"></a><span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">logoutBtn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;logoutBtn&#39;</span><span class="p">);</span>
</span><span id="__span-15-57"><a id="__codelineno-15-57" name="__codelineno-15-57" href="#__codelineno-15-57"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">logoutBtn</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-15-58"><a id="__codelineno-15-58" name="__codelineno-15-58" href="#__codelineno-15-58"></a><span class="w">            </span><span class="nx">logoutBtn</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;click&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-15-59"><a id="__codelineno-15-59" name="__codelineno-15-59" href="#__codelineno-15-59"></a><span class="w">                </span><span class="k">this</span><span class="p">.</span><span class="nx">handleLogout</span><span class="p">();</span>
</span><span id="__span-15-60"><a id="__codelineno-15-60" name="__codelineno-15-60" href="#__codelineno-15-60"></a><span class="w">            </span><span class="p">});</span>
</span><span id="__span-15-61"><a id="__codelineno-15-61" name="__codelineno-15-61" href="#__codelineno-15-61"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-15-62"><a id="__codelineno-15-62" name="__codelineno-15-62" href="#__codelineno-15-62"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-15-63"><a id="__codelineno-15-63" name="__codelineno-15-63" href="#__codelineno-15-63"></a>
</span><span id="__span-15-64"><a id="__codelineno-15-64" name="__codelineno-15-64" href="#__codelineno-15-64"></a><span class="w">    </span><span class="k">async</span><span class="w"> </span><span class="nx">makeRequest</span><span class="p">(</span><span class="nx">endpoint</span><span class="p">,</span><span class="w"> </span><span class="nx">options</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{})</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-15-65"><a id="__codelineno-15-65" name="__codelineno-15-65" href="#__codelineno-15-65"></a><span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">url</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sb">`</span><span class="si">${</span><span class="k">this</span><span class="p">.</span><span class="nx">baseUrl</span><span class="si">}${</span><span class="nx">endpoint</span><span class="si">}</span><span class="sb">`</span><span class="p">;</span>
</span><span id="__span-15-66"><a id="__codelineno-15-66" name="__codelineno-15-66" href="#__codelineno-15-66"></a>
</span><span id="__span-15-67"><a id="__codelineno-15-67" name="__codelineno-15-67" href="#__codelineno-15-67"></a><span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">defaultOptions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-15-68"><a id="__codelineno-15-68" name="__codelineno-15-68" href="#__codelineno-15-68"></a><span class="w">            </span><span class="nx">headers</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-15-69"><a id="__codelineno-15-69" name="__codelineno-15-69" href="#__codelineno-15-69"></a><span class="w">                </span><span class="s1">&#39;Content-Type&#39;</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;application/json&#39;</span><span class="p">,</span>
</span><span id="__span-15-70"><a id="__codelineno-15-70" name="__codelineno-15-70" href="#__codelineno-15-70"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-15-71"><a id="__codelineno-15-71" name="__codelineno-15-71" href="#__codelineno-15-71"></a><span class="w">        </span><span class="p">};</span>
</span><span id="__span-15-72"><a id="__codelineno-15-72" name="__codelineno-15-72" href="#__codelineno-15-72"></a>
</span><span id="__span-15-73"><a id="__codelineno-15-73" name="__codelineno-15-73" href="#__codelineno-15-73"></a><span class="w">        </span><span class="c1">// Add auth token if available</span>
</span><span id="__span-15-74"><a id="__codelineno-15-74" name="__codelineno-15-74" href="#__codelineno-15-74"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">token</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-15-75"><a id="__codelineno-15-75" name="__codelineno-15-75" href="#__codelineno-15-75"></a><span class="w">            </span><span class="nx">defaultOptions</span><span class="p">.</span><span class="nx">headers</span><span class="p">[</span><span class="s1">&#39;Authorization&#39;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sb">`Bearer </span><span class="si">${</span><span class="k">this</span><span class="p">.</span><span class="nx">token</span><span class="si">}</span><span class="sb">`</span><span class="p">;</span>
</span><span id="__span-15-76"><a id="__codelineno-15-76" name="__codelineno-15-76" href="#__codelineno-15-76"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-15-77"><a id="__codelineno-15-77" name="__codelineno-15-77" href="#__codelineno-15-77"></a>
</span><span id="__span-15-78"><a id="__codelineno-15-78" name="__codelineno-15-78" href="#__codelineno-15-78"></a><span class="w">        </span><span class="c1">// Merge options</span>
</span><span id="__span-15-79"><a id="__codelineno-15-79" name="__codelineno-15-79" href="#__codelineno-15-79"></a><span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">finalOptions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-15-80"><a id="__codelineno-15-80" name="__codelineno-15-80" href="#__codelineno-15-80"></a><span class="w">            </span><span class="p">...</span><span class="nx">defaultOptions</span><span class="p">,</span>
</span><span id="__span-15-81"><a id="__codelineno-15-81" name="__codelineno-15-81" href="#__codelineno-15-81"></a><span class="w">            </span><span class="p">...</span><span class="nx">options</span><span class="p">,</span>
</span><span id="__span-15-82"><a id="__codelineno-15-82" name="__codelineno-15-82" href="#__codelineno-15-82"></a><span class="w">            </span><span class="nx">headers</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-15-83"><a id="__codelineno-15-83" name="__codelineno-15-83" href="#__codelineno-15-83"></a><span class="w">                </span><span class="p">...</span><span class="nx">defaultOptions</span><span class="p">.</span><span class="nx">headers</span><span class="p">,</span>
</span><span id="__span-15-84"><a id="__codelineno-15-84" name="__codelineno-15-84" href="#__codelineno-15-84"></a><span class="w">                </span><span class="p">...</span><span class="nx">options</span><span class="p">.</span><span class="nx">headers</span>
</span><span id="__span-15-85"><a id="__codelineno-15-85" name="__codelineno-15-85" href="#__codelineno-15-85"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-15-86"><a id="__codelineno-15-86" name="__codelineno-15-86" href="#__codelineno-15-86"></a><span class="w">        </span><span class="p">};</span>
</span><span id="__span-15-87"><a id="__codelineno-15-87" name="__codelineno-15-87" href="#__codelineno-15-87"></a>
</span><span id="__span-15-88"><a id="__codelineno-15-88" name="__codelineno-15-88" href="#__codelineno-15-88"></a><span class="w">        </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-15-89"><a id="__codelineno-15-89" name="__codelineno-15-89" href="#__codelineno-15-89"></a><span class="w">            </span><span class="kd">const</span><span class="w"> </span><span class="nx">response</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">fetch</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span><span class="w"> </span><span class="nx">finalOptions</span><span class="p">);</span>
</span><span id="__span-15-90"><a id="__codelineno-15-90" name="__codelineno-15-90" href="#__codelineno-15-90"></a><span class="w">            </span><span class="kd">const</span><span class="w"> </span><span class="nx">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">response</span><span class="p">.</span><span class="nx">json</span><span class="p">();</span>
</span><span id="__span-15-91"><a id="__codelineno-15-91" name="__codelineno-15-91" href="#__codelineno-15-91"></a>
</span><span id="__span-15-92"><a id="__codelineno-15-92" name="__codelineno-15-92" href="#__codelineno-15-92"></a><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">response</span><span class="p">.</span><span class="nx">ok</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-15-93"><a id="__codelineno-15-93" name="__codelineno-15-93" href="#__codelineno-15-93"></a><span class="w">                </span><span class="k">throw</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="ne">Error</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">error</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="s1">&#39;Request failed&#39;</span><span class="p">);</span>
</span><span id="__span-15-94"><a id="__codelineno-15-94" name="__codelineno-15-94" href="#__codelineno-15-94"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-15-95"><a id="__codelineno-15-95" name="__codelineno-15-95" href="#__codelineno-15-95"></a>
</span><span id="__span-15-96"><a id="__codelineno-15-96" name="__codelineno-15-96" href="#__codelineno-15-96"></a><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="nx">data</span><span class="p">;</span>
</span><span id="__span-15-97"><a id="__codelineno-15-97" name="__codelineno-15-97" href="#__codelineno-15-97"></a><span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="nx">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-15-98"><a id="__codelineno-15-98" name="__codelineno-15-98" href="#__codelineno-15-98"></a><span class="w">            </span><span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s1">&#39;API Request failed:&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">error</span><span class="p">);</span>
</span><span id="__span-15-99"><a id="__codelineno-15-99" name="__codelineno-15-99" href="#__codelineno-15-99"></a><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="nx">showNotification</span><span class="p">(</span><span class="sb">`Error: </span><span class="si">${</span><span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="si">}</span><span class="sb">`</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;error&#39;</span><span class="p">);</span>
</span><span id="__span-15-100"><a id="__codelineno-15-100" name="__codelineno-15-100" href="#__codelineno-15-100"></a><span class="w">            </span><span class="k">throw</span><span class="w"> </span><span class="nx">error</span><span class="p">;</span>
</span><span id="__span-15-101"><a id="__codelineno-15-101" name="__codelineno-15-101" href="#__codelineno-15-101"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-15-102"><a id="__codelineno-15-102" name="__codelineno-15-102" href="#__codelineno-15-102"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-15-103"><a id="__codelineno-15-103" name="__codelineno-15-103" href="#__codelineno-15-103"></a>
</span><span id="__span-15-104"><a id="__codelineno-15-104" name="__codelineno-15-104" href="#__codelineno-15-104"></a><span class="w">    </span><span class="k">async</span><span class="w"> </span><span class="nx">handleLogin</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-15-105"><a id="__codelineno-15-105" name="__codelineno-15-105" href="#__codelineno-15-105"></a><span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">username</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;username&#39;</span><span class="p">).</span><span class="nx">value</span><span class="p">;</span>
</span><span id="__span-15-106"><a id="__codelineno-15-106" name="__codelineno-15-106" href="#__codelineno-15-106"></a><span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">password</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;password&#39;</span><span class="p">).</span><span class="nx">value</span><span class="p">;</span>
</span><span id="__span-15-107"><a id="__codelineno-15-107" name="__codelineno-15-107" href="#__codelineno-15-107"></a>
</span><span id="__span-15-108"><a id="__codelineno-15-108" name="__codelineno-15-108" href="#__codelineno-15-108"></a><span class="w">        </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-15-109"><a id="__codelineno-15-109" name="__codelineno-15-109" href="#__codelineno-15-109"></a><span class="w">            </span><span class="kd">const</span><span class="w"> </span><span class="nx">response</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">makeRequest</span><span class="p">(</span><span class="s1">&#39;/api/login&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-15-110"><a id="__codelineno-15-110" name="__codelineno-15-110" href="#__codelineno-15-110"></a><span class="w">                </span><span class="nx">method</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;POST&#39;</span><span class="p">,</span>
</span><span id="__span-15-111"><a id="__codelineno-15-111" name="__codelineno-15-111" href="#__codelineno-15-111"></a><span class="w">                </span><span class="nx">body</span><span class="o">:</span><span class="w"> </span><span class="nb">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span><span class="w"> </span><span class="nx">username</span><span class="p">,</span><span class="w"> </span><span class="nx">password</span><span class="w"> </span><span class="p">})</span>
</span><span id="__span-15-112"><a id="__codelineno-15-112" name="__codelineno-15-112" href="#__codelineno-15-112"></a><span class="w">            </span><span class="p">});</span>
</span><span id="__span-15-113"><a id="__codelineno-15-113" name="__codelineno-15-113" href="#__codelineno-15-113"></a>
</span><span id="__span-15-114"><a id="__codelineno-15-114" name="__codelineno-15-114" href="#__codelineno-15-114"></a><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="nx">token</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">response</span><span class="p">.</span><span class="nx">token</span><span class="p">;</span>
</span><span id="__span-15-115"><a id="__codelineno-15-115" name="__codelineno-15-115" href="#__codelineno-15-115"></a><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="nx">currentUser</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">response</span><span class="p">.</span><span class="nx">user</span><span class="p">;</span>
</span><span id="__span-15-116"><a id="__codelineno-15-116" name="__codelineno-15-116" href="#__codelineno-15-116"></a>
</span><span id="__span-15-117"><a id="__codelineno-15-117" name="__codelineno-15-117" href="#__codelineno-15-117"></a><span class="w">            </span><span class="c1">// Store token</span>
</span><span id="__span-15-118"><a id="__codelineno-15-118" name="__codelineno-15-118" href="#__codelineno-15-118"></a><span class="w">            </span><span class="nx">localStorage</span><span class="p">.</span><span class="nx">setItem</span><span class="p">(</span><span class="s1">&#39;authToken&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">token</span><span class="p">);</span>
</span><span id="__span-15-119"><a id="__codelineno-15-119" name="__codelineno-15-119" href="#__codelineno-15-119"></a>
</span><span id="__span-15-120"><a id="__codelineno-15-120" name="__codelineno-15-120" href="#__codelineno-15-120"></a><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="nx">showNotification</span><span class="p">(</span><span class="s1">&#39;Login successful!&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;success&#39;</span><span class="p">);</span>
</span><span id="__span-15-121"><a id="__codelineno-15-121" name="__codelineno-15-121" href="#__codelineno-15-121"></a><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="nx">updateUI</span><span class="p">();</span>
</span><span id="__span-15-122"><a id="__codelineno-15-122" name="__codelineno-15-122" href="#__codelineno-15-122"></a>
</span><span id="__span-15-123"><a id="__codelineno-15-123" name="__codelineno-15-123" href="#__codelineno-15-123"></a><span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="nx">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-15-124"><a id="__codelineno-15-124" name="__codelineno-15-124" href="#__codelineno-15-124"></a><span class="w">            </span><span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s1">&#39;Login failed:&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">error</span><span class="p">);</span>
</span><span id="__span-15-125"><a id="__codelineno-15-125" name="__codelineno-15-125" href="#__codelineno-15-125"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-15-126"><a id="__codelineno-15-126" name="__codelineno-15-126" href="#__codelineno-15-126"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-15-127"><a id="__codelineno-15-127" name="__codelineno-15-127" href="#__codelineno-15-127"></a>
</span><span id="__span-15-128"><a id="__codelineno-15-128" name="__codelineno-15-128" href="#__codelineno-15-128"></a><span class="w">    </span><span class="k">async</span><span class="w"> </span><span class="nx">handleRegister</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-15-129"><a id="__codelineno-15-129" name="__codelineno-15-129" href="#__codelineno-15-129"></a><span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">username</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;regUsername&#39;</span><span class="p">).</span><span class="nx">value</span><span class="p">;</span>
</span><span id="__span-15-130"><a id="__codelineno-15-130" name="__codelineno-15-130" href="#__codelineno-15-130"></a><span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">email</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;regEmail&#39;</span><span class="p">).</span><span class="nx">value</span><span class="p">;</span>
</span><span id="__span-15-131"><a id="__codelineno-15-131" name="__codelineno-15-131" href="#__codelineno-15-131"></a><span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">password</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;regPassword&#39;</span><span class="p">).</span><span class="nx">value</span><span class="p">;</span>
</span><span id="__span-15-132"><a id="__codelineno-15-132" name="__codelineno-15-132" href="#__codelineno-15-132"></a>
</span><span id="__span-15-133"><a id="__codelineno-15-133" name="__codelineno-15-133" href="#__codelineno-15-133"></a><span class="w">        </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-15-134"><a id="__codelineno-15-134" name="__codelineno-15-134" href="#__codelineno-15-134"></a><span class="w">            </span><span class="k">await</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">makeRequest</span><span class="p">(</span><span class="s1">&#39;/api/register&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-15-135"><a id="__codelineno-15-135" name="__codelineno-15-135" href="#__codelineno-15-135"></a><span class="w">                </span><span class="nx">method</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;POST&#39;</span><span class="p">,</span>
</span><span id="__span-15-136"><a id="__codelineno-15-136" name="__codelineno-15-136" href="#__codelineno-15-136"></a><span class="w">                </span><span class="nx">body</span><span class="o">:</span><span class="w"> </span><span class="nb">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span><span class="w"> </span><span class="nx">username</span><span class="p">,</span><span class="w"> </span><span class="nx">email</span><span class="p">,</span><span class="w"> </span><span class="nx">password</span><span class="w"> </span><span class="p">})</span>
</span><span id="__span-15-137"><a id="__codelineno-15-137" name="__codelineno-15-137" href="#__codelineno-15-137"></a><span class="w">            </span><span class="p">});</span>
</span><span id="__span-15-138"><a id="__codelineno-15-138" name="__codelineno-15-138" href="#__codelineno-15-138"></a>
</span><span id="__span-15-139"><a id="__codelineno-15-139" name="__codelineno-15-139" href="#__codelineno-15-139"></a><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="nx">showNotification</span><span class="p">(</span><span class="s1">&#39;Registration successful! Please login.&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;success&#39;</span><span class="p">);</span>
</span><span id="__span-15-140"><a id="__codelineno-15-140" name="__codelineno-15-140" href="#__codelineno-15-140"></a>
</span><span id="__span-15-141"><a id="__codelineno-15-141" name="__codelineno-15-141" href="#__codelineno-15-141"></a><span class="w">            </span><span class="c1">// Switch to login form</span>
</span><span id="__span-15-142"><a id="__codelineno-15-142" name="__codelineno-15-142" href="#__codelineno-15-142"></a><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="nx">showLoginForm</span><span class="p">();</span>
</span><span id="__span-15-143"><a id="__codelineno-15-143" name="__codelineno-15-143" href="#__codelineno-15-143"></a>
</span><span id="__span-15-144"><a id="__codelineno-15-144" name="__codelineno-15-144" href="#__codelineno-15-144"></a><span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="nx">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-15-145"><a id="__codelineno-15-145" name="__codelineno-15-145" href="#__codelineno-15-145"></a><span class="w">            </span><span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s1">&#39;Registration failed:&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">error</span><span class="p">);</span>
</span><span id="__span-15-146"><a id="__codelineno-15-146" name="__codelineno-15-146" href="#__codelineno-15-146"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-15-147"><a id="__codelineno-15-147" name="__codelineno-15-147" href="#__codelineno-15-147"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-15-148"><a id="__codelineno-15-148" name="__codelineno-15-148" href="#__codelineno-15-148"></a>
</span><span id="__span-15-149"><a id="__codelineno-15-149" name="__codelineno-15-149" href="#__codelineno-15-149"></a><span class="w">    </span><span class="k">async</span><span class="w"> </span><span class="nx">handleCreatePost</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-15-150"><a id="__codelineno-15-150" name="__codelineno-15-150" href="#__codelineno-15-150"></a><span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;postTitle&#39;</span><span class="p">).</span><span class="nx">value</span><span class="p">;</span>
</span><span id="__span-15-151"><a id="__codelineno-15-151" name="__codelineno-15-151" href="#__codelineno-15-151"></a><span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">content</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;postContent&#39;</span><span class="p">).</span><span class="nx">value</span><span class="p">;</span>
</span><span id="__span-15-152"><a id="__codelineno-15-152" name="__codelineno-15-152" href="#__codelineno-15-152"></a>
</span><span id="__span-15-153"><a id="__codelineno-15-153" name="__codelineno-15-153" href="#__codelineno-15-153"></a><span class="w">        </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-15-154"><a id="__codelineno-15-154" name="__codelineno-15-154" href="#__codelineno-15-154"></a><span class="w">            </span><span class="k">await</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">makeRequest</span><span class="p">(</span><span class="s1">&#39;/api/posts&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-15-155"><a id="__codelineno-15-155" name="__codelineno-15-155" href="#__codelineno-15-155"></a><span class="w">                </span><span class="nx">method</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;POST&#39;</span><span class="p">,</span>
</span><span id="__span-15-156"><a id="__codelineno-15-156" name="__codelineno-15-156" href="#__codelineno-15-156"></a><span class="w">                </span><span class="nx">body</span><span class="o">:</span><span class="w"> </span><span class="nb">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span><span class="w"> </span><span class="nx">title</span><span class="p">,</span><span class="w"> </span><span class="nx">content</span><span class="w"> </span><span class="p">})</span>
</span><span id="__span-15-157"><a id="__codelineno-15-157" name="__codelineno-15-157" href="#__codelineno-15-157"></a><span class="w">            </span><span class="p">});</span>
</span><span id="__span-15-158"><a id="__codelineno-15-158" name="__codelineno-15-158" href="#__codelineno-15-158"></a>
</span><span id="__span-15-159"><a id="__codelineno-15-159" name="__codelineno-15-159" href="#__codelineno-15-159"></a><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="nx">showNotification</span><span class="p">(</span><span class="s1">&#39;Post created successfully!&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;success&#39;</span><span class="p">);</span>
</span><span id="__span-15-160"><a id="__codelineno-15-160" name="__codelineno-15-160" href="#__codelineno-15-160"></a>
</span><span id="__span-15-161"><a id="__codelineno-15-161" name="__codelineno-15-161" href="#__codelineno-15-161"></a><span class="w">            </span><span class="c1">// Clear form</span>
</span><span id="__span-15-162"><a id="__codelineno-15-162" name="__codelineno-15-162" href="#__codelineno-15-162"></a><span class="w">            </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;postForm&#39;</span><span class="p">).</span><span class="nx">reset</span><span class="p">();</span>
</span><span id="__span-15-163"><a id="__codelineno-15-163" name="__codelineno-15-163" href="#__codelineno-15-163"></a>
</span><span id="__span-15-164"><a id="__codelineno-15-164" name="__codelineno-15-164" href="#__codelineno-15-164"></a><span class="w">            </span><span class="c1">// Reload posts</span>
</span><span id="__span-15-165"><a id="__codelineno-15-165" name="__codelineno-15-165" href="#__codelineno-15-165"></a><span class="w">            </span><span class="k">await</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">loadPosts</span><span class="p">();</span>
</span><span id="__span-15-166"><a id="__codelineno-15-166" name="__codelineno-15-166" href="#__codelineno-15-166"></a>
</span><span id="__span-15-167"><a id="__codelineno-15-167" name="__codelineno-15-167" href="#__codelineno-15-167"></a><span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="nx">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-15-168"><a id="__codelineno-15-168" name="__codelineno-15-168" href="#__codelineno-15-168"></a><span class="w">            </span><span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s1">&#39;Create post failed:&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">error</span><span class="p">);</span>
</span><span id="__span-15-169"><a id="__codelineno-15-169" name="__codelineno-15-169" href="#__codelineno-15-169"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-15-170"><a id="__codelineno-15-170" name="__codelineno-15-170" href="#__codelineno-15-170"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-15-171"><a id="__codelineno-15-171" name="__codelineno-15-171" href="#__codelineno-15-171"></a>
</span><span id="__span-15-172"><a id="__codelineno-15-172" name="__codelineno-15-172" href="#__codelineno-15-172"></a><span class="w">    </span><span class="nx">handleLogout</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-15-173"><a id="__codelineno-15-173" name="__codelineno-15-173" href="#__codelineno-15-173"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">token</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span>
</span><span id="__span-15-174"><a id="__codelineno-15-174" name="__codelineno-15-174" href="#__codelineno-15-174"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">currentUser</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span>
</span><span id="__span-15-175"><a id="__codelineno-15-175" name="__codelineno-15-175" href="#__codelineno-15-175"></a><span class="w">        </span><span class="nx">localStorage</span><span class="p">.</span><span class="nx">removeItem</span><span class="p">(</span><span class="s1">&#39;authToken&#39;</span><span class="p">);</span>
</span><span id="__span-15-176"><a id="__codelineno-15-176" name="__codelineno-15-176" href="#__codelineno-15-176"></a>
</span><span id="__span-15-177"><a id="__codelineno-15-177" name="__codelineno-15-177" href="#__codelineno-15-177"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">showNotification</span><span class="p">(</span><span class="s1">&#39;Logged out successfully&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;info&#39;</span><span class="p">);</span>
</span><span id="__span-15-178"><a id="__codelineno-15-178" name="__codelineno-15-178" href="#__codelineno-15-178"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">updateUI</span><span class="p">();</span>
</span><span id="__span-15-179"><a id="__codelineno-15-179" name="__codelineno-15-179" href="#__codelineno-15-179"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-15-180"><a id="__codelineno-15-180" name="__codelineno-15-180" href="#__codelineno-15-180"></a>
</span><span id="__span-15-181"><a id="__codelineno-15-181" name="__codelineno-15-181" href="#__codelineno-15-181"></a><span class="w">    </span><span class="k">async</span><span class="w"> </span><span class="nx">loadPosts</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-15-182"><a id="__codelineno-15-182" name="__codelineno-15-182" href="#__codelineno-15-182"></a><span class="w">        </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-15-183"><a id="__codelineno-15-183" name="__codelineno-15-183" href="#__codelineno-15-183"></a><span class="w">            </span><span class="kd">const</span><span class="w"> </span><span class="nx">response</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">makeRequest</span><span class="p">(</span><span class="s1">&#39;/api/posts&#39;</span><span class="p">);</span>
</span><span id="__span-15-184"><a id="__codelineno-15-184" name="__codelineno-15-184" href="#__codelineno-15-184"></a><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="nx">displayPosts</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">posts</span><span class="p">);</span>
</span><span id="__span-15-185"><a id="__codelineno-15-185" name="__codelineno-15-185" href="#__codelineno-15-185"></a><span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="nx">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-15-186"><a id="__codelineno-15-186" name="__codelineno-15-186" href="#__codelineno-15-186"></a><span class="w">            </span><span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s1">&#39;Failed to load posts:&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">error</span><span class="p">);</span>
</span><span id="__span-15-187"><a id="__codelineno-15-187" name="__codelineno-15-187" href="#__codelineno-15-187"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-15-188"><a id="__codelineno-15-188" name="__codelineno-15-188" href="#__codelineno-15-188"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-15-189"><a id="__codelineno-15-189" name="__codelineno-15-189" href="#__codelineno-15-189"></a>
</span><span id="__span-15-190"><a id="__codelineno-15-190" name="__codelineno-15-190" href="#__codelineno-15-190"></a><span class="w">    </span><span class="nx">displayPosts</span><span class="p">(</span><span class="nx">posts</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-15-191"><a id="__codelineno-15-191" name="__codelineno-15-191" href="#__codelineno-15-191"></a><span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">postsContainer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;postsContainer&#39;</span><span class="p">);</span>
</span><span id="__span-15-192"><a id="__codelineno-15-192" name="__codelineno-15-192" href="#__codelineno-15-192"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">postsContainer</span><span class="p">)</span><span class="w"> </span><span class="k">return</span><span class="p">;</span>
</span><span id="__span-15-193"><a id="__codelineno-15-193" name="__codelineno-15-193" href="#__codelineno-15-193"></a>
</span><span id="__span-15-194"><a id="__codelineno-15-194" name="__codelineno-15-194" href="#__codelineno-15-194"></a><span class="w">        </span><span class="nx">postsContainer</span><span class="p">.</span><span class="nx">innerHTML</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="p">;</span>
</span><span id="__span-15-195"><a id="__codelineno-15-195" name="__codelineno-15-195" href="#__codelineno-15-195"></a>
</span><span id="__span-15-196"><a id="__codelineno-15-196" name="__codelineno-15-196" href="#__codelineno-15-196"></a><span class="w">        </span><span class="nx">posts</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">post</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-15-197"><a id="__codelineno-15-197" name="__codelineno-15-197" href="#__codelineno-15-197"></a><span class="w">            </span><span class="kd">const</span><span class="w"> </span><span class="nx">postElement</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;div&#39;</span><span class="p">);</span>
</span><span id="__span-15-198"><a id="__codelineno-15-198" name="__codelineno-15-198" href="#__codelineno-15-198"></a><span class="w">            </span><span class="nx">postElement</span><span class="p">.</span><span class="nx">className</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;post&#39;</span><span class="p">;</span>
</span><span id="__span-15-199"><a id="__codelineno-15-199" name="__codelineno-15-199" href="#__codelineno-15-199"></a><span class="w">            </span><span class="nx">postElement</span><span class="p">.</span><span class="nx">innerHTML</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sb">`</span>
</span><span id="__span-15-200"><a id="__codelineno-15-200" name="__codelineno-15-200" href="#__codelineno-15-200"></a><span class="sb">                &lt;div class=&quot;post-header&quot;&gt;</span>
</span><span id="__span-15-201"><a id="__codelineno-15-201" name="__codelineno-15-201" href="#__codelineno-15-201"></a><span class="sb">                    &lt;h3&gt;</span><span class="si">${</span><span class="k">this</span><span class="p">.</span><span class="nx">escapeHtml</span><span class="p">(</span><span class="nx">post</span><span class="p">.</span><span class="nx">title</span><span class="p">)</span><span class="si">}</span><span class="sb">&lt;/h3&gt;</span>
</span><span id="__span-15-202"><a id="__codelineno-15-202" name="__codelineno-15-202" href="#__codelineno-15-202"></a><span class="sb">                    &lt;span class=&quot;post-meta&quot;&gt;</span>
</span><span id="__span-15-203"><a id="__codelineno-15-203" name="__codelineno-15-203" href="#__codelineno-15-203"></a><span class="sb">                        By </span><span class="si">${</span><span class="k">this</span><span class="p">.</span><span class="nx">escapeHtml</span><span class="p">(</span><span class="nx">post</span><span class="p">.</span><span class="nx">author</span><span class="p">)</span><span class="si">}</span><span class="sb"> | </span>
</span><span id="__span-15-204"><a id="__codelineno-15-204" name="__codelineno-15-204" href="#__codelineno-15-204"></a><span class="sb">                        </span><span class="si">${</span><span class="ow">new</span><span class="w"> </span><span class="nb">Date</span><span class="p">(</span><span class="nx">post</span><span class="p">.</span><span class="nx">created_at</span><span class="p">).</span><span class="nx">toLocaleDateString</span><span class="p">()</span><span class="si">}</span><span class="sb"> |</span>
</span><span id="__span-15-205"><a id="__codelineno-15-205" name="__codelineno-15-205" href="#__codelineno-15-205"></a><span class="sb">                        </span><span class="si">${</span><span class="nx">post</span><span class="p">.</span><span class="nx">views</span><span class="si">}</span><span class="sb"> views</span>
</span><span id="__span-15-206"><a id="__codelineno-15-206" name="__codelineno-15-206" href="#__codelineno-15-206"></a><span class="sb">                    &lt;/span&gt;</span>
</span><span id="__span-15-207"><a id="__codelineno-15-207" name="__codelineno-15-207" href="#__codelineno-15-207"></a><span class="sb">                &lt;/div&gt;</span>
</span><span id="__span-15-208"><a id="__codelineno-15-208" name="__codelineno-15-208" href="#__codelineno-15-208"></a><span class="sb">                &lt;div class=&quot;post-content&quot;&gt;</span>
</span><span id="__span-15-209"><a id="__codelineno-15-209" name="__codelineno-15-209" href="#__codelineno-15-209"></a><span class="sb">                    </span><span class="si">${</span><span class="k">this</span><span class="p">.</span><span class="nx">escapeHtml</span><span class="p">(</span><span class="nx">post</span><span class="p">.</span><span class="nx">content</span><span class="p">)</span><span class="si">}</span>
</span><span id="__span-15-210"><a id="__codelineno-15-210" name="__codelineno-15-210" href="#__codelineno-15-210"></a><span class="sb">                &lt;/div&gt;</span>
</span><span id="__span-15-211"><a id="__codelineno-15-211" name="__codelineno-15-211" href="#__codelineno-15-211"></a><span class="sb">                &lt;div class=&quot;post-actions&quot;&gt;</span>
</span><span id="__span-15-212"><a id="__codelineno-15-212" name="__codelineno-15-212" href="#__codelineno-15-212"></a><span class="sb">                    &lt;button onclick=&quot;webApp.viewPost(</span><span class="si">${</span><span class="nx">post</span><span class="p">.</span><span class="nx">id</span><span class="si">}</span><span class="sb">)&quot;&gt;Read More&lt;/button&gt;</span>
</span><span id="__span-15-213"><a id="__codelineno-15-213" name="__codelineno-15-213" href="#__codelineno-15-213"></a><span class="sb">                    </span><span class="si">${</span><span class="k">this</span><span class="p">.</span><span class="nx">canEditPost</span><span class="p">(</span><span class="nx">post</span><span class="p">)</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="sb">`</span>
</span><span id="__span-15-214"><a id="__codelineno-15-214" name="__codelineno-15-214" href="#__codelineno-15-214"></a><span class="sb">                        &lt;button onclick=&quot;webApp.editPost(</span><span class="si">${</span><span class="nx">post</span><span class="p">.</span><span class="nx">id</span><span class="si">}</span><span class="sb">)&quot;&gt;Edit&lt;/button&gt;</span>
</span><span id="__span-15-215"><a id="__codelineno-15-215" name="__codelineno-15-215" href="#__codelineno-15-215"></a><span class="sb">                        &lt;button onclick=&quot;webApp.deletePost(</span><span class="si">${</span><span class="nx">post</span><span class="p">.</span><span class="nx">id</span><span class="si">}</span><span class="sb">)&quot; class=&quot;danger&quot;&gt;Delete&lt;/button&gt;</span>
</span><span id="__span-15-216"><a id="__codelineno-15-216" name="__codelineno-15-216" href="#__codelineno-15-216"></a><span class="sb">                    `</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="si">}</span>
</span><span id="__span-15-217"><a id="__codelineno-15-217" name="__codelineno-15-217" href="#__codelineno-15-217"></a><span class="sb">                &lt;/div&gt;</span>
</span><span id="__span-15-218"><a id="__codelineno-15-218" name="__codelineno-15-218" href="#__codelineno-15-218"></a><span class="sb">            `</span><span class="p">;</span>
</span><span id="__span-15-219"><a id="__codelineno-15-219" name="__codelineno-15-219" href="#__codelineno-15-219"></a><span class="w">            </span><span class="nx">postsContainer</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">postElement</span><span class="p">);</span>
</span><span id="__span-15-220"><a id="__codelineno-15-220" name="__codelineno-15-220" href="#__codelineno-15-220"></a><span class="w">        </span><span class="p">});</span>
</span><span id="__span-15-221"><a id="__codelineno-15-221" name="__codelineno-15-221" href="#__codelineno-15-221"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-15-222"><a id="__codelineno-15-222" name="__codelineno-15-222" href="#__codelineno-15-222"></a>
</span><span id="__span-15-223"><a id="__codelineno-15-223" name="__codelineno-15-223" href="#__codelineno-15-223"></a><span class="w">    </span><span class="nx">canEditPost</span><span class="p">(</span><span class="nx">post</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-15-224"><a id="__codelineno-15-224" name="__codelineno-15-224" href="#__codelineno-15-224"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">currentUser</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>
</span><span id="__span-15-225"><a id="__codelineno-15-225" name="__codelineno-15-225" href="#__codelineno-15-225"></a><span class="w">               </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">currentUser</span><span class="p">.</span><span class="nx">id</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="nx">post</span><span class="p">.</span><span class="nx">author_id</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">currentUser</span><span class="p">.</span><span class="nx">role</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;admin&#39;</span><span class="p">);</span>
</span><span id="__span-15-226"><a id="__codelineno-15-226" name="__codelineno-15-226" href="#__codelineno-15-226"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-15-227"><a id="__codelineno-15-227" name="__codelineno-15-227" href="#__codelineno-15-227"></a>
</span><span id="__span-15-228"><a id="__codelineno-15-228" name="__codelineno-15-228" href="#__codelineno-15-228"></a><span class="w">    </span><span class="k">async</span><span class="w"> </span><span class="nx">deletePost</span><span class="p">(</span><span class="nx">postId</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-15-229"><a id="__codelineno-15-229" name="__codelineno-15-229" href="#__codelineno-15-229"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">confirm</span><span class="p">(</span><span class="s1">&#39;Are you sure you want to delete this post?&#39;</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-15-230"><a id="__codelineno-15-230" name="__codelineno-15-230" href="#__codelineno-15-230"></a><span class="w">            </span><span class="k">return</span><span class="p">;</span>
</span><span id="__span-15-231"><a id="__codelineno-15-231" name="__codelineno-15-231" href="#__codelineno-15-231"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-15-232"><a id="__codelineno-15-232" name="__codelineno-15-232" href="#__codelineno-15-232"></a>
</span><span id="__span-15-233"><a id="__codelineno-15-233" name="__codelineno-15-233" href="#__codelineno-15-233"></a><span class="w">        </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-15-234"><a id="__codelineno-15-234" name="__codelineno-15-234" href="#__codelineno-15-234"></a><span class="w">            </span><span class="k">await</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">makeRequest</span><span class="p">(</span><span class="sb">`/api/posts/</span><span class="si">${</span><span class="nx">postId</span><span class="si">}</span><span class="sb">`</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-15-235"><a id="__codelineno-15-235" name="__codelineno-15-235" href="#__codelineno-15-235"></a><span class="w">                </span><span class="nx">method</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;DELETE&#39;</span>
</span><span id="__span-15-236"><a id="__codelineno-15-236" name="__codelineno-15-236" href="#__codelineno-15-236"></a><span class="w">            </span><span class="p">});</span>
</span><span id="__span-15-237"><a id="__codelineno-15-237" name="__codelineno-15-237" href="#__codelineno-15-237"></a>
</span><span id="__span-15-238"><a id="__codelineno-15-238" name="__codelineno-15-238" href="#__codelineno-15-238"></a><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="nx">showNotification</span><span class="p">(</span><span class="s1">&#39;Post deleted successfully&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;success&#39;</span><span class="p">);</span>
</span><span id="__span-15-239"><a id="__codelineno-15-239" name="__codelineno-15-239" href="#__codelineno-15-239"></a><span class="w">            </span><span class="k">await</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">loadPosts</span><span class="p">();</span>
</span><span id="__span-15-240"><a id="__codelineno-15-240" name="__codelineno-15-240" href="#__codelineno-15-240"></a>
</span><span id="__span-15-241"><a id="__codelineno-15-241" name="__codelineno-15-241" href="#__codelineno-15-241"></a><span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="nx">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-15-242"><a id="__codelineno-15-242" name="__codelineno-15-242" href="#__codelineno-15-242"></a><span class="w">            </span><span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s1">&#39;Delete post failed:&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">error</span><span class="p">);</span>
</span><span id="__span-15-243"><a id="__codelineno-15-243" name="__codelineno-15-243" href="#__codelineno-15-243"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-15-244"><a id="__codelineno-15-244" name="__codelineno-15-244" href="#__codelineno-15-244"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-15-245"><a id="__codelineno-15-245" name="__codelineno-15-245" href="#__codelineno-15-245"></a>
</span><span id="__span-15-246"><a id="__codelineno-15-246" name="__codelineno-15-246" href="#__codelineno-15-246"></a><span class="w">    </span><span class="nx">updateUI</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-15-247"><a id="__codelineno-15-247" name="__codelineno-15-247" href="#__codelineno-15-247"></a><span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">authSection</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;authSection&#39;</span><span class="p">);</span>
</span><span id="__span-15-248"><a id="__codelineno-15-248" name="__codelineno-15-248" href="#__codelineno-15-248"></a><span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">userSection</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;userSection&#39;</span><span class="p">);</span>
</span><span id="__span-15-249"><a id="__codelineno-15-249" name="__codelineno-15-249" href="#__codelineno-15-249"></a><span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">createPostSection</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;createPostSection&#39;</span><span class="p">);</span>
</span><span id="__span-15-250"><a id="__codelineno-15-250" name="__codelineno-15-250" href="#__codelineno-15-250"></a>
</span><span id="__span-15-251"><a id="__codelineno-15-251" name="__codelineno-15-251" href="#__codelineno-15-251"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">currentUser</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-15-252"><a id="__codelineno-15-252" name="__codelineno-15-252" href="#__codelineno-15-252"></a><span class="w">            </span><span class="c1">// User is logged in</span>
</span><span id="__span-15-253"><a id="__codelineno-15-253" name="__codelineno-15-253" href="#__codelineno-15-253"></a><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">authSection</span><span class="p">)</span><span class="w"> </span><span class="nx">authSection</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;none&#39;</span><span class="p">;</span>
</span><span id="__span-15-254"><a id="__codelineno-15-254" name="__codelineno-15-254" href="#__codelineno-15-254"></a><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">userSection</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-15-255"><a id="__codelineno-15-255" name="__codelineno-15-255" href="#__codelineno-15-255"></a><span class="w">                </span><span class="nx">userSection</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;block&#39;</span><span class="p">;</span>
</span><span id="__span-15-256"><a id="__codelineno-15-256" name="__codelineno-15-256" href="#__codelineno-15-256"></a><span class="w">                </span><span class="nx">userSection</span><span class="p">.</span><span class="nx">innerHTML</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sb">`</span>
</span><span id="__span-15-257"><a id="__codelineno-15-257" name="__codelineno-15-257" href="#__codelineno-15-257"></a><span class="sb">                    &lt;p&gt;Welcome, </span><span class="si">${</span><span class="k">this</span><span class="p">.</span><span class="nx">escapeHtml</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">currentUser</span><span class="p">.</span><span class="nx">username</span><span class="p">)</span><span class="si">}</span><span class="sb">!&lt;/p&gt;</span>
</span><span id="__span-15-258"><a id="__codelineno-15-258" name="__codelineno-15-258" href="#__codelineno-15-258"></a><span class="sb">                    &lt;button id=&quot;logoutBtn&quot;&gt;Logout&lt;/button&gt;</span>
</span><span id="__span-15-259"><a id="__codelineno-15-259" name="__codelineno-15-259" href="#__codelineno-15-259"></a><span class="sb">                `</span><span class="p">;</span>
</span><span id="__span-15-260"><a id="__codelineno-15-260" name="__codelineno-15-260" href="#__codelineno-15-260"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-15-261"><a id="__codelineno-15-261" name="__codelineno-15-261" href="#__codelineno-15-261"></a><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">createPostSection</span><span class="p">)</span><span class="w"> </span><span class="nx">createPostSection</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;block&#39;</span><span class="p">;</span>
</span><span id="__span-15-262"><a id="__codelineno-15-262" name="__codelineno-15-262" href="#__codelineno-15-262"></a>
</span><span id="__span-15-263"><a id="__codelineno-15-263" name="__codelineno-15-263" href="#__codelineno-15-263"></a><span class="w">            </span><span class="c1">// Re-setup event listeners for new elements</span>
</span><span id="__span-15-264"><a id="__codelineno-15-264" name="__codelineno-15-264" href="#__codelineno-15-264"></a><span class="w">            </span><span class="kd">const</span><span class="w"> </span><span class="nx">logoutBtn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;logoutBtn&#39;</span><span class="p">);</span>
</span><span id="__span-15-265"><a id="__codelineno-15-265" name="__codelineno-15-265" href="#__codelineno-15-265"></a><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">logoutBtn</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-15-266"><a id="__codelineno-15-266" name="__codelineno-15-266" href="#__codelineno-15-266"></a><span class="w">                </span><span class="nx">logoutBtn</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;click&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">handleLogout</span><span class="p">());</span>
</span><span id="__span-15-267"><a id="__codelineno-15-267" name="__codelineno-15-267" href="#__codelineno-15-267"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-15-268"><a id="__codelineno-15-268" name="__codelineno-15-268" href="#__codelineno-15-268"></a><span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-15-269"><a id="__codelineno-15-269" name="__codelineno-15-269" href="#__codelineno-15-269"></a><span class="w">            </span><span class="c1">// User is not logged in</span>
</span><span id="__span-15-270"><a id="__codelineno-15-270" name="__codelineno-15-270" href="#__codelineno-15-270"></a><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">authSection</span><span class="p">)</span><span class="w"> </span><span class="nx">authSection</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;block&#39;</span><span class="p">;</span>
</span><span id="__span-15-271"><a id="__codelineno-15-271" name="__codelineno-15-271" href="#__codelineno-15-271"></a><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">userSection</span><span class="p">)</span><span class="w"> </span><span class="nx">userSection</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;none&#39;</span><span class="p">;</span>
</span><span id="__span-15-272"><a id="__codelineno-15-272" name="__codelineno-15-272" href="#__codelineno-15-272"></a><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">createPostSection</span><span class="p">)</span><span class="w"> </span><span class="nx">createPostSection</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;none&#39;</span><span class="p">;</span>
</span><span id="__span-15-273"><a id="__codelineno-15-273" name="__codelineno-15-273" href="#__codelineno-15-273"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-15-274"><a id="__codelineno-15-274" name="__codelineno-15-274" href="#__codelineno-15-274"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-15-275"><a id="__codelineno-15-275" name="__codelineno-15-275" href="#__codelineno-15-275"></a>
</span><span id="__span-15-276"><a id="__codelineno-15-276" name="__codelineno-15-276" href="#__codelineno-15-276"></a><span class="w">    </span><span class="nx">showNotification</span><span class="p">(</span><span class="nx">message</span><span class="p">,</span><span class="w"> </span><span class="nx">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;info&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-15-277"><a id="__codelineno-15-277" name="__codelineno-15-277" href="#__codelineno-15-277"></a><span class="w">        </span><span class="c1">// Create notification element</span>
</span><span id="__span-15-278"><a id="__codelineno-15-278" name="__codelineno-15-278" href="#__codelineno-15-278"></a><span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">notification</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;div&#39;</span><span class="p">);</span>
</span><span id="__span-15-279"><a id="__codelineno-15-279" name="__codelineno-15-279" href="#__codelineno-15-279"></a><span class="w">        </span><span class="nx">notification</span><span class="p">.</span><span class="nx">className</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sb">`notification </span><span class="si">${</span><span class="nx">type</span><span class="si">}</span><span class="sb">`</span><span class="p">;</span>
</span><span id="__span-15-280"><a id="__codelineno-15-280" name="__codelineno-15-280" href="#__codelineno-15-280"></a><span class="w">        </span><span class="nx">notification</span><span class="p">.</span><span class="nx">textContent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">message</span><span class="p">;</span>
</span><span id="__span-15-281"><a id="__codelineno-15-281" name="__codelineno-15-281" href="#__codelineno-15-281"></a>
</span><span id="__span-15-282"><a id="__codelineno-15-282" name="__codelineno-15-282" href="#__codelineno-15-282"></a><span class="w">        </span><span class="c1">// Add to page</span>
</span><span id="__span-15-283"><a id="__codelineno-15-283" name="__codelineno-15-283" href="#__codelineno-15-283"></a><span class="w">        </span><span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">notification</span><span class="p">);</span>
</span><span id="__span-15-284"><a id="__codelineno-15-284" name="__codelineno-15-284" href="#__codelineno-15-284"></a>
</span><span id="__span-15-285"><a id="__codelineno-15-285" name="__codelineno-15-285" href="#__codelineno-15-285"></a><span class="w">        </span><span class="c1">// Auto-remove after 3 seconds</span>
</span><span id="__span-15-286"><a id="__codelineno-15-286" name="__codelineno-15-286" href="#__codelineno-15-286"></a><span class="w">        </span><span class="nx">setTimeout</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-15-287"><a id="__codelineno-15-287" name="__codelineno-15-287" href="#__codelineno-15-287"></a><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">notification</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-15-288"><a id="__codelineno-15-288" name="__codelineno-15-288" href="#__codelineno-15-288"></a><span class="w">                </span><span class="nx">notification</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">removeChild</span><span class="p">(</span><span class="nx">notification</span><span class="p">);</span>
</span><span id="__span-15-289"><a id="__codelineno-15-289" name="__codelineno-15-289" href="#__codelineno-15-289"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-15-290"><a id="__codelineno-15-290" name="__codelineno-15-290" href="#__codelineno-15-290"></a><span class="w">        </span><span class="p">},</span><span class="w"> </span><span class="mf">3000</span><span class="p">);</span>
</span><span id="__span-15-291"><a id="__codelineno-15-291" name="__codelineno-15-291" href="#__codelineno-15-291"></a>
</span><span id="__span-15-292"><a id="__codelineno-15-292" name="__codelineno-15-292" href="#__codelineno-15-292"></a><span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`</span><span class="si">${</span><span class="nx">type</span><span class="p">.</span><span class="nx">toUpperCase</span><span class="p">()</span><span class="si">}</span><span class="sb">: </span><span class="si">${</span><span class="nx">message</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
</span><span id="__span-15-293"><a id="__codelineno-15-293" name="__codelineno-15-293" href="#__codelineno-15-293"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-15-294"><a id="__codelineno-15-294" name="__codelineno-15-294" href="#__codelineno-15-294"></a>
</span><span id="__span-15-295"><a id="__codelineno-15-295" name="__codelineno-15-295" href="#__codelineno-15-295"></a><span class="w">    </span><span class="nx">escapeHtml</span><span class="p">(</span><span class="nx">text</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-15-296"><a id="__codelineno-15-296" name="__codelineno-15-296" href="#__codelineno-15-296"></a><span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">div</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;div&#39;</span><span class="p">);</span>
</span><span id="__span-15-297"><a id="__codelineno-15-297" name="__codelineno-15-297" href="#__codelineno-15-297"></a><span class="w">        </span><span class="nx">div</span><span class="p">.</span><span class="nx">textContent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">text</span><span class="p">;</span>
</span><span id="__span-15-298"><a id="__codelineno-15-298" name="__codelineno-15-298" href="#__codelineno-15-298"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">div</span><span class="p">.</span><span class="nx">innerHTML</span><span class="p">;</span>
</span><span id="__span-15-299"><a id="__codelineno-15-299" name="__codelineno-15-299" href="#__codelineno-15-299"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-15-300"><a id="__codelineno-15-300" name="__codelineno-15-300" href="#__codelineno-15-300"></a><span class="p">}</span>
</span><span id="__span-15-301"><a id="__codelineno-15-301" name="__codelineno-15-301" href="#__codelineno-15-301"></a>
</span><span id="__span-15-302"><a id="__codelineno-15-302" name="__codelineno-15-302" href="#__codelineno-15-302"></a><span class="c1">// Progressive Web App (PWA) Features</span>
</span><span id="__span-15-303"><a id="__codelineno-15-303" name="__codelineno-15-303" href="#__codelineno-15-303"></a><span class="kd">class</span><span class="w"> </span><span class="nx">PWAManager</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-15-304"><a id="__codelineno-15-304" name="__codelineno-15-304" href="#__codelineno-15-304"></a><span class="w">    </span><span class="kr">constructor</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-15-305"><a id="__codelineno-15-305" name="__codelineno-15-305" href="#__codelineno-15-305"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">init</span><span class="p">();</span>
</span><span id="__span-15-306"><a id="__codelineno-15-306" name="__codelineno-15-306" href="#__codelineno-15-306"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-15-307"><a id="__codelineno-15-307" name="__codelineno-15-307" href="#__codelineno-15-307"></a>
</span><span id="__span-15-308"><a id="__codelineno-15-308" name="__codelineno-15-308" href="#__codelineno-15-308"></a><span class="w">    </span><span class="k">async</span><span class="w"> </span><span class="nx">init</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-15-309"><a id="__codelineno-15-309" name="__codelineno-15-309" href="#__codelineno-15-309"></a><span class="w">        </span><span class="c1">// Register service worker</span>
</span><span id="__span-15-310"><a id="__codelineno-15-310" name="__codelineno-15-310" href="#__codelineno-15-310"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="s1">&#39;serviceWorker&#39;</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="nx">navigator</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-15-311"><a id="__codelineno-15-311" name="__codelineno-15-311" href="#__codelineno-15-311"></a><span class="w">            </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-15-312"><a id="__codelineno-15-312" name="__codelineno-15-312" href="#__codelineno-15-312"></a><span class="w">                </span><span class="kd">const</span><span class="w"> </span><span class="nx">registration</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">navigator</span><span class="p">.</span><span class="nx">serviceWorker</span><span class="p">.</span><span class="nx">register</span><span class="p">(</span><span class="s1">&#39;/sw.js&#39;</span><span class="p">);</span>
</span><span id="__span-15-313"><a id="__codelineno-15-313" name="__codelineno-15-313" href="#__codelineno-15-313"></a><span class="w">                </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;âœ… Service Worker registered:&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">registration</span><span class="p">);</span>
</span><span id="__span-15-314"><a id="__codelineno-15-314" name="__codelineno-15-314" href="#__codelineno-15-314"></a><span class="w">            </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="nx">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-15-315"><a id="__codelineno-15-315" name="__codelineno-15-315" href="#__codelineno-15-315"></a><span class="w">                </span><span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s1">&#39;âŒ Service Worker registration failed:&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">error</span><span class="p">);</span>
</span><span id="__span-15-316"><a id="__codelineno-15-316" name="__codelineno-15-316" href="#__codelineno-15-316"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-15-317"><a id="__codelineno-15-317" name="__codelineno-15-317" href="#__codelineno-15-317"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-15-318"><a id="__codelineno-15-318" name="__codelineno-15-318" href="#__codelineno-15-318"></a>
</span><span id="__span-15-319"><a id="__codelineno-15-319" name="__codelineno-15-319" href="#__codelineno-15-319"></a><span class="w">        </span><span class="c1">// Handle install prompt</span>
</span><span id="__span-15-320"><a id="__codelineno-15-320" name="__codelineno-15-320" href="#__codelineno-15-320"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">setupInstallPrompt</span><span class="p">();</span>
</span><span id="__span-15-321"><a id="__codelineno-15-321" name="__codelineno-15-321" href="#__codelineno-15-321"></a>
</span><span id="__span-15-322"><a id="__codelineno-15-322" name="__codelineno-15-322" href="#__codelineno-15-322"></a><span class="w">        </span><span class="c1">// Handle offline/online events</span>
</span><span id="__span-15-323"><a id="__codelineno-15-323" name="__codelineno-15-323" href="#__codelineno-15-323"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">setupNetworkHandling</span><span class="p">();</span>
</span><span id="__span-15-324"><a id="__codelineno-15-324" name="__codelineno-15-324" href="#__codelineno-15-324"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-15-325"><a id="__codelineno-15-325" name="__codelineno-15-325" href="#__codelineno-15-325"></a>
</span><span id="__span-15-326"><a id="__codelineno-15-326" name="__codelineno-15-326" href="#__codelineno-15-326"></a><span class="w">    </span><span class="nx">setupInstallPrompt</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-15-327"><a id="__codelineno-15-327" name="__codelineno-15-327" href="#__codelineno-15-327"></a><span class="w">        </span><span class="kd">let</span><span class="w"> </span><span class="nx">deferredPrompt</span><span class="p">;</span>
</span><span id="__span-15-328"><a id="__codelineno-15-328" name="__codelineno-15-328" href="#__codelineno-15-328"></a>
</span><span id="__span-15-329"><a id="__codelineno-15-329" name="__codelineno-15-329" href="#__codelineno-15-329"></a><span class="w">        </span><span class="nb">window</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;beforeinstallprompt&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="nx">e</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-15-330"><a id="__codelineno-15-330" name="__codelineno-15-330" href="#__codelineno-15-330"></a><span class="w">            </span><span class="c1">// Prevent Chrome 67 and earlier from automatically showing the prompt</span>
</span><span id="__span-15-331"><a id="__codelineno-15-331" name="__codelineno-15-331" href="#__codelineno-15-331"></a><span class="w">            </span><span class="nx">e</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
</span><span id="__span-15-332"><a id="__codelineno-15-332" name="__codelineno-15-332" href="#__codelineno-15-332"></a><span class="w">            </span><span class="nx">deferredPrompt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">e</span><span class="p">;</span>
</span><span id="__span-15-333"><a id="__codelineno-15-333" name="__codelineno-15-333" href="#__codelineno-15-333"></a>
</span><span id="__span-15-334"><a id="__codelineno-15-334" name="__codelineno-15-334" href="#__codelineno-15-334"></a><span class="w">            </span><span class="c1">// Show custom install button</span>
</span><span id="__span-15-335"><a id="__codelineno-15-335" name="__codelineno-15-335" href="#__codelineno-15-335"></a><span class="w">            </span><span class="kd">const</span><span class="w"> </span><span class="nx">installBtn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;installBtn&#39;</span><span class="p">);</span>
</span><span id="__span-15-336"><a id="__codelineno-15-336" name="__codelineno-15-336" href="#__codelineno-15-336"></a><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">installBtn</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-15-337"><a id="__codelineno-15-337" name="__codelineno-15-337" href="#__codelineno-15-337"></a><span class="w">                </span><span class="nx">installBtn</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;block&#39;</span><span class="p">;</span>
</span><span id="__span-15-338"><a id="__codelineno-15-338" name="__codelineno-15-338" href="#__codelineno-15-338"></a><span class="w">                </span><span class="nx">installBtn</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;click&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-15-339"><a id="__codelineno-15-339" name="__codelineno-15-339" href="#__codelineno-15-339"></a><span class="w">                    </span><span class="nx">deferredPrompt</span><span class="p">.</span><span class="nx">prompt</span><span class="p">();</span>
</span><span id="__span-15-340"><a id="__codelineno-15-340" name="__codelineno-15-340" href="#__codelineno-15-340"></a><span class="w">                    </span><span class="nx">deferredPrompt</span><span class="p">.</span><span class="nx">userChoice</span><span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">choiceResult</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-15-341"><a id="__codelineno-15-341" name="__codelineno-15-341" href="#__codelineno-15-341"></a><span class="w">                        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">choiceResult</span><span class="p">.</span><span class="nx">outcome</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;accepted&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-15-342"><a id="__codelineno-15-342" name="__codelineno-15-342" href="#__codelineno-15-342"></a><span class="w">                            </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;âœ… User accepted the A2HS prompt&#39;</span><span class="p">);</span>
</span><span id="__span-15-343"><a id="__codelineno-15-343" name="__codelineno-15-343" href="#__codelineno-15-343"></a><span class="w">                        </span><span class="p">}</span>
</span><span id="__span-15-344"><a id="__codelineno-15-344" name="__codelineno-15-344" href="#__codelineno-15-344"></a><span class="w">                        </span><span class="nx">deferredPrompt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span>
</span><span id="__span-15-345"><a id="__codelineno-15-345" name="__codelineno-15-345" href="#__codelineno-15-345"></a><span class="w">                    </span><span class="p">});</span>
</span><span id="__span-15-346"><a id="__codelineno-15-346" name="__codelineno-15-346" href="#__codelineno-15-346"></a><span class="w">                </span><span class="p">});</span>
</span><span id="__span-15-347"><a id="__codelineno-15-347" name="__codelineno-15-347" href="#__codelineno-15-347"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-15-348"><a id="__codelineno-15-348" name="__codelineno-15-348" href="#__codelineno-15-348"></a><span class="w">        </span><span class="p">});</span>
</span><span id="__span-15-349"><a id="__codelineno-15-349" name="__codelineno-15-349" href="#__codelineno-15-349"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-15-350"><a id="__codelineno-15-350" name="__codelineno-15-350" href="#__codelineno-15-350"></a>
</span><span id="__span-15-351"><a id="__codelineno-15-351" name="__codelineno-15-351" href="#__codelineno-15-351"></a><span class="w">    </span><span class="nx">setupNetworkHandling</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-15-352"><a id="__codelineno-15-352" name="__codelineno-15-352" href="#__codelineno-15-352"></a><span class="w">        </span><span class="c1">// Show online/offline status</span>
</span><span id="__span-15-353"><a id="__codelineno-15-353" name="__codelineno-15-353" href="#__codelineno-15-353"></a><span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">updateOnlineStatus</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-15-354"><a id="__codelineno-15-354" name="__codelineno-15-354" href="#__codelineno-15-354"></a><span class="w">            </span><span class="kd">const</span><span class="w"> </span><span class="nx">status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">navigator</span><span class="p">.</span><span class="nx">onLine</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="s1">&#39;online&#39;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;offline&#39;</span><span class="p">;</span>
</span><span id="__span-15-355"><a id="__codelineno-15-355" name="__codelineno-15-355" href="#__codelineno-15-355"></a><span class="w">            </span><span class="kd">const</span><span class="w"> </span><span class="nx">statusElement</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;networkStatus&#39;</span><span class="p">);</span>
</span><span id="__span-15-356"><a id="__codelineno-15-356" name="__codelineno-15-356" href="#__codelineno-15-356"></a><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">statusElement</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-15-357"><a id="__codelineno-15-357" name="__codelineno-15-357" href="#__codelineno-15-357"></a><span class="w">                </span><span class="nx">statusElement</span><span class="p">.</span><span class="nx">textContent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">status</span><span class="p">;</span>
</span><span id="__span-15-358"><a id="__codelineno-15-358" name="__codelineno-15-358" href="#__codelineno-15-358"></a><span class="w">                </span><span class="nx">statusElement</span><span class="p">.</span><span class="nx">className</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sb">`network-status </span><span class="si">${</span><span class="nx">status</span><span class="si">}</span><span class="sb">`</span><span class="p">;</span>
</span><span id="__span-15-359"><a id="__codelineno-15-359" name="__codelineno-15-359" href="#__codelineno-15-359"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-15-360"><a id="__codelineno-15-360" name="__codelineno-15-360" href="#__codelineno-15-360"></a>
</span><span id="__span-15-361"><a id="__codelineno-15-361" name="__codelineno-15-361" href="#__codelineno-15-361"></a><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">status</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;offline&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-15-362"><a id="__codelineno-15-362" name="__codelineno-15-362" href="#__codelineno-15-362"></a><span class="w">                </span><span class="k">this</span><span class="p">.</span><span class="nx">showOfflineMessage</span><span class="p">();</span>
</span><span id="__span-15-363"><a id="__codelineno-15-363" name="__codelineno-15-363" href="#__codelineno-15-363"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-15-364"><a id="__codelineno-15-364" name="__codelineno-15-364" href="#__codelineno-15-364"></a><span class="w">        </span><span class="p">};</span>
</span><span id="__span-15-365"><a id="__codelineno-15-365" name="__codelineno-15-365" href="#__codelineno-15-365"></a>
</span><span id="__span-15-366"><a id="__codelineno-15-366" name="__codelineno-15-366" href="#__codelineno-15-366"></a><span class="w">        </span><span class="nb">window</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;online&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">updateOnlineStatus</span><span class="p">);</span>
</span><span id="__span-15-367"><a id="__codelineno-15-367" name="__codelineno-15-367" href="#__codelineno-15-367"></a><span class="w">        </span><span class="nb">window</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;offline&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">updateOnlineStatus</span><span class="p">);</span>
</span><span id="__span-15-368"><a id="__codelineno-15-368" name="__codelineno-15-368" href="#__codelineno-15-368"></a><span class="w">        </span><span class="nx">updateOnlineStatus</span><span class="p">();</span>
</span><span id="__span-15-369"><a id="__codelineno-15-369" name="__codelineno-15-369" href="#__codelineno-15-369"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-15-370"><a id="__codelineno-15-370" name="__codelineno-15-370" href="#__codelineno-15-370"></a>
</span><span id="__span-15-371"><a id="__codelineno-15-371" name="__codelineno-15-371" href="#__codelineno-15-371"></a><span class="w">    </span><span class="nx">showOfflineMessage</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-15-372"><a id="__codelineno-15-372" name="__codelineno-15-372" href="#__codelineno-15-372"></a><span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">offlineMessage</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;div&#39;</span><span class="p">);</span>
</span><span id="__span-15-373"><a id="__codelineno-15-373" name="__codelineno-15-373" href="#__codelineno-15-373"></a><span class="w">        </span><span class="nx">offlineMessage</span><span class="p">.</span><span class="nx">className</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;offline-message&#39;</span><span class="p">;</span>
</span><span id="__span-15-374"><a id="__codelineno-15-374" name="__codelineno-15-374" href="#__codelineno-15-374"></a><span class="w">        </span><span class="nx">offlineMessage</span><span class="p">.</span><span class="nx">innerHTML</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sb">`</span>
</span><span id="__span-15-375"><a id="__codelineno-15-375" name="__codelineno-15-375" href="#__codelineno-15-375"></a><span class="sb">            &lt;p&gt;âš ï¸ You&#39;re currently offline. Some features may not work.&lt;/p&gt;</span>
</span><span id="__span-15-376"><a id="__codelineno-15-376" name="__codelineno-15-376" href="#__codelineno-15-376"></a><span class="sb">            &lt;p&gt;ğŸ’¾ Your changes will be saved locally and synced when you&#39;re back online.&lt;/p&gt;</span>
</span><span id="__span-15-377"><a id="__codelineno-15-377" name="__codelineno-15-377" href="#__codelineno-15-377"></a><span class="sb">        `</span><span class="p">;</span>
</span><span id="__span-15-378"><a id="__codelineno-15-378" name="__codelineno-15-378" href="#__codelineno-15-378"></a><span class="w">        </span><span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">offlineMessage</span><span class="p">);</span>
</span><span id="__span-15-379"><a id="__codelineno-15-379" name="__codelineno-15-379" href="#__codelineno-15-379"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-15-380"><a id="__codelineno-15-380" name="__codelineno-15-380" href="#__codelineno-15-380"></a><span class="p">}</span>
</span><span id="__span-15-381"><a id="__codelineno-15-381" name="__codelineno-15-381" href="#__codelineno-15-381"></a>
</span><span id="__span-15-382"><a id="__codelineno-15-382" name="__codelineno-15-382" href="#__codelineno-15-382"></a><span class="c1">// Initialize the web application</span>
</span><span id="__span-15-383"><a id="__codelineno-15-383" name="__codelineno-15-383" href="#__codelineno-15-383"></a><span class="kd">const</span><span class="w"> </span><span class="nx">webApp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">WebAppClient</span><span class="p">();</span>
</span><span id="__span-15-384"><a id="__codelineno-15-384" name="__codelineno-15-384" href="#__codelineno-15-384"></a><span class="kd">const</span><span class="w"> </span><span class="nx">pwaManager</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">PWAManager</span><span class="p">();</span>
</span><span id="__span-15-385"><a id="__codelineno-15-385" name="__codelineno-15-385" href="#__codelineno-15-385"></a>
</span><span id="__span-15-386"><a id="__codelineno-15-386" name="__codelineno-15-386" href="#__codelineno-15-386"></a><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;ğŸŒ Modern Web Application Client Loaded&#39;</span><span class="p">);</span>
</span><span id="__span-15-387"><a id="__codelineno-15-387" name="__codelineno-15-387" href="#__codelineno-15-387"></a><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Features: Authentication, PWA, Offline Support, Real-time Updates&#39;</span><span class="p">);</span>
</span></code></pre></div>
</details>
<h3 id="standards-governance-the-guardians-of-the-web">Standards &amp; Governance: The Guardians of the Web ğŸ›ï¸âš–ï¸<a class="headerlink" href="#standards-governance-the-guardians-of-the-web" title="Permanent link">&para;</a></h3>
<p>The web wouldn't exist without standardsâ€”imagine trying to browse the internet if every browser spoke a different language! Standards organizations are the unsung heroes that ensure your website works whether someone visits it from Chrome on a Windows laptop or Safari on an iPhone.</p>
<p><strong>ğŸŒ W3C (World Wide Web Consortium): The Web's Supreme Court</strong></p>
<p>The W3C is like the UN for the internetâ€”they bring together companies like Google, Microsoft, Apple, and Mozilla to agree on how the web should work. Without them, we'd have chaos!</p>
<details class="example">
<summary>Web Standards Checker</summary>
<div class="language-python highlight"><pre><span></span><code><span id="__span-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">requests</span>
</span><span id="__span-16-2"><a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a><span class="kn">import</span><span class="w"> </span><span class="nn">json</span>
</span><span id="__span-16-3"><a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a><span class="kn">from</span><span class="w"> </span><span class="nn">datetime</span><span class="w"> </span><span class="kn">import</span> <span class="n">datetime</span>
</span><span id="__span-16-4"><a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a><span class="kn">import</span><span class="w"> </span><span class="nn">re</span>
</span><span id="__span-16-5"><a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a><span class="kn">from</span><span class="w"> </span><span class="nn">urllib.parse</span><span class="w"> </span><span class="kn">import</span> <span class="n">urljoin</span><span class="p">,</span> <span class="n">urlparse</span>
</span><span id="__span-16-6"><a id="__codelineno-16-6" name="__codelineno-16-6" href="#__codelineno-16-6"></a>
</span><span id="__span-16-7"><a id="__codelineno-16-7" name="__codelineno-16-7" href="#__codelineno-16-7"></a><span class="k">class</span><span class="w"> </span><span class="nc">WebStandardsChecker</span><span class="p">:</span>
</span><span id="__span-16-8"><a id="__codelineno-16-8" name="__codelineno-16-8" href="#__codelineno-16-8"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Tool to check web standards compliance and accessibility&quot;&quot;&quot;</span>
</span><span id="__span-16-9"><a id="__codelineno-16-9" name="__codelineno-16-9" href="#__codelineno-16-9"></a>
</span><span id="__span-16-10"><a id="__codelineno-16-10" name="__codelineno-16-10" href="#__codelineno-16-10"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-16-11"><a id="__codelineno-16-11" name="__codelineno-16-11" href="#__codelineno-16-11"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">w3c_validator_url</span> <span class="o">=</span> <span class="s2">&quot;https://validator.w3.org/nu/&quot;</span>
</span><span id="__span-16-12"><a id="__codelineno-16-12" name="__codelineno-16-12" href="#__codelineno-16-12"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">accessibility_guidelines</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="__span-16-13"><a id="__codelineno-16-13" name="__codelineno-16-13" href="#__codelineno-16-13"></a>            <span class="s1">&#39;WCAG_2_1_AA&#39;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-16-14"><a id="__codelineno-16-14" name="__codelineno-16-14" href="#__codelineno-16-14"></a>                <span class="s1">&#39;color_contrast&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;normal&#39;</span><span class="p">:</span> <span class="mf">4.5</span><span class="p">,</span> <span class="s1">&#39;large&#39;</span><span class="p">:</span> <span class="mf">3.0</span><span class="p">},</span>
</span><span id="__span-16-15"><a id="__codelineno-16-15" name="__codelineno-16-15" href="#__codelineno-16-15"></a>                <span class="s1">&#39;alt_text_required&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="__span-16-16"><a id="__codelineno-16-16" name="__codelineno-16-16" href="#__codelineno-16-16"></a>                <span class="s1">&#39;keyboard_navigation&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="__span-16-17"><a id="__codelineno-16-17" name="__codelineno-16-17" href="#__codelineno-16-17"></a>                <span class="s1">&#39;semantic_html&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="__span-16-18"><a id="__codelineno-16-18" name="__codelineno-16-18" href="#__codelineno-16-18"></a>                <span class="s1">&#39;focus_indicators&#39;</span><span class="p">:</span> <span class="kc">True</span>
</span><span id="__span-16-19"><a id="__codelineno-16-19" name="__codelineno-16-19" href="#__codelineno-16-19"></a>            <span class="p">}</span>
</span><span id="__span-16-20"><a id="__codelineno-16-20" name="__codelineno-16-20" href="#__codelineno-16-20"></a>        <span class="p">}</span>
</span><span id="__span-16-21"><a id="__codelineno-16-21" name="__codelineno-16-21" href="#__codelineno-16-21"></a>
</span><span id="__span-16-22"><a id="__codelineno-16-22" name="__codelineno-16-22" href="#__codelineno-16-22"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;ğŸ›ï¸ Web Standards Checker Initialized&quot;</span><span class="p">)</span>
</span><span id="__span-16-23"><a id="__codelineno-16-23" name="__codelineno-16-23" href="#__codelineno-16-23"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;âœ… W3C HTML Validation&quot;</span><span class="p">)</span>
</span><span id="__span-16-24"><a id="__codelineno-16-24" name="__codelineno-16-24" href="#__codelineno-16-24"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;âœ… WCAG 2.1 AA Accessibility&quot;</span><span class="p">)</span>
</span><span id="__span-16-25"><a id="__codelineno-16-25" name="__codelineno-16-25" href="#__codelineno-16-25"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;âœ… Internationalization (i18n)&quot;</span><span class="p">)</span>
</span><span id="__span-16-26"><a id="__codelineno-16-26" name="__codelineno-16-26" href="#__codelineno-16-26"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;âœ… Security &amp; Privacy Standards&quot;</span><span class="p">)</span>
</span><span id="__span-16-27"><a id="__codelineno-16-27" name="__codelineno-16-27" href="#__codelineno-16-27"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;âœ… Semantic Web &amp; Machine-Readable Data&quot;</span><span class="p">)</span>
</span><span id="__span-16-28"><a id="__codelineno-16-28" name="__codelineno-16-28" href="#__codelineno-16-28"></a>
</span><span id="__span-16-29"><a id="__codelineno-16-29" name="__codelineno-16-29" href="#__codelineno-16-29"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">validate_html</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">html_content</span><span class="p">):</span>
</span><span id="__span-16-30"><a id="__codelineno-16-30" name="__codelineno-16-30" href="#__codelineno-16-30"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Validate HTML against W3C standards&quot;&quot;&quot;</span>
</span><span id="__span-16-31"><a id="__codelineno-16-31" name="__codelineno-16-31" href="#__codelineno-16-31"></a>
</span><span id="__span-16-32"><a id="__codelineno-16-32" name="__codelineno-16-32" href="#__codelineno-16-32"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;ğŸ” Validating HTML against W3C standards...&quot;</span><span class="p">)</span>
</span><span id="__span-16-33"><a id="__codelineno-16-33" name="__codelineno-16-33" href="#__codelineno-16-33"></a>
</span><span id="__span-16-34"><a id="__codelineno-16-34" name="__codelineno-16-34" href="#__codelineno-16-34"></a>        <span class="c1"># Basic HTML structure checks</span>
</span><span id="__span-16-35"><a id="__codelineno-16-35" name="__codelineno-16-35" href="#__codelineno-16-35"></a>        <span class="n">validation_results</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="__span-16-36"><a id="__codelineno-16-36" name="__codelineno-16-36" href="#__codelineno-16-36"></a>            <span class="s1">&#39;doctype_present&#39;</span><span class="p">:</span> <span class="nb">bool</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;&lt;!DOCTYPE\s+html&#39;</span><span class="p">,</span> <span class="n">html_content</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">IGNORECASE</span><span class="p">)),</span>
</span><span id="__span-16-37"><a id="__codelineno-16-37" name="__codelineno-16-37" href="#__codelineno-16-37"></a>            <span class="s1">&#39;lang_attribute&#39;</span><span class="p">:</span> <span class="nb">bool</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;&lt;html[^&gt;]*lang=&#39;</span><span class="p">,</span> <span class="n">html_content</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">IGNORECASE</span><span class="p">)),</span>
</span><span id="__span-16-38"><a id="__codelineno-16-38" name="__codelineno-16-38" href="#__codelineno-16-38"></a>            <span class="s1">&#39;meta_charset&#39;</span><span class="p">:</span> <span class="nb">bool</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;&lt;meta[^&gt;]*charset=&#39;</span><span class="p">,</span> <span class="n">html_content</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">IGNORECASE</span><span class="p">)),</span>
</span><span id="__span-16-39"><a id="__codelineno-16-39" name="__codelineno-16-39" href="#__codelineno-16-39"></a>            <span class="s1">&#39;meta_viewport&#39;</span><span class="p">:</span> <span class="nb">bool</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;&lt;meta[^&gt;]*viewport=&#39;</span><span class="p">,</span> <span class="n">html_content</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">IGNORECASE</span><span class="p">)),</span>
</span><span id="__span-16-40"><a id="__codelineno-16-40" name="__codelineno-16-40" href="#__codelineno-16-40"></a>            <span class="s1">&#39;title_present&#39;</span><span class="p">:</span> <span class="nb">bool</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;&lt;title&gt;&#39;</span><span class="p">,</span> <span class="n">html_content</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">IGNORECASE</span><span class="p">)),</span>
</span><span id="__span-16-41"><a id="__codelineno-16-41" name="__codelineno-16-41" href="#__codelineno-16-41"></a>            <span class="s1">&#39;semantic_elements&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_semantic_html</span><span class="p">(</span><span class="n">html_content</span><span class="p">),</span>
</span><span id="__span-16-42"><a id="__codelineno-16-42" name="__codelineno-16-42" href="#__codelineno-16-42"></a>            <span class="s1">&#39;accessibility_attributes&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_accessibility_attributes</span><span class="p">(</span><span class="n">html_content</span><span class="p">)</span>
</span><span id="__span-16-43"><a id="__codelineno-16-43" name="__codelineno-16-43" href="#__codelineno-16-43"></a>        <span class="p">}</span>
</span><span id="__span-16-44"><a id="__codelineno-16-44" name="__codelineno-16-44" href="#__codelineno-16-44"></a>
</span><span id="__span-16-45"><a id="__codelineno-16-45" name="__codelineno-16-45" href="#__codelineno-16-45"></a>        <span class="c1"># Calculate compliance score</span>
</span><span id="__span-16-46"><a id="__codelineno-16-46" name="__codelineno-16-46" href="#__codelineno-16-46"></a>        <span class="n">total_checks</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">validation_results</span><span class="p">)</span>
</span><span id="__span-16-47"><a id="__codelineno-16-47" name="__codelineno-16-47" href="#__codelineno-16-47"></a>        <span class="n">passed_checks</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="mi">1</span> <span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">validation_results</span><span class="o">.</span><span class="n">values</span><span class="p">()</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="nb">bool</span><span class="p">)</span> <span class="ow">and</span> <span class="n">result</span><span class="p">)</span>
</span><span id="__span-16-48"><a id="__codelineno-16-48" name="__codelineno-16-48" href="#__codelineno-16-48"></a>        <span class="n">passed_checks</span> <span class="o">+=</span> <span class="nb">sum</span><span class="p">(</span><span class="nb">len</span><span class="p">([</span><span class="n">v</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">validation_results</span><span class="p">[</span><span class="s1">&#39;semantic_elements&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">()</span> <span class="k">if</span> <span class="n">v</span><span class="p">]))</span>
</span><span id="__span-16-49"><a id="__codelineno-16-49" name="__codelineno-16-49" href="#__codelineno-16-49"></a>        <span class="n">passed_checks</span> <span class="o">+=</span> <span class="nb">sum</span><span class="p">(</span><span class="nb">len</span><span class="p">([</span><span class="n">v</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">validation_results</span><span class="p">[</span><span class="s1">&#39;accessibility_attributes&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">()</span> <span class="k">if</span> <span class="n">v</span><span class="p">]))</span>
</span><span id="__span-16-50"><a id="__codelineno-16-50" name="__codelineno-16-50" href="#__codelineno-16-50"></a>
</span><span id="__span-16-51"><a id="__codelineno-16-51" name="__codelineno-16-51" href="#__codelineno-16-51"></a>        <span class="n">compliance_score</span> <span class="o">=</span> <span class="p">(</span><span class="n">passed_checks</span> <span class="o">/</span> <span class="p">(</span><span class="n">total_checks</span> <span class="o">+</span> <span class="mi">10</span><span class="p">))</span> <span class="o">*</span> <span class="mi">100</span>  <span class="c1"># Approximate scoring</span>
</span><span id="__span-16-52"><a id="__codelineno-16-52" name="__codelineno-16-52" href="#__codelineno-16-52"></a>
</span><span id="__span-16-53"><a id="__codelineno-16-53" name="__codelineno-16-53" href="#__codelineno-16-53"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ğŸ“Š HTML Validation Results:&quot;</span><span class="p">)</span>
</span><span id="__span-16-54"><a id="__codelineno-16-54" name="__codelineno-16-54" href="#__codelineno-16-54"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   DOCTYPE present: </span><span class="si">{</span><span class="s1">&#39;âœ…&#39;</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">validation_results</span><span class="p">[</span><span class="s1">&#39;doctype_present&#39;</span><span class="p">]</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s1">&#39;âŒ&#39;</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-16-55"><a id="__codelineno-16-55" name="__codelineno-16-55" href="#__codelineno-16-55"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Language specified: </span><span class="si">{</span><span class="s1">&#39;âœ…&#39;</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">validation_results</span><span class="p">[</span><span class="s1">&#39;lang_attribute&#39;</span><span class="p">]</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s1">&#39;âŒ&#39;</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-16-56"><a id="__codelineno-16-56" name="__codelineno-16-56" href="#__codelineno-16-56"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Character encoding: </span><span class="si">{</span><span class="s1">&#39;âœ…&#39;</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">validation_results</span><span class="p">[</span><span class="s1">&#39;meta_charset&#39;</span><span class="p">]</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s1">&#39;âŒ&#39;</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-16-57"><a id="__codelineno-16-57" name="__codelineno-16-57" href="#__codelineno-16-57"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Viewport meta tag: </span><span class="si">{</span><span class="s1">&#39;âœ…&#39;</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">validation_results</span><span class="p">[</span><span class="s1">&#39;meta_viewport&#39;</span><span class="p">]</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s1">&#39;âŒ&#39;</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-16-58"><a id="__codelineno-16-58" name="__codelineno-16-58" href="#__codelineno-16-58"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Title element: </span><span class="si">{</span><span class="s1">&#39;âœ…&#39;</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">validation_results</span><span class="p">[</span><span class="s1">&#39;title_present&#39;</span><span class="p">]</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s1">&#39;âŒ&#39;</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-16-59"><a id="__codelineno-16-59" name="__codelineno-16-59" href="#__codelineno-16-59"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Compliance Score: </span><span class="si">{</span><span class="n">compliance_score</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2">%&quot;</span><span class="p">)</span>
</span><span id="__span-16-60"><a id="__codelineno-16-60" name="__codelineno-16-60" href="#__codelineno-16-60"></a>
</span><span id="__span-16-61"><a id="__codelineno-16-61" name="__codelineno-16-61" href="#__codelineno-16-61"></a>        <span class="k">return</span> <span class="n">validation_results</span>
</span><span id="__span-16-62"><a id="__codelineno-16-62" name="__codelineno-16-62" href="#__codelineno-16-62"></a>
</span><span id="__span-16-63"><a id="__codelineno-16-63" name="__codelineno-16-63" href="#__codelineno-16-63"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">check_semantic_html</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">html_content</span><span class="p">):</span>
</span><span id="__span-16-64"><a id="__codelineno-16-64" name="__codelineno-16-64" href="#__codelineno-16-64"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Check for proper semantic HTML usage&quot;&quot;&quot;</span>
</span><span id="__span-16-65"><a id="__codelineno-16-65" name="__codelineno-16-65" href="#__codelineno-16-65"></a>
</span><span id="__span-16-66"><a id="__codelineno-16-66" name="__codelineno-16-66" href="#__codelineno-16-66"></a>        <span class="n">semantic_elements</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="__span-16-67"><a id="__codelineno-16-67" name="__codelineno-16-67" href="#__codelineno-16-67"></a>            <span class="s1">&#39;header&#39;</span><span class="p">:</span> <span class="nb">bool</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;&lt;header[^&gt;]*&gt;&#39;</span><span class="p">,</span> <span class="n">html_content</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">IGNORECASE</span><span class="p">)),</span>
</span><span id="__span-16-68"><a id="__codelineno-16-68" name="__codelineno-16-68" href="#__codelineno-16-68"></a>            <span class="s1">&#39;nav&#39;</span><span class="p">:</span> <span class="nb">bool</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;&lt;nav[^&gt;]*&gt;&#39;</span><span class="p">,</span> <span class="n">html_content</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">IGNORECASE</span><span class="p">)),</span>
</span><span id="__span-16-69"><a id="__codelineno-16-69" name="__codelineno-16-69" href="#__codelineno-16-69"></a>            <span class="s1">&#39;main&#39;</span><span class="p">:</span> <span class="nb">bool</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;&lt;main[^&gt;]*&gt;&#39;</span><span class="p">,</span> <span class="n">html_content</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">IGNORECASE</span><span class="p">)),</span>
</span><span id="__span-16-70"><a id="__codelineno-16-70" name="__codelineno-16-70" href="#__codelineno-16-70"></a>            <span class="s1">&#39;article&#39;</span><span class="p">:</span> <span class="nb">bool</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;&lt;article[^&gt;]*&gt;&#39;</span><span class="p">,</span> <span class="n">html_content</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">IGNORECASE</span><span class="p">)),</span>
</span><span id="__span-16-71"><a id="__codelineno-16-71" name="__codelineno-16-71" href="#__codelineno-16-71"></a>            <span class="s1">&#39;section&#39;</span><span class="p">:</span> <span class="nb">bool</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;&lt;section[^&gt;]*&gt;&#39;</span><span class="p">,</span> <span class="n">html_content</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">IGNORECASE</span><span class="p">)),</span>
</span><span id="__span-16-72"><a id="__codelineno-16-72" name="__codelineno-16-72" href="#__codelineno-16-72"></a>            <span class="s1">&#39;aside&#39;</span><span class="p">:</span> <span class="nb">bool</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;&lt;aside[^&gt;]*&gt;&#39;</span><span class="p">,</span> <span class="n">html_content</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">IGNORECASE</span><span class="p">)),</span>
</span><span id="__span-16-73"><a id="__codelineno-16-73" name="__codelineno-16-73" href="#__codelineno-16-73"></a>            <span class="s1">&#39;footer&#39;</span><span class="p">:</span> <span class="nb">bool</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;&lt;footer[^&gt;]*&gt;&#39;</span><span class="p">,</span> <span class="n">html_content</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">IGNORECASE</span><span class="p">)),</span>
</span><span id="__span-16-74"><a id="__codelineno-16-74" name="__codelineno-16-74" href="#__codelineno-16-74"></a>            <span class="s1">&#39;heading_hierarchy&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_heading_hierarchy</span><span class="p">(</span><span class="n">html_content</span><span class="p">)</span>
</span><span id="__span-16-75"><a id="__codelineno-16-75" name="__codelineno-16-75" href="#__codelineno-16-75"></a>        <span class="p">}</span>
</span><span id="__span-16-76"><a id="__codelineno-16-76" name="__codelineno-16-76" href="#__codelineno-16-76"></a>
</span><span id="__span-16-77"><a id="__codelineno-16-77" name="__codelineno-16-77" href="#__codelineno-16-77"></a>        <span class="k">return</span> <span class="n">semantic_elements</span>
</span><span id="__span-16-78"><a id="__codelineno-16-78" name="__codelineno-16-78" href="#__codelineno-16-78"></a>
</span><span id="__span-16-79"><a id="__codelineno-16-79" name="__codelineno-16-79" href="#__codelineno-16-79"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">check_heading_hierarchy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">html_content</span><span class="p">):</span>
</span><span id="__span-16-80"><a id="__codelineno-16-80" name="__codelineno-16-80" href="#__codelineno-16-80"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Check if headings follow proper hierarchy (h1 -&gt; h2 -&gt; h3, etc.)&quot;&quot;&quot;</span>
</span><span id="__span-16-81"><a id="__codelineno-16-81" name="__codelineno-16-81" href="#__codelineno-16-81"></a>
</span><span id="__span-16-82"><a id="__codelineno-16-82" name="__codelineno-16-82" href="#__codelineno-16-82"></a>        <span class="n">headings</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;&lt;h([1-6])[^&gt;]*&gt;&#39;</span><span class="p">,</span> <span class="n">html_content</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">IGNORECASE</span><span class="p">)</span>
</span><span id="__span-16-83"><a id="__codelineno-16-83" name="__codelineno-16-83" href="#__codelineno-16-83"></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">headings</span><span class="p">:</span>
</span><span id="__span-16-84"><a id="__codelineno-16-84" name="__codelineno-16-84" href="#__codelineno-16-84"></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="__span-16-85"><a id="__codelineno-16-85" name="__codelineno-16-85" href="#__codelineno-16-85"></a>
</span><span id="__span-16-86"><a id="__codelineno-16-86" name="__codelineno-16-86" href="#__codelineno-16-86"></a>        <span class="c1"># Check if it starts with h1 and doesn&#39;t skip levels</span>
</span><span id="__span-16-87"><a id="__codelineno-16-87" name="__codelineno-16-87" href="#__codelineno-16-87"></a>        <span class="n">heading_levels</span> <span class="o">=</span> <span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">h</span><span class="p">)</span> <span class="k">for</span> <span class="n">h</span> <span class="ow">in</span> <span class="n">headings</span><span class="p">]</span>
</span><span id="__span-16-88"><a id="__codelineno-16-88" name="__codelineno-16-88" href="#__codelineno-16-88"></a>
</span><span id="__span-16-89"><a id="__codelineno-16-89" name="__codelineno-16-89" href="#__codelineno-16-89"></a>        <span class="c1"># Should start with h1</span>
</span><span id="__span-16-90"><a id="__codelineno-16-90" name="__codelineno-16-90" href="#__codelineno-16-90"></a>        <span class="k">if</span> <span class="n">heading_levels</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="__span-16-91"><a id="__codelineno-16-91" name="__codelineno-16-91" href="#__codelineno-16-91"></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="__span-16-92"><a id="__codelineno-16-92" name="__codelineno-16-92" href="#__codelineno-16-92"></a>
</span><span id="__span-16-93"><a id="__codelineno-16-93" name="__codelineno-16-93" href="#__codelineno-16-93"></a>        <span class="c1"># Check for skipped levels</span>
</span><span id="__span-16-94"><a id="__codelineno-16-94" name="__codelineno-16-94" href="#__codelineno-16-94"></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">heading_levels</span><span class="p">)):</span>
</span><span id="__span-16-95"><a id="__codelineno-16-95" name="__codelineno-16-95" href="#__codelineno-16-95"></a>            <span class="k">if</span> <span class="n">heading_levels</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">heading_levels</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="__span-16-96"><a id="__codelineno-16-96" name="__codelineno-16-96" href="#__codelineno-16-96"></a>                <span class="k">return</span> <span class="kc">False</span>
</span><span id="__span-16-97"><a id="__codelineno-16-97" name="__codelineno-16-97" href="#__codelineno-16-97"></a>
</span><span id="__span-16-98"><a id="__codelineno-16-98" name="__codelineno-16-98" href="#__codelineno-16-98"></a>        <span class="k">return</span> <span class="kc">True</span>
</span><span id="__span-16-99"><a id="__codelineno-16-99" name="__codelineno-16-99" href="#__codelineno-16-99"></a>
</span><span id="__span-16-100"><a id="__codelineno-16-100" name="__codelineno-16-100" href="#__codelineno-16-100"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">check_accessibility_attributes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">html_content</span><span class="p">):</span>
</span><span id="__span-16-101"><a id="__codelineno-16-101" name="__codelineno-16-101" href="#__codelineno-16-101"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Check for WCAG accessibility attributes&quot;&quot;&quot;</span>
</span><span id="__span-16-102"><a id="__codelineno-16-102" name="__codelineno-16-102" href="#__codelineno-16-102"></a>
</span><span id="__span-16-103"><a id="__codelineno-16-103" name="__codelineno-16-103" href="#__codelineno-16-103"></a>        <span class="n">accessibility_attrs</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="__span-16-104"><a id="__codelineno-16-104" name="__codelineno-16-104" href="#__codelineno-16-104"></a>            <span class="s1">&#39;alt_attributes&#39;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;&lt;img[^&gt;]*alt=&#39;</span><span class="p">,</span> <span class="n">html_content</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">IGNORECASE</span><span class="p">)),</span>
</span><span id="__span-16-105"><a id="__codelineno-16-105" name="__codelineno-16-105" href="#__codelineno-16-105"></a>            <span class="s1">&#39;aria_labels&#39;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;aria-label=&#39;</span><span class="p">,</span> <span class="n">html_content</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">IGNORECASE</span><span class="p">)),</span>
</span><span id="__span-16-106"><a id="__codelineno-16-106" name="__codelineno-16-106" href="#__codelineno-16-106"></a>            <span class="s1">&#39;aria_described_by&#39;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;aria-describedby=&#39;</span><span class="p">,</span> <span class="n">html_content</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">IGNORECASE</span><span class="p">)),</span>
</span><span id="__span-16-107"><a id="__codelineno-16-107" name="__codelineno-16-107" href="#__codelineno-16-107"></a>            <span class="s1">&#39;role_attributes&#39;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;role=&#39;</span><span class="p">,</span> <span class="n">html_content</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">IGNORECASE</span><span class="p">)),</span>
</span><span id="__span-16-108"><a id="__codelineno-16-108" name="__codelineno-16-108" href="#__codelineno-16-108"></a>            <span class="s1">&#39;tabindex_usage&#39;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;tabindex=&#39;</span><span class="p">,</span> <span class="n">html_content</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">IGNORECASE</span><span class="p">)),</span>
</span><span id="__span-16-109"><a id="__codelineno-16-109" name="__codelineno-16-109" href="#__codelineno-16-109"></a>            <span class="s1">&#39;form_labels&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_form_labels</span><span class="p">(</span><span class="n">html_content</span><span class="p">)</span>
</span><span id="__span-16-110"><a id="__codelineno-16-110" name="__codelineno-16-110" href="#__codelineno-16-110"></a>        <span class="p">}</span>
</span><span id="__span-16-111"><a id="__codelineno-16-111" name="__codelineno-16-111" href="#__codelineno-16-111"></a>
</span><span id="__span-16-112"><a id="__codelineno-16-112" name="__codelineno-16-112" href="#__codelineno-16-112"></a>        <span class="k">return</span> <span class="n">accessibility_attrs</span>
</span><span id="__span-16-113"><a id="__codelineno-16-113" name="__codelineno-16-113" href="#__codelineno-16-113"></a>
</span><span id="__span-16-114"><a id="__codelineno-16-114" name="__codelineno-16-114" href="#__codelineno-16-114"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">check_form_labels</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">html_content</span><span class="p">):</span>
</span><span id="__span-16-115"><a id="__codelineno-16-115" name="__codelineno-16-115" href="#__codelineno-16-115"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Check if form inputs have proper labels&quot;&quot;&quot;</span>
</span><span id="__span-16-116"><a id="__codelineno-16-116" name="__codelineno-16-116" href="#__codelineno-16-116"></a>
</span><span id="__span-16-117"><a id="__codelineno-16-117" name="__codelineno-16-117" href="#__codelineno-16-117"></a>        <span class="n">inputs</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;&lt;input[^&gt;]*&gt;&#39;</span><span class="p">,</span> <span class="n">html_content</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">IGNORECASE</span><span class="p">)</span>
</span><span id="__span-16-118"><a id="__codelineno-16-118" name="__codelineno-16-118" href="#__codelineno-16-118"></a>        <span class="n">labels</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;&lt;label[^&gt;]*for=[&quot;</span><span class="se">\&#39;</span><span class="s1">]([^&quot;</span><span class="se">\&#39;</span><span class="s1">]*)[&quot;</span><span class="se">\&#39;</span><span class="s1">][^&gt;]*&gt;&#39;</span><span class="p">,</span> <span class="n">html_content</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">IGNORECASE</span><span class="p">)</span>
</span><span id="__span-16-119"><a id="__codelineno-16-119" name="__codelineno-16-119" href="#__codelineno-16-119"></a>
</span><span id="__span-16-120"><a id="__codelineno-16-120" name="__codelineno-16-120" href="#__codelineno-16-120"></a>        <span class="c1"># This is a simplified check - in reality you&#39;d need more sophisticated parsing</span>
</span><span id="__span-16-121"><a id="__codelineno-16-121" name="__codelineno-16-121" href="#__codelineno-16-121"></a>        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="n">labels</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="nb">len</span><span class="p">(</span><span class="n">inputs</span><span class="p">)</span> <span class="o">*</span> <span class="mf">0.8</span>  <span class="c1"># At least 80% of inputs should have labels</span>
</span><span id="__span-16-122"><a id="__codelineno-16-122" name="__codelineno-16-122" href="#__codelineno-16-122"></a>
</span><span id="__span-16-123"><a id="__codelineno-16-123" name="__codelineno-16-123" href="#__codelineno-16-123"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">check_internationalization</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">html_content</span><span class="p">):</span>
</span><span id="__span-16-124"><a id="__codelineno-16-124" name="__codelineno-16-124" href="#__codelineno-16-124"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Check for internationalization (i18n) compliance&quot;&quot;&quot;</span>
</span><span id="__span-16-125"><a id="__codelineno-16-125" name="__codelineno-16-125" href="#__codelineno-16-125"></a>
</span><span id="__span-16-126"><a id="__codelineno-16-126" name="__codelineno-16-126" href="#__codelineno-16-126"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;ğŸŒ Checking Internationalization (i18n) compliance...&quot;</span><span class="p">)</span>
</span><span id="__span-16-127"><a id="__codelineno-16-127" name="__codelineno-16-127" href="#__codelineno-16-127"></a>
</span><span id="__span-16-128"><a id="__codelineno-16-128" name="__codelineno-16-128" href="#__codelineno-16-128"></a>        <span class="n">i18n_checks</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="__span-16-129"><a id="__codelineno-16-129" name="__codelineno-16-129" href="#__codelineno-16-129"></a>            <span class="s1">&#39;lang_attribute&#39;</span><span class="p">:</span> <span class="nb">bool</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;&lt;html[^&gt;]*lang=&#39;</span><span class="p">,</span> <span class="n">html_content</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">IGNORECASE</span><span class="p">)),</span>
</span><span id="__span-16-130"><a id="__codelineno-16-130" name="__codelineno-16-130" href="#__codelineno-16-130"></a>            <span class="s1">&#39;charset_utf8&#39;</span><span class="p">:</span> <span class="nb">bool</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;charset=[&quot;</span><span class="se">\&#39;</span><span class="s1">]?utf-8[&quot;</span><span class="se">\&#39;</span><span class="s1">]?&#39;</span><span class="p">,</span> <span class="n">html_content</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">IGNORECASE</span><span class="p">)),</span>
</span><span id="__span-16-131"><a id="__codelineno-16-131" name="__codelineno-16-131" href="#__codelineno-16-131"></a>            <span class="s1">&#39;dir_attribute&#39;</span><span class="p">:</span> <span class="nb">bool</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;dir=[&quot;</span><span class="se">\&#39;</span><span class="s1">]?(ltr|rtl|auto)[&quot;</span><span class="se">\&#39;</span><span class="s1">]?&#39;</span><span class="p">,</span> <span class="n">html_content</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">IGNORECASE</span><span class="p">)),</span>
</span><span id="__span-16-132"><a id="__codelineno-16-132" name="__codelineno-16-132" href="#__codelineno-16-132"></a>            <span class="s1">&#39;translate_attributes&#39;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;translate=[&quot;</span><span class="se">\&#39;</span><span class="s1">]?(yes|no)[&quot;</span><span class="se">\&#39;</span><span class="s1">]?&#39;</span><span class="p">,</span> <span class="n">html_content</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">IGNORECASE</span><span class="p">)),</span>
</span><span id="__span-16-133"><a id="__codelineno-16-133" name="__codelineno-16-133" href="#__codelineno-16-133"></a>            <span class="s1">&#39;hreflang_usage&#39;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;hreflang=&#39;</span><span class="p">,</span> <span class="n">html_content</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">IGNORECASE</span><span class="p">))</span>
</span><span id="__span-16-134"><a id="__codelineno-16-134" name="__codelineno-16-134" href="#__codelineno-16-134"></a>        <span class="p">}</span>
</span><span id="__span-16-135"><a id="__codelineno-16-135" name="__codelineno-16-135" href="#__codelineno-16-135"></a>
</span><span id="__span-16-136"><a id="__codelineno-16-136" name="__codelineno-16-136" href="#__codelineno-16-136"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;ğŸŒ Internationalization Results:&quot;</span><span class="p">)</span>
</span><span id="__span-16-137"><a id="__codelineno-16-137" name="__codelineno-16-137" href="#__codelineno-16-137"></a>        <span class="k">for</span> <span class="n">check</span><span class="p">,</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">i18n_checks</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="__span-16-138"><a id="__codelineno-16-138" name="__codelineno-16-138" href="#__codelineno-16-138"></a>            <span class="n">status</span> <span class="o">=</span> <span class="s2">&quot;âœ…&quot;</span> <span class="k">if</span> <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="nb">bool</span><span class="p">)</span> <span class="ow">and</span> <span class="n">result</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span> <span class="ow">and</span> <span class="n">result</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="k">else</span> <span class="s2">&quot;âŒ&quot;</span>
</span><span id="__span-16-139"><a id="__codelineno-16-139" name="__codelineno-16-139" href="#__codelineno-16-139"></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   </span><span class="si">{</span><span class="n">check</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;_&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39; &#39;</span><span class="p">)</span><span class="o">.</span><span class="n">title</span><span class="p">()</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">status</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-16-140"><a id="__codelineno-16-140" name="__codelineno-16-140" href="#__codelineno-16-140"></a>
</span><span id="__span-16-141"><a id="__codelineno-16-141" name="__codelineno-16-141" href="#__codelineno-16-141"></a>        <span class="k">return</span> <span class="n">i18n_checks</span>
</span><span id="__span-16-142"><a id="__codelineno-16-142" name="__codelineno-16-142" href="#__codelineno-16-142"></a>
</span><span id="__span-16-143"><a id="__codelineno-16-143" name="__codelineno-16-143" href="#__codelineno-16-143"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">check_security_privacy_standards</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">html_content</span><span class="p">):</span>
</span><span id="__span-16-144"><a id="__codelineno-16-144" name="__codelineno-16-144" href="#__codelineno-16-144"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Check for security and privacy compliance&quot;&quot;&quot;</span>
</span><span id="__span-16-145"><a id="__codelineno-16-145" name="__codelineno-16-145" href="#__codelineno-16-145"></a>
</span><span id="__span-16-146"><a id="__codelineno-16-146" name="__codelineno-16-146" href="#__codelineno-16-146"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;ğŸ”’ Checking Security &amp; Privacy standards...&quot;</span><span class="p">)</span>
</span><span id="__span-16-147"><a id="__codelineno-16-147" name="__codelineno-16-147" href="#__codelineno-16-147"></a>
</span><span id="__span-16-148"><a id="__codelineno-16-148" name="__codelineno-16-148" href="#__codelineno-16-148"></a>        <span class="n">security_checks</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="__span-16-149"><a id="__codelineno-16-149" name="__codelineno-16-149" href="#__codelineno-16-149"></a>            <span class="s1">&#39;csp_header&#39;</span><span class="p">:</span> <span class="nb">bool</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;Content-Security-Policy&#39;</span><span class="p">,</span> <span class="n">html_content</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">IGNORECASE</span><span class="p">)),</span>
</span><span id="__span-16-150"><a id="__codelineno-16-150" name="__codelineno-16-150" href="#__codelineno-16-150"></a>            <span class="s1">&#39;noopener_noreferrer&#39;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;rel=[&quot;</span><span class="se">\&#39;</span><span class="s1">][^&quot;</span><span class="se">\&#39;</span><span class="s1">]*noopener[^&quot;</span><span class="se">\&#39;</span><span class="s1">]*[&quot;</span><span class="se">\&#39;</span><span class="s1">]&#39;</span><span class="p">,</span> <span class="n">html_content</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">IGNORECASE</span><span class="p">)),</span>
</span><span id="__span-16-151"><a id="__codelineno-16-151" name="__codelineno-16-151" href="#__codelineno-16-151"></a>            <span class="s1">&#39;https_links&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_https_usage</span><span class="p">(</span><span class="n">html_content</span><span class="p">),</span>
</span><span id="__span-16-152"><a id="__codelineno-16-152" name="__codelineno-16-152" href="#__codelineno-16-152"></a>            <span class="s1">&#39;no_inline_scripts&#39;</span><span class="p">:</span> <span class="ow">not</span> <span class="nb">bool</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;&lt;script[^&gt;]*&gt;[^&lt;]&#39;</span><span class="p">,</span> <span class="n">html_content</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">IGNORECASE</span><span class="p">)),</span>
</span><span id="__span-16-153"><a id="__codelineno-16-153" name="__codelineno-16-153" href="#__codelineno-16-153"></a>            <span class="s1">&#39;no_inline_styles&#39;</span><span class="p">:</span> <span class="ow">not</span> <span class="nb">bool</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;style=[&quot;</span><span class="se">\&#39;</span><span class="s1">][^&quot;</span><span class="se">\&#39;</span><span class="s1">]+[&quot;</span><span class="se">\&#39;</span><span class="s1">]&#39;</span><span class="p">,</span> <span class="n">html_content</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">IGNORECASE</span><span class="p">)),</span>
</span><span id="__span-16-154"><a id="__codelineno-16-154" name="__codelineno-16-154" href="#__codelineno-16-154"></a>            <span class="s1">&#39;sri_integrity&#39;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;integrity=[&quot;</span><span class="se">\&#39;</span><span class="s1">]sha&#39;</span><span class="p">,</span> <span class="n">html_content</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">IGNORECASE</span><span class="p">))</span>
</span><span id="__span-16-155"><a id="__codelineno-16-155" name="__codelineno-16-155" href="#__codelineno-16-155"></a>        <span class="p">}</span>
</span><span id="__span-16-156"><a id="__codelineno-16-156" name="__codelineno-16-156" href="#__codelineno-16-156"></a>
</span><span id="__span-16-157"><a id="__codelineno-16-157" name="__codelineno-16-157" href="#__codelineno-16-157"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;ğŸ›¡ï¸ Security &amp; Privacy Results:&quot;</span><span class="p">)</span>
</span><span id="__span-16-158"><a id="__codelineno-16-158" name="__codelineno-16-158" href="#__codelineno-16-158"></a>        <span class="k">for</span> <span class="n">check</span><span class="p">,</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">security_checks</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="__span-16-159"><a id="__codelineno-16-159" name="__codelineno-16-159" href="#__codelineno-16-159"></a>            <span class="n">status</span> <span class="o">=</span> <span class="s2">&quot;âœ…&quot;</span> <span class="k">if</span> <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="nb">bool</span><span class="p">)</span> <span class="ow">and</span> <span class="n">result</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span> <span class="ow">and</span> <span class="n">result</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="k">else</span> <span class="s2">&quot;âŒ&quot;</span>
</span><span id="__span-16-160"><a id="__codelineno-16-160" name="__codelineno-16-160" href="#__codelineno-16-160"></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   </span><span class="si">{</span><span class="n">check</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;_&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39; &#39;</span><span class="p">)</span><span class="o">.</span><span class="n">title</span><span class="p">()</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">status</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-16-161"><a id="__codelineno-16-161" name="__codelineno-16-161" href="#__codelineno-16-161"></a>
</span><span id="__span-16-162"><a id="__codelineno-16-162" name="__codelineno-16-162" href="#__codelineno-16-162"></a>        <span class="k">return</span> <span class="n">security_checks</span>
</span><span id="__span-16-163"><a id="__codelineno-16-163" name="__codelineno-16-163" href="#__codelineno-16-163"></a>
</span><span id="__span-16-164"><a id="__codelineno-16-164" name="__codelineno-16-164" href="#__codelineno-16-164"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">check_https_usage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">html_content</span><span class="p">):</span>
</span><span id="__span-16-165"><a id="__codelineno-16-165" name="__codelineno-16-165" href="#__codelineno-16-165"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Check if external links use HTTPS&quot;&quot;&quot;</span>
</span><span id="__span-16-166"><a id="__codelineno-16-166" name="__codelineno-16-166" href="#__codelineno-16-166"></a>
</span><span id="__span-16-167"><a id="__codelineno-16-167" name="__codelineno-16-167" href="#__codelineno-16-167"></a>        <span class="n">http_links</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;href=[&quot;</span><span class="se">\&#39;</span><span class="s1">]http://[^&quot;</span><span class="se">\&#39;</span><span class="s1">]*[&quot;</span><span class="se">\&#39;</span><span class="s1">]&#39;</span><span class="p">,</span> <span class="n">html_content</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">IGNORECASE</span><span class="p">)</span>
</span><span id="__span-16-168"><a id="__codelineno-16-168" name="__codelineno-16-168" href="#__codelineno-16-168"></a>        <span class="n">https_links</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;href=[&quot;</span><span class="se">\&#39;</span><span class="s1">]https://[^&quot;</span><span class="se">\&#39;</span><span class="s1">]*[&quot;</span><span class="se">\&#39;</span><span class="s1">]&#39;</span><span class="p">,</span> <span class="n">html_content</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">IGNORECASE</span><span class="p">)</span>
</span><span id="__span-16-169"><a id="__codelineno-16-169" name="__codelineno-16-169" href="#__codelineno-16-169"></a>
</span><span id="__span-16-170"><a id="__codelineno-16-170" name="__codelineno-16-170" href="#__codelineno-16-170"></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">http_links</span><span class="p">)</span> <span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="n">https_links</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="__span-16-171"><a id="__codelineno-16-171" name="__codelineno-16-171" href="#__codelineno-16-171"></a>            <span class="k">return</span> <span class="kc">True</span>  <span class="c1"># No external links</span>
</span><span id="__span-16-172"><a id="__codelineno-16-172" name="__codelineno-16-172" href="#__codelineno-16-172"></a>
</span><span id="__span-16-173"><a id="__codelineno-16-173" name="__codelineno-16-173" href="#__codelineno-16-173"></a>        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="n">https_links</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">http_links</span><span class="p">)</span> <span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="n">https_links</span><span class="p">))</span> <span class="o">&gt;</span> <span class="mf">0.9</span>  <span class="c1"># 90% HTTPS</span>
</span><span id="__span-16-174"><a id="__codelineno-16-174" name="__codelineno-16-174" href="#__codelineno-16-174"></a>
</span><span id="__span-16-175"><a id="__codelineno-16-175" name="__codelineno-16-175" href="#__codelineno-16-175"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">generate_semantic_web_markup</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">content_type</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
</span><span id="__span-16-176"><a id="__codelineno-16-176" name="__codelineno-16-176" href="#__codelineno-16-176"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Generate JSON-LD structured data for better machine readability&quot;&quot;&quot;</span>
</span><span id="__span-16-177"><a id="__codelineno-16-177" name="__codelineno-16-177" href="#__codelineno-16-177"></a>
</span><span id="__span-16-178"><a id="__codelineno-16-178" name="__codelineno-16-178" href="#__codelineno-16-178"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;ğŸ¤– Generating Semantic Web markup (JSON-LD)...&quot;</span><span class="p">)</span>
</span><span id="__span-16-179"><a id="__codelineno-16-179" name="__codelineno-16-179" href="#__codelineno-16-179"></a>
</span><span id="__span-16-180"><a id="__codelineno-16-180" name="__codelineno-16-180" href="#__codelineno-16-180"></a>        <span class="k">if</span> <span class="n">content_type</span> <span class="o">==</span> <span class="s1">&#39;article&#39;</span><span class="p">:</span>
</span><span id="__span-16-181"><a id="__codelineno-16-181" name="__codelineno-16-181" href="#__codelineno-16-181"></a>            <span class="n">structured_data</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="__span-16-182"><a id="__codelineno-16-182" name="__codelineno-16-182" href="#__codelineno-16-182"></a>                <span class="s2">&quot;@context&quot;</span><span class="p">:</span> <span class="s2">&quot;https://schema.org&quot;</span><span class="p">,</span>
</span><span id="__span-16-183"><a id="__codelineno-16-183" name="__codelineno-16-183" href="#__codelineno-16-183"></a>                <span class="s2">&quot;@type&quot;</span><span class="p">:</span> <span class="s2">&quot;Article&quot;</span><span class="p">,</span>
</span><span id="__span-16-184"><a id="__codelineno-16-184" name="__codelineno-16-184" href="#__codelineno-16-184"></a>                <span class="s2">&quot;headline&quot;</span><span class="p">:</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">),</span>
</span><span id="__span-16-185"><a id="__codelineno-16-185" name="__codelineno-16-185" href="#__codelineno-16-185"></a>                <span class="s2">&quot;author&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-16-186"><a id="__codelineno-16-186" name="__codelineno-16-186" href="#__codelineno-16-186"></a>                    <span class="s2">&quot;@type&quot;</span><span class="p">:</span> <span class="s2">&quot;Person&quot;</span><span class="p">,</span>
</span><span id="__span-16-187"><a id="__codelineno-16-187" name="__codelineno-16-187" href="#__codelineno-16-187"></a>                    <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;author&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
</span><span id="__span-16-188"><a id="__codelineno-16-188" name="__codelineno-16-188" href="#__codelineno-16-188"></a>                <span class="p">},</span>
</span><span id="__span-16-189"><a id="__codelineno-16-189" name="__codelineno-16-189" href="#__codelineno-16-189"></a>                <span class="s2">&quot;datePublished&quot;</span><span class="p">:</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;published_date&#39;</span><span class="p">,</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">isoformat</span><span class="p">()),</span>
</span><span id="__span-16-190"><a id="__codelineno-16-190" name="__codelineno-16-190" href="#__codelineno-16-190"></a>                <span class="s2">&quot;dateModified&quot;</span><span class="p">:</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;modified_date&#39;</span><span class="p">,</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">isoformat</span><span class="p">()),</span>
</span><span id="__span-16-191"><a id="__codelineno-16-191" name="__codelineno-16-191" href="#__codelineno-16-191"></a>                <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;description&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">),</span>
</span><span id="__span-16-192"><a id="__codelineno-16-192" name="__codelineno-16-192" href="#__codelineno-16-192"></a>                <span class="s2">&quot;articleBody&quot;</span><span class="p">:</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;content&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">),</span>
</span><span id="__span-16-193"><a id="__codelineno-16-193" name="__codelineno-16-193" href="#__codelineno-16-193"></a>                <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;url&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">),</span>
</span><span id="__span-16-194"><a id="__codelineno-16-194" name="__codelineno-16-194" href="#__codelineno-16-194"></a>                <span class="s2">&quot;image&quot;</span><span class="p">:</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;image&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">),</span>
</span><span id="__span-16-195"><a id="__codelineno-16-195" name="__codelineno-16-195" href="#__codelineno-16-195"></a>                <span class="s2">&quot;publisher&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-16-196"><a id="__codelineno-16-196" name="__codelineno-16-196" href="#__codelineno-16-196"></a>                    <span class="s2">&quot;@type&quot;</span><span class="p">:</span> <span class="s2">&quot;Organization&quot;</span><span class="p">,</span>
</span><span id="__span-16-197"><a id="__codelineno-16-197" name="__codelineno-16-197" href="#__codelineno-16-197"></a>                    <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;publisher&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">),</span>
</span><span id="__span-16-198"><a id="__codelineno-16-198" name="__codelineno-16-198" href="#__codelineno-16-198"></a>                    <span class="s2">&quot;logo&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-16-199"><a id="__codelineno-16-199" name="__codelineno-16-199" href="#__codelineno-16-199"></a>                        <span class="s2">&quot;@type&quot;</span><span class="p">:</span> <span class="s2">&quot;ImageObject&quot;</span><span class="p">,</span>
</span><span id="__span-16-200"><a id="__codelineno-16-200" name="__codelineno-16-200" href="#__codelineno-16-200"></a>                        <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;publisher_logo&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
</span><span id="__span-16-201"><a id="__codelineno-16-201" name="__codelineno-16-201" href="#__codelineno-16-201"></a>                    <span class="p">}</span>
</span><span id="__span-16-202"><a id="__codelineno-16-202" name="__codelineno-16-202" href="#__codelineno-16-202"></a>                <span class="p">}</span>
</span><span id="__span-16-203"><a id="__codelineno-16-203" name="__codelineno-16-203" href="#__codelineno-16-203"></a>            <span class="p">}</span>
</span><span id="__span-16-204"><a id="__codelineno-16-204" name="__codelineno-16-204" href="#__codelineno-16-204"></a>
</span><span id="__span-16-205"><a id="__codelineno-16-205" name="__codelineno-16-205" href="#__codelineno-16-205"></a>        <span class="k">elif</span> <span class="n">content_type</span> <span class="o">==</span> <span class="s1">&#39;organization&#39;</span><span class="p">:</span>
</span><span id="__span-16-206"><a id="__codelineno-16-206" name="__codelineno-16-206" href="#__codelineno-16-206"></a>            <span class="n">structured_data</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="__span-16-207"><a id="__codelineno-16-207" name="__codelineno-16-207" href="#__codelineno-16-207"></a>                <span class="s2">&quot;@context&quot;</span><span class="p">:</span> <span class="s2">&quot;https://schema.org&quot;</span><span class="p">,</span>
</span><span id="__span-16-208"><a id="__codelineno-16-208" name="__codelineno-16-208" href="#__codelineno-16-208"></a>                <span class="s2">&quot;@type&quot;</span><span class="p">:</span> <span class="s2">&quot;Organization&quot;</span><span class="p">,</span>
</span><span id="__span-16-209"><a id="__codelineno-16-209" name="__codelineno-16-209" href="#__codelineno-16-209"></a>                <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">),</span>
</span><span id="__span-16-210"><a id="__codelineno-16-210" name="__codelineno-16-210" href="#__codelineno-16-210"></a>                <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;url&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">),</span>
</span><span id="__span-16-211"><a id="__codelineno-16-211" name="__codelineno-16-211" href="#__codelineno-16-211"></a>                <span class="s2">&quot;logo&quot;</span><span class="p">:</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;logo&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">),</span>
</span><span id="__span-16-212"><a id="__codelineno-16-212" name="__codelineno-16-212" href="#__codelineno-16-212"></a>                <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;description&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">),</span>
</span><span id="__span-16-213"><a id="__codelineno-16-213" name="__codelineno-16-213" href="#__codelineno-16-213"></a>                <span class="s2">&quot;address&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-16-214"><a id="__codelineno-16-214" name="__codelineno-16-214" href="#__codelineno-16-214"></a>                    <span class="s2">&quot;@type&quot;</span><span class="p">:</span> <span class="s2">&quot;PostalAddress&quot;</span><span class="p">,</span>
</span><span id="__span-16-215"><a id="__codelineno-16-215" name="__codelineno-16-215" href="#__codelineno-16-215"></a>                    <span class="s2">&quot;streetAddress&quot;</span><span class="p">:</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;street_address&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">),</span>
</span><span id="__span-16-216"><a id="__codelineno-16-216" name="__codelineno-16-216" href="#__codelineno-16-216"></a>                    <span class="s2">&quot;addressLocality&quot;</span><span class="p">:</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;city&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">),</span>
</span><span id="__span-16-217"><a id="__codelineno-16-217" name="__codelineno-16-217" href="#__codelineno-16-217"></a>                    <span class="s2">&quot;addressRegion&quot;</span><span class="p">:</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;state&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">),</span>
</span><span id="__span-16-218"><a id="__codelineno-16-218" name="__codelineno-16-218" href="#__codelineno-16-218"></a>                    <span class="s2">&quot;postalCode&quot;</span><span class="p">:</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;postal_code&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">),</span>
</span><span id="__span-16-219"><a id="__codelineno-16-219" name="__codelineno-16-219" href="#__codelineno-16-219"></a>                    <span class="s2">&quot;addressCountry&quot;</span><span class="p">:</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;country&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
</span><span id="__span-16-220"><a id="__codelineno-16-220" name="__codelineno-16-220" href="#__codelineno-16-220"></a>                <span class="p">},</span>
</span><span id="__span-16-221"><a id="__codelineno-16-221" name="__codelineno-16-221" href="#__codelineno-16-221"></a>                <span class="s2">&quot;contactPoint&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-16-222"><a id="__codelineno-16-222" name="__codelineno-16-222" href="#__codelineno-16-222"></a>                    <span class="s2">&quot;@type&quot;</span><span class="p">:</span> <span class="s2">&quot;ContactPoint&quot;</span><span class="p">,</span>
</span><span id="__span-16-223"><a id="__codelineno-16-223" name="__codelineno-16-223" href="#__codelineno-16-223"></a>                    <span class="s2">&quot;telephone&quot;</span><span class="p">:</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;phone&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">),</span>
</span><span id="__span-16-224"><a id="__codelineno-16-224" name="__codelineno-16-224" href="#__codelineno-16-224"></a>                    <span class="s2">&quot;contactType&quot;</span><span class="p">:</span> <span class="s2">&quot;customer service&quot;</span>
</span><span id="__span-16-225"><a id="__codelineno-16-225" name="__codelineno-16-225" href="#__codelineno-16-225"></a>                <span class="p">}</span>
</span><span id="__span-16-226"><a id="__codelineno-16-226" name="__codelineno-16-226" href="#__codelineno-16-226"></a>            <span class="p">}</span>
</span><span id="__span-16-227"><a id="__codelineno-16-227" name="__codelineno-16-227" href="#__codelineno-16-227"></a>
</span><span id="__span-16-228"><a id="__codelineno-16-228" name="__codelineno-16-228" href="#__codelineno-16-228"></a>        <span class="k">elif</span> <span class="n">content_type</span> <span class="o">==</span> <span class="s1">&#39;website&#39;</span><span class="p">:</span>
</span><span id="__span-16-229"><a id="__codelineno-16-229" name="__codelineno-16-229" href="#__codelineno-16-229"></a>            <span class="n">structured_data</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="__span-16-230"><a id="__codelineno-16-230" name="__codelineno-16-230" href="#__codelineno-16-230"></a>                <span class="s2">&quot;@context&quot;</span><span class="p">:</span> <span class="s2">&quot;https://schema.org&quot;</span><span class="p">,</span>
</span><span id="__span-16-231"><a id="__codelineno-16-231" name="__codelineno-16-231" href="#__codelineno-16-231"></a>                <span class="s2">&quot;@type&quot;</span><span class="p">:</span> <span class="s2">&quot;WebSite&quot;</span><span class="p">,</span>
</span><span id="__span-16-232"><a id="__codelineno-16-232" name="__codelineno-16-232" href="#__codelineno-16-232"></a>                <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">),</span>
</span><span id="__span-16-233"><a id="__codelineno-16-233" name="__codelineno-16-233" href="#__codelineno-16-233"></a>                <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;url&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">),</span>
</span><span id="__span-16-234"><a id="__codelineno-16-234" name="__codelineno-16-234" href="#__codelineno-16-234"></a>                <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;description&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">),</span>
</span><span id="__span-16-235"><a id="__codelineno-16-235" name="__codelineno-16-235" href="#__codelineno-16-235"></a>                <span class="s2">&quot;potentialAction&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-16-236"><a id="__codelineno-16-236" name="__codelineno-16-236" href="#__codelineno-16-236"></a>                    <span class="s2">&quot;@type&quot;</span><span class="p">:</span> <span class="s2">&quot;SearchAction&quot;</span><span class="p">,</span>
</span><span id="__span-16-237"><a id="__codelineno-16-237" name="__codelineno-16-237" href="#__codelineno-16-237"></a>                    <span class="s2">&quot;target&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;url&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">/search?q=</span><span class="se">{{</span><span class="s2">search_term_string</span><span class="se">}}</span><span class="s2">&quot;</span><span class="p">,</span>
</span><span id="__span-16-238"><a id="__codelineno-16-238" name="__codelineno-16-238" href="#__codelineno-16-238"></a>                    <span class="s2">&quot;query-input&quot;</span><span class="p">:</span> <span class="s2">&quot;required name=search_term_string&quot;</span>
</span><span id="__span-16-239"><a id="__codelineno-16-239" name="__codelineno-16-239" href="#__codelineno-16-239"></a>                <span class="p">}</span>
</span><span id="__span-16-240"><a id="__codelineno-16-240" name="__codelineno-16-240" href="#__codelineno-16-240"></a>            <span class="p">}</span>
</span><span id="__span-16-241"><a id="__codelineno-16-241" name="__codelineno-16-241" href="#__codelineno-16-241"></a>
</span><span id="__span-16-242"><a id="__codelineno-16-242" name="__codelineno-16-242" href="#__codelineno-16-242"></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="__span-16-243"><a id="__codelineno-16-243" name="__codelineno-16-243" href="#__codelineno-16-243"></a>            <span class="n">structured_data</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="__span-16-244"><a id="__codelineno-16-244" name="__codelineno-16-244" href="#__codelineno-16-244"></a>                <span class="s2">&quot;@context&quot;</span><span class="p">:</span> <span class="s2">&quot;https://schema.org&quot;</span><span class="p">,</span>
</span><span id="__span-16-245"><a id="__codelineno-16-245" name="__codelineno-16-245" href="#__codelineno-16-245"></a>                <span class="s2">&quot;@type&quot;</span><span class="p">:</span> <span class="s2">&quot;Thing&quot;</span><span class="p">,</span>
</span><span id="__span-16-246"><a id="__codelineno-16-246" name="__codelineno-16-246" href="#__codelineno-16-246"></a>                <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">),</span>
</span><span id="__span-16-247"><a id="__codelineno-16-247" name="__codelineno-16-247" href="#__codelineno-16-247"></a>                <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;description&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">),</span>
</span><span id="__span-16-248"><a id="__codelineno-16-248" name="__codelineno-16-248" href="#__codelineno-16-248"></a>                <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;url&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
</span><span id="__span-16-249"><a id="__codelineno-16-249" name="__codelineno-16-249" href="#__codelineno-16-249"></a>            <span class="p">}</span>
</span><span id="__span-16-250"><a id="__codelineno-16-250" name="__codelineno-16-250" href="#__codelineno-16-250"></a>
</span><span id="__span-16-251"><a id="__codelineno-16-251" name="__codelineno-16-251" href="#__codelineno-16-251"></a>        <span class="n">json_ld</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">structured_data</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</span><span id="__span-16-252"><a id="__codelineno-16-252" name="__codelineno-16-252" href="#__codelineno-16-252"></a>
</span><span id="__span-16-253"><a id="__codelineno-16-253" name="__codelineno-16-253" href="#__codelineno-16-253"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;âœ… JSON-LD structured data generated:&quot;</span><span class="p">)</span>
</span><span id="__span-16-254"><a id="__codelineno-16-254" name="__codelineno-16-254" href="#__codelineno-16-254"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Type: </span><span class="si">{</span><span class="n">structured_data</span><span class="p">[</span><span class="s1">&#39;@type&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-16-255"><a id="__codelineno-16-255" name="__codelineno-16-255" href="#__codelineno-16-255"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Properties: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">structured_data</span><span class="p">)</span><span class="si">}</span><span class="s2"> fields&quot;</span><span class="p">)</span>
</span><span id="__span-16-256"><a id="__codelineno-16-256" name="__codelineno-16-256" href="#__codelineno-16-256"></a>
</span><span id="__span-16-257"><a id="__codelineno-16-257" name="__codelineno-16-257" href="#__codelineno-16-257"></a>        <span class="k">return</span> <span class="n">json_ld</span>
</span><span id="__span-16-258"><a id="__codelineno-16-258" name="__codelineno-16-258" href="#__codelineno-16-258"></a>
</span><span id="__span-16-259"><a id="__codelineno-16-259" name="__codelineno-16-259" href="#__codelineno-16-259"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">run_comprehensive_audit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">html_content</span><span class="p">):</span>
</span><span id="__span-16-260"><a id="__codelineno-16-260" name="__codelineno-16-260" href="#__codelineno-16-260"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Run a complete web standards audit&quot;&quot;&quot;</span>
</span><span id="__span-16-261"><a id="__codelineno-16-261" name="__codelineno-16-261" href="#__codelineno-16-261"></a>
</span><span id="__span-16-262"><a id="__codelineno-16-262" name="__codelineno-16-262" href="#__codelineno-16-262"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;ğŸ” COMPREHENSIVE WEB STANDARDS AUDIT&quot;</span><span class="p">)</span>
</span><span id="__span-16-263"><a id="__codelineno-16-263" name="__codelineno-16-263" href="#__codelineno-16-263"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;=&quot;</span> <span class="o">*</span> <span class="mi">50</span><span class="p">)</span>
</span><span id="__span-16-264"><a id="__codelineno-16-264" name="__codelineno-16-264" href="#__codelineno-16-264"></a>
</span><span id="__span-16-265"><a id="__codelineno-16-265" name="__codelineno-16-265" href="#__codelineno-16-265"></a>        <span class="c1"># HTML Validation</span>
</span><span id="__span-16-266"><a id="__codelineno-16-266" name="__codelineno-16-266" href="#__codelineno-16-266"></a>        <span class="n">html_results</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_html</span><span class="p">(</span><span class="n">html_content</span><span class="p">)</span>
</span><span id="__span-16-267"><a id="__codelineno-16-267" name="__codelineno-16-267" href="#__codelineno-16-267"></a>        <span class="nb">print</span><span class="p">()</span>
</span><span id="__span-16-268"><a id="__codelineno-16-268" name="__codelineno-16-268" href="#__codelineno-16-268"></a>
</span><span id="__span-16-269"><a id="__codelineno-16-269" name="__codelineno-16-269" href="#__codelineno-16-269"></a>        <span class="c1"># Internationalization</span>
</span><span id="__span-16-270"><a id="__codelineno-16-270" name="__codelineno-16-270" href="#__codelineno-16-270"></a>        <span class="n">i18n_results</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_internationalization</span><span class="p">(</span><span class="n">html_content</span><span class="p">)</span>
</span><span id="__span-16-271"><a id="__codelineno-16-271" name="__codelineno-16-271" href="#__codelineno-16-271"></a>        <span class="nb">print</span><span class="p">()</span>
</span><span id="__span-16-272"><a id="__codelineno-16-272" name="__codelineno-16-272" href="#__codelineno-16-272"></a>
</span><span id="__span-16-273"><a id="__codelineno-16-273" name="__codelineno-16-273" href="#__codelineno-16-273"></a>        <span class="c1"># Security &amp; Privacy</span>
</span><span id="__span-16-274"><a id="__codelineno-16-274" name="__codelineno-16-274" href="#__codelineno-16-274"></a>        <span class="n">security_results</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_security_privacy_standards</span><span class="p">(</span><span class="n">html_content</span><span class="p">)</span>
</span><span id="__span-16-275"><a id="__codelineno-16-275" name="__codelineno-16-275" href="#__codelineno-16-275"></a>        <span class="nb">print</span><span class="p">()</span>
</span><span id="__span-16-276"><a id="__codelineno-16-276" name="__codelineno-16-276" href="#__codelineno-16-276"></a>
</span><span id="__span-16-277"><a id="__codelineno-16-277" name="__codelineno-16-277" href="#__codelineno-16-277"></a>        <span class="c1"># Generate sample structured data</span>
</span><span id="__span-16-278"><a id="__codelineno-16-278" name="__codelineno-16-278" href="#__codelineno-16-278"></a>        <span class="n">sample_data</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="__span-16-279"><a id="__codelineno-16-279" name="__codelineno-16-279" href="#__codelineno-16-279"></a>            <span class="s1">&#39;title&#39;</span><span class="p">:</span> <span class="s1">&#39;Modern Web Development&#39;</span><span class="p">,</span>
</span><span id="__span-16-280"><a id="__codelineno-16-280" name="__codelineno-16-280" href="#__codelineno-16-280"></a>            <span class="s1">&#39;author&#39;</span><span class="p">:</span> <span class="s1">&#39;Web Standards Team&#39;</span><span class="p">,</span>
</span><span id="__span-16-281"><a id="__codelineno-16-281" name="__codelineno-16-281" href="#__codelineno-16-281"></a>            <span class="s1">&#39;description&#39;</span><span class="p">:</span> <span class="s1">&#39;A comprehensive guide to web standards compliance&#39;</span><span class="p">,</span>
</span><span id="__span-16-282"><a id="__codelineno-16-282" name="__codelineno-16-282" href="#__codelineno-16-282"></a>            <span class="s1">&#39;url&#39;</span><span class="p">:</span> <span class="s1">&#39;https://example.com/guide&#39;</span><span class="p">,</span>
</span><span id="__span-16-283"><a id="__codelineno-16-283" name="__codelineno-16-283" href="#__codelineno-16-283"></a>            <span class="s1">&#39;published_date&#39;</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">isoformat</span><span class="p">()</span>
</span><span id="__span-16-284"><a id="__codelineno-16-284" name="__codelineno-16-284" href="#__codelineno-16-284"></a>        <span class="p">}</span>
</span><span id="__span-16-285"><a id="__codelineno-16-285" name="__codelineno-16-285" href="#__codelineno-16-285"></a>
</span><span id="__span-16-286"><a id="__codelineno-16-286" name="__codelineno-16-286" href="#__codelineno-16-286"></a>        <span class="n">json_ld</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">generate_semantic_web_markup</span><span class="p">(</span><span class="s1">&#39;article&#39;</span><span class="p">,</span> <span class="n">sample_data</span><span class="p">)</span>
</span><span id="__span-16-287"><a id="__codelineno-16-287" name="__codelineno-16-287" href="#__codelineno-16-287"></a>        <span class="nb">print</span><span class="p">()</span>
</span><span id="__span-16-288"><a id="__codelineno-16-288" name="__codelineno-16-288" href="#__codelineno-16-288"></a>
</span><span id="__span-16-289"><a id="__codelineno-16-289" name="__codelineno-16-289" href="#__codelineno-16-289"></a>        <span class="c1"># Overall compliance summary</span>
</span><span id="__span-16-290"><a id="__codelineno-16-290" name="__codelineno-16-290" href="#__codelineno-16-290"></a>        <span class="n">total_checks</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="__span-16-291"><a id="__codelineno-16-291" name="__codelineno-16-291" href="#__codelineno-16-291"></a>        <span class="n">passed_checks</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="__span-16-292"><a id="__codelineno-16-292" name="__codelineno-16-292" href="#__codelineno-16-292"></a>
</span><span id="__span-16-293"><a id="__codelineno-16-293" name="__codelineno-16-293" href="#__codelineno-16-293"></a>        <span class="k">for</span> <span class="n">category</span> <span class="ow">in</span> <span class="p">[</span><span class="n">html_results</span><span class="p">,</span> <span class="n">i18n_results</span><span class="p">,</span> <span class="n">security_results</span><span class="p">]:</span>
</span><span id="__span-16-294"><a id="__codelineno-16-294" name="__codelineno-16-294" href="#__codelineno-16-294"></a>            <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">category</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="__span-16-295"><a id="__codelineno-16-295" name="__codelineno-16-295" href="#__codelineno-16-295"></a>                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
</span><span id="__span-16-296"><a id="__codelineno-16-296" name="__codelineno-16-296" href="#__codelineno-16-296"></a>                    <span class="k">for</span> <span class="n">sub_key</span><span class="p">,</span> <span class="n">sub_value</span> <span class="ow">in</span> <span class="n">value</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="__span-16-297"><a id="__codelineno-16-297" name="__codelineno-16-297" href="#__codelineno-16-297"></a>                        <span class="n">total_checks</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="__span-16-298"><a id="__codelineno-16-298" name="__codelineno-16-298" href="#__codelineno-16-298"></a>                        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">sub_value</span><span class="p">,</span> <span class="nb">bool</span><span class="p">)</span> <span class="ow">and</span> <span class="n">sub_value</span><span class="p">:</span>
</span><span id="__span-16-299"><a id="__codelineno-16-299" name="__codelineno-16-299" href="#__codelineno-16-299"></a>                            <span class="n">passed_checks</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="__span-16-300"><a id="__codelineno-16-300" name="__codelineno-16-300" href="#__codelineno-16-300"></a>                        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">sub_value</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span> <span class="ow">and</span> <span class="n">sub_value</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="__span-16-301"><a id="__codelineno-16-301" name="__codelineno-16-301" href="#__codelineno-16-301"></a>                            <span class="n">passed_checks</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="__span-16-302"><a id="__codelineno-16-302" name="__codelineno-16-302" href="#__codelineno-16-302"></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="__span-16-303"><a id="__codelineno-16-303" name="__codelineno-16-303" href="#__codelineno-16-303"></a>                    <span class="n">total_checks</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="__span-16-304"><a id="__codelineno-16-304" name="__codelineno-16-304" href="#__codelineno-16-304"></a>                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">bool</span><span class="p">)</span> <span class="ow">and</span> <span class="n">value</span><span class="p">:</span>
</span><span id="__span-16-305"><a id="__codelineno-16-305" name="__codelineno-16-305" href="#__codelineno-16-305"></a>                        <span class="n">passed_checks</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="__span-16-306"><a id="__codelineno-16-306" name="__codelineno-16-306" href="#__codelineno-16-306"></a>                    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span> <span class="ow">and</span> <span class="n">value</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="__span-16-307"><a id="__codelineno-16-307" name="__codelineno-16-307" href="#__codelineno-16-307"></a>                        <span class="n">passed_checks</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="__span-16-308"><a id="__codelineno-16-308" name="__codelineno-16-308" href="#__codelineno-16-308"></a>
</span><span id="__span-16-309"><a id="__codelineno-16-309" name="__codelineno-16-309" href="#__codelineno-16-309"></a>        <span class="n">overall_compliance</span> <span class="o">=</span> <span class="p">(</span><span class="n">passed_checks</span> <span class="o">/</span> <span class="n">total_checks</span><span class="p">)</span> <span class="o">*</span> <span class="mi">100</span> <span class="k">if</span> <span class="n">total_checks</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="mi">0</span>
</span><span id="__span-16-310"><a id="__codelineno-16-310" name="__codelineno-16-310" href="#__codelineno-16-310"></a>
</span><span id="__span-16-311"><a id="__codelineno-16-311" name="__codelineno-16-311" href="#__codelineno-16-311"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;ğŸ“Š OVERALL COMPLIANCE SUMMARY&quot;</span><span class="p">)</span>
</span><span id="__span-16-312"><a id="__codelineno-16-312" name="__codelineno-16-312" href="#__codelineno-16-312"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;=&quot;</span> <span class="o">*</span> <span class="mi">30</span><span class="p">)</span>
</span><span id="__span-16-313"><a id="__codelineno-16-313" name="__codelineno-16-313" href="#__codelineno-16-313"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;âœ… Checks passed: </span><span class="si">{</span><span class="n">passed_checks</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-16-314"><a id="__codelineno-16-314" name="__codelineno-16-314" href="#__codelineno-16-314"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;âŒ Checks failed: </span><span class="si">{</span><span class="n">total_checks</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">passed_checks</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-16-315"><a id="__codelineno-16-315" name="__codelineno-16-315" href="#__codelineno-16-315"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ğŸ¯ Overall compliance: </span><span class="si">{</span><span class="n">overall_compliance</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2">%&quot;</span><span class="p">)</span>
</span><span id="__span-16-316"><a id="__codelineno-16-316" name="__codelineno-16-316" href="#__codelineno-16-316"></a>
</span><span id="__span-16-317"><a id="__codelineno-16-317" name="__codelineno-16-317" href="#__codelineno-16-317"></a>        <span class="k">if</span> <span class="n">overall_compliance</span> <span class="o">&gt;=</span> <span class="mi">90</span><span class="p">:</span>
</span><span id="__span-16-318"><a id="__codelineno-16-318" name="__codelineno-16-318" href="#__codelineno-16-318"></a>            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;ğŸ† EXCELLENT! Your site meets web standards!&quot;</span><span class="p">)</span>
</span><span id="__span-16-319"><a id="__codelineno-16-319" name="__codelineno-16-319" href="#__codelineno-16-319"></a>        <span class="k">elif</span> <span class="n">overall_compliance</span> <span class="o">&gt;=</span> <span class="mi">70</span><span class="p">:</span>
</span><span id="__span-16-320"><a id="__codelineno-16-320" name="__codelineno-16-320" href="#__codelineno-16-320"></a>            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;âœ… GOOD! Minor improvements needed&quot;</span><span class="p">)</span>
</span><span id="__span-16-321"><a id="__codelineno-16-321" name="__codelineno-16-321" href="#__codelineno-16-321"></a>        <span class="k">elif</span> <span class="n">overall_compliance</span> <span class="o">&gt;=</span> <span class="mi">50</span><span class="p">:</span>
</span><span id="__span-16-322"><a id="__codelineno-16-322" name="__codelineno-16-322" href="#__codelineno-16-322"></a>            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;âš ï¸ NEEDS WORK! Several issues to address&quot;</span><span class="p">)</span>
</span><span id="__span-16-323"><a id="__codelineno-16-323" name="__codelineno-16-323" href="#__codelineno-16-323"></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="__span-16-324"><a id="__codelineno-16-324" name="__codelineno-16-324" href="#__codelineno-16-324"></a>            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;ğŸš¨ CRITICAL! Major standards violations detected&quot;</span><span class="p">)</span>
</span><span id="__span-16-325"><a id="__codelineno-16-325" name="__codelineno-16-325" href="#__codelineno-16-325"></a>
</span><span id="__span-16-326"><a id="__codelineno-16-326" name="__codelineno-16-326" href="#__codelineno-16-326"></a>        <span class="k">return</span> <span class="p">{</span>
</span><span id="__span-16-327"><a id="__codelineno-16-327" name="__codelineno-16-327" href="#__codelineno-16-327"></a>            <span class="s1">&#39;html_validation&#39;</span><span class="p">:</span> <span class="n">html_results</span><span class="p">,</span>
</span><span id="__span-16-328"><a id="__codelineno-16-328" name="__codelineno-16-328" href="#__codelineno-16-328"></a>            <span class="s1">&#39;internationalization&#39;</span><span class="p">:</span> <span class="n">i18n_results</span><span class="p">,</span>
</span><span id="__span-16-329"><a id="__codelineno-16-329" name="__codelineno-16-329" href="#__codelineno-16-329"></a>            <span class="s1">&#39;security_privacy&#39;</span><span class="p">:</span> <span class="n">security_results</span><span class="p">,</span>
</span><span id="__span-16-330"><a id="__codelineno-16-330" name="__codelineno-16-330" href="#__codelineno-16-330"></a>            <span class="s1">&#39;structured_data&#39;</span><span class="p">:</span> <span class="n">json_ld</span><span class="p">,</span>
</span><span id="__span-16-331"><a id="__codelineno-16-331" name="__codelineno-16-331" href="#__codelineno-16-331"></a>            <span class="s1">&#39;overall_compliance&#39;</span><span class="p">:</span> <span class="n">overall_compliance</span>
</span><span id="__span-16-332"><a id="__codelineno-16-332" name="__codelineno-16-332" href="#__codelineno-16-332"></a>        <span class="p">}</span>
</span><span id="__span-16-333"><a id="__codelineno-16-333" name="__codelineno-16-333" href="#__codelineno-16-333"></a>
</span><span id="__span-16-334"><a id="__codelineno-16-334" name="__codelineno-16-334" href="#__codelineno-16-334"></a><span class="c1"># Create standards checker and run demo</span>
</span><span id="__span-16-335"><a id="__codelineno-16-335" name="__codelineno-16-335" href="#__codelineno-16-335"></a><span class="n">standards_checker</span> <span class="o">=</span> <span class="n">WebStandardsChecker</span><span class="p">()</span>
</span><span id="__span-16-336"><a id="__codelineno-16-336" name="__codelineno-16-336" href="#__codelineno-16-336"></a>
</span><span id="__span-16-337"><a id="__codelineno-16-337" name="__codelineno-16-337" href="#__codelineno-16-337"></a><span class="c1"># Sample HTML for testing</span>
</span><span id="__span-16-338"><a id="__codelineno-16-338" name="__codelineno-16-338" href="#__codelineno-16-338"></a><span class="n">sample_html</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
</span><span id="__span-16-339"><a id="__codelineno-16-339" name="__codelineno-16-339" href="#__codelineno-16-339"></a><span class="s2">&lt;!DOCTYPE html&gt;</span>
</span><span id="__span-16-340"><a id="__codelineno-16-340" name="__codelineno-16-340" href="#__codelineno-16-340"></a><span class="s2">&lt;html lang=&quot;en&quot;&gt;</span>
</span><span id="__span-16-341"><a id="__codelineno-16-341" name="__codelineno-16-341" href="#__codelineno-16-341"></a><span class="s2">&lt;head&gt;</span>
</span><span id="__span-16-342"><a id="__codelineno-16-342" name="__codelineno-16-342" href="#__codelineno-16-342"></a><span class="s2">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span>
</span><span id="__span-16-343"><a id="__codelineno-16-343" name="__codelineno-16-343" href="#__codelineno-16-343"></a><span class="s2">    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</span>
</span><span id="__span-16-344"><a id="__codelineno-16-344" name="__codelineno-16-344" href="#__codelineno-16-344"></a><span class="s2">    &lt;title&gt;Modern Web Standards Example&lt;/title&gt;</span>
</span><span id="__span-16-345"><a id="__codelineno-16-345" name="__codelineno-16-345" href="#__codelineno-16-345"></a><span class="s2">&lt;/head&gt;</span>
</span><span id="__span-16-346"><a id="__codelineno-16-346" name="__codelineno-16-346" href="#__codelineno-16-346"></a><span class="s2">&lt;body&gt;</span>
</span><span id="__span-16-347"><a id="__codelineno-16-347" name="__codelineno-16-347" href="#__codelineno-16-347"></a><span class="s2">    &lt;header&gt;</span>
</span><span id="__span-16-348"><a id="__codelineno-16-348" name="__codelineno-16-348" href="#__codelineno-16-348"></a><span class="s2">        &lt;nav&gt;</span>
</span><span id="__span-16-349"><a id="__codelineno-16-349" name="__codelineno-16-349" href="#__codelineno-16-349"></a><span class="s2">            &lt;h1&gt;My Website&lt;/h1&gt;</span>
</span><span id="__span-16-350"><a id="__codelineno-16-350" name="__codelineno-16-350" href="#__codelineno-16-350"></a><span class="s2">        &lt;/nav&gt;</span>
</span><span id="__span-16-351"><a id="__codelineno-16-351" name="__codelineno-16-351" href="#__codelineno-16-351"></a><span class="s2">    &lt;/header&gt;</span>
</span><span id="__span-16-352"><a id="__codelineno-16-352" name="__codelineno-16-352" href="#__codelineno-16-352"></a><span class="s2">    &lt;main&gt;</span>
</span><span id="__span-16-353"><a id="__codelineno-16-353" name="__codelineno-16-353" href="#__codelineno-16-353"></a><span class="s2">        &lt;article&gt;</span>
</span><span id="__span-16-354"><a id="__codelineno-16-354" name="__codelineno-16-354" href="#__codelineno-16-354"></a><span class="s2">            &lt;h2&gt;Article Title&lt;/h2&gt;</span>
</span><span id="__span-16-355"><a id="__codelineno-16-355" name="__codelineno-16-355" href="#__codelineno-16-355"></a><span class="s2">            &lt;p&gt;Content goes here...&lt;/p&gt;</span>
</span><span id="__span-16-356"><a id="__codelineno-16-356" name="__codelineno-16-356" href="#__codelineno-16-356"></a><span class="s2">            &lt;img src=&quot;image.jpg&quot; alt=&quot;Descriptive alt text&quot;&gt;</span>
</span><span id="__span-16-357"><a id="__codelineno-16-357" name="__codelineno-16-357" href="#__codelineno-16-357"></a><span class="s2">        &lt;/article&gt;</span>
</span><span id="__span-16-358"><a id="__codelineno-16-358" name="__codelineno-16-358" href="#__codelineno-16-358"></a><span class="s2">    &lt;/main&gt;</span>
</span><span id="__span-16-359"><a id="__codelineno-16-359" name="__codelineno-16-359" href="#__codelineno-16-359"></a><span class="s2">    &lt;footer&gt;</span>
</span><span id="__span-16-360"><a id="__codelineno-16-360" name="__codelineno-16-360" href="#__codelineno-16-360"></a><span class="s2">        &lt;p&gt;&amp;copy; 2024 My Website&lt;/p&gt;</span>
</span><span id="__span-16-361"><a id="__codelineno-16-361" name="__codelineno-16-361" href="#__codelineno-16-361"></a><span class="s2">    &lt;/footer&gt;</span>
</span><span id="__span-16-362"><a id="__codelineno-16-362" name="__codelineno-16-362" href="#__codelineno-16-362"></a><span class="s2">&lt;/body&gt;</span>
</span><span id="__span-16-363"><a id="__codelineno-16-363" name="__codelineno-16-363" href="#__codelineno-16-363"></a><span class="s2">&lt;/html&gt;</span>
</span><span id="__span-16-364"><a id="__codelineno-16-364" name="__codelineno-16-364" href="#__codelineno-16-364"></a><span class="s2">&quot;&quot;&quot;</span>
</span><span id="__span-16-365"><a id="__codelineno-16-365" name="__codelineno-16-365" href="#__codelineno-16-365"></a>
</span><span id="__span-16-366"><a id="__codelineno-16-366" name="__codelineno-16-366" href="#__codelineno-16-366"></a><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;ğŸ” TESTING WEB STANDARDS COMPLIANCE&quot;</span><span class="p">)</span>
</span><span id="__span-16-367"><a id="__codelineno-16-367" name="__codelineno-16-367" href="#__codelineno-16-367"></a><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Sample HTML page audit results:&quot;</span><span class="p">)</span>
</span><span id="__span-16-368"><a id="__codelineno-16-368" name="__codelineno-16-368" href="#__codelineno-16-368"></a><span class="nb">print</span><span class="p">()</span>
</span><span id="__span-16-369"><a id="__codelineno-16-369" name="__codelineno-16-369" href="#__codelineno-16-369"></a>
</span><span id="__span-16-370"><a id="__codelineno-16-370" name="__codelineno-16-370" href="#__codelineno-16-370"></a><span class="c1"># Run comprehensive audit on sample HTML</span>
</span><span id="__span-16-371"><a id="__codelineno-16-371" name="__codelineno-16-371" href="#__codelineno-16-371"></a><span class="n">audit_results</span> <span class="o">=</span> <span class="n">standards_checker</span><span class="o">.</span><span class="n">run_comprehensive_audit</span><span class="p">(</span><span class="n">sample_html</span><span class="p">)</span>
</span><span id="__span-16-372"><a id="__codelineno-16-372" name="__codelineno-16-372" href="#__codelineno-16-372"></a>
</span><span id="__span-16-373"><a id="__codelineno-16-373" name="__codelineno-16-373" href="#__codelineno-16-373"></a><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">ğŸ’¡ WEB STANDARDS BEST PRACTICES:&quot;</span><span class="p">)</span>
</span><span id="__span-16-374"><a id="__codelineno-16-374" name="__codelineno-16-374" href="#__codelineno-16-374"></a><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;1. Always include proper DOCTYPE and HTML structure&quot;</span><span class="p">)</span>
</span><span id="__span-16-375"><a id="__codelineno-16-375" name="__codelineno-16-375" href="#__codelineno-16-375"></a><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;2. Use semantic HTML5 elements (header, nav, main, article, etc.)&quot;</span><span class="p">)</span>
</span><span id="__span-16-376"><a id="__codelineno-16-376" name="__codelineno-16-376" href="#__codelineno-16-376"></a><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;3. Ensure accessibility with alt text, ARIA labels, and proper contrast&quot;</span><span class="p">)</span>
</span><span id="__span-16-377"><a id="__codelineno-16-377" name="__codelineno-16-377" href="#__codelineno-16-377"></a><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;4. Support internationalization with lang attributes and UTF-8&quot;</span><span class="p">)</span>
</span><span id="__span-16-378"><a id="__codelineno-16-378" name="__codelineno-16-378" href="#__codelineno-16-378"></a><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;5. Implement security headers and use HTTPS&quot;</span><span class="p">)</span>
</span><span id="__span-16-379"><a id="__codelineno-16-379" name="__codelineno-16-379" href="#__codelineno-16-379"></a><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;6. Add structured data for better search engine understanding&quot;</span><span class="p">)</span>
</span><span id="__span-16-380"><a id="__codelineno-16-380" name="__codelineno-16-380" href="#__codelineno-16-380"></a><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;7. Test with real W3C validators and accessibility tools&quot;</span><span class="p">)</span>
</span></code></pre></div>
</details>
<p><strong>ğŸŒ Key Standards Organizations &amp; Their Impact:</strong></p>
<table>
<thead>
<tr>
<th>Organization</th>
<th>Focus Area</th>
<th>Key Standards</th>
<th>Real-World Impact</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>W3C</strong></td>
<td>Web technologies</td>
<td>HTML5, CSS3, WCAG</td>
<td>Universal browser compatibility</td>
</tr>
<tr>
<td><strong>WHATWG</strong></td>
<td>Living standards</td>
<td>HTML Living Standard</td>
<td>Faster web innovation</td>
</tr>
<tr>
<td><strong>IETF</strong></td>
<td>Internet protocols</td>
<td>HTTP, TLS, DNS</td>
<td>Secure internet infrastructure</td>
</tr>
<tr>
<td><strong>Ecma International</strong></td>
<td>Programming languages</td>
<td>ECMAScript (JavaScript)</td>
<td>Consistent scripting across platforms</td>
</tr>
<tr>
<td><strong>IEEE</strong></td>
<td>Networking standards</td>
<td>Wi-Fi, Ethernet</td>
<td>Wireless and wired connectivity</td>
</tr>
<tr>
<td><strong>ISO</strong></td>
<td>International standards</td>
<td>ISO 27001, ISO 9001</td>
<td>Security and quality management</td>
</tr>
</tbody>
</table>
<h3 id="system-architecture-building-the-digital-backbone">System Architecture: Building the Digital Backbone ğŸ—ï¸âš¡<a class="headerlink" href="#system-architecture-building-the-digital-backbone" title="Permanent link">&para;</a></h3>
<p>Modern web applications are like digital citiesâ€”they need solid infrastructure, efficient transportation systems, and reliable utilities to support millions of users. Understanding system architecture is crucial because it determines whether your app can handle 10 users or 10 million users.</p>
<details class="example">
<summary>ğŸ¯ Multi-Tier Architecture example</summary>
<div class="language-python highlight"><pre><span></span><code><span id="__span-17-1"><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">sqlite3</span>
</span><span id="__span-17-2"><a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a><span class="kn">import</span><span class="w"> </span><span class="nn">json</span>
</span><span id="__span-17-3"><a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a><span class="kn">import</span><span class="w"> </span><span class="nn">time</span>
</span><span id="__span-17-4"><a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a><span class="kn">import</span><span class="w"> </span><span class="nn">threading</span>
</span><span id="__span-17-5"><a id="__codelineno-17-5" name="__codelineno-17-5" href="#__codelineno-17-5"></a><span class="kn">from</span><span class="w"> </span><span class="nn">datetime</span><span class="w"> </span><span class="kn">import</span> <span class="n">datetime</span>
</span><span id="__span-17-6"><a id="__codelineno-17-6" name="__codelineno-17-6" href="#__codelineno-17-6"></a><span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">List</span><span class="p">,</span> <span class="n">Any</span><span class="p">,</span> <span class="n">Optional</span>
</span><span id="__span-17-7"><a id="__codelineno-17-7" name="__codelineno-17-7" href="#__codelineno-17-7"></a><span class="kn">import</span><span class="w"> </span><span class="nn">hashlib</span>
</span><span id="__span-17-8"><a id="__codelineno-17-8" name="__codelineno-17-8" href="#__codelineno-17-8"></a><span class="kn">import</span><span class="w"> </span><span class="nn">uuid</span>
</span><span id="__span-17-9"><a id="__codelineno-17-9" name="__codelineno-17-9" href="#__codelineno-17-9"></a>
</span><span id="__span-17-10"><a id="__codelineno-17-10" name="__codelineno-17-10" href="#__codelineno-17-10"></a><span class="k">class</span><span class="w"> </span><span class="nc">SystemArchitectureDemo</span><span class="p">:</span>
</span><span id="__span-17-11"><a id="__codelineno-17-11" name="__codelineno-17-11" href="#__codelineno-17-11"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Complete demonstration of modern web system architecture&quot;&quot;&quot;</span>
</span><span id="__span-17-12"><a id="__codelineno-17-12" name="__codelineno-17-12" href="#__codelineno-17-12"></a>
</span><span id="__span-17-13"><a id="__codelineno-17-13" name="__codelineno-17-13" href="#__codelineno-17-13"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-17-14"><a id="__codelineno-17-14" name="__codelineno-17-14" href="#__codelineno-17-14"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">database</span> <span class="o">=</span> <span class="n">DatabaseTier</span><span class="p">()</span>
</span><span id="__span-17-15"><a id="__codelineno-17-15" name="__codelineno-17-15" href="#__codelineno-17-15"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">business_logic</span> <span class="o">=</span> <span class="n">BusinessLogicTier</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">database</span><span class="p">)</span>
</span><span id="__span-17-16"><a id="__codelineno-17-16" name="__codelineno-17-16" href="#__codelineno-17-16"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">presentation</span> <span class="o">=</span> <span class="n">PresentationTier</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">business_logic</span><span class="p">)</span>
</span><span id="__span-17-17"><a id="__codelineno-17-17" name="__codelineno-17-17" href="#__codelineno-17-17"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">monitoring</span> <span class="o">=</span> <span class="n">MonitoringSystem</span><span class="p">()</span>
</span><span id="__span-17-18"><a id="__codelineno-17-18" name="__codelineno-17-18" href="#__codelineno-17-18"></a>
</span><span id="__span-17-19"><a id="__codelineno-17-19" name="__codelineno-17-19" href="#__codelineno-17-19"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;ğŸ—ï¸ System Architecture Demo Initialized&quot;</span><span class="p">)</span>
</span><span id="__span-17-20"><a id="__codelineno-17-20" name="__codelineno-17-20" href="#__codelineno-17-20"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Tiers: Presentation â†’ Business Logic â†’ Data&quot;</span><span class="p">)</span>
</span><span id="__span-17-21"><a id="__codelineno-17-21" name="__codelineno-17-21" href="#__codelineno-17-21"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Features: Caching, Load Balancing, Monitoring&quot;</span><span class="p">)</span>
</span><span id="__span-17-22"><a id="__codelineno-17-22" name="__codelineno-17-22" href="#__codelineno-17-22"></a>
</span><span id="__span-17-23"><a id="__codelineno-17-23" name="__codelineno-17-23" href="#__codelineno-17-23"></a><span class="k">class</span><span class="w"> </span><span class="nc">DatabaseTier</span><span class="p">:</span>
</span><span id="__span-17-24"><a id="__codelineno-17-24" name="__codelineno-17-24" href="#__codelineno-17-24"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Data Access Layer - Handles all database operations&quot;&quot;&quot;</span>
</span><span id="__span-17-25"><a id="__codelineno-17-25" name="__codelineno-17-25" href="#__codelineno-17-25"></a>
</span><span id="__span-17-26"><a id="__codelineno-17-26" name="__codelineno-17-26" href="#__codelineno-17-26"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-17-27"><a id="__codelineno-17-27" name="__codelineno-17-27" href="#__codelineno-17-27"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">connection_pool</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="__span-17-28"><a id="__codelineno-17-28" name="__codelineno-17-28" href="#__codelineno-17-28"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">cache</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="__span-17-29"><a id="__codelineno-17-29" name="__codelineno-17-29" href="#__codelineno-17-29"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">cache_expiry</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="__span-17-30"><a id="__codelineno-17-30" name="__codelineno-17-30" href="#__codelineno-17-30"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">init_database</span><span class="p">()</span>
</span><span id="__span-17-31"><a id="__codelineno-17-31" name="__codelineno-17-31" href="#__codelineno-17-31"></a>
</span><span id="__span-17-32"><a id="__codelineno-17-32" name="__codelineno-17-32" href="#__codelineno-17-32"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;ğŸ’¾ Database Tier initialized&quot;</span><span class="p">)</span>
</span><span id="__span-17-33"><a id="__codelineno-17-33" name="__codelineno-17-33" href="#__codelineno-17-33"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;   âœ… Connection pooling&quot;</span><span class="p">)</span>
</span><span id="__span-17-34"><a id="__codelineno-17-34" name="__codelineno-17-34" href="#__codelineno-17-34"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;   âœ… Query caching&quot;</span><span class="p">)</span>
</span><span id="__span-17-35"><a id="__codelineno-17-35" name="__codelineno-17-35" href="#__codelineno-17-35"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;   âœ… Multiple database support&quot;</span><span class="p">)</span>
</span><span id="__span-17-36"><a id="__codelineno-17-36" name="__codelineno-17-36" href="#__codelineno-17-36"></a>
</span><span id="__span-17-37"><a id="__codelineno-17-37" name="__codelineno-17-37" href="#__codelineno-17-37"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">init_database</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-17-38"><a id="__codelineno-17-38" name="__codelineno-17-38" href="#__codelineno-17-38"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize database with proper schema&quot;&quot;&quot;</span>
</span><span id="__span-17-39"><a id="__codelineno-17-39" name="__codelineno-17-39" href="#__codelineno-17-39"></a>
</span><span id="__span-17-40"><a id="__codelineno-17-40" name="__codelineno-17-40" href="#__codelineno-17-40"></a>        <span class="n">conn</span> <span class="o">=</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;system_demo.db&#39;</span><span class="p">,</span> <span class="n">check_same_thread</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="__span-17-41"><a id="__codelineno-17-41" name="__codelineno-17-41" href="#__codelineno-17-41"></a>        <span class="n">cursor</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
</span><span id="__span-17-42"><a id="__codelineno-17-42" name="__codelineno-17-42" href="#__codelineno-17-42"></a>
</span><span id="__span-17-43"><a id="__codelineno-17-43" name="__codelineno-17-43" href="#__codelineno-17-43"></a>        <span class="c1"># Users table</span>
</span><span id="__span-17-44"><a id="__codelineno-17-44" name="__codelineno-17-44" href="#__codelineno-17-44"></a>        <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
</span><span id="__span-17-45"><a id="__codelineno-17-45" name="__codelineno-17-45" href="#__codelineno-17-45"></a><span class="s1">            CREATE TABLE IF NOT EXISTS users (</span>
</span><span id="__span-17-46"><a id="__codelineno-17-46" name="__codelineno-17-46" href="#__codelineno-17-46"></a><span class="s1">                id INTEGER PRIMARY KEY AUTOINCREMENT,</span>
</span><span id="__span-17-47"><a id="__codelineno-17-47" name="__codelineno-17-47" href="#__codelineno-17-47"></a><span class="s1">                username TEXT UNIQUE NOT NULL,</span>
</span><span id="__span-17-48"><a id="__codelineno-17-48" name="__codelineno-17-48" href="#__codelineno-17-48"></a><span class="s1">                email TEXT UNIQUE NOT NULL,</span>
</span><span id="__span-17-49"><a id="__codelineno-17-49" name="__codelineno-17-49" href="#__codelineno-17-49"></a><span class="s1">                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,</span>
</span><span id="__span-17-50"><a id="__codelineno-17-50" name="__codelineno-17-50" href="#__codelineno-17-50"></a><span class="s1">                last_active TIMESTAMP,</span>
</span><span id="__span-17-51"><a id="__codelineno-17-51" name="__codelineno-17-51" href="#__codelineno-17-51"></a><span class="s1">                user_data JSON</span>
</span><span id="__span-17-52"><a id="__codelineno-17-52" name="__codelineno-17-52" href="#__codelineno-17-52"></a><span class="s1">            )</span>
</span><span id="__span-17-53"><a id="__codelineno-17-53" name="__codelineno-17-53" href="#__codelineno-17-53"></a><span class="s1">        &#39;&#39;&#39;</span><span class="p">)</span>
</span><span id="__span-17-54"><a id="__codelineno-17-54" name="__codelineno-17-54" href="#__codelineno-17-54"></a>
</span><span id="__span-17-55"><a id="__codelineno-17-55" name="__codelineno-17-55" href="#__codelineno-17-55"></a>        <span class="c1"># Products table (for e-commerce example)</span>
</span><span id="__span-17-56"><a id="__codelineno-17-56" name="__codelineno-17-56" href="#__codelineno-17-56"></a>        <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
</span><span id="__span-17-57"><a id="__codelineno-17-57" name="__codelineno-17-57" href="#__codelineno-17-57"></a><span class="s1">            CREATE TABLE IF NOT EXISTS products (</span>
</span><span id="__span-17-58"><a id="__codelineno-17-58" name="__codelineno-17-58" href="#__codelineno-17-58"></a><span class="s1">                id INTEGER PRIMARY KEY AUTOINCREMENT,</span>
</span><span id="__span-17-59"><a id="__codelineno-17-59" name="__codelineno-17-59" href="#__codelineno-17-59"></a><span class="s1">                name TEXT NOT NULL,</span>
</span><span id="__span-17-60"><a id="__codelineno-17-60" name="__codelineno-17-60" href="#__codelineno-17-60"></a><span class="s1">                price DECIMAL(10,2) NOT NULL,</span>
</span><span id="__span-17-61"><a id="__codelineno-17-61" name="__codelineno-17-61" href="#__codelineno-17-61"></a><span class="s1">                category TEXT NOT NULL,</span>
</span><span id="__span-17-62"><a id="__codelineno-17-62" name="__codelineno-17-62" href="#__codelineno-17-62"></a><span class="s1">                stock_quantity INTEGER DEFAULT 0,</span>
</span><span id="__span-17-63"><a id="__codelineno-17-63" name="__codelineno-17-63" href="#__codelineno-17-63"></a><span class="s1">                description TEXT,</span>
</span><span id="__span-17-64"><a id="__codelineno-17-64" name="__codelineno-17-64" href="#__codelineno-17-64"></a><span class="s1">                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP</span>
</span><span id="__span-17-65"><a id="__codelineno-17-65" name="__codelineno-17-65" href="#__codelineno-17-65"></a><span class="s1">            )</span>
</span><span id="__span-17-66"><a id="__codelineno-17-66" name="__codelineno-17-66" href="#__codelineno-17-66"></a><span class="s1">        &#39;&#39;&#39;</span><span class="p">)</span>
</span><span id="__span-17-67"><a id="__codelineno-17-67" name="__codelineno-17-67" href="#__codelineno-17-67"></a>
</span><span id="__span-17-68"><a id="__codelineno-17-68" name="__codelineno-17-68" href="#__codelineno-17-68"></a>        <span class="c1"># Orders table</span>
</span><span id="__span-17-69"><a id="__codelineno-17-69" name="__codelineno-17-69" href="#__codelineno-17-69"></a>        <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
</span><span id="__span-17-70"><a id="__codelineno-17-70" name="__codelineno-17-70" href="#__codelineno-17-70"></a><span class="s1">            CREATE TABLE IF NOT EXISTS orders (</span>
</span><span id="__span-17-71"><a id="__codelineno-17-71" name="__codelineno-17-71" href="#__codelineno-17-71"></a><span class="s1">                id INTEGER PRIMARY KEY AUTOINCREMENT,</span>
</span><span id="__span-17-72"><a id="__codelineno-17-72" name="__codelineno-17-72" href="#__codelineno-17-72"></a><span class="s1">                user_id INTEGER NOT NULL,</span>
</span><span id="__span-17-73"><a id="__codelineno-17-73" name="__codelineno-17-73" href="#__codelineno-17-73"></a><span class="s1">                total_amount DECIMAL(10,2) NOT NULL,</span>
</span><span id="__span-17-74"><a id="__codelineno-17-74" name="__codelineno-17-74" href="#__codelineno-17-74"></a><span class="s1">                status TEXT DEFAULT &#39;pending&#39;,</span>
</span><span id="__span-17-75"><a id="__codelineno-17-75" name="__codelineno-17-75" href="#__codelineno-17-75"></a><span class="s1">                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,</span>
</span><span id="__span-17-76"><a id="__codelineno-17-76" name="__codelineno-17-76" href="#__codelineno-17-76"></a><span class="s1">                FOREIGN KEY (user_id) REFERENCES users (id)</span>
</span><span id="__span-17-77"><a id="__codelineno-17-77" name="__codelineno-17-77" href="#__codelineno-17-77"></a><span class="s1">            )</span>
</span><span id="__span-17-78"><a id="__codelineno-17-78" name="__codelineno-17-78" href="#__codelineno-17-78"></a><span class="s1">        &#39;&#39;&#39;</span><span class="p">)</span>
</span><span id="__span-17-79"><a id="__codelineno-17-79" name="__codelineno-17-79" href="#__codelineno-17-79"></a>
</span><span id="__span-17-80"><a id="__codelineno-17-80" name="__codelineno-17-80" href="#__codelineno-17-80"></a>        <span class="c1"># Performance monitoring table</span>
</span><span id="__span-17-81"><a id="__codelineno-17-81" name="__codelineno-17-81" href="#__codelineno-17-81"></a>        <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
</span><span id="__span-17-82"><a id="__codelineno-17-82" name="__codelineno-17-82" href="#__codelineno-17-82"></a><span class="s1">            CREATE TABLE IF NOT EXISTS performance_metrics (</span>
</span><span id="__span-17-83"><a id="__codelineno-17-83" name="__codelineno-17-83" href="#__codelineno-17-83"></a><span class="s1">                id INTEGER PRIMARY KEY AUTOINCREMENT,</span>
</span><span id="__span-17-84"><a id="__codelineno-17-84" name="__codelineno-17-84" href="#__codelineno-17-84"></a><span class="s1">                metric_name TEXT NOT NULL,</span>
</span><span id="__span-17-85"><a id="__codelineno-17-85" name="__codelineno-17-85" href="#__codelineno-17-85"></a><span class="s1">                metric_value REAL NOT NULL,</span>
</span><span id="__span-17-86"><a id="__codelineno-17-86" name="__codelineno-17-86" href="#__codelineno-17-86"></a><span class="s1">                timestamp TIMESTAMP DEFAULT CURRENT_TIMESTAMP,</span>
</span><span id="__span-17-87"><a id="__codelineno-17-87" name="__codelineno-17-87" href="#__codelineno-17-87"></a><span class="s1">                additional_data JSON</span>
</span><span id="__span-17-88"><a id="__codelineno-17-88" name="__codelineno-17-88" href="#__codelineno-17-88"></a><span class="s1">            )</span>
</span><span id="__span-17-89"><a id="__codelineno-17-89" name="__codelineno-17-89" href="#__codelineno-17-89"></a><span class="s1">        &#39;&#39;&#39;</span><span class="p">)</span>
</span><span id="__span-17-90"><a id="__codelineno-17-90" name="__codelineno-17-90" href="#__codelineno-17-90"></a>
</span><span id="__span-17-91"><a id="__codelineno-17-91" name="__codelineno-17-91" href="#__codelineno-17-91"></a>        <span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
</span><span id="__span-17-92"><a id="__codelineno-17-92" name="__codelineno-17-92" href="#__codelineno-17-92"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">connection_pool</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">conn</span><span class="p">)</span>
</span><span id="__span-17-93"><a id="__codelineno-17-93" name="__codelineno-17-93" href="#__codelineno-17-93"></a>
</span><span id="__span-17-94"><a id="__codelineno-17-94" name="__codelineno-17-94" href="#__codelineno-17-94"></a>        <span class="c1"># Insert sample data</span>
</span><span id="__span-17-95"><a id="__codelineno-17-95" name="__codelineno-17-95" href="#__codelineno-17-95"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">insert_sample_data</span><span class="p">(</span><span class="n">conn</span><span class="p">)</span>
</span><span id="__span-17-96"><a id="__codelineno-17-96" name="__codelineno-17-96" href="#__codelineno-17-96"></a>
</span><span id="__span-17-97"><a id="__codelineno-17-97" name="__codelineno-17-97" href="#__codelineno-17-97"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">insert_sample_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">conn</span><span class="p">):</span>
</span><span id="__span-17-98"><a id="__codelineno-17-98" name="__codelineno-17-98" href="#__codelineno-17-98"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Insert sample data for demonstration&quot;&quot;&quot;</span>
</span><span id="__span-17-99"><a id="__codelineno-17-99" name="__codelineno-17-99" href="#__codelineno-17-99"></a>
</span><span id="__span-17-100"><a id="__codelineno-17-100" name="__codelineno-17-100" href="#__codelineno-17-100"></a>        <span class="n">cursor</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
</span><span id="__span-17-101"><a id="__codelineno-17-101" name="__codelineno-17-101" href="#__codelineno-17-101"></a>
</span><span id="__span-17-102"><a id="__codelineno-17-102" name="__codelineno-17-102" href="#__codelineno-17-102"></a>        <span class="c1"># Sample users</span>
</span><span id="__span-17-103"><a id="__codelineno-17-103" name="__codelineno-17-103" href="#__codelineno-17-103"></a>        <span class="n">sample_users</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="__span-17-104"><a id="__codelineno-17-104" name="__codelineno-17-104" href="#__codelineno-17-104"></a>            <span class="p">(</span><span class="s1">&#39;alice_developer&#39;</span><span class="p">,</span> <span class="s1">&#39;alice@tech.com&#39;</span><span class="p">,</span> <span class="s1">&#39;{&quot;role&quot;: &quot;developer&quot;, &quot;skills&quot;: [&quot;Python&quot;, &quot;JavaScript&quot;]}&#39;</span><span class="p">),</span>
</span><span id="__span-17-105"><a id="__codelineno-17-105" name="__codelineno-17-105" href="#__codelineno-17-105"></a>            <span class="p">(</span><span class="s1">&#39;bob_designer&#39;</span><span class="p">,</span> <span class="s1">&#39;bob@design.com&#39;</span><span class="p">,</span> <span class="s1">&#39;{&quot;role&quot;: &quot;designer&quot;, &quot;skills&quot;: [&quot;UI/UX&quot;, &quot;Figma&quot;]}&#39;</span><span class="p">),</span>
</span><span id="__span-17-106"><a id="__codelineno-17-106" name="__codelineno-17-106" href="#__codelineno-17-106"></a>            <span class="p">(</span><span class="s1">&#39;charlie_manager&#39;</span><span class="p">,</span> <span class="s1">&#39;charlie@biz.com&#39;</span><span class="p">,</span> <span class="s1">&#39;{&quot;role&quot;: &quot;manager&quot;, &quot;skills&quot;: [&quot;Leadership&quot;, &quot;Strategy&quot;]}&#39;</span><span class="p">)</span>
</span><span id="__span-17-107"><a id="__codelineno-17-107" name="__codelineno-17-107" href="#__codelineno-17-107"></a>        <span class="p">]</span>
</span><span id="__span-17-108"><a id="__codelineno-17-108" name="__codelineno-17-108" href="#__codelineno-17-108"></a>
</span><span id="__span-17-109"><a id="__codelineno-17-109" name="__codelineno-17-109" href="#__codelineno-17-109"></a>        <span class="k">for</span> <span class="n">username</span><span class="p">,</span> <span class="n">email</span><span class="p">,</span> <span class="n">user_data</span> <span class="ow">in</span> <span class="n">sample_users</span><span class="p">:</span>
</span><span id="__span-17-110"><a id="__codelineno-17-110" name="__codelineno-17-110" href="#__codelineno-17-110"></a>            <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;SELECT id FROM users WHERE username = ?&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">username</span><span class="p">,))</span>
</span><span id="__span-17-111"><a id="__codelineno-17-111" name="__codelineno-17-111" href="#__codelineno-17-111"></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchone</span><span class="p">():</span>
</span><span id="__span-17-112"><a id="__codelineno-17-112" name="__codelineno-17-112" href="#__codelineno-17-112"></a>                <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
</span><span id="__span-17-113"><a id="__codelineno-17-113" name="__codelineno-17-113" href="#__codelineno-17-113"></a><span class="s1">                    INSERT INTO users (username, email, user_data)</span>
</span><span id="__span-17-114"><a id="__codelineno-17-114" name="__codelineno-17-114" href="#__codelineno-17-114"></a><span class="s1">                    VALUES (?, ?, ?)</span>
</span><span id="__span-17-115"><a id="__codelineno-17-115" name="__codelineno-17-115" href="#__codelineno-17-115"></a><span class="s1">                &#39;&#39;&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">username</span><span class="p">,</span> <span class="n">email</span><span class="p">,</span> <span class="n">user_data</span><span class="p">))</span>
</span><span id="__span-17-116"><a id="__codelineno-17-116" name="__codelineno-17-116" href="#__codelineno-17-116"></a>
</span><span id="__span-17-117"><a id="__codelineno-17-117" name="__codelineno-17-117" href="#__codelineno-17-117"></a>        <span class="c1"># Sample products</span>
</span><span id="__span-17-118"><a id="__codelineno-17-118" name="__codelineno-17-118" href="#__codelineno-17-118"></a>        <span class="n">sample_products</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="__span-17-119"><a id="__codelineno-17-119" name="__codelineno-17-119" href="#__codelineno-17-119"></a>            <span class="p">(</span><span class="s1">&#39;Laptop Pro&#39;</span><span class="p">,</span> <span class="mf">1299.99</span><span class="p">,</span> <span class="s1">&#39;Electronics&#39;</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="s1">&#39;High-performance laptop for developers&#39;</span><span class="p">),</span>
</span><span id="__span-17-120"><a id="__codelineno-17-120" name="__codelineno-17-120" href="#__codelineno-17-120"></a>            <span class="p">(</span><span class="s1">&#39;Design Tablet&#39;</span><span class="p">,</span> <span class="mf">699.99</span><span class="p">,</span> <span class="s1">&#39;Electronics&#39;</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="s1">&#39;Professional drawing tablet&#39;</span><span class="p">),</span>
</span><span id="__span-17-121"><a id="__codelineno-17-121" name="__codelineno-17-121" href="#__codelineno-17-121"></a>            <span class="p">(</span><span class="s1">&#39;Office Chair&#39;</span><span class="p">,</span> <span class="mf">299.99</span><span class="p">,</span> <span class="s1">&#39;Furniture&#39;</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="s1">&#39;Ergonomic office chair&#39;</span><span class="p">),</span>
</span><span id="__span-17-122"><a id="__codelineno-17-122" name="__codelineno-17-122" href="#__codelineno-17-122"></a>            <span class="p">(</span><span class="s1">&#39;Desk Lamp&#39;</span><span class="p">,</span> <span class="mf">89.99</span><span class="p">,</span> <span class="s1">&#39;Furniture&#39;</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="s1">&#39;LED desk lamp with adjustable brightness&#39;</span><span class="p">)</span>
</span><span id="__span-17-123"><a id="__codelineno-17-123" name="__codelineno-17-123" href="#__codelineno-17-123"></a>        <span class="p">]</span>
</span><span id="__span-17-124"><a id="__codelineno-17-124" name="__codelineno-17-124" href="#__codelineno-17-124"></a>
</span><span id="__span-17-125"><a id="__codelineno-17-125" name="__codelineno-17-125" href="#__codelineno-17-125"></a>        <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">price</span><span class="p">,</span> <span class="n">category</span><span class="p">,</span> <span class="n">stock</span><span class="p">,</span> <span class="n">description</span> <span class="ow">in</span> <span class="n">sample_products</span><span class="p">:</span>
</span><span id="__span-17-126"><a id="__codelineno-17-126" name="__codelineno-17-126" href="#__codelineno-17-126"></a>            <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;SELECT id FROM products WHERE name = ?&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">name</span><span class="p">,))</span>
</span><span id="__span-17-127"><a id="__codelineno-17-127" name="__codelineno-17-127" href="#__codelineno-17-127"></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchone</span><span class="p">():</span>
</span><span id="__span-17-128"><a id="__codelineno-17-128" name="__codelineno-17-128" href="#__codelineno-17-128"></a>                <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
</span><span id="__span-17-129"><a id="__codelineno-17-129" name="__codelineno-17-129" href="#__codelineno-17-129"></a><span class="s1">                    INSERT INTO products (name, price, category, stock_quantity, description)</span>
</span><span id="__span-17-130"><a id="__codelineno-17-130" name="__codelineno-17-130" href="#__codelineno-17-130"></a><span class="s1">                    VALUES (?, ?, ?, ?, ?)</span>
</span><span id="__span-17-131"><a id="__codelineno-17-131" name="__codelineno-17-131" href="#__codelineno-17-131"></a><span class="s1">                &#39;&#39;&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">price</span><span class="p">,</span> <span class="n">category</span><span class="p">,</span> <span class="n">stock</span><span class="p">,</span> <span class="n">description</span><span class="p">))</span>
</span><span id="__span-17-132"><a id="__codelineno-17-132" name="__codelineno-17-132" href="#__codelineno-17-132"></a>
</span><span id="__span-17-133"><a id="__codelineno-17-133" name="__codelineno-17-133" href="#__codelineno-17-133"></a>        <span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
</span><span id="__span-17-134"><a id="__codelineno-17-134" name="__codelineno-17-134" href="#__codelineno-17-134"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;   ğŸ“ Sample data inserted&quot;</span><span class="p">)</span>
</span><span id="__span-17-135"><a id="__codelineno-17-135" name="__codelineno-17-135" href="#__codelineno-17-135"></a>
</span><span id="__span-17-136"><a id="__codelineno-17-136" name="__codelineno-17-136" href="#__codelineno-17-136"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_connection</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-17-137"><a id="__codelineno-17-137" name="__codelineno-17-137" href="#__codelineno-17-137"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get database connection from pool&quot;&quot;&quot;</span>
</span><span id="__span-17-138"><a id="__codelineno-17-138" name="__codelineno-17-138" href="#__codelineno-17-138"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">connection_pool</span><span class="p">:</span>
</span><span id="__span-17-139"><a id="__codelineno-17-139" name="__codelineno-17-139" href="#__codelineno-17-139"></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">connection_pool</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="__span-17-140"><a id="__codelineno-17-140" name="__codelineno-17-140" href="#__codelineno-17-140"></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="__span-17-141"><a id="__codelineno-17-141" name="__codelineno-17-141" href="#__codelineno-17-141"></a>            <span class="k">return</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;system_demo.db&#39;</span><span class="p">,</span> <span class="n">check_same_thread</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="__span-17-142"><a id="__codelineno-17-142" name="__codelineno-17-142" href="#__codelineno-17-142"></a>
</span><span id="__span-17-143"><a id="__codelineno-17-143" name="__codelineno-17-143" href="#__codelineno-17-143"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">execute_query</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">query</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">params</span><span class="p">:</span> <span class="nb">tuple</span> <span class="o">=</span> <span class="p">(),</span> <span class="n">use_cache</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">]:</span>
</span><span id="__span-17-144"><a id="__codelineno-17-144" name="__codelineno-17-144" href="#__codelineno-17-144"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Execute database query with caching&quot;&quot;&quot;</span>
</span><span id="__span-17-145"><a id="__codelineno-17-145" name="__codelineno-17-145" href="#__codelineno-17-145"></a>
</span><span id="__span-17-146"><a id="__codelineno-17-146" name="__codelineno-17-146" href="#__codelineno-17-146"></a>        <span class="c1"># Create cache key</span>
</span><span id="__span-17-147"><a id="__codelineno-17-147" name="__codelineno-17-147" href="#__codelineno-17-147"></a>        <span class="n">cache_key</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">md5</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">query</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">params</span><span class="si">}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">encode</span><span class="p">())</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">()</span>
</span><span id="__span-17-148"><a id="__codelineno-17-148" name="__codelineno-17-148" href="#__codelineno-17-148"></a>
</span><span id="__span-17-149"><a id="__codelineno-17-149" name="__codelineno-17-149" href="#__codelineno-17-149"></a>        <span class="c1"># Check cache first</span>
</span><span id="__span-17-150"><a id="__codelineno-17-150" name="__codelineno-17-150" href="#__codelineno-17-150"></a>        <span class="k">if</span> <span class="n">use_cache</span> <span class="ow">and</span> <span class="n">cache_key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">cache</span><span class="p">:</span>
</span><span id="__span-17-151"><a id="__codelineno-17-151" name="__codelineno-17-151" href="#__codelineno-17-151"></a>            <span class="k">if</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">cache_expiry</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">cache_key</span><span class="p">,</span> <span class="mi">0</span><span class="p">):</span>
</span><span id="__span-17-152"><a id="__codelineno-17-152" name="__codelineno-17-152" href="#__codelineno-17-152"></a>                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   ğŸ’¨ Cache hit for query: </span><span class="si">{</span><span class="n">query</span><span class="p">[:</span><span class="mi">50</span><span class="p">]</span><span class="si">}</span><span class="s2">...&quot;</span><span class="p">)</span>
</span><span id="__span-17-153"><a id="__codelineno-17-153" name="__codelineno-17-153" href="#__codelineno-17-153"></a>                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">cache</span><span class="p">[</span><span class="n">cache_key</span><span class="p">]</span>
</span><span id="__span-17-154"><a id="__codelineno-17-154" name="__codelineno-17-154" href="#__codelineno-17-154"></a>
</span><span id="__span-17-155"><a id="__codelineno-17-155" name="__codelineno-17-155" href="#__codelineno-17-155"></a>        <span class="c1"># Execute query</span>
</span><span id="__span-17-156"><a id="__codelineno-17-156" name="__codelineno-17-156" href="#__codelineno-17-156"></a>        <span class="n">conn</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_connection</span><span class="p">()</span>
</span><span id="__span-17-157"><a id="__codelineno-17-157" name="__codelineno-17-157" href="#__codelineno-17-157"></a>        <span class="n">conn</span><span class="o">.</span><span class="n">row_factory</span> <span class="o">=</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">Row</span>
</span><span id="__span-17-158"><a id="__codelineno-17-158" name="__codelineno-17-158" href="#__codelineno-17-158"></a>        <span class="n">cursor</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
</span><span id="__span-17-159"><a id="__codelineno-17-159" name="__codelineno-17-159" href="#__codelineno-17-159"></a>
</span><span id="__span-17-160"><a id="__codelineno-17-160" name="__codelineno-17-160" href="#__codelineno-17-160"></a>        <span class="n">start_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
</span><span id="__span-17-161"><a id="__codelineno-17-161" name="__codelineno-17-161" href="#__codelineno-17-161"></a>        <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="n">params</span><span class="p">)</span>
</span><span id="__span-17-162"><a id="__codelineno-17-162" name="__codelineno-17-162" href="#__codelineno-17-162"></a>        <span class="n">results</span> <span class="o">=</span> <span class="p">[</span><span class="nb">dict</span><span class="p">(</span><span class="n">row</span><span class="p">)</span> <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()]</span>
</span><span id="__span-17-163"><a id="__codelineno-17-163" name="__codelineno-17-163" href="#__codelineno-17-163"></a>        <span class="n">execution_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start_time</span>
</span><span id="__span-17-164"><a id="__codelineno-17-164" name="__codelineno-17-164" href="#__codelineno-17-164"></a>
</span><span id="__span-17-165"><a id="__codelineno-17-165" name="__codelineno-17-165" href="#__codelineno-17-165"></a>        <span class="c1"># Cache results for 5 minutes</span>
</span><span id="__span-17-166"><a id="__codelineno-17-166" name="__codelineno-17-166" href="#__codelineno-17-166"></a>        <span class="k">if</span> <span class="n">use_cache</span><span class="p">:</span>
</span><span id="__span-17-167"><a id="__codelineno-17-167" name="__codelineno-17-167" href="#__codelineno-17-167"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">cache</span><span class="p">[</span><span class="n">cache_key</span><span class="p">]</span> <span class="o">=</span> <span class="n">results</span>
</span><span id="__span-17-168"><a id="__codelineno-17-168" name="__codelineno-17-168" href="#__codelineno-17-168"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">cache_expiry</span><span class="p">[</span><span class="n">cache_key</span><span class="p">]</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">+</span> <span class="mi">300</span>  <span class="c1"># 5 minutes</span>
</span><span id="__span-17-169"><a id="__codelineno-17-169" name="__codelineno-17-169" href="#__codelineno-17-169"></a>
</span><span id="__span-17-170"><a id="__codelineno-17-170" name="__codelineno-17-170" href="#__codelineno-17-170"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   âš¡ Query executed in </span><span class="si">{</span><span class="n">execution_time</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2">s: </span><span class="si">{</span><span class="n">query</span><span class="p">[:</span><span class="mi">50</span><span class="p">]</span><span class="si">}</span><span class="s2">...&quot;</span><span class="p">)</span>
</span><span id="__span-17-171"><a id="__codelineno-17-171" name="__codelineno-17-171" href="#__codelineno-17-171"></a>
</span><span id="__span-17-172"><a id="__codelineno-17-172" name="__codelineno-17-172" href="#__codelineno-17-172"></a>        <span class="c1"># Log performance metric</span>
</span><span id="__span-17-173"><a id="__codelineno-17-173" name="__codelineno-17-173" href="#__codelineno-17-173"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">log_performance_metric</span><span class="p">(</span><span class="s1">&#39;query_execution_time&#39;</span><span class="p">,</span> <span class="n">execution_time</span><span class="p">,</span> <span class="p">{</span>
</span><span id="__span-17-174"><a id="__codelineno-17-174" name="__codelineno-17-174" href="#__codelineno-17-174"></a>            <span class="s1">&#39;query&#39;</span><span class="p">:</span> <span class="n">query</span><span class="p">[:</span><span class="mi">100</span><span class="p">],</span>
</span><span id="__span-17-175"><a id="__codelineno-17-175" name="__codelineno-17-175" href="#__codelineno-17-175"></a>            <span class="s1">&#39;result_count&#39;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>
</span><span id="__span-17-176"><a id="__codelineno-17-176" name="__codelineno-17-176" href="#__codelineno-17-176"></a>        <span class="p">})</span>
</span><span id="__span-17-177"><a id="__codelineno-17-177" name="__codelineno-17-177" href="#__codelineno-17-177"></a>
</span><span id="__span-17-178"><a id="__codelineno-17-178" name="__codelineno-17-178" href="#__codelineno-17-178"></a>        <span class="k">return</span> <span class="n">results</span>
</span><span id="__span-17-179"><a id="__codelineno-17-179" name="__codelineno-17-179" href="#__codelineno-17-179"></a>
</span><span id="__span-17-180"><a id="__codelineno-17-180" name="__codelineno-17-180" href="#__codelineno-17-180"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">log_performance_metric</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">metric_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">Dict</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="__span-17-181"><a id="__codelineno-17-181" name="__codelineno-17-181" href="#__codelineno-17-181"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Log performance metrics&quot;&quot;&quot;</span>
</span><span id="__span-17-182"><a id="__codelineno-17-182" name="__codelineno-17-182" href="#__codelineno-17-182"></a>
</span><span id="__span-17-183"><a id="__codelineno-17-183" name="__codelineno-17-183" href="#__codelineno-17-183"></a>        <span class="n">conn</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_connection</span><span class="p">()</span>
</span><span id="__span-17-184"><a id="__codelineno-17-184" name="__codelineno-17-184" href="#__codelineno-17-184"></a>        <span class="n">cursor</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
</span><span id="__span-17-185"><a id="__codelineno-17-185" name="__codelineno-17-185" href="#__codelineno-17-185"></a>
</span><span id="__span-17-186"><a id="__codelineno-17-186" name="__codelineno-17-186" href="#__codelineno-17-186"></a>        <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
</span><span id="__span-17-187"><a id="__codelineno-17-187" name="__codelineno-17-187" href="#__codelineno-17-187"></a><span class="s1">            INSERT INTO performance_metrics (metric_name, metric_value, additional_data)</span>
</span><span id="__span-17-188"><a id="__codelineno-17-188" name="__codelineno-17-188" href="#__codelineno-17-188"></a><span class="s1">            VALUES (?, ?, ?)</span>
</span><span id="__span-17-189"><a id="__codelineno-17-189" name="__codelineno-17-189" href="#__codelineno-17-189"></a><span class="s1">        &#39;&#39;&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">metric_name</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="k">if</span> <span class="n">data</span> <span class="k">else</span> <span class="kc">None</span><span class="p">))</span>
</span><span id="__span-17-190"><a id="__codelineno-17-190" name="__codelineno-17-190" href="#__codelineno-17-190"></a>
</span><span id="__span-17-191"><a id="__codelineno-17-191" name="__codelineno-17-191" href="#__codelineno-17-191"></a>        <span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
</span><span id="__span-17-192"><a id="__codelineno-17-192" name="__codelineno-17-192" href="#__codelineno-17-192"></a>
</span><span id="__span-17-193"><a id="__codelineno-17-193" name="__codelineno-17-193" href="#__codelineno-17-193"></a><span class="k">class</span><span class="w"> </span><span class="nc">BusinessLogicTier</span><span class="p">:</span>
</span><span id="__span-17-194"><a id="__codelineno-17-194" name="__codelineno-17-194" href="#__codelineno-17-194"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Business Logic Layer - Handles application logic and rules&quot;&quot;&quot;</span>
</span><span id="__span-17-195"><a id="__codelineno-17-195" name="__codelineno-17-195" href="#__codelineno-17-195"></a>
</span><span id="__span-17-196"><a id="__codelineno-17-196" name="__codelineno-17-196" href="#__codelineno-17-196"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">database</span><span class="p">:</span> <span class="n">DatabaseTier</span><span class="p">):</span>
</span><span id="__span-17-197"><a id="__codelineno-17-197" name="__codelineno-17-197" href="#__codelineno-17-197"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">db</span> <span class="o">=</span> <span class="n">database</span>
</span><span id="__span-17-198"><a id="__codelineno-17-198" name="__codelineno-17-198" href="#__codelineno-17-198"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">cache</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="__span-17-199"><a id="__codelineno-17-199" name="__codelineno-17-199" href="#__codelineno-17-199"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">rate_limits</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="__span-17-200"><a id="__codelineno-17-200" name="__codelineno-17-200" href="#__codelineno-17-200"></a>
</span><span id="__span-17-201"><a id="__codelineno-17-201" name="__codelineno-17-201" href="#__codelineno-17-201"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;ğŸ§  Business Logic Tier initialized&quot;</span><span class="p">)</span>
</span><span id="__span-17-202"><a id="__codelineno-17-202" name="__codelineno-17-202" href="#__codelineno-17-202"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;   âœ… Data validation&quot;</span><span class="p">)</span>
</span><span id="__span-17-203"><a id="__codelineno-17-203" name="__codelineno-17-203" href="#__codelineno-17-203"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;   âœ… Business rules enforcement&quot;</span><span class="p">)</span>
</span><span id="__span-17-204"><a id="__codelineno-17-204" name="__codelineno-17-204" href="#__codelineno-17-204"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;   âœ… Rate limiting&quot;</span><span class="p">)</span>
</span><span id="__span-17-205"><a id="__codelineno-17-205" name="__codelineno-17-205" href="#__codelineno-17-205"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;   âœ… Caching strategies&quot;</span><span class="p">)</span>
</span><span id="__span-17-206"><a id="__codelineno-17-206" name="__codelineno-17-206" href="#__codelineno-17-206"></a>
</span><span id="__span-17-207"><a id="__codelineno-17-207" name="__codelineno-17-207" href="#__codelineno-17-207"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_user_profile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]:</span>
</span><span id="__span-17-208"><a id="__codelineno-17-208" name="__codelineno-17-208" href="#__codelineno-17-208"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get user profile with business logic&quot;&quot;&quot;</span>
</span><span id="__span-17-209"><a id="__codelineno-17-209" name="__codelineno-17-209" href="#__codelineno-17-209"></a>
</span><span id="__span-17-210"><a id="__codelineno-17-210" name="__codelineno-17-210" href="#__codelineno-17-210"></a>        <span class="c1"># Rate limiting check</span>
</span><span id="__span-17-211"><a id="__codelineno-17-211" name="__codelineno-17-211" href="#__codelineno-17-211"></a>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_rate_limit</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;user_profile_</span><span class="si">{</span><span class="n">user_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">window</span><span class="o">=</span><span class="mi">3600</span><span class="p">):</span>
</span><span id="__span-17-212"><a id="__codelineno-17-212" name="__codelineno-17-212" href="#__codelineno-17-212"></a>            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Rate limit exceeded&quot;</span><span class="p">)</span>
</span><span id="__span-17-213"><a id="__codelineno-17-213" name="__codelineno-17-213" href="#__codelineno-17-213"></a>
</span><span id="__span-17-214"><a id="__codelineno-17-214" name="__codelineno-17-214" href="#__codelineno-17-214"></a>        <span class="c1"># Get user data</span>
</span><span id="__span-17-215"><a id="__codelineno-17-215" name="__codelineno-17-215" href="#__codelineno-17-215"></a>        <span class="n">users</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">execute_query</span><span class="p">(</span>
</span><span id="__span-17-216"><a id="__codelineno-17-216" name="__codelineno-17-216" href="#__codelineno-17-216"></a>            <span class="s2">&quot;SELECT * FROM users WHERE id = ?&quot;</span><span class="p">,</span> 
</span><span id="__span-17-217"><a id="__codelineno-17-217" name="__codelineno-17-217" href="#__codelineno-17-217"></a>            <span class="p">(</span><span class="n">user_id</span><span class="p">,)</span>
</span><span id="__span-17-218"><a id="__codelineno-17-218" name="__codelineno-17-218" href="#__codelineno-17-218"></a>        <span class="p">)</span>
</span><span id="__span-17-219"><a id="__codelineno-17-219" name="__codelineno-17-219" href="#__codelineno-17-219"></a>
</span><span id="__span-17-220"><a id="__codelineno-17-220" name="__codelineno-17-220" href="#__codelineno-17-220"></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">users</span><span class="p">:</span>
</span><span id="__span-17-221"><a id="__codelineno-17-221" name="__codelineno-17-221" href="#__codelineno-17-221"></a>            <span class="k">return</span> <span class="kc">None</span>
</span><span id="__span-17-222"><a id="__codelineno-17-222" name="__codelineno-17-222" href="#__codelineno-17-222"></a>
</span><span id="__span-17-223"><a id="__codelineno-17-223" name="__codelineno-17-223" href="#__codelineno-17-223"></a>        <span class="n">user</span> <span class="o">=</span> <span class="n">users</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="__span-17-224"><a id="__codelineno-17-224" name="__codelineno-17-224" href="#__codelineno-17-224"></a>
</span><span id="__span-17-225"><a id="__codelineno-17-225" name="__codelineno-17-225" href="#__codelineno-17-225"></a>        <span class="c1"># Parse JSON data</span>
</span><span id="__span-17-226"><a id="__codelineno-17-226" name="__codelineno-17-226" href="#__codelineno-17-226"></a>        <span class="k">if</span> <span class="n">user</span><span class="p">[</span><span class="s1">&#39;user_data&#39;</span><span class="p">]:</span>
</span><span id="__span-17-227"><a id="__codelineno-17-227" name="__codelineno-17-227" href="#__codelineno-17-227"></a>            <span class="n">user</span><span class="p">[</span><span class="s1">&#39;user_data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">user</span><span class="p">[</span><span class="s1">&#39;user_data&#39;</span><span class="p">])</span>
</span><span id="__span-17-228"><a id="__codelineno-17-228" name="__codelineno-17-228" href="#__codelineno-17-228"></a>
</span><span id="__span-17-229"><a id="__codelineno-17-229" name="__codelineno-17-229" href="#__codelineno-17-229"></a>        <span class="c1"># Add computed fields (business logic)</span>
</span><span id="__span-17-230"><a id="__codelineno-17-230" name="__codelineno-17-230" href="#__codelineno-17-230"></a>        <span class="n">user</span><span class="p">[</span><span class="s1">&#39;account_age_days&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">calculate_account_age</span><span class="p">(</span><span class="n">user</span><span class="p">[</span><span class="s1">&#39;created_at&#39;</span><span class="p">])</span>
</span><span id="__span-17-231"><a id="__codelineno-17-231" name="__codelineno-17-231" href="#__codelineno-17-231"></a>        <span class="n">user</span><span class="p">[</span><span class="s1">&#39;activity_status&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_activity_status</span><span class="p">(</span><span class="n">user</span><span class="p">[</span><span class="s1">&#39;last_active&#39;</span><span class="p">])</span>
</span><span id="__span-17-232"><a id="__codelineno-17-232" name="__codelineno-17-232" href="#__codelineno-17-232"></a>
</span><span id="__span-17-233"><a id="__codelineno-17-233" name="__codelineno-17-233" href="#__codelineno-17-233"></a>        <span class="k">return</span> <span class="n">user</span>
</span><span id="__span-17-234"><a id="__codelineno-17-234" name="__codelineno-17-234" href="#__codelineno-17-234"></a>
</span><span id="__span-17-235"><a id="__codelineno-17-235" name="__codelineno-17-235" href="#__codelineno-17-235"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">calculate_account_age</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">created_at</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
</span><span id="__span-17-236"><a id="__codelineno-17-236" name="__codelineno-17-236" href="#__codelineno-17-236"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Calculate account age in days&quot;&quot;&quot;</span>
</span><span id="__span-17-237"><a id="__codelineno-17-237" name="__codelineno-17-237" href="#__codelineno-17-237"></a>
</span><span id="__span-17-238"><a id="__codelineno-17-238" name="__codelineno-17-238" href="#__codelineno-17-238"></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">created_at</span><span class="p">:</span>
</span><span id="__span-17-239"><a id="__codelineno-17-239" name="__codelineno-17-239" href="#__codelineno-17-239"></a>            <span class="k">return</span> <span class="mi">0</span>
</span><span id="__span-17-240"><a id="__codelineno-17-240" name="__codelineno-17-240" href="#__codelineno-17-240"></a>
</span><span id="__span-17-241"><a id="__codelineno-17-241" name="__codelineno-17-241" href="#__codelineno-17-241"></a>        <span class="n">created_date</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">fromisoformat</span><span class="p">(</span><span class="n">created_at</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;Z&#39;</span><span class="p">,</span> <span class="s1">&#39;+00:00&#39;</span><span class="p">))</span>
</span><span id="__span-17-242"><a id="__codelineno-17-242" name="__codelineno-17-242" href="#__codelineno-17-242"></a>        <span class="n">age</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span> <span class="o">-</span> <span class="n">created_date</span>
</span><span id="__span-17-243"><a id="__codelineno-17-243" name="__codelineno-17-243" href="#__codelineno-17-243"></a>        <span class="k">return</span> <span class="n">age</span><span class="o">.</span><span class="n">days</span>
</span><span id="__span-17-244"><a id="__codelineno-17-244" name="__codelineno-17-244" href="#__codelineno-17-244"></a>
</span><span id="__span-17-245"><a id="__codelineno-17-245" name="__codelineno-17-245" href="#__codelineno-17-245"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_activity_status</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">last_active</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="__span-17-246"><a id="__codelineno-17-246" name="__codelineno-17-246" href="#__codelineno-17-246"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Determine user activity status&quot;&quot;&quot;</span>
</span><span id="__span-17-247"><a id="__codelineno-17-247" name="__codelineno-17-247" href="#__codelineno-17-247"></a>
</span><span id="__span-17-248"><a id="__codelineno-17-248" name="__codelineno-17-248" href="#__codelineno-17-248"></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">last_active</span><span class="p">:</span>
</span><span id="__span-17-249"><a id="__codelineno-17-249" name="__codelineno-17-249" href="#__codelineno-17-249"></a>            <span class="k">return</span> <span class="s1">&#39;inactive&#39;</span>
</span><span id="__span-17-250"><a id="__codelineno-17-250" name="__codelineno-17-250" href="#__codelineno-17-250"></a>
</span><span id="__span-17-251"><a id="__codelineno-17-251" name="__codelineno-17-251" href="#__codelineno-17-251"></a>        <span class="n">last_active_date</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">fromisoformat</span><span class="p">(</span><span class="n">last_active</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;Z&#39;</span><span class="p">,</span> <span class="s1">&#39;+00:00&#39;</span><span class="p">))</span>
</span><span id="__span-17-252"><a id="__codelineno-17-252" name="__codelineno-17-252" href="#__codelineno-17-252"></a>        <span class="n">days_since_active</span> <span class="o">=</span> <span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span> <span class="o">-</span> <span class="n">last_active_date</span><span class="p">)</span><span class="o">.</span><span class="n">days</span>
</span><span id="__span-17-253"><a id="__codelineno-17-253" name="__codelineno-17-253" href="#__codelineno-17-253"></a>
</span><span id="__span-17-254"><a id="__codelineno-17-254" name="__codelineno-17-254" href="#__codelineno-17-254"></a>        <span class="k">if</span> <span class="n">days_since_active</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="__span-17-255"><a id="__codelineno-17-255" name="__codelineno-17-255" href="#__codelineno-17-255"></a>            <span class="k">return</span> <span class="s1">&#39;active&#39;</span>
</span><span id="__span-17-256"><a id="__codelineno-17-256" name="__codelineno-17-256" href="#__codelineno-17-256"></a>        <span class="k">elif</span> <span class="n">days_since_active</span> <span class="o">&lt;=</span> <span class="mi">7</span><span class="p">:</span>
</span><span id="__span-17-257"><a id="__codelineno-17-257" name="__codelineno-17-257" href="#__codelineno-17-257"></a>            <span class="k">return</span> <span class="s1">&#39;recent&#39;</span>
</span><span id="__span-17-258"><a id="__codelineno-17-258" name="__codelineno-17-258" href="#__codelineno-17-258"></a>        <span class="k">elif</span> <span class="n">days_since_active</span> <span class="o">&lt;=</span> <span class="mi">30</span><span class="p">:</span>
</span><span id="__span-17-259"><a id="__codelineno-17-259" name="__codelineno-17-259" href="#__codelineno-17-259"></a>            <span class="k">return</span> <span class="s1">&#39;occasional&#39;</span>
</span><span id="__span-17-260"><a id="__codelineno-17-260" name="__codelineno-17-260" href="#__codelineno-17-260"></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="__span-17-261"><a id="__codelineno-17-261" name="__codelineno-17-261" href="#__codelineno-17-261"></a>            <span class="k">return</span> <span class="s1">&#39;inactive&#39;</span>
</span><span id="__span-17-262"><a id="__codelineno-17-262" name="__codelineno-17-262" href="#__codelineno-17-262"></a>
</span><span id="__span-17-263"><a id="__codelineno-17-263" name="__codelineno-17-263" href="#__codelineno-17-263"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">search_products</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">query</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">category</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">max_price</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">]:</span>
</span><span id="__span-17-264"><a id="__codelineno-17-264" name="__codelineno-17-264" href="#__codelineno-17-264"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Search products with business logic&quot;&quot;&quot;</span>
</span><span id="__span-17-265"><a id="__codelineno-17-265" name="__codelineno-17-265" href="#__codelineno-17-265"></a>
</span><span id="__span-17-266"><a id="__codelineno-17-266" name="__codelineno-17-266" href="#__codelineno-17-266"></a>        <span class="c1"># Input validation</span>
</span><span id="__span-17-267"><a id="__codelineno-17-267" name="__codelineno-17-267" href="#__codelineno-17-267"></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">query</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">query</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span>
</span><span id="__span-17-268"><a id="__codelineno-17-268" name="__codelineno-17-268" href="#__codelineno-17-268"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Search query must be at least 2 characters&quot;</span><span class="p">)</span>
</span><span id="__span-17-269"><a id="__codelineno-17-269" name="__codelineno-17-269" href="#__codelineno-17-269"></a>
</span><span id="__span-17-270"><a id="__codelineno-17-270" name="__codelineno-17-270" href="#__codelineno-17-270"></a>        <span class="c1"># Build dynamic query</span>
</span><span id="__span-17-271"><a id="__codelineno-17-271" name="__codelineno-17-271" href="#__codelineno-17-271"></a>        <span class="n">sql</span> <span class="o">=</span> <span class="s2">&quot;SELECT * FROM products WHERE name LIKE ? OR description LIKE ?&quot;</span>
</span><span id="__span-17-272"><a id="__codelineno-17-272" name="__codelineno-17-272" href="#__codelineno-17-272"></a>        <span class="n">params</span> <span class="o">=</span> <span class="p">[</span><span class="sa">f</span><span class="s2">&quot;%</span><span class="si">{</span><span class="n">query</span><span class="si">}</span><span class="s2">%&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;%</span><span class="si">{</span><span class="n">query</span><span class="si">}</span><span class="s2">%&quot;</span><span class="p">]</span>
</span><span id="__span-17-273"><a id="__codelineno-17-273" name="__codelineno-17-273" href="#__codelineno-17-273"></a>
</span><span id="__span-17-274"><a id="__codelineno-17-274" name="__codelineno-17-274" href="#__codelineno-17-274"></a>        <span class="k">if</span> <span class="n">category</span><span class="p">:</span>
</span><span id="__span-17-275"><a id="__codelineno-17-275" name="__codelineno-17-275" href="#__codelineno-17-275"></a>            <span class="n">sql</span> <span class="o">+=</span> <span class="s2">&quot; AND category = ?&quot;</span>
</span><span id="__span-17-276"><a id="__codelineno-17-276" name="__codelineno-17-276" href="#__codelineno-17-276"></a>            <span class="n">params</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">category</span><span class="p">)</span>
</span><span id="__span-17-277"><a id="__codelineno-17-277" name="__codelineno-17-277" href="#__codelineno-17-277"></a>
</span><span id="__span-17-278"><a id="__codelineno-17-278" name="__codelineno-17-278" href="#__codelineno-17-278"></a>        <span class="k">if</span> <span class="n">max_price</span><span class="p">:</span>
</span><span id="__span-17-279"><a id="__codelineno-17-279" name="__codelineno-17-279" href="#__codelineno-17-279"></a>            <span class="n">sql</span> <span class="o">+=</span> <span class="s2">&quot; AND price &lt;= ?&quot;</span>
</span><span id="__span-17-280"><a id="__codelineno-17-280" name="__codelineno-17-280" href="#__codelineno-17-280"></a>            <span class="n">params</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">max_price</span><span class="p">)</span>
</span><span id="__span-17-281"><a id="__codelineno-17-281" name="__codelineno-17-281" href="#__codelineno-17-281"></a>
</span><span id="__span-17-282"><a id="__codelineno-17-282" name="__codelineno-17-282" href="#__codelineno-17-282"></a>        <span class="n">sql</span> <span class="o">+=</span> <span class="s2">&quot; ORDER BY name LIMIT 20&quot;</span>
</span><span id="__span-17-283"><a id="__codelineno-17-283" name="__codelineno-17-283" href="#__codelineno-17-283"></a>
</span><span id="__span-17-284"><a id="__codelineno-17-284" name="__codelineno-17-284" href="#__codelineno-17-284"></a>        <span class="n">products</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">execute_query</span><span class="p">(</span><span class="n">sql</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">params</span><span class="p">))</span>
</span><span id="__span-17-285"><a id="__codelineno-17-285" name="__codelineno-17-285" href="#__codelineno-17-285"></a>
</span><span id="__span-17-286"><a id="__codelineno-17-286" name="__codelineno-17-286" href="#__codelineno-17-286"></a>        <span class="c1"># Apply business logic</span>
</span><span id="__span-17-287"><a id="__codelineno-17-287" name="__codelineno-17-287" href="#__codelineno-17-287"></a>        <span class="k">for</span> <span class="n">product</span> <span class="ow">in</span> <span class="n">products</span><span class="p">:</span>
</span><span id="__span-17-288"><a id="__codelineno-17-288" name="__codelineno-17-288" href="#__codelineno-17-288"></a>            <span class="n">product</span><span class="p">[</span><span class="s1">&#39;availability&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;in_stock&#39;</span> <span class="k">if</span> <span class="n">product</span><span class="p">[</span><span class="s1">&#39;stock_quantity&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="s1">&#39;out_of_stock&#39;</span>
</span><span id="__span-17-289"><a id="__codelineno-17-289" name="__codelineno-17-289" href="#__codelineno-17-289"></a>            <span class="n">product</span><span class="p">[</span><span class="s1">&#39;price_tier&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_price_tier</span><span class="p">(</span><span class="n">product</span><span class="p">[</span><span class="s1">&#39;price&#39;</span><span class="p">])</span>
</span><span id="__span-17-290"><a id="__codelineno-17-290" name="__codelineno-17-290" href="#__codelineno-17-290"></a>
</span><span id="__span-17-291"><a id="__codelineno-17-291" name="__codelineno-17-291" href="#__codelineno-17-291"></a>        <span class="k">return</span> <span class="n">products</span>
</span><span id="__span-17-292"><a id="__codelineno-17-292" name="__codelineno-17-292" href="#__codelineno-17-292"></a>
</span><span id="__span-17-293"><a id="__codelineno-17-293" name="__codelineno-17-293" href="#__codelineno-17-293"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_price_tier</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">price</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="__span-17-294"><a id="__codelineno-17-294" name="__codelineno-17-294" href="#__codelineno-17-294"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Categorize products by price tier&quot;&quot;&quot;</span>
</span><span id="__span-17-295"><a id="__codelineno-17-295" name="__codelineno-17-295" href="#__codelineno-17-295"></a>
</span><span id="__span-17-296"><a id="__codelineno-17-296" name="__codelineno-17-296" href="#__codelineno-17-296"></a>        <span class="k">if</span> <span class="n">price</span> <span class="o">&lt;</span> <span class="mi">50</span><span class="p">:</span>
</span><span id="__span-17-297"><a id="__codelineno-17-297" name="__codelineno-17-297" href="#__codelineno-17-297"></a>            <span class="k">return</span> <span class="s1">&#39;budget&#39;</span>
</span><span id="__span-17-298"><a id="__codelineno-17-298" name="__codelineno-17-298" href="#__codelineno-17-298"></a>        <span class="k">elif</span> <span class="n">price</span> <span class="o">&lt;</span> <span class="mi">200</span><span class="p">:</span>
</span><span id="__span-17-299"><a id="__codelineno-17-299" name="__codelineno-17-299" href="#__codelineno-17-299"></a>            <span class="k">return</span> <span class="s1">&#39;mid_range&#39;</span>
</span><span id="__span-17-300"><a id="__codelineno-17-300" name="__codelineno-17-300" href="#__codelineno-17-300"></a>        <span class="k">elif</span> <span class="n">price</span> <span class="o">&lt;</span> <span class="mi">500</span><span class="p">:</span>
</span><span id="__span-17-301"><a id="__codelineno-17-301" name="__codelineno-17-301" href="#__codelineno-17-301"></a>            <span class="k">return</span> <span class="s1">&#39;premium&#39;</span>
</span><span id="__span-17-302"><a id="__codelineno-17-302" name="__codelineno-17-302" href="#__codelineno-17-302"></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="__span-17-303"><a id="__codelineno-17-303" name="__codelineno-17-303" href="#__codelineno-17-303"></a>            <span class="k">return</span> <span class="s1">&#39;luxury&#39;</span>
</span><span id="__span-17-304"><a id="__codelineno-17-304" name="__codelineno-17-304" href="#__codelineno-17-304"></a>
</span><span id="__span-17-305"><a id="__codelineno-17-305" name="__codelineno-17-305" href="#__codelineno-17-305"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">create_order</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">product_ids</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
</span><span id="__span-17-306"><a id="__codelineno-17-306" name="__codelineno-17-306" href="#__codelineno-17-306"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Create order with business validation&quot;&quot;&quot;</span>
</span><span id="__span-17-307"><a id="__codelineno-17-307" name="__codelineno-17-307" href="#__codelineno-17-307"></a>
</span><span id="__span-17-308"><a id="__codelineno-17-308" name="__codelineno-17-308" href="#__codelineno-17-308"></a>        <span class="c1"># Validate user exists</span>
</span><span id="__span-17-309"><a id="__codelineno-17-309" name="__codelineno-17-309" href="#__codelineno-17-309"></a>        <span class="n">user</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_user_profile</span><span class="p">(</span><span class="n">user_id</span><span class="p">)</span>
</span><span id="__span-17-310"><a id="__codelineno-17-310" name="__codelineno-17-310" href="#__codelineno-17-310"></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">user</span><span class="p">:</span>
</span><span id="__span-17-311"><a id="__codelineno-17-311" name="__codelineno-17-311" href="#__codelineno-17-311"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;User not found&quot;</span><span class="p">)</span>
</span><span id="__span-17-312"><a id="__codelineno-17-312" name="__codelineno-17-312" href="#__codelineno-17-312"></a>
</span><span id="__span-17-313"><a id="__codelineno-17-313" name="__codelineno-17-313" href="#__codelineno-17-313"></a>        <span class="c1"># Get products and validate availability</span>
</span><span id="__span-17-314"><a id="__codelineno-17-314" name="__codelineno-17-314" href="#__codelineno-17-314"></a>        <span class="n">total_amount</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="__span-17-315"><a id="__codelineno-17-315" name="__codelineno-17-315" href="#__codelineno-17-315"></a>        <span class="n">order_items</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="__span-17-316"><a id="__codelineno-17-316" name="__codelineno-17-316" href="#__codelineno-17-316"></a>
</span><span id="__span-17-317"><a id="__codelineno-17-317" name="__codelineno-17-317" href="#__codelineno-17-317"></a>        <span class="k">for</span> <span class="n">product_id</span> <span class="ow">in</span> <span class="n">product_ids</span><span class="p">:</span>
</span><span id="__span-17-318"><a id="__codelineno-17-318" name="__codelineno-17-318" href="#__codelineno-17-318"></a>            <span class="n">products</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">execute_query</span><span class="p">(</span>
</span><span id="__span-17-319"><a id="__codelineno-17-319" name="__codelineno-17-319" href="#__codelineno-17-319"></a>                <span class="s2">&quot;SELECT * FROM products WHERE id = ?&quot;</span><span class="p">,</span> 
</span><span id="__span-17-320"><a id="__codelineno-17-320" name="__codelineno-17-320" href="#__codelineno-17-320"></a>                <span class="p">(</span><span class="n">product_id</span><span class="p">,)</span>
</span><span id="__span-17-321"><a id="__codelineno-17-321" name="__codelineno-17-321" href="#__codelineno-17-321"></a>            <span class="p">)</span>
</span><span id="__span-17-322"><a id="__codelineno-17-322" name="__codelineno-17-322" href="#__codelineno-17-322"></a>
</span><span id="__span-17-323"><a id="__codelineno-17-323" name="__codelineno-17-323" href="#__codelineno-17-323"></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">products</span><span class="p">:</span>
</span><span id="__span-17-324"><a id="__codelineno-17-324" name="__codelineno-17-324" href="#__codelineno-17-324"></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Product </span><span class="si">{</span><span class="n">product_id</span><span class="si">}</span><span class="s2"> not found&quot;</span><span class="p">)</span>
</span><span id="__span-17-325"><a id="__codelineno-17-325" name="__codelineno-17-325" href="#__codelineno-17-325"></a>
</span><span id="__span-17-326"><a id="__codelineno-17-326" name="__codelineno-17-326" href="#__codelineno-17-326"></a>            <span class="n">product</span> <span class="o">=</span> <span class="n">products</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="__span-17-327"><a id="__codelineno-17-327" name="__codelineno-17-327" href="#__codelineno-17-327"></a>
</span><span id="__span-17-328"><a id="__codelineno-17-328" name="__codelineno-17-328" href="#__codelineno-17-328"></a>            <span class="k">if</span> <span class="n">product</span><span class="p">[</span><span class="s1">&#39;stock_quantity&#39;</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="__span-17-329"><a id="__codelineno-17-329" name="__codelineno-17-329" href="#__codelineno-17-329"></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Product </span><span class="si">{</span><span class="n">product</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> is out of stock&quot;</span><span class="p">)</span>
</span><span id="__span-17-330"><a id="__codelineno-17-330" name="__codelineno-17-330" href="#__codelineno-17-330"></a>
</span><span id="__span-17-331"><a id="__codelineno-17-331" name="__codelineno-17-331" href="#__codelineno-17-331"></a>            <span class="n">total_amount</span> <span class="o">+=</span> <span class="n">product</span><span class="p">[</span><span class="s1">&#39;price&#39;</span><span class="p">]</span>
</span><span id="__span-17-332"><a id="__codelineno-17-332" name="__codelineno-17-332" href="#__codelineno-17-332"></a>            <span class="n">order_items</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">product</span><span class="p">)</span>
</span><span id="__span-17-333"><a id="__codelineno-17-333" name="__codelineno-17-333" href="#__codelineno-17-333"></a>
</span><span id="__span-17-334"><a id="__codelineno-17-334" name="__codelineno-17-334" href="#__codelineno-17-334"></a>        <span class="c1"># Create order</span>
</span><span id="__span-17-335"><a id="__codelineno-17-335" name="__codelineno-17-335" href="#__codelineno-17-335"></a>        <span class="n">conn</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">get_connection</span><span class="p">()</span>
</span><span id="__span-17-336"><a id="__codelineno-17-336" name="__codelineno-17-336" href="#__codelineno-17-336"></a>        <span class="n">cursor</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
</span><span id="__span-17-337"><a id="__codelineno-17-337" name="__codelineno-17-337" href="#__codelineno-17-337"></a>
</span><span id="__span-17-338"><a id="__codelineno-17-338" name="__codelineno-17-338" href="#__codelineno-17-338"></a>        <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
</span><span id="__span-17-339"><a id="__codelineno-17-339" name="__codelineno-17-339" href="#__codelineno-17-339"></a><span class="s1">            INSERT INTO orders (user_id, total_amount, status)</span>
</span><span id="__span-17-340"><a id="__codelineno-17-340" name="__codelineno-17-340" href="#__codelineno-17-340"></a><span class="s1">            VALUES (?, ?, &#39;pending&#39;)</span>
</span><span id="__span-17-341"><a id="__codelineno-17-341" name="__codelineno-17-341" href="#__codelineno-17-341"></a><span class="s1">        &#39;&#39;&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">user_id</span><span class="p">,</span> <span class="n">total_amount</span><span class="p">))</span>
</span><span id="__span-17-342"><a id="__codelineno-17-342" name="__codelineno-17-342" href="#__codelineno-17-342"></a>
</span><span id="__span-17-343"><a id="__codelineno-17-343" name="__codelineno-17-343" href="#__codelineno-17-343"></a>        <span class="n">order_id</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">lastrowid</span>
</span><span id="__span-17-344"><a id="__codelineno-17-344" name="__codelineno-17-344" href="#__codelineno-17-344"></a>
</span><span id="__span-17-345"><a id="__codelineno-17-345" name="__codelineno-17-345" href="#__codelineno-17-345"></a>        <span class="c1"># Update stock quantities (simplified - in reality, you&#39;d use transactions)</span>
</span><span id="__span-17-346"><a id="__codelineno-17-346" name="__codelineno-17-346" href="#__codelineno-17-346"></a>        <span class="k">for</span> <span class="n">product</span> <span class="ow">in</span> <span class="n">order_items</span><span class="p">:</span>
</span><span id="__span-17-347"><a id="__codelineno-17-347" name="__codelineno-17-347" href="#__codelineno-17-347"></a>            <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
</span><span id="__span-17-348"><a id="__codelineno-17-348" name="__codelineno-17-348" href="#__codelineno-17-348"></a><span class="s1">                UPDATE products </span>
</span><span id="__span-17-349"><a id="__codelineno-17-349" name="__codelineno-17-349" href="#__codelineno-17-349"></a><span class="s1">                SET stock_quantity = stock_quantity - 1 </span>
</span><span id="__span-17-350"><a id="__codelineno-17-350" name="__codelineno-17-350" href="#__codelineno-17-350"></a><span class="s1">                WHERE id = ?</span>
</span><span id="__span-17-351"><a id="__codelineno-17-351" name="__codelineno-17-351" href="#__codelineno-17-351"></a><span class="s1">            &#39;&#39;&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">product</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">],))</span>
</span><span id="__span-17-352"><a id="__codelineno-17-352" name="__codelineno-17-352" href="#__codelineno-17-352"></a>
</span><span id="__span-17-353"><a id="__codelineno-17-353" name="__codelineno-17-353" href="#__codelineno-17-353"></a>        <span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
</span><span id="__span-17-354"><a id="__codelineno-17-354" name="__codelineno-17-354" href="#__codelineno-17-354"></a>
</span><span id="__span-17-355"><a id="__codelineno-17-355" name="__codelineno-17-355" href="#__codelineno-17-355"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   ğŸ“¦ Order #</span><span class="si">{</span><span class="n">order_id</span><span class="si">}</span><span class="s2"> created for user </span><span class="si">{</span><span class="n">user_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-17-356"><a id="__codelineno-17-356" name="__codelineno-17-356" href="#__codelineno-17-356"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   ğŸ’° Total amount: $</span><span class="si">{</span><span class="n">total_amount</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-17-357"><a id="__codelineno-17-357" name="__codelineno-17-357" href="#__codelineno-17-357"></a>
</span><span id="__span-17-358"><a id="__codelineno-17-358" name="__codelineno-17-358" href="#__codelineno-17-358"></a>        <span class="k">return</span> <span class="p">{</span>
</span><span id="__span-17-359"><a id="__codelineno-17-359" name="__codelineno-17-359" href="#__codelineno-17-359"></a>            <span class="s1">&#39;order_id&#39;</span><span class="p">:</span> <span class="n">order_id</span><span class="p">,</span>
</span><span id="__span-17-360"><a id="__codelineno-17-360" name="__codelineno-17-360" href="#__codelineno-17-360"></a>            <span class="s1">&#39;user_id&#39;</span><span class="p">:</span> <span class="n">user_id</span><span class="p">,</span>
</span><span id="__span-17-361"><a id="__codelineno-17-361" name="__codelineno-17-361" href="#__codelineno-17-361"></a>            <span class="s1">&#39;total_amount&#39;</span><span class="p">:</span> <span class="n">total_amount</span><span class="p">,</span>
</span><span id="__span-17-362"><a id="__codelineno-17-362" name="__codelineno-17-362" href="#__codelineno-17-362"></a>            <span class="s1">&#39;items&#39;</span><span class="p">:</span> <span class="n">order_items</span><span class="p">,</span>
</span><span id="__span-17-363"><a id="__codelineno-17-363" name="__codelineno-17-363" href="#__codelineno-17-363"></a>            <span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;pending&#39;</span><span class="p">,</span>
</span><span id="__span-17-364"><a id="__codelineno-17-364" name="__codelineno-17-364" href="#__codelineno-17-364"></a>            <span class="s1">&#39;created_at&#39;</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">isoformat</span><span class="p">()</span>
</span><span id="__span-17-365"><a id="__codelineno-17-365" name="__codelineno-17-365" href="#__codelineno-17-365"></a>        <span class="p">}</span>
</span><span id="__span-17-366"><a id="__codelineno-17-366" name="__codelineno-17-366" href="#__codelineno-17-366"></a>
</span><span id="__span-17-367"><a id="__codelineno-17-367" name="__codelineno-17-367" href="#__codelineno-17-367"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">check_rate_limit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">limit</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">window</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="__span-17-368"><a id="__codelineno-17-368" name="__codelineno-17-368" href="#__codelineno-17-368"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Implement rate limiting&quot;&quot;&quot;</span>
</span><span id="__span-17-369"><a id="__codelineno-17-369" name="__codelineno-17-369" href="#__codelineno-17-369"></a>
</span><span id="__span-17-370"><a id="__codelineno-17-370" name="__codelineno-17-370" href="#__codelineno-17-370"></a>        <span class="n">current_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
</span><span id="__span-17-371"><a id="__codelineno-17-371" name="__codelineno-17-371" href="#__codelineno-17-371"></a>
</span><span id="__span-17-372"><a id="__codelineno-17-372" name="__codelineno-17-372" href="#__codelineno-17-372"></a>        <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">rate_limits</span><span class="p">:</span>
</span><span id="__span-17-373"><a id="__codelineno-17-373" name="__codelineno-17-373" href="#__codelineno-17-373"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">rate_limits</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="__span-17-374"><a id="__codelineno-17-374" name="__codelineno-17-374" href="#__codelineno-17-374"></a>
</span><span id="__span-17-375"><a id="__codelineno-17-375" name="__codelineno-17-375" href="#__codelineno-17-375"></a>        <span class="c1"># Remove old timestamps</span>
</span><span id="__span-17-376"><a id="__codelineno-17-376" name="__codelineno-17-376" href="#__codelineno-17-376"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">rate_limits</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="__span-17-377"><a id="__codelineno-17-377" name="__codelineno-17-377" href="#__codelineno-17-377"></a>            <span class="n">timestamp</span> <span class="k">for</span> <span class="n">timestamp</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">rate_limits</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
</span><span id="__span-17-378"><a id="__codelineno-17-378" name="__codelineno-17-378" href="#__codelineno-17-378"></a>            <span class="k">if</span> <span class="n">current_time</span> <span class="o">-</span> <span class="n">timestamp</span> <span class="o">&lt;</span> <span class="n">window</span>
</span><span id="__span-17-379"><a id="__codelineno-17-379" name="__codelineno-17-379" href="#__codelineno-17-379"></a>        <span class="p">]</span>
</span><span id="__span-17-380"><a id="__codelineno-17-380" name="__codelineno-17-380" href="#__codelineno-17-380"></a>
</span><span id="__span-17-381"><a id="__codelineno-17-381" name="__codelineno-17-381" href="#__codelineno-17-381"></a>        <span class="c1"># Check if under limit</span>
</span><span id="__span-17-382"><a id="__codelineno-17-382" name="__codelineno-17-382" href="#__codelineno-17-382"></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rate_limits</span><span class="p">[</span><span class="n">key</span><span class="p">])</span> <span class="o">&lt;</span> <span class="n">limit</span><span class="p">:</span>
</span><span id="__span-17-383"><a id="__codelineno-17-383" name="__codelineno-17-383" href="#__codelineno-17-383"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">rate_limits</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">current_time</span><span class="p">)</span>
</span><span id="__span-17-384"><a id="__codelineno-17-384" name="__codelineno-17-384" href="#__codelineno-17-384"></a>            <span class="k">return</span> <span class="kc">True</span>
</span><span id="__span-17-385"><a id="__codelineno-17-385" name="__codelineno-17-385" href="#__codelineno-17-385"></a>
</span><span id="__span-17-386"><a id="__codelineno-17-386" name="__codelineno-17-386" href="#__codelineno-17-386"></a>        <span class="k">return</span> <span class="kc">False</span>
</span><span id="__span-17-387"><a id="__codelineno-17-387" name="__codelineno-17-387" href="#__codelineno-17-387"></a>
</span><span id="__span-17-388"><a id="__codelineno-17-388" name="__codelineno-17-388" href="#__codelineno-17-388"></a><span class="k">class</span><span class="w"> </span><span class="nc">PresentationTier</span><span class="p">:</span>
</span><span id="__span-17-389"><a id="__codelineno-17-389" name="__codelineno-17-389" href="#__codelineno-17-389"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Presentation Layer - Handles user interface and API responses&quot;&quot;&quot;</span>
</span><span id="__span-17-390"><a id="__codelineno-17-390" name="__codelineno-17-390" href="#__codelineno-17-390"></a>
</span><span id="__span-17-391"><a id="__codelineno-17-391" name="__codelineno-17-391" href="#__codelineno-17-391"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">business_logic</span><span class="p">:</span> <span class="n">BusinessLogicTier</span><span class="p">):</span>
</span><span id="__span-17-392"><a id="__codelineno-17-392" name="__codelineno-17-392" href="#__codelineno-17-392"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">business_logic</span> <span class="o">=</span> <span class="n">business_logic</span>
</span><span id="__span-17-393"><a id="__codelineno-17-393" name="__codelineno-17-393" href="#__codelineno-17-393"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">response_cache</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="__span-17-394"><a id="__codelineno-17-394" name="__codelineno-17-394" href="#__codelineno-17-394"></a>
</span><span id="__span-17-395"><a id="__codelineno-17-395" name="__codelineno-17-395" href="#__codelineno-17-395"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;ğŸ–¥ï¸ Presentation Tier initialized&quot;</span><span class="p">)</span>
</span><span id="__span-17-396"><a id="__codelineno-17-396" name="__codelineno-17-396" href="#__codelineno-17-396"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;   âœ… API response formatting&quot;</span><span class="p">)</span>
</span><span id="__span-17-397"><a id="__codelineno-17-397" name="__codelineno-17-397" href="#__codelineno-17-397"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;   âœ… Error handling&quot;</span><span class="p">)</span>
</span><span id="__span-17-398"><a id="__codelineno-17-398" name="__codelineno-17-398" href="#__codelineno-17-398"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;   âœ… Response caching&quot;</span><span class="p">)</span>
</span><span id="__span-17-399"><a id="__codelineno-17-399" name="__codelineno-17-399" href="#__codelineno-17-399"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;   âœ… Content negotiation&quot;</span><span class="p">)</span>
</span><span id="__span-17-400"><a id="__codelineno-17-400" name="__codelineno-17-400" href="#__codelineno-17-400"></a>
</span><span id="__span-17-401"><a id="__codelineno-17-401" name="__codelineno-17-401" href="#__codelineno-17-401"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">api_get_user</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
</span><span id="__span-17-402"><a id="__codelineno-17-402" name="__codelineno-17-402" href="#__codelineno-17-402"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;API endpoint for getting user data&quot;&quot;&quot;</span>
</span><span id="__span-17-403"><a id="__codelineno-17-403" name="__codelineno-17-403" href="#__codelineno-17-403"></a>
</span><span id="__span-17-404"><a id="__codelineno-17-404" name="__codelineno-17-404" href="#__codelineno-17-404"></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="__span-17-405"><a id="__codelineno-17-405" name="__codelineno-17-405" href="#__codelineno-17-405"></a>            <span class="n">user</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">business_logic</span><span class="o">.</span><span class="n">get_user_profile</span><span class="p">(</span><span class="n">user_id</span><span class="p">)</span>
</span><span id="__span-17-406"><a id="__codelineno-17-406" name="__codelineno-17-406" href="#__codelineno-17-406"></a>
</span><span id="__span-17-407"><a id="__codelineno-17-407" name="__codelineno-17-407" href="#__codelineno-17-407"></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">user</span><span class="p">:</span>
</span><span id="__span-17-408"><a id="__codelineno-17-408" name="__codelineno-17-408" href="#__codelineno-17-408"></a>                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_error_response</span><span class="p">(</span><span class="mi">404</span><span class="p">,</span> <span class="s2">&quot;User not found&quot;</span><span class="p">)</span>
</span><span id="__span-17-409"><a id="__codelineno-17-409" name="__codelineno-17-409" href="#__codelineno-17-409"></a>
</span><span id="__span-17-410"><a id="__codelineno-17-410" name="__codelineno-17-410" href="#__codelineno-17-410"></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_success_response</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> <span class="s2">&quot;User retrieved successfully&quot;</span><span class="p">)</span>
</span><span id="__span-17-411"><a id="__codelineno-17-411" name="__codelineno-17-411" href="#__codelineno-17-411"></a>
</span><span id="__span-17-412"><a id="__codelineno-17-412" name="__codelineno-17-412" href="#__codelineno-17-412"></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="__span-17-413"><a id="__codelineno-17-413" name="__codelineno-17-413" href="#__codelineno-17-413"></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_error_response</span><span class="p">(</span><span class="mi">500</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</span><span id="__span-17-414"><a id="__codelineno-17-414" name="__codelineno-17-414" href="#__codelineno-17-414"></a>
</span><span id="__span-17-415"><a id="__codelineno-17-415" name="__codelineno-17-415" href="#__codelineno-17-415"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">api_search_products</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">query</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">category</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">max_price</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
</span><span id="__span-17-416"><a id="__codelineno-17-416" name="__codelineno-17-416" href="#__codelineno-17-416"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;API endpoint for product search&quot;&quot;&quot;</span>
</span><span id="__span-17-417"><a id="__codelineno-17-417" name="__codelineno-17-417" href="#__codelineno-17-417"></a>
</span><span id="__span-17-418"><a id="__codelineno-17-418" name="__codelineno-17-418" href="#__codelineno-17-418"></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="__span-17-419"><a id="__codelineno-17-419" name="__codelineno-17-419" href="#__codelineno-17-419"></a>            <span class="n">products</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">business_logic</span><span class="o">.</span><span class="n">search_products</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="n">category</span><span class="p">,</span> <span class="n">max_price</span><span class="p">)</span>
</span><span id="__span-17-420"><a id="__codelineno-17-420" name="__codelineno-17-420" href="#__codelineno-17-420"></a>
</span><span id="__span-17-421"><a id="__codelineno-17-421" name="__codelineno-17-421" href="#__codelineno-17-421"></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_success_response</span><span class="p">({</span>
</span><span id="__span-17-422"><a id="__codelineno-17-422" name="__codelineno-17-422" href="#__codelineno-17-422"></a>                <span class="s1">&#39;products&#39;</span><span class="p">:</span> <span class="n">products</span><span class="p">,</span>
</span><span id="__span-17-423"><a id="__codelineno-17-423" name="__codelineno-17-423" href="#__codelineno-17-423"></a>                <span class="s1">&#39;total_count&#39;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">products</span><span class="p">),</span>
</span><span id="__span-17-424"><a id="__codelineno-17-424" name="__codelineno-17-424" href="#__codelineno-17-424"></a>                <span class="s1">&#39;search_query&#39;</span><span class="p">:</span> <span class="n">query</span><span class="p">,</span>
</span><span id="__span-17-425"><a id="__codelineno-17-425" name="__codelineno-17-425" href="#__codelineno-17-425"></a>                <span class="s1">&#39;filters&#39;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-17-426"><a id="__codelineno-17-426" name="__codelineno-17-426" href="#__codelineno-17-426"></a>                    <span class="s1">&#39;category&#39;</span><span class="p">:</span> <span class="n">category</span><span class="p">,</span>
</span><span id="__span-17-427"><a id="__codelineno-17-427" name="__codelineno-17-427" href="#__codelineno-17-427"></a>                    <span class="s1">&#39;max_price&#39;</span><span class="p">:</span> <span class="n">max_price</span>
</span><span id="__span-17-428"><a id="__codelineno-17-428" name="__codelineno-17-428" href="#__codelineno-17-428"></a>                <span class="p">}</span>
</span><span id="__span-17-429"><a id="__codelineno-17-429" name="__codelineno-17-429" href="#__codelineno-17-429"></a>            <span class="p">},</span> <span class="s2">&quot;Products retrieved successfully&quot;</span><span class="p">)</span>
</span><span id="__span-17-430"><a id="__codelineno-17-430" name="__codelineno-17-430" href="#__codelineno-17-430"></a>
</span><span id="__span-17-431"><a id="__codelineno-17-431" name="__codelineno-17-431" href="#__codelineno-17-431"></a>        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="__span-17-432"><a id="__codelineno-17-432" name="__codelineno-17-432" href="#__codelineno-17-432"></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_error_response</span><span class="p">(</span><span class="mi">400</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</span><span id="__span-17-433"><a id="__codelineno-17-433" name="__codelineno-17-433" href="#__codelineno-17-433"></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="__span-17-434"><a id="__codelineno-17-434" name="__codelineno-17-434" href="#__codelineno-17-434"></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_error_response</span><span class="p">(</span><span class="mi">500</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</span><span id="__span-17-435"><a id="__codelineno-17-435" name="__codelineno-17-435" href="#__codelineno-17-435"></a>
</span><span id="__span-17-436"><a id="__codelineno-17-436" name="__codelineno-17-436" href="#__codelineno-17-436"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">api_create_order</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">product_ids</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
</span><span id="__span-17-437"><a id="__codelineno-17-437" name="__codelineno-17-437" href="#__codelineno-17-437"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;API endpoint for creating orders&quot;&quot;&quot;</span>
</span><span id="__span-17-438"><a id="__codelineno-17-438" name="__codelineno-17-438" href="#__codelineno-17-438"></a>
</span><span id="__span-17-439"><a id="__codelineno-17-439" name="__codelineno-17-439" href="#__codelineno-17-439"></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="__span-17-440"><a id="__codelineno-17-440" name="__codelineno-17-440" href="#__codelineno-17-440"></a>            <span class="n">order</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">business_logic</span><span class="o">.</span><span class="n">create_order</span><span class="p">(</span><span class="n">user_id</span><span class="p">,</span> <span class="n">product_ids</span><span class="p">)</span>
</span><span id="__span-17-441"><a id="__codelineno-17-441" name="__codelineno-17-441" href="#__codelineno-17-441"></a>
</span><span id="__span-17-442"><a id="__codelineno-17-442" name="__codelineno-17-442" href="#__codelineno-17-442"></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_success_response</span><span class="p">(</span><span class="n">order</span><span class="p">,</span> <span class="s2">&quot;Order created successfully&quot;</span><span class="p">)</span>
</span><span id="__span-17-443"><a id="__codelineno-17-443" name="__codelineno-17-443" href="#__codelineno-17-443"></a>
</span><span id="__span-17-444"><a id="__codelineno-17-444" name="__codelineno-17-444" href="#__codelineno-17-444"></a>        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="__span-17-445"><a id="__codelineno-17-445" name="__codelineno-17-445" href="#__codelineno-17-445"></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_error_response</span><span class="p">(</span><span class="mi">400</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</span><span id="__span-17-446"><a id="__codelineno-17-446" name="__codelineno-17-446" href="#__codelineno-17-446"></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="__span-17-447"><a id="__codelineno-17-447" name="__codelineno-17-447" href="#__codelineno-17-447"></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_error_response</span><span class="p">(</span><span class="mi">500</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</span><span id="__span-17-448"><a id="__codelineno-17-448" name="__codelineno-17-448" href="#__codelineno-17-448"></a>
</span><span id="__span-17-449"><a id="__codelineno-17-449" name="__codelineno-17-449" href="#__codelineno-17-449"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">format_success_response</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;Success&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
</span><span id="__span-17-450"><a id="__codelineno-17-450" name="__codelineno-17-450" href="#__codelineno-17-450"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Format successful API response&quot;&quot;&quot;</span>
</span><span id="__span-17-451"><a id="__codelineno-17-451" name="__codelineno-17-451" href="#__codelineno-17-451"></a>
</span><span id="__span-17-452"><a id="__codelineno-17-452" name="__codelineno-17-452" href="#__codelineno-17-452"></a>        <span class="k">return</span> <span class="p">{</span>
</span><span id="__span-17-453"><a id="__codelineno-17-453" name="__codelineno-17-453" href="#__codelineno-17-453"></a>            <span class="s1">&#39;success&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="__span-17-454"><a id="__codelineno-17-454" name="__codelineno-17-454" href="#__codelineno-17-454"></a>            <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">message</span><span class="p">,</span>
</span><span id="__span-17-455"><a id="__codelineno-17-455" name="__codelineno-17-455" href="#__codelineno-17-455"></a>            <span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="n">data</span><span class="p">,</span>
</span><span id="__span-17-456"><a id="__codelineno-17-456" name="__codelineno-17-456" href="#__codelineno-17-456"></a>            <span class="s1">&#39;timestamp&#39;</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">isoformat</span><span class="p">(),</span>
</span><span id="__span-17-457"><a id="__codelineno-17-457" name="__codelineno-17-457" href="#__codelineno-17-457"></a>            <span class="s1">&#39;response_time_ms&#39;</span><span class="p">:</span> <span class="mi">0</span>  <span class="c1"># Would be calculated in real implementation</span>
</span><span id="__span-17-458"><a id="__codelineno-17-458" name="__codelineno-17-458" href="#__codelineno-17-458"></a>        <span class="p">}</span>
</span><span id="__span-17-459"><a id="__codelineno-17-459" name="__codelineno-17-459" href="#__codelineno-17-459"></a>
</span><span id="__span-17-460"><a id="__codelineno-17-460" name="__codelineno-17-460" href="#__codelineno-17-460"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">format_error_response</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">status_code</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
</span><span id="__span-17-461"><a id="__codelineno-17-461" name="__codelineno-17-461" href="#__codelineno-17-461"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Format error API response&quot;&quot;&quot;</span>
</span><span id="__span-17-462"><a id="__codelineno-17-462" name="__codelineno-17-462" href="#__codelineno-17-462"></a>
</span><span id="__span-17-463"><a id="__codelineno-17-463" name="__codelineno-17-463" href="#__codelineno-17-463"></a>        <span class="k">return</span> <span class="p">{</span>
</span><span id="__span-17-464"><a id="__codelineno-17-464" name="__codelineno-17-464" href="#__codelineno-17-464"></a>            <span class="s1">&#39;success&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="__span-17-465"><a id="__codelineno-17-465" name="__codelineno-17-465" href="#__codelineno-17-465"></a>            <span class="s1">&#39;error&#39;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-17-466"><a id="__codelineno-17-466" name="__codelineno-17-466" href="#__codelineno-17-466"></a>                <span class="s1">&#39;code&#39;</span><span class="p">:</span> <span class="n">status_code</span><span class="p">,</span>
</span><span id="__span-17-467"><a id="__codelineno-17-467" name="__codelineno-17-467" href="#__codelineno-17-467"></a>                <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">message</span>
</span><span id="__span-17-468"><a id="__codelineno-17-468" name="__codelineno-17-468" href="#__codelineno-17-468"></a>            <span class="p">},</span>
</span><span id="__span-17-469"><a id="__codelineno-17-469" name="__codelineno-17-469" href="#__codelineno-17-469"></a>            <span class="s1">&#39;timestamp&#39;</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">isoformat</span><span class="p">()</span>
</span><span id="__span-17-470"><a id="__codelineno-17-470" name="__codelineno-17-470" href="#__codelineno-17-470"></a>        <span class="p">}</span>
</span><span id="__span-17-471"><a id="__codelineno-17-471" name="__codelineno-17-471" href="#__codelineno-17-471"></a>
</span><span id="__span-17-472"><a id="__codelineno-17-472" name="__codelineno-17-472" href="#__codelineno-17-472"></a><span class="k">class</span><span class="w"> </span><span class="nc">MonitoringSystem</span><span class="p">:</span>
</span><span id="__span-17-473"><a id="__codelineno-17-473" name="__codelineno-17-473" href="#__codelineno-17-473"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;System monitoring and health checks&quot;&quot;&quot;</span>
</span><span id="__span-17-474"><a id="__codelineno-17-474" name="__codelineno-17-474" href="#__codelineno-17-474"></a>
</span><span id="__span-17-475"><a id="__codelineno-17-475" name="__codelineno-17-475" href="#__codelineno-17-475"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-17-476"><a id="__codelineno-17-476" name="__codelineno-17-476" href="#__codelineno-17-476"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">metrics</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="__span-17-477"><a id="__codelineno-17-477" name="__codelineno-17-477" href="#__codelineno-17-477"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">alerts</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="__span-17-478"><a id="__codelineno-17-478" name="__codelineno-17-478" href="#__codelineno-17-478"></a>
</span><span id="__span-17-479"><a id="__codelineno-17-479" name="__codelineno-17-479" href="#__codelineno-17-479"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;ğŸ“Š Monitoring System initialized&quot;</span><span class="p">)</span>
</span><span id="__span-17-480"><a id="__codelineno-17-480" name="__codelineno-17-480" href="#__codelineno-17-480"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;   âœ… Performance tracking&quot;</span><span class="p">)</span>
</span><span id="__span-17-481"><a id="__codelineno-17-481" name="__codelineno-17-481" href="#__codelineno-17-481"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;   âœ… Health checks&quot;</span><span class="p">)</span>
</span><span id="__span-17-482"><a id="__codelineno-17-482" name="__codelineno-17-482" href="#__codelineno-17-482"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;   âœ… Alert system&quot;</span><span class="p">)</span>
</span><span id="__span-17-483"><a id="__codelineno-17-483" name="__codelineno-17-483" href="#__codelineno-17-483"></a>
</span><span id="__span-17-484"><a id="__codelineno-17-484" name="__codelineno-17-484" href="#__codelineno-17-484"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">health_check</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
</span><span id="__span-17-485"><a id="__codelineno-17-485" name="__codelineno-17-485" href="#__codelineno-17-485"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Perform system health check&quot;&quot;&quot;</span>
</span><span id="__span-17-486"><a id="__codelineno-17-486" name="__codelineno-17-486" href="#__codelineno-17-486"></a>
</span><span id="__span-17-487"><a id="__codelineno-17-487" name="__codelineno-17-487" href="#__codelineno-17-487"></a>        <span class="n">health_status</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="__span-17-488"><a id="__codelineno-17-488" name="__codelineno-17-488" href="#__codelineno-17-488"></a>            <span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;healthy&#39;</span><span class="p">,</span>
</span><span id="__span-17-489"><a id="__codelineno-17-489" name="__codelineno-17-489" href="#__codelineno-17-489"></a>            <span class="s1">&#39;timestamp&#39;</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">isoformat</span><span class="p">(),</span>
</span><span id="__span-17-490"><a id="__codelineno-17-490" name="__codelineno-17-490" href="#__codelineno-17-490"></a>            <span class="s1">&#39;services&#39;</span><span class="p">:</span> <span class="p">{},</span>
</span><span id="__span-17-491"><a id="__codelineno-17-491" name="__codelineno-17-491" href="#__codelineno-17-491"></a>            <span class="s1">&#39;metrics&#39;</span><span class="p">:</span> <span class="p">{}</span>
</span><span id="__span-17-492"><a id="__codelineno-17-492" name="__codelineno-17-492" href="#__codelineno-17-492"></a>        <span class="p">}</span>
</span><span id="__span-17-493"><a id="__codelineno-17-493" name="__codelineno-17-493" href="#__codelineno-17-493"></a>
</span><span id="__span-17-494"><a id="__codelineno-17-494" name="__codelineno-17-494" href="#__codelineno-17-494"></a>        <span class="c1"># Check database</span>
</span><span id="__span-17-495"><a id="__codelineno-17-495" name="__codelineno-17-495" href="#__codelineno-17-495"></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="__span-17-496"><a id="__codelineno-17-496" name="__codelineno-17-496" href="#__codelineno-17-496"></a>            <span class="c1"># Simple database connectivity test</span>
</span><span id="__span-17-497"><a id="__codelineno-17-497" name="__codelineno-17-497" href="#__codelineno-17-497"></a>            <span class="n">conn</span> <span class="o">=</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;system_demo.db&#39;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
</span><span id="__span-17-498"><a id="__codelineno-17-498" name="__codelineno-17-498" href="#__codelineno-17-498"></a>            <span class="n">cursor</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
</span><span id="__span-17-499"><a id="__codelineno-17-499" name="__codelineno-17-499" href="#__codelineno-17-499"></a>            <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;SELECT 1&#39;</span><span class="p">)</span>
</span><span id="__span-17-500"><a id="__codelineno-17-500" name="__codelineno-17-500" href="#__codelineno-17-500"></a>            <span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span id="__span-17-501"><a id="__codelineno-17-501" name="__codelineno-17-501" href="#__codelineno-17-501"></a>
</span><span id="__span-17-502"><a id="__codelineno-17-502" name="__codelineno-17-502" href="#__codelineno-17-502"></a>            <span class="n">health_status</span><span class="p">[</span><span class="s1">&#39;services&#39;</span><span class="p">][</span><span class="s1">&#39;database&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="__span-17-503"><a id="__codelineno-17-503" name="__codelineno-17-503" href="#__codelineno-17-503"></a>                <span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;healthy&#39;</span><span class="p">,</span>
</span><span id="__span-17-504"><a id="__codelineno-17-504" name="__codelineno-17-504" href="#__codelineno-17-504"></a>                <span class="s1">&#39;response_time_ms&#39;</span><span class="p">:</span> <span class="mi">2</span>
</span><span id="__span-17-505"><a id="__codelineno-17-505" name="__codelineno-17-505" href="#__codelineno-17-505"></a>            <span class="p">}</span>
</span><span id="__span-17-506"><a id="__codelineno-17-506" name="__codelineno-17-506" href="#__codelineno-17-506"></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="__span-17-507"><a id="__codelineno-17-507" name="__codelineno-17-507" href="#__codelineno-17-507"></a>            <span class="n">health_status</span><span class="p">[</span><span class="s1">&#39;services&#39;</span><span class="p">][</span><span class="s1">&#39;database&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="__span-17-508"><a id="__codelineno-17-508" name="__codelineno-17-508" href="#__codelineno-17-508"></a>                <span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;unhealthy&#39;</span><span class="p">,</span>
</span><span id="__span-17-509"><a id="__codelineno-17-509" name="__codelineno-17-509" href="#__codelineno-17-509"></a>                <span class="s1">&#39;error&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</span><span id="__span-17-510"><a id="__codelineno-17-510" name="__codelineno-17-510" href="#__codelineno-17-510"></a>            <span class="p">}</span>
</span><span id="__span-17-511"><a id="__codelineno-17-511" name="__codelineno-17-511" href="#__codelineno-17-511"></a>            <span class="n">health_status</span><span class="p">[</span><span class="s1">&#39;status&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;degraded&#39;</span>
</span><span id="__span-17-512"><a id="__codelineno-17-512" name="__codelineno-17-512" href="#__codelineno-17-512"></a>
</span><span id="__span-17-513"><a id="__codelineno-17-513" name="__codelineno-17-513" href="#__codelineno-17-513"></a>        <span class="c1"># Check memory usage (simplified)</span>
</span><span id="__span-17-514"><a id="__codelineno-17-514" name="__codelineno-17-514" href="#__codelineno-17-514"></a>        <span class="kn">import</span><span class="w"> </span><span class="nn">psutil</span>
</span><span id="__span-17-515"><a id="__codelineno-17-515" name="__codelineno-17-515" href="#__codelineno-17-515"></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="__span-17-516"><a id="__codelineno-17-516" name="__codelineno-17-516" href="#__codelineno-17-516"></a>            <span class="n">memory_percent</span> <span class="o">=</span> <span class="n">psutil</span><span class="o">.</span><span class="n">virtual_memory</span><span class="p">()</span><span class="o">.</span><span class="n">percent</span>
</span><span id="__span-17-517"><a id="__codelineno-17-517" name="__codelineno-17-517" href="#__codelineno-17-517"></a>            <span class="n">health_status</span><span class="p">[</span><span class="s1">&#39;metrics&#39;</span><span class="p">][</span><span class="s1">&#39;memory_usage_percent&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">memory_percent</span>
</span><span id="__span-17-518"><a id="__codelineno-17-518" name="__codelineno-17-518" href="#__codelineno-17-518"></a>
</span><span id="__span-17-519"><a id="__codelineno-17-519" name="__codelineno-17-519" href="#__codelineno-17-519"></a>            <span class="k">if</span> <span class="n">memory_percent</span> <span class="o">&gt;</span> <span class="mi">90</span><span class="p">:</span>
</span><span id="__span-17-520"><a id="__codelineno-17-520" name="__codelineno-17-520" href="#__codelineno-17-520"></a>                <span class="n">health_status</span><span class="p">[</span><span class="s1">&#39;status&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;degraded&#39;</span>
</span><span id="__span-17-521"><a id="__codelineno-17-521" name="__codelineno-17-521" href="#__codelineno-17-521"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">alerts</span><span class="o">.</span><span class="n">append</span><span class="p">({</span>
</span><span id="__span-17-522"><a id="__codelineno-17-522" name="__codelineno-17-522" href="#__codelineno-17-522"></a>                    <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;high_memory_usage&#39;</span><span class="p">,</span>
</span><span id="__span-17-523"><a id="__codelineno-17-523" name="__codelineno-17-523" href="#__codelineno-17-523"></a>                    <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="n">memory_percent</span><span class="p">,</span>
</span><span id="__span-17-524"><a id="__codelineno-17-524" name="__codelineno-17-524" href="#__codelineno-17-524"></a>                    <span class="s1">&#39;timestamp&#39;</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">isoformat</span><span class="p">()</span>
</span><span id="__span-17-525"><a id="__codelineno-17-525" name="__codelineno-17-525" href="#__codelineno-17-525"></a>                <span class="p">})</span>
</span><span id="__span-17-526"><a id="__codelineno-17-526" name="__codelineno-17-526" href="#__codelineno-17-526"></a>        <span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
</span><span id="__span-17-527"><a id="__codelineno-17-527" name="__codelineno-17-527" href="#__codelineno-17-527"></a>            <span class="c1"># psutil not available, use placeholder</span>
</span><span id="__span-17-528"><a id="__codelineno-17-528" name="__codelineno-17-528" href="#__codelineno-17-528"></a>            <span class="n">health_status</span><span class="p">[</span><span class="s1">&#39;metrics&#39;</span><span class="p">][</span><span class="s1">&#39;memory_usage_percent&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">45.2</span>
</span><span id="__span-17-529"><a id="__codelineno-17-529" name="__codelineno-17-529" href="#__codelineno-17-529"></a>
</span><span id="__span-17-530"><a id="__codelineno-17-530" name="__codelineno-17-530" href="#__codelineno-17-530"></a>        <span class="c1"># Check disk space (simplified)</span>
</span><span id="__span-17-531"><a id="__codelineno-17-531" name="__codelineno-17-531" href="#__codelineno-17-531"></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="__span-17-532"><a id="__codelineno-17-532" name="__codelineno-17-532" href="#__codelineno-17-532"></a>            <span class="n">disk_usage</span> <span class="o">=</span> <span class="n">psutil</span><span class="o">.</span><span class="n">disk_usage</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">percent</span>
</span><span id="__span-17-533"><a id="__codelineno-17-533" name="__codelineno-17-533" href="#__codelineno-17-533"></a>            <span class="n">health_status</span><span class="p">[</span><span class="s1">&#39;metrics&#39;</span><span class="p">][</span><span class="s1">&#39;disk_usage_percent&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">disk_usage</span>
</span><span id="__span-17-534"><a id="__codelineno-17-534" name="__codelineno-17-534" href="#__codelineno-17-534"></a>
</span><span id="__span-17-535"><a id="__codelineno-17-535" name="__codelineno-17-535" href="#__codelineno-17-535"></a>            <span class="k">if</span> <span class="n">disk_usage</span> <span class="o">&gt;</span> <span class="mi">85</span><span class="p">:</span>
</span><span id="__span-17-536"><a id="__codelineno-17-536" name="__codelineno-17-536" href="#__codelineno-17-536"></a>                <span class="n">health_status</span><span class="p">[</span><span class="s1">&#39;status&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;degraded&#39;</span>
</span><span id="__span-17-537"><a id="__codelineno-17-537" name="__codelineno-17-537" href="#__codelineno-17-537"></a>        <span class="k">except</span><span class="p">:</span>
</span><span id="__span-17-538"><a id="__codelineno-17-538" name="__codelineno-17-538" href="#__codelineno-17-538"></a>            <span class="n">health_status</span><span class="p">[</span><span class="s1">&#39;metrics&#39;</span><span class="p">][</span><span class="s1">&#39;disk_usage_percent&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">32.1</span>
</span><span id="__span-17-539"><a id="__codelineno-17-539" name="__codelineno-17-539" href="#__codelineno-17-539"></a>
</span><span id="__span-17-540"><a id="__codelineno-17-540" name="__codelineno-17-540" href="#__codelineno-17-540"></a>        <span class="k">return</span> <span class="n">health_status</span>
</span><span id="__span-17-541"><a id="__codelineno-17-541" name="__codelineno-17-541" href="#__codelineno-17-541"></a>
</span><span id="__span-17-542"><a id="__codelineno-17-542" name="__codelineno-17-542" href="#__codelineno-17-542"></a><span class="c1"># Demonstration of the complete system architecture</span>
</span><span id="__span-17-543"><a id="__codelineno-17-543" name="__codelineno-17-543" href="#__codelineno-17-543"></a><span class="k">def</span><span class="w"> </span><span class="nf">demonstrate_system_architecture</span><span class="p">():</span>
</span><span id="__span-17-544"><a id="__codelineno-17-544" name="__codelineno-17-544" href="#__codelineno-17-544"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Demonstrate the complete system architecture&quot;&quot;&quot;</span>
</span><span id="__span-17-545"><a id="__codelineno-17-545" name="__codelineno-17-545" href="#__codelineno-17-545"></a>
</span><span id="__span-17-546"><a id="__codelineno-17-546" name="__codelineno-17-546" href="#__codelineno-17-546"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;ğŸš€ SYSTEM ARCHITECTURE DEMONSTRATION&quot;</span><span class="p">)</span>
</span><span id="__span-17-547"><a id="__codelineno-17-547" name="__codelineno-17-547" href="#__codelineno-17-547"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;=&quot;</span> <span class="o">*</span> <span class="mi">50</span><span class="p">)</span>
</span><span id="__span-17-548"><a id="__codelineno-17-548" name="__codelineno-17-548" href="#__codelineno-17-548"></a>
</span><span id="__span-17-549"><a id="__codelineno-17-549" name="__codelineno-17-549" href="#__codelineno-17-549"></a>    <span class="c1"># Initialize the system</span>
</span><span id="__span-17-550"><a id="__codelineno-17-550" name="__codelineno-17-550" href="#__codelineno-17-550"></a>    <span class="n">system</span> <span class="o">=</span> <span class="n">SystemArchitectureDemo</span><span class="p">()</span>
</span><span id="__span-17-551"><a id="__codelineno-17-551" name="__codelineno-17-551" href="#__codelineno-17-551"></a>    <span class="nb">print</span><span class="p">()</span>
</span><span id="__span-17-552"><a id="__codelineno-17-552" name="__codelineno-17-552" href="#__codelineno-17-552"></a>
</span><span id="__span-17-553"><a id="__codelineno-17-553" name="__codelineno-17-553" href="#__codelineno-17-553"></a>    <span class="c1"># Test user retrieval</span>
</span><span id="__span-17-554"><a id="__codelineno-17-554" name="__codelineno-17-554" href="#__codelineno-17-554"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;1ï¸âƒ£ Testing User Profile Retrieval&quot;</span><span class="p">)</span>
</span><span id="__span-17-555"><a id="__codelineno-17-555" name="__codelineno-17-555" href="#__codelineno-17-555"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;-&quot;</span> <span class="o">*</span> <span class="mi">30</span><span class="p">)</span>
</span><span id="__span-17-556"><a id="__codelineno-17-556" name="__codelineno-17-556" href="#__codelineno-17-556"></a>    <span class="n">user_response</span> <span class="o">=</span> <span class="n">system</span><span class="o">.</span><span class="n">presentation</span><span class="o">.</span><span class="n">api_get_user</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span><span id="__span-17-557"><a id="__codelineno-17-557" name="__codelineno-17-557" href="#__codelineno-17-557"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;API Response: </span><span class="si">{</span><span class="n">user_response</span><span class="p">[</span><span class="s1">&#39;success&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-17-558"><a id="__codelineno-17-558" name="__codelineno-17-558" href="#__codelineno-17-558"></a>    <span class="k">if</span> <span class="n">user_response</span><span class="p">[</span><span class="s1">&#39;success&#39;</span><span class="p">]:</span>
</span><span id="__span-17-559"><a id="__codelineno-17-559" name="__codelineno-17-559" href="#__codelineno-17-559"></a>        <span class="n">user_data</span> <span class="o">=</span> <span class="n">user_response</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">]</span>
</span><span id="__span-17-560"><a id="__codelineno-17-560" name="__codelineno-17-560" href="#__codelineno-17-560"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   User: </span><span class="si">{</span><span class="n">user_data</span><span class="p">[</span><span class="s1">&#39;username&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-17-561"><a id="__codelineno-17-561" name="__codelineno-17-561" href="#__codelineno-17-561"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Account Age: </span><span class="si">{</span><span class="n">user_data</span><span class="p">[</span><span class="s1">&#39;account_age_days&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> days&quot;</span><span class="p">)</span>
</span><span id="__span-17-562"><a id="__codelineno-17-562" name="__codelineno-17-562" href="#__codelineno-17-562"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Activity: </span><span class="si">{</span><span class="n">user_data</span><span class="p">[</span><span class="s1">&#39;activity_status&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-17-563"><a id="__codelineno-17-563" name="__codelineno-17-563" href="#__codelineno-17-563"></a>    <span class="nb">print</span><span class="p">()</span>
</span><span id="__span-17-564"><a id="__codelineno-17-564" name="__codelineno-17-564" href="#__codelineno-17-564"></a>
</span><span id="__span-17-565"><a id="__codelineno-17-565" name="__codelineno-17-565" href="#__codelineno-17-565"></a>    <span class="c1"># Test product search</span>
</span><span id="__span-17-566"><a id="__codelineno-17-566" name="__codelineno-17-566" href="#__codelineno-17-566"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;2ï¸âƒ£ Testing Product Search&quot;</span><span class="p">)</span>
</span><span id="__span-17-567"><a id="__codelineno-17-567" name="__codelineno-17-567" href="#__codelineno-17-567"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;-&quot;</span> <span class="o">*</span> <span class="mi">30</span><span class="p">)</span>
</span><span id="__span-17-568"><a id="__codelineno-17-568" name="__codelineno-17-568" href="#__codelineno-17-568"></a>    <span class="n">search_response</span> <span class="o">=</span> <span class="n">system</span><span class="o">.</span><span class="n">presentation</span><span class="o">.</span><span class="n">api_search_products</span><span class="p">(</span><span class="s2">&quot;laptop&quot;</span><span class="p">,</span> <span class="n">max_price</span><span class="o">=</span><span class="mi">1500</span><span class="p">)</span>
</span><span id="__span-17-569"><a id="__codelineno-17-569" name="__codelineno-17-569" href="#__codelineno-17-569"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;API Response: </span><span class="si">{</span><span class="n">search_response</span><span class="p">[</span><span class="s1">&#39;success&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-17-570"><a id="__codelineno-17-570" name="__codelineno-17-570" href="#__codelineno-17-570"></a>    <span class="k">if</span> <span class="n">search_response</span><span class="p">[</span><span class="s1">&#39;success&#39;</span><span class="p">]:</span>
</span><span id="__span-17-571"><a id="__codelineno-17-571" name="__codelineno-17-571" href="#__codelineno-17-571"></a>        <span class="n">products</span> <span class="o">=</span> <span class="n">search_response</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;products&#39;</span><span class="p">]</span>
</span><span id="__span-17-572"><a id="__codelineno-17-572" name="__codelineno-17-572" href="#__codelineno-17-572"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Found </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">products</span><span class="p">)</span><span class="si">}</span><span class="s2"> products&quot;</span><span class="p">)</span>
</span><span id="__span-17-573"><a id="__codelineno-17-573" name="__codelineno-17-573" href="#__codelineno-17-573"></a>        <span class="k">for</span> <span class="n">product</span> <span class="ow">in</span> <span class="n">products</span><span class="p">:</span>
</span><span id="__span-17-574"><a id="__codelineno-17-574" name="__codelineno-17-574" href="#__codelineno-17-574"></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   â€¢ </span><span class="si">{</span><span class="n">product</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">: $</span><span class="si">{</span><span class="n">product</span><span class="p">[</span><span class="s1">&#39;price&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> (</span><span class="si">{</span><span class="n">product</span><span class="p">[</span><span class="s1">&#39;availability&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>
</span><span id="__span-17-575"><a id="__codelineno-17-575" name="__codelineno-17-575" href="#__codelineno-17-575"></a>    <span class="nb">print</span><span class="p">()</span>
</span><span id="__span-17-576"><a id="__codelineno-17-576" name="__codelineno-17-576" href="#__codelineno-17-576"></a>
</span><span id="__span-17-577"><a id="__codelineno-17-577" name="__codelineno-17-577" href="#__codelineno-17-577"></a>    <span class="c1"># Test order creation</span>
</span><span id="__span-17-578"><a id="__codelineno-17-578" name="__codelineno-17-578" href="#__codelineno-17-578"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;3ï¸âƒ£ Testing Order Creation&quot;</span><span class="p">)</span>
</span><span id="__span-17-579"><a id="__codelineno-17-579" name="__codelineno-17-579" href="#__codelineno-17-579"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;-&quot;</span> <span class="o">*</span> <span class="mi">30</span><span class="p">)</span>
</span><span id="__span-17-580"><a id="__codelineno-17-580" name="__codelineno-17-580" href="#__codelineno-17-580"></a>    <span class="n">order_response</span> <span class="o">=</span> <span class="n">system</span><span class="o">.</span><span class="n">presentation</span><span class="o">.</span><span class="n">api_create_order</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>
</span><span id="__span-17-581"><a id="__codelineno-17-581" name="__codelineno-17-581" href="#__codelineno-17-581"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;API Response: </span><span class="si">{</span><span class="n">order_response</span><span class="p">[</span><span class="s1">&#39;success&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-17-582"><a id="__codelineno-17-582" name="__codelineno-17-582" href="#__codelineno-17-582"></a>    <span class="k">if</span> <span class="n">order_response</span><span class="p">[</span><span class="s1">&#39;success&#39;</span><span class="p">]:</span>
</span><span id="__span-17-583"><a id="__codelineno-17-583" name="__codelineno-17-583" href="#__codelineno-17-583"></a>        <span class="n">order</span> <span class="o">=</span> <span class="n">order_response</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">]</span>
</span><span id="__span-17-584"><a id="__codelineno-17-584" name="__codelineno-17-584" href="#__codelineno-17-584"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Order ID: </span><span class="si">{</span><span class="n">order</span><span class="p">[</span><span class="s1">&#39;order_id&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-17-585"><a id="__codelineno-17-585" name="__codelineno-17-585" href="#__codelineno-17-585"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Total: $</span><span class="si">{</span><span class="n">order</span><span class="p">[</span><span class="s1">&#39;total_amount&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-17-586"><a id="__codelineno-17-586" name="__codelineno-17-586" href="#__codelineno-17-586"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Items: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">order</span><span class="p">[</span><span class="s1">&#39;items&#39;</span><span class="p">])</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-17-587"><a id="__codelineno-17-587" name="__codelineno-17-587" href="#__codelineno-17-587"></a>    <span class="nb">print</span><span class="p">()</span>
</span><span id="__span-17-588"><a id="__codelineno-17-588" name="__codelineno-17-588" href="#__codelineno-17-588"></a>
</span><span id="__span-17-589"><a id="__codelineno-17-589" name="__codelineno-17-589" href="#__codelineno-17-589"></a>    <span class="c1"># Test system health</span>
</span><span id="__span-17-590"><a id="__codelineno-17-590" name="__codelineno-17-590" href="#__codelineno-17-590"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;4ï¸âƒ£ Testing System Health&quot;</span><span class="p">)</span>
</span><span id="__span-17-591"><a id="__codelineno-17-591" name="__codelineno-17-591" href="#__codelineno-17-591"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;-&quot;</span> <span class="o">*</span> <span class="mi">30</span><span class="p">)</span>
</span><span id="__span-17-592"><a id="__codelineno-17-592" name="__codelineno-17-592" href="#__codelineno-17-592"></a>    <span class="n">health</span> <span class="o">=</span> <span class="n">system</span><span class="o">.</span><span class="n">monitoring</span><span class="o">.</span><span class="n">health_check</span><span class="p">()</span>
</span><span id="__span-17-593"><a id="__codelineno-17-593" name="__codelineno-17-593" href="#__codelineno-17-593"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;System Status: </span><span class="si">{</span><span class="n">health</span><span class="p">[</span><span class="s1">&#39;status&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-17-594"><a id="__codelineno-17-594" name="__codelineno-17-594" href="#__codelineno-17-594"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Database: </span><span class="si">{</span><span class="n">health</span><span class="p">[</span><span class="s1">&#39;services&#39;</span><span class="p">][</span><span class="s1">&#39;database&#39;</span><span class="p">][</span><span class="s1">&#39;status&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-17-595"><a id="__codelineno-17-595" name="__codelineno-17-595" href="#__codelineno-17-595"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Memory Usage: </span><span class="si">{</span><span class="n">health</span><span class="p">[</span><span class="s1">&#39;metrics&#39;</span><span class="p">][</span><span class="s1">&#39;memory_usage_percent&#39;</span><span class="p">]</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2">%&quot;</span><span class="p">)</span>
</span><span id="__span-17-596"><a id="__codelineno-17-596" name="__codelineno-17-596" href="#__codelineno-17-596"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Disk Usage: </span><span class="si">{</span><span class="n">health</span><span class="p">[</span><span class="s1">&#39;metrics&#39;</span><span class="p">][</span><span class="s1">&#39;disk_usage_percent&#39;</span><span class="p">]</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2">%&quot;</span><span class="p">)</span>
</span><span id="__span-17-597"><a id="__codelineno-17-597" name="__codelineno-17-597" href="#__codelineno-17-597"></a>    <span class="nb">print</span><span class="p">()</span>
</span><span id="__span-17-598"><a id="__codelineno-17-598" name="__codelineno-17-598" href="#__codelineno-17-598"></a>
</span><span id="__span-17-599"><a id="__codelineno-17-599" name="__codelineno-17-599" href="#__codelineno-17-599"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;âœ… System Architecture Demo Complete!&quot;</span><span class="p">)</span>
</span><span id="__span-17-600"><a id="__codelineno-17-600" name="__codelineno-17-600" href="#__codelineno-17-600"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">ğŸ’¡ KEY ARCHITECTURE PRINCIPLES:&quot;</span><span class="p">)</span>
</span><span id="__span-17-601"><a id="__codelineno-17-601" name="__codelineno-17-601" href="#__codelineno-17-601"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;1. Separation of Concerns (3-tier architecture)&quot;</span><span class="p">)</span>
</span><span id="__span-17-602"><a id="__codelineno-17-602" name="__codelineno-17-602" href="#__codelineno-17-602"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;2. Database connection pooling and caching&quot;</span><span class="p">)</span>
</span><span id="__span-17-603"><a id="__codelineno-17-603" name="__codelineno-17-603" href="#__codelineno-17-603"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;3. Business logic validation and rate limiting&quot;</span><span class="p">)</span>
</span><span id="__span-17-604"><a id="__codelineno-17-604" name="__codelineno-17-604" href="#__codelineno-17-604"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;4. Consistent API response formatting&quot;</span><span class="p">)</span>
</span><span id="__span-17-605"><a id="__codelineno-17-605" name="__codelineno-17-605" href="#__codelineno-17-605"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;5. System monitoring and health checks&quot;</span><span class="p">)</span>
</span><span id="__span-17-606"><a id="__codelineno-17-606" name="__codelineno-17-606" href="#__codelineno-17-606"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;6. Error handling at every layer&quot;</span><span class="p">)</span>
</span><span id="__span-17-607"><a id="__codelineno-17-607" name="__codelineno-17-607" href="#__codelineno-17-607"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;7. Performance metrics and logging&quot;</span><span class="p">)</span>
</span><span id="__span-17-608"><a id="__codelineno-17-608" name="__codelineno-17-608" href="#__codelineno-17-608"></a>
</span><span id="__span-17-609"><a id="__codelineno-17-609" name="__codelineno-17-609" href="#__codelineno-17-609"></a><span class="c1"># Run the demonstration</span>
</span><span id="__span-17-610"><a id="__codelineno-17-610" name="__codelineno-17-610" href="#__codelineno-17-610"></a><span class="n">demonstrate_system_architecture</span><span class="p">()</span>
</span></code></pre></div>
</details>
<p><strong>ğŸ”§ Browser Developer Tools: Your Web Development X-Ray Vision</strong></p>
<p>Modern browsers come with incredibly powerful developer tools that are essential for debugging, optimizing, and understanding web applications:</p>
<details class="example">
<summary>Browser DevTools Example</summary>
<div class="language-javascript highlight"><pre><span></span><code><span id="__span-18-1"><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a><span class="c1">// Browser DevTools JavaScript Helper Functions</span>
</span><span id="__span-18-2"><a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a><span class="kd">class</span><span class="w"> </span><span class="nx">BrowserDevToolsHelper</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-18-3"><a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a><span class="w">    </span><span class="kr">constructor</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-18-4"><a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a><span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;ğŸ”§ Browser DevTools Helper loaded&#39;</span><span class="p">);</span>
</span><span id="__span-18-5"><a id="__codelineno-18-5" name="__codelineno-18-5" href="#__codelineno-18-5"></a><span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Available commands:&#39;</span><span class="p">);</span>
</span><span id="__span-18-6"><a id="__codelineno-18-6" name="__codelineno-18-6" href="#__codelineno-18-6"></a><span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;- this.inspectPerformance()&#39;</span><span class="p">);</span>
</span><span id="__span-18-7"><a id="__codelineno-18-7" name="__codelineno-18-7" href="#__codelineno-18-7"></a><span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;- this.analyzeNetwork()&#39;</span><span class="p">);</span>
</span><span id="__span-18-8"><a id="__codelineno-18-8" name="__codelineno-18-8" href="#__codelineno-18-8"></a><span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;- this.debugCSS()&#39;</span><span class="p">);</span>
</span><span id="__span-18-9"><a id="__codelineno-18-9" name="__codelineno-18-9" href="#__codelineno-18-9"></a><span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;- this.profileMemory()&#39;</span><span class="p">);</span>
</span><span id="__span-18-10"><a id="__codelineno-18-10" name="__codelineno-18-10" href="#__codelineno-18-10"></a><span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;- this.auditAccessibility()&#39;</span><span class="p">);</span>
</span><span id="__span-18-11"><a id="__codelineno-18-11" name="__codelineno-18-11" href="#__codelineno-18-11"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-18-12"><a id="__codelineno-18-12" name="__codelineno-18-12" href="#__codelineno-18-12"></a>
</span><span id="__span-18-13"><a id="__codelineno-18-13" name="__codelineno-18-13" href="#__codelineno-18-13"></a><span class="w">    </span><span class="nx">inspectPerformance</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-18-14"><a id="__codelineno-18-14" name="__codelineno-18-14" href="#__codelineno-18-14"></a><span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;âš¡ Performance Analysis&#39;</span><span class="p">);</span>
</span><span id="__span-18-15"><a id="__codelineno-18-15" name="__codelineno-18-15" href="#__codelineno-18-15"></a><span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Navigation Timing:&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">performance</span><span class="p">.</span><span class="nx">getEntriesByType</span><span class="p">(</span><span class="s1">&#39;navigation&#39;</span><span class="p">)[</span><span class="mf">0</span><span class="p">]);</span>
</span><span id="__span-18-16"><a id="__codelineno-18-16" name="__codelineno-18-16" href="#__codelineno-18-16"></a><span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Resource Timing:&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">performance</span><span class="p">.</span><span class="nx">getEntriesByType</span><span class="p">(</span><span class="s1">&#39;resource&#39;</span><span class="p">));</span>
</span><span id="__span-18-17"><a id="__codelineno-18-17" name="__codelineno-18-17" href="#__codelineno-18-17"></a>
</span><span id="__span-18-18"><a id="__codelineno-18-18" name="__codelineno-18-18" href="#__codelineno-18-18"></a><span class="w">        </span><span class="c1">// Custom performance marks</span>
</span><span id="__span-18-19"><a id="__codelineno-18-19" name="__codelineno-18-19" href="#__codelineno-18-19"></a><span class="w">        </span><span class="nx">performance</span><span class="p">.</span><span class="nx">mark</span><span class="p">(</span><span class="s1">&#39;analysis-start&#39;</span><span class="p">);</span>
</span><span id="__span-18-20"><a id="__codelineno-18-20" name="__codelineno-18-20" href="#__codelineno-18-20"></a>
</span><span id="__span-18-21"><a id="__codelineno-18-21" name="__codelineno-18-21" href="#__codelineno-18-21"></a><span class="w">        </span><span class="c1">// Simulate some work</span>
</span><span id="__span-18-22"><a id="__codelineno-18-22" name="__codelineno-18-22" href="#__codelineno-18-22"></a><span class="w">        </span><span class="nx">setTimeout</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-18-23"><a id="__codelineno-18-23" name="__codelineno-18-23" href="#__codelineno-18-23"></a><span class="w">            </span><span class="nx">performance</span><span class="p">.</span><span class="nx">mark</span><span class="p">(</span><span class="s1">&#39;analysis-end&#39;</span><span class="p">);</span>
</span><span id="__span-18-24"><a id="__codelineno-18-24" name="__codelineno-18-24" href="#__codelineno-18-24"></a><span class="w">            </span><span class="nx">performance</span><span class="p">.</span><span class="nx">measure</span><span class="p">(</span><span class="s1">&#39;analysis-duration&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;analysis-start&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;analysis-end&#39;</span><span class="p">);</span>
</span><span id="__span-18-25"><a id="__codelineno-18-25" name="__codelineno-18-25" href="#__codelineno-18-25"></a>
</span><span id="__span-18-26"><a id="__codelineno-18-26" name="__codelineno-18-26" href="#__codelineno-18-26"></a><span class="w">            </span><span class="kd">const</span><span class="w"> </span><span class="nx">measure</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">performance</span><span class="p">.</span><span class="nx">getEntriesByName</span><span class="p">(</span><span class="s1">&#39;analysis-duration&#39;</span><span class="p">)[</span><span class="mf">0</span><span class="p">];</span>
</span><span id="__span-18-27"><a id="__codelineno-18-27" name="__codelineno-18-27" href="#__codelineno-18-27"></a><span class="w">            </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`Analysis took: </span><span class="si">${</span><span class="nx">measure</span><span class="p">.</span><span class="nx">duration</span><span class="p">.</span><span class="nx">toFixed</span><span class="p">(</span><span class="mf">2</span><span class="p">)</span><span class="si">}</span><span class="sb">ms`</span><span class="p">);</span>
</span><span id="__span-18-28"><a id="__codelineno-18-28" name="__codelineno-18-28" href="#__codelineno-18-28"></a><span class="w">        </span><span class="p">},</span><span class="w"> </span><span class="mf">100</span><span class="p">);</span>
</span><span id="__span-18-29"><a id="__codelineno-18-29" name="__codelineno-18-29" href="#__codelineno-18-29"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-18-30"><a id="__codelineno-18-30" name="__codelineno-18-30" href="#__codelineno-18-30"></a>
</span><span id="__span-18-31"><a id="__codelineno-18-31" name="__codelineno-18-31" href="#__codelineno-18-31"></a><span class="w">    </span><span class="nx">analyzeNetwork</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-18-32"><a id="__codelineno-18-32" name="__codelineno-18-32" href="#__codelineno-18-32"></a><span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;ğŸŒ Network Analysis&#39;</span><span class="p">);</span>
</span><span id="__span-18-33"><a id="__codelineno-18-33" name="__codelineno-18-33" href="#__codelineno-18-33"></a><span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Connection:&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">navigator</span><span class="p">.</span><span class="nx">connection</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="s1">&#39;Connection API not supported&#39;</span><span class="p">);</span>
</span><span id="__span-18-34"><a id="__codelineno-18-34" name="__codelineno-18-34" href="#__codelineno-18-34"></a><span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Online:&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">navigator</span><span class="p">.</span><span class="nx">onLine</span><span class="p">);</span>
</span><span id="__span-18-35"><a id="__codelineno-18-35" name="__codelineno-18-35" href="#__codelineno-18-35"></a>
</span><span id="__span-18-36"><a id="__codelineno-18-36" name="__codelineno-18-36" href="#__codelineno-18-36"></a><span class="w">        </span><span class="c1">// Monitor fetch requests</span>
</span><span id="__span-18-37"><a id="__codelineno-18-37" name="__codelineno-18-37" href="#__codelineno-18-37"></a><span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">originalFetch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">window</span><span class="p">.</span><span class="nx">fetch</span><span class="p">;</span>
</span><span id="__span-18-38"><a id="__codelineno-18-38" name="__codelineno-18-38" href="#__codelineno-18-38"></a><span class="w">        </span><span class="nb">window</span><span class="p">.</span><span class="nx">fetch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="p">(...</span><span class="nx">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-18-39"><a id="__codelineno-18-39" name="__codelineno-18-39" href="#__codelineno-18-39"></a><span class="w">            </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;ğŸ“¡ Fetch request:&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">args</span><span class="p">[</span><span class="mf">0</span><span class="p">]);</span>
</span><span id="__span-18-40"><a id="__codelineno-18-40" name="__codelineno-18-40" href="#__codelineno-18-40"></a><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="nx">originalFetch</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="w"> </span><span class="nx">args</span><span class="p">)</span>
</span><span id="__span-18-41"><a id="__codelineno-18-41" name="__codelineno-18-41" href="#__codelineno-18-41"></a><span class="w">                </span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-18-42"><a id="__codelineno-18-42" name="__codelineno-18-42" href="#__codelineno-18-42"></a><span class="w">                    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;âœ… Response:&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">response</span><span class="p">.</span><span class="nx">status</span><span class="p">,</span><span class="w"> </span><span class="nx">response</span><span class="p">.</span><span class="nx">statusText</span><span class="p">);</span>
</span><span id="__span-18-43"><a id="__codelineno-18-43" name="__codelineno-18-43" href="#__codelineno-18-43"></a><span class="w">                    </span><span class="k">return</span><span class="w"> </span><span class="nx">response</span><span class="p">;</span>
</span><span id="__span-18-44"><a id="__codelineno-18-44" name="__codelineno-18-44" href="#__codelineno-18-44"></a><span class="w">                </span><span class="p">})</span>
</span><span id="__span-18-45"><a id="__codelineno-18-45" name="__codelineno-18-45" href="#__codelineno-18-45"></a><span class="w">                </span><span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">error</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-18-46"><a id="__codelineno-18-46" name="__codelineno-18-46" href="#__codelineno-18-46"></a><span class="w">                    </span><span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s1">&#39;âŒ Fetch error:&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">error</span><span class="p">);</span>
</span><span id="__span-18-47"><a id="__codelineno-18-47" name="__codelineno-18-47" href="#__codelineno-18-47"></a><span class="w">                    </span><span class="k">throw</span><span class="w"> </span><span class="nx">error</span><span class="p">;</span>
</span><span id="__span-18-48"><a id="__codelineno-18-48" name="__codelineno-18-48" href="#__codelineno-18-48"></a><span class="w">                </span><span class="p">});</span>
</span><span id="__span-18-49"><a id="__codelineno-18-49" name="__codelineno-18-49" href="#__codelineno-18-49"></a><span class="w">        </span><span class="p">};</span>
</span><span id="__span-18-50"><a id="__codelineno-18-50" name="__codelineno-18-50" href="#__codelineno-18-50"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-18-51"><a id="__codelineno-18-51" name="__codelineno-18-51" href="#__codelineno-18-51"></a>
</span><span id="__span-18-52"><a id="__codelineno-18-52" name="__codelineno-18-52" href="#__codelineno-18-52"></a><span class="w">    </span><span class="nx">debugCSS</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-18-53"><a id="__codelineno-18-53" name="__codelineno-18-53" href="#__codelineno-18-53"></a><span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;ğŸ¨ CSS Debug Helper&#39;</span><span class="p">);</span>
</span><span id="__span-18-54"><a id="__codelineno-18-54" name="__codelineno-18-54" href="#__codelineno-18-54"></a>
</span><span id="__span-18-55"><a id="__codelineno-18-55" name="__codelineno-18-55" href="#__codelineno-18-55"></a><span class="w">        </span><span class="c1">// Add outline to all elements for layout debugging</span>
</span><span id="__span-18-56"><a id="__codelineno-18-56" name="__codelineno-18-56" href="#__codelineno-18-56"></a><span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">style</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;style&#39;</span><span class="p">);</span>
</span><span id="__span-18-57"><a id="__codelineno-18-57" name="__codelineno-18-57" href="#__codelineno-18-57"></a><span class="w">        </span><span class="nx">style</span><span class="p">.</span><span class="nx">textContent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sb">`</span>
</span><span id="__span-18-58"><a id="__codelineno-18-58" name="__codelineno-18-58" href="#__codelineno-18-58"></a><span class="sb">            * { outline: 1px solid red !important; }</span>
</span><span id="__span-18-59"><a id="__codelineno-18-59" name="__codelineno-18-59" href="#__codelineno-18-59"></a><span class="sb">            * * { outline: 1px solid blue !important; }</span>
</span><span id="__span-18-60"><a id="__codelineno-18-60" name="__codelineno-18-60" href="#__codelineno-18-60"></a><span class="sb">            * * * { outline: 1px solid green !important; }</span>
</span><span id="__span-18-61"><a id="__codelineno-18-61" name="__codelineno-18-61" href="#__codelineno-18-61"></a><span class="sb">        `</span><span class="p">;</span>
</span><span id="__span-18-62"><a id="__codelineno-18-62" name="__codelineno-18-62" href="#__codelineno-18-62"></a>
</span><span id="__span-18-63"><a id="__codelineno-18-63" name="__codelineno-18-63" href="#__codelineno-18-63"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">head</span><span class="p">.</span><span class="nx">contains</span><span class="p">(</span><span class="nx">style</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-18-64"><a id="__codelineno-18-64" name="__codelineno-18-64" href="#__codelineno-18-64"></a><span class="w">            </span><span class="nb">document</span><span class="p">.</span><span class="nx">head</span><span class="p">.</span><span class="nx">removeChild</span><span class="p">(</span><span class="nx">style</span><span class="p">);</span>
</span><span id="__span-18-65"><a id="__codelineno-18-65" name="__codelineno-18-65" href="#__codelineno-18-65"></a><span class="w">            </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;CSS debug outlines removed&#39;</span><span class="p">);</span>
</span><span id="__span-18-66"><a id="__codelineno-18-66" name="__codelineno-18-66" href="#__codelineno-18-66"></a><span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-18-67"><a id="__codelineno-18-67" name="__codelineno-18-67" href="#__codelineno-18-67"></a><span class="w">            </span><span class="nb">document</span><span class="p">.</span><span class="nx">head</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">style</span><span class="p">);</span>
</span><span id="__span-18-68"><a id="__codelineno-18-68" name="__codelineno-18-68" href="#__codelineno-18-68"></a><span class="w">            </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;CSS debug outlines added&#39;</span><span class="p">);</span>
</span><span id="__span-18-69"><a id="__codelineno-18-69" name="__codelineno-18-69" href="#__codelineno-18-69"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-18-70"><a id="__codelineno-18-70" name="__codelineno-18-70" href="#__codelineno-18-70"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-18-71"><a id="__codelineno-18-71" name="__codelineno-18-71" href="#__codelineno-18-71"></a>
</span><span id="__span-18-72"><a id="__codelineno-18-72" name="__codelineno-18-72" href="#__codelineno-18-72"></a><span class="w">    </span><span class="nx">profileMemory</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-18-73"><a id="__codelineno-18-73" name="__codelineno-18-73" href="#__codelineno-18-73"></a><span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;ğŸ’¾ Memory Profiling&#39;</span><span class="p">);</span>
</span><span id="__span-18-74"><a id="__codelineno-18-74" name="__codelineno-18-74" href="#__codelineno-18-74"></a>
</span><span id="__span-18-75"><a id="__codelineno-18-75" name="__codelineno-18-75" href="#__codelineno-18-75"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">performance</span><span class="p">.</span><span class="nx">memory</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-18-76"><a id="__codelineno-18-76" name="__codelineno-18-76" href="#__codelineno-18-76"></a><span class="w">            </span><span class="kd">const</span><span class="w"> </span><span class="nx">memory</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">performance</span><span class="p">.</span><span class="nx">memory</span><span class="p">;</span>
</span><span id="__span-18-77"><a id="__codelineno-18-77" name="__codelineno-18-77" href="#__codelineno-18-77"></a><span class="w">            </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`Used: </span><span class="si">${</span><span class="p">(</span><span class="nx">memory</span><span class="p">.</span><span class="nx">usedJSHeapSize</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mf">1048576</span><span class="p">).</span><span class="nx">toFixed</span><span class="p">(</span><span class="mf">2</span><span class="p">)</span><span class="si">}</span><span class="sb"> MB`</span><span class="p">);</span>
</span><span id="__span-18-78"><a id="__codelineno-18-78" name="__codelineno-18-78" href="#__codelineno-18-78"></a><span class="w">            </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`Total: </span><span class="si">${</span><span class="p">(</span><span class="nx">memory</span><span class="p">.</span><span class="nx">totalJSHeapSize</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mf">1048576</span><span class="p">).</span><span class="nx">toFixed</span><span class="p">(</span><span class="mf">2</span><span class="p">)</span><span class="si">}</span><span class="sb"> MB`</span><span class="p">);</span>
</span><span id="__span-18-79"><a id="__codelineno-18-79" name="__codelineno-18-79" href="#__codelineno-18-79"></a><span class="w">            </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`Limit: </span><span class="si">${</span><span class="p">(</span><span class="nx">memory</span><span class="p">.</span><span class="nx">jsHeapSizeLimit</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mf">1048576</span><span class="p">).</span><span class="nx">toFixed</span><span class="p">(</span><span class="mf">2</span><span class="p">)</span><span class="si">}</span><span class="sb"> MB`</span><span class="p">);</span>
</span><span id="__span-18-80"><a id="__codelineno-18-80" name="__codelineno-18-80" href="#__codelineno-18-80"></a><span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-18-81"><a id="__codelineno-18-81" name="__codelineno-18-81" href="#__codelineno-18-81"></a><span class="w">            </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Memory profiling not available in this browser&#39;</span><span class="p">);</span>
</span><span id="__span-18-82"><a id="__codelineno-18-82" name="__codelineno-18-82" href="#__codelineno-18-82"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-18-83"><a id="__codelineno-18-83" name="__codelineno-18-83" href="#__codelineno-18-83"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-18-84"><a id="__codelineno-18-84" name="__codelineno-18-84" href="#__codelineno-18-84"></a>
</span><span id="__span-18-85"><a id="__codelineno-18-85" name="__codelineno-18-85" href="#__codelineno-18-85"></a><span class="w">    </span><span class="nx">auditAccessibility</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-18-86"><a id="__codelineno-18-86" name="__codelineno-18-86" href="#__codelineno-18-86"></a><span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;â™¿ Accessibility Audit&#39;</span><span class="p">);</span>
</span><span id="__span-18-87"><a id="__codelineno-18-87" name="__codelineno-18-87" href="#__codelineno-18-87"></a>
</span><span id="__span-18-88"><a id="__codelineno-18-88" name="__codelineno-18-88" href="#__codelineno-18-88"></a><span class="w">        </span><span class="c1">// Check for missing alt attributes</span>
</span><span id="__span-18-89"><a id="__codelineno-18-89" name="__codelineno-18-89" href="#__codelineno-18-89"></a><span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">imagesWithoutAlt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="s1">&#39;img:not([alt])&#39;</span><span class="p">);</span>
</span><span id="__span-18-90"><a id="__codelineno-18-90" name="__codelineno-18-90" href="#__codelineno-18-90"></a><span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`Images without alt text: </span><span class="si">${</span><span class="nx">imagesWithoutAlt</span><span class="p">.</span><span class="nx">length</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
</span><span id="__span-18-91"><a id="__codelineno-18-91" name="__codelineno-18-91" href="#__codelineno-18-91"></a>
</span><span id="__span-18-92"><a id="__codelineno-18-92" name="__codelineno-18-92" href="#__codelineno-18-92"></a><span class="w">        </span><span class="c1">// Check for proper heading hierarchy</span>
</span><span id="__span-18-93"><a id="__codelineno-18-93" name="__codelineno-18-93" href="#__codelineno-18-93"></a><span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">headings</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="s1">&#39;h1, h2, h3, h4, h5, h6&#39;</span><span class="p">);</span>
</span><span id="__span-18-94"><a id="__codelineno-18-94" name="__codelineno-18-94" href="#__codelineno-18-94"></a><span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`Heading elements found: </span><span class="si">${</span><span class="nx">headings</span><span class="p">.</span><span class="nx">length</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
</span><span id="__span-18-95"><a id="__codelineno-18-95" name="__codelineno-18-95" href="#__codelineno-18-95"></a>
</span><span id="__span-18-96"><a id="__codelineno-18-96" name="__codelineno-18-96" href="#__codelineno-18-96"></a><span class="w">        </span><span class="c1">// Check color contrast (simplified)</span>
</span><span id="__span-18-97"><a id="__codelineno-18-97" name="__codelineno-18-97" href="#__codelineno-18-97"></a><span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">elements</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="s1">&#39;*&#39;</span><span class="p">);</span>
</span><span id="__span-18-98"><a id="__codelineno-18-98" name="__codelineno-18-98" href="#__codelineno-18-98"></a><span class="w">        </span><span class="kd">let</span><span class="w"> </span><span class="nx">lowContrastElements</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span>
</span><span id="__span-18-99"><a id="__codelineno-18-99" name="__codelineno-18-99" href="#__codelineno-18-99"></a>
</span><span id="__span-18-100"><a id="__codelineno-18-100" name="__codelineno-18-100" href="#__codelineno-18-100"></a><span class="w">        </span><span class="nx">elements</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">el</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-18-101"><a id="__codelineno-18-101" name="__codelineno-18-101" href="#__codelineno-18-101"></a><span class="w">            </span><span class="kd">const</span><span class="w"> </span><span class="nx">styles</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">window</span><span class="p">.</span><span class="nx">getComputedStyle</span><span class="p">(</span><span class="nx">el</span><span class="p">);</span>
</span><span id="__span-18-102"><a id="__codelineno-18-102" name="__codelineno-18-102" href="#__codelineno-18-102"></a><span class="w">            </span><span class="kd">const</span><span class="w"> </span><span class="nx">bgColor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">styles</span><span class="p">.</span><span class="nx">backgroundColor</span><span class="p">;</span>
</span><span id="__span-18-103"><a id="__codelineno-18-103" name="__codelineno-18-103" href="#__codelineno-18-103"></a><span class="w">            </span><span class="kd">const</span><span class="w"> </span><span class="nx">textColor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">styles</span><span class="p">.</span><span class="nx">color</span><span class="p">;</span>
</span><span id="__span-18-104"><a id="__codelineno-18-104" name="__codelineno-18-104" href="#__codelineno-18-104"></a>
</span><span id="__span-18-105"><a id="__codelineno-18-105" name="__codelineno-18-105" href="#__codelineno-18-105"></a><span class="w">            </span><span class="c1">// Simple contrast check (would need more sophisticated calculation in reality)</span>
</span><span id="__span-18-106"><a id="__codelineno-18-106" name="__codelineno-18-106" href="#__codelineno-18-106"></a><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">bgColor</span><span class="w"> </span><span class="o">!==</span><span class="w"> </span><span class="s1">&#39;rgba(0, 0, 0, 0)&#39;</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nx">textColor</span><span class="w"> </span><span class="o">!==</span><span class="w"> </span><span class="s1">&#39;rgba(0, 0, 0, 0)&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-18-107"><a id="__codelineno-18-107" name="__codelineno-18-107" href="#__codelineno-18-107"></a><span class="w">                </span><span class="c1">// Placeholder for actual contrast calculation</span>
</span><span id="__span-18-108"><a id="__codelineno-18-108" name="__codelineno-18-108" href="#__codelineno-18-108"></a><span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mf">0.1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">// Simulate 10% low contrast elements</span>
</span><span id="__span-18-109"><a id="__codelineno-18-109" name="__codelineno-18-109" href="#__codelineno-18-109"></a><span class="w">                    </span><span class="nx">lowContrastElements</span><span class="o">++</span><span class="p">;</span>
</span><span id="__span-18-110"><a id="__codelineno-18-110" name="__codelineno-18-110" href="#__codelineno-18-110"></a><span class="w">                </span><span class="p">}</span>
</span><span id="__span-18-111"><a id="__codelineno-18-111" name="__codelineno-18-111" href="#__codelineno-18-111"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-18-112"><a id="__codelineno-18-112" name="__codelineno-18-112" href="#__codelineno-18-112"></a><span class="w">        </span><span class="p">});</span>
</span><span id="__span-18-113"><a id="__codelineno-18-113" name="__codelineno-18-113" href="#__codelineno-18-113"></a>
</span><span id="__span-18-114"><a id="__codelineno-18-114" name="__codelineno-18-114" href="#__codelineno-18-114"></a><span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`Potentially low contrast elements: </span><span class="si">${</span><span class="nx">lowContrastElements</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
</span><span id="__span-18-115"><a id="__codelineno-18-115" name="__codelineno-18-115" href="#__codelineno-18-115"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-18-116"><a id="__codelineno-18-116" name="__codelineno-18-116" href="#__codelineno-18-116"></a><span class="p">}</span>
</span><span id="__span-18-117"><a id="__codelineno-18-117" name="__codelineno-18-117" href="#__codelineno-18-117"></a>
</span><span id="__span-18-118"><a id="__codelineno-18-118" name="__codelineno-18-118" href="#__codelineno-18-118"></a><span class="c1">// Initialize DevTools helper</span>
</span><span id="__span-18-119"><a id="__codelineno-18-119" name="__codelineno-18-119" href="#__codelineno-18-119"></a><span class="kd">const</span><span class="w"> </span><span class="nx">devTools</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">BrowserDevToolsHelper</span><span class="p">();</span>
</span></code></pre></div>
</details>
<h3 id="styling-consistency-the-art-and-science-of-beautiful-web-design">Styling &amp; Consistency: The Art and Science of Beautiful Web Design ğŸ¨âœ¨<a class="headerlink" href="#styling-consistency-the-art-and-science-of-beautiful-web-design" title="Permanent link">&para;</a></h3>
<p>Consistency in web design isn't just about making things look prettyâ€”it's about creating a language that users can understand instantly, reducing cognitive load, and building trust through professional presentation. Great styling systems are like a well-orchestrated symphony where every element harmonizes perfectly.</p>
<details class="example">
<summary>Modern CSS Architecture Example</summary>
<div class="language-css highlight"><pre><span></span><code><span id="__span-19-1"><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a><span class="c">/* Modern CSS Architecture Example - Design System Approach */</span>
</span><span id="__span-19-2"><a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a>
</span><span id="__span-19-3"><a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a><span class="c">/* ===================================</span>
</span><span id="__span-19-4"><a id="__codelineno-19-4" name="__codelineno-19-4" href="#__codelineno-19-4"></a><span class="c">   1. CSS CUSTOM PROPERTIES (CSS VARIABLES)</span>
</span><span id="__span-19-5"><a id="__codelineno-19-5" name="__codelineno-19-5" href="#__codelineno-19-5"></a><span class="c">   ================================== */</span>
</span><span id="__span-19-6"><a id="__codelineno-19-6" name="__codelineno-19-6" href="#__codelineno-19-6"></a>
</span><span id="__span-19-7"><a id="__codelineno-19-7" name="__codelineno-19-7" href="#__codelineno-19-7"></a><span class="p">:</span><span class="nd">root</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-19-8"><a id="__codelineno-19-8" name="__codelineno-19-8" href="#__codelineno-19-8"></a><span class="w">    </span><span class="c">/* === COLOR SYSTEM === */</span>
</span><span id="__span-19-9"><a id="__codelineno-19-9" name="__codelineno-19-9" href="#__codelineno-19-9"></a><span class="w">    </span><span class="c">/* Primary Brand Colors */</span>
</span><span id="__span-19-10"><a id="__codelineno-19-10" name="__codelineno-19-10" href="#__codelineno-19-10"></a><span class="w">    </span><span class="nv">--color-primary-50</span><span class="p">:</span><span class="w"> </span><span class="nb">hsl</span><span class="p">(</span><span class="mi">210</span><span class="w"> </span><span class="mi">100</span><span class="kt">%</span><span class="w"> </span><span class="mi">97</span><span class="kt">%</span><span class="p">);</span>
</span><span id="__span-19-11"><a id="__codelineno-19-11" name="__codelineno-19-11" href="#__codelineno-19-11"></a><span class="w">    </span><span class="nv">--color-primary-100</span><span class="p">:</span><span class="w"> </span><span class="nb">hsl</span><span class="p">(</span><span class="mi">210</span><span class="w"> </span><span class="mi">100</span><span class="kt">%</span><span class="w"> </span><span class="mi">93</span><span class="kt">%</span><span class="p">);</span>
</span><span id="__span-19-12"><a id="__codelineno-19-12" name="__codelineno-19-12" href="#__codelineno-19-12"></a><span class="w">    </span><span class="nv">--color-primary-200</span><span class="p">:</span><span class="w"> </span><span class="nb">hsl</span><span class="p">(</span><span class="mi">210</span><span class="w"> </span><span class="mi">100</span><span class="kt">%</span><span class="w"> </span><span class="mi">87</span><span class="kt">%</span><span class="p">);</span>
</span><span id="__span-19-13"><a id="__codelineno-19-13" name="__codelineno-19-13" href="#__codelineno-19-13"></a><span class="w">    </span><span class="nv">--color-primary-300</span><span class="p">:</span><span class="w"> </span><span class="nb">hsl</span><span class="p">(</span><span class="mi">210</span><span class="w"> </span><span class="mi">100</span><span class="kt">%</span><span class="w"> </span><span class="mi">80</span><span class="kt">%</span><span class="p">);</span>
</span><span id="__span-19-14"><a id="__codelineno-19-14" name="__codelineno-19-14" href="#__codelineno-19-14"></a><span class="w">    </span><span class="nv">--color-primary-400</span><span class="p">:</span><span class="w"> </span><span class="nb">hsl</span><span class="p">(</span><span class="mi">210</span><span class="w"> </span><span class="mi">100</span><span class="kt">%</span><span class="w"> </span><span class="mi">70</span><span class="kt">%</span><span class="p">);</span>
</span><span id="__span-19-15"><a id="__codelineno-19-15" name="__codelineno-19-15" href="#__codelineno-19-15"></a><span class="w">    </span><span class="nv">--color-primary-500</span><span class="p">:</span><span class="w"> </span><span class="nb">hsl</span><span class="p">(</span><span class="mi">210</span><span class="w"> </span><span class="mi">100</span><span class="kt">%</span><span class="w"> </span><span class="mi">60</span><span class="kt">%</span><span class="p">);</span><span class="w"> </span><span class="c">/* Main brand color */</span>
</span><span id="__span-19-16"><a id="__codelineno-19-16" name="__codelineno-19-16" href="#__codelineno-19-16"></a><span class="w">    </span><span class="nv">--color-primary-600</span><span class="p">:</span><span class="w"> </span><span class="nb">hsl</span><span class="p">(</span><span class="mi">210</span><span class="w"> </span><span class="mi">100</span><span class="kt">%</span><span class="w"> </span><span class="mi">50</span><span class="kt">%</span><span class="p">);</span>
</span><span id="__span-19-17"><a id="__codelineno-19-17" name="__codelineno-19-17" href="#__codelineno-19-17"></a><span class="w">    </span><span class="nv">--color-primary-700</span><span class="p">:</span><span class="w"> </span><span class="nb">hsl</span><span class="p">(</span><span class="mi">210</span><span class="w"> </span><span class="mi">100</span><span class="kt">%</span><span class="w"> </span><span class="mi">40</span><span class="kt">%</span><span class="p">);</span>
</span><span id="__span-19-18"><a id="__codelineno-19-18" name="__codelineno-19-18" href="#__codelineno-19-18"></a><span class="w">    </span><span class="nv">--color-primary-800</span><span class="p">:</span><span class="w"> </span><span class="nb">hsl</span><span class="p">(</span><span class="mi">210</span><span class="w"> </span><span class="mi">100</span><span class="kt">%</span><span class="w"> </span><span class="mi">30</span><span class="kt">%</span><span class="p">);</span>
</span><span id="__span-19-19"><a id="__codelineno-19-19" name="__codelineno-19-19" href="#__codelineno-19-19"></a><span class="w">    </span><span class="nv">--color-primary-900</span><span class="p">:</span><span class="w"> </span><span class="nb">hsl</span><span class="p">(</span><span class="mi">210</span><span class="w"> </span><span class="mi">100</span><span class="kt">%</span><span class="w"> </span><span class="mi">20</span><span class="kt">%</span><span class="p">);</span>
</span><span id="__span-19-20"><a id="__codelineno-19-20" name="__codelineno-19-20" href="#__codelineno-19-20"></a>
</span><span id="__span-19-21"><a id="__codelineno-19-21" name="__codelineno-19-21" href="#__codelineno-19-21"></a><span class="w">    </span><span class="c">/* Semantic Colors */</span>
</span><span id="__span-19-22"><a id="__codelineno-19-22" name="__codelineno-19-22" href="#__codelineno-19-22"></a><span class="w">    </span><span class="nv">--color-success</span><span class="p">:</span><span class="w"> </span><span class="nb">hsl</span><span class="p">(</span><span class="mi">142</span><span class="w"> </span><span class="mi">76</span><span class="kt">%</span><span class="w"> </span><span class="mi">36</span><span class="kt">%</span><span class="p">);</span>
</span><span id="__span-19-23"><a id="__codelineno-19-23" name="__codelineno-19-23" href="#__codelineno-19-23"></a><span class="w">    </span><span class="nv">--color-warning</span><span class="p">:</span><span class="w"> </span><span class="nb">hsl</span><span class="p">(</span><span class="mi">38</span><span class="w"> </span><span class="mi">92</span><span class="kt">%</span><span class="w"> </span><span class="mi">50</span><span class="kt">%</span><span class="p">);</span>
</span><span id="__span-19-24"><a id="__codelineno-19-24" name="__codelineno-19-24" href="#__codelineno-19-24"></a><span class="w">    </span><span class="nv">--color-error</span><span class="p">:</span><span class="w"> </span><span class="nb">hsl</span><span class="p">(</span><span class="mi">0</span><span class="w"> </span><span class="mi">84</span><span class="kt">%</span><span class="w"> </span><span class="mi">60</span><span class="kt">%</span><span class="p">);</span>
</span><span id="__span-19-25"><a id="__codelineno-19-25" name="__codelineno-19-25" href="#__codelineno-19-25"></a><span class="w">    </span><span class="nv">--color-info</span><span class="p">:</span><span class="w"> </span><span class="nb">hsl</span><span class="p">(</span><span class="mi">199</span><span class="w"> </span><span class="mi">89</span><span class="kt">%</span><span class="w"> </span><span class="mi">48</span><span class="kt">%</span><span class="p">);</span>
</span><span id="__span-19-26"><a id="__codelineno-19-26" name="__codelineno-19-26" href="#__codelineno-19-26"></a>
</span><span id="__span-19-27"><a id="__codelineno-19-27" name="__codelineno-19-27" href="#__codelineno-19-27"></a><span class="w">    </span><span class="c">/* Neutral Colors */</span>
</span><span id="__span-19-28"><a id="__codelineno-19-28" name="__codelineno-19-28" href="#__codelineno-19-28"></a><span class="w">    </span><span class="nv">--color-neutral-0</span><span class="p">:</span><span class="w"> </span><span class="nb">hsl</span><span class="p">(</span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="kt">%</span><span class="w"> </span><span class="mi">100</span><span class="kt">%</span><span class="p">);</span>
</span><span id="__span-19-29"><a id="__codelineno-19-29" name="__codelineno-19-29" href="#__codelineno-19-29"></a><span class="w">    </span><span class="nv">--color-neutral-50</span><span class="p">:</span><span class="w"> </span><span class="nb">hsl</span><span class="p">(</span><span class="mi">210</span><span class="w"> </span><span class="mi">20</span><span class="kt">%</span><span class="w"> </span><span class="mi">98</span><span class="kt">%</span><span class="p">);</span>
</span><span id="__span-19-30"><a id="__codelineno-19-30" name="__codelineno-19-30" href="#__codelineno-19-30"></a><span class="w">    </span><span class="nv">--color-neutral-100</span><span class="p">:</span><span class="w"> </span><span class="nb">hsl</span><span class="p">(</span><span class="mi">220</span><span class="w"> </span><span class="mi">14</span><span class="kt">%</span><span class="w"> </span><span class="mi">96</span><span class="kt">%</span><span class="p">);</span>
</span><span id="__span-19-31"><a id="__codelineno-19-31" name="__codelineno-19-31" href="#__codelineno-19-31"></a><span class="w">    </span><span class="nv">--color-neutral-200</span><span class="p">:</span><span class="w"> </span><span class="nb">hsl</span><span class="p">(</span><span class="mi">220</span><span class="w"> </span><span class="mi">13</span><span class="kt">%</span><span class="w"> </span><span class="mi">91</span><span class="kt">%</span><span class="p">);</span>
</span><span id="__span-19-32"><a id="__codelineno-19-32" name="__codelineno-19-32" href="#__codelineno-19-32"></a><span class="w">    </span><span class="nv">--color-neutral-300</span><span class="p">:</span><span class="w"> </span><span class="nb">hsl</span><span class="p">(</span><span class="mi">216</span><span class="w"> </span><span class="mi">12</span><span class="kt">%</span><span class="w"> </span><span class="mi">84</span><span class="kt">%</span><span class="p">);</span>
</span><span id="__span-19-33"><a id="__codelineno-19-33" name="__codelineno-19-33" href="#__codelineno-19-33"></a><span class="w">    </span><span class="nv">--color-neutral-400</span><span class="p">:</span><span class="w"> </span><span class="nb">hsl</span><span class="p">(</span><span class="mi">218</span><span class="w"> </span><span class="mi">11</span><span class="kt">%</span><span class="w"> </span><span class="mi">65</span><span class="kt">%</span><span class="p">);</span>
</span><span id="__span-19-34"><a id="__codelineno-19-34" name="__codelineno-19-34" href="#__codelineno-19-34"></a><span class="w">    </span><span class="nv">--color-neutral-500</span><span class="p">:</span><span class="w"> </span><span class="nb">hsl</span><span class="p">(</span><span class="mi">220</span><span class="w"> </span><span class="mi">9</span><span class="kt">%</span><span class="w"> </span><span class="mi">46</span><span class="kt">%</span><span class="p">);</span>
</span><span id="__span-19-35"><a id="__codelineno-19-35" name="__codelineno-19-35" href="#__codelineno-19-35"></a><span class="w">    </span><span class="nv">--color-neutral-600</span><span class="p">:</span><span class="w"> </span><span class="nb">hsl</span><span class="p">(</span><span class="mi">215</span><span class="w"> </span><span class="mi">14</span><span class="kt">%</span><span class="w"> </span><span class="mi">34</span><span class="kt">%</span><span class="p">);</span>
</span><span id="__span-19-36"><a id="__codelineno-19-36" name="__codelineno-19-36" href="#__codelineno-19-36"></a><span class="w">    </span><span class="nv">--color-neutral-700</span><span class="p">:</span><span class="w"> </span><span class="nb">hsl</span><span class="p">(</span><span class="mi">217</span><span class="w"> </span><span class="mi">19</span><span class="kt">%</span><span class="w"> </span><span class="mi">27</span><span class="kt">%</span><span class="p">);</span>
</span><span id="__span-19-37"><a id="__codelineno-19-37" name="__codelineno-19-37" href="#__codelineno-19-37"></a><span class="w">    </span><span class="nv">--color-neutral-800</span><span class="p">:</span><span class="w"> </span><span class="nb">hsl</span><span class="p">(</span><span class="mi">215</span><span class="w"> </span><span class="mi">28</span><span class="kt">%</span><span class="w"> </span><span class="mi">17</span><span class="kt">%</span><span class="p">);</span>
</span><span id="__span-19-38"><a id="__codelineno-19-38" name="__codelineno-19-38" href="#__codelineno-19-38"></a><span class="w">    </span><span class="nv">--color-neutral-900</span><span class="p">:</span><span class="w"> </span><span class="nb">hsl</span><span class="p">(</span><span class="mi">221</span><span class="w"> </span><span class="mi">39</span><span class="kt">%</span><span class="w"> </span><span class="mi">11</span><span class="kt">%</span><span class="p">);</span>
</span><span id="__span-19-39"><a id="__codelineno-19-39" name="__codelineno-19-39" href="#__codelineno-19-39"></a>
</span><span id="__span-19-40"><a id="__codelineno-19-40" name="__codelineno-19-40" href="#__codelineno-19-40"></a><span class="w">    </span><span class="c">/* === TYPOGRAPHY SYSTEM === */</span>
</span><span id="__span-19-41"><a id="__codelineno-19-41" name="__codelineno-19-41" href="#__codelineno-19-41"></a><span class="w">    </span><span class="c">/* Font Families */</span>
</span><span id="__span-19-42"><a id="__codelineno-19-42" name="__codelineno-19-42" href="#__codelineno-19-42"></a><span class="w">    </span><span class="nv">--font-family-sans</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;Inter&#39;</span><span class="p">,</span><span class="w"> </span><span class="n">system-ui</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="n">apple-system</span><span class="p">,</span><span class="w"> </span><span class="n">BlinkMacSystemFont</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Segoe UI&#39;</span><span class="p">,</span><span class="w"> </span><span class="n">Roboto</span><span class="p">,</span><span class="w"> </span><span class="kc">sans-serif</span><span class="p">;</span>
</span><span id="__span-19-43"><a id="__codelineno-19-43" name="__codelineno-19-43" href="#__codelineno-19-43"></a><span class="w">    </span><span class="nv">--font-family-serif</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;Merriweather&#39;</span><span class="p">,</span><span class="w"> </span><span class="n">Georgia</span><span class="p">,</span><span class="w"> </span><span class="kc">serif</span><span class="p">;</span>
</span><span id="__span-19-44"><a id="__codelineno-19-44" name="__codelineno-19-44" href="#__codelineno-19-44"></a><span class="w">    </span><span class="nv">--font-family-mono</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;JetBrains Mono&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Fira Code&#39;</span><span class="p">,</span><span class="w"> </span><span class="n">Consolas</span><span class="p">,</span><span class="w"> </span><span class="kc">monospace</span><span class="p">;</span>
</span><span id="__span-19-45"><a id="__codelineno-19-45" name="__codelineno-19-45" href="#__codelineno-19-45"></a>
</span><span id="__span-19-46"><a id="__codelineno-19-46" name="__codelineno-19-46" href="#__codelineno-19-46"></a><span class="w">    </span><span class="c">/* Font Sizes - Perfect Fifth Scale (1.5 ratio) */</span>
</span><span id="__span-19-47"><a id="__codelineno-19-47" name="__codelineno-19-47" href="#__codelineno-19-47"></a><span class="w">    </span><span class="nv">--font-size-xs</span><span class="p">:</span><span class="w"> </span><span class="mf">0.75</span><span class="kt">rem</span><span class="p">;</span><span class="w">    </span><span class="c">/* 12px */</span>
</span><span id="__span-19-48"><a id="__codelineno-19-48" name="__codelineno-19-48" href="#__codelineno-19-48"></a><span class="w">    </span><span class="nv">--font-size-sm</span><span class="p">:</span><span class="w"> </span><span class="mf">0.875</span><span class="kt">rem</span><span class="p">;</span><span class="w">   </span><span class="c">/* 14px */</span>
</span><span id="__span-19-49"><a id="__codelineno-19-49" name="__codelineno-19-49" href="#__codelineno-19-49"></a><span class="w">    </span><span class="nv">--font-size-base</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="kt">rem</span><span class="p">;</span><span class="w">     </span><span class="c">/* 16px */</span>
</span><span id="__span-19-50"><a id="__codelineno-19-50" name="__codelineno-19-50" href="#__codelineno-19-50"></a><span class="w">    </span><span class="nv">--font-size-lg</span><span class="p">:</span><span class="w"> </span><span class="mf">1.125</span><span class="kt">rem</span><span class="p">;</span><span class="w">   </span><span class="c">/* 18px */</span>
</span><span id="__span-19-51"><a id="__codelineno-19-51" name="__codelineno-19-51" href="#__codelineno-19-51"></a><span class="w">    </span><span class="nv">--font-size-xl</span><span class="p">:</span><span class="w"> </span><span class="mf">1.25</span><span class="kt">rem</span><span class="p">;</span><span class="w">    </span><span class="c">/* 20px */</span>
</span><span id="__span-19-52"><a id="__codelineno-19-52" name="__codelineno-19-52" href="#__codelineno-19-52"></a><span class="w">    </span><span class="nv">--font-size-2xl</span><span class="p">:</span><span class="w"> </span><span class="mf">1.5</span><span class="kt">rem</span><span class="p">;</span><span class="w">    </span><span class="c">/* 24px */</span>
</span><span id="__span-19-53"><a id="__codelineno-19-53" name="__codelineno-19-53" href="#__codelineno-19-53"></a><span class="w">    </span><span class="nv">--font-size-3xl</span><span class="p">:</span><span class="w"> </span><span class="mf">1.875</span><span class="kt">rem</span><span class="p">;</span><span class="w">  </span><span class="c">/* 30px */</span>
</span><span id="__span-19-54"><a id="__codelineno-19-54" name="__codelineno-19-54" href="#__codelineno-19-54"></a><span class="w">    </span><span class="nv">--font-size-4xl</span><span class="p">:</span><span class="w"> </span><span class="mf">2.25</span><span class="kt">rem</span><span class="p">;</span><span class="w">   </span><span class="c">/* 36px */</span>
</span><span id="__span-19-55"><a id="__codelineno-19-55" name="__codelineno-19-55" href="#__codelineno-19-55"></a><span class="w">    </span><span class="nv">--font-size-5xl</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="kt">rem</span><span class="p">;</span><span class="w">      </span><span class="c">/* 48px */</span>
</span><span id="__span-19-56"><a id="__codelineno-19-56" name="__codelineno-19-56" href="#__codelineno-19-56"></a><span class="w">    </span><span class="nv">--font-size-6xl</span><span class="p">:</span><span class="w"> </span><span class="mf">3.75</span><span class="kt">rem</span><span class="p">;</span><span class="w">   </span><span class="c">/* 60px */</span>
</span><span id="__span-19-57"><a id="__codelineno-19-57" name="__codelineno-19-57" href="#__codelineno-19-57"></a>
</span><span id="__span-19-58"><a id="__codelineno-19-58" name="__codelineno-19-58" href="#__codelineno-19-58"></a><span class="w">    </span><span class="c">/* Font Weights */</span>
</span><span id="__span-19-59"><a id="__codelineno-19-59" name="__codelineno-19-59" href="#__codelineno-19-59"></a><span class="w">    </span><span class="nv">--font-weight-light</span><span class="p">:</span><span class="w"> </span><span class="mi">300</span><span class="p">;</span>
</span><span id="__span-19-60"><a id="__codelineno-19-60" name="__codelineno-19-60" href="#__codelineno-19-60"></a><span class="w">    </span><span class="nv">--font-weight-normal</span><span class="p">:</span><span class="w"> </span><span class="mi">400</span><span class="p">;</span>
</span><span id="__span-19-61"><a id="__codelineno-19-61" name="__codelineno-19-61" href="#__codelineno-19-61"></a><span class="w">    </span><span class="nv">--font-weight-medium</span><span class="p">:</span><span class="w"> </span><span class="mi">500</span><span class="p">;</span>
</span><span id="__span-19-62"><a id="__codelineno-19-62" name="__codelineno-19-62" href="#__codelineno-19-62"></a><span class="w">    </span><span class="nv">--font-weight-semibold</span><span class="p">:</span><span class="w"> </span><span class="mi">600</span><span class="p">;</span>
</span><span id="__span-19-63"><a id="__codelineno-19-63" name="__codelineno-19-63" href="#__codelineno-19-63"></a><span class="w">    </span><span class="nv">--font-weight-bold</span><span class="p">:</span><span class="w"> </span><span class="mi">700</span><span class="p">;</span>
</span><span id="__span-19-64"><a id="__codelineno-19-64" name="__codelineno-19-64" href="#__codelineno-19-64"></a><span class="w">    </span><span class="nv">--font-weight-extrabold</span><span class="p">:</span><span class="w"> </span><span class="mi">800</span><span class="p">;</span>
</span><span id="__span-19-65"><a id="__codelineno-19-65" name="__codelineno-19-65" href="#__codelineno-19-65"></a>
</span><span id="__span-19-66"><a id="__codelineno-19-66" name="__codelineno-19-66" href="#__codelineno-19-66"></a><span class="w">    </span><span class="c">/* Line Heights */</span>
</span><span id="__span-19-67"><a id="__codelineno-19-67" name="__codelineno-19-67" href="#__codelineno-19-67"></a><span class="w">    </span><span class="nv">--line-height-tight</span><span class="p">:</span><span class="w"> </span><span class="mf">1.25</span><span class="p">;</span>
</span><span id="__span-19-68"><a id="__codelineno-19-68" name="__codelineno-19-68" href="#__codelineno-19-68"></a><span class="w">    </span><span class="nv">--line-height-normal</span><span class="p">:</span><span class="w"> </span><span class="mf">1.5</span><span class="p">;</span>
</span><span id="__span-19-69"><a id="__codelineno-19-69" name="__codelineno-19-69" href="#__codelineno-19-69"></a><span class="w">    </span><span class="nv">--line-height-relaxed</span><span class="p">:</span><span class="w"> </span><span class="mf">1.75</span><span class="p">;</span>
</span><span id="__span-19-70"><a id="__codelineno-19-70" name="__codelineno-19-70" href="#__codelineno-19-70"></a>
</span><span id="__span-19-71"><a id="__codelineno-19-71" name="__codelineno-19-71" href="#__codelineno-19-71"></a><span class="w">    </span><span class="c">/* === SPACING SYSTEM === */</span>
</span><span id="__span-19-72"><a id="__codelineno-19-72" name="__codelineno-19-72" href="#__codelineno-19-72"></a><span class="w">    </span><span class="c">/* Consistent spacing scale */</span>
</span><span id="__span-19-73"><a id="__codelineno-19-73" name="__codelineno-19-73" href="#__codelineno-19-73"></a><span class="w">    </span><span class="nv">--spacing-0</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
</span><span id="__span-19-74"><a id="__codelineno-19-74" name="__codelineno-19-74" href="#__codelineno-19-74"></a><span class="w">    </span><span class="nv">--spacing-px</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="kt">px</span><span class="p">;</span>
</span><span id="__span-19-75"><a id="__codelineno-19-75" name="__codelineno-19-75" href="#__codelineno-19-75"></a><span class="w">    </span><span class="nv">--spacing-0-5</span><span class="p">:</span><span class="w"> </span><span class="mf">0.125</span><span class="kt">rem</span><span class="p">;</span><span class="w">    </span><span class="c">/* 2px */</span>
</span><span id="__span-19-76"><a id="__codelineno-19-76" name="__codelineno-19-76" href="#__codelineno-19-76"></a><span class="w">    </span><span class="nv">--spacing-1</span><span class="p">:</span><span class="w"> </span><span class="mf">0.25</span><span class="kt">rem</span><span class="p">;</span><span class="w">       </span><span class="c">/* 4px */</span>
</span><span id="__span-19-77"><a id="__codelineno-19-77" name="__codelineno-19-77" href="#__codelineno-19-77"></a><span class="w">    </span><span class="nv">--spacing-1-5</span><span class="p">:</span><span class="w"> </span><span class="mf">0.375</span><span class="kt">rem</span><span class="p">;</span><span class="w">    </span><span class="c">/* 6px */</span>
</span><span id="__span-19-78"><a id="__codelineno-19-78" name="__codelineno-19-78" href="#__codelineno-19-78"></a><span class="w">    </span><span class="nv">--spacing-2</span><span class="p">:</span><span class="w"> </span><span class="mf">0.5</span><span class="kt">rem</span><span class="p">;</span><span class="w">        </span><span class="c">/* 8px */</span>
</span><span id="__span-19-79"><a id="__codelineno-19-79" name="__codelineno-19-79" href="#__codelineno-19-79"></a><span class="w">    </span><span class="nv">--spacing-2-5</span><span class="p">:</span><span class="w"> </span><span class="mf">0.625</span><span class="kt">rem</span><span class="p">;</span><span class="w">    </span><span class="c">/* 10px */</span>
</span><span id="__span-19-80"><a id="__codelineno-19-80" name="__codelineno-19-80" href="#__codelineno-19-80"></a><span class="w">    </span><span class="nv">--spacing-3</span><span class="p">:</span><span class="w"> </span><span class="mf">0.75</span><span class="kt">rem</span><span class="p">;</span><span class="w">       </span><span class="c">/* 12px */</span>
</span><span id="__span-19-81"><a id="__codelineno-19-81" name="__codelineno-19-81" href="#__codelineno-19-81"></a><span class="w">    </span><span class="nv">--spacing-3-5</span><span class="p">:</span><span class="w"> </span><span class="mf">0.875</span><span class="kt">rem</span><span class="p">;</span><span class="w">    </span><span class="c">/* 14px */</span>
</span><span id="__span-19-82"><a id="__codelineno-19-82" name="__codelineno-19-82" href="#__codelineno-19-82"></a><span class="w">    </span><span class="nv">--spacing-4</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="kt">rem</span><span class="p">;</span><span class="w">          </span><span class="c">/* 16px */</span>
</span><span id="__span-19-83"><a id="__codelineno-19-83" name="__codelineno-19-83" href="#__codelineno-19-83"></a><span class="w">    </span><span class="nv">--spacing-5</span><span class="p">:</span><span class="w"> </span><span class="mf">1.25</span><span class="kt">rem</span><span class="p">;</span><span class="w">       </span><span class="c">/* 20px */</span>
</span><span id="__span-19-84"><a id="__codelineno-19-84" name="__codelineno-19-84" href="#__codelineno-19-84"></a><span class="w">    </span><span class="nv">--spacing-6</span><span class="p">:</span><span class="w"> </span><span class="mf">1.5</span><span class="kt">rem</span><span class="p">;</span><span class="w">        </span><span class="c">/* 24px */</span>
</span><span id="__span-19-85"><a id="__codelineno-19-85" name="__codelineno-19-85" href="#__codelineno-19-85"></a><span class="w">    </span><span class="nv">--spacing-7</span><span class="p">:</span><span class="w"> </span><span class="mf">1.75</span><span class="kt">rem</span><span class="p">;</span><span class="w">       </span><span class="c">/* 28px */</span>
</span><span id="__span-19-86"><a id="__codelineno-19-86" name="__codelineno-19-86" href="#__codelineno-19-86"></a><span class="w">    </span><span class="nv">--spacing-8</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="kt">rem</span><span class="p">;</span><span class="w">          </span><span class="c">/* 32px */</span>
</span><span id="__span-19-87"><a id="__codelineno-19-87" name="__codelineno-19-87" href="#__codelineno-19-87"></a><span class="w">    </span><span class="nv">--spacing-9</span><span class="p">:</span><span class="w"> </span><span class="mf">2.25</span><span class="kt">rem</span><span class="p">;</span><span class="w">       </span><span class="c">/* 36px */</span>
</span><span id="__span-19-88"><a id="__codelineno-19-88" name="__codelineno-19-88" href="#__codelineno-19-88"></a><span class="w">    </span><span class="nv">--spacing-10</span><span class="p">:</span><span class="w"> </span><span class="mf">2.5</span><span class="kt">rem</span><span class="p">;</span><span class="w">       </span><span class="c">/* 40px */</span>
</span><span id="__span-19-89"><a id="__codelineno-19-89" name="__codelineno-19-89" href="#__codelineno-19-89"></a><span class="w">    </span><span class="nv">--spacing-12</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="kt">rem</span><span class="p">;</span><span class="w">         </span><span class="c">/* 48px */</span>
</span><span id="__span-19-90"><a id="__codelineno-19-90" name="__codelineno-19-90" href="#__codelineno-19-90"></a><span class="w">    </span><span class="nv">--spacing-14</span><span class="p">:</span><span class="w"> </span><span class="mf">3.5</span><span class="kt">rem</span><span class="p">;</span><span class="w">       </span><span class="c">/* 56px */</span>
</span><span id="__span-19-91"><a id="__codelineno-19-91" name="__codelineno-19-91" href="#__codelineno-19-91"></a><span class="w">    </span><span class="nv">--spacing-16</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="kt">rem</span><span class="p">;</span><span class="w">         </span><span class="c">/* 64px */</span>
</span><span id="__span-19-92"><a id="__codelineno-19-92" name="__codelineno-19-92" href="#__codelineno-19-92"></a><span class="w">    </span><span class="nv">--spacing-20</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="kt">rem</span><span class="p">;</span><span class="w">         </span><span class="c">/* 80px */</span>
</span><span id="__span-19-93"><a id="__codelineno-19-93" name="__codelineno-19-93" href="#__codelineno-19-93"></a><span class="w">    </span><span class="nv">--spacing-24</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="kt">rem</span><span class="p">;</span><span class="w">         </span><span class="c">/* 96px */</span>
</span><span id="__span-19-94"><a id="__codelineno-19-94" name="__codelineno-19-94" href="#__codelineno-19-94"></a><span class="w">    </span><span class="nv">--spacing-32</span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="kt">rem</span><span class="p">;</span><span class="w">         </span><span class="c">/* 128px */</span>
</span><span id="__span-19-95"><a id="__codelineno-19-95" name="__codelineno-19-95" href="#__codelineno-19-95"></a>
</span><span id="__span-19-96"><a id="__codelineno-19-96" name="__codelineno-19-96" href="#__codelineno-19-96"></a><span class="w">    </span><span class="c">/* === BORDER RADIUS === */</span>
</span><span id="__span-19-97"><a id="__codelineno-19-97" name="__codelineno-19-97" href="#__codelineno-19-97"></a><span class="w">    </span><span class="nv">--radius-none</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="kt">px</span><span class="p">;</span>
</span><span id="__span-19-98"><a id="__codelineno-19-98" name="__codelineno-19-98" href="#__codelineno-19-98"></a><span class="w">    </span><span class="nv">--radius-sm</span><span class="p">:</span><span class="w"> </span><span class="mf">0.125</span><span class="kt">rem</span><span class="p">;</span><span class="w">      </span><span class="c">/* 2px */</span>
</span><span id="__span-19-99"><a id="__codelineno-19-99" name="__codelineno-19-99" href="#__codelineno-19-99"></a><span class="w">    </span><span class="nv">--radius-default</span><span class="p">:</span><span class="w"> </span><span class="mf">0.25</span><span class="kt">rem</span><span class="p">;</span><span class="w">  </span><span class="c">/* 4px */</span>
</span><span id="__span-19-100"><a id="__codelineno-19-100" name="__codelineno-19-100" href="#__codelineno-19-100"></a><span class="w">    </span><span class="nv">--radius-md</span><span class="p">:</span><span class="w"> </span><span class="mf">0.375</span><span class="kt">rem</span><span class="p">;</span><span class="w">      </span><span class="c">/* 6px */</span>
</span><span id="__span-19-101"><a id="__codelineno-19-101" name="__codelineno-19-101" href="#__codelineno-19-101"></a><span class="w">    </span><span class="nv">--radius-lg</span><span class="p">:</span><span class="w"> </span><span class="mf">0.5</span><span class="kt">rem</span><span class="p">;</span><span class="w">        </span><span class="c">/* 8px */</span>
</span><span id="__span-19-102"><a id="__codelineno-19-102" name="__codelineno-19-102" href="#__codelineno-19-102"></a><span class="w">    </span><span class="nv">--radius-xl</span><span class="p">:</span><span class="w"> </span><span class="mf">0.75</span><span class="kt">rem</span><span class="p">;</span><span class="w">       </span><span class="c">/* 12px */</span>
</span><span id="__span-19-103"><a id="__codelineno-19-103" name="__codelineno-19-103" href="#__codelineno-19-103"></a><span class="w">    </span><span class="nv">--radius-2xl</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="kt">rem</span><span class="p">;</span><span class="w">         </span><span class="c">/* 16px */</span>
</span><span id="__span-19-104"><a id="__codelineno-19-104" name="__codelineno-19-104" href="#__codelineno-19-104"></a><span class="w">    </span><span class="nv">--radius-3xl</span><span class="p">:</span><span class="w"> </span><span class="mf">1.5</span><span class="kt">rem</span><span class="p">;</span><span class="w">       </span><span class="c">/* 24px */</span>
</span><span id="__span-19-105"><a id="__codelineno-19-105" name="__codelineno-19-105" href="#__codelineno-19-105"></a><span class="w">    </span><span class="nv">--radius-full</span><span class="p">:</span><span class="w"> </span><span class="mi">9999</span><span class="kt">px</span><span class="p">;</span>
</span><span id="__span-19-106"><a id="__codelineno-19-106" name="__codelineno-19-106" href="#__codelineno-19-106"></a>
</span><span id="__span-19-107"><a id="__codelineno-19-107" name="__codelineno-19-107" href="#__codelineno-19-107"></a><span class="w">    </span><span class="c">/* === SHADOWS === */</span>
</span><span id="__span-19-108"><a id="__codelineno-19-108" name="__codelineno-19-108" href="#__codelineno-19-108"></a><span class="w">    </span><span class="nv">--shadow-sm</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">1</span><span class="kt">px</span><span class="w"> </span><span class="mi">2</span><span class="kt">px</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="nb">rgb</span><span class="p">(</span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mf">0.05</span><span class="p">);</span>
</span><span id="__span-19-109"><a id="__codelineno-19-109" name="__codelineno-19-109" href="#__codelineno-19-109"></a><span class="w">    </span><span class="nv">--shadow-default</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">1</span><span class="kt">px</span><span class="w"> </span><span class="mi">3</span><span class="kt">px</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="nb">rgb</span><span class="p">(</span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mf">0.1</span><span class="p">),</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">1</span><span class="kt">px</span><span class="w"> </span><span class="mi">2</span><span class="kt">px</span><span class="w"> </span><span class="mi">-1</span><span class="kt">px</span><span class="w"> </span><span class="nb">rgb</span><span class="p">(</span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mf">0.1</span><span class="p">);</span>
</span><span id="__span-19-110"><a id="__codelineno-19-110" name="__codelineno-19-110" href="#__codelineno-19-110"></a><span class="w">    </span><span class="nv">--shadow-md</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">4</span><span class="kt">px</span><span class="w"> </span><span class="mi">6</span><span class="kt">px</span><span class="w"> </span><span class="mi">-1</span><span class="kt">px</span><span class="w"> </span><span class="nb">rgb</span><span class="p">(</span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mf">0.1</span><span class="p">),</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">2</span><span class="kt">px</span><span class="w"> </span><span class="mi">4</span><span class="kt">px</span><span class="w"> </span><span class="mi">-2</span><span class="kt">px</span><span class="w"> </span><span class="nb">rgb</span><span class="p">(</span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mf">0.1</span><span class="p">);</span>
</span><span id="__span-19-111"><a id="__codelineno-19-111" name="__codelineno-19-111" href="#__codelineno-19-111"></a><span class="w">    </span><span class="nv">--shadow-lg</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">10</span><span class="kt">px</span><span class="w"> </span><span class="mi">15</span><span class="kt">px</span><span class="w"> </span><span class="mi">-3</span><span class="kt">px</span><span class="w"> </span><span class="nb">rgb</span><span class="p">(</span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mf">0.1</span><span class="p">),</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">4</span><span class="kt">px</span><span class="w"> </span><span class="mi">6</span><span class="kt">px</span><span class="w"> </span><span class="mi">-4</span><span class="kt">px</span><span class="w"> </span><span class="nb">rgb</span><span class="p">(</span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mf">0.1</span><span class="p">);</span>
</span><span id="__span-19-112"><a id="__codelineno-19-112" name="__codelineno-19-112" href="#__codelineno-19-112"></a><span class="w">    </span><span class="nv">--shadow-xl</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">20</span><span class="kt">px</span><span class="w"> </span><span class="mi">25</span><span class="kt">px</span><span class="w"> </span><span class="mi">-5</span><span class="kt">px</span><span class="w"> </span><span class="nb">rgb</span><span class="p">(</span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mf">0.1</span><span class="p">),</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">8</span><span class="kt">px</span><span class="w"> </span><span class="mi">10</span><span class="kt">px</span><span class="w"> </span><span class="mi">-6</span><span class="kt">px</span><span class="w"> </span><span class="nb">rgb</span><span class="p">(</span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mf">0.1</span><span class="p">);</span>
</span><span id="__span-19-113"><a id="__codelineno-19-113" name="__codelineno-19-113" href="#__codelineno-19-113"></a><span class="w">    </span><span class="nv">--shadow-2xl</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">25</span><span class="kt">px</span><span class="w"> </span><span class="mi">50</span><span class="kt">px</span><span class="w"> </span><span class="mi">-12</span><span class="kt">px</span><span class="w"> </span><span class="nb">rgb</span><span class="p">(</span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mf">0.25</span><span class="p">);</span>
</span><span id="__span-19-114"><a id="__codelineno-19-114" name="__codelineno-19-114" href="#__codelineno-19-114"></a><span class="w">    </span><span class="nv">--shadow-inner</span><span class="p">:</span><span class="w"> </span><span class="kc">inset</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">2</span><span class="kt">px</span><span class="w"> </span><span class="mi">4</span><span class="kt">px</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="nb">rgb</span><span class="p">(</span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mf">0.05</span><span class="p">);</span>
</span><span id="__span-19-115"><a id="__codelineno-19-115" name="__codelineno-19-115" href="#__codelineno-19-115"></a>
</span><span id="__span-19-116"><a id="__codelineno-19-116" name="__codelineno-19-116" href="#__codelineno-19-116"></a><span class="w">    </span><span class="c">/* === TRANSITIONS === */</span>
</span><span id="__span-19-117"><a id="__codelineno-19-117" name="__codelineno-19-117" href="#__codelineno-19-117"></a><span class="w">    </span><span class="nv">--transition-fast</span><span class="p">:</span><span class="w"> </span><span class="mi">150</span><span class="kt">ms</span><span class="w"> </span><span class="nb">cubic-bezier</span><span class="p">(</span><span class="mf">0.4</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.2</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
</span><span id="__span-19-118"><a id="__codelineno-19-118" name="__codelineno-19-118" href="#__codelineno-19-118"></a><span class="w">    </span><span class="nv">--transition-normal</span><span class="p">:</span><span class="w"> </span><span class="mi">300</span><span class="kt">ms</span><span class="w"> </span><span class="nb">cubic-bezier</span><span class="p">(</span><span class="mf">0.4</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.2</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
</span><span id="__span-19-119"><a id="__codelineno-19-119" name="__codelineno-19-119" href="#__codelineno-19-119"></a><span class="w">    </span><span class="nv">--transition-slow</span><span class="p">:</span><span class="w"> </span><span class="mi">500</span><span class="kt">ms</span><span class="w"> </span><span class="nb">cubic-bezier</span><span class="p">(</span><span class="mf">0.4</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.2</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
</span><span id="__span-19-120"><a id="__codelineno-19-120" name="__codelineno-19-120" href="#__codelineno-19-120"></a>
</span><span id="__span-19-121"><a id="__codelineno-19-121" name="__codelineno-19-121" href="#__codelineno-19-121"></a><span class="w">    </span><span class="c">/* === Z-INDEX LAYERS === */</span>
</span><span id="__span-19-122"><a id="__codelineno-19-122" name="__codelineno-19-122" href="#__codelineno-19-122"></a><span class="w">    </span><span class="nv">--z-index-dropdown</span><span class="p">:</span><span class="w"> </span><span class="mi">1000</span><span class="p">;</span>
</span><span id="__span-19-123"><a id="__codelineno-19-123" name="__codelineno-19-123" href="#__codelineno-19-123"></a><span class="w">    </span><span class="nv">--z-index-sticky</span><span class="p">:</span><span class="w"> </span><span class="mi">1020</span><span class="p">;</span>
</span><span id="__span-19-124"><a id="__codelineno-19-124" name="__codelineno-19-124" href="#__codelineno-19-124"></a><span class="w">    </span><span class="nv">--z-index-fixed</span><span class="p">:</span><span class="w"> </span><span class="mi">1030</span><span class="p">;</span>
</span><span id="__span-19-125"><a id="__codelineno-19-125" name="__codelineno-19-125" href="#__codelineno-19-125"></a><span class="w">    </span><span class="nv">--z-index-modal-backdrop</span><span class="p">:</span><span class="w"> </span><span class="mi">1040</span><span class="p">;</span>
</span><span id="__span-19-126"><a id="__codelineno-19-126" name="__codelineno-19-126" href="#__codelineno-19-126"></a><span class="w">    </span><span class="nv">--z-index-modal</span><span class="p">:</span><span class="w"> </span><span class="mi">1050</span><span class="p">;</span>
</span><span id="__span-19-127"><a id="__codelineno-19-127" name="__codelineno-19-127" href="#__codelineno-19-127"></a><span class="w">    </span><span class="nv">--z-index-popover</span><span class="p">:</span><span class="w"> </span><span class="mi">1060</span><span class="p">;</span>
</span><span id="__span-19-128"><a id="__codelineno-19-128" name="__codelineno-19-128" href="#__codelineno-19-128"></a><span class="w">    </span><span class="nv">--z-index-tooltip</span><span class="p">:</span><span class="w"> </span><span class="mi">1070</span><span class="p">;</span>
</span><span id="__span-19-129"><a id="__codelineno-19-129" name="__codelineno-19-129" href="#__codelineno-19-129"></a><span class="w">    </span><span class="nv">--z-index-toast</span><span class="p">:</span><span class="w"> </span><span class="mi">1080</span><span class="p">;</span>
</span><span id="__span-19-130"><a id="__codelineno-19-130" name="__codelineno-19-130" href="#__codelineno-19-130"></a><span class="p">}</span>
</span><span id="__span-19-131"><a id="__codelineno-19-131" name="__codelineno-19-131" href="#__codelineno-19-131"></a>
</span><span id="__span-19-132"><a id="__codelineno-19-132" name="__codelineno-19-132" href="#__codelineno-19-132"></a><span class="c">/* ===================================</span>
</span><span id="__span-19-133"><a id="__codelineno-19-133" name="__codelineno-19-133" href="#__codelineno-19-133"></a><span class="c">   2. RESET AND BASE STYLES</span>
</span><span id="__span-19-134"><a id="__codelineno-19-134" name="__codelineno-19-134" href="#__codelineno-19-134"></a><span class="c">   ================================== */</span>
</span><span id="__span-19-135"><a id="__codelineno-19-135" name="__codelineno-19-135" href="#__codelineno-19-135"></a>
</span><span id="__span-19-136"><a id="__codelineno-19-136" name="__codelineno-19-136" href="#__codelineno-19-136"></a><span class="c">/* Modern CSS Reset */</span>
</span><span id="__span-19-137"><a id="__codelineno-19-137" name="__codelineno-19-137" href="#__codelineno-19-137"></a><span class="o">*,</span><span class="w"> </span><span class="o">*</span><span class="p">::</span><span class="nd">before</span><span class="o">,</span><span class="w"> </span><span class="o">*</span><span class="p">::</span><span class="nd">after</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-19-138"><a id="__codelineno-19-138" name="__codelineno-19-138" href="#__codelineno-19-138"></a><span class="w">    </span><span class="k">box-sizing</span><span class="p">:</span><span class="w"> </span><span class="kc">border-box</span><span class="p">;</span>
</span><span id="__span-19-139"><a id="__codelineno-19-139" name="__codelineno-19-139" href="#__codelineno-19-139"></a><span class="p">}</span>
</span><span id="__span-19-140"><a id="__codelineno-19-140" name="__codelineno-19-140" href="#__codelineno-19-140"></a>
</span><span id="__span-19-141"><a id="__codelineno-19-141" name="__codelineno-19-141" href="#__codelineno-19-141"></a><span class="o">*</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-19-142"><a id="__codelineno-19-142" name="__codelineno-19-142" href="#__codelineno-19-142"></a><span class="w">    </span><span class="k">margin</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
</span><span id="__span-19-143"><a id="__codelineno-19-143" name="__codelineno-19-143" href="#__codelineno-19-143"></a><span class="w">    </span><span class="k">padding</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
</span><span id="__span-19-144"><a id="__codelineno-19-144" name="__codelineno-19-144" href="#__codelineno-19-144"></a><span class="p">}</span>
</span><span id="__span-19-145"><a id="__codelineno-19-145" name="__codelineno-19-145" href="#__codelineno-19-145"></a>
</span><span id="__span-19-146"><a id="__codelineno-19-146" name="__codelineno-19-146" href="#__codelineno-19-146"></a><span class="nt">html</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-19-147"><a id="__codelineno-19-147" name="__codelineno-19-147" href="#__codelineno-19-147"></a><span class="w">    </span><span class="k">height</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="kt">%</span><span class="p">;</span>
</span><span id="__span-19-148"><a id="__codelineno-19-148" name="__codelineno-19-148" href="#__codelineno-19-148"></a><span class="w">    </span><span class="k">scroll-behavior</span><span class="p">:</span><span class="w"> </span><span class="kc">smooth</span><span class="p">;</span>
</span><span id="__span-19-149"><a id="__codelineno-19-149" name="__codelineno-19-149" href="#__codelineno-19-149"></a><span class="p">}</span>
</span><span id="__span-19-150"><a id="__codelineno-19-150" name="__codelineno-19-150" href="#__codelineno-19-150"></a>
</span><span id="__span-19-151"><a id="__codelineno-19-151" name="__codelineno-19-151" href="#__codelineno-19-151"></a><span class="nt">body</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-19-152"><a id="__codelineno-19-152" name="__codelineno-19-152" href="#__codelineno-19-152"></a><span class="w">    </span><span class="k">height</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="kt">%</span><span class="p">;</span>
</span><span id="__span-19-153"><a id="__codelineno-19-153" name="__codelineno-19-153" href="#__codelineno-19-153"></a><span class="w">    </span><span class="k">font-family</span><span class="p">:</span><span class="w"> </span><span class="nf">var</span><span class="p">(</span><span class="nv">--font-family-sans</span><span class="p">);</span>
</span><span id="__span-19-154"><a id="__codelineno-19-154" name="__codelineno-19-154" href="#__codelineno-19-154"></a><span class="w">    </span><span class="k">font-size</span><span class="p">:</span><span class="w"> </span><span class="nf">var</span><span class="p">(</span><span class="nv">--font-size-base</span><span class="p">);</span>
</span><span id="__span-19-155"><a id="__codelineno-19-155" name="__codelineno-19-155" href="#__codelineno-19-155"></a><span class="w">    </span><span class="k">line-height</span><span class="p">:</span><span class="w"> </span><span class="nf">var</span><span class="p">(</span><span class="nv">--line-height-normal</span><span class="p">);</span>
</span><span id="__span-19-156"><a id="__codelineno-19-156" name="__codelineno-19-156" href="#__codelineno-19-156"></a><span class="w">    </span><span class="k">color</span><span class="p">:</span><span class="w"> </span><span class="nf">var</span><span class="p">(</span><span class="nv">--color-neutral-</span><span class="mi">900</span><span class="p">);</span>
</span><span id="__span-19-157"><a id="__codelineno-19-157" name="__codelineno-19-157" href="#__codelineno-19-157"></a><span class="w">    </span><span class="k">background-color</span><span class="p">:</span><span class="w"> </span><span class="nf">var</span><span class="p">(</span><span class="nv">--color-neutral-</span><span class="mi">0</span><span class="p">);</span>
</span><span id="__span-19-158"><a id="__codelineno-19-158" name="__codelineno-19-158" href="#__codelineno-19-158"></a><span class="w">    </span><span class="kp">-webkit-</span><span class="n">font-smoothing</span><span class="p">:</span><span class="w"> </span><span class="n">antialiased</span><span class="p">;</span>
</span><span id="__span-19-159"><a id="__codelineno-19-159" name="__codelineno-19-159" href="#__codelineno-19-159"></a><span class="w">    </span><span class="kp">-moz-</span><span class="n">osx-font-smoothing</span><span class="p">:</span><span class="w"> </span><span class="n">grayscale</span><span class="p">;</span>
</span><span id="__span-19-160"><a id="__codelineno-19-160" name="__codelineno-19-160" href="#__codelineno-19-160"></a><span class="w">    </span><span class="n">text-rendering</span><span class="p">:</span><span class="w"> </span><span class="kc">optimizeSpeed</span><span class="p">;</span>
</span><span id="__span-19-161"><a id="__codelineno-19-161" name="__codelineno-19-161" href="#__codelineno-19-161"></a><span class="p">}</span>
</span><span id="__span-19-162"><a id="__codelineno-19-162" name="__codelineno-19-162" href="#__codelineno-19-162"></a>
</span><span id="__span-19-163"><a id="__codelineno-19-163" name="__codelineno-19-163" href="#__codelineno-19-163"></a><span class="nt">img</span><span class="o">,</span><span class="w"> </span><span class="nt">picture</span><span class="o">,</span><span class="w"> </span><span class="nt">video</span><span class="o">,</span><span class="w"> </span><span class="nt">canvas</span><span class="o">,</span><span class="w"> </span><span class="nt">svg</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-19-164"><a id="__codelineno-19-164" name="__codelineno-19-164" href="#__codelineno-19-164"></a><span class="w">    </span><span class="k">display</span><span class="p">:</span><span class="w"> </span><span class="kc">block</span><span class="p">;</span>
</span><span id="__span-19-165"><a id="__codelineno-19-165" name="__codelineno-19-165" href="#__codelineno-19-165"></a><span class="w">    </span><span class="k">max-width</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="kt">%</span><span class="p">;</span>
</span><span id="__span-19-166"><a id="__codelineno-19-166" name="__codelineno-19-166" href="#__codelineno-19-166"></a><span class="w">    </span><span class="k">height</span><span class="p">:</span><span class="w"> </span><span class="kc">auto</span><span class="p">;</span>
</span><span id="__span-19-167"><a id="__codelineno-19-167" name="__codelineno-19-167" href="#__codelineno-19-167"></a><span class="p">}</span>
</span><span id="__span-19-168"><a id="__codelineno-19-168" name="__codelineno-19-168" href="#__codelineno-19-168"></a>
</span><span id="__span-19-169"><a id="__codelineno-19-169" name="__codelineno-19-169" href="#__codelineno-19-169"></a><span class="nt">input</span><span class="o">,</span><span class="w"> </span><span class="nt">button</span><span class="o">,</span><span class="w"> </span><span class="nt">textarea</span><span class="o">,</span><span class="w"> </span><span class="nt">select</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-19-170"><a id="__codelineno-19-170" name="__codelineno-19-170" href="#__codelineno-19-170"></a><span class="w">    </span><span class="k">font</span><span class="p">:</span><span class="w"> </span><span class="kc">inherit</span><span class="p">;</span>
</span><span id="__span-19-171"><a id="__codelineno-19-171" name="__codelineno-19-171" href="#__codelineno-19-171"></a><span class="p">}</span>
</span><span id="__span-19-172"><a id="__codelineno-19-172" name="__codelineno-19-172" href="#__codelineno-19-172"></a>
</span><span id="__span-19-173"><a id="__codelineno-19-173" name="__codelineno-19-173" href="#__codelineno-19-173"></a><span class="nt">p</span><span class="o">,</span><span class="w"> </span><span class="nt">h1</span><span class="o">,</span><span class="w"> </span><span class="nt">h2</span><span class="o">,</span><span class="w"> </span><span class="nt">h3</span><span class="o">,</span><span class="w"> </span><span class="nt">h4</span><span class="o">,</span><span class="w"> </span><span class="nt">h5</span><span class="o">,</span><span class="w"> </span><span class="nt">h6</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-19-174"><a id="__codelineno-19-174" name="__codelineno-19-174" href="#__codelineno-19-174"></a><span class="w">    </span><span class="k">overflow-wrap</span><span class="p">:</span><span class="w"> </span><span class="kc">break-word</span><span class="p">;</span>
</span><span id="__span-19-175"><a id="__codelineno-19-175" name="__codelineno-19-175" href="#__codelineno-19-175"></a><span class="p">}</span>
</span><span id="__span-19-176"><a id="__codelineno-19-176" name="__codelineno-19-176" href="#__codelineno-19-176"></a>
</span><span id="__span-19-177"><a id="__codelineno-19-177" name="__codelineno-19-177" href="#__codelineno-19-177"></a><span class="c">/* ===================================</span>
</span><span id="__span-19-178"><a id="__codelineno-19-178" name="__codelineno-19-178" href="#__codelineno-19-178"></a><span class="c">   3. COMPONENT SYSTEM</span>
</span><span id="__span-19-179"><a id="__codelineno-19-179" name="__codelineno-19-179" href="#__codelineno-19-179"></a><span class="c">   ================================== */</span>
</span><span id="__span-19-180"><a id="__codelineno-19-180" name="__codelineno-19-180" href="#__codelineno-19-180"></a>
</span><span id="__span-19-181"><a id="__codelineno-19-181" name="__codelineno-19-181" href="#__codelineno-19-181"></a><span class="c">/* Button Component System */</span>
</span><span id="__span-19-182"><a id="__codelineno-19-182" name="__codelineno-19-182" href="#__codelineno-19-182"></a><span class="p">.</span><span class="nc">btn</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-19-183"><a id="__codelineno-19-183" name="__codelineno-19-183" href="#__codelineno-19-183"></a><span class="w">    </span><span class="k">display</span><span class="p">:</span><span class="w"> </span><span class="kc">inline-flex</span><span class="p">;</span>
</span><span id="__span-19-184"><a id="__codelineno-19-184" name="__codelineno-19-184" href="#__codelineno-19-184"></a><span class="w">    </span><span class="k">align-items</span><span class="p">:</span><span class="w"> </span><span class="kc">center</span><span class="p">;</span>
</span><span id="__span-19-185"><a id="__codelineno-19-185" name="__codelineno-19-185" href="#__codelineno-19-185"></a><span class="w">    </span><span class="k">justify-content</span><span class="p">:</span><span class="w"> </span><span class="kc">center</span><span class="p">;</span>
</span><span id="__span-19-186"><a id="__codelineno-19-186" name="__codelineno-19-186" href="#__codelineno-19-186"></a><span class="w">    </span><span class="k">gap</span><span class="p">:</span><span class="w"> </span><span class="nf">var</span><span class="p">(</span><span class="nv">--spacing-</span><span class="mi">2</span><span class="p">);</span>
</span><span id="__span-19-187"><a id="__codelineno-19-187" name="__codelineno-19-187" href="#__codelineno-19-187"></a><span class="w">    </span><span class="k">padding</span><span class="p">:</span><span class="w"> </span><span class="nf">var</span><span class="p">(</span><span class="nv">--spacing-</span><span class="mi">3</span><span class="p">)</span><span class="w"> </span><span class="nf">var</span><span class="p">(</span><span class="nv">--spacing-</span><span class="mi">6</span><span class="p">);</span>
</span><span id="__span-19-188"><a id="__codelineno-19-188" name="__codelineno-19-188" href="#__codelineno-19-188"></a><span class="w">    </span><span class="k">font-size</span><span class="p">:</span><span class="w"> </span><span class="nf">var</span><span class="p">(</span><span class="nv">--font-size-sm</span><span class="p">);</span>
</span><span id="__span-19-189"><a id="__codelineno-19-189" name="__codelineno-19-189" href="#__codelineno-19-189"></a><span class="w">    </span><span class="k">font-weight</span><span class="p">:</span><span class="w"> </span><span class="nf">var</span><span class="p">(</span><span class="nv">--font-weight-medium</span><span class="p">);</span>
</span><span id="__span-19-190"><a id="__codelineno-19-190" name="__codelineno-19-190" href="#__codelineno-19-190"></a><span class="w">    </span><span class="k">line-height</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
</span><span id="__span-19-191"><a id="__codelineno-19-191" name="__codelineno-19-191" href="#__codelineno-19-191"></a><span class="w">    </span><span class="k">text-decoration</span><span class="p">:</span><span class="w"> </span><span class="kc">none</span><span class="p">;</span>
</span><span id="__span-19-192"><a id="__codelineno-19-192" name="__codelineno-19-192" href="#__codelineno-19-192"></a><span class="w">    </span><span class="k">border</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="kt">px</span><span class="w"> </span><span class="kc">solid</span><span class="w"> </span><span class="kc">transparent</span><span class="p">;</span>
</span><span id="__span-19-193"><a id="__codelineno-19-193" name="__codelineno-19-193" href="#__codelineno-19-193"></a><span class="w">    </span><span class="k">border-radius</span><span class="p">:</span><span class="w"> </span><span class="nf">var</span><span class="p">(</span><span class="nv">--radius-md</span><span class="p">);</span>
</span><span id="__span-19-194"><a id="__codelineno-19-194" name="__codelineno-19-194" href="#__codelineno-19-194"></a><span class="w">    </span><span class="k">cursor</span><span class="p">:</span><span class="w"> </span><span class="kc">pointer</span><span class="p">;</span>
</span><span id="__span-19-195"><a id="__codelineno-19-195" name="__codelineno-19-195" href="#__codelineno-19-195"></a><span class="w">    </span><span class="k">transition</span><span class="p">:</span><span class="w"> </span><span class="kc">all</span><span class="w"> </span><span class="nf">var</span><span class="p">(</span><span class="nv">--transition-fast</span><span class="p">);</span>
</span><span id="__span-19-196"><a id="__codelineno-19-196" name="__codelineno-19-196" href="#__codelineno-19-196"></a><span class="w">    </span><span class="k">white-space</span><span class="p">:</span><span class="w"> </span><span class="kc">nowrap</span><span class="p">;</span>
</span><span id="__span-19-197"><a id="__codelineno-19-197" name="__codelineno-19-197" href="#__codelineno-19-197"></a><span class="w">    </span><span class="k">user-select</span><span class="p">:</span><span class="w"> </span><span class="kc">none</span><span class="p">;</span>
</span><span id="__span-19-198"><a id="__codelineno-19-198" name="__codelineno-19-198" href="#__codelineno-19-198"></a><span class="w">    </span><span class="k">vertical-align</span><span class="p">:</span><span class="w"> </span><span class="kc">middle</span><span class="p">;</span>
</span><span id="__span-19-199"><a id="__codelineno-19-199" name="__codelineno-19-199" href="#__codelineno-19-199"></a><span class="p">}</span>
</span><span id="__span-19-200"><a id="__codelineno-19-200" name="__codelineno-19-200" href="#__codelineno-19-200"></a>
</span><span id="__span-19-201"><a id="__codelineno-19-201" name="__codelineno-19-201" href="#__codelineno-19-201"></a><span class="p">.</span><span class="nc">btn</span><span class="p">:</span><span class="nd">focus</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-19-202"><a id="__codelineno-19-202" name="__codelineno-19-202" href="#__codelineno-19-202"></a><span class="w">    </span><span class="k">outline</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="kt">px</span><span class="w"> </span><span class="kc">solid</span><span class="w"> </span><span class="nf">var</span><span class="p">(</span><span class="nv">--color-primary-</span><span class="mi">500</span><span class="p">);</span>
</span><span id="__span-19-203"><a id="__codelineno-19-203" name="__codelineno-19-203" href="#__codelineno-19-203"></a><span class="w">    </span><span class="k">outline-offset</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="kt">px</span><span class="p">;</span>
</span><span id="__span-19-204"><a id="__codelineno-19-204" name="__codelineno-19-204" href="#__codelineno-19-204"></a><span class="p">}</span>
</span><span id="__span-19-205"><a id="__codelineno-19-205" name="__codelineno-19-205" href="#__codelineno-19-205"></a>
</span><span id="__span-19-206"><a id="__codelineno-19-206" name="__codelineno-19-206" href="#__codelineno-19-206"></a><span class="p">.</span><span class="nc">btn</span><span class="p">:</span><span class="nd">disabled</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-19-207"><a id="__codelineno-19-207" name="__codelineno-19-207" href="#__codelineno-19-207"></a><span class="w">    </span><span class="k">opacity</span><span class="p">:</span><span class="w"> </span><span class="mf">0.6</span><span class="p">;</span>
</span><span id="__span-19-208"><a id="__codelineno-19-208" name="__codelineno-19-208" href="#__codelineno-19-208"></a><span class="w">    </span><span class="k">cursor</span><span class="p">:</span><span class="w"> </span><span class="kc">not-allowed</span><span class="p">;</span>
</span><span id="__span-19-209"><a id="__codelineno-19-209" name="__codelineno-19-209" href="#__codelineno-19-209"></a><span class="p">}</span>
</span><span id="__span-19-210"><a id="__codelineno-19-210" name="__codelineno-19-210" href="#__codelineno-19-210"></a>
</span><span id="__span-19-211"><a id="__codelineno-19-211" name="__codelineno-19-211" href="#__codelineno-19-211"></a><span class="c">/* Button Variants */</span>
</span><span id="__span-19-212"><a id="__codelineno-19-212" name="__codelineno-19-212" href="#__codelineno-19-212"></a><span class="p">.</span><span class="nc">btn--primary</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-19-213"><a id="__codelineno-19-213" name="__codelineno-19-213" href="#__codelineno-19-213"></a><span class="w">    </span><span class="k">background-color</span><span class="p">:</span><span class="w"> </span><span class="nf">var</span><span class="p">(</span><span class="nv">--color-primary-</span><span class="mi">600</span><span class="p">);</span>
</span><span id="__span-19-214"><a id="__codelineno-19-214" name="__codelineno-19-214" href="#__codelineno-19-214"></a><span class="w">    </span><span class="k">color</span><span class="p">:</span><span class="w"> </span><span class="nf">var</span><span class="p">(</span><span class="nv">--color-neutral-</span><span class="mi">0</span><span class="p">);</span>
</span><span id="__span-19-215"><a id="__codelineno-19-215" name="__codelineno-19-215" href="#__codelineno-19-215"></a><span class="p">}</span>
</span><span id="__span-19-216"><a id="__codelineno-19-216" name="__codelineno-19-216" href="#__codelineno-19-216"></a>
</span><span id="__span-19-217"><a id="__codelineno-19-217" name="__codelineno-19-217" href="#__codelineno-19-217"></a><span class="p">.</span><span class="nc">btn--primary</span><span class="p">:</span><span class="nd">hover</span><span class="p">:</span><span class="nd">not</span><span class="o">(</span><span class="p">:</span><span class="nd">disabled</span><span class="o">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-19-218"><a id="__codelineno-19-218" name="__codelineno-19-218" href="#__codelineno-19-218"></a><span class="w">    </span><span class="k">background-color</span><span class="p">:</span><span class="w"> </span><span class="nf">var</span><span class="p">(</span><span class="nv">--color-primary-</span><span class="mi">700</span><span class="p">);</span>
</span><span id="__span-19-219"><a id="__codelineno-19-219" name="__codelineno-19-219" href="#__codelineno-19-219"></a><span class="w">    </span><span class="k">transform</span><span class="p">:</span><span class="w"> </span><span class="nb">translateY</span><span class="p">(</span><span class="mi">-1</span><span class="kt">px</span><span class="p">);</span>
</span><span id="__span-19-220"><a id="__codelineno-19-220" name="__codelineno-19-220" href="#__codelineno-19-220"></a><span class="w">    </span><span class="k">box-shadow</span><span class="p">:</span><span class="w"> </span><span class="nf">var</span><span class="p">(</span><span class="nv">--shadow-md</span><span class="p">);</span>
</span><span id="__span-19-221"><a id="__codelineno-19-221" name="__codelineno-19-221" href="#__codelineno-19-221"></a><span class="p">}</span>
</span><span id="__span-19-222"><a id="__codelineno-19-222" name="__codelineno-19-222" href="#__codelineno-19-222"></a>
</span><span id="__span-19-223"><a id="__codelineno-19-223" name="__codelineno-19-223" href="#__codelineno-19-223"></a><span class="p">.</span><span class="nc">btn--secondary</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-19-224"><a id="__codelineno-19-224" name="__codelineno-19-224" href="#__codelineno-19-224"></a><span class="w">    </span><span class="k">background-color</span><span class="p">:</span><span class="w"> </span><span class="nf">var</span><span class="p">(</span><span class="nv">--color-neutral-</span><span class="mi">0</span><span class="p">);</span>
</span><span id="__span-19-225"><a id="__codelineno-19-225" name="__codelineno-19-225" href="#__codelineno-19-225"></a><span class="w">    </span><span class="k">color</span><span class="p">:</span><span class="w"> </span><span class="nf">var</span><span class="p">(</span><span class="nv">--color-neutral-</span><span class="mi">900</span><span class="p">);</span>
</span><span id="__span-19-226"><a id="__codelineno-19-226" name="__codelineno-19-226" href="#__codelineno-19-226"></a><span class="w">    </span><span class="k">border-color</span><span class="p">:</span><span class="w"> </span><span class="nf">var</span><span class="p">(</span><span class="nv">--color-neutral-</span><span class="mi">300</span><span class="p">);</span>
</span><span id="__span-19-227"><a id="__codelineno-19-227" name="__codelineno-19-227" href="#__codelineno-19-227"></a><span class="p">}</span>
</span><span id="__span-19-228"><a id="__codelineno-19-228" name="__codelineno-19-228" href="#__codelineno-19-228"></a>
</span><span id="__span-19-229"><a id="__codelineno-19-229" name="__codelineno-19-229" href="#__codelineno-19-229"></a><span class="p">.</span><span class="nc">btn--secondary</span><span class="p">:</span><span class="nd">hover</span><span class="p">:</span><span class="nd">not</span><span class="o">(</span><span class="p">:</span><span class="nd">disabled</span><span class="o">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-19-230"><a id="__codelineno-19-230" name="__codelineno-19-230" href="#__codelineno-19-230"></a><span class="w">    </span><span class="k">background-color</span><span class="p">:</span><span class="w"> </span><span class="nf">var</span><span class="p">(</span><span class="nv">--color-neutral-</span><span class="mi">50</span><span class="p">);</span>
</span><span id="__span-19-231"><a id="__codelineno-19-231" name="__codelineno-19-231" href="#__codelineno-19-231"></a><span class="w">    </span><span class="k">border-color</span><span class="p">:</span><span class="w"> </span><span class="nf">var</span><span class="p">(</span><span class="nv">--color-neutral-</span><span class="mi">400</span><span class="p">);</span>
</span><span id="__span-19-232"><a id="__codelineno-19-232" name="__codelineno-19-232" href="#__codelineno-19-232"></a><span class="p">}</span>
</span><span id="__span-19-233"><a id="__codelineno-19-233" name="__codelineno-19-233" href="#__codelineno-19-233"></a>
</span><span id="__span-19-234"><a id="__codelineno-19-234" name="__codelineno-19-234" href="#__codelineno-19-234"></a><span class="p">.</span><span class="nc">btn--success</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-19-235"><a id="__codelineno-19-235" name="__codelineno-19-235" href="#__codelineno-19-235"></a><span class="w">    </span><span class="k">background-color</span><span class="p">:</span><span class="w"> </span><span class="nf">var</span><span class="p">(</span><span class="nv">--color-success</span><span class="p">);</span>
</span><span id="__span-19-236"><a id="__codelineno-19-236" name="__codelineno-19-236" href="#__codelineno-19-236"></a><span class="w">    </span><span class="k">color</span><span class="p">:</span><span class="w"> </span><span class="nf">var</span><span class="p">(</span><span class="nv">--color-neutral-</span><span class="mi">0</span><span class="p">);</span>
</span><span id="__span-19-237"><a id="__codelineno-19-237" name="__codelineno-19-237" href="#__codelineno-19-237"></a><span class="p">}</span>
</span><span id="__span-19-238"><a id="__codelineno-19-238" name="__codelineno-19-238" href="#__codelineno-19-238"></a>
</span><span id="__span-19-239"><a id="__codelineno-19-239" name="__codelineno-19-239" href="#__codelineno-19-239"></a><span class="p">.</span><span class="nc">btn--warning</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-19-240"><a id="__codelineno-19-240" name="__codelineno-19-240" href="#__codelineno-19-240"></a><span class="w">    </span><span class="k">background-color</span><span class="p">:</span><span class="w"> </span><span class="nf">var</span><span class="p">(</span><span class="nv">--color-warning</span><span class="p">);</span>
</span><span id="__span-19-241"><a id="__codelineno-19-241" name="__codelineno-19-241" href="#__codelineno-19-241"></a><span class="w">    </span><span class="k">color</span><span class="p">:</span><span class="w"> </span><span class="nf">var</span><span class="p">(</span><span class="nv">--color-neutral-</span><span class="mi">0</span><span class="p">);</span>
</span><span id="__span-19-242"><a id="__codelineno-19-242" name="__codelineno-19-242" href="#__codelineno-19-242"></a><span class="p">}</span>
</span><span id="__span-19-243"><a id="__codelineno-19-243" name="__codelineno-19-243" href="#__codelineno-19-243"></a>
</span><span id="__span-19-244"><a id="__codelineno-19-244" name="__codelineno-19-244" href="#__codelineno-19-244"></a><span class="p">.</span><span class="nc">btn--error</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-19-245"><a id="__codelineno-19-245" name="__codelineno-19-245" href="#__codelineno-19-245"></a><span class="w">    </span><span class="k">background-color</span><span class="p">:</span><span class="w"> </span><span class="nf">var</span><span class="p">(</span><span class="nv">--color-error</span><span class="p">);</span>
</span><span id="__span-19-246"><a id="__codelineno-19-246" name="__codelineno-19-246" href="#__codelineno-19-246"></a><span class="w">    </span><span class="k">color</span><span class="p">:</span><span class="w"> </span><span class="nf">var</span><span class="p">(</span><span class="nv">--color-neutral-</span><span class="mi">0</span><span class="p">);</span>
</span><span id="__span-19-247"><a id="__codelineno-19-247" name="__codelineno-19-247" href="#__codelineno-19-247"></a><span class="p">}</span>
</span><span id="__span-19-248"><a id="__codelineno-19-248" name="__codelineno-19-248" href="#__codelineno-19-248"></a>
</span><span id="__span-19-249"><a id="__codelineno-19-249" name="__codelineno-19-249" href="#__codelineno-19-249"></a><span class="c">/* Button Sizes */</span>
</span><span id="__span-19-250"><a id="__codelineno-19-250" name="__codelineno-19-250" href="#__codelineno-19-250"></a><span class="p">.</span><span class="nc">btn--sm</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-19-251"><a id="__codelineno-19-251" name="__codelineno-19-251" href="#__codelineno-19-251"></a><span class="w">    </span><span class="k">padding</span><span class="p">:</span><span class="w"> </span><span class="nf">var</span><span class="p">(</span><span class="nv">--spacing-</span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="nf">var</span><span class="p">(</span><span class="nv">--spacing-</span><span class="mi">4</span><span class="p">);</span>
</span><span id="__span-19-252"><a id="__codelineno-19-252" name="__codelineno-19-252" href="#__codelineno-19-252"></a><span class="w">    </span><span class="k">font-size</span><span class="p">:</span><span class="w"> </span><span class="nf">var</span><span class="p">(</span><span class="nv">--font-size-xs</span><span class="p">);</span>
</span><span id="__span-19-253"><a id="__codelineno-19-253" name="__codelineno-19-253" href="#__codelineno-19-253"></a><span class="p">}</span>
</span><span id="__span-19-254"><a id="__codelineno-19-254" name="__codelineno-19-254" href="#__codelineno-19-254"></a>
</span><span id="__span-19-255"><a id="__codelineno-19-255" name="__codelineno-19-255" href="#__codelineno-19-255"></a><span class="p">.</span><span class="nc">btn--lg</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-19-256"><a id="__codelineno-19-256" name="__codelineno-19-256" href="#__codelineno-19-256"></a><span class="w">    </span><span class="k">padding</span><span class="p">:</span><span class="w"> </span><span class="nf">var</span><span class="p">(</span><span class="nv">--spacing-</span><span class="mi">4</span><span class="p">)</span><span class="w"> </span><span class="nf">var</span><span class="p">(</span><span class="nv">--spacing-</span><span class="mi">8</span><span class="p">);</span>
</span><span id="__span-19-257"><a id="__codelineno-19-257" name="__codelineno-19-257" href="#__codelineno-19-257"></a><span class="w">    </span><span class="k">font-size</span><span class="p">:</span><span class="w"> </span><span class="nf">var</span><span class="p">(</span><span class="nv">--font-size-base</span><span class="p">);</span>
</span><span id="__span-19-258"><a id="__codelineno-19-258" name="__codelineno-19-258" href="#__codelineno-19-258"></a><span class="p">}</span>
</span><span id="__span-19-259"><a id="__codelineno-19-259" name="__codelineno-19-259" href="#__codelineno-19-259"></a>
</span><span id="__span-19-260"><a id="__codelineno-19-260" name="__codelineno-19-260" href="#__codelineno-19-260"></a><span class="p">.</span><span class="nc">btn--xl</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-19-261"><a id="__codelineno-19-261" name="__codelineno-19-261" href="#__codelineno-19-261"></a><span class="w">    </span><span class="k">padding</span><span class="p">:</span><span class="w"> </span><span class="nf">var</span><span class="p">(</span><span class="nv">--spacing-</span><span class="mi">5</span><span class="p">)</span><span class="w"> </span><span class="nf">var</span><span class="p">(</span><span class="nv">--spacing-</span><span class="mi">10</span><span class="p">);</span>
</span><span id="__span-19-262"><a id="__codelineno-19-262" name="__codelineno-19-262" href="#__codelineno-19-262"></a><span class="w">    </span><span class="k">font-size</span><span class="p">:</span><span class="w"> </span><span class="nf">var</span><span class="p">(</span><span class="nv">--font-size-lg</span><span class="p">);</span>
</span><span id="__span-19-263"><a id="__codelineno-19-263" name="__codelineno-19-263" href="#__codelineno-19-263"></a><span class="p">}</span>
</span><span id="__span-19-264"><a id="__codelineno-19-264" name="__codelineno-19-264" href="#__codelineno-19-264"></a>
</span><span id="__span-19-265"><a id="__codelineno-19-265" name="__codelineno-19-265" href="#__codelineno-19-265"></a><span class="c">/* Card Component System */</span>
</span><span id="__span-19-266"><a id="__codelineno-19-266" name="__codelineno-19-266" href="#__codelineno-19-266"></a><span class="p">.</span><span class="nc">card</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-19-267"><a id="__codelineno-19-267" name="__codelineno-19-267" href="#__codelineno-19-267"></a><span class="w">    </span><span class="k">background-color</span><span class="p">:</span><span class="w"> </span><span class="nf">var</span><span class="p">(</span><span class="nv">--color-neutral-</span><span class="mi">0</span><span class="p">);</span>
</span><span id="__span-19-268"><a id="__codelineno-19-268" name="__codelineno-19-268" href="#__codelineno-19-268"></a><span class="w">    </span><span class="k">border</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="kt">px</span><span class="w"> </span><span class="kc">solid</span><span class="w"> </span><span class="nf">var</span><span class="p">(</span><span class="nv">--color-neutral-</span><span class="mi">200</span><span class="p">);</span>
</span><span id="__span-19-269"><a id="__codelineno-19-269" name="__codelineno-19-269" href="#__codelineno-19-269"></a><span class="w">    </span><span class="k">border-radius</span><span class="p">:</span><span class="w"> </span><span class="nf">var</span><span class="p">(</span><span class="nv">--radius-lg</span><span class="p">);</span>
</span><span id="__span-19-270"><a id="__codelineno-19-270" name="__codelineno-19-270" href="#__codelineno-19-270"></a><span class="w">    </span><span class="k">box-shadow</span><span class="p">:</span><span class="w"> </span><span class="nf">var</span><span class="p">(</span><span class="nv">--shadow-sm</span><span class="p">);</span>
</span><span id="__span-19-271"><a id="__codelineno-19-271" name="__codelineno-19-271" href="#__codelineno-19-271"></a><span class="w">    </span><span class="k">overflow</span><span class="p">:</span><span class="w"> </span><span class="kc">hidden</span><span class="p">;</span>
</span><span id="__span-19-272"><a id="__codelineno-19-272" name="__codelineno-19-272" href="#__codelineno-19-272"></a><span class="w">    </span><span class="k">transition</span><span class="p">:</span><span class="w"> </span><span class="kc">all</span><span class="w"> </span><span class="nf">var</span><span class="p">(</span><span class="nv">--transition-normal</span><span class="p">);</span>
</span><span id="__span-19-273"><a id="__codelineno-19-273" name="__codelineno-19-273" href="#__codelineno-19-273"></a><span class="p">}</span>
</span><span id="__span-19-274"><a id="__codelineno-19-274" name="__codelineno-19-274" href="#__codelineno-19-274"></a>
</span><span id="__span-19-275"><a id="__codelineno-19-275" name="__codelineno-19-275" href="#__codelineno-19-275"></a><span class="p">.</span><span class="nc">card</span><span class="p">:</span><span class="nd">hover</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-19-276"><a id="__codelineno-19-276" name="__codelineno-19-276" href="#__codelineno-19-276"></a><span class="w">    </span><span class="k">box-shadow</span><span class="p">:</span><span class="w"> </span><span class="nf">var</span><span class="p">(</span><span class="nv">--shadow-md</span><span class="p">);</span>
</span><span id="__span-19-277"><a id="__codelineno-19-277" name="__codelineno-19-277" href="#__codelineno-19-277"></a><span class="w">    </span><span class="k">transform</span><span class="p">:</span><span class="w"> </span><span class="nb">translateY</span><span class="p">(</span><span class="mi">-2</span><span class="kt">px</span><span class="p">);</span>
</span><span id="__span-19-278"><a id="__codelineno-19-278" name="__codelineno-19-278" href="#__codelineno-19-278"></a><span class="p">}</span>
</span><span id="__span-19-279"><a id="__codelineno-19-279" name="__codelineno-19-279" href="#__codelineno-19-279"></a>
</span><span id="__span-19-280"><a id="__codelineno-19-280" name="__codelineno-19-280" href="#__codelineno-19-280"></a><span class="p">.</span><span class="nc">card__header</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-19-281"><a id="__codelineno-19-281" name="__codelineno-19-281" href="#__codelineno-19-281"></a><span class="w">    </span><span class="k">padding</span><span class="p">:</span><span class="w"> </span><span class="nf">var</span><span class="p">(</span><span class="nv">--spacing-</span><span class="mi">6</span><span class="p">);</span>
</span><span id="__span-19-282"><a id="__codelineno-19-282" name="__codelineno-19-282" href="#__codelineno-19-282"></a><span class="w">    </span><span class="k">border-bottom</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="kt">px</span><span class="w"> </span><span class="kc">solid</span><span class="w"> </span><span class="nf">var</span><span class="p">(</span><span class="nv">--color-neutral-</span><span class="mi">200</span><span class="p">);</span>
</span><span id="__span-19-283"><a id="__codelineno-19-283" name="__codelineno-19-283" href="#__codelineno-19-283"></a><span class="w">    </span><span class="k">background-color</span><span class="p">:</span><span class="w"> </span><span class="nf">var</span><span class="p">(</span><span class="nv">--color-neutral-</span><span class="mi">50</span><span class="p">);</span>
</span><span id="__span-19-284"><a id="__codelineno-19-284" name="__codelineno-19-284" href="#__codelineno-19-284"></a><span class="p">}</span>
</span><span id="__span-19-285"><a id="__codelineno-19-285" name="__codelineno-19-285" href="#__codelineno-19-285"></a>
</span><span id="__span-19-286"><a id="__codelineno-19-286" name="__codelineno-19-286" href="#__codelineno-19-286"></a><span class="p">.</span><span class="nc">card__body</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-19-287"><a id="__codelineno-19-287" name="__codelineno-19-287" href="#__codelineno-19-287"></a><span class="w">    </span><span class="k">padding</span><span class="p">:</span><span class="w"> </span><span class="nf">var</span><span class="p">(</span><span class="nv">--spacing-</span><span class="mi">6</span><span class="p">);</span>
</span><span id="__span-19-288"><a id="__codelineno-19-288" name="__codelineno-19-288" href="#__codelineno-19-288"></a><span class="p">}</span>
</span><span id="__span-19-289"><a id="__codelineno-19-289" name="__codelineno-19-289" href="#__codelineno-19-289"></a>
</span><span id="__span-19-290"><a id="__codelineno-19-290" name="__codelineno-19-290" href="#__codelineno-19-290"></a><span class="p">.</span><span class="nc">card__footer</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-19-291"><a id="__codelineno-19-291" name="__codelineno-19-291" href="#__codelineno-19-291"></a><span class="w">    </span><span class="k">padding</span><span class="p">:</span><span class="w"> </span><span class="nf">var</span><span class="p">(</span><span class="nv">--spacing-</span><span class="mi">6</span><span class="p">);</span>
</span><span id="__span-19-292"><a id="__codelineno-19-292" name="__codelineno-19-292" href="#__codelineno-19-292"></a><span class="w">    </span><span class="k">border-top</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="kt">px</span><span class="w"> </span><span class="kc">solid</span><span class="w"> </span><span class="nf">var</span><span class="p">(</span><span class="nv">--color-neutral-</span><span class="mi">200</span><span class="p">);</span>
</span><span id="__span-19-293"><a id="__codelineno-19-293" name="__codelineno-19-293" href="#__codelineno-19-293"></a><span class="w">    </span><span class="k">background-color</span><span class="p">:</span><span class="w"> </span><span class="nf">var</span><span class="p">(</span><span class="nv">--color-neutral-</span><span class="mi">50</span><span class="p">);</span>
</span><span id="__span-19-294"><a id="__codelineno-19-294" name="__codelineno-19-294" href="#__codelineno-19-294"></a><span class="w">    </span><span class="k">display</span><span class="p">:</span><span class="w"> </span><span class="kc">flex</span><span class="p">;</span>
</span><span id="__span-19-295"><a id="__codelineno-19-295" name="__codelineno-19-295" href="#__codelineno-19-295"></a><span class="w">    </span><span class="k">justify-content</span><span class="p">:</span><span class="w"> </span><span class="kc">flex-end</span><span class="p">;</span>
</span><span id="__span-19-296"><a id="__codelineno-19-296" name="__codelineno-19-296" href="#__codelineno-19-296"></a><span class="w">    </span><span class="k">gap</span><span class="p">:</span><span class="w"> </span><span class="nf">var</span><span class="p">(</span><span class="nv">--spacing-</span><span class="mi">3</span><span class="p">);</span>
</span><span id="__span-19-297"><a id="__codelineno-19-297" name="__codelineno-19-297" href="#__codelineno-19-297"></a><span class="p">}</span>
</span><span id="__span-19-298"><a id="__codelineno-19-298" name="__codelineno-19-298" href="#__codelineno-19-298"></a>
</span><span id="__span-19-299"><a id="__codelineno-19-299" name="__codelineno-19-299" href="#__codelineno-19-299"></a><span class="c">/* Form Component System */</span>
</span><span id="__span-19-300"><a id="__codelineno-19-300" name="__codelineno-19-300" href="#__codelineno-19-300"></a><span class="p">.</span><span class="nc">form-group</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-19-301"><a id="__codelineno-19-301" name="__codelineno-19-301" href="#__codelineno-19-301"></a><span class="w">    </span><span class="k">margin-bottom</span><span class="p">:</span><span class="w"> </span><span class="nf">var</span><span class="p">(</span><span class="nv">--spacing-</span><span class="mi">6</span><span class="p">);</span>
</span><span id="__span-19-302"><a id="__codelineno-19-302" name="__codelineno-19-302" href="#__codelineno-19-302"></a><span class="p">}</span>
</span><span id="__span-19-303"><a id="__codelineno-19-303" name="__codelineno-19-303" href="#__codelineno-19-303"></a>
</span><span id="__span-19-304"><a id="__codelineno-19-304" name="__codelineno-19-304" href="#__codelineno-19-304"></a><span class="p">.</span><span class="nc">form-label</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-19-305"><a id="__codelineno-19-305" name="__codelineno-19-305" href="#__codelineno-19-305"></a><span class="w">    </span><span class="k">display</span><span class="p">:</span><span class="w"> </span><span class="kc">block</span><span class="p">;</span>
</span><span id="__span-19-306"><a id="__codelineno-19-306" name="__codelineno-19-306" href="#__codelineno-19-306"></a><span class="w">    </span><span class="k">font-size</span><span class="p">:</span><span class="w"> </span><span class="nf">var</span><span class="p">(</span><span class="nv">--font-size-sm</span><span class="p">);</span>
</span><span id="__span-19-307"><a id="__codelineno-19-307" name="__codelineno-19-307" href="#__codelineno-19-307"></a><span class="w">    </span><span class="k">font-weight</span><span class="p">:</span><span class="w"> </span><span class="nf">var</span><span class="p">(</span><span class="nv">--font-weight-medium</span><span class="p">);</span>
</span><span id="__span-19-308"><a id="__codelineno-19-308" name="__codelineno-19-308" href="#__codelineno-19-308"></a><span class="w">    </span><span class="k">color</span><span class="p">:</span><span class="w"> </span><span class="nf">var</span><span class="p">(</span><span class="nv">--color-neutral-</span><span class="mi">700</span><span class="p">);</span>
</span><span id="__span-19-309"><a id="__codelineno-19-309" name="__codelineno-19-309" href="#__codelineno-19-309"></a><span class="w">    </span><span class="k">margin-bottom</span><span class="p">:</span><span class="w"> </span><span class="nf">var</span><span class="p">(</span><span class="nv">--spacing-</span><span class="mi">2</span><span class="p">);</span>
</span><span id="__span-19-310"><a id="__codelineno-19-310" name="__codelineno-19-310" href="#__codelineno-19-310"></a><span class="p">}</span>
</span><span id="__span-19-311"><a id="__codelineno-19-311" name="__codelineno-19-311" href="#__codelineno-19-311"></a>
</span><span id="__span-19-312"><a id="__codelineno-19-312" name="__codelineno-19-312" href="#__codelineno-19-312"></a><span class="p">.</span><span class="nc">form-label--required</span><span class="p">::</span><span class="nd">after</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-19-313"><a id="__codelineno-19-313" name="__codelineno-19-313" href="#__codelineno-19-313"></a><span class="w">    </span><span class="k">content</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot; *&quot;</span><span class="p">;</span>
</span><span id="__span-19-314"><a id="__codelineno-19-314" name="__codelineno-19-314" href="#__codelineno-19-314"></a><span class="w">    </span><span class="k">color</span><span class="p">:</span><span class="w"> </span><span class="nf">var</span><span class="p">(</span><span class="nv">--color-error</span><span class="p">);</span>
</span><span id="__span-19-315"><a id="__codelineno-19-315" name="__codelineno-19-315" href="#__codelineno-19-315"></a><span class="p">}</span>
</span><span id="__span-19-316"><a id="__codelineno-19-316" name="__codelineno-19-316" href="#__codelineno-19-316"></a>
</span><span id="__span-19-317"><a id="__codelineno-19-317" name="__codelineno-19-317" href="#__codelineno-19-317"></a><span class="p">.</span><span class="nc">form-input</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-19-318"><a id="__codelineno-19-318" name="__codelineno-19-318" href="#__codelineno-19-318"></a><span class="w">    </span><span class="k">display</span><span class="p">:</span><span class="w"> </span><span class="kc">block</span><span class="p">;</span>
</span><span id="__span-19-319"><a id="__codelineno-19-319" name="__codelineno-19-319" href="#__codelineno-19-319"></a><span class="w">    </span><span class="k">width</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="kt">%</span><span class="p">;</span>
</span><span id="__span-19-320"><a id="__codelineno-19-320" name="__codelineno-19-320" href="#__codelineno-19-320"></a><span class="w">    </span><span class="k">padding</span><span class="p">:</span><span class="w"> </span><span class="nf">var</span><span class="p">(</span><span class="nv">--spacing-</span><span class="mi">3</span><span class="p">);</span>
</span><span id="__span-19-321"><a id="__codelineno-19-321" name="__codelineno-19-321" href="#__codelineno-19-321"></a><span class="w">    </span><span class="k">font-size</span><span class="p">:</span><span class="w"> </span><span class="nf">var</span><span class="p">(</span><span class="nv">--font-size-base</span><span class="p">);</span>
</span><span id="__span-19-322"><a id="__codelineno-19-322" name="__codelineno-19-322" href="#__codelineno-19-322"></a><span class="w">    </span><span class="k">color</span><span class="p">:</span><span class="w"> </span><span class="nf">var</span><span class="p">(</span><span class="nv">--color-neutral-</span><span class="mi">900</span><span class="p">);</span>
</span><span id="__span-19-323"><a id="__codelineno-19-323" name="__codelineno-19-323" href="#__codelineno-19-323"></a><span class="w">    </span><span class="k">background-color</span><span class="p">:</span><span class="w"> </span><span class="nf">var</span><span class="p">(</span><span class="nv">--color-neutral-</span><span class="mi">0</span><span class="p">);</span>
</span><span id="__span-19-324"><a id="__codelineno-19-324" name="__codelineno-19-324" href="#__codelineno-19-324"></a><span class="w">    </span><span class="k">border</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="kt">px</span><span class="w"> </span><span class="kc">solid</span><span class="w"> </span><span class="nf">var</span><span class="p">(</span><span class="nv">--color-neutral-</span><span class="mi">300</span><span class="p">);</span>
</span><span id="__span-19-325"><a id="__codelineno-19-325" name="__codelineno-19-325" href="#__codelineno-19-325"></a><span class="w">    </span><span class="k">border-radius</span><span class="p">:</span><span class="w"> </span><span class="nf">var</span><span class="p">(</span><span class="nv">--radius-md</span><span class="p">);</span>
</span><span id="__span-19-326"><a id="__codelineno-19-326" name="__codelineno-19-326" href="#__codelineno-19-326"></a><span class="w">    </span><span class="k">transition</span><span class="p">:</span><span class="w"> </span><span class="kc">all</span><span class="w"> </span><span class="nf">var</span><span class="p">(</span><span class="nv">--transition-fast</span><span class="p">);</span>
</span><span id="__span-19-327"><a id="__codelineno-19-327" name="__codelineno-19-327" href="#__codelineno-19-327"></a><span class="p">}</span>
</span><span id="__span-19-328"><a id="__codelineno-19-328" name="__codelineno-19-328" href="#__codelineno-19-328"></a>
</span><span id="__span-19-329"><a id="__codelineno-19-329" name="__codelineno-19-329" href="#__codelineno-19-329"></a><span class="p">.</span><span class="nc">form-input</span><span class="p">:</span><span class="nd">focus</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-19-330"><a id="__codelineno-19-330" name="__codelineno-19-330" href="#__codelineno-19-330"></a><span class="w">    </span><span class="k">outline</span><span class="p">:</span><span class="w"> </span><span class="kc">none</span><span class="p">;</span>
</span><span id="__span-19-331"><a id="__codelineno-19-331" name="__codelineno-19-331" href="#__codelineno-19-331"></a><span class="w">    </span><span class="k">border-color</span><span class="p">:</span><span class="w"> </span><span class="nf">var</span><span class="p">(</span><span class="nv">--color-primary-</span><span class="mi">500</span><span class="p">);</span>
</span><span id="__span-19-332"><a id="__codelineno-19-332" name="__codelineno-19-332" href="#__codelineno-19-332"></a><span class="w">    </span><span class="k">box-shadow</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">3</span><span class="kt">px</span><span class="w"> </span><span class="nb">rgb</span><span class="p">(</span><span class="mi">59</span><span class="w"> </span><span class="mi">130</span><span class="w"> </span><span class="mi">246</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mf">0.1</span><span class="p">);</span>
</span><span id="__span-19-333"><a id="__codelineno-19-333" name="__codelineno-19-333" href="#__codelineno-19-333"></a><span class="p">}</span>
</span><span id="__span-19-334"><a id="__codelineno-19-334" name="__codelineno-19-334" href="#__codelineno-19-334"></a>
</span><span id="__span-19-335"><a id="__codelineno-19-335" name="__codelineno-19-335" href="#__codelineno-19-335"></a><span class="p">.</span><span class="nc">form-input</span><span class="p">:</span><span class="nd">invalid</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-19-336"><a id="__codelineno-19-336" name="__codelineno-19-336" href="#__codelineno-19-336"></a><span class="w">    </span><span class="k">border-color</span><span class="p">:</span><span class="w"> </span><span class="nf">var</span><span class="p">(</span><span class="nv">--color-error</span><span class="p">);</span>
</span><span id="__span-19-337"><a id="__codelineno-19-337" name="__codelineno-19-337" href="#__codelineno-19-337"></a><span class="p">}</span>
</span><span id="__span-19-338"><a id="__codelineno-19-338" name="__codelineno-19-338" href="#__codelineno-19-338"></a>
</span><span id="__span-19-339"><a id="__codelineno-19-339" name="__codelineno-19-339" href="#__codelineno-19-339"></a><span class="p">.</span><span class="nc">form-help</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-19-340"><a id="__codelineno-19-340" name="__codelineno-19-340" href="#__codelineno-19-340"></a><span class="w">    </span><span class="k">margin-top</span><span class="p">:</span><span class="w"> </span><span class="nf">var</span><span class="p">(</span><span class="nv">--spacing-</span><span class="mi">1</span><span class="p">);</span>
</span><span id="__span-19-341"><a id="__codelineno-19-341" name="__codelineno-19-341" href="#__codelineno-19-341"></a><span class="w">    </span><span class="k">font-size</span><span class="p">:</span><span class="w"> </span><span class="nf">var</span><span class="p">(</span><span class="nv">--font-size-sm</span><span class="p">);</span>
</span><span id="__span-19-342"><a id="__codelineno-19-342" name="__codelineno-19-342" href="#__codelineno-19-342"></a><span class="w">    </span><span class="k">color</span><span class="p">:</span><span class="w"> </span><span class="nf">var</span><span class="p">(</span><span class="nv">--color-neutral-</span><span class="mi">500</span><span class="p">);</span>
</span><span id="__span-19-343"><a id="__codelineno-19-343" name="__codelineno-19-343" href="#__codelineno-19-343"></a><span class="p">}</span>
</span><span id="__span-19-344"><a id="__codelineno-19-344" name="__codelineno-19-344" href="#__codelineno-19-344"></a>
</span><span id="__span-19-345"><a id="__codelineno-19-345" name="__codelineno-19-345" href="#__codelineno-19-345"></a><span class="p">.</span><span class="nc">form-error</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-19-346"><a id="__codelineno-19-346" name="__codelineno-19-346" href="#__codelineno-19-346"></a><span class="w">    </span><span class="k">margin-top</span><span class="p">:</span><span class="w"> </span><span class="nf">var</span><span class="p">(</span><span class="nv">--spacing-</span><span class="mi">1</span><span class="p">);</span>
</span><span id="__span-19-347"><a id="__codelineno-19-347" name="__codelineno-19-347" href="#__codelineno-19-347"></a><span class="w">    </span><span class="k">font-size</span><span class="p">:</span><span class="w"> </span><span class="nf">var</span><span class="p">(</span><span class="nv">--font-size-sm</span><span class="p">);</span>
</span><span id="__span-19-348"><a id="__codelineno-19-348" name="__codelineno-19-348" href="#__codelineno-19-348"></a><span class="w">    </span><span class="k">color</span><span class="p">:</span><span class="w"> </span><span class="nf">var</span><span class="p">(</span><span class="nv">--color-error</span><span class="p">);</span>
</span><span id="__span-19-349"><a id="__codelineno-19-349" name="__codelineno-19-349" href="#__codelineno-19-349"></a><span class="p">}</span>
</span><span id="__span-19-350"><a id="__codelineno-19-350" name="__codelineno-19-350" href="#__codelineno-19-350"></a>
</span><span id="__span-19-351"><a id="__codelineno-19-351" name="__codelineno-19-351" href="#__codelineno-19-351"></a><span class="c">/* ===================================</span>
</span><span id="__span-19-352"><a id="__codelineno-19-352" name="__codelineno-19-352" href="#__codelineno-19-352"></a><span class="c">   4. LAYOUT SYSTEM</span>
</span><span id="__span-19-353"><a id="__codelineno-19-353" name="__codelineno-19-353" href="#__codelineno-19-353"></a><span class="c">   ================================== */</span>
</span><span id="__span-19-354"><a id="__codelineno-19-354" name="__codelineno-19-354" href="#__codelineno-19-354"></a>
</span><span id="__span-19-355"><a id="__codelineno-19-355" name="__codelineno-19-355" href="#__codelineno-19-355"></a><span class="c">/* Container System */</span>
</span><span id="__span-19-356"><a id="__codelineno-19-356" name="__codelineno-19-356" href="#__codelineno-19-356"></a><span class="p">.</span><span class="nc">container</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-19-357"><a id="__codelineno-19-357" name="__codelineno-19-357" href="#__codelineno-19-357"></a><span class="w">    </span><span class="k">width</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="kt">%</span><span class="p">;</span>
</span><span id="__span-19-358"><a id="__codelineno-19-358" name="__codelineno-19-358" href="#__codelineno-19-358"></a><span class="w">    </span><span class="k">max-width</span><span class="p">:</span><span class="w"> </span><span class="mi">1200</span><span class="kt">px</span><span class="p">;</span>
</span><span id="__span-19-359"><a id="__codelineno-19-359" name="__codelineno-19-359" href="#__codelineno-19-359"></a><span class="w">    </span><span class="k">margin</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="kc">auto</span><span class="p">;</span>
</span><span id="__span-19-360"><a id="__codelineno-19-360" name="__codelineno-19-360" href="#__codelineno-19-360"></a><span class="w">    </span><span class="k">padding</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="nf">var</span><span class="p">(</span><span class="nv">--spacing-</span><span class="mi">4</span><span class="p">);</span>
</span><span id="__span-19-361"><a id="__codelineno-19-361" name="__codelineno-19-361" href="#__codelineno-19-361"></a><span class="p">}</span>
</span><span id="__span-19-362"><a id="__codelineno-19-362" name="__codelineno-19-362" href="#__codelineno-19-362"></a>
</span><span id="__span-19-363"><a id="__codelineno-19-363" name="__codelineno-19-363" href="#__codelineno-19-363"></a><span class="p">.</span><span class="nc">container--sm</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">max-width</span><span class="p">:</span><span class="w"> </span><span class="mi">640</span><span class="kt">px</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-19-364"><a id="__codelineno-19-364" name="__codelineno-19-364" href="#__codelineno-19-364"></a><span class="p">.</span><span class="nc">container--md</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">max-width</span><span class="p">:</span><span class="w"> </span><span class="mi">768</span><span class="kt">px</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-19-365"><a id="__codelineno-19-365" name="__codelineno-19-365" href="#__codelineno-19-365"></a><span class="p">.</span><span class="nc">container--lg</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">max-width</span><span class="p">:</span><span class="w"> </span><span class="mi">1024</span><span class="kt">px</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-19-366"><a id="__codelineno-19-366" name="__codelineno-19-366" href="#__codelineno-19-366"></a><span class="p">.</span><span class="nc">container--xl</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">max-width</span><span class="p">:</span><span class="w"> </span><span class="mi">1280</span><span class="kt">px</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-19-367"><a id="__codelineno-19-367" name="__codelineno-19-367" href="#__codelineno-19-367"></a><span class="p">.</span><span class="nc">container--2xl</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">max-width</span><span class="p">:</span><span class="w"> </span><span class="mi">1536</span><span class="kt">px</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-19-368"><a id="__codelineno-19-368" name="__codelineno-19-368" href="#__codelineno-19-368"></a>
</span><span id="__span-19-369"><a id="__codelineno-19-369" name="__codelineno-19-369" href="#__codelineno-19-369"></a><span class="c">/* Grid System */</span>
</span><span id="__span-19-370"><a id="__codelineno-19-370" name="__codelineno-19-370" href="#__codelineno-19-370"></a><span class="p">.</span><span class="nc">grid</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-19-371"><a id="__codelineno-19-371" name="__codelineno-19-371" href="#__codelineno-19-371"></a><span class="w">    </span><span class="k">display</span><span class="p">:</span><span class="w"> </span><span class="k">grid</span><span class="p">;</span>
</span><span id="__span-19-372"><a id="__codelineno-19-372" name="__codelineno-19-372" href="#__codelineno-19-372"></a><span class="w">    </span><span class="k">gap</span><span class="p">:</span><span class="w"> </span><span class="nf">var</span><span class="p">(</span><span class="nv">--spacing-</span><span class="mi">6</span><span class="p">);</span>
</span><span id="__span-19-373"><a id="__codelineno-19-373" name="__codelineno-19-373" href="#__codelineno-19-373"></a><span class="p">}</span>
</span><span id="__span-19-374"><a id="__codelineno-19-374" name="__codelineno-19-374" href="#__codelineno-19-374"></a>
</span><span id="__span-19-375"><a id="__codelineno-19-375" name="__codelineno-19-375" href="#__codelineno-19-375"></a><span class="p">.</span><span class="nc">grid--1</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">grid-template-columns</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="n">fr</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-19-376"><a id="__codelineno-19-376" name="__codelineno-19-376" href="#__codelineno-19-376"></a><span class="p">.</span><span class="nc">grid--2</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">grid-template-columns</span><span class="p">:</span><span class="w"> </span><span class="nf">repeat</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="n">fr</span><span class="p">);</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-19-377"><a id="__codelineno-19-377" name="__codelineno-19-377" href="#__codelineno-19-377"></a><span class="p">.</span><span class="nc">grid--3</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">grid-template-columns</span><span class="p">:</span><span class="w"> </span><span class="nf">repeat</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="n">fr</span><span class="p">);</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-19-378"><a id="__codelineno-19-378" name="__codelineno-19-378" href="#__codelineno-19-378"></a><span class="p">.</span><span class="nc">grid--4</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">grid-template-columns</span><span class="p">:</span><span class="w"> </span><span class="nf">repeat</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="n">fr</span><span class="p">);</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-19-379"><a id="__codelineno-19-379" name="__codelineno-19-379" href="#__codelineno-19-379"></a><span class="p">.</span><span class="nc">grid--5</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">grid-template-columns</span><span class="p">:</span><span class="w"> </span><span class="nf">repeat</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="n">fr</span><span class="p">);</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-19-380"><a id="__codelineno-19-380" name="__codelineno-19-380" href="#__codelineno-19-380"></a><span class="p">.</span><span class="nc">grid--6</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">grid-template-columns</span><span class="p">:</span><span class="w"> </span><span class="nf">repeat</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="n">fr</span><span class="p">);</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-19-381"><a id="__codelineno-19-381" name="__codelineno-19-381" href="#__codelineno-19-381"></a><span class="p">.</span><span class="nc">grid--12</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">grid-template-columns</span><span class="p">:</span><span class="w"> </span><span class="nf">repeat</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="n">fr</span><span class="p">);</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-19-382"><a id="__codelineno-19-382" name="__codelineno-19-382" href="#__codelineno-19-382"></a>
</span><span id="__span-19-383"><a id="__codelineno-19-383" name="__codelineno-19-383" href="#__codelineno-19-383"></a><span class="c">/* Responsive Grid */</span>
</span><span id="__span-19-384"><a id="__codelineno-19-384" name="__codelineno-19-384" href="#__codelineno-19-384"></a><span class="p">@</span><span class="k">media</span><span class="w"> </span><span class="o">(</span><span class="nt">max-width</span><span class="o">:</span><span class="w"> </span><span class="nt">768px</span><span class="o">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-19-385"><a id="__codelineno-19-385" name="__codelineno-19-385" href="#__codelineno-19-385"></a><span class="w">    </span><span class="p">.</span><span class="nc">grid--2</span><span class="o">,</span>
</span><span id="__span-19-386"><a id="__codelineno-19-386" name="__codelineno-19-386" href="#__codelineno-19-386"></a><span class="w">    </span><span class="p">.</span><span class="nc">grid--3</span><span class="o">,</span>
</span><span id="__span-19-387"><a id="__codelineno-19-387" name="__codelineno-19-387" href="#__codelineno-19-387"></a><span class="w">    </span><span class="p">.</span><span class="nc">grid--4</span><span class="o">,</span>
</span><span id="__span-19-388"><a id="__codelineno-19-388" name="__codelineno-19-388" href="#__codelineno-19-388"></a><span class="w">    </span><span class="p">.</span><span class="nc">grid--5</span><span class="o">,</span>
</span><span id="__span-19-389"><a id="__codelineno-19-389" name="__codelineno-19-389" href="#__codelineno-19-389"></a><span class="w">    </span><span class="p">.</span><span class="nc">grid--6</span><span class="o">,</span>
</span><span id="__span-19-390"><a id="__codelineno-19-390" name="__codelineno-19-390" href="#__codelineno-19-390"></a><span class="w">    </span><span class="p">.</span><span class="nc">grid--12</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-19-391"><a id="__codelineno-19-391" name="__codelineno-19-391" href="#__codelineno-19-391"></a><span class="w">        </span><span class="k">grid-template-columns</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="n">fr</span><span class="p">;</span>
</span><span id="__span-19-392"><a id="__codelineno-19-392" name="__codelineno-19-392" href="#__codelineno-19-392"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-19-393"><a id="__codelineno-19-393" name="__codelineno-19-393" href="#__codelineno-19-393"></a><span class="p">}</span>
</span><span id="__span-19-394"><a id="__codelineno-19-394" name="__codelineno-19-394" href="#__codelineno-19-394"></a>
</span><span id="__span-19-395"><a id="__codelineno-19-395" name="__codelineno-19-395" href="#__codelineno-19-395"></a><span class="p">@</span><span class="k">media</span><span class="w"> </span><span class="o">(</span><span class="nt">min-width</span><span class="o">:</span><span class="w"> </span><span class="nt">769px</span><span class="o">)</span><span class="w"> </span><span class="nt">and</span><span class="w"> </span><span class="o">(</span><span class="nt">max-width</span><span class="o">:</span><span class="w"> </span><span class="nt">1024px</span><span class="o">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-19-396"><a id="__codelineno-19-396" name="__codelineno-19-396" href="#__codelineno-19-396"></a><span class="w">    </span><span class="p">.</span><span class="nc">grid--3</span><span class="o">,</span>
</span><span id="__span-19-397"><a id="__codelineno-19-397" name="__codelineno-19-397" href="#__codelineno-19-397"></a><span class="w">    </span><span class="p">.</span><span class="nc">grid--4</span><span class="o">,</span>
</span><span id="__span-19-398"><a id="__codelineno-19-398" name="__codelineno-19-398" href="#__codelineno-19-398"></a><span class="w">    </span><span class="p">.</span><span class="nc">grid--5</span><span class="o">,</span>
</span><span id="__span-19-399"><a id="__codelineno-19-399" name="__codelineno-19-399" href="#__codelineno-19-399"></a><span class="w">    </span><span class="p">.</span><span class="nc">grid--6</span><span class="o">,</span>
</span><span id="__span-19-400"><a id="__codelineno-19-400" name="__codelineno-19-400" href="#__codelineno-19-400"></a><span class="w">    </span><span class="p">.</span><span class="nc">grid--12</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-19-401"><a id="__codelineno-19-401" name="__codelineno-19-401" href="#__codelineno-19-401"></a><span class="w">        </span><span class="k">grid-template-columns</span><span class="p">:</span><span class="w"> </span><span class="nf">repeat</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="n">fr</span><span class="p">);</span>
</span><span id="__span-19-402"><a id="__codelineno-19-402" name="__codelineno-19-402" href="#__codelineno-19-402"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-19-403"><a id="__codelineno-19-403" name="__codelineno-19-403" href="#__codelineno-19-403"></a><span class="p">}</span>
</span><span id="__span-19-404"><a id="__codelineno-19-404" name="__codelineno-19-404" href="#__codelineno-19-404"></a>
</span><span id="__span-19-405"><a id="__codelineno-19-405" name="__codelineno-19-405" href="#__codelineno-19-405"></a><span class="c">/* Flexbox Utilities */</span>
</span><span id="__span-19-406"><a id="__codelineno-19-406" name="__codelineno-19-406" href="#__codelineno-19-406"></a><span class="p">.</span><span class="nc">flex</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">display</span><span class="p">:</span><span class="w"> </span><span class="kc">flex</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-19-407"><a id="__codelineno-19-407" name="__codelineno-19-407" href="#__codelineno-19-407"></a><span class="p">.</span><span class="nc">flex-col</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">flex-direction</span><span class="p">:</span><span class="w"> </span><span class="kc">column</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-19-408"><a id="__codelineno-19-408" name="__codelineno-19-408" href="#__codelineno-19-408"></a><span class="p">.</span><span class="nc">flex-wrap</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">flex-wrap</span><span class="p">:</span><span class="w"> </span><span class="kc">wrap</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-19-409"><a id="__codelineno-19-409" name="__codelineno-19-409" href="#__codelineno-19-409"></a><span class="p">.</span><span class="nc">items-center</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">align-items</span><span class="p">:</span><span class="w"> </span><span class="kc">center</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-19-410"><a id="__codelineno-19-410" name="__codelineno-19-410" href="#__codelineno-19-410"></a><span class="p">.</span><span class="nc">items-start</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">align-items</span><span class="p">:</span><span class="w"> </span><span class="kc">flex-start</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-19-411"><a id="__codelineno-19-411" name="__codelineno-19-411" href="#__codelineno-19-411"></a><span class="p">.</span><span class="nc">items-end</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">align-items</span><span class="p">:</span><span class="w"> </span><span class="kc">flex-end</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-19-412"><a id="__codelineno-19-412" name="__codelineno-19-412" href="#__codelineno-19-412"></a><span class="p">.</span><span class="nc">justify-center</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">justify-content</span><span class="p">:</span><span class="w"> </span><span class="kc">center</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-19-413"><a id="__codelineno-19-413" name="__codelineno-19-413" href="#__codelineno-19-413"></a><span class="p">.</span><span class="nc">justify-between</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">justify-content</span><span class="p">:</span><span class="w"> </span><span class="kc">space-between</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-19-414"><a id="__codelineno-19-414" name="__codelineno-19-414" href="#__codelineno-19-414"></a><span class="p">.</span><span class="nc">justify-end</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">justify-content</span><span class="p">:</span><span class="w"> </span><span class="kc">flex-end</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-19-415"><a id="__codelineno-19-415" name="__codelineno-19-415" href="#__codelineno-19-415"></a>
</span><span id="__span-19-416"><a id="__codelineno-19-416" name="__codelineno-19-416" href="#__codelineno-19-416"></a><span class="c">/* ===================================</span>
</span><span id="__span-19-417"><a id="__codelineno-19-417" name="__codelineno-19-417" href="#__codelineno-19-417"></a><span class="c">   5. RESPONSIVE DESIGN</span>
</span><span id="__span-19-418"><a id="__codelineno-19-418" name="__codelineno-19-418" href="#__codelineno-19-418"></a><span class="c">   ================================== */</span>
</span><span id="__span-19-419"><a id="__codelineno-19-419" name="__codelineno-19-419" href="#__codelineno-19-419"></a>
</span><span id="__span-19-420"><a id="__codelineno-19-420" name="__codelineno-19-420" href="#__codelineno-19-420"></a><span class="c">/* Mobile First Approach */</span>
</span><span id="__span-19-421"><a id="__codelineno-19-421" name="__codelineno-19-421" href="#__codelineno-19-421"></a><span class="p">@</span><span class="k">media</span><span class="w"> </span><span class="o">(</span><span class="nt">min-width</span><span class="o">:</span><span class="w"> </span><span class="nt">640px</span><span class="o">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-19-422"><a id="__codelineno-19-422" name="__codelineno-19-422" href="#__codelineno-19-422"></a><span class="w">    </span><span class="p">.</span><span class="nc">sm</span><span class="err">\</span><span class="p">:</span><span class="nd">text-sm</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">font-size</span><span class="p">:</span><span class="w"> </span><span class="nf">var</span><span class="p">(</span><span class="nv">--font-size-sm</span><span class="p">);</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-19-423"><a id="__codelineno-19-423" name="__codelineno-19-423" href="#__codelineno-19-423"></a><span class="w">    </span><span class="p">.</span><span class="nc">sm</span><span class="err">\</span><span class="p">:</span><span class="nd">text-base</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">font-size</span><span class="p">:</span><span class="w"> </span><span class="nf">var</span><span class="p">(</span><span class="nv">--font-size-base</span><span class="p">);</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-19-424"><a id="__codelineno-19-424" name="__codelineno-19-424" href="#__codelineno-19-424"></a><span class="w">    </span><span class="p">.</span><span class="nc">sm</span><span class="err">\</span><span class="p">:</span><span class="nd">text-lg</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">font-size</span><span class="p">:</span><span class="w"> </span><span class="nf">var</span><span class="p">(</span><span class="nv">--font-size-lg</span><span class="p">);</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-19-425"><a id="__codelineno-19-425" name="__codelineno-19-425" href="#__codelineno-19-425"></a><span class="p">}</span>
</span><span id="__span-19-426"><a id="__codelineno-19-426" name="__codelineno-19-426" href="#__codelineno-19-426"></a>
</span><span id="__span-19-427"><a id="__codelineno-19-427" name="__codelineno-19-427" href="#__codelineno-19-427"></a><span class="p">@</span><span class="k">media</span><span class="w"> </span><span class="o">(</span><span class="nt">min-width</span><span class="o">:</span><span class="w"> </span><span class="nt">768px</span><span class="o">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-19-428"><a id="__codelineno-19-428" name="__codelineno-19-428" href="#__codelineno-19-428"></a><span class="w">    </span><span class="p">.</span><span class="nc">md</span><span class="err">\</span><span class="p">:</span><span class="nd">text-sm</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">font-size</span><span class="p">:</span><span class="w"> </span><span class="nf">var</span><span class="p">(</span><span class="nv">--font-size-sm</span><span class="p">);</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-19-429"><a id="__codelineno-19-429" name="__codelineno-19-429" href="#__codelineno-19-429"></a><span class="w">    </span><span class="p">.</span><span class="nc">md</span><span class="err">\</span><span class="p">:</span><span class="nd">text-base</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">font-size</span><span class="p">:</span><span class="w"> </span><span class="nf">var</span><span class="p">(</span><span class="nv">--font-size-base</span><span class="p">);</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-19-430"><a id="__codelineno-19-430" name="__codelineno-19-430" href="#__codelineno-19-430"></a><span class="w">    </span><span class="p">.</span><span class="nc">md</span><span class="err">\</span><span class="p">:</span><span class="nd">text-lg</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">font-size</span><span class="p">:</span><span class="w"> </span><span class="nf">var</span><span class="p">(</span><span class="nv">--font-size-lg</span><span class="p">);</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-19-431"><a id="__codelineno-19-431" name="__codelineno-19-431" href="#__codelineno-19-431"></a><span class="w">    </span><span class="p">.</span><span class="nc">md</span><span class="err">\</span><span class="p">:</span><span class="nd">text-xl</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">font-size</span><span class="p">:</span><span class="w"> </span><span class="nf">var</span><span class="p">(</span><span class="nv">--font-size-xl</span><span class="p">);</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-19-432"><a id="__codelineno-19-432" name="__codelineno-19-432" href="#__codelineno-19-432"></a><span class="p">}</span>
</span><span id="__span-19-433"><a id="__codelineno-19-433" name="__codelineno-19-433" href="#__codelineno-19-433"></a>
</span><span id="__span-19-434"><a id="__codelineno-19-434" name="__codelineno-19-434" href="#__codelineno-19-434"></a><span class="p">@</span><span class="k">media</span><span class="w"> </span><span class="o">(</span><span class="nt">min-width</span><span class="o">:</span><span class="w"> </span><span class="nt">1024px</span><span class="o">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-19-435"><a id="__codelineno-19-435" name="__codelineno-19-435" href="#__codelineno-19-435"></a><span class="w">    </span><span class="p">.</span><span class="nc">lg</span><span class="err">\</span><span class="p">:</span><span class="nd">text-base</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">font-size</span><span class="p">:</span><span class="w"> </span><span class="nf">var</span><span class="p">(</span><span class="nv">--font-size-base</span><span class="p">);</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-19-436"><a id="__codelineno-19-436" name="__codelineno-19-436" href="#__codelineno-19-436"></a><span class="w">    </span><span class="p">.</span><span class="nc">lg</span><span class="err">\</span><span class="p">:</span><span class="nd">text-lg</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">font-size</span><span class="p">:</span><span class="w"> </span><span class="nf">var</span><span class="p">(</span><span class="nv">--font-size-lg</span><span class="p">);</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-19-437"><a id="__codelineno-19-437" name="__codelineno-19-437" href="#__codelineno-19-437"></a><span class="w">    </span><span class="p">.</span><span class="nc">lg</span><span class="err">\</span><span class="p">:</span><span class="nd">text-xl</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">font-size</span><span class="p">:</span><span class="w"> </span><span class="nf">var</span><span class="p">(</span><span class="nv">--font-size-xl</span><span class="p">);</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-19-438"><a id="__codelineno-19-438" name="__codelineno-19-438" href="#__codelineno-19-438"></a><span class="w">    </span><span class="p">.</span><span class="nc">lg</span><span class="err">\</span><span class="p">:</span><span class="nd">text-2xl</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">font-size</span><span class="p">:</span><span class="w"> </span><span class="nf">var</span><span class="p">(</span><span class="nv">--font-size-</span><span class="mi">2</span><span class="n">xl</span><span class="p">);</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-19-439"><a id="__codelineno-19-439" name="__codelineno-19-439" href="#__codelineno-19-439"></a><span class="p">}</span>
</span><span id="__span-19-440"><a id="__codelineno-19-440" name="__codelineno-19-440" href="#__codelineno-19-440"></a>
</span><span id="__span-19-441"><a id="__codelineno-19-441" name="__codelineno-19-441" href="#__codelineno-19-441"></a><span class="c">/* ===================================</span>
</span><span id="__span-19-442"><a id="__codelineno-19-442" name="__codelineno-19-442" href="#__codelineno-19-442"></a><span class="c">   6. DARK MODE SUPPORT</span>
</span><span id="__span-19-443"><a id="__codelineno-19-443" name="__codelineno-19-443" href="#__codelineno-19-443"></a><span class="c">   ================================== */</span>
</span><span id="__span-19-444"><a id="__codelineno-19-444" name="__codelineno-19-444" href="#__codelineno-19-444"></a>
</span><span id="__span-19-445"><a id="__codelineno-19-445" name="__codelineno-19-445" href="#__codelineno-19-445"></a><span class="p">@</span><span class="k">media</span><span class="w"> </span><span class="o">(</span><span class="nt">prefers-color-scheme</span><span class="o">:</span><span class="w"> </span><span class="nt">dark</span><span class="o">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-19-446"><a id="__codelineno-19-446" name="__codelineno-19-446" href="#__codelineno-19-446"></a><span class="w">    </span><span class="p">:</span><span class="nd">root</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-19-447"><a id="__codelineno-19-447" name="__codelineno-19-447" href="#__codelineno-19-447"></a><span class="w">        </span><span class="nv">--color-neutral-0</span><span class="p">:</span><span class="w"> </span><span class="nb">hsl</span><span class="p">(</span><span class="mi">221</span><span class="w"> </span><span class="mi">39</span><span class="kt">%</span><span class="w"> </span><span class="mi">11</span><span class="kt">%</span><span class="p">);</span>
</span><span id="__span-19-448"><a id="__codelineno-19-448" name="__codelineno-19-448" href="#__codelineno-19-448"></a><span class="w">        </span><span class="nv">--color-neutral-50</span><span class="p">:</span><span class="w"> </span><span class="nb">hsl</span><span class="p">(</span><span class="mi">215</span><span class="w"> </span><span class="mi">28</span><span class="kt">%</span><span class="w"> </span><span class="mi">17</span><span class="kt">%</span><span class="p">);</span>
</span><span id="__span-19-449"><a id="__codelineno-19-449" name="__codelineno-19-449" href="#__codelineno-19-449"></a><span class="w">        </span><span class="nv">--color-neutral-100</span><span class="p">:</span><span class="w"> </span><span class="nb">hsl</span><span class="p">(</span><span class="mi">217</span><span class="w"> </span><span class="mi">19</span><span class="kt">%</span><span class="w"> </span><span class="mi">27</span><span class="kt">%</span><span class="p">);</span>
</span><span id="__span-19-450"><a id="__codelineno-19-450" name="__codelineno-19-450" href="#__codelineno-19-450"></a><span class="w">        </span><span class="nv">--color-neutral-200</span><span class="p">:</span><span class="w"> </span><span class="nb">hsl</span><span class="p">(</span><span class="mi">215</span><span class="w"> </span><span class="mi">14</span><span class="kt">%</span><span class="w"> </span><span class="mi">34</span><span class="kt">%</span><span class="p">);</span>
</span><span id="__span-19-451"><a id="__codelineno-19-451" name="__codelineno-19-451" href="#__codelineno-19-451"></a><span class="w">        </span><span class="nv">--color-neutral-300</span><span class="p">:</span><span class="w"> </span><span class="nb">hsl</span><span class="p">(</span><span class="mi">220</span><span class="w"> </span><span class="mi">9</span><span class="kt">%</span><span class="w"> </span><span class="mi">46</span><span class="kt">%</span><span class="p">);</span>
</span><span id="__span-19-452"><a id="__codelineno-19-452" name="__codelineno-19-452" href="#__codelineno-19-452"></a><span class="w">        </span><span class="nv">--color-neutral-400</span><span class="p">:</span><span class="w"> </span><span class="nb">hsl</span><span class="p">(</span><span class="mi">218</span><span class="w"> </span><span class="mi">11</span><span class="kt">%</span><span class="w"> </span><span class="mi">65</span><span class="kt">%</span><span class="p">);</span>
</span><span id="__span-19-453"><a id="__codelineno-19-453" name="__codelineno-19-453" href="#__codelineno-19-453"></a><span class="w">        </span><span class="nv">--color-neutral-500</span><span class="p">:</span><span class="w"> </span><span class="nb">hsl</span><span class="p">(</span><span class="mi">216</span><span class="w"> </span><span class="mi">12</span><span class="kt">%</span><span class="w"> </span><span class="mi">84</span><span class="kt">%</span><span class="p">);</span>
</span><span id="__span-19-454"><a id="__codelineno-19-454" name="__codelineno-19-454" href="#__codelineno-19-454"></a><span class="w">        </span><span class="nv">--color-neutral-600</span><span class="p">:</span><span class="w"> </span><span class="nb">hsl</span><span class="p">(</span><span class="mi">220</span><span class="w"> </span><span class="mi">13</span><span class="kt">%</span><span class="w"> </span><span class="mi">91</span><span class="kt">%</span><span class="p">);</span>
</span><span id="__span-19-455"><a id="__codelineno-19-455" name="__codelineno-19-455" href="#__codelineno-19-455"></a><span class="w">        </span><span class="nv">--color-neutral-700</span><span class="p">:</span><span class="w"> </span><span class="nb">hsl</span><span class="p">(</span><span class="mi">220</span><span class="w"> </span><span class="mi">14</span><span class="kt">%</span><span class="w"> </span><span class="mi">96</span><span class="kt">%</span><span class="p">);</span>
</span><span id="__span-19-456"><a id="__codelineno-19-456" name="__codelineno-19-456" href="#__codelineno-19-456"></a><span class="w">        </span><span class="nv">--color-neutral-800</span><span class="p">:</span><span class="w"> </span><span class="nb">hsl</span><span class="p">(</span><span class="mi">210</span><span class="w"> </span><span class="mi">20</span><span class="kt">%</span><span class="w"> </span><span class="mi">98</span><span class="kt">%</span><span class="p">);</span>
</span><span id="__span-19-457"><a id="__codelineno-19-457" name="__codelineno-19-457" href="#__codelineno-19-457"></a><span class="w">        </span><span class="nv">--color-neutral-900</span><span class="p">:</span><span class="w"> </span><span class="nb">hsl</span><span class="p">(</span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="kt">%</span><span class="w"> </span><span class="mi">100</span><span class="kt">%</span><span class="p">);</span>
</span><span id="__span-19-458"><a id="__codelineno-19-458" name="__codelineno-19-458" href="#__codelineno-19-458"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-19-459"><a id="__codelineno-19-459" name="__codelineno-19-459" href="#__codelineno-19-459"></a><span class="p">}</span>
</span><span id="__span-19-460"><a id="__codelineno-19-460" name="__codelineno-19-460" href="#__codelineno-19-460"></a>
</span><span id="__span-19-461"><a id="__codelineno-19-461" name="__codelineno-19-461" href="#__codelineno-19-461"></a><span class="c">/* ===================================</span>
</span><span id="__span-19-462"><a id="__codelineno-19-462" name="__codelineno-19-462" href="#__codelineno-19-462"></a><span class="c">   7. ACCESSIBILITY ENHANCEMENTS</span>
</span><span id="__span-19-463"><a id="__codelineno-19-463" name="__codelineno-19-463" href="#__codelineno-19-463"></a><span class="c">   ================================== */</span>
</span><span id="__span-19-464"><a id="__codelineno-19-464" name="__codelineno-19-464" href="#__codelineno-19-464"></a>
</span><span id="__span-19-465"><a id="__codelineno-19-465" name="__codelineno-19-465" href="#__codelineno-19-465"></a><span class="c">/* High contrast mode support */</span>
</span><span id="__span-19-466"><a id="__codelineno-19-466" name="__codelineno-19-466" href="#__codelineno-19-466"></a><span class="p">@</span><span class="k">media</span><span class="w"> </span><span class="o">(</span><span class="nt">prefers-contrast</span><span class="o">:</span><span class="w"> </span><span class="nt">high</span><span class="o">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-19-467"><a id="__codelineno-19-467" name="__codelineno-19-467" href="#__codelineno-19-467"></a><span class="w">    </span><span class="p">.</span><span class="nc">btn</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-19-468"><a id="__codelineno-19-468" name="__codelineno-19-468" href="#__codelineno-19-468"></a><span class="w">        </span><span class="k">border-width</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="kt">px</span><span class="p">;</span>
</span><span id="__span-19-469"><a id="__codelineno-19-469" name="__codelineno-19-469" href="#__codelineno-19-469"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-19-470"><a id="__codelineno-19-470" name="__codelineno-19-470" href="#__codelineno-19-470"></a>
</span><span id="__span-19-471"><a id="__codelineno-19-471" name="__codelineno-19-471" href="#__codelineno-19-471"></a><span class="w">    </span><span class="p">.</span><span class="nc">form-input</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-19-472"><a id="__codelineno-19-472" name="__codelineno-19-472" href="#__codelineno-19-472"></a><span class="w">        </span><span class="k">border-width</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="kt">px</span><span class="p">;</span>
</span><span id="__span-19-473"><a id="__codelineno-19-473" name="__codelineno-19-473" href="#__codelineno-19-473"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-19-474"><a id="__codelineno-19-474" name="__codelineno-19-474" href="#__codelineno-19-474"></a>
</span><span id="__span-19-475"><a id="__codelineno-19-475" name="__codelineno-19-475" href="#__codelineno-19-475"></a><span class="w">    </span><span class="p">.</span><span class="nc">card</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-19-476"><a id="__codelineno-19-476" name="__codelineno-19-476" href="#__codelineno-19-476"></a><span class="w">        </span><span class="k">border-width</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="kt">px</span><span class="p">;</span>
</span><span id="__span-19-477"><a id="__codelineno-19-477" name="__codelineno-19-477" href="#__codelineno-19-477"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-19-478"><a id="__codelineno-19-478" name="__codelineno-19-478" href="#__codelineno-19-478"></a><span class="p">}</span>
</span><span id="__span-19-479"><a id="__codelineno-19-479" name="__codelineno-19-479" href="#__codelineno-19-479"></a>
</span><span id="__span-19-480"><a id="__codelineno-19-480" name="__codelineno-19-480" href="#__codelineno-19-480"></a><span class="c">/* Reduced motion support */</span>
</span><span id="__span-19-481"><a id="__codelineno-19-481" name="__codelineno-19-481" href="#__codelineno-19-481"></a><span class="p">@</span><span class="k">media</span><span class="w"> </span><span class="o">(</span><span class="nt">prefers-reduced-motion</span><span class="o">:</span><span class="w"> </span><span class="nt">reduce</span><span class="o">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-19-482"><a id="__codelineno-19-482" name="__codelineno-19-482" href="#__codelineno-19-482"></a><span class="w">    </span><span class="o">*,</span>
</span><span id="__span-19-483"><a id="__codelineno-19-483" name="__codelineno-19-483" href="#__codelineno-19-483"></a><span class="w">    </span><span class="o">*</span><span class="p">::</span><span class="nd">before</span><span class="o">,</span>
</span><span id="__span-19-484"><a id="__codelineno-19-484" name="__codelineno-19-484" href="#__codelineno-19-484"></a><span class="w">    </span><span class="o">*</span><span class="p">::</span><span class="nd">after</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-19-485"><a id="__codelineno-19-485" name="__codelineno-19-485" href="#__codelineno-19-485"></a><span class="w">        </span><span class="k">animation-duration</span><span class="p">:</span><span class="w"> </span><span class="mf">0.01</span><span class="kt">ms</span><span class="w"> </span><span class="cp">!important</span><span class="p">;</span>
</span><span id="__span-19-486"><a id="__codelineno-19-486" name="__codelineno-19-486" href="#__codelineno-19-486"></a><span class="w">        </span><span class="k">animation-iteration-count</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="cp">!important</span><span class="p">;</span>
</span><span id="__span-19-487"><a id="__codelineno-19-487" name="__codelineno-19-487" href="#__codelineno-19-487"></a><span class="w">        </span><span class="k">transition-duration</span><span class="p">:</span><span class="w"> </span><span class="mf">0.01</span><span class="kt">ms</span><span class="w"> </span><span class="cp">!important</span><span class="p">;</span>
</span><span id="__span-19-488"><a id="__codelineno-19-488" name="__codelineno-19-488" href="#__codelineno-19-488"></a><span class="w">        </span><span class="k">scroll-behavior</span><span class="p">:</span><span class="w"> </span><span class="kc">auto</span><span class="w"> </span><span class="cp">!important</span><span class="p">;</span>
</span><span id="__span-19-489"><a id="__codelineno-19-489" name="__codelineno-19-489" href="#__codelineno-19-489"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-19-490"><a id="__codelineno-19-490" name="__codelineno-19-490" href="#__codelineno-19-490"></a><span class="p">}</span>
</span><span id="__span-19-491"><a id="__codelineno-19-491" name="__codelineno-19-491" href="#__codelineno-19-491"></a>
</span><span id="__span-19-492"><a id="__codelineno-19-492" name="__codelineno-19-492" href="#__codelineno-19-492"></a><span class="c">/* Focus visible for keyboard users */</span>
</span><span id="__span-19-493"><a id="__codelineno-19-493" name="__codelineno-19-493" href="#__codelineno-19-493"></a><span class="p">.</span><span class="nc">btn</span><span class="p">:</span><span class="nd">focus-visible</span><span class="o">,</span>
</span><span id="__span-19-494"><a id="__codelineno-19-494" name="__codelineno-19-494" href="#__codelineno-19-494"></a><span class="p">.</span><span class="nc">form-input</span><span class="p">:</span><span class="nd">focus-visible</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-19-495"><a id="__codelineno-19-495" name="__codelineno-19-495" href="#__codelineno-19-495"></a><span class="w">    </span><span class="k">outline</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="kt">px</span><span class="w"> </span><span class="kc">solid</span><span class="w"> </span><span class="nf">var</span><span class="p">(</span><span class="nv">--color-primary-</span><span class="mi">500</span><span class="p">);</span>
</span><span id="__span-19-496"><a id="__codelineno-19-496" name="__codelineno-19-496" href="#__codelineno-19-496"></a><span class="w">    </span><span class="k">outline-offset</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="kt">px</span><span class="p">;</span>
</span><span id="__span-19-497"><a id="__codelineno-19-497" name="__codelineno-19-497" href="#__codelineno-19-497"></a><span class="p">}</span>
</span><span id="__span-19-498"><a id="__codelineno-19-498" name="__codelineno-19-498" href="#__codelineno-19-498"></a>
</span><span id="__span-19-499"><a id="__codelineno-19-499" name="__codelineno-19-499" href="#__codelineno-19-499"></a><span class="c">/* Screen reader only content */</span>
</span><span id="__span-19-500"><a id="__codelineno-19-500" name="__codelineno-19-500" href="#__codelineno-19-500"></a><span class="p">.</span><span class="nc">sr-only</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-19-501"><a id="__codelineno-19-501" name="__codelineno-19-501" href="#__codelineno-19-501"></a><span class="w">    </span><span class="k">position</span><span class="p">:</span><span class="w"> </span><span class="kc">absolute</span><span class="p">;</span>
</span><span id="__span-19-502"><a id="__codelineno-19-502" name="__codelineno-19-502" href="#__codelineno-19-502"></a><span class="w">    </span><span class="k">width</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="kt">px</span><span class="p">;</span>
</span><span id="__span-19-503"><a id="__codelineno-19-503" name="__codelineno-19-503" href="#__codelineno-19-503"></a><span class="w">    </span><span class="k">height</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="kt">px</span><span class="p">;</span>
</span><span id="__span-19-504"><a id="__codelineno-19-504" name="__codelineno-19-504" href="#__codelineno-19-504"></a><span class="w">    </span><span class="k">padding</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
</span><span id="__span-19-505"><a id="__codelineno-19-505" name="__codelineno-19-505" href="#__codelineno-19-505"></a><span class="w">    </span><span class="k">margin</span><span class="p">:</span><span class="w"> </span><span class="mi">-1</span><span class="kt">px</span><span class="p">;</span>
</span><span id="__span-19-506"><a id="__codelineno-19-506" name="__codelineno-19-506" href="#__codelineno-19-506"></a><span class="w">    </span><span class="k">overflow</span><span class="p">:</span><span class="w"> </span><span class="kc">hidden</span><span class="p">;</span>
</span><span id="__span-19-507"><a id="__codelineno-19-507" name="__codelineno-19-507" href="#__codelineno-19-507"></a><span class="w">    </span><span class="k">clip</span><span class="p">:</span><span class="w"> </span><span class="nb">rect</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span>
</span><span id="__span-19-508"><a id="__codelineno-19-508" name="__codelineno-19-508" href="#__codelineno-19-508"></a><span class="w">    </span><span class="k">white-space</span><span class="p">:</span><span class="w"> </span><span class="kc">nowrap</span><span class="p">;</span>
</span><span id="__span-19-509"><a id="__codelineno-19-509" name="__codelineno-19-509" href="#__codelineno-19-509"></a><span class="w">    </span><span class="k">border</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
</span><span id="__span-19-510"><a id="__codelineno-19-510" name="__codelineno-19-510" href="#__codelineno-19-510"></a><span class="p">}</span>
</span><span id="__span-19-511"><a id="__codelineno-19-511" name="__codelineno-19-511" href="#__codelineno-19-511"></a>
</span><span id="__span-19-512"><a id="__codelineno-19-512" name="__codelineno-19-512" href="#__codelineno-19-512"></a><span class="c">/* ===================================</span>
</span><span id="__span-19-513"><a id="__codelineno-19-513" name="__codelineno-19-513" href="#__codelineno-19-513"></a><span class="c">   8. PRINT STYLES</span>
</span><span id="__span-19-514"><a id="__codelineno-19-514" name="__codelineno-19-514" href="#__codelineno-19-514"></a><span class="c">   ================================== */</span>
</span><span id="__span-19-515"><a id="__codelineno-19-515" name="__codelineno-19-515" href="#__codelineno-19-515"></a>
</span><span id="__span-19-516"><a id="__codelineno-19-516" name="__codelineno-19-516" href="#__codelineno-19-516"></a><span class="p">@</span><span class="k">media</span><span class="w"> </span><span class="nt">print</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-19-517"><a id="__codelineno-19-517" name="__codelineno-19-517" href="#__codelineno-19-517"></a><span class="w">    </span><span class="o">*,</span>
</span><span id="__span-19-518"><a id="__codelineno-19-518" name="__codelineno-19-518" href="#__codelineno-19-518"></a><span class="w">    </span><span class="o">*</span><span class="p">::</span><span class="nd">before</span><span class="o">,</span>
</span><span id="__span-19-519"><a id="__codelineno-19-519" name="__codelineno-19-519" href="#__codelineno-19-519"></a><span class="w">    </span><span class="o">*</span><span class="p">::</span><span class="nd">after</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-19-520"><a id="__codelineno-19-520" name="__codelineno-19-520" href="#__codelineno-19-520"></a><span class="w">        </span><span class="k">background</span><span class="p">:</span><span class="w"> </span><span class="kc">transparent</span><span class="w"> </span><span class="cp">!important</span><span class="p">;</span>
</span><span id="__span-19-521"><a id="__codelineno-19-521" name="__codelineno-19-521" href="#__codelineno-19-521"></a><span class="w">        </span><span class="k">color</span><span class="p">:</span><span class="w"> </span><span class="kc">black</span><span class="w"> </span><span class="cp">!important</span><span class="p">;</span>
</span><span id="__span-19-522"><a id="__codelineno-19-522" name="__codelineno-19-522" href="#__codelineno-19-522"></a><span class="w">        </span><span class="k">box-shadow</span><span class="p">:</span><span class="w"> </span><span class="kc">none</span><span class="w"> </span><span class="cp">!important</span><span class="p">;</span>
</span><span id="__span-19-523"><a id="__codelineno-19-523" name="__codelineno-19-523" href="#__codelineno-19-523"></a><span class="w">        </span><span class="k">text-shadow</span><span class="p">:</span><span class="w"> </span><span class="kc">none</span><span class="w"> </span><span class="cp">!important</span><span class="p">;</span>
</span><span id="__span-19-524"><a id="__codelineno-19-524" name="__codelineno-19-524" href="#__codelineno-19-524"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-19-525"><a id="__codelineno-19-525" name="__codelineno-19-525" href="#__codelineno-19-525"></a>
</span><span id="__span-19-526"><a id="__codelineno-19-526" name="__codelineno-19-526" href="#__codelineno-19-526"></a><span class="w">    </span><span class="nt">a</span><span class="o">,</span>
</span><span id="__span-19-527"><a id="__codelineno-19-527" name="__codelineno-19-527" href="#__codelineno-19-527"></a><span class="w">    </span><span class="nt">a</span><span class="p">:</span><span class="nd">visited</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-19-528"><a id="__codelineno-19-528" name="__codelineno-19-528" href="#__codelineno-19-528"></a><span class="w">        </span><span class="k">text-decoration</span><span class="p">:</span><span class="w"> </span><span class="kc">underline</span><span class="p">;</span>
</span><span id="__span-19-529"><a id="__codelineno-19-529" name="__codelineno-19-529" href="#__codelineno-19-529"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-19-530"><a id="__codelineno-19-530" name="__codelineno-19-530" href="#__codelineno-19-530"></a>
</span><span id="__span-19-531"><a id="__codelineno-19-531" name="__codelineno-19-531" href="#__codelineno-19-531"></a><span class="w">    </span><span class="nt">a</span><span class="o">[</span><span class="nt">href</span><span class="o">]</span><span class="p">::</span><span class="nd">after</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-19-532"><a id="__codelineno-19-532" name="__codelineno-19-532" href="#__codelineno-19-532"></a><span class="w">        </span><span class="k">content</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot; (&quot;</span><span class="w"> </span><span class="nb">attr</span><span class="p">(</span><span class="n">href</span><span class="p">)</span><span class="w"> </span><span class="s2">&quot;)&quot;</span><span class="p">;</span>
</span><span id="__span-19-533"><a id="__codelineno-19-533" name="__codelineno-19-533" href="#__codelineno-19-533"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-19-534"><a id="__codelineno-19-534" name="__codelineno-19-534" href="#__codelineno-19-534"></a>
</span><span id="__span-19-535"><a id="__codelineno-19-535" name="__codelineno-19-535" href="#__codelineno-19-535"></a><span class="w">    </span><span class="p">.</span><span class="nc">btn</span><span class="o">,</span>
</span><span id="__span-19-536"><a id="__codelineno-19-536" name="__codelineno-19-536" href="#__codelineno-19-536"></a><span class="w">    </span><span class="p">.</span><span class="nc">no-print</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-19-537"><a id="__codelineno-19-537" name="__codelineno-19-537" href="#__codelineno-19-537"></a><span class="w">        </span><span class="k">display</span><span class="p">:</span><span class="w"> </span><span class="kc">none</span><span class="w"> </span><span class="cp">!important</span><span class="p">;</span>
</span><span id="__span-19-538"><a id="__codelineno-19-538" name="__codelineno-19-538" href="#__codelineno-19-538"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-19-539"><a id="__codelineno-19-539" name="__codelineno-19-539" href="#__codelineno-19-539"></a>
</span><span id="__span-19-540"><a id="__codelineno-19-540" name="__codelineno-19-540" href="#__codelineno-19-540"></a><span class="w">    </span><span class="p">.</span><span class="nc">card</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-19-541"><a id="__codelineno-19-541" name="__codelineno-19-541" href="#__codelineno-19-541"></a><span class="w">        </span><span class="k">border</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="kt">px</span><span class="w"> </span><span class="kc">solid</span><span class="w"> </span><span class="kc">black</span><span class="p">;</span>
</span><span id="__span-19-542"><a id="__codelineno-19-542" name="__codelineno-19-542" href="#__codelineno-19-542"></a><span class="w">        </span><span class="k">break-inside</span><span class="p">:</span><span class="w"> </span><span class="kc">avoid</span><span class="p">;</span>
</span><span id="__span-19-543"><a id="__codelineno-19-543" name="__codelineno-19-543" href="#__codelineno-19-543"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-19-544"><a id="__codelineno-19-544" name="__codelineno-19-544" href="#__codelineno-19-544"></a><span class="p">}</span>
</span></code></pre></div>
</details>
<details class="example">
<summary><strong>ğŸ–Œï¸ SCSS implementation example</strong></summary>
<div class="language-scss highlight"><pre><span></span><code><span id="__span-20-1"><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a><span class="c1">// Advanced SCSS Features for Maintainable CSS</span>
</span><span id="__span-20-2"><a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a>
</span><span id="__span-20-3"><a id="__codelineno-20-3" name="__codelineno-20-3" href="#__codelineno-20-3"></a><span class="c1">// === VARIABLES ===</span>
</span><span id="__span-20-4"><a id="__codelineno-20-4" name="__codelineno-20-4" href="#__codelineno-20-4"></a><span class="nv">$primary-colors</span><span class="o">:</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-20-5"><a id="__codelineno-20-5" name="__codelineno-20-5" href="#__codelineno-20-5"></a><span class="w">    </span><span class="mi">50</span><span class="o">:</span><span class="w"> </span><span class="mh">#f0f9ff</span><span class="o">,</span>
</span><span id="__span-20-6"><a id="__codelineno-20-6" name="__codelineno-20-6" href="#__codelineno-20-6"></a><span class="w">    </span><span class="mi">100</span><span class="o">:</span><span class="w"> </span><span class="mh">#e0f2fe</span><span class="o">,</span>
</span><span id="__span-20-7"><a id="__codelineno-20-7" name="__codelineno-20-7" href="#__codelineno-20-7"></a><span class="w">    </span><span class="mi">500</span><span class="o">:</span><span class="w"> </span><span class="mh">#0ea5e9</span><span class="o">,</span>
</span><span id="__span-20-8"><a id="__codelineno-20-8" name="__codelineno-20-8" href="#__codelineno-20-8"></a><span class="w">    </span><span class="mi">600</span><span class="o">:</span><span class="w"> </span><span class="mh">#0284c7</span><span class="o">,</span>
</span><span id="__span-20-9"><a id="__codelineno-20-9" name="__codelineno-20-9" href="#__codelineno-20-9"></a><span class="w">    </span><span class="mi">900</span><span class="o">:</span><span class="w"> </span><span class="mh">#0c4a6e</span>
</span><span id="__span-20-10"><a id="__codelineno-20-10" name="__codelineno-20-10" href="#__codelineno-20-10"></a><span class="p">);</span>
</span><span id="__span-20-11"><a id="__codelineno-20-11" name="__codelineno-20-11" href="#__codelineno-20-11"></a>
</span><span id="__span-20-12"><a id="__codelineno-20-12" name="__codelineno-20-12" href="#__codelineno-20-12"></a><span class="nv">$breakpoints</span><span class="o">:</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-20-13"><a id="__codelineno-20-13" name="__codelineno-20-13" href="#__codelineno-20-13"></a><span class="w">    </span><span class="n">sm</span><span class="o">:</span><span class="w"> </span><span class="mi">640</span><span class="kt">px</span><span class="o">,</span>
</span><span id="__span-20-14"><a id="__codelineno-20-14" name="__codelineno-20-14" href="#__codelineno-20-14"></a><span class="w">    </span><span class="n">md</span><span class="o">:</span><span class="w"> </span><span class="mi">768</span><span class="kt">px</span><span class="o">,</span>
</span><span id="__span-20-15"><a id="__codelineno-20-15" name="__codelineno-20-15" href="#__codelineno-20-15"></a><span class="w">    </span><span class="n">lg</span><span class="o">:</span><span class="w"> </span><span class="mi">1024</span><span class="kt">px</span><span class="o">,</span>
</span><span id="__span-20-16"><a id="__codelineno-20-16" name="__codelineno-20-16" href="#__codelineno-20-16"></a><span class="w">    </span><span class="n">xl</span><span class="o">:</span><span class="w"> </span><span class="mi">1280</span><span class="kt">px</span>
</span><span id="__span-20-17"><a id="__codelineno-20-17" name="__codelineno-20-17" href="#__codelineno-20-17"></a><span class="p">);</span>
</span><span id="__span-20-18"><a id="__codelineno-20-18" name="__codelineno-20-18" href="#__codelineno-20-18"></a>
</span><span id="__span-20-19"><a id="__codelineno-20-19" name="__codelineno-20-19" href="#__codelineno-20-19"></a><span class="nv">$spacing-scale</span><span class="o">:</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-20-20"><a id="__codelineno-20-20" name="__codelineno-20-20" href="#__codelineno-20-20"></a><span class="w">    </span><span class="mi">0</span><span class="o">:</span><span class="w"> </span><span class="mi">0</span><span class="o">,</span>
</span><span id="__span-20-21"><a id="__codelineno-20-21" name="__codelineno-20-21" href="#__codelineno-20-21"></a><span class="w">    </span><span class="mi">1</span><span class="o">:</span><span class="w"> </span><span class="mi">0</span><span class="mf">.25</span><span class="kt">rem</span><span class="o">,</span>
</span><span id="__span-20-22"><a id="__codelineno-20-22" name="__codelineno-20-22" href="#__codelineno-20-22"></a><span class="w">    </span><span class="mi">2</span><span class="o">:</span><span class="w"> </span><span class="mi">0</span><span class="mf">.5</span><span class="kt">rem</span><span class="o">,</span>
</span><span id="__span-20-23"><a id="__codelineno-20-23" name="__codelineno-20-23" href="#__codelineno-20-23"></a><span class="w">    </span><span class="mi">3</span><span class="o">:</span><span class="w"> </span><span class="mi">0</span><span class="mf">.75</span><span class="kt">rem</span><span class="o">,</span>
</span><span id="__span-20-24"><a id="__codelineno-20-24" name="__codelineno-20-24" href="#__codelineno-20-24"></a><span class="w">    </span><span class="mi">4</span><span class="o">:</span><span class="w"> </span><span class="mi">1</span><span class="kt">rem</span><span class="o">,</span>
</span><span id="__span-20-25"><a id="__codelineno-20-25" name="__codelineno-20-25" href="#__codelineno-20-25"></a><span class="w">    </span><span class="mi">6</span><span class="o">:</span><span class="w"> </span><span class="mi">1</span><span class="mf">.5</span><span class="kt">rem</span><span class="o">,</span>
</span><span id="__span-20-26"><a id="__codelineno-20-26" name="__codelineno-20-26" href="#__codelineno-20-26"></a><span class="w">    </span><span class="mi">8</span><span class="o">:</span><span class="w"> </span><span class="mi">2</span><span class="kt">rem</span><span class="o">,</span>
</span><span id="__span-20-27"><a id="__codelineno-20-27" name="__codelineno-20-27" href="#__codelineno-20-27"></a><span class="w">    </span><span class="mi">12</span><span class="o">:</span><span class="w"> </span><span class="mi">3</span><span class="kt">rem</span>
</span><span id="__span-20-28"><a id="__codelineno-20-28" name="__codelineno-20-28" href="#__codelineno-20-28"></a><span class="p">);</span>
</span><span id="__span-20-29"><a id="__codelineno-20-29" name="__codelineno-20-29" href="#__codelineno-20-29"></a>
</span><span id="__span-20-30"><a id="__codelineno-20-30" name="__codelineno-20-30" href="#__codelineno-20-30"></a><span class="c1">// === MIXINS ===</span>
</span><span id="__span-20-31"><a id="__codelineno-20-31" name="__codelineno-20-31" href="#__codelineno-20-31"></a><span class="k">@mixin</span><span class="nf"> button-variant</span><span class="p">(</span><span class="nv">$bg-color</span><span class="o">,</span><span class="w"> </span><span class="nv">$text-color</span><span class="o">:</span><span class="w"> </span><span class="ni">white</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-20-32"><a id="__codelineno-20-32" name="__codelineno-20-32" href="#__codelineno-20-32"></a><span class="w">    </span><span class="nt">background-color</span><span class="nd">:</span><span class="w"> </span><span class="err">$</span><span class="nt">bg-color</span><span class="o">;</span>
</span><span id="__span-20-33"><a id="__codelineno-20-33" name="__codelineno-20-33" href="#__codelineno-20-33"></a><span class="w">    </span><span class="nt">color</span><span class="nd">:</span><span class="w"> </span><span class="err">$</span><span class="nt">text-color</span><span class="o">;</span>
</span><span id="__span-20-34"><a id="__codelineno-20-34" name="__codelineno-20-34" href="#__codelineno-20-34"></a>
</span><span id="__span-20-35"><a id="__codelineno-20-35" name="__codelineno-20-35" href="#__codelineno-20-35"></a><span class="w">    </span><span class="k">&amp;</span><span class="nd">:hover</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-20-36"><a id="__codelineno-20-36" name="__codelineno-20-36" href="#__codelineno-20-36"></a><span class="w">        </span><span class="nt">background-color</span><span class="nd">:</span><span class="w"> </span><span class="nt">darken</span><span class="o">(</span><span class="err">$</span><span class="nt">bg-color</span><span class="o">,</span><span class="w"> </span><span class="nt">10</span><span class="err">%</span><span class="o">);</span>
</span><span id="__span-20-37"><a id="__codelineno-20-37" name="__codelineno-20-37" href="#__codelineno-20-37"></a><span class="w">        </span><span class="nt">transform</span><span class="nd">:</span><span class="w"> </span><span class="nt">translateY</span><span class="o">(</span><span class="nt">-1px</span><span class="o">);</span>
</span><span id="__span-20-38"><a id="__codelineno-20-38" name="__codelineno-20-38" href="#__codelineno-20-38"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-20-39"><a id="__codelineno-20-39" name="__codelineno-20-39" href="#__codelineno-20-39"></a>
</span><span id="__span-20-40"><a id="__codelineno-20-40" name="__codelineno-20-40" href="#__codelineno-20-40"></a><span class="w">    </span><span class="k">&amp;</span><span class="nd">:active</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-20-41"><a id="__codelineno-20-41" name="__codelineno-20-41" href="#__codelineno-20-41"></a><span class="w">        </span><span class="nt">transform</span><span class="nd">:</span><span class="w"> </span><span class="nt">translateY</span><span class="o">(</span><span class="nt">0</span><span class="o">);</span>
</span><span id="__span-20-42"><a id="__codelineno-20-42" name="__codelineno-20-42" href="#__codelineno-20-42"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-20-43"><a id="__codelineno-20-43" name="__codelineno-20-43" href="#__codelineno-20-43"></a><span class="p">}</span>
</span><span id="__span-20-44"><a id="__codelineno-20-44" name="__codelineno-20-44" href="#__codelineno-20-44"></a>
</span><span id="__span-20-45"><a id="__codelineno-20-45" name="__codelineno-20-45" href="#__codelineno-20-45"></a><span class="k">@mixin</span><span class="nf"> respond-to</span><span class="p">(</span><span class="nv">$breakpoint</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-20-46"><a id="__codelineno-20-46" name="__codelineno-20-46" href="#__codelineno-20-46"></a><span class="w">    </span><span class="k">@if</span><span class="w"> </span><span class="nf">map-has-key</span><span class="p">(</span><span class="nv">$breakpoints</span><span class="o">,</span><span class="w"> </span><span class="nv">$breakpoint</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-20-47"><a id="__codelineno-20-47" name="__codelineno-20-47" href="#__codelineno-20-47"></a><span class="w">        </span><span class="k">@media</span><span class="w"> </span><span class="p">(</span><span class="no">min-width</span><span class="o">:</span><span class="w"> </span><span class="nf">map-get</span><span class="p">(</span><span class="nv">$breakpoints</span><span class="o">,</span><span class="w"> </span><span class="nv">$breakpoint</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-20-48"><a id="__codelineno-20-48" name="__codelineno-20-48" href="#__codelineno-20-48"></a><span class="w">            </span><span class="k">@content</span><span class="o">;</span>
</span><span id="__span-20-49"><a id="__codelineno-20-49" name="__codelineno-20-49" href="#__codelineno-20-49"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-20-50"><a id="__codelineno-20-50" name="__codelineno-20-50" href="#__codelineno-20-50"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-20-51"><a id="__codelineno-20-51" name="__codelineno-20-51" href="#__codelineno-20-51"></a><span class="p">}</span>
</span><span id="__span-20-52"><a id="__codelineno-20-52" name="__codelineno-20-52" href="#__codelineno-20-52"></a>
</span><span id="__span-20-53"><a id="__codelineno-20-53" name="__codelineno-20-53" href="#__codelineno-20-53"></a><span class="k">@mixin</span><span class="nf"> card-shadow</span><span class="p">(</span><span class="nv">$level</span><span class="o">:</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-20-54"><a id="__codelineno-20-54" name="__codelineno-20-54" href="#__codelineno-20-54"></a><span class="w">    </span><span class="k">@if</span><span class="w"> </span><span class="nv">$level</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-20-55"><a id="__codelineno-20-55" name="__codelineno-20-55" href="#__codelineno-20-55"></a><span class="w">        </span><span class="nt">box-shadow</span><span class="nd">:</span><span class="w"> </span><span class="nt">0</span><span class="w"> </span><span class="nt">1px</span><span class="w"> </span><span class="nt">3px</span><span class="w"> </span><span class="nt">rgba</span><span class="o">(</span><span class="nt">0</span><span class="o">,</span><span class="w"> </span><span class="nt">0</span><span class="o">,</span><span class="w"> </span><span class="nt">0</span><span class="o">,</span><span class="w"> </span><span class="nt">0</span><span class="nc">.1</span><span class="o">);</span>
</span><span id="__span-20-56"><a id="__codelineno-20-56" name="__codelineno-20-56" href="#__codelineno-20-56"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">@else</span><span class="w"> </span><span class="nt">if</span><span class="w"> </span><span class="err">$</span><span class="nt">level</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nt">2</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-20-57"><a id="__codelineno-20-57" name="__codelineno-20-57" href="#__codelineno-20-57"></a><span class="w">        </span><span class="nt">box-shadow</span><span class="nd">:</span><span class="w"> </span><span class="nt">0</span><span class="w"> </span><span class="nt">4px</span><span class="w"> </span><span class="nt">6px</span><span class="w"> </span><span class="nt">rgba</span><span class="o">(</span><span class="nt">0</span><span class="o">,</span><span class="w"> </span><span class="nt">0</span><span class="o">,</span><span class="w"> </span><span class="nt">0</span><span class="o">,</span><span class="w"> </span><span class="nt">0</span><span class="nc">.1</span><span class="o">);</span>
</span><span id="__span-20-58"><a id="__codelineno-20-58" name="__codelineno-20-58" href="#__codelineno-20-58"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">@else</span><span class="w"> </span><span class="nt">if</span><span class="w"> </span><span class="err">$</span><span class="nt">level</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nt">3</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-20-59"><a id="__codelineno-20-59" name="__codelineno-20-59" href="#__codelineno-20-59"></a><span class="w">        </span><span class="nt">box-shadow</span><span class="nd">:</span><span class="w"> </span><span class="nt">0</span><span class="w"> </span><span class="nt">10px</span><span class="w"> </span><span class="nt">15px</span><span class="w"> </span><span class="nt">rgba</span><span class="o">(</span><span class="nt">0</span><span class="o">,</span><span class="w"> </span><span class="nt">0</span><span class="o">,</span><span class="w"> </span><span class="nt">0</span><span class="o">,</span><span class="w"> </span><span class="nt">0</span><span class="nc">.1</span><span class="o">);</span>
</span><span id="__span-20-60"><a id="__codelineno-20-60" name="__codelineno-20-60" href="#__codelineno-20-60"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-20-61"><a id="__codelineno-20-61" name="__codelineno-20-61" href="#__codelineno-20-61"></a><span class="p">}</span>
</span><span id="__span-20-62"><a id="__codelineno-20-62" name="__codelineno-20-62" href="#__codelineno-20-62"></a>
</span><span id="__span-20-63"><a id="__codelineno-20-63" name="__codelineno-20-63" href="#__codelineno-20-63"></a><span class="c1">// === FUNCTIONS ===</span>
</span><span id="__span-20-64"><a id="__codelineno-20-64" name="__codelineno-20-64" href="#__codelineno-20-64"></a><span class="k">@function</span><span class="w"> </span><span class="nt">get-color</span><span class="o">(</span><span class="err">$</span><span class="nt">color-map</span><span class="o">,</span><span class="w"> </span><span class="err">$</span><span class="nt">level</span><span class="o">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-20-65"><a id="__codelineno-20-65" name="__codelineno-20-65" href="#__codelineno-20-65"></a><span class="w">    </span><span class="k">@return</span><span class="w"> </span><span class="nt">map-get</span><span class="o">(</span><span class="err">$</span><span class="nt">color-map</span><span class="o">,</span><span class="w"> </span><span class="err">$</span><span class="nt">level</span><span class="o">);</span>
</span><span id="__span-20-66"><a id="__codelineno-20-66" name="__codelineno-20-66" href="#__codelineno-20-66"></a><span class="p">}</span>
</span><span id="__span-20-67"><a id="__codelineno-20-67" name="__codelineno-20-67" href="#__codelineno-20-67"></a>
</span><span id="__span-20-68"><a id="__codelineno-20-68" name="__codelineno-20-68" href="#__codelineno-20-68"></a><span class="k">@function</span><span class="w"> </span><span class="nt">spacing</span><span class="o">(</span><span class="err">$</span><span class="nt">key</span><span class="o">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-20-69"><a id="__codelineno-20-69" name="__codelineno-20-69" href="#__codelineno-20-69"></a><span class="w">    </span><span class="k">@return</span><span class="w"> </span><span class="nt">map-get</span><span class="o">(</span><span class="err">$</span><span class="nt">spacing-scale</span><span class="o">,</span><span class="w"> </span><span class="err">$</span><span class="nt">key</span><span class="o">);</span>
</span><span id="__span-20-70"><a id="__codelineno-20-70" name="__codelineno-20-70" href="#__codelineno-20-70"></a><span class="p">}</span>
</span><span id="__span-20-71"><a id="__codelineno-20-71" name="__codelineno-20-71" href="#__codelineno-20-71"></a>
</span><span id="__span-20-72"><a id="__codelineno-20-72" name="__codelineno-20-72" href="#__codelineno-20-72"></a><span class="c1">// === USAGE EXAMPLES ===</span>
</span><span id="__span-20-73"><a id="__codelineno-20-73" name="__codelineno-20-73" href="#__codelineno-20-73"></a><span class="nc">.btn</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-20-74"><a id="__codelineno-20-74" name="__codelineno-20-74" href="#__codelineno-20-74"></a><span class="w">    </span><span class="nt">padding</span><span class="nd">:</span><span class="w"> </span><span class="nt">spacing</span><span class="o">(</span><span class="nt">3</span><span class="o">)</span><span class="w"> </span><span class="nt">spacing</span><span class="o">(</span><span class="nt">6</span><span class="o">);</span>
</span><span id="__span-20-75"><a id="__codelineno-20-75" name="__codelineno-20-75" href="#__codelineno-20-75"></a><span class="w">    </span><span class="nt">border-radius</span><span class="nd">:</span><span class="w"> </span><span class="nt">0</span><span class="nc">.375rem</span><span class="o">;</span>
</span><span id="__span-20-76"><a id="__codelineno-20-76" name="__codelineno-20-76" href="#__codelineno-20-76"></a><span class="w">    </span><span class="nt">font-weight</span><span class="nd">:</span><span class="w"> </span><span class="nt">500</span><span class="o">;</span>
</span><span id="__span-20-77"><a id="__codelineno-20-77" name="__codelineno-20-77" href="#__codelineno-20-77"></a><span class="w">    </span><span class="nt">transition</span><span class="nd">:</span><span class="w"> </span><span class="nt">all</span><span class="w"> </span><span class="nt">0</span><span class="nc">.15s</span><span class="w"> </span><span class="nt">ease</span><span class="o">;</span>
</span><span id="__span-20-78"><a id="__codelineno-20-78" name="__codelineno-20-78" href="#__codelineno-20-78"></a>
</span><span id="__span-20-79"><a id="__codelineno-20-79" name="__codelineno-20-79" href="#__codelineno-20-79"></a><span class="w">    </span><span class="k">&amp;</span><span class="nt">--primary</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-20-80"><a id="__codelineno-20-80" name="__codelineno-20-80" href="#__codelineno-20-80"></a><span class="w">        </span><span class="k">@include</span><span class="nd"> button-variant</span><span class="p">(</span><span class="nf">get-color</span><span class="p">(</span><span class="nv">$primary-colors</span><span class="o">,</span><span class="w"> </span><span class="mi">600</span><span class="p">));</span>
</span><span id="__span-20-81"><a id="__codelineno-20-81" name="__codelineno-20-81" href="#__codelineno-20-81"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-20-82"><a id="__codelineno-20-82" name="__codelineno-20-82" href="#__codelineno-20-82"></a>
</span><span id="__span-20-83"><a id="__codelineno-20-83" name="__codelineno-20-83" href="#__codelineno-20-83"></a><span class="w">    </span><span class="k">&amp;</span><span class="nt">--secondary</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-20-84"><a id="__codelineno-20-84" name="__codelineno-20-84" href="#__codelineno-20-84"></a><span class="w">        </span><span class="k">@include</span><span class="nd"> button-variant</span><span class="p">(</span><span class="mh">#6b7280</span><span class="o">,</span><span class="w"> </span><span class="ni">white</span><span class="p">);</span>
</span><span id="__span-20-85"><a id="__codelineno-20-85" name="__codelineno-20-85" href="#__codelineno-20-85"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-20-86"><a id="__codelineno-20-86" name="__codelineno-20-86" href="#__codelineno-20-86"></a><span class="p">}</span>
</span><span id="__span-20-87"><a id="__codelineno-20-87" name="__codelineno-20-87" href="#__codelineno-20-87"></a>
</span><span id="__span-20-88"><a id="__codelineno-20-88" name="__codelineno-20-88" href="#__codelineno-20-88"></a><span class="nc">.card</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-20-89"><a id="__codelineno-20-89" name="__codelineno-20-89" href="#__codelineno-20-89"></a><span class="w">    </span><span class="k">@include</span><span class="nd"> card-shadow</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
</span><span id="__span-20-90"><a id="__codelineno-20-90" name="__codelineno-20-90" href="#__codelineno-20-90"></a><span class="w">    </span><span class="nt">border-radius</span><span class="nd">:</span><span class="w"> </span><span class="nt">0</span><span class="nc">.5rem</span><span class="o">;</span>
</span><span id="__span-20-91"><a id="__codelineno-20-91" name="__codelineno-20-91" href="#__codelineno-20-91"></a><span class="w">    </span><span class="nt">padding</span><span class="nd">:</span><span class="w"> </span><span class="nt">spacing</span><span class="o">(</span><span class="nt">6</span><span class="o">);</span>
</span><span id="__span-20-92"><a id="__codelineno-20-92" name="__codelineno-20-92" href="#__codelineno-20-92"></a>
</span><span id="__span-20-93"><a id="__codelineno-20-93" name="__codelineno-20-93" href="#__codelineno-20-93"></a><span class="w">    </span><span class="k">&amp;</span><span class="nd">:hover</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-20-94"><a id="__codelineno-20-94" name="__codelineno-20-94" href="#__codelineno-20-94"></a><span class="w">        </span><span class="k">@include</span><span class="nd"> card-shadow</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
</span><span id="__span-20-95"><a id="__codelineno-20-95" name="__codelineno-20-95" href="#__codelineno-20-95"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-20-96"><a id="__codelineno-20-96" name="__codelineno-20-96" href="#__codelineno-20-96"></a>
</span><span id="__span-20-97"><a id="__codelineno-20-97" name="__codelineno-20-97" href="#__codelineno-20-97"></a><span class="w">    </span><span class="k">@include</span><span class="nd"> respond-to</span><span class="p">(</span><span class="n">md</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-20-98"><a id="__codelineno-20-98" name="__codelineno-20-98" href="#__codelineno-20-98"></a><span class="w">        </span><span class="nt">padding</span><span class="nd">:</span><span class="w"> </span><span class="nt">spacing</span><span class="o">(</span><span class="nt">8</span><span class="o">);</span>
</span><span id="__span-20-99"><a id="__codelineno-20-99" name="__codelineno-20-99" href="#__codelineno-20-99"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-20-100"><a id="__codelineno-20-100" name="__codelineno-20-100" href="#__codelineno-20-100"></a><span class="p">}</span>
</span><span id="__span-20-101"><a id="__codelineno-20-101" name="__codelineno-20-101" href="#__codelineno-20-101"></a>
</span><span id="__span-20-102"><a id="__codelineno-20-102" name="__codelineno-20-102" href="#__codelineno-20-102"></a><span class="c1">// === MODERN CSS FEATURES ===</span>
</span><span id="__span-20-103"><a id="__codelineno-20-103" name="__codelineno-20-103" href="#__codelineno-20-103"></a><span class="nc">.component</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-20-104"><a id="__codelineno-20-104" name="__codelineno-20-104" href="#__codelineno-20-104"></a><span class="w">    </span><span class="c1">// CSS Grid with subgrid (when supported)</span>
</span><span id="__span-20-105"><a id="__codelineno-20-105" name="__codelineno-20-105" href="#__codelineno-20-105"></a><span class="w">    </span><span class="nt">display</span><span class="nd">:</span><span class="w"> </span><span class="nt">grid</span><span class="o">;</span>
</span><span id="__span-20-106"><a id="__codelineno-20-106" name="__codelineno-20-106" href="#__codelineno-20-106"></a><span class="w">    </span><span class="nt">grid-template-columns</span><span class="nd">:</span><span class="w"> </span><span class="nt">repeat</span><span class="o">(</span><span class="nt">3</span><span class="o">,</span><span class="w"> </span><span class="nt">1fr</span><span class="o">);</span>
</span><span id="__span-20-107"><a id="__codelineno-20-107" name="__codelineno-20-107" href="#__codelineno-20-107"></a><span class="w">    </span><span class="nt">gap</span><span class="nd">:</span><span class="w"> </span><span class="nt">spacing</span><span class="o">(</span><span class="nt">4</span><span class="o">);</span>
</span><span id="__span-20-108"><a id="__codelineno-20-108" name="__codelineno-20-108" href="#__codelineno-20-108"></a>
</span><span id="__span-20-109"><a id="__codelineno-20-109" name="__codelineno-20-109" href="#__codelineno-20-109"></a><span class="w">    </span><span class="o">@</span><span class="nt">supports</span><span class="w"> </span><span class="o">(</span><span class="nt">grid-template-columns</span><span class="nd">:</span><span class="w"> </span><span class="nt">subgrid</span><span class="o">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-20-110"><a id="__codelineno-20-110" name="__codelineno-20-110" href="#__codelineno-20-110"></a><span class="w">        </span><span class="nc">.subcomponent</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-20-111"><a id="__codelineno-20-111" name="__codelineno-20-111" href="#__codelineno-20-111"></a><span class="w">            </span><span class="nt">display</span><span class="nd">:</span><span class="w"> </span><span class="nt">grid</span><span class="o">;</span>
</span><span id="__span-20-112"><a id="__codelineno-20-112" name="__codelineno-20-112" href="#__codelineno-20-112"></a><span class="w">            </span><span class="nt">grid-template-columns</span><span class="nd">:</span><span class="w"> </span><span class="nt">subgrid</span><span class="o">;</span>
</span><span id="__span-20-113"><a id="__codelineno-20-113" name="__codelineno-20-113" href="#__codelineno-20-113"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-20-114"><a id="__codelineno-20-114" name="__codelineno-20-114" href="#__codelineno-20-114"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-20-115"><a id="__codelineno-20-115" name="__codelineno-20-115" href="#__codelineno-20-115"></a>
</span><span id="__span-20-116"><a id="__codelineno-20-116" name="__codelineno-20-116" href="#__codelineno-20-116"></a><span class="w">    </span><span class="c1">// Container queries (when supported)</span>
</span><span id="__span-20-117"><a id="__codelineno-20-117" name="__codelineno-20-117" href="#__codelineno-20-117"></a><span class="w">    </span><span class="k">@supports</span><span class="w"> </span><span class="o">(</span><span class="nt">container-type</span><span class="nd">:</span><span class="w"> </span><span class="nt">inline-size</span><span class="o">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-20-118"><a id="__codelineno-20-118" name="__codelineno-20-118" href="#__codelineno-20-118"></a><span class="w">        </span><span class="nt">container-type</span><span class="nd">:</span><span class="w"> </span><span class="nt">inline-size</span><span class="o">;</span>
</span><span id="__span-20-119"><a id="__codelineno-20-119" name="__codelineno-20-119" href="#__codelineno-20-119"></a>
</span><span id="__span-20-120"><a id="__codelineno-20-120" name="__codelineno-20-120" href="#__codelineno-20-120"></a><span class="w">        </span><span class="o">@</span><span class="nt">container</span><span class="w"> </span><span class="o">(</span><span class="nt">min-width</span><span class="nd">:</span><span class="w"> </span><span class="nt">400px</span><span class="o">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-20-121"><a id="__codelineno-20-121" name="__codelineno-20-121" href="#__codelineno-20-121"></a><span class="w">            </span><span class="nc">.responsive-element</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-20-122"><a id="__codelineno-20-122" name="__codelineno-20-122" href="#__codelineno-20-122"></a><span class="w">                </span><span class="nt">display</span><span class="nd">:</span><span class="w"> </span><span class="nt">flex</span><span class="o">;</span>
</span><span id="__span-20-123"><a id="__codelineno-20-123" name="__codelineno-20-123" href="#__codelineno-20-123"></a><span class="w">                </span><span class="nt">flex-direction</span><span class="nd">:</span><span class="w"> </span><span class="nt">row</span><span class="o">;</span>
</span><span id="__span-20-124"><a id="__codelineno-20-124" name="__codelineno-20-124" href="#__codelineno-20-124"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-20-125"><a id="__codelineno-20-125" name="__codelineno-20-125" href="#__codelineno-20-125"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-20-126"><a id="__codelineno-20-126" name="__codelineno-20-126" href="#__codelineno-20-126"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-20-127"><a id="__codelineno-20-127" name="__codelineno-20-127" href="#__codelineno-20-127"></a><span class="p">}</span>
</span></code></pre></div>
</details>
<p><strong>ğŸ› ï¸ CSS Frameworks Comparison:</strong></p>
<table>
<thead>
<tr>
<th>Framework</th>
<th>Approach</th>
<th>Best For</th>
<th>Learning Curve</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Tailwind CSS</strong></td>
<td>Utility-first</td>
<td>Rapid prototyping, custom designs</td>
<td>Medium</td>
</tr>
<tr>
<td><strong>Bootstrap</strong></td>
<td>Component-based</td>
<td>Quick MVPs, consistent themes</td>
<td>Easy</td>
</tr>
<tr>
<td><strong>Bulma</strong></td>
<td>Modern CSS-only</td>
<td>Clean, modern interfaces</td>
<td>Easy</td>
</tr>
<tr>
<td><strong>Foundation</strong></td>
<td>Mobile-first</td>
<td>Enterprise applications</td>
<td>Medium</td>
</tr>
<tr>
<td><strong>Semantic UI</strong></td>
<td>Semantic naming</td>
<td>Readable, maintainable code</td>
<td>Medium</td>
</tr>
</tbody>
</table>
<h3 id="version-control-libraries-managing-code-like-a-pro">Version Control &amp; Libraries: Managing Code Like a Pro ğŸ—‚ï¸ğŸ“š<a class="headerlink" href="#version-control-libraries-managing-code-like-a-pro" title="Permanent link">&para;</a></h3>
<p>Version control isn't just about backing up your codeâ€”it's about collaboration, experimentation, and maintaining a professional development workflow. Think of it as time travel for your codebase, allowing you to explore different possibilities while always having a safe path back.</p>
<details class="example">
<summary>Setting up a git workflow</summary>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-21-1"><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a><span class="c1"># === SETTING UP A PROFESSIONAL GIT WORKFLOW ===</span>
</span><span id="__span-21-2"><a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a>
</span><span id="__span-21-3"><a id="__codelineno-21-3" name="__codelineno-21-3" href="#__codelineno-21-3"></a><span class="c1"># Initialize repository with proper structure</span>
</span><span id="__span-21-4"><a id="__codelineno-21-4" name="__codelineno-21-4" href="#__codelineno-21-4"></a>git<span class="w"> </span>init<span class="w"> </span>my-web-project
</span><span id="__span-21-5"><a id="__codelineno-21-5" name="__codelineno-21-5" href="#__codelineno-21-5"></a><span class="nb">cd</span><span class="w"> </span>my-web-project
</span><span id="__span-21-6"><a id="__codelineno-21-6" name="__codelineno-21-6" href="#__codelineno-21-6"></a>
</span><span id="__span-21-7"><a id="__codelineno-21-7" name="__codelineno-21-7" href="#__codelineno-21-7"></a><span class="c1"># Create essential files</span>
</span><span id="__span-21-8"><a id="__codelineno-21-8" name="__codelineno-21-8" href="#__codelineno-21-8"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;# My Web Project&quot;</span><span class="w"> </span>&gt;<span class="w"> </span>README.md
</span><span id="__span-21-9"><a id="__codelineno-21-9" name="__codelineno-21-9" href="#__codelineno-21-9"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;node_modules/</span>
</span><span id="__span-21-10"><a id="__codelineno-21-10" name="__codelineno-21-10" href="#__codelineno-21-10"></a><span class="s2">.env</span>
</span><span id="__span-21-11"><a id="__codelineno-21-11" name="__codelineno-21-11" href="#__codelineno-21-11"></a><span class="s2">dist/</span>
</span><span id="__span-21-12"><a id="__codelineno-21-12" name="__codelineno-21-12" href="#__codelineno-21-12"></a><span class="s2">.DS_Store</span>
</span><span id="__span-21-13"><a id="__codelineno-21-13" name="__codelineno-21-13" href="#__codelineno-21-13"></a><span class="s2">*.log&quot;</span><span class="w"> </span>&gt;<span class="w"> </span>.gitignore
</span><span id="__span-21-14"><a id="__codelineno-21-14" name="__codelineno-21-14" href="#__codelineno-21-14"></a>
</span><span id="__span-21-15"><a id="__codelineno-21-15" name="__codelineno-21-15" href="#__codelineno-21-15"></a><span class="c1"># Set up Git configuration</span>
</span><span id="__span-21-16"><a id="__codelineno-21-16" name="__codelineno-21-16" href="#__codelineno-21-16"></a>git<span class="w"> </span>config<span class="w"> </span>user.name<span class="w"> </span><span class="s2">&quot;Your Name&quot;</span>
</span><span id="__span-21-17"><a id="__codelineno-21-17" name="__codelineno-21-17" href="#__codelineno-21-17"></a>git<span class="w"> </span>config<span class="w"> </span>user.email<span class="w"> </span><span class="s2">&quot;your.email@example.com&quot;</span>
</span><span id="__span-21-18"><a id="__codelineno-21-18" name="__codelineno-21-18" href="#__codelineno-21-18"></a>git<span class="w"> </span>config<span class="w"> </span>core.autocrlf<span class="w"> </span><span class="nb">true</span><span class="w">  </span><span class="c1"># For Windows</span>
</span><span id="__span-21-19"><a id="__codelineno-21-19" name="__codelineno-21-19" href="#__codelineno-21-19"></a>git<span class="w"> </span>config<span class="w"> </span>pull.rebase<span class="w"> </span><span class="nb">false</span><span class="w">   </span><span class="c1"># Merge strategy</span>
</span><span id="__span-21-20"><a id="__codelineno-21-20" name="__codelineno-21-20" href="#__codelineno-21-20"></a>
</span><span id="__span-21-21"><a id="__codelineno-21-21" name="__codelineno-21-21" href="#__codelineno-21-21"></a><span class="c1"># === BRANCHING STRATEGY ===</span>
</span><span id="__span-21-22"><a id="__codelineno-21-22" name="__codelineno-21-22" href="#__codelineno-21-22"></a>
</span><span id="__span-21-23"><a id="__codelineno-21-23" name="__codelineno-21-23" href="#__codelineno-21-23"></a><span class="c1"># Main branches</span>
</span><span id="__span-21-24"><a id="__codelineno-21-24" name="__codelineno-21-24" href="#__codelineno-21-24"></a>git<span class="w"> </span>checkout<span class="w"> </span>-b<span class="w"> </span>main<span class="w">           </span><span class="c1"># Production-ready code</span>
</span><span id="__span-21-25"><a id="__codelineno-21-25" name="__codelineno-21-25" href="#__codelineno-21-25"></a>git<span class="w"> </span>checkout<span class="w"> </span>-b<span class="w"> </span>develop<span class="w">        </span><span class="c1"># Integration branch for features</span>
</span><span id="__span-21-26"><a id="__codelineno-21-26" name="__codelineno-21-26" href="#__codelineno-21-26"></a>
</span><span id="__span-21-27"><a id="__codelineno-21-27" name="__codelineno-21-27" href="#__codelineno-21-27"></a><span class="c1"># Feature branch workflow</span>
</span><span id="__span-21-28"><a id="__codelineno-21-28" name="__codelineno-21-28" href="#__codelineno-21-28"></a>git<span class="w"> </span>checkout<span class="w"> </span>develop
</span><span id="__span-21-29"><a id="__codelineno-21-29" name="__codelineno-21-29" href="#__codelineno-21-29"></a>git<span class="w"> </span>checkout<span class="w"> </span>-b<span class="w"> </span>feature/user-authentication
</span><span id="__span-21-30"><a id="__codelineno-21-30" name="__codelineno-21-30" href="#__codelineno-21-30"></a><span class="c1"># Work on feature...</span>
</span><span id="__span-21-31"><a id="__codelineno-21-31" name="__codelineno-21-31" href="#__codelineno-21-31"></a>git<span class="w"> </span>add<span class="w"> </span>.
</span><span id="__span-21-32"><a id="__codelineno-21-32" name="__codelineno-21-32" href="#__codelineno-21-32"></a>git<span class="w"> </span>commit<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;feat: implement user login system</span>
</span><span id="__span-21-33"><a id="__codelineno-21-33" name="__codelineno-21-33" href="#__codelineno-21-33"></a>
</span><span id="__span-21-34"><a id="__codelineno-21-34" name="__codelineno-21-34" href="#__codelineno-21-34"></a><span class="s2">- Add JWT authentication</span>
</span><span id="__span-21-35"><a id="__codelineno-21-35" name="__codelineno-21-35" href="#__codelineno-21-35"></a><span class="s2">- Create login/signup forms</span>
</span><span id="__span-21-36"><a id="__codelineno-21-36" name="__codelineno-21-36" href="#__codelineno-21-36"></a><span class="s2">- Implement password hashing</span>
</span><span id="__span-21-37"><a id="__codelineno-21-37" name="__codelineno-21-37" href="#__codelineno-21-37"></a><span class="s2">- Add session management&quot;</span>
</span><span id="__span-21-38"><a id="__codelineno-21-38" name="__codelineno-21-38" href="#__codelineno-21-38"></a>
</span><span id="__span-21-39"><a id="__codelineno-21-39" name="__codelineno-21-39" href="#__codelineno-21-39"></a><span class="c1"># Push feature branch</span>
</span><span id="__span-21-40"><a id="__codelineno-21-40" name="__codelineno-21-40" href="#__codelineno-21-40"></a>git<span class="w"> </span>push<span class="w"> </span>-u<span class="w"> </span>origin<span class="w"> </span>feature/user-authentication
</span><span id="__span-21-41"><a id="__codelineno-21-41" name="__codelineno-21-41" href="#__codelineno-21-41"></a>
</span><span id="__span-21-42"><a id="__codelineno-21-42" name="__codelineno-21-42" href="#__codelineno-21-42"></a><span class="c1"># Create pull request (via GitHub/GitLab interface)</span>
</span><span id="__span-21-43"><a id="__codelineno-21-43" name="__codelineno-21-43" href="#__codelineno-21-43"></a><span class="c1"># After review and approval, merge to develop</span>
</span><span id="__span-21-44"><a id="__codelineno-21-44" name="__codelineno-21-44" href="#__codelineno-21-44"></a>
</span><span id="__span-21-45"><a id="__codelineno-21-45" name="__codelineno-21-45" href="#__codelineno-21-45"></a><span class="c1"># === RELEASE WORKFLOW ===</span>
</span><span id="__span-21-46"><a id="__codelineno-21-46" name="__codelineno-21-46" href="#__codelineno-21-46"></a>
</span><span id="__span-21-47"><a id="__codelineno-21-47" name="__codelineno-21-47" href="#__codelineno-21-47"></a><span class="c1"># Create release branch</span>
</span><span id="__span-21-48"><a id="__codelineno-21-48" name="__codelineno-21-48" href="#__codelineno-21-48"></a>git<span class="w"> </span>checkout<span class="w"> </span>develop
</span><span id="__span-21-49"><a id="__codelineno-21-49" name="__codelineno-21-49" href="#__codelineno-21-49"></a>git<span class="w"> </span>checkout<span class="w"> </span>-b<span class="w"> </span>release/v1.2.0
</span><span id="__span-21-50"><a id="__codelineno-21-50" name="__codelineno-21-50" href="#__codelineno-21-50"></a>
</span><span id="__span-21-51"><a id="__codelineno-21-51" name="__codelineno-21-51" href="#__codelineno-21-51"></a><span class="c1"># Bump version numbers, update changelog</span>
</span><span id="__span-21-52"><a id="__codelineno-21-52" name="__codelineno-21-52" href="#__codelineno-21-52"></a>git<span class="w"> </span>add<span class="w"> </span>.
</span><span id="__span-21-53"><a id="__codelineno-21-53" name="__codelineno-21-53" href="#__codelineno-21-53"></a>git<span class="w"> </span>commit<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;chore: prepare release v1.2.0&quot;</span>
</span><span id="__span-21-54"><a id="__codelineno-21-54" name="__codelineno-21-54" href="#__codelineno-21-54"></a>
</span><span id="__span-21-55"><a id="__codelineno-21-55" name="__codelineno-21-55" href="#__codelineno-21-55"></a><span class="c1"># Merge to main and tag</span>
</span><span id="__span-21-56"><a id="__codelineno-21-56" name="__codelineno-21-56" href="#__codelineno-21-56"></a>git<span class="w"> </span>checkout<span class="w"> </span>main
</span><span id="__span-21-57"><a id="__codelineno-21-57" name="__codelineno-21-57" href="#__codelineno-21-57"></a>git<span class="w"> </span>merge<span class="w"> </span>release/v1.2.0
</span><span id="__span-21-58"><a id="__codelineno-21-58" name="__codelineno-21-58" href="#__codelineno-21-58"></a>git<span class="w"> </span>tag<span class="w"> </span>-a<span class="w"> </span>v1.2.0<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;Release version 1.2.0&quot;</span>
</span><span id="__span-21-59"><a id="__codelineno-21-59" name="__codelineno-21-59" href="#__codelineno-21-59"></a>git<span class="w"> </span>push<span class="w"> </span>origin<span class="w"> </span>main<span class="w"> </span>--tags
</span><span id="__span-21-60"><a id="__codelineno-21-60" name="__codelineno-21-60" href="#__codelineno-21-60"></a>
</span><span id="__span-21-61"><a id="__codelineno-21-61" name="__codelineno-21-61" href="#__codelineno-21-61"></a><span class="c1"># Merge back to develop</span>
</span><span id="__span-21-62"><a id="__codelineno-21-62" name="__codelineno-21-62" href="#__codelineno-21-62"></a>git<span class="w"> </span>checkout<span class="w"> </span>develop
</span><span id="__span-21-63"><a id="__codelineno-21-63" name="__codelineno-21-63" href="#__codelineno-21-63"></a>git<span class="w"> </span>merge<span class="w"> </span>release/v1.2.0
</span><span id="__span-21-64"><a id="__codelineno-21-64" name="__codelineno-21-64" href="#__codelineno-21-64"></a>
</span><span id="__span-21-65"><a id="__codelineno-21-65" name="__codelineno-21-65" href="#__codelineno-21-65"></a><span class="c1"># === HOTFIX WORKFLOW ===</span>
</span><span id="__span-21-66"><a id="__codelineno-21-66" name="__codelineno-21-66" href="#__codelineno-21-66"></a>
</span><span id="__span-21-67"><a id="__codelineno-21-67" name="__codelineno-21-67" href="#__codelineno-21-67"></a><span class="c1"># Critical bug in production</span>
</span><span id="__span-21-68"><a id="__codelineno-21-68" name="__codelineno-21-68" href="#__codelineno-21-68"></a>git<span class="w"> </span>checkout<span class="w"> </span>main
</span><span id="__span-21-69"><a id="__codelineno-21-69" name="__codelineno-21-69" href="#__codelineno-21-69"></a>git<span class="w"> </span>checkout<span class="w"> </span>-b<span class="w"> </span>hotfix/critical-security-fix
</span><span id="__span-21-70"><a id="__codelineno-21-70" name="__codelineno-21-70" href="#__codelineno-21-70"></a>
</span><span id="__span-21-71"><a id="__codelineno-21-71" name="__codelineno-21-71" href="#__codelineno-21-71"></a><span class="c1"># Fix the issue</span>
</span><span id="__span-21-72"><a id="__codelineno-21-72" name="__codelineno-21-72" href="#__codelineno-21-72"></a>git<span class="w"> </span>add<span class="w"> </span>.
</span><span id="__span-21-73"><a id="__codelineno-21-73" name="__codelineno-21-73" href="#__codelineno-21-73"></a>git<span class="w"> </span>commit<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;fix: resolve critical XSS vulnerability</span>
</span><span id="__span-21-74"><a id="__codelineno-21-74" name="__codelineno-21-74" href="#__codelineno-21-74"></a>
</span><span id="__span-21-75"><a id="__codelineno-21-75" name="__codelineno-21-75" href="#__codelineno-21-75"></a><span class="s2">- Sanitize user input in comment system</span>
</span><span id="__span-21-76"><a id="__codelineno-21-76" name="__codelineno-21-76" href="#__codelineno-21-76"></a><span class="s2">- Add CSRF protection</span>
</span><span id="__span-21-77"><a id="__codelineno-21-77" name="__codelineno-21-77" href="#__codelineno-21-77"></a><span class="s2">- Update dependencies&quot;</span>
</span><span id="__span-21-78"><a id="__codelineno-21-78" name="__codelineno-21-78" href="#__codelineno-21-78"></a>
</span><span id="__span-21-79"><a id="__codelineno-21-79" name="__codelineno-21-79" href="#__codelineno-21-79"></a><span class="c1"># Merge to main and develop</span>
</span><span id="__span-21-80"><a id="__codelineno-21-80" name="__codelineno-21-80" href="#__codelineno-21-80"></a>git<span class="w"> </span>checkout<span class="w"> </span>main
</span><span id="__span-21-81"><a id="__codelineno-21-81" name="__codelineno-21-81" href="#__codelineno-21-81"></a>git<span class="w"> </span>merge<span class="w"> </span>hotfix/critical-security-fix
</span><span id="__span-21-82"><a id="__codelineno-21-82" name="__codelineno-21-82" href="#__codelineno-21-82"></a>git<span class="w"> </span>tag<span class="w"> </span>-a<span class="w"> </span>v1.2.1<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;Hotfix version 1.2.1&quot;</span>
</span><span id="__span-21-83"><a id="__codelineno-21-83" name="__codelineno-21-83" href="#__codelineno-21-83"></a>
</span><span id="__span-21-84"><a id="__codelineno-21-84" name="__codelineno-21-84" href="#__codelineno-21-84"></a>git<span class="w"> </span>checkout<span class="w"> </span>develop
</span><span id="__span-21-85"><a id="__codelineno-21-85" name="__codelineno-21-85" href="#__codelineno-21-85"></a>git<span class="w"> </span>merge<span class="w"> </span>hotfix/critical-security-fix
</span><span id="__span-21-86"><a id="__codelineno-21-86" name="__codelineno-21-86" href="#__codelineno-21-86"></a>
</span><span id="__span-21-87"><a id="__codelineno-21-87" name="__codelineno-21-87" href="#__codelineno-21-87"></a><span class="c1"># === ADVANCED GIT COMMANDS ===</span>
</span><span id="__span-21-88"><a id="__codelineno-21-88" name="__codelineno-21-88" href="#__codelineno-21-88"></a>
</span><span id="__span-21-89"><a id="__codelineno-21-89" name="__codelineno-21-89" href="#__codelineno-21-89"></a><span class="c1"># Interactive rebase to clean up history</span>
</span><span id="__span-21-90"><a id="__codelineno-21-90" name="__codelineno-21-90" href="#__codelineno-21-90"></a>git<span class="w"> </span>rebase<span class="w"> </span>-i<span class="w"> </span>HEAD~5
</span><span id="__span-21-91"><a id="__codelineno-21-91" name="__codelineno-21-91" href="#__codelineno-21-91"></a>
</span><span id="__span-21-92"><a id="__codelineno-21-92" name="__codelineno-21-92" href="#__codelineno-21-92"></a><span class="c1"># Cherry-pick specific commits</span>
</span><span id="__span-21-93"><a id="__codelineno-21-93" name="__codelineno-21-93" href="#__codelineno-21-93"></a>git<span class="w"> </span>cherry-pick<span class="w"> </span>abc123def456
</span><span id="__span-21-94"><a id="__codelineno-21-94" name="__codelineno-21-94" href="#__codelineno-21-94"></a>
</span><span id="__span-21-95"><a id="__codelineno-21-95" name="__codelineno-21-95" href="#__codelineno-21-95"></a><span class="c1"># Stash work temporarily</span>
</span><span id="__span-21-96"><a id="__codelineno-21-96" name="__codelineno-21-96" href="#__codelineno-21-96"></a>git<span class="w"> </span>stash<span class="w"> </span>push<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;WIP: working on new feature&quot;</span>
</span><span id="__span-21-97"><a id="__codelineno-21-97" name="__codelineno-21-97" href="#__codelineno-21-97"></a>git<span class="w"> </span>stash<span class="w"> </span>list
</span><span id="__span-21-98"><a id="__codelineno-21-98" name="__codelineno-21-98" href="#__codelineno-21-98"></a>git<span class="w"> </span>stash<span class="w"> </span>pop
</span><span id="__span-21-99"><a id="__codelineno-21-99" name="__codelineno-21-99" href="#__codelineno-21-99"></a>
</span><span id="__span-21-100"><a id="__codelineno-21-100" name="__codelineno-21-100" href="#__codelineno-21-100"></a><span class="c1"># Find when a bug was introduced</span>
</span><span id="__span-21-101"><a id="__codelineno-21-101" name="__codelineno-21-101" href="#__codelineno-21-101"></a>git<span class="w"> </span>bisect<span class="w"> </span>start
</span><span id="__span-21-102"><a id="__codelineno-21-102" name="__codelineno-21-102" href="#__codelineno-21-102"></a>git<span class="w"> </span>bisect<span class="w"> </span>bad<span class="w"> </span>HEAD
</span><span id="__span-21-103"><a id="__codelineno-21-103" name="__codelineno-21-103" href="#__codelineno-21-103"></a>git<span class="w"> </span>bisect<span class="w"> </span>good<span class="w"> </span>v1.1.0
</span><span id="__span-21-104"><a id="__codelineno-21-104" name="__codelineno-21-104" href="#__codelineno-21-104"></a><span class="c1"># Git will checkout commits for testing</span>
</span><span id="__span-21-105"><a id="__codelineno-21-105" name="__codelineno-21-105" href="#__codelineno-21-105"></a><span class="c1"># Mark each as good or bad until bug is found</span>
</span><span id="__span-21-106"><a id="__codelineno-21-106" name="__codelineno-21-106" href="#__codelineno-21-106"></a>
</span><span id="__span-21-107"><a id="__codelineno-21-107" name="__codelineno-21-107" href="#__codelineno-21-107"></a><span class="c1"># View detailed commit history</span>
</span><span id="__span-21-108"><a id="__codelineno-21-108" name="__codelineno-21-108" href="#__codelineno-21-108"></a>git<span class="w"> </span>log<span class="w"> </span>--oneline<span class="w"> </span>--graph<span class="w"> </span>--decorate<span class="w"> </span>--all
</span><span id="__span-21-109"><a id="__codelineno-21-109" name="__codelineno-21-109" href="#__codelineno-21-109"></a>
</span><span id="__span-21-110"><a id="__codelineno-21-110" name="__codelineno-21-110" href="#__codelineno-21-110"></a><span class="c1"># Show what changed in a file</span>
</span><span id="__span-21-111"><a id="__codelineno-21-111" name="__codelineno-21-111" href="#__codelineno-21-111"></a>git<span class="w"> </span>blame<span class="w"> </span>src/components/Header.js
</span><span id="__span-21-112"><a id="__codelineno-21-112" name="__codelineno-21-112" href="#__codelineno-21-112"></a>git<span class="w"> </span>log<span class="w"> </span>-p<span class="w"> </span>src/components/Header.js
</span><span id="__span-21-113"><a id="__codelineno-21-113" name="__codelineno-21-113" href="#__codelineno-21-113"></a>
</span><span id="__span-21-114"><a id="__codelineno-21-114" name="__codelineno-21-114" href="#__codelineno-21-114"></a><span class="c1"># === COLLABORATION COMMANDS ===</span>
</span><span id="__span-21-115"><a id="__codelineno-21-115" name="__codelineno-21-115" href="#__codelineno-21-115"></a>
</span><span id="__span-21-116"><a id="__codelineno-21-116" name="__codelineno-21-116" href="#__codelineno-21-116"></a><span class="c1"># Sync with remote</span>
</span><span id="__span-21-117"><a id="__codelineno-21-117" name="__codelineno-21-117" href="#__codelineno-21-117"></a>git<span class="w"> </span>fetch<span class="w"> </span>origin
</span><span id="__span-21-118"><a id="__codelineno-21-118" name="__codelineno-21-118" href="#__codelineno-21-118"></a>git<span class="w"> </span>pull<span class="w"> </span>origin<span class="w"> </span>develop
</span><span id="__span-21-119"><a id="__codelineno-21-119" name="__codelineno-21-119" href="#__codelineno-21-119"></a>git<span class="w"> </span>push<span class="w"> </span>origin<span class="w"> </span>feature/my-feature
</span><span id="__span-21-120"><a id="__codelineno-21-120" name="__codelineno-21-120" href="#__codelineno-21-120"></a>
</span><span id="__span-21-121"><a id="__codelineno-21-121" name="__codelineno-21-121" href="#__codelineno-21-121"></a><span class="c1"># Handle merge conflicts</span>
</span><span id="__span-21-122"><a id="__codelineno-21-122" name="__codelineno-21-122" href="#__codelineno-21-122"></a>git<span class="w"> </span>status<span class="w">  </span><span class="c1"># See conflicted files</span>
</span><span id="__span-21-123"><a id="__codelineno-21-123" name="__codelineno-21-123" href="#__codelineno-21-123"></a><span class="c1"># Edit files to resolve conflicts</span>
</span><span id="__span-21-124"><a id="__codelineno-21-124" name="__codelineno-21-124" href="#__codelineno-21-124"></a>git<span class="w"> </span>add<span class="w"> </span>resolved-file.js
</span><span id="__span-21-125"><a id="__codelineno-21-125" name="__codelineno-21-125" href="#__codelineno-21-125"></a>git<span class="w"> </span>commit<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;resolve: merge conflicts in user component&quot;</span>
</span><span id="__span-21-126"><a id="__codelineno-21-126" name="__codelineno-21-126" href="#__codelineno-21-126"></a>
</span><span id="__span-21-127"><a id="__codelineno-21-127" name="__codelineno-21-127" href="#__codelineno-21-127"></a><span class="c1"># === SEMANTIC COMMITS ===</span>
</span><span id="__span-21-128"><a id="__codelineno-21-128" name="__codelineno-21-128" href="#__codelineno-21-128"></a><span class="c1"># Following Conventional Commits specification</span>
</span><span id="__span-21-129"><a id="__codelineno-21-129" name="__codelineno-21-129" href="#__codelineno-21-129"></a>
</span><span id="__span-21-130"><a id="__codelineno-21-130" name="__codelineno-21-130" href="#__codelineno-21-130"></a>git<span class="w"> </span>commit<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;feat: add shopping cart functionality&quot;</span>
</span><span id="__span-21-131"><a id="__codelineno-21-131" name="__codelineno-21-131" href="#__codelineno-21-131"></a>git<span class="w"> </span>commit<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;fix: resolve mobile navigation issue&quot;</span><span class="w"> </span>
</span><span id="__span-21-132"><a id="__codelineno-21-132" name="__codelineno-21-132" href="#__codelineno-21-132"></a>git<span class="w"> </span>commit<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;docs: update API documentation&quot;</span>
</span><span id="__span-21-133"><a id="__codelineno-21-133" name="__codelineno-21-133" href="#__codelineno-21-133"></a>git<span class="w"> </span>commit<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;style: format code with prettier&quot;</span>
</span><span id="__span-21-134"><a id="__codelineno-21-134" name="__codelineno-21-134" href="#__codelineno-21-134"></a>git<span class="w"> </span>commit<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;refactor: optimize database queries&quot;</span>
</span><span id="__span-21-135"><a id="__codelineno-21-135" name="__codelineno-21-135" href="#__codelineno-21-135"></a>git<span class="w"> </span>commit<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;test: add unit tests for auth service&quot;</span>
</span><span id="__span-21-136"><a id="__codelineno-21-136" name="__codelineno-21-136" href="#__codelineno-21-136"></a>git<span class="w"> </span>commit<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;chore: update dependencies&quot;</span>
</span><span id="__span-21-137"><a id="__codelineno-21-137" name="__codelineno-21-137" href="#__codelineno-21-137"></a>git<span class="w"> </span>commit<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;perf: improve page load speed&quot;</span>
</span><span id="__span-21-138"><a id="__codelineno-21-138" name="__codelineno-21-138" href="#__codelineno-21-138"></a>git<span class="w"> </span>commit<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;ci: add automated testing pipeline&quot;</span>
</span><span id="__span-21-139"><a id="__codelineno-21-139" name="__codelineno-21-139" href="#__codelineno-21-139"></a>git<span class="w"> </span>commit<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;build: update webpack configuration&quot;</span>
</span></code></pre></div>
</details>
<details class="example">
<summary><strong>Modern javascript project configuration with package.json</strong></summary>
<div class="language-json highlight"><pre><span></span><code><span id="__span-22-1"><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a><span class="p">{</span>
</span><span id="__span-22-2"><a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a><span class="w">  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;modern-web-app&quot;</span><span class="p">,</span>
</span><span id="__span-22-3"><a id="__codelineno-22-3" name="__codelineno-22-3" href="#__codelineno-22-3"></a><span class="w">  </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1.0.0&quot;</span><span class="p">,</span>
</span><span id="__span-22-4"><a id="__codelineno-22-4" name="__codelineno-22-4" href="#__codelineno-22-4"></a><span class="w">  </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;module&quot;</span><span class="p">,</span>
</span><span id="__span-22-5"><a id="__codelineno-22-5" name="__codelineno-22-5" href="#__codelineno-22-5"></a><span class="w">  </span><span class="nt">&quot;scripts&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-22-6"><a id="__codelineno-22-6" name="__codelineno-22-6" href="#__codelineno-22-6"></a><span class="w">    </span><span class="nt">&quot;dev&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;vite&quot;</span><span class="p">,</span>
</span><span id="__span-22-7"><a id="__codelineno-22-7" name="__codelineno-22-7" href="#__codelineno-22-7"></a><span class="w">    </span><span class="nt">&quot;build&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;vite build&quot;</span><span class="p">,</span>
</span><span id="__span-22-8"><a id="__codelineno-22-8" name="__codelineno-22-8" href="#__codelineno-22-8"></a><span class="w">    </span><span class="nt">&quot;preview&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;vite preview&quot;</span><span class="p">,</span>
</span><span id="__span-22-9"><a id="__codelineno-22-9" name="__codelineno-22-9" href="#__codelineno-22-9"></a><span class="w">    </span><span class="nt">&quot;test&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;vitest&quot;</span><span class="p">,</span>
</span><span id="__span-22-10"><a id="__codelineno-22-10" name="__codelineno-22-10" href="#__codelineno-22-10"></a><span class="w">    </span><span class="nt">&quot;test:coverage&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;vitest --coverage&quot;</span><span class="p">,</span>
</span><span id="__span-22-11"><a id="__codelineno-22-11" name="__codelineno-22-11" href="#__codelineno-22-11"></a><span class="w">    </span><span class="nt">&quot;lint&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;eslint src --ext .js,.jsx,.ts,.tsx&quot;</span><span class="p">,</span>
</span><span id="__span-22-12"><a id="__codelineno-22-12" name="__codelineno-22-12" href="#__codelineno-22-12"></a><span class="w">    </span><span class="nt">&quot;lint:fix&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;eslint src --ext .js,.jsx,.ts,.tsx --fix&quot;</span><span class="p">,</span>
</span><span id="__span-22-13"><a id="__codelineno-22-13" name="__codelineno-22-13" href="#__codelineno-22-13"></a><span class="w">    </span><span class="nt">&quot;format&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;prettier --write src/**/*.{js,jsx,ts,tsx,css,md}&quot;</span><span class="p">,</span>
</span><span id="__span-22-14"><a id="__codelineno-22-14" name="__codelineno-22-14" href="#__codelineno-22-14"></a><span class="w">    </span><span class="nt">&quot;type-check&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;tsc --noEmit&quot;</span><span class="p">,</span>
</span><span id="__span-22-15"><a id="__codelineno-22-15" name="__codelineno-22-15" href="#__codelineno-22-15"></a><span class="w">    </span><span class="nt">&quot;prepare&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;husky install&quot;</span>
</span><span id="__span-22-16"><a id="__codelineno-22-16" name="__codelineno-22-16" href="#__codelineno-22-16"></a><span class="w">  </span><span class="p">},</span>
</span><span id="__span-22-17"><a id="__codelineno-22-17" name="__codelineno-22-17" href="#__codelineno-22-17"></a><span class="w">  </span><span class="nt">&quot;dependencies&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-22-18"><a id="__codelineno-22-18" name="__codelineno-22-18" href="#__codelineno-22-18"></a><span class="w">    </span><span class="nt">&quot;react&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;^18.2.0&quot;</span><span class="p">,</span>
</span><span id="__span-22-19"><a id="__codelineno-22-19" name="__codelineno-22-19" href="#__codelineno-22-19"></a><span class="w">    </span><span class="nt">&quot;react-dom&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;^18.2.0&quot;</span><span class="p">,</span>
</span><span id="__span-22-20"><a id="__codelineno-22-20" name="__codelineno-22-20" href="#__codelineno-22-20"></a><span class="w">    </span><span class="nt">&quot;react-router-dom&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;^6.8.0&quot;</span><span class="p">,</span>
</span><span id="__span-22-21"><a id="__codelineno-22-21" name="__codelineno-22-21" href="#__codelineno-22-21"></a><span class="w">    </span><span class="nt">&quot;axios&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;^1.3.0&quot;</span><span class="p">,</span>
</span><span id="__span-22-22"><a id="__codelineno-22-22" name="__codelineno-22-22" href="#__codelineno-22-22"></a><span class="w">    </span><span class="nt">&quot;date-fns&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;^2.29.0&quot;</span><span class="p">,</span>
</span><span id="__span-22-23"><a id="__codelineno-22-23" name="__codelineno-22-23" href="#__codelineno-22-23"></a><span class="w">    </span><span class="nt">&quot;clsx&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;^1.2.0&quot;</span>
</span><span id="__span-22-24"><a id="__codelineno-22-24" name="__codelineno-22-24" href="#__codelineno-22-24"></a><span class="w">  </span><span class="p">},</span>
</span><span id="__span-22-25"><a id="__codelineno-22-25" name="__codelineno-22-25" href="#__codelineno-22-25"></a><span class="w">  </span><span class="nt">&quot;devDependencies&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-22-26"><a id="__codelineno-22-26" name="__codelineno-22-26" href="#__codelineno-22-26"></a><span class="w">    </span><span class="nt">&quot;@types/react&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;^18.0.0&quot;</span><span class="p">,</span>
</span><span id="__span-22-27"><a id="__codelineno-22-27" name="__codelineno-22-27" href="#__codelineno-22-27"></a><span class="w">    </span><span class="nt">&quot;@types/react-dom&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;^18.0.0&quot;</span><span class="p">,</span>
</span><span id="__span-22-28"><a id="__codelineno-22-28" name="__codelineno-22-28" href="#__codelineno-22-28"></a><span class="w">    </span><span class="nt">&quot;@vitejs/plugin-react&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;^3.0.0&quot;</span><span class="p">,</span>
</span><span id="__span-22-29"><a id="__codelineno-22-29" name="__codelineno-22-29" href="#__codelineno-22-29"></a><span class="w">    </span><span class="nt">&quot;autoprefixer&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;^10.4.0&quot;</span><span class="p">,</span>
</span><span id="__span-22-30"><a id="__codelineno-22-30" name="__codelineno-22-30" href="#__codelineno-22-30"></a><span class="w">    </span><span class="nt">&quot;eslint&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;^8.0.0&quot;</span><span class="p">,</span>
</span><span id="__span-22-31"><a id="__codelineno-22-31" name="__codelineno-22-31" href="#__codelineno-22-31"></a><span class="w">    </span><span class="nt">&quot;eslint-plugin-react&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;^7.32.0&quot;</span><span class="p">,</span>
</span><span id="__span-22-32"><a id="__codelineno-22-32" name="__codelineno-22-32" href="#__codelineno-22-32"></a><span class="w">    </span><span class="nt">&quot;husky&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;^8.0.0&quot;</span><span class="p">,</span>
</span><span id="__span-22-33"><a id="__codelineno-22-33" name="__codelineno-22-33" href="#__codelineno-22-33"></a><span class="w">    </span><span class="nt">&quot;lint-staged&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;^13.0.0&quot;</span><span class="p">,</span>
</span><span id="__span-22-34"><a id="__codelineno-22-34" name="__codelineno-22-34" href="#__codelineno-22-34"></a><span class="w">    </span><span class="nt">&quot;postcss&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;^8.4.0&quot;</span><span class="p">,</span>
</span><span id="__span-22-35"><a id="__codelineno-22-35" name="__codelineno-22-35" href="#__codelineno-22-35"></a><span class="w">    </span><span class="nt">&quot;prettier&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;^2.8.0&quot;</span><span class="p">,</span>
</span><span id="__span-22-36"><a id="__codelineno-22-36" name="__codelineno-22-36" href="#__codelineno-22-36"></a><span class="w">    </span><span class="nt">&quot;tailwindcss&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;^3.2.0&quot;</span><span class="p">,</span>
</span><span id="__span-22-37"><a id="__codelineno-22-37" name="__codelineno-22-37" href="#__codelineno-22-37"></a><span class="w">    </span><span class="nt">&quot;typescript&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;^4.9.0&quot;</span><span class="p">,</span>
</span><span id="__span-22-38"><a id="__codelineno-22-38" name="__codelineno-22-38" href="#__codelineno-22-38"></a><span class="w">    </span><span class="nt">&quot;vite&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;^4.1.0&quot;</span><span class="p">,</span>
</span><span id="__span-22-39"><a id="__codelineno-22-39" name="__codelineno-22-39" href="#__codelineno-22-39"></a><span class="w">    </span><span class="nt">&quot;vitest&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;^0.28.0&quot;</span>
</span><span id="__span-22-40"><a id="__codelineno-22-40" name="__codelineno-22-40" href="#__codelineno-22-40"></a><span class="w">  </span><span class="p">},</span>
</span><span id="__span-22-41"><a id="__codelineno-22-41" name="__codelineno-22-41" href="#__codelineno-22-41"></a><span class="w">  </span><span class="nt">&quot;lint-staged&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-22-42"><a id="__codelineno-22-42" name="__codelineno-22-42" href="#__codelineno-22-42"></a><span class="w">    </span><span class="nt">&quot;*.{js,jsx,ts,tsx}&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;eslint --fix&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;prettier --write&quot;</span><span class="p">],</span>
</span><span id="__span-22-43"><a id="__codelineno-22-43" name="__codelineno-22-43" href="#__codelineno-22-43"></a><span class="w">    </span><span class="nt">&quot;*.{css,md,json}&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;prettier --write&quot;</span><span class="p">]</span>
</span><span id="__span-22-44"><a id="__codelineno-22-44" name="__codelineno-22-44" href="#__codelineno-22-44"></a><span class="w">  </span><span class="p">},</span>
</span><span id="__span-22-45"><a id="__codelineno-22-45" name="__codelineno-22-45" href="#__codelineno-22-45"></a><span class="w">  </span><span class="nt">&quot;engines&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-22-46"><a id="__codelineno-22-46" name="__codelineno-22-46" href="#__codelineno-22-46"></a><span class="w">    </span><span class="nt">&quot;node&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&gt;=16.0.0&quot;</span><span class="p">,</span>
</span><span id="__span-22-47"><a id="__codelineno-22-47" name="__codelineno-22-47" href="#__codelineno-22-47"></a><span class="w">    </span><span class="nt">&quot;npm&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&gt;=8.0.0&quot;</span>
</span><span id="__span-22-48"><a id="__codelineno-22-48" name="__codelineno-22-48" href="#__codelineno-22-48"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-22-49"><a id="__codelineno-22-49" name="__codelineno-22-49" href="#__codelineno-22-49"></a><span class="p">}</span>
</span></code></pre></div>
</details>
<details class="example">
<summary>Modern ES6+ Module System</summary>
<div class="language-javascript highlight"><pre><span></span><code><span id="__span-23-1"><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a><span class="c1">// Modern ES6+ Module System</span>
</span><span id="__span-23-2"><a id="__codelineno-23-2" name="__codelineno-23-2" href="#__codelineno-23-2"></a><span class="c1">// utils/api.js</span>
</span><span id="__span-23-3"><a id="__codelineno-23-3" name="__codelineno-23-3" href="#__codelineno-23-3"></a><span class="k">export</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nx">APIClient</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-23-4"><a id="__codelineno-23-4" name="__codelineno-23-4" href="#__codelineno-23-4"></a><span class="w">    </span><span class="kr">constructor</span><span class="p">(</span><span class="nx">baseURL</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-23-5"><a id="__codelineno-23-5" name="__codelineno-23-5" href="#__codelineno-23-5"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">baseURL</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">baseURL</span><span class="p">;</span>
</span><span id="__span-23-6"><a id="__codelineno-23-6" name="__codelineno-23-6" href="#__codelineno-23-6"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">defaultHeaders</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-23-7"><a id="__codelineno-23-7" name="__codelineno-23-7" href="#__codelineno-23-7"></a><span class="w">            </span><span class="s1">&#39;Content-Type&#39;</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;application/json&#39;</span>
</span><span id="__span-23-8"><a id="__codelineno-23-8" name="__codelineno-23-8" href="#__codelineno-23-8"></a><span class="w">        </span><span class="p">};</span>
</span><span id="__span-23-9"><a id="__codelineno-23-9" name="__codelineno-23-9" href="#__codelineno-23-9"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-23-10"><a id="__codelineno-23-10" name="__codelineno-23-10" href="#__codelineno-23-10"></a>
</span><span id="__span-23-11"><a id="__codelineno-23-11" name="__codelineno-23-11" href="#__codelineno-23-11"></a><span class="w">    </span><span class="k">async</span><span class="w"> </span><span class="nx">request</span><span class="p">(</span><span class="nx">endpoint</span><span class="p">,</span><span class="w"> </span><span class="nx">options</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{})</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-23-12"><a id="__codelineno-23-12" name="__codelineno-23-12" href="#__codelineno-23-12"></a><span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">url</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sb">`</span><span class="si">${</span><span class="k">this</span><span class="p">.</span><span class="nx">baseURL</span><span class="si">}${</span><span class="nx">endpoint</span><span class="si">}</span><span class="sb">`</span><span class="p">;</span>
</span><span id="__span-23-13"><a id="__codelineno-23-13" name="__codelineno-23-13" href="#__codelineno-23-13"></a><span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-23-14"><a id="__codelineno-23-14" name="__codelineno-23-14" href="#__codelineno-23-14"></a><span class="w">            </span><span class="nx">headers</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">...</span><span class="k">this</span><span class="p">.</span><span class="nx">defaultHeaders</span><span class="p">,</span><span class="w"> </span><span class="p">...</span><span class="nx">options</span><span class="p">.</span><span class="nx">headers</span><span class="w"> </span><span class="p">},</span>
</span><span id="__span-23-15"><a id="__codelineno-23-15" name="__codelineno-23-15" href="#__codelineno-23-15"></a><span class="w">            </span><span class="p">...</span><span class="nx">options</span>
</span><span id="__span-23-16"><a id="__codelineno-23-16" name="__codelineno-23-16" href="#__codelineno-23-16"></a><span class="w">        </span><span class="p">};</span>
</span><span id="__span-23-17"><a id="__codelineno-23-17" name="__codelineno-23-17" href="#__codelineno-23-17"></a>
</span><span id="__span-23-18"><a id="__codelineno-23-18" name="__codelineno-23-18" href="#__codelineno-23-18"></a><span class="w">        </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-23-19"><a id="__codelineno-23-19" name="__codelineno-23-19" href="#__codelineno-23-19"></a><span class="w">            </span><span class="kd">const</span><span class="w"> </span><span class="nx">response</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">fetch</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span><span class="w"> </span><span class="nx">config</span><span class="p">);</span>
</span><span id="__span-23-20"><a id="__codelineno-23-20" name="__codelineno-23-20" href="#__codelineno-23-20"></a>
</span><span id="__span-23-21"><a id="__codelineno-23-21" name="__codelineno-23-21" href="#__codelineno-23-21"></a><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">response</span><span class="p">.</span><span class="nx">ok</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-23-22"><a id="__codelineno-23-22" name="__codelineno-23-22" href="#__codelineno-23-22"></a><span class="w">                </span><span class="k">throw</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="ne">Error</span><span class="p">(</span><span class="sb">`HTTP error! status: </span><span class="si">${</span><span class="nx">response</span><span class="p">.</span><span class="nx">status</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
</span><span id="__span-23-23"><a id="__codelineno-23-23" name="__codelineno-23-23" href="#__codelineno-23-23"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-23-24"><a id="__codelineno-23-24" name="__codelineno-23-24" href="#__codelineno-23-24"></a>
</span><span id="__span-23-25"><a id="__codelineno-23-25" name="__codelineno-23-25" href="#__codelineno-23-25"></a><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">response</span><span class="p">.</span><span class="nx">json</span><span class="p">();</span>
</span><span id="__span-23-26"><a id="__codelineno-23-26" name="__codelineno-23-26" href="#__codelineno-23-26"></a><span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="nx">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-23-27"><a id="__codelineno-23-27" name="__codelineno-23-27" href="#__codelineno-23-27"></a><span class="w">            </span><span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s1">&#39;API request failed:&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">error</span><span class="p">);</span>
</span><span id="__span-23-28"><a id="__codelineno-23-28" name="__codelineno-23-28" href="#__codelineno-23-28"></a><span class="w">            </span><span class="k">throw</span><span class="w"> </span><span class="nx">error</span><span class="p">;</span>
</span><span id="__span-23-29"><a id="__codelineno-23-29" name="__codelineno-23-29" href="#__codelineno-23-29"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-23-30"><a id="__codelineno-23-30" name="__codelineno-23-30" href="#__codelineno-23-30"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-23-31"><a id="__codelineno-23-31" name="__codelineno-23-31" href="#__codelineno-23-31"></a>
</span><span id="__span-23-32"><a id="__codelineno-23-32" name="__codelineno-23-32" href="#__codelineno-23-32"></a><span class="w">    </span><span class="c1">// Convenience methods</span>
</span><span id="__span-23-33"><a id="__codelineno-23-33" name="__codelineno-23-33" href="#__codelineno-23-33"></a><span class="w">    </span><span class="nx">get</span><span class="p">(</span><span class="nx">endpoint</span><span class="p">,</span><span class="w"> </span><span class="nx">options</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{})</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-23-34"><a id="__codelineno-23-34" name="__codelineno-23-34" href="#__codelineno-23-34"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">request</span><span class="p">(</span><span class="nx">endpoint</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">...</span><span class="nx">options</span><span class="p">,</span><span class="w"> </span><span class="nx">method</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;GET&#39;</span><span class="w"> </span><span class="p">});</span>
</span><span id="__span-23-35"><a id="__codelineno-23-35" name="__codelineno-23-35" href="#__codelineno-23-35"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-23-36"><a id="__codelineno-23-36" name="__codelineno-23-36" href="#__codelineno-23-36"></a>
</span><span id="__span-23-37"><a id="__codelineno-23-37" name="__codelineno-23-37" href="#__codelineno-23-37"></a><span class="w">    </span><span class="nx">post</span><span class="p">(</span><span class="nx">endpoint</span><span class="p">,</span><span class="w"> </span><span class="nx">data</span><span class="p">,</span><span class="w"> </span><span class="nx">options</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{})</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-23-38"><a id="__codelineno-23-38" name="__codelineno-23-38" href="#__codelineno-23-38"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">request</span><span class="p">(</span><span class="nx">endpoint</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-23-39"><a id="__codelineno-23-39" name="__codelineno-23-39" href="#__codelineno-23-39"></a><span class="w">            </span><span class="p">...</span><span class="nx">options</span><span class="p">,</span>
</span><span id="__span-23-40"><a id="__codelineno-23-40" name="__codelineno-23-40" href="#__codelineno-23-40"></a><span class="w">            </span><span class="nx">method</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;POST&#39;</span><span class="p">,</span>
</span><span id="__span-23-41"><a id="__codelineno-23-41" name="__codelineno-23-41" href="#__codelineno-23-41"></a><span class="w">            </span><span class="nx">body</span><span class="o">:</span><span class="w"> </span><span class="nb">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span>
</span><span id="__span-23-42"><a id="__codelineno-23-42" name="__codelineno-23-42" href="#__codelineno-23-42"></a><span class="w">        </span><span class="p">});</span>
</span><span id="__span-23-43"><a id="__codelineno-23-43" name="__codelineno-23-43" href="#__codelineno-23-43"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-23-44"><a id="__codelineno-23-44" name="__codelineno-23-44" href="#__codelineno-23-44"></a>
</span><span id="__span-23-45"><a id="__codelineno-23-45" name="__codelineno-23-45" href="#__codelineno-23-45"></a><span class="w">    </span><span class="nx">put</span><span class="p">(</span><span class="nx">endpoint</span><span class="p">,</span><span class="w"> </span><span class="nx">data</span><span class="p">,</span><span class="w"> </span><span class="nx">options</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{})</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-23-46"><a id="__codelineno-23-46" name="__codelineno-23-46" href="#__codelineno-23-46"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">request</span><span class="p">(</span><span class="nx">endpoint</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-23-47"><a id="__codelineno-23-47" name="__codelineno-23-47" href="#__codelineno-23-47"></a><span class="w">            </span><span class="p">...</span><span class="nx">options</span><span class="p">,</span>
</span><span id="__span-23-48"><a id="__codelineno-23-48" name="__codelineno-23-48" href="#__codelineno-23-48"></a><span class="w">            </span><span class="nx">method</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;PUT&#39;</span><span class="p">,</span>
</span><span id="__span-23-49"><a id="__codelineno-23-49" name="__codelineno-23-49" href="#__codelineno-23-49"></a><span class="w">            </span><span class="nx">body</span><span class="o">:</span><span class="w"> </span><span class="nb">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span>
</span><span id="__span-23-50"><a id="__codelineno-23-50" name="__codelineno-23-50" href="#__codelineno-23-50"></a><span class="w">        </span><span class="p">});</span>
</span><span id="__span-23-51"><a id="__codelineno-23-51" name="__codelineno-23-51" href="#__codelineno-23-51"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-23-52"><a id="__codelineno-23-52" name="__codelineno-23-52" href="#__codelineno-23-52"></a>
</span><span id="__span-23-53"><a id="__codelineno-23-53" name="__codelineno-23-53" href="#__codelineno-23-53"></a><span class="w">    </span><span class="ow">delete</span><span class="p">(</span><span class="nx">endpoint</span><span class="p">,</span><span class="w"> </span><span class="nx">options</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{})</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-23-54"><a id="__codelineno-23-54" name="__codelineno-23-54" href="#__codelineno-23-54"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">request</span><span class="p">(</span><span class="nx">endpoint</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">...</span><span class="nx">options</span><span class="p">,</span><span class="w"> </span><span class="nx">method</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;DELETE&#39;</span><span class="w"> </span><span class="p">});</span>
</span><span id="__span-23-55"><a id="__codelineno-23-55" name="__codelineno-23-55" href="#__codelineno-23-55"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-23-56"><a id="__codelineno-23-56" name="__codelineno-23-56" href="#__codelineno-23-56"></a><span class="p">}</span>
</span><span id="__span-23-57"><a id="__codelineno-23-57" name="__codelineno-23-57" href="#__codelineno-23-57"></a>
</span><span id="__span-23-58"><a id="__codelineno-23-58" name="__codelineno-23-58" href="#__codelineno-23-58"></a><span class="c1">// Export default instance</span>
</span><span id="__span-23-59"><a id="__codelineno-23-59" name="__codelineno-23-59" href="#__codelineno-23-59"></a><span class="k">export</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">api</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">APIClient</span><span class="p">(</span><span class="s1">&#39;https://api.example.com&#39;</span><span class="p">);</span>
</span><span id="__span-23-60"><a id="__codelineno-23-60" name="__codelineno-23-60" href="#__codelineno-23-60"></a>
</span><span id="__span-23-61"><a id="__codelineno-23-61" name="__codelineno-23-61" href="#__codelineno-23-61"></a><span class="c1">// components/UserProfile.js</span>
</span><span id="__span-23-62"><a id="__codelineno-23-62" name="__codelineno-23-62" href="#__codelineno-23-62"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">api</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;../utils/api.js&#39;</span><span class="p">;</span>
</span><span id="__span-23-63"><a id="__codelineno-23-63" name="__codelineno-23-63" href="#__codelineno-23-63"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">formatDate</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;../utils/date.js&#39;</span><span class="p">;</span>
</span><span id="__span-23-64"><a id="__codelineno-23-64" name="__codelineno-23-64" href="#__codelineno-23-64"></a>
</span><span id="__span-23-65"><a id="__codelineno-23-65" name="__codelineno-23-65" href="#__codelineno-23-65"></a><span class="k">export</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nx">UserProfile</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-23-66"><a id="__codelineno-23-66" name="__codelineno-23-66" href="#__codelineno-23-66"></a><span class="w">    </span><span class="kr">constructor</span><span class="p">(</span><span class="nx">userId</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-23-67"><a id="__codelineno-23-67" name="__codelineno-23-67" href="#__codelineno-23-67"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">userId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">userId</span><span class="p">;</span>
</span><span id="__span-23-68"><a id="__codelineno-23-68" name="__codelineno-23-68" href="#__codelineno-23-68"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">userData</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span>
</span><span id="__span-23-69"><a id="__codelineno-23-69" name="__codelineno-23-69" href="#__codelineno-23-69"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-23-70"><a id="__codelineno-23-70" name="__codelineno-23-70" href="#__codelineno-23-70"></a>
</span><span id="__span-23-71"><a id="__codelineno-23-71" name="__codelineno-23-71" href="#__codelineno-23-71"></a><span class="w">    </span><span class="k">async</span><span class="w"> </span><span class="nx">load</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-23-72"><a id="__codelineno-23-72" name="__codelineno-23-72" href="#__codelineno-23-72"></a><span class="w">        </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-23-73"><a id="__codelineno-23-73" name="__codelineno-23-73" href="#__codelineno-23-73"></a><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="nx">userData</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">api</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="sb">`/users/</span><span class="si">${</span><span class="k">this</span><span class="p">.</span><span class="nx">userId</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
</span><span id="__span-23-74"><a id="__codelineno-23-74" name="__codelineno-23-74" href="#__codelineno-23-74"></a><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">userData</span><span class="p">;</span>
</span><span id="__span-23-75"><a id="__codelineno-23-75" name="__codelineno-23-75" href="#__codelineno-23-75"></a><span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="nx">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-23-76"><a id="__codelineno-23-76" name="__codelineno-23-76" href="#__codelineno-23-76"></a><span class="w">            </span><span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s1">&#39;Failed to load user profile:&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">error</span><span class="p">);</span>
</span><span id="__span-23-77"><a id="__codelineno-23-77" name="__codelineno-23-77" href="#__codelineno-23-77"></a><span class="w">            </span><span class="k">throw</span><span class="w"> </span><span class="nx">error</span><span class="p">;</span>
</span><span id="__span-23-78"><a id="__codelineno-23-78" name="__codelineno-23-78" href="#__codelineno-23-78"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-23-79"><a id="__codelineno-23-79" name="__codelineno-23-79" href="#__codelineno-23-79"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-23-80"><a id="__codelineno-23-80" name="__codelineno-23-80" href="#__codelineno-23-80"></a>
</span><span id="__span-23-81"><a id="__codelineno-23-81" name="__codelineno-23-81" href="#__codelineno-23-81"></a><span class="w">    </span><span class="nx">render</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-23-82"><a id="__codelineno-23-82" name="__codelineno-23-82" href="#__codelineno-23-82"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">userData</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-23-83"><a id="__codelineno-23-83" name="__codelineno-23-83" href="#__codelineno-23-83"></a><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="s1">&#39;&lt;div class=&quot;loading&quot;&gt;Loading user profile...&lt;/div&gt;&#39;</span><span class="p">;</span>
</span><span id="__span-23-84"><a id="__codelineno-23-84" name="__codelineno-23-84" href="#__codelineno-23-84"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-23-85"><a id="__codelineno-23-85" name="__codelineno-23-85" href="#__codelineno-23-85"></a>
</span><span id="__span-23-86"><a id="__codelineno-23-86" name="__codelineno-23-86" href="#__codelineno-23-86"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="sb">`</span>
</span><span id="__span-23-87"><a id="__codelineno-23-87" name="__codelineno-23-87" href="#__codelineno-23-87"></a><span class="sb">            &lt;div class=&quot;user-profile&quot;&gt;</span>
</span><span id="__span-23-88"><a id="__codelineno-23-88" name="__codelineno-23-88" href="#__codelineno-23-88"></a><span class="sb">                &lt;h2&gt;</span><span class="si">${</span><span class="k">this</span><span class="p">.</span><span class="nx">userData</span><span class="p">.</span><span class="nx">name</span><span class="si">}</span><span class="sb">&lt;/h2&gt;</span>
</span><span id="__span-23-89"><a id="__codelineno-23-89" name="__codelineno-23-89" href="#__codelineno-23-89"></a><span class="sb">                &lt;p&gt;Member since: </span><span class="si">${</span><span class="nx">formatDate</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">userData</span><span class="p">.</span><span class="nx">createdAt</span><span class="p">)</span><span class="si">}</span><span class="sb">&lt;/p&gt;</span>
</span><span id="__span-23-90"><a id="__codelineno-23-90" name="__codelineno-23-90" href="#__codelineno-23-90"></a><span class="sb">                &lt;p&gt;Email: </span><span class="si">${</span><span class="k">this</span><span class="p">.</span><span class="nx">userData</span><span class="p">.</span><span class="nx">email</span><span class="si">}</span><span class="sb">&lt;/p&gt;</span>
</span><span id="__span-23-91"><a id="__codelineno-23-91" name="__codelineno-23-91" href="#__codelineno-23-91"></a><span class="sb">            &lt;/div&gt;</span>
</span><span id="__span-23-92"><a id="__codelineno-23-92" name="__codelineno-23-92" href="#__codelineno-23-92"></a><span class="sb">        `</span><span class="p">;</span>
</span><span id="__span-23-93"><a id="__codelineno-23-93" name="__codelineno-23-93" href="#__codelineno-23-93"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-23-94"><a id="__codelineno-23-94" name="__codelineno-23-94" href="#__codelineno-23-94"></a><span class="p">}</span>
</span><span id="__span-23-95"><a id="__codelineno-23-95" name="__codelineno-23-95" href="#__codelineno-23-95"></a>
</span><span id="__span-23-96"><a id="__codelineno-23-96" name="__codelineno-23-96" href="#__codelineno-23-96"></a><span class="c1">// main.js - Application entry point</span>
</span><span id="__span-23-97"><a id="__codelineno-23-97" name="__codelineno-23-97" href="#__codelineno-23-97"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">UserProfile</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./components/UserProfile.js&#39;</span><span class="p">;</span>
</span><span id="__span-23-98"><a id="__codelineno-23-98" name="__codelineno-23-98" href="#__codelineno-23-98"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Router</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./utils/router.js&#39;</span><span class="p">;</span>
</span><span id="__span-23-99"><a id="__codelineno-23-99" name="__codelineno-23-99" href="#__codelineno-23-99"></a>
</span><span id="__span-23-100"><a id="__codelineno-23-100" name="__codelineno-23-100" href="#__codelineno-23-100"></a><span class="c1">// Initialize application</span>
</span><span id="__span-23-101"><a id="__codelineno-23-101" name="__codelineno-23-101" href="#__codelineno-23-101"></a><span class="nb">document</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;DOMContentLoaded&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-23-102"><a id="__codelineno-23-102" name="__codelineno-23-102" href="#__codelineno-23-102"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">app</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;app&#39;</span><span class="p">);</span>
</span><span id="__span-23-103"><a id="__codelineno-23-103" name="__codelineno-23-103" href="#__codelineno-23-103"></a>
</span><span id="__span-23-104"><a id="__codelineno-23-104" name="__codelineno-23-104" href="#__codelineno-23-104"></a><span class="w">    </span><span class="c1">// Simple routing</span>
</span><span id="__span-23-105"><a id="__codelineno-23-105" name="__codelineno-23-105" href="#__codelineno-23-105"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">router</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Router</span><span class="p">({</span>
</span><span id="__span-23-106"><a id="__codelineno-23-106" name="__codelineno-23-106" href="#__codelineno-23-106"></a><span class="w">        </span><span class="s1">&#39;/profile/:id&#39;</span><span class="o">:</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="p">(</span><span class="nx">params</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-23-107"><a id="__codelineno-23-107" name="__codelineno-23-107" href="#__codelineno-23-107"></a><span class="w">            </span><span class="kd">const</span><span class="w"> </span><span class="nx">profile</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">UserProfile</span><span class="p">(</span><span class="nx">params</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span>
</span><span id="__span-23-108"><a id="__codelineno-23-108" name="__codelineno-23-108" href="#__codelineno-23-108"></a><span class="w">            </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-23-109"><a id="__codelineno-23-109" name="__codelineno-23-109" href="#__codelineno-23-109"></a><span class="w">                </span><span class="k">await</span><span class="w"> </span><span class="nx">profile</span><span class="p">.</span><span class="nx">load</span><span class="p">();</span>
</span><span id="__span-23-110"><a id="__codelineno-23-110" name="__codelineno-23-110" href="#__codelineno-23-110"></a><span class="w">                </span><span class="nx">app</span><span class="p">.</span><span class="nx">innerHTML</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">profile</span><span class="p">.</span><span class="nx">render</span><span class="p">();</span>
</span><span id="__span-23-111"><a id="__codelineno-23-111" name="__codelineno-23-111" href="#__codelineno-23-111"></a><span class="w">            </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="nx">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-23-112"><a id="__codelineno-23-112" name="__codelineno-23-112" href="#__codelineno-23-112"></a><span class="w">                </span><span class="nx">app</span><span class="p">.</span><span class="nx">innerHTML</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;&lt;div class=&quot;error&quot;&gt;Failed to load profile&lt;/div&gt;&#39;</span><span class="p">;</span>
</span><span id="__span-23-113"><a id="__codelineno-23-113" name="__codelineno-23-113" href="#__codelineno-23-113"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-23-114"><a id="__codelineno-23-114" name="__codelineno-23-114" href="#__codelineno-23-114"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-23-115"><a id="__codelineno-23-115" name="__codelineno-23-115" href="#__codelineno-23-115"></a><span class="w">    </span><span class="p">});</span>
</span><span id="__span-23-116"><a id="__codelineno-23-116" name="__codelineno-23-116" href="#__codelineno-23-116"></a>
</span><span id="__span-23-117"><a id="__codelineno-23-117" name="__codelineno-23-117" href="#__codelineno-23-117"></a><span class="w">    </span><span class="nx">router</span><span class="p">.</span><span class="nx">init</span><span class="p">();</span>
</span><span id="__span-23-118"><a id="__codelineno-23-118" name="__codelineno-23-118" href="#__codelineno-23-118"></a><span class="p">});</span>
</span></code></pre></div>
</details>
<details class="example">
<summary><strong>GitHub Actions CI/CD Pipeline</strong></summary>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-24-1"><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a><span class="c1"># .github/workflows/ci.yml</span>
</span><span id="__span-24-2"><a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">CI/CD Pipeline</span>
</span><span id="__span-24-3"><a id="__codelineno-24-3" name="__codelineno-24-3" href="#__codelineno-24-3"></a>
</span><span id="__span-24-4"><a id="__codelineno-24-4" name="__codelineno-24-4" href="#__codelineno-24-4"></a><span class="nt">on</span><span class="p">:</span>
</span><span id="__span-24-5"><a id="__codelineno-24-5" name="__codelineno-24-5" href="#__codelineno-24-5"></a><span class="w">  </span><span class="nt">push</span><span class="p">:</span>
</span><span id="__span-24-6"><a id="__codelineno-24-6" name="__codelineno-24-6" href="#__codelineno-24-6"></a><span class="w">    </span><span class="nt">branches</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="w"> </span><span class="nv">main</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">develop</span><span class="w"> </span><span class="p p-Indicator">]</span>
</span><span id="__span-24-7"><a id="__codelineno-24-7" name="__codelineno-24-7" href="#__codelineno-24-7"></a><span class="w">  </span><span class="nt">pull_request</span><span class="p">:</span>
</span><span id="__span-24-8"><a id="__codelineno-24-8" name="__codelineno-24-8" href="#__codelineno-24-8"></a><span class="w">    </span><span class="nt">branches</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="w"> </span><span class="nv">main</span><span class="w"> </span><span class="p p-Indicator">]</span>
</span><span id="__span-24-9"><a id="__codelineno-24-9" name="__codelineno-24-9" href="#__codelineno-24-9"></a>
</span><span id="__span-24-10"><a id="__codelineno-24-10" name="__codelineno-24-10" href="#__codelineno-24-10"></a><span class="nt">jobs</span><span class="p">:</span>
</span><span id="__span-24-11"><a id="__codelineno-24-11" name="__codelineno-24-11" href="#__codelineno-24-11"></a><span class="w">  </span><span class="nt">test</span><span class="p">:</span>
</span><span id="__span-24-12"><a id="__codelineno-24-12" name="__codelineno-24-12" href="#__codelineno-24-12"></a><span class="w">    </span><span class="nt">runs-on</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ubuntu-latest</span>
</span><span id="__span-24-13"><a id="__codelineno-24-13" name="__codelineno-24-13" href="#__codelineno-24-13"></a>
</span><span id="__span-24-14"><a id="__codelineno-24-14" name="__codelineno-24-14" href="#__codelineno-24-14"></a><span class="w">    </span><span class="nt">strategy</span><span class="p">:</span>
</span><span id="__span-24-15"><a id="__codelineno-24-15" name="__codelineno-24-15" href="#__codelineno-24-15"></a><span class="w">      </span><span class="nt">matrix</span><span class="p">:</span>
</span><span id="__span-24-16"><a id="__codelineno-24-16" name="__codelineno-24-16" href="#__codelineno-24-16"></a><span class="w">        </span><span class="nt">node-version</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">16.x</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">18.x</span><span class="p p-Indicator">]</span>
</span><span id="__span-24-17"><a id="__codelineno-24-17" name="__codelineno-24-17" href="#__codelineno-24-17"></a>
</span><span id="__span-24-18"><a id="__codelineno-24-18" name="__codelineno-24-18" href="#__codelineno-24-18"></a><span class="w">    </span><span class="nt">steps</span><span class="p">:</span>
</span><span id="__span-24-19"><a id="__codelineno-24-19" name="__codelineno-24-19" href="#__codelineno-24-19"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">actions/checkout@v3</span>
</span><span id="__span-24-20"><a id="__codelineno-24-20" name="__codelineno-24-20" href="#__codelineno-24-20"></a>
</span><span id="__span-24-21"><a id="__codelineno-24-21" name="__codelineno-24-21" href="#__codelineno-24-21"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Use Node.js ${{ matrix.node-version }}</span>
</span><span id="__span-24-22"><a id="__codelineno-24-22" name="__codelineno-24-22" href="#__codelineno-24-22"></a><span class="w">      </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">actions/setup-node@v3</span>
</span><span id="__span-24-23"><a id="__codelineno-24-23" name="__codelineno-24-23" href="#__codelineno-24-23"></a><span class="w">      </span><span class="nt">with</span><span class="p">:</span>
</span><span id="__span-24-24"><a id="__codelineno-24-24" name="__codelineno-24-24" href="#__codelineno-24-24"></a><span class="w">        </span><span class="nt">node-version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${{ matrix.node-version }}</span>
</span><span id="__span-24-25"><a id="__codelineno-24-25" name="__codelineno-24-25" href="#__codelineno-24-25"></a><span class="w">        </span><span class="nt">cache</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;npm&#39;</span>
</span><span id="__span-24-26"><a id="__codelineno-24-26" name="__codelineno-24-26" href="#__codelineno-24-26"></a>
</span><span id="__span-24-27"><a id="__codelineno-24-27" name="__codelineno-24-27" href="#__codelineno-24-27"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Install dependencies</span>
</span><span id="__span-24-28"><a id="__codelineno-24-28" name="__codelineno-24-28" href="#__codelineno-24-28"></a><span class="w">      </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">npm ci</span>
</span><span id="__span-24-29"><a id="__codelineno-24-29" name="__codelineno-24-29" href="#__codelineno-24-29"></a>
</span><span id="__span-24-30"><a id="__codelineno-24-30" name="__codelineno-24-30" href="#__codelineno-24-30"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Run linter</span>
</span><span id="__span-24-31"><a id="__codelineno-24-31" name="__codelineno-24-31" href="#__codelineno-24-31"></a><span class="w">      </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">npm run lint</span>
</span><span id="__span-24-32"><a id="__codelineno-24-32" name="__codelineno-24-32" href="#__codelineno-24-32"></a>
</span><span id="__span-24-33"><a id="__codelineno-24-33" name="__codelineno-24-33" href="#__codelineno-24-33"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Run type checking</span>
</span><span id="__span-24-34"><a id="__codelineno-24-34" name="__codelineno-24-34" href="#__codelineno-24-34"></a><span class="w">      </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">npm run type-check</span>
</span><span id="__span-24-35"><a id="__codelineno-24-35" name="__codelineno-24-35" href="#__codelineno-24-35"></a>
</span><span id="__span-24-36"><a id="__codelineno-24-36" name="__codelineno-24-36" href="#__codelineno-24-36"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Run tests</span>
</span><span id="__span-24-37"><a id="__codelineno-24-37" name="__codelineno-24-37" href="#__codelineno-24-37"></a><span class="w">      </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">npm run test:coverage</span>
</span><span id="__span-24-38"><a id="__codelineno-24-38" name="__codelineno-24-38" href="#__codelineno-24-38"></a>
</span><span id="__span-24-39"><a id="__codelineno-24-39" name="__codelineno-24-39" href="#__codelineno-24-39"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Upload coverage to Codecov</span>
</span><span id="__span-24-40"><a id="__codelineno-24-40" name="__codelineno-24-40" href="#__codelineno-24-40"></a><span class="w">      </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">codecov/codecov-action@v3</span>
</span><span id="__span-24-41"><a id="__codelineno-24-41" name="__codelineno-24-41" href="#__codelineno-24-41"></a>
</span><span id="__span-24-42"><a id="__codelineno-24-42" name="__codelineno-24-42" href="#__codelineno-24-42"></a><span class="w">  </span><span class="nt">deploy</span><span class="p">:</span>
</span><span id="__span-24-43"><a id="__codelineno-24-43" name="__codelineno-24-43" href="#__codelineno-24-43"></a><span class="w">    </span><span class="nt">needs</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">test</span>
</span><span id="__span-24-44"><a id="__codelineno-24-44" name="__codelineno-24-44" href="#__codelineno-24-44"></a><span class="w">    </span><span class="nt">runs-on</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ubuntu-latest</span>
</span><span id="__span-24-45"><a id="__codelineno-24-45" name="__codelineno-24-45" href="#__codelineno-24-45"></a><span class="w">    </span><span class="nt">if</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">github.ref == &#39;refs/heads/main&#39;</span>
</span><span id="__span-24-46"><a id="__codelineno-24-46" name="__codelineno-24-46" href="#__codelineno-24-46"></a>
</span><span id="__span-24-47"><a id="__codelineno-24-47" name="__codelineno-24-47" href="#__codelineno-24-47"></a><span class="w">    </span><span class="nt">steps</span><span class="p">:</span>
</span><span id="__span-24-48"><a id="__codelineno-24-48" name="__codelineno-24-48" href="#__codelineno-24-48"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">actions/checkout@v3</span>
</span><span id="__span-24-49"><a id="__codelineno-24-49" name="__codelineno-24-49" href="#__codelineno-24-49"></a>
</span><span id="__span-24-50"><a id="__codelineno-24-50" name="__codelineno-24-50" href="#__codelineno-24-50"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Setup Node.js</span>
</span><span id="__span-24-51"><a id="__codelineno-24-51" name="__codelineno-24-51" href="#__codelineno-24-51"></a><span class="w">      </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">actions/setup-node@v3</span>
</span><span id="__span-24-52"><a id="__codelineno-24-52" name="__codelineno-24-52" href="#__codelineno-24-52"></a><span class="w">      </span><span class="nt">with</span><span class="p">:</span>
</span><span id="__span-24-53"><a id="__codelineno-24-53" name="__codelineno-24-53" href="#__codelineno-24-53"></a><span class="w">        </span><span class="nt">node-version</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;18.x&#39;</span>
</span><span id="__span-24-54"><a id="__codelineno-24-54" name="__codelineno-24-54" href="#__codelineno-24-54"></a><span class="w">        </span><span class="nt">cache</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;npm&#39;</span>
</span><span id="__span-24-55"><a id="__codelineno-24-55" name="__codelineno-24-55" href="#__codelineno-24-55"></a>
</span><span id="__span-24-56"><a id="__codelineno-24-56" name="__codelineno-24-56" href="#__codelineno-24-56"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Install and build</span>
</span><span id="__span-24-57"><a id="__codelineno-24-57" name="__codelineno-24-57" href="#__codelineno-24-57"></a><span class="w">      </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
</span><span id="__span-24-58"><a id="__codelineno-24-58" name="__codelineno-24-58" href="#__codelineno-24-58"></a><span class="w">        </span><span class="no">npm ci</span>
</span><span id="__span-24-59"><a id="__codelineno-24-59" name="__codelineno-24-59" href="#__codelineno-24-59"></a><span class="w">        </span><span class="no">npm run build</span>
</span><span id="__span-24-60"><a id="__codelineno-24-60" name="__codelineno-24-60" href="#__codelineno-24-60"></a>
</span><span id="__span-24-61"><a id="__codelineno-24-61" name="__codelineno-24-61" href="#__codelineno-24-61"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Deploy to production</span>
</span><span id="__span-24-62"><a id="__codelineno-24-62" name="__codelineno-24-62" href="#__codelineno-24-62"></a><span class="w">      </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
</span><span id="__span-24-63"><a id="__codelineno-24-63" name="__codelineno-24-63" href="#__codelineno-24-63"></a><span class="w">        </span><span class="no">echo &quot;Deploying to production server...&quot;</span>
</span><span id="__span-24-64"><a id="__codelineno-24-64" name="__codelineno-24-64" href="#__codelineno-24-64"></a><span class="w">        </span><span class="no"># Add your deployment commands here</span>
</span></code></pre></div>
</details>
<h3 id="open-source-cms-building-on-the-shoulders-of-giants">Open-Source &amp; CMS: Building on the Shoulders of Giants ğŸŒŸğŸ“š<a class="headerlink" href="#open-source-cms-building-on-the-shoulders-of-giants" title="Permanent link">&para;</a></h3>
<p>Open-source software is like having access to the world's largest library where not only can you read every book for free, but you can also contribute your own chapters and improve existing ones. Content Management Systems (CMS) are the productivity powerhouses that let you focus on content and business logic rather than rebuilding basic functionality from scratch.</p>
<details class="example">
<summary>ğŸ—ï¸ Content Management System Architecture &amp; Implementation:</summary>
<div class="language-javascript highlight"><pre><span></span><code><span id="__span-25-1"><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a><span class="c1">// Modern Headless CMS Implementation with Node.js</span>
</span><span id="__span-25-2"><a id="__codelineno-25-2" name="__codelineno-25-2" href="#__codelineno-25-2"></a><span class="kd">class</span><span class="w"> </span><span class="nx">ModernCMS</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-25-3"><a id="__codelineno-25-3" name="__codelineno-25-3" href="#__codelineno-25-3"></a><span class="w">    </span><span class="kr">constructor</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-25-4"><a id="__codelineno-25-4" name="__codelineno-25-4" href="#__codelineno-25-4"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">content</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nb">Map</span><span class="p">();</span>
</span><span id="__span-25-5"><a id="__codelineno-25-5" name="__codelineno-25-5" href="#__codelineno-25-5"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">users</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nb">Map</span><span class="p">();</span>
</span><span id="__span-25-6"><a id="__codelineno-25-6" name="__codelineno-25-6" href="#__codelineno-25-6"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">plugins</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nb">Map</span><span class="p">();</span>
</span><span id="__span-25-7"><a id="__codelineno-25-7" name="__codelineno-25-7" href="#__codelineno-25-7"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">themes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nb">Map</span><span class="p">();</span>
</span><span id="__span-25-8"><a id="__codelineno-25-8" name="__codelineno-25-8" href="#__codelineno-25-8"></a>
</span><span id="__span-25-9"><a id="__codelineno-25-9" name="__codelineno-25-9" href="#__codelineno-25-9"></a><span class="w">        </span><span class="c1">// Initialize with sample data</span>
</span><span id="__span-25-10"><a id="__codelineno-25-10" name="__codelineno-25-10" href="#__codelineno-25-10"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">initializeSampleContent</span><span class="p">();</span>
</span><span id="__span-25-11"><a id="__codelineno-25-11" name="__codelineno-25-11" href="#__codelineno-25-11"></a>
</span><span id="__span-25-12"><a id="__codelineno-25-12" name="__codelineno-25-12" href="#__codelineno-25-12"></a><span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;ğŸŒŸ Modern CMS Initialized&#39;</span><span class="p">);</span>
</span><span id="__span-25-13"><a id="__codelineno-25-13" name="__codelineno-25-13" href="#__codelineno-25-13"></a><span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Features: Headless API, Plugin System, Multi-tenancy&#39;</span><span class="p">);</span>
</span><span id="__span-25-14"><a id="__codelineno-25-14" name="__codelineno-25-14" href="#__codelineno-25-14"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-25-15"><a id="__codelineno-25-15" name="__codelineno-25-15" href="#__codelineno-25-15"></a>
</span><span id="__span-25-16"><a id="__codelineno-25-16" name="__codelineno-25-16" href="#__codelineno-25-16"></a><span class="w">    </span><span class="nx">initializeSampleContent</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-25-17"><a id="__codelineno-25-17" name="__codelineno-25-17" href="#__codelineno-25-17"></a><span class="w">        </span><span class="c1">// Sample content types</span>
</span><span id="__span-25-18"><a id="__codelineno-25-18" name="__codelineno-25-18" href="#__codelineno-25-18"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">registerContentType</span><span class="p">(</span><span class="s1">&#39;article&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-25-19"><a id="__codelineno-25-19" name="__codelineno-25-19" href="#__codelineno-25-19"></a><span class="w">            </span><span class="nx">fields</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-25-20"><a id="__codelineno-25-20" name="__codelineno-25-20" href="#__codelineno-25-20"></a><span class="w">                </span><span class="nx">title</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">required</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="p">},</span>
</span><span id="__span-25-21"><a id="__codelineno-25-21" name="__codelineno-25-21" href="#__codelineno-25-21"></a><span class="w">                </span><span class="nx">content</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;richtext&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">required</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="p">},</span>
</span><span id="__span-25-22"><a id="__codelineno-25-22" name="__codelineno-25-22" href="#__codelineno-25-22"></a><span class="w">                </span><span class="nx">author</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;reference&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">required</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="p">},</span>
</span><span id="__span-25-23"><a id="__codelineno-25-23" name="__codelineno-25-23" href="#__codelineno-25-23"></a><span class="w">                </span><span class="nx">publishedAt</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;datetime&#39;</span><span class="w"> </span><span class="p">},</span>
</span><span id="__span-25-24"><a id="__codelineno-25-24" name="__codelineno-25-24" href="#__codelineno-25-24"></a><span class="w">                </span><span class="nx">status</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;select&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">options</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;draft&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;published&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;archived&#39;</span><span class="p">]</span><span class="w"> </span><span class="p">},</span>
</span><span id="__span-25-25"><a id="__codelineno-25-25" name="__codelineno-25-25" href="#__codelineno-25-25"></a><span class="w">                </span><span class="nx">tags</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;array&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">itemType</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="w"> </span><span class="p">},</span>
</span><span id="__span-25-26"><a id="__codelineno-25-26" name="__codelineno-25-26" href="#__codelineno-25-26"></a><span class="w">                </span><span class="nx">featuredImage</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;media&#39;</span><span class="w"> </span><span class="p">},</span>
</span><span id="__span-25-27"><a id="__codelineno-25-27" name="__codelineno-25-27" href="#__codelineno-25-27"></a><span class="w">                </span><span class="nx">seoTitle</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">maxLength</span><span class="o">:</span><span class="w"> </span><span class="mf">60</span><span class="w"> </span><span class="p">},</span>
</span><span id="__span-25-28"><a id="__codelineno-25-28" name="__codelineno-25-28" href="#__codelineno-25-28"></a><span class="w">                </span><span class="nx">seoDescription</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">maxLength</span><span class="o">:</span><span class="w"> </span><span class="mf">160</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-25-29"><a id="__codelineno-25-29" name="__codelineno-25-29" href="#__codelineno-25-29"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-25-30"><a id="__codelineno-25-30" name="__codelineno-25-30" href="#__codelineno-25-30"></a><span class="w">        </span><span class="p">});</span>
</span><span id="__span-25-31"><a id="__codelineno-25-31" name="__codelineno-25-31" href="#__codelineno-25-31"></a>
</span><span id="__span-25-32"><a id="__codelineno-25-32" name="__codelineno-25-32" href="#__codelineno-25-32"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">registerContentType</span><span class="p">(</span><span class="s1">&#39;page&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-25-33"><a id="__codelineno-25-33" name="__codelineno-25-33" href="#__codelineno-25-33"></a><span class="w">            </span><span class="nx">fields</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-25-34"><a id="__codelineno-25-34" name="__codelineno-25-34" href="#__codelineno-25-34"></a><span class="w">                </span><span class="nx">title</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">required</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="p">},</span>
</span><span id="__span-25-35"><a id="__codelineno-25-35" name="__codelineno-25-35" href="#__codelineno-25-35"></a><span class="w">                </span><span class="nx">slug</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">required</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="nx">unique</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="p">},</span>
</span><span id="__span-25-36"><a id="__codelineno-25-36" name="__codelineno-25-36" href="#__codelineno-25-36"></a><span class="w">                </span><span class="nx">content</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;richtext&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">required</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="p">},</span>
</span><span id="__span-25-37"><a id="__codelineno-25-37" name="__codelineno-25-37" href="#__codelineno-25-37"></a><span class="w">                </span><span class="nx">template</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;select&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">options</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;landing&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;contact&#39;</span><span class="p">]</span><span class="w"> </span><span class="p">},</span>
</span><span id="__span-25-38"><a id="__codelineno-25-38" name="__codelineno-25-38" href="#__codelineno-25-38"></a><span class="w">                </span><span class="nx">isPublished</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;boolean&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">default</span><span class="o">:</span><span class="w"> </span><span class="kc">false</span><span class="w"> </span><span class="p">},</span>
</span><span id="__span-25-39"><a id="__codelineno-25-39" name="__codelineno-25-39" href="#__codelineno-25-39"></a><span class="w">                </span><span class="nx">parentPage</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;reference&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">contentType</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;page&#39;</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-25-40"><a id="__codelineno-25-40" name="__codelineno-25-40" href="#__codelineno-25-40"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-25-41"><a id="__codelineno-25-41" name="__codelineno-25-41" href="#__codelineno-25-41"></a><span class="w">        </span><span class="p">});</span>
</span><span id="__span-25-42"><a id="__codelineno-25-42" name="__codelineno-25-42" href="#__codelineno-25-42"></a>
</span><span id="__span-25-43"><a id="__codelineno-25-43" name="__codelineno-25-43" href="#__codelineno-25-43"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">registerContentType</span><span class="p">(</span><span class="s1">&#39;product&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-25-44"><a id="__codelineno-25-44" name="__codelineno-25-44" href="#__codelineno-25-44"></a><span class="w">            </span><span class="nx">fields</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-25-45"><a id="__codelineno-25-45" name="__codelineno-25-45" href="#__codelineno-25-45"></a><span class="w">                </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">required</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="p">},</span>
</span><span id="__span-25-46"><a id="__codelineno-25-46" name="__codelineno-25-46" href="#__codelineno-25-46"></a><span class="w">                </span><span class="nx">description</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;richtext&#39;</span><span class="w"> </span><span class="p">},</span>
</span><span id="__span-25-47"><a id="__codelineno-25-47" name="__codelineno-25-47" href="#__codelineno-25-47"></a><span class="w">                </span><span class="nx">price</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;number&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">required</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="p">},</span>
</span><span id="__span-25-48"><a id="__codelineno-25-48" name="__codelineno-25-48" href="#__codelineno-25-48"></a><span class="w">                </span><span class="nx">currency</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">default</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;USD&#39;</span><span class="w"> </span><span class="p">},</span>
</span><span id="__span-25-49"><a id="__codelineno-25-49" name="__codelineno-25-49" href="#__codelineno-25-49"></a><span class="w">                </span><span class="nx">images</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;array&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">itemType</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;media&#39;</span><span class="w"> </span><span class="p">},</span>
</span><span id="__span-25-50"><a id="__codelineno-25-50" name="__codelineno-25-50" href="#__codelineno-25-50"></a><span class="w">                </span><span class="nx">category</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;reference&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">contentType</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;category&#39;</span><span class="w"> </span><span class="p">},</span>
</span><span id="__span-25-51"><a id="__codelineno-25-51" name="__codelineno-25-51" href="#__codelineno-25-51"></a><span class="w">                </span><span class="nx">stock</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;number&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">default</span><span class="o">:</span><span class="w"> </span><span class="mf">0</span><span class="w"> </span><span class="p">},</span>
</span><span id="__span-25-52"><a id="__codelineno-25-52" name="__codelineno-25-52" href="#__codelineno-25-52"></a><span class="w">                </span><span class="nx">isActive</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;boolean&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">default</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-25-53"><a id="__codelineno-25-53" name="__codelineno-25-53" href="#__codelineno-25-53"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-25-54"><a id="__codelineno-25-54" name="__codelineno-25-54" href="#__codelineno-25-54"></a><span class="w">        </span><span class="p">});</span>
</span><span id="__span-25-55"><a id="__codelineno-25-55" name="__codelineno-25-55" href="#__codelineno-25-55"></a>
</span><span id="__span-25-56"><a id="__codelineno-25-56" name="__codelineno-25-56" href="#__codelineno-25-56"></a><span class="w">        </span><span class="c1">// Sample content</span>
</span><span id="__span-25-57"><a id="__codelineno-25-57" name="__codelineno-25-57" href="#__codelineno-25-57"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">createContent</span><span class="p">(</span><span class="s1">&#39;article&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-25-58"><a id="__codelineno-25-58" name="__codelineno-25-58" href="#__codelineno-25-58"></a><span class="w">            </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;art1&#39;</span><span class="p">,</span>
</span><span id="__span-25-59"><a id="__codelineno-25-59" name="__codelineno-25-59" href="#__codelineno-25-59"></a><span class="w">            </span><span class="nx">title</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Modern Web Development Trends&#39;</span><span class="p">,</span>
</span><span id="__span-25-60"><a id="__codelineno-25-60" name="__codelineno-25-60" href="#__codelineno-25-60"></a><span class="w">            </span><span class="nx">content</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;&lt;p&gt;The web development landscape is constantly evolving...&lt;/p&gt;&#39;</span><span class="p">,</span>
</span><span id="__span-25-61"><a id="__codelineno-25-61" name="__codelineno-25-61" href="#__codelineno-25-61"></a><span class="w">            </span><span class="nx">author</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;user1&#39;</span><span class="p">,</span>
</span><span id="__span-25-62"><a id="__codelineno-25-62" name="__codelineno-25-62" href="#__codelineno-25-62"></a><span class="w">            </span><span class="nx">status</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;published&#39;</span><span class="p">,</span>
</span><span id="__span-25-63"><a id="__codelineno-25-63" name="__codelineno-25-63" href="#__codelineno-25-63"></a><span class="w">            </span><span class="nx">tags</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;web-dev&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;trends&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;javascript&#39;</span><span class="p">],</span>
</span><span id="__span-25-64"><a id="__codelineno-25-64" name="__codelineno-25-64" href="#__codelineno-25-64"></a><span class="w">            </span><span class="nx">publishedAt</span><span class="o">:</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nb">Date</span><span class="p">().</span><span class="nx">toISOString</span><span class="p">()</span>
</span><span id="__span-25-65"><a id="__codelineno-25-65" name="__codelineno-25-65" href="#__codelineno-25-65"></a><span class="w">        </span><span class="p">});</span>
</span><span id="__span-25-66"><a id="__codelineno-25-66" name="__codelineno-25-66" href="#__codelineno-25-66"></a>
</span><span id="__span-25-67"><a id="__codelineno-25-67" name="__codelineno-25-67" href="#__codelineno-25-67"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">createContent</span><span class="p">(</span><span class="s1">&#39;page&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-25-68"><a id="__codelineno-25-68" name="__codelineno-25-68" href="#__codelineno-25-68"></a><span class="w">            </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;home&#39;</span><span class="p">,</span>
</span><span id="__span-25-69"><a id="__codelineno-25-69" name="__codelineno-25-69" href="#__codelineno-25-69"></a><span class="w">            </span><span class="nx">title</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Welcome to Our Website&#39;</span><span class="p">,</span>
</span><span id="__span-25-70"><a id="__codelineno-25-70" name="__codelineno-25-70" href="#__codelineno-25-70"></a><span class="w">            </span><span class="nx">slug</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;home&#39;</span><span class="p">,</span>
</span><span id="__span-25-71"><a id="__codelineno-25-71" name="__codelineno-25-71" href="#__codelineno-25-71"></a><span class="w">            </span><span class="nx">content</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;&lt;h1&gt;Welcome!&lt;/h1&gt;&lt;p&gt;This is our homepage content.&lt;/p&gt;&#39;</span><span class="p">,</span>
</span><span id="__span-25-72"><a id="__codelineno-25-72" name="__codelineno-25-72" href="#__codelineno-25-72"></a><span class="w">            </span><span class="nx">template</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;landing&#39;</span><span class="p">,</span>
</span><span id="__span-25-73"><a id="__codelineno-25-73" name="__codelineno-25-73" href="#__codelineno-25-73"></a><span class="w">            </span><span class="nx">isPublished</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span>
</span><span id="__span-25-74"><a id="__codelineno-25-74" name="__codelineno-25-74" href="#__codelineno-25-74"></a><span class="w">        </span><span class="p">});</span>
</span><span id="__span-25-75"><a id="__codelineno-25-75" name="__codelineno-25-75" href="#__codelineno-25-75"></a>
</span><span id="__span-25-76"><a id="__codelineno-25-76" name="__codelineno-25-76" href="#__codelineno-25-76"></a><span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;âœ… Sample content initialized&#39;</span><span class="p">);</span>
</span><span id="__span-25-77"><a id="__codelineno-25-77" name="__codelineno-25-77" href="#__codelineno-25-77"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-25-78"><a id="__codelineno-25-78" name="__codelineno-25-78" href="#__codelineno-25-78"></a>
</span><span id="__span-25-79"><a id="__codelineno-25-79" name="__codelineno-25-79" href="#__codelineno-25-79"></a><span class="w">    </span><span class="nx">registerContentType</span><span class="p">(</span><span class="nx">typeName</span><span class="p">,</span><span class="w"> </span><span class="nx">schema</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-25-80"><a id="__codelineno-25-80" name="__codelineno-25-80" href="#__codelineno-25-80"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">contentTypes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">contentTypes</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nb">Map</span><span class="p">();</span>
</span><span id="__span-25-81"><a id="__codelineno-25-81" name="__codelineno-25-81" href="#__codelineno-25-81"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">contentTypes</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="nx">typeName</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-25-82"><a id="__codelineno-25-82" name="__codelineno-25-82" href="#__codelineno-25-82"></a><span class="w">            </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="nx">typeName</span><span class="p">,</span>
</span><span id="__span-25-83"><a id="__codelineno-25-83" name="__codelineno-25-83" href="#__codelineno-25-83"></a><span class="w">            </span><span class="nx">schema</span><span class="o">:</span><span class="w"> </span><span class="nx">schema</span><span class="p">,</span>
</span><span id="__span-25-84"><a id="__codelineno-25-84" name="__codelineno-25-84" href="#__codelineno-25-84"></a><span class="w">            </span><span class="nx">createdAt</span><span class="o">:</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nb">Date</span><span class="p">().</span><span class="nx">toISOString</span><span class="p">()</span>
</span><span id="__span-25-85"><a id="__codelineno-25-85" name="__codelineno-25-85" href="#__codelineno-25-85"></a><span class="w">        </span><span class="p">});</span>
</span><span id="__span-25-86"><a id="__codelineno-25-86" name="__codelineno-25-86" href="#__codelineno-25-86"></a>
</span><span id="__span-25-87"><a id="__codelineno-25-87" name="__codelineno-25-87" href="#__codelineno-25-87"></a><span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`ğŸ“ Content type registered: </span><span class="si">${</span><span class="nx">typeName</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
</span><span id="__span-25-88"><a id="__codelineno-25-88" name="__codelineno-25-88" href="#__codelineno-25-88"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-25-89"><a id="__codelineno-25-89" name="__codelineno-25-89" href="#__codelineno-25-89"></a>
</span><span id="__span-25-90"><a id="__codelineno-25-90" name="__codelineno-25-90" href="#__codelineno-25-90"></a><span class="w">    </span><span class="nx">createContent</span><span class="p">(</span><span class="nx">contentType</span><span class="p">,</span><span class="w"> </span><span class="nx">data</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-25-91"><a id="__codelineno-25-91" name="__codelineno-25-91" href="#__codelineno-25-91"></a><span class="w">        </span><span class="c1">// Validate against schema</span>
</span><span id="__span-25-92"><a id="__codelineno-25-92" name="__codelineno-25-92" href="#__codelineno-25-92"></a><span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">validation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">validateContent</span><span class="p">(</span><span class="nx">contentType</span><span class="p">,</span><span class="w"> </span><span class="nx">data</span><span class="p">);</span>
</span><span id="__span-25-93"><a id="__codelineno-25-93" name="__codelineno-25-93" href="#__codelineno-25-93"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">validation</span><span class="p">.</span><span class="nx">isValid</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-25-94"><a id="__codelineno-25-94" name="__codelineno-25-94" href="#__codelineno-25-94"></a><span class="w">            </span><span class="k">throw</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="ne">Error</span><span class="p">(</span><span class="sb">`Validation failed: </span><span class="si">${</span><span class="nx">validation</span><span class="p">.</span><span class="nx">errors</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s1">&#39;, &#39;</span><span class="p">)</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
</span><span id="__span-25-95"><a id="__codelineno-25-95" name="__codelineno-25-95" href="#__codelineno-25-95"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-25-96"><a id="__codelineno-25-96" name="__codelineno-25-96" href="#__codelineno-25-96"></a>
</span><span id="__span-25-97"><a id="__codelineno-25-97" name="__codelineno-25-97" href="#__codelineno-25-97"></a><span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">content</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-25-98"><a id="__codelineno-25-98" name="__codelineno-25-98" href="#__codelineno-25-98"></a><span class="w">            </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="nx">data</span><span class="p">.</span><span class="nx">id</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">generateId</span><span class="p">(),</span>
</span><span id="__span-25-99"><a id="__codelineno-25-99" name="__codelineno-25-99" href="#__codelineno-25-99"></a><span class="w">            </span><span class="nx">contentType</span><span class="o">:</span><span class="w"> </span><span class="nx">contentType</span><span class="p">,</span>
</span><span id="__span-25-100"><a id="__codelineno-25-100" name="__codelineno-25-100" href="#__codelineno-25-100"></a><span class="w">            </span><span class="p">...</span><span class="nx">data</span><span class="p">,</span>
</span><span id="__span-25-101"><a id="__codelineno-25-101" name="__codelineno-25-101" href="#__codelineno-25-101"></a><span class="w">            </span><span class="nx">createdAt</span><span class="o">:</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nb">Date</span><span class="p">().</span><span class="nx">toISOString</span><span class="p">(),</span>
</span><span id="__span-25-102"><a id="__codelineno-25-102" name="__codelineno-25-102" href="#__codelineno-25-102"></a><span class="w">            </span><span class="nx">updatedAt</span><span class="o">:</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nb">Date</span><span class="p">().</span><span class="nx">toISOString</span><span class="p">(),</span>
</span><span id="__span-25-103"><a id="__codelineno-25-103" name="__codelineno-25-103" href="#__codelineno-25-103"></a><span class="w">            </span><span class="nx">version</span><span class="o">:</span><span class="w"> </span><span class="mf">1</span>
</span><span id="__span-25-104"><a id="__codelineno-25-104" name="__codelineno-25-104" href="#__codelineno-25-104"></a><span class="w">        </span><span class="p">};</span>
</span><span id="__span-25-105"><a id="__codelineno-25-105" name="__codelineno-25-105" href="#__codelineno-25-105"></a>
</span><span id="__span-25-106"><a id="__codelineno-25-106" name="__codelineno-25-106" href="#__codelineno-25-106"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">content</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="nx">content</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span><span class="w"> </span><span class="nx">content</span><span class="p">);</span>
</span><span id="__span-25-107"><a id="__codelineno-25-107" name="__codelineno-25-107" href="#__codelineno-25-107"></a>
</span><span id="__span-25-108"><a id="__codelineno-25-108" name="__codelineno-25-108" href="#__codelineno-25-108"></a><span class="w">        </span><span class="c1">// Trigger hooks</span>
</span><span id="__span-25-109"><a id="__codelineno-25-109" name="__codelineno-25-109" href="#__codelineno-25-109"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">triggerHook</span><span class="p">(</span><span class="s1">&#39;content.created&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">content</span><span class="p">);</span>
</span><span id="__span-25-110"><a id="__codelineno-25-110" name="__codelineno-25-110" href="#__codelineno-25-110"></a>
</span><span id="__span-25-111"><a id="__codelineno-25-111" name="__codelineno-25-111" href="#__codelineno-25-111"></a><span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`ğŸ“„ Content created: </span><span class="si">${</span><span class="nx">contentType</span><span class="si">}</span><span class="sb">/</span><span class="si">${</span><span class="nx">content</span><span class="p">.</span><span class="nx">id</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
</span><span id="__span-25-112"><a id="__codelineno-25-112" name="__codelineno-25-112" href="#__codelineno-25-112"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">content</span><span class="p">;</span>
</span><span id="__span-25-113"><a id="__codelineno-25-113" name="__codelineno-25-113" href="#__codelineno-25-113"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-25-114"><a id="__codelineno-25-114" name="__codelineno-25-114" href="#__codelineno-25-114"></a>
</span><span id="__span-25-115"><a id="__codelineno-25-115" name="__codelineno-25-115" href="#__codelineno-25-115"></a><span class="w">    </span><span class="nx">updateContent</span><span class="p">(</span><span class="nx">id</span><span class="p">,</span><span class="w"> </span><span class="nx">updates</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-25-116"><a id="__codelineno-25-116" name="__codelineno-25-116" href="#__codelineno-25-116"></a><span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">existingContent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">content</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">id</span><span class="p">);</span>
</span><span id="__span-25-117"><a id="__codelineno-25-117" name="__codelineno-25-117" href="#__codelineno-25-117"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">existingContent</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-25-118"><a id="__codelineno-25-118" name="__codelineno-25-118" href="#__codelineno-25-118"></a><span class="w">            </span><span class="k">throw</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="ne">Error</span><span class="p">(</span><span class="sb">`Content not found: </span><span class="si">${</span><span class="nx">id</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
</span><span id="__span-25-119"><a id="__codelineno-25-119" name="__codelineno-25-119" href="#__codelineno-25-119"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-25-120"><a id="__codelineno-25-120" name="__codelineno-25-120" href="#__codelineno-25-120"></a>
</span><span id="__span-25-121"><a id="__codelineno-25-121" name="__codelineno-25-121" href="#__codelineno-25-121"></a><span class="w">        </span><span class="c1">// Validate updates</span>
</span><span id="__span-25-122"><a id="__codelineno-25-122" name="__codelineno-25-122" href="#__codelineno-25-122"></a><span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">validation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">validateContent</span><span class="p">(</span><span class="nx">existingContent</span><span class="p">.</span><span class="nx">contentType</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">...</span><span class="nx">existingContent</span><span class="p">,</span><span class="w"> </span><span class="p">...</span><span class="nx">updates</span><span class="w"> </span><span class="p">});</span>
</span><span id="__span-25-123"><a id="__codelineno-25-123" name="__codelineno-25-123" href="#__codelineno-25-123"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">validation</span><span class="p">.</span><span class="nx">isValid</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-25-124"><a id="__codelineno-25-124" name="__codelineno-25-124" href="#__codelineno-25-124"></a><span class="w">            </span><span class="k">throw</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="ne">Error</span><span class="p">(</span><span class="sb">`Validation failed: </span><span class="si">${</span><span class="nx">validation</span><span class="p">.</span><span class="nx">errors</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s1">&#39;, &#39;</span><span class="p">)</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
</span><span id="__span-25-125"><a id="__codelineno-25-125" name="__codelineno-25-125" href="#__codelineno-25-125"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-25-126"><a id="__codelineno-25-126" name="__codelineno-25-126" href="#__codelineno-25-126"></a>
</span><span id="__span-25-127"><a id="__codelineno-25-127" name="__codelineno-25-127" href="#__codelineno-25-127"></a><span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">updatedContent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-25-128"><a id="__codelineno-25-128" name="__codelineno-25-128" href="#__codelineno-25-128"></a><span class="w">            </span><span class="p">...</span><span class="nx">existingContent</span><span class="p">,</span>
</span><span id="__span-25-129"><a id="__codelineno-25-129" name="__codelineno-25-129" href="#__codelineno-25-129"></a><span class="w">            </span><span class="p">...</span><span class="nx">updates</span><span class="p">,</span>
</span><span id="__span-25-130"><a id="__codelineno-25-130" name="__codelineno-25-130" href="#__codelineno-25-130"></a><span class="w">            </span><span class="nx">updatedAt</span><span class="o">:</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nb">Date</span><span class="p">().</span><span class="nx">toISOString</span><span class="p">(),</span>
</span><span id="__span-25-131"><a id="__codelineno-25-131" name="__codelineno-25-131" href="#__codelineno-25-131"></a><span class="w">            </span><span class="nx">version</span><span class="o">:</span><span class="w"> </span><span class="nx">existingContent</span><span class="p">.</span><span class="nx">version</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">1</span>
</span><span id="__span-25-132"><a id="__codelineno-25-132" name="__codelineno-25-132" href="#__codelineno-25-132"></a><span class="w">        </span><span class="p">};</span>
</span><span id="__span-25-133"><a id="__codelineno-25-133" name="__codelineno-25-133" href="#__codelineno-25-133"></a>
</span><span id="__span-25-134"><a id="__codelineno-25-134" name="__codelineno-25-134" href="#__codelineno-25-134"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">content</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="nx">id</span><span class="p">,</span><span class="w"> </span><span class="nx">updatedContent</span><span class="p">);</span>
</span><span id="__span-25-135"><a id="__codelineno-25-135" name="__codelineno-25-135" href="#__codelineno-25-135"></a>
</span><span id="__span-25-136"><a id="__codelineno-25-136" name="__codelineno-25-136" href="#__codelineno-25-136"></a><span class="w">        </span><span class="c1">// Trigger hooks</span>
</span><span id="__span-25-137"><a id="__codelineno-25-137" name="__codelineno-25-137" href="#__codelineno-25-137"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">triggerHook</span><span class="p">(</span><span class="s1">&#39;content.updated&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">updatedContent</span><span class="p">);</span>
</span><span id="__span-25-138"><a id="__codelineno-25-138" name="__codelineno-25-138" href="#__codelineno-25-138"></a>
</span><span id="__span-25-139"><a id="__codelineno-25-139" name="__codelineno-25-139" href="#__codelineno-25-139"></a><span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`âœï¸ Content updated: </span><span class="si">${</span><span class="nx">id</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
</span><span id="__span-25-140"><a id="__codelineno-25-140" name="__codelineno-25-140" href="#__codelineno-25-140"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">updatedContent</span><span class="p">;</span>
</span><span id="__span-25-141"><a id="__codelineno-25-141" name="__codelineno-25-141" href="#__codelineno-25-141"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-25-142"><a id="__codelineno-25-142" name="__codelineno-25-142" href="#__codelineno-25-142"></a>
</span><span id="__span-25-143"><a id="__codelineno-25-143" name="__codelineno-25-143" href="#__codelineno-25-143"></a><span class="w">    </span><span class="nx">validateContent</span><span class="p">(</span><span class="nx">contentType</span><span class="p">,</span><span class="w"> </span><span class="nx">data</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-25-144"><a id="__codelineno-25-144" name="__codelineno-25-144" href="#__codelineno-25-144"></a><span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">contentTypeSchema</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">contentTypes</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">contentType</span><span class="p">);</span>
</span><span id="__span-25-145"><a id="__codelineno-25-145" name="__codelineno-25-145" href="#__codelineno-25-145"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">contentTypeSchema</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-25-146"><a id="__codelineno-25-146" name="__codelineno-25-146" href="#__codelineno-25-146"></a><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">isValid</span><span class="o">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"> </span><span class="nx">errors</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="sb">`Unknown content type: </span><span class="si">${</span><span class="nx">contentType</span><span class="si">}</span><span class="sb">`</span><span class="p">]</span><span class="w"> </span><span class="p">};</span>
</span><span id="__span-25-147"><a id="__codelineno-25-147" name="__codelineno-25-147" href="#__codelineno-25-147"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-25-148"><a id="__codelineno-25-148" name="__codelineno-25-148" href="#__codelineno-25-148"></a>
</span><span id="__span-25-149"><a id="__codelineno-25-149" name="__codelineno-25-149" href="#__codelineno-25-149"></a><span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">errors</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[];</span>
</span><span id="__span-25-150"><a id="__codelineno-25-150" name="__codelineno-25-150" href="#__codelineno-25-150"></a><span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">schema</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">contentTypeSchema</span><span class="p">.</span><span class="nx">schema</span><span class="p">;</span>
</span><span id="__span-25-151"><a id="__codelineno-25-151" name="__codelineno-25-151" href="#__codelineno-25-151"></a>
</span><span id="__span-25-152"><a id="__codelineno-25-152" name="__codelineno-25-152" href="#__codelineno-25-152"></a><span class="w">        </span><span class="c1">// Check required fields</span>
</span><span id="__span-25-153"><a id="__codelineno-25-153" name="__codelineno-25-153" href="#__codelineno-25-153"></a><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">fieldName</span><span class="p">,</span><span class="w"> </span><span class="nx">fieldConfig</span><span class="p">]</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="nb">Object</span><span class="p">.</span><span class="nx">entries</span><span class="p">(</span><span class="nx">schema</span><span class="p">.</span><span class="nx">fields</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-25-154"><a id="__codelineno-25-154" name="__codelineno-25-154" href="#__codelineno-25-154"></a><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">fieldConfig</span><span class="p">.</span><span class="nx">required</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="o">!</span><span class="nx">data</span><span class="p">[</span><span class="nx">fieldName</span><span class="p">])</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-25-155"><a id="__codelineno-25-155" name="__codelineno-25-155" href="#__codelineno-25-155"></a><span class="w">                </span><span class="nx">errors</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="sb">`Required field missing: </span><span class="si">${</span><span class="nx">fieldName</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
</span><span id="__span-25-156"><a id="__codelineno-25-156" name="__codelineno-25-156" href="#__codelineno-25-156"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-25-157"><a id="__codelineno-25-157" name="__codelineno-25-157" href="#__codelineno-25-157"></a>
</span><span id="__span-25-158"><a id="__codelineno-25-158" name="__codelineno-25-158" href="#__codelineno-25-158"></a><span class="w">            </span><span class="c1">// Type validation</span>
</span><span id="__span-25-159"><a id="__codelineno-25-159" name="__codelineno-25-159" href="#__codelineno-25-159"></a><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">data</span><span class="p">[</span><span class="nx">fieldName</span><span class="p">]</span><span class="w"> </span><span class="o">!==</span><span class="w"> </span><span class="kc">undefined</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-25-160"><a id="__codelineno-25-160" name="__codelineno-25-160" href="#__codelineno-25-160"></a><span class="w">                </span><span class="kd">const</span><span class="w"> </span><span class="nx">isValidType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">validateFieldType</span><span class="p">(</span><span class="nx">data</span><span class="p">[</span><span class="nx">fieldName</span><span class="p">],</span><span class="w"> </span><span class="nx">fieldConfig</span><span class="p">);</span>
</span><span id="__span-25-161"><a id="__codelineno-25-161" name="__codelineno-25-161" href="#__codelineno-25-161"></a><span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">isValidType</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-25-162"><a id="__codelineno-25-162" name="__codelineno-25-162" href="#__codelineno-25-162"></a><span class="w">                    </span><span class="nx">errors</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="sb">`Invalid type for field </span><span class="si">${</span><span class="nx">fieldName</span><span class="si">}</span><span class="sb">: expected </span><span class="si">${</span><span class="nx">fieldConfig</span><span class="p">.</span><span class="nx">type</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
</span><span id="__span-25-163"><a id="__codelineno-25-163" name="__codelineno-25-163" href="#__codelineno-25-163"></a><span class="w">                </span><span class="p">}</span>
</span><span id="__span-25-164"><a id="__codelineno-25-164" name="__codelineno-25-164" href="#__codelineno-25-164"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-25-165"><a id="__codelineno-25-165" name="__codelineno-25-165" href="#__codelineno-25-165"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-25-166"><a id="__codelineno-25-166" name="__codelineno-25-166" href="#__codelineno-25-166"></a>
</span><span id="__span-25-167"><a id="__codelineno-25-167" name="__codelineno-25-167" href="#__codelineno-25-167"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-25-168"><a id="__codelineno-25-168" name="__codelineno-25-168" href="#__codelineno-25-168"></a><span class="w">            </span><span class="nx">isValid</span><span class="o">:</span><span class="w"> </span><span class="nx">errors</span><span class="p">.</span><span class="nx">length</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span>
</span><span id="__span-25-169"><a id="__codelineno-25-169" name="__codelineno-25-169" href="#__codelineno-25-169"></a><span class="w">            </span><span class="nx">errors</span><span class="o">:</span><span class="w"> </span><span class="nx">errors</span>
</span><span id="__span-25-170"><a id="__codelineno-25-170" name="__codelineno-25-170" href="#__codelineno-25-170"></a><span class="w">        </span><span class="p">};</span>
</span><span id="__span-25-171"><a id="__codelineno-25-171" name="__codelineno-25-171" href="#__codelineno-25-171"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-25-172"><a id="__codelineno-25-172" name="__codelineno-25-172" href="#__codelineno-25-172"></a>
</span><span id="__span-25-173"><a id="__codelineno-25-173" name="__codelineno-25-173" href="#__codelineno-25-173"></a><span class="w">    </span><span class="nx">validateFieldType</span><span class="p">(</span><span class="nx">value</span><span class="p">,</span><span class="w"> </span><span class="nx">fieldConfig</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-25-174"><a id="__codelineno-25-174" name="__codelineno-25-174" href="#__codelineno-25-174"></a><span class="w">        </span><span class="k">switch</span><span class="w"> </span><span class="p">(</span><span class="nx">fieldConfig</span><span class="p">.</span><span class="nx">type</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-25-175"><a id="__codelineno-25-175" name="__codelineno-25-175" href="#__codelineno-25-175"></a><span class="w">            </span><span class="k">case</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="o">:</span>
</span><span id="__span-25-176"><a id="__codelineno-25-176" name="__codelineno-25-176" href="#__codelineno-25-176"></a><span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="ow">typeof</span><span class="w"> </span><span class="nx">value</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">;</span>
</span><span id="__span-25-177"><a id="__codelineno-25-177" name="__codelineno-25-177" href="#__codelineno-25-177"></a><span class="w">            </span><span class="k">case</span><span class="w"> </span><span class="s1">&#39;number&#39;</span><span class="o">:</span>
</span><span id="__span-25-178"><a id="__codelineno-25-178" name="__codelineno-25-178" href="#__codelineno-25-178"></a><span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="ow">typeof</span><span class="w"> </span><span class="nx">value</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;number&#39;</span><span class="p">;</span>
</span><span id="__span-25-179"><a id="__codelineno-25-179" name="__codelineno-25-179" href="#__codelineno-25-179"></a><span class="w">            </span><span class="k">case</span><span class="w"> </span><span class="s1">&#39;boolean&#39;</span><span class="o">:</span>
</span><span id="__span-25-180"><a id="__codelineno-25-180" name="__codelineno-25-180" href="#__codelineno-25-180"></a><span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="ow">typeof</span><span class="w"> </span><span class="nx">value</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;boolean&#39;</span><span class="p">;</span>
</span><span id="__span-25-181"><a id="__codelineno-25-181" name="__codelineno-25-181" href="#__codelineno-25-181"></a><span class="w">            </span><span class="k">case</span><span class="w"> </span><span class="s1">&#39;array&#39;</span><span class="o">:</span>
</span><span id="__span-25-182"><a id="__codelineno-25-182" name="__codelineno-25-182" href="#__codelineno-25-182"></a><span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="nb">Array</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">value</span><span class="p">);</span>
</span><span id="__span-25-183"><a id="__codelineno-25-183" name="__codelineno-25-183" href="#__codelineno-25-183"></a><span class="w">            </span><span class="k">case</span><span class="w"> </span><span class="s1">&#39;datetime&#39;</span><span class="o">:</span>
</span><span id="__span-25-184"><a id="__codelineno-25-184" name="__codelineno-25-184" href="#__codelineno-25-184"></a><span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="o">!</span><span class="nb">isNaN</span><span class="p">(</span><span class="nb">Date</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">value</span><span class="p">));</span>
</span><span id="__span-25-185"><a id="__codelineno-25-185" name="__codelineno-25-185" href="#__codelineno-25-185"></a><span class="w">            </span><span class="k">case</span><span class="w"> </span><span class="s1">&#39;richtext&#39;</span><span class="o">:</span>
</span><span id="__span-25-186"><a id="__codelineno-25-186" name="__codelineno-25-186" href="#__codelineno-25-186"></a><span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="ow">typeof</span><span class="w"> </span><span class="nx">value</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">;</span>
</span><span id="__span-25-187"><a id="__codelineno-25-187" name="__codelineno-25-187" href="#__codelineno-25-187"></a><span class="w">            </span><span class="k">case</span><span class="w"> </span><span class="s1">&#39;reference&#39;</span><span class="o">:</span>
</span><span id="__span-25-188"><a id="__codelineno-25-188" name="__codelineno-25-188" href="#__codelineno-25-188"></a><span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="ow">typeof</span><span class="w"> </span><span class="nx">value</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">;</span><span class="w"> </span><span class="c1">// Simplified - would check if reference exists</span>
</span><span id="__span-25-189"><a id="__codelineno-25-189" name="__codelineno-25-189" href="#__codelineno-25-189"></a><span class="w">            </span><span class="k">case</span><span class="w"> </span><span class="s1">&#39;media&#39;</span><span class="o">:</span>
</span><span id="__span-25-190"><a id="__codelineno-25-190" name="__codelineno-25-190" href="#__codelineno-25-190"></a><span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="ow">typeof</span><span class="w"> </span><span class="nx">value</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">;</span><span class="w"> </span><span class="c1">// Simplified - would validate media URL/ID</span>
</span><span id="__span-25-191"><a id="__codelineno-25-191" name="__codelineno-25-191" href="#__codelineno-25-191"></a><span class="w">            </span><span class="k">case</span><span class="w"> </span><span class="s1">&#39;select&#39;</span><span class="o">:</span>
</span><span id="__span-25-192"><a id="__codelineno-25-192" name="__codelineno-25-192" href="#__codelineno-25-192"></a><span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="nx">fieldConfig</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">includes</span><span class="p">(</span><span class="nx">value</span><span class="p">);</span>
</span><span id="__span-25-193"><a id="__codelineno-25-193" name="__codelineno-25-193" href="#__codelineno-25-193"></a><span class="w">            </span><span class="k">default</span><span class="o">:</span>
</span><span id="__span-25-194"><a id="__codelineno-25-194" name="__codelineno-25-194" href="#__codelineno-25-194"></a><span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span>
</span><span id="__span-25-195"><a id="__codelineno-25-195" name="__codelineno-25-195" href="#__codelineno-25-195"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-25-196"><a id="__codelineno-25-196" name="__codelineno-25-196" href="#__codelineno-25-196"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-25-197"><a id="__codelineno-25-197" name="__codelineno-25-197" href="#__codelineno-25-197"></a>
</span><span id="__span-25-198"><a id="__codelineno-25-198" name="__codelineno-25-198" href="#__codelineno-25-198"></a><span class="w">    </span><span class="nx">getContent</span><span class="p">(</span><span class="nx">id</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-25-199"><a id="__codelineno-25-199" name="__codelineno-25-199" href="#__codelineno-25-199"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">content</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">id</span><span class="p">);</span>
</span><span id="__span-25-200"><a id="__codelineno-25-200" name="__codelineno-25-200" href="#__codelineno-25-200"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-25-201"><a id="__codelineno-25-201" name="__codelineno-25-201" href="#__codelineno-25-201"></a>
</span><span id="__span-25-202"><a id="__codelineno-25-202" name="__codelineno-25-202" href="#__codelineno-25-202"></a><span class="w">    </span><span class="nx">listContent</span><span class="p">(</span><span class="nx">contentType</span><span class="p">,</span><span class="w"> </span><span class="nx">filters</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{})</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-25-203"><a id="__codelineno-25-203" name="__codelineno-25-203" href="#__codelineno-25-203"></a><span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">allContent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Array</span><span class="p">.</span><span class="kr">from</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">content</span><span class="p">.</span><span class="nx">values</span><span class="p">());</span>
</span><span id="__span-25-204"><a id="__codelineno-25-204" name="__codelineno-25-204" href="#__codelineno-25-204"></a><span class="w">        </span><span class="kd">let</span><span class="w"> </span><span class="nx">filtered</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">allContent</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">item</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">item</span><span class="p">.</span><span class="nx">contentType</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="nx">contentType</span><span class="p">);</span>
</span><span id="__span-25-205"><a id="__codelineno-25-205" name="__codelineno-25-205" href="#__codelineno-25-205"></a>
</span><span id="__span-25-206"><a id="__codelineno-25-206" name="__codelineno-25-206" href="#__codelineno-25-206"></a><span class="w">        </span><span class="c1">// Apply filters</span>
</span><span id="__span-25-207"><a id="__codelineno-25-207" name="__codelineno-25-207" href="#__codelineno-25-207"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">filters</span><span class="p">.</span><span class="nx">status</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-25-208"><a id="__codelineno-25-208" name="__codelineno-25-208" href="#__codelineno-25-208"></a><span class="w">            </span><span class="nx">filtered</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">filtered</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">item</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">item</span><span class="p">.</span><span class="nx">status</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="nx">filters</span><span class="p">.</span><span class="nx">status</span><span class="p">);</span>
</span><span id="__span-25-209"><a id="__codelineno-25-209" name="__codelineno-25-209" href="#__codelineno-25-209"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-25-210"><a id="__codelineno-25-210" name="__codelineno-25-210" href="#__codelineno-25-210"></a>
</span><span id="__span-25-211"><a id="__codelineno-25-211" name="__codelineno-25-211" href="#__codelineno-25-211"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">filters</span><span class="p">.</span><span class="nx">author</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-25-212"><a id="__codelineno-25-212" name="__codelineno-25-212" href="#__codelineno-25-212"></a><span class="w">            </span><span class="nx">filtered</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">filtered</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">item</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">item</span><span class="p">.</span><span class="nx">author</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="nx">filters</span><span class="p">.</span><span class="nx">author</span><span class="p">);</span>
</span><span id="__span-25-213"><a id="__codelineno-25-213" name="__codelineno-25-213" href="#__codelineno-25-213"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-25-214"><a id="__codelineno-25-214" name="__codelineno-25-214" href="#__codelineno-25-214"></a>
</span><span id="__span-25-215"><a id="__codelineno-25-215" name="__codelineno-25-215" href="#__codelineno-25-215"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">filters</span><span class="p">.</span><span class="nx">published</span><span class="w"> </span><span class="o">!==</span><span class="w"> </span><span class="kc">undefined</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-25-216"><a id="__codelineno-25-216" name="__codelineno-25-216" href="#__codelineno-25-216"></a><span class="w">            </span><span class="nx">filtered</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">filtered</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">item</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">item</span><span class="p">.</span><span class="nx">isPublished</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="nx">filters</span><span class="p">.</span><span class="nx">published</span><span class="p">);</span>
</span><span id="__span-25-217"><a id="__codelineno-25-217" name="__codelineno-25-217" href="#__codelineno-25-217"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-25-218"><a id="__codelineno-25-218" name="__codelineno-25-218" href="#__codelineno-25-218"></a>
</span><span id="__span-25-219"><a id="__codelineno-25-219" name="__codelineno-25-219" href="#__codelineno-25-219"></a><span class="w">        </span><span class="c1">// Sorting</span>
</span><span id="__span-25-220"><a id="__codelineno-25-220" name="__codelineno-25-220" href="#__codelineno-25-220"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">filters</span><span class="p">.</span><span class="nx">sortBy</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-25-221"><a id="__codelineno-25-221" name="__codelineno-25-221" href="#__codelineno-25-221"></a><span class="w">            </span><span class="nx">filtered</span><span class="p">.</span><span class="nx">sort</span><span class="p">((</span><span class="nx">a</span><span class="p">,</span><span class="w"> </span><span class="nx">b</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-25-222"><a id="__codelineno-25-222" name="__codelineno-25-222" href="#__codelineno-25-222"></a><span class="w">                </span><span class="kd">const</span><span class="w"> </span><span class="nx">aVal</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">a</span><span class="p">[</span><span class="nx">filters</span><span class="p">.</span><span class="nx">sortBy</span><span class="p">];</span>
</span><span id="__span-25-223"><a id="__codelineno-25-223" name="__codelineno-25-223" href="#__codelineno-25-223"></a><span class="w">                </span><span class="kd">const</span><span class="w"> </span><span class="nx">bVal</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">b</span><span class="p">[</span><span class="nx">filters</span><span class="p">.</span><span class="nx">sortBy</span><span class="p">];</span>
</span><span id="__span-25-224"><a id="__codelineno-25-224" name="__codelineno-25-224" href="#__codelineno-25-224"></a>
</span><span id="__span-25-225"><a id="__codelineno-25-225" name="__codelineno-25-225" href="#__codelineno-25-225"></a><span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">filters</span><span class="p">.</span><span class="nx">sortOrder</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;desc&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-25-226"><a id="__codelineno-25-226" name="__codelineno-25-226" href="#__codelineno-25-226"></a><span class="w">                    </span><span class="k">return</span><span class="w"> </span><span class="nx">bVal</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nx">aVal</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="mf">1</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="o">-</span><span class="mf">1</span><span class="p">;</span>
</span><span id="__span-25-227"><a id="__codelineno-25-227" name="__codelineno-25-227" href="#__codelineno-25-227"></a><span class="w">                </span><span class="p">}</span>
</span><span id="__span-25-228"><a id="__codelineno-25-228" name="__codelineno-25-228" href="#__codelineno-25-228"></a><span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="nx">aVal</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nx">bVal</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="mf">1</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="o">-</span><span class="mf">1</span><span class="p">;</span>
</span><span id="__span-25-229"><a id="__codelineno-25-229" name="__codelineno-25-229" href="#__codelineno-25-229"></a><span class="w">            </span><span class="p">});</span>
</span><span id="__span-25-230"><a id="__codelineno-25-230" name="__codelineno-25-230" href="#__codelineno-25-230"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-25-231"><a id="__codelineno-25-231" name="__codelineno-25-231" href="#__codelineno-25-231"></a>
</span><span id="__span-25-232"><a id="__codelineno-25-232" name="__codelineno-25-232" href="#__codelineno-25-232"></a><span class="w">        </span><span class="c1">// Pagination</span>
</span><span id="__span-25-233"><a id="__codelineno-25-233" name="__codelineno-25-233" href="#__codelineno-25-233"></a><span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">page</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">filters</span><span class="p">.</span><span class="nx">page</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="mf">1</span><span class="p">;</span>
</span><span id="__span-25-234"><a id="__codelineno-25-234" name="__codelineno-25-234" href="#__codelineno-25-234"></a><span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">limit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">filters</span><span class="p">.</span><span class="nx">limit</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="mf">10</span><span class="p">;</span>
</span><span id="__span-25-235"><a id="__codelineno-25-235" name="__codelineno-25-235" href="#__codelineno-25-235"></a><span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">startIndex</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">page</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">1</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nx">limit</span><span class="p">;</span>
</span><span id="__span-25-236"><a id="__codelineno-25-236" name="__codelineno-25-236" href="#__codelineno-25-236"></a><span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">endIndex</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">startIndex</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">limit</span><span class="p">;</span>
</span><span id="__span-25-237"><a id="__codelineno-25-237" name="__codelineno-25-237" href="#__codelineno-25-237"></a>
</span><span id="__span-25-238"><a id="__codelineno-25-238" name="__codelineno-25-238" href="#__codelineno-25-238"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-25-239"><a id="__codelineno-25-239" name="__codelineno-25-239" href="#__codelineno-25-239"></a><span class="w">            </span><span class="nx">data</span><span class="o">:</span><span class="w"> </span><span class="nx">filtered</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="nx">startIndex</span><span class="p">,</span><span class="w"> </span><span class="nx">endIndex</span><span class="p">),</span>
</span><span id="__span-25-240"><a id="__codelineno-25-240" name="__codelineno-25-240" href="#__codelineno-25-240"></a><span class="w">            </span><span class="nx">pagination</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-25-241"><a id="__codelineno-25-241" name="__codelineno-25-241" href="#__codelineno-25-241"></a><span class="w">                </span><span class="nx">page</span><span class="o">:</span><span class="w"> </span><span class="nx">page</span><span class="p">,</span>
</span><span id="__span-25-242"><a id="__codelineno-25-242" name="__codelineno-25-242" href="#__codelineno-25-242"></a><span class="w">                </span><span class="nx">limit</span><span class="o">:</span><span class="w"> </span><span class="nx">limit</span><span class="p">,</span>
</span><span id="__span-25-243"><a id="__codelineno-25-243" name="__codelineno-25-243" href="#__codelineno-25-243"></a><span class="w">                </span><span class="nx">total</span><span class="o">:</span><span class="w"> </span><span class="nx">filtered</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span>
</span><span id="__span-25-244"><a id="__codelineno-25-244" name="__codelineno-25-244" href="#__codelineno-25-244"></a><span class="w">                </span><span class="nx">totalPages</span><span class="o">:</span><span class="w"> </span><span class="nb">Math</span><span class="p">.</span><span class="nx">ceil</span><span class="p">(</span><span class="nx">filtered</span><span class="p">.</span><span class="nx">length</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="nx">limit</span><span class="p">)</span>
</span><span id="__span-25-245"><a id="__codelineno-25-245" name="__codelineno-25-245" href="#__codelineno-25-245"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-25-246"><a id="__codelineno-25-246" name="__codelineno-25-246" href="#__codelineno-25-246"></a><span class="w">        </span><span class="p">};</span>
</span><span id="__span-25-247"><a id="__codelineno-25-247" name="__codelineno-25-247" href="#__codelineno-25-247"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-25-248"><a id="__codelineno-25-248" name="__codelineno-25-248" href="#__codelineno-25-248"></a>
</span><span id="__span-25-249"><a id="__codelineno-25-249" name="__codelineno-25-249" href="#__codelineno-25-249"></a><span class="w">    </span><span class="c1">// Plugin system</span>
</span><span id="__span-25-250"><a id="__codelineno-25-250" name="__codelineno-25-250" href="#__codelineno-25-250"></a><span class="w">    </span><span class="nx">installPlugin</span><span class="p">(</span><span class="nx">pluginName</span><span class="p">,</span><span class="w"> </span><span class="nx">pluginCode</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-25-251"><a id="__codelineno-25-251" name="__codelineno-25-251" href="#__codelineno-25-251"></a><span class="w">        </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-25-252"><a id="__codelineno-25-252" name="__codelineno-25-252" href="#__codelineno-25-252"></a><span class="w">            </span><span class="c1">// In a real implementation, this would be more secure</span>
</span><span id="__span-25-253"><a id="__codelineno-25-253" name="__codelineno-25-253" href="#__codelineno-25-253"></a><span class="w">            </span><span class="kd">const</span><span class="w"> </span><span class="nx">plugin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">eval</span><span class="p">(</span><span class="sb">`(</span><span class="si">${</span><span class="nx">pluginCode</span><span class="si">}</span><span class="sb">)`</span><span class="p">);</span>
</span><span id="__span-25-254"><a id="__codelineno-25-254" name="__codelineno-25-254" href="#__codelineno-25-254"></a>
</span><span id="__span-25-255"><a id="__codelineno-25-255" name="__codelineno-25-255" href="#__codelineno-25-255"></a><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="nx">plugins</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="nx">pluginName</span><span class="p">,</span><span class="w"> </span><span class="nx">plugin</span><span class="p">);</span>
</span><span id="__span-25-256"><a id="__codelineno-25-256" name="__codelineno-25-256" href="#__codelineno-25-256"></a>
</span><span id="__span-25-257"><a id="__codelineno-25-257" name="__codelineno-25-257" href="#__codelineno-25-257"></a><span class="w">            </span><span class="c1">// Initialize plugin</span>
</span><span id="__span-25-258"><a id="__codelineno-25-258" name="__codelineno-25-258" href="#__codelineno-25-258"></a><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">plugin</span><span class="p">.</span><span class="nx">init</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-25-259"><a id="__codelineno-25-259" name="__codelineno-25-259" href="#__codelineno-25-259"></a><span class="w">                </span><span class="nx">plugin</span><span class="p">.</span><span class="nx">init</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
</span><span id="__span-25-260"><a id="__codelineno-25-260" name="__codelineno-25-260" href="#__codelineno-25-260"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-25-261"><a id="__codelineno-25-261" name="__codelineno-25-261" href="#__codelineno-25-261"></a>
</span><span id="__span-25-262"><a id="__codelineno-25-262" name="__codelineno-25-262" href="#__codelineno-25-262"></a><span class="w">            </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`ğŸ”Œ Plugin installed: </span><span class="si">${</span><span class="nx">pluginName</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
</span><span id="__span-25-263"><a id="__codelineno-25-263" name="__codelineno-25-263" href="#__codelineno-25-263"></a><span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="nx">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-25-264"><a id="__codelineno-25-264" name="__codelineno-25-264" href="#__codelineno-25-264"></a><span class="w">            </span><span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="sb">`Failed to install plugin </span><span class="si">${</span><span class="nx">pluginName</span><span class="si">}</span><span class="sb">:`</span><span class="p">,</span><span class="w"> </span><span class="nx">error</span><span class="p">);</span>
</span><span id="__span-25-265"><a id="__codelineno-25-265" name="__codelineno-25-265" href="#__codelineno-25-265"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-25-266"><a id="__codelineno-25-266" name="__codelineno-25-266" href="#__codelineno-25-266"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-25-267"><a id="__codelineno-25-267" name="__codelineno-25-267" href="#__codelineno-25-267"></a>
</span><span id="__span-25-268"><a id="__codelineno-25-268" name="__codelineno-25-268" href="#__codelineno-25-268"></a><span class="w">    </span><span class="nx">triggerHook</span><span class="p">(</span><span class="nx">hookName</span><span class="p">,</span><span class="w"> </span><span class="nx">data</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-25-269"><a id="__codelineno-25-269" name="__codelineno-25-269" href="#__codelineno-25-269"></a><span class="w">        </span><span class="c1">// Notify all plugins about the hook</span>
</span><span id="__span-25-270"><a id="__codelineno-25-270" name="__codelineno-25-270" href="#__codelineno-25-270"></a><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">name</span><span class="p">,</span><span class="w"> </span><span class="nx">plugin</span><span class="p">]</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">plugins</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-25-271"><a id="__codelineno-25-271" name="__codelineno-25-271" href="#__codelineno-25-271"></a><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">plugin</span><span class="p">.</span><span class="nx">hooks</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nx">plugin</span><span class="p">.</span><span class="nx">hooks</span><span class="p">[</span><span class="nx">hookName</span><span class="p">])</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-25-272"><a id="__codelineno-25-272" name="__codelineno-25-272" href="#__codelineno-25-272"></a><span class="w">                </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-25-273"><a id="__codelineno-25-273" name="__codelineno-25-273" href="#__codelineno-25-273"></a><span class="w">                    </span><span class="nx">plugin</span><span class="p">.</span><span class="nx">hooks</span><span class="p">[</span><span class="nx">hookName</span><span class="p">](</span><span class="nx">data</span><span class="p">);</span>
</span><span id="__span-25-274"><a id="__codelineno-25-274" name="__codelineno-25-274" href="#__codelineno-25-274"></a><span class="w">                </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="nx">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-25-275"><a id="__codelineno-25-275" name="__codelineno-25-275" href="#__codelineno-25-275"></a><span class="w">                    </span><span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="sb">`Plugin </span><span class="si">${</span><span class="nx">name</span><span class="si">}</span><span class="sb"> hook </span><span class="si">${</span><span class="nx">hookName</span><span class="si">}</span><span class="sb"> failed:`</span><span class="p">,</span><span class="w"> </span><span class="nx">error</span><span class="p">);</span>
</span><span id="__span-25-276"><a id="__codelineno-25-276" name="__codelineno-25-276" href="#__codelineno-25-276"></a><span class="w">                </span><span class="p">}</span>
</span><span id="__span-25-277"><a id="__codelineno-25-277" name="__codelineno-25-277" href="#__codelineno-25-277"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-25-278"><a id="__codelineno-25-278" name="__codelineno-25-278" href="#__codelineno-25-278"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-25-279"><a id="__codelineno-25-279" name="__codelineno-25-279" href="#__codelineno-25-279"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-25-280"><a id="__codelineno-25-280" name="__codelineno-25-280" href="#__codelineno-25-280"></a>
</span><span id="__span-25-281"><a id="__codelineno-25-281" name="__codelineno-25-281" href="#__codelineno-25-281"></a><span class="w">    </span><span class="c1">// REST API endpoints</span>
</span><span id="__span-25-282"><a id="__codelineno-25-282" name="__codelineno-25-282" href="#__codelineno-25-282"></a><span class="w">    </span><span class="nx">createAPIEndpoints</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-25-283"><a id="__codelineno-25-283" name="__codelineno-25-283" href="#__codelineno-25-283"></a><span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">api</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-25-284"><a id="__codelineno-25-284" name="__codelineno-25-284" href="#__codelineno-25-284"></a><span class="w">            </span><span class="c1">// GET /api/content/:type</span>
</span><span id="__span-25-285"><a id="__codelineno-25-285" name="__codelineno-25-285" href="#__codelineno-25-285"></a><span class="w">            </span><span class="nx">getContentList</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="nx">contentType</span><span class="p">,</span><span class="w"> </span><span class="nx">query</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{})</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-25-286"><a id="__codelineno-25-286" name="__codelineno-25-286" href="#__codelineno-25-286"></a><span class="w">                </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-25-287"><a id="__codelineno-25-287" name="__codelineno-25-287" href="#__codelineno-25-287"></a><span class="w">                    </span><span class="kd">const</span><span class="w"> </span><span class="nx">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">listContent</span><span class="p">(</span><span class="nx">contentType</span><span class="p">,</span><span class="w"> </span><span class="nx">query</span><span class="p">);</span>
</span><span id="__span-25-288"><a id="__codelineno-25-288" name="__codelineno-25-288" href="#__codelineno-25-288"></a><span class="w">                    </span><span class="k">return</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-25-289"><a id="__codelineno-25-289" name="__codelineno-25-289" href="#__codelineno-25-289"></a><span class="w">                        </span><span class="nx">success</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
</span><span id="__span-25-290"><a id="__codelineno-25-290" name="__codelineno-25-290" href="#__codelineno-25-290"></a><span class="w">                        </span><span class="nx">data</span><span class="o">:</span><span class="w"> </span><span class="nx">result</span><span class="p">.</span><span class="nx">data</span><span class="p">,</span>
</span><span id="__span-25-291"><a id="__codelineno-25-291" name="__codelineno-25-291" href="#__codelineno-25-291"></a><span class="w">                        </span><span class="nx">pagination</span><span class="o">:</span><span class="w"> </span><span class="nx">result</span><span class="p">.</span><span class="nx">pagination</span>
</span><span id="__span-25-292"><a id="__codelineno-25-292" name="__codelineno-25-292" href="#__codelineno-25-292"></a><span class="w">                    </span><span class="p">};</span>
</span><span id="__span-25-293"><a id="__codelineno-25-293" name="__codelineno-25-293" href="#__codelineno-25-293"></a><span class="w">                </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="nx">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-25-294"><a id="__codelineno-25-294" name="__codelineno-25-294" href="#__codelineno-25-294"></a><span class="w">                    </span><span class="k">return</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-25-295"><a id="__codelineno-25-295" name="__codelineno-25-295" href="#__codelineno-25-295"></a><span class="w">                        </span><span class="nx">success</span><span class="o">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
</span><span id="__span-25-296"><a id="__codelineno-25-296" name="__codelineno-25-296" href="#__codelineno-25-296"></a><span class="w">                        </span><span class="nx">error</span><span class="o">:</span><span class="w"> </span><span class="nx">error</span><span class="p">.</span><span class="nx">message</span>
</span><span id="__span-25-297"><a id="__codelineno-25-297" name="__codelineno-25-297" href="#__codelineno-25-297"></a><span class="w">                    </span><span class="p">};</span>
</span><span id="__span-25-298"><a id="__codelineno-25-298" name="__codelineno-25-298" href="#__codelineno-25-298"></a><span class="w">                </span><span class="p">}</span>
</span><span id="__span-25-299"><a id="__codelineno-25-299" name="__codelineno-25-299" href="#__codelineno-25-299"></a><span class="w">            </span><span class="p">},</span>
</span><span id="__span-25-300"><a id="__codelineno-25-300" name="__codelineno-25-300" href="#__codelineno-25-300"></a>
</span><span id="__span-25-301"><a id="__codelineno-25-301" name="__codelineno-25-301" href="#__codelineno-25-301"></a><span class="w">            </span><span class="c1">// GET /api/content/:type/:id</span>
</span><span id="__span-25-302"><a id="__codelineno-25-302" name="__codelineno-25-302" href="#__codelineno-25-302"></a><span class="w">            </span><span class="nx">getContentItem</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="nx">contentType</span><span class="p">,</span><span class="w"> </span><span class="nx">id</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-25-303"><a id="__codelineno-25-303" name="__codelineno-25-303" href="#__codelineno-25-303"></a><span class="w">                </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-25-304"><a id="__codelineno-25-304" name="__codelineno-25-304" href="#__codelineno-25-304"></a><span class="w">                    </span><span class="kd">const</span><span class="w"> </span><span class="nx">content</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">getContent</span><span class="p">(</span><span class="nx">id</span><span class="p">);</span>
</span><span id="__span-25-305"><a id="__codelineno-25-305" name="__codelineno-25-305" href="#__codelineno-25-305"></a><span class="w">                    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">content</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nx">content</span><span class="p">.</span><span class="nx">contentType</span><span class="w"> </span><span class="o">!==</span><span class="w"> </span><span class="nx">contentType</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-25-306"><a id="__codelineno-25-306" name="__codelineno-25-306" href="#__codelineno-25-306"></a><span class="w">                        </span><span class="k">return</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-25-307"><a id="__codelineno-25-307" name="__codelineno-25-307" href="#__codelineno-25-307"></a><span class="w">                            </span><span class="nx">success</span><span class="o">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
</span><span id="__span-25-308"><a id="__codelineno-25-308" name="__codelineno-25-308" href="#__codelineno-25-308"></a><span class="w">                            </span><span class="nx">error</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Content not found&#39;</span>
</span><span id="__span-25-309"><a id="__codelineno-25-309" name="__codelineno-25-309" href="#__codelineno-25-309"></a><span class="w">                        </span><span class="p">};</span>
</span><span id="__span-25-310"><a id="__codelineno-25-310" name="__codelineno-25-310" href="#__codelineno-25-310"></a><span class="w">                    </span><span class="p">}</span>
</span><span id="__span-25-311"><a id="__codelineno-25-311" name="__codelineno-25-311" href="#__codelineno-25-311"></a>
</span><span id="__span-25-312"><a id="__codelineno-25-312" name="__codelineno-25-312" href="#__codelineno-25-312"></a><span class="w">                    </span><span class="k">return</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-25-313"><a id="__codelineno-25-313" name="__codelineno-25-313" href="#__codelineno-25-313"></a><span class="w">                        </span><span class="nx">success</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
</span><span id="__span-25-314"><a id="__codelineno-25-314" name="__codelineno-25-314" href="#__codelineno-25-314"></a><span class="w">                        </span><span class="nx">data</span><span class="o">:</span><span class="w"> </span><span class="nx">content</span>
</span><span id="__span-25-315"><a id="__codelineno-25-315" name="__codelineno-25-315" href="#__codelineno-25-315"></a><span class="w">                    </span><span class="p">};</span>
</span><span id="__span-25-316"><a id="__codelineno-25-316" name="__codelineno-25-316" href="#__codelineno-25-316"></a><span class="w">                </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="nx">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-25-317"><a id="__codelineno-25-317" name="__codelineno-25-317" href="#__codelineno-25-317"></a><span class="w">                    </span><span class="k">return</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-25-318"><a id="__codelineno-25-318" name="__codelineno-25-318" href="#__codelineno-25-318"></a><span class="w">                        </span><span class="nx">success</span><span class="o">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
</span><span id="__span-25-319"><a id="__codelineno-25-319" name="__codelineno-25-319" href="#__codelineno-25-319"></a><span class="w">                        </span><span class="nx">error</span><span class="o">:</span><span class="w"> </span><span class="nx">error</span><span class="p">.</span><span class="nx">message</span>
</span><span id="__span-25-320"><a id="__codelineno-25-320" name="__codelineno-25-320" href="#__codelineno-25-320"></a><span class="w">                    </span><span class="p">};</span>
</span><span id="__span-25-321"><a id="__codelineno-25-321" name="__codelineno-25-321" href="#__codelineno-25-321"></a><span class="w">                </span><span class="p">}</span>
</span><span id="__span-25-322"><a id="__codelineno-25-322" name="__codelineno-25-322" href="#__codelineno-25-322"></a><span class="w">            </span><span class="p">},</span>
</span><span id="__span-25-323"><a id="__codelineno-25-323" name="__codelineno-25-323" href="#__codelineno-25-323"></a>
</span><span id="__span-25-324"><a id="__codelineno-25-324" name="__codelineno-25-324" href="#__codelineno-25-324"></a><span class="w">            </span><span class="c1">// POST /api/content/:type</span>
</span><span id="__span-25-325"><a id="__codelineno-25-325" name="__codelineno-25-325" href="#__codelineno-25-325"></a><span class="w">            </span><span class="nx">createContentItem</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="nx">contentType</span><span class="p">,</span><span class="w"> </span><span class="nx">data</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-25-326"><a id="__codelineno-25-326" name="__codelineno-25-326" href="#__codelineno-25-326"></a><span class="w">                </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-25-327"><a id="__codelineno-25-327" name="__codelineno-25-327" href="#__codelineno-25-327"></a><span class="w">                    </span><span class="kd">const</span><span class="w"> </span><span class="nx">content</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">createContent</span><span class="p">(</span><span class="nx">contentType</span><span class="p">,</span><span class="w"> </span><span class="nx">data</span><span class="p">);</span>
</span><span id="__span-25-328"><a id="__codelineno-25-328" name="__codelineno-25-328" href="#__codelineno-25-328"></a><span class="w">                    </span><span class="k">return</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-25-329"><a id="__codelineno-25-329" name="__codelineno-25-329" href="#__codelineno-25-329"></a><span class="w">                        </span><span class="nx">success</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
</span><span id="__span-25-330"><a id="__codelineno-25-330" name="__codelineno-25-330" href="#__codelineno-25-330"></a><span class="w">                        </span><span class="nx">data</span><span class="o">:</span><span class="w"> </span><span class="nx">content</span>
</span><span id="__span-25-331"><a id="__codelineno-25-331" name="__codelineno-25-331" href="#__codelineno-25-331"></a><span class="w">                    </span><span class="p">};</span>
</span><span id="__span-25-332"><a id="__codelineno-25-332" name="__codelineno-25-332" href="#__codelineno-25-332"></a><span class="w">                </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="nx">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-25-333"><a id="__codelineno-25-333" name="__codelineno-25-333" href="#__codelineno-25-333"></a><span class="w">                    </span><span class="k">return</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-25-334"><a id="__codelineno-25-334" name="__codelineno-25-334" href="#__codelineno-25-334"></a><span class="w">                        </span><span class="nx">success</span><span class="o">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
</span><span id="__span-25-335"><a id="__codelineno-25-335" name="__codelineno-25-335" href="#__codelineno-25-335"></a><span class="w">                        </span><span class="nx">error</span><span class="o">:</span><span class="w"> </span><span class="nx">error</span><span class="p">.</span><span class="nx">message</span>
</span><span id="__span-25-336"><a id="__codelineno-25-336" name="__codelineno-25-336" href="#__codelineno-25-336"></a><span class="w">                    </span><span class="p">};</span>
</span><span id="__span-25-337"><a id="__codelineno-25-337" name="__codelineno-25-337" href="#__codelineno-25-337"></a><span class="w">                </span><span class="p">}</span>
</span><span id="__span-25-338"><a id="__codelineno-25-338" name="__codelineno-25-338" href="#__codelineno-25-338"></a><span class="w">            </span><span class="p">},</span>
</span><span id="__span-25-339"><a id="__codelineno-25-339" name="__codelineno-25-339" href="#__codelineno-25-339"></a>
</span><span id="__span-25-340"><a id="__codelineno-25-340" name="__codelineno-25-340" href="#__codelineno-25-340"></a><span class="w">            </span><span class="c1">// PUT /api/content/:type/:id</span>
</span><span id="__span-25-341"><a id="__codelineno-25-341" name="__codelineno-25-341" href="#__codelineno-25-341"></a><span class="w">            </span><span class="nx">updateContentItem</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="nx">contentType</span><span class="p">,</span><span class="w"> </span><span class="nx">id</span><span class="p">,</span><span class="w"> </span><span class="nx">data</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-25-342"><a id="__codelineno-25-342" name="__codelineno-25-342" href="#__codelineno-25-342"></a><span class="w">                </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-25-343"><a id="__codelineno-25-343" name="__codelineno-25-343" href="#__codelineno-25-343"></a><span class="w">                    </span><span class="kd">const</span><span class="w"> </span><span class="nx">content</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">updateContent</span><span class="p">(</span><span class="nx">id</span><span class="p">,</span><span class="w"> </span><span class="nx">data</span><span class="p">);</span>
</span><span id="__span-25-344"><a id="__codelineno-25-344" name="__codelineno-25-344" href="#__codelineno-25-344"></a><span class="w">                    </span><span class="k">return</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-25-345"><a id="__codelineno-25-345" name="__codelineno-25-345" href="#__codelineno-25-345"></a><span class="w">                        </span><span class="nx">success</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
</span><span id="__span-25-346"><a id="__codelineno-25-346" name="__codelineno-25-346" href="#__codelineno-25-346"></a><span class="w">                        </span><span class="nx">data</span><span class="o">:</span><span class="w"> </span><span class="nx">content</span>
</span><span id="__span-25-347"><a id="__codelineno-25-347" name="__codelineno-25-347" href="#__codelineno-25-347"></a><span class="w">                    </span><span class="p">};</span>
</span><span id="__span-25-348"><a id="__codelineno-25-348" name="__codelineno-25-348" href="#__codelineno-25-348"></a><span class="w">                </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="nx">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-25-349"><a id="__codelineno-25-349" name="__codelineno-25-349" href="#__codelineno-25-349"></a><span class="w">                    </span><span class="k">return</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-25-350"><a id="__codelineno-25-350" name="__codelineno-25-350" href="#__codelineno-25-350"></a><span class="w">                        </span><span class="nx">success</span><span class="o">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
</span><span id="__span-25-351"><a id="__codelineno-25-351" name="__codelineno-25-351" href="#__codelineno-25-351"></a><span class="w">                        </span><span class="nx">error</span><span class="o">:</span><span class="w"> </span><span class="nx">error</span><span class="p">.</span><span class="nx">message</span>
</span><span id="__span-25-352"><a id="__codelineno-25-352" name="__codelineno-25-352" href="#__codelineno-25-352"></a><span class="w">                    </span><span class="p">};</span>
</span><span id="__span-25-353"><a id="__codelineno-25-353" name="__codelineno-25-353" href="#__codelineno-25-353"></a><span class="w">                </span><span class="p">}</span>
</span><span id="__span-25-354"><a id="__codelineno-25-354" name="__codelineno-25-354" href="#__codelineno-25-354"></a><span class="w">            </span><span class="p">},</span>
</span><span id="__span-25-355"><a id="__codelineno-25-355" name="__codelineno-25-355" href="#__codelineno-25-355"></a>
</span><span id="__span-25-356"><a id="__codelineno-25-356" name="__codelineno-25-356" href="#__codelineno-25-356"></a><span class="w">            </span><span class="c1">// DELETE /api/content/:type/:id</span>
</span><span id="__span-25-357"><a id="__codelineno-25-357" name="__codelineno-25-357" href="#__codelineno-25-357"></a><span class="w">            </span><span class="nx">deleteContentItem</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="nx">contentType</span><span class="p">,</span><span class="w"> </span><span class="nx">id</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-25-358"><a id="__codelineno-25-358" name="__codelineno-25-358" href="#__codelineno-25-358"></a><span class="w">                </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-25-359"><a id="__codelineno-25-359" name="__codelineno-25-359" href="#__codelineno-25-359"></a><span class="w">                    </span><span class="kd">const</span><span class="w"> </span><span class="nx">deleted</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">content</span><span class="p">.</span><span class="ow">delete</span><span class="p">(</span><span class="nx">id</span><span class="p">);</span>
</span><span id="__span-25-360"><a id="__codelineno-25-360" name="__codelineno-25-360" href="#__codelineno-25-360"></a><span class="w">                    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">deleted</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-25-361"><a id="__codelineno-25-361" name="__codelineno-25-361" href="#__codelineno-25-361"></a><span class="w">                        </span><span class="k">return</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-25-362"><a id="__codelineno-25-362" name="__codelineno-25-362" href="#__codelineno-25-362"></a><span class="w">                            </span><span class="nx">success</span><span class="o">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
</span><span id="__span-25-363"><a id="__codelineno-25-363" name="__codelineno-25-363" href="#__codelineno-25-363"></a><span class="w">                            </span><span class="nx">error</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Content not found&#39;</span>
</span><span id="__span-25-364"><a id="__codelineno-25-364" name="__codelineno-25-364" href="#__codelineno-25-364"></a><span class="w">                        </span><span class="p">};</span>
</span><span id="__span-25-365"><a id="__codelineno-25-365" name="__codelineno-25-365" href="#__codelineno-25-365"></a><span class="w">                    </span><span class="p">}</span>
</span><span id="__span-25-366"><a id="__codelineno-25-366" name="__codelineno-25-366" href="#__codelineno-25-366"></a>
</span><span id="__span-25-367"><a id="__codelineno-25-367" name="__codelineno-25-367" href="#__codelineno-25-367"></a><span class="w">                    </span><span class="k">this</span><span class="p">.</span><span class="nx">triggerHook</span><span class="p">(</span><span class="s1">&#39;content.deleted&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="p">,</span><span class="w"> </span><span class="nx">contentType</span><span class="w"> </span><span class="p">});</span>
</span><span id="__span-25-368"><a id="__codelineno-25-368" name="__codelineno-25-368" href="#__codelineno-25-368"></a>
</span><span id="__span-25-369"><a id="__codelineno-25-369" name="__codelineno-25-369" href="#__codelineno-25-369"></a><span class="w">                    </span><span class="k">return</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-25-370"><a id="__codelineno-25-370" name="__codelineno-25-370" href="#__codelineno-25-370"></a><span class="w">                        </span><span class="nx">success</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
</span><span id="__span-25-371"><a id="__codelineno-25-371" name="__codelineno-25-371" href="#__codelineno-25-371"></a><span class="w">                        </span><span class="nx">message</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Content deleted successfully&#39;</span>
</span><span id="__span-25-372"><a id="__codelineno-25-372" name="__codelineno-25-372" href="#__codelineno-25-372"></a><span class="w">                    </span><span class="p">};</span>
</span><span id="__span-25-373"><a id="__codelineno-25-373" name="__codelineno-25-373" href="#__codelineno-25-373"></a><span class="w">                </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="nx">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-25-374"><a id="__codelineno-25-374" name="__codelineno-25-374" href="#__codelineno-25-374"></a><span class="w">                    </span><span class="k">return</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-25-375"><a id="__codelineno-25-375" name="__codelineno-25-375" href="#__codelineno-25-375"></a><span class="w">                        </span><span class="nx">success</span><span class="o">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
</span><span id="__span-25-376"><a id="__codelineno-25-376" name="__codelineno-25-376" href="#__codelineno-25-376"></a><span class="w">                        </span><span class="nx">error</span><span class="o">:</span><span class="w"> </span><span class="nx">error</span><span class="p">.</span><span class="nx">message</span>
</span><span id="__span-25-377"><a id="__codelineno-25-377" name="__codelineno-25-377" href="#__codelineno-25-377"></a><span class="w">                    </span><span class="p">};</span>
</span><span id="__span-25-378"><a id="__codelineno-25-378" name="__codelineno-25-378" href="#__codelineno-25-378"></a><span class="w">                </span><span class="p">}</span>
</span><span id="__span-25-379"><a id="__codelineno-25-379" name="__codelineno-25-379" href="#__codelineno-25-379"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-25-380"><a id="__codelineno-25-380" name="__codelineno-25-380" href="#__codelineno-25-380"></a><span class="w">        </span><span class="p">};</span>
</span><span id="__span-25-381"><a id="__codelineno-25-381" name="__codelineno-25-381" href="#__codelineno-25-381"></a>
</span><span id="__span-25-382"><a id="__codelineno-25-382" name="__codelineno-25-382" href="#__codelineno-25-382"></a><span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;ğŸŒ API endpoints created&#39;</span><span class="p">);</span>
</span><span id="__span-25-383"><a id="__codelineno-25-383" name="__codelineno-25-383" href="#__codelineno-25-383"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">api</span><span class="p">;</span>
</span><span id="__span-25-384"><a id="__codelineno-25-384" name="__codelineno-25-384" href="#__codelineno-25-384"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-25-385"><a id="__codelineno-25-385" name="__codelineno-25-385" href="#__codelineno-25-385"></a>
</span><span id="__span-25-386"><a id="__codelineno-25-386" name="__codelineno-25-386" href="#__codelineno-25-386"></a><span class="w">    </span><span class="nx">generateId</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-25-387"><a id="__codelineno-25-387" name="__codelineno-25-387" href="#__codelineno-25-387"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="s1">&#39;content_&#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">().</span><span class="nx">toString</span><span class="p">(</span><span class="mf">36</span><span class="p">).</span><span class="nx">substr</span><span class="p">(</span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="mf">9</span><span class="p">);</span>
</span><span id="__span-25-388"><a id="__codelineno-25-388" name="__codelineno-25-388" href="#__codelineno-25-388"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-25-389"><a id="__codelineno-25-389" name="__codelineno-25-389" href="#__codelineno-25-389"></a>
</span><span id="__span-25-390"><a id="__codelineno-25-390" name="__codelineno-25-390" href="#__codelineno-25-390"></a><span class="w">    </span><span class="c1">// Search functionality</span>
</span><span id="__span-25-391"><a id="__codelineno-25-391" name="__codelineno-25-391" href="#__codelineno-25-391"></a><span class="w">    </span><span class="nx">searchContent</span><span class="p">(</span><span class="nx">query</span><span class="p">,</span><span class="w"> </span><span class="nx">filters</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{})</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-25-392"><a id="__codelineno-25-392" name="__codelineno-25-392" href="#__codelineno-25-392"></a><span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">allContent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Array</span><span class="p">.</span><span class="kr">from</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">content</span><span class="p">.</span><span class="nx">values</span><span class="p">());</span>
</span><span id="__span-25-393"><a id="__codelineno-25-393" name="__codelineno-25-393" href="#__codelineno-25-393"></a>
</span><span id="__span-25-394"><a id="__codelineno-25-394" name="__codelineno-25-394" href="#__codelineno-25-394"></a><span class="w">        </span><span class="c1">// Full-text search (simplified)</span>
</span><span id="__span-25-395"><a id="__codelineno-25-395" name="__codelineno-25-395" href="#__codelineno-25-395"></a><span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">searchResults</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">allContent</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">item</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-25-396"><a id="__codelineno-25-396" name="__codelineno-25-396" href="#__codelineno-25-396"></a><span class="w">            </span><span class="kd">const</span><span class="w"> </span><span class="nx">searchableText</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sb">`</span><span class="si">${</span><span class="nx">item</span><span class="p">.</span><span class="nx">title</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="si">}</span><span class="sb"> </span><span class="si">${</span><span class="nx">item</span><span class="p">.</span><span class="nx">content</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="si">}</span><span class="sb"> </span><span class="si">${</span><span class="p">(</span><span class="nx">item</span><span class="p">.</span><span class="nx">tags</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="p">[]).</span><span class="nx">join</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)</span><span class="si">}</span><span class="sb">`</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">();</span>
</span><span id="__span-25-397"><a id="__codelineno-25-397" name="__codelineno-25-397" href="#__codelineno-25-397"></a><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="nx">searchableText</span><span class="p">.</span><span class="nx">includes</span><span class="p">(</span><span class="nx">query</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">());</span>
</span><span id="__span-25-398"><a id="__codelineno-25-398" name="__codelineno-25-398" href="#__codelineno-25-398"></a><span class="w">        </span><span class="p">});</span>
</span><span id="__span-25-399"><a id="__codelineno-25-399" name="__codelineno-25-399" href="#__codelineno-25-399"></a>
</span><span id="__span-25-400"><a id="__codelineno-25-400" name="__codelineno-25-400" href="#__codelineno-25-400"></a><span class="w">        </span><span class="c1">// Apply additional filters</span>
</span><span id="__span-25-401"><a id="__codelineno-25-401" name="__codelineno-25-401" href="#__codelineno-25-401"></a><span class="w">        </span><span class="kd">let</span><span class="w"> </span><span class="nx">filtered</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">searchResults</span><span class="p">;</span>
</span><span id="__span-25-402"><a id="__codelineno-25-402" name="__codelineno-25-402" href="#__codelineno-25-402"></a>
</span><span id="__span-25-403"><a id="__codelineno-25-403" name="__codelineno-25-403" href="#__codelineno-25-403"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">filters</span><span class="p">.</span><span class="nx">contentType</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-25-404"><a id="__codelineno-25-404" name="__codelineno-25-404" href="#__codelineno-25-404"></a><span class="w">            </span><span class="nx">filtered</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">filtered</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">item</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">item</span><span class="p">.</span><span class="nx">contentType</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="nx">filters</span><span class="p">.</span><span class="nx">contentType</span><span class="p">);</span>
</span><span id="__span-25-405"><a id="__codelineno-25-405" name="__codelineno-25-405" href="#__codelineno-25-405"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-25-406"><a id="__codelineno-25-406" name="__codelineno-25-406" href="#__codelineno-25-406"></a>
</span><span id="__span-25-407"><a id="__codelineno-25-407" name="__codelineno-25-407" href="#__codelineno-25-407"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">filters</span><span class="p">.</span><span class="nx">dateRange</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-25-408"><a id="__codelineno-25-408" name="__codelineno-25-408" href="#__codelineno-25-408"></a><span class="w">            </span><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">start</span><span class="p">,</span><span class="w"> </span><span class="nx">end</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">filters</span><span class="p">.</span><span class="nx">dateRange</span><span class="p">;</span>
</span><span id="__span-25-409"><a id="__codelineno-25-409" name="__codelineno-25-409" href="#__codelineno-25-409"></a><span class="w">            </span><span class="nx">filtered</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">filtered</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">item</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-25-410"><a id="__codelineno-25-410" name="__codelineno-25-410" href="#__codelineno-25-410"></a><span class="w">                </span><span class="kd">const</span><span class="w"> </span><span class="nx">itemDate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nb">Date</span><span class="p">(</span><span class="nx">item</span><span class="p">.</span><span class="nx">createdAt</span><span class="p">);</span>
</span><span id="__span-25-411"><a id="__codelineno-25-411" name="__codelineno-25-411" href="#__codelineno-25-411"></a><span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="nx">itemDate</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nb">Date</span><span class="p">(</span><span class="nx">start</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nx">itemDate</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nb">Date</span><span class="p">(</span><span class="nx">end</span><span class="p">);</span>
</span><span id="__span-25-412"><a id="__codelineno-25-412" name="__codelineno-25-412" href="#__codelineno-25-412"></a><span class="w">            </span><span class="p">});</span>
</span><span id="__span-25-413"><a id="__codelineno-25-413" name="__codelineno-25-413" href="#__codelineno-25-413"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-25-414"><a id="__codelineno-25-414" name="__codelineno-25-414" href="#__codelineno-25-414"></a>
</span><span id="__span-25-415"><a id="__codelineno-25-415" name="__codelineno-25-415" href="#__codelineno-25-415"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-25-416"><a id="__codelineno-25-416" name="__codelineno-25-416" href="#__codelineno-25-416"></a><span class="w">            </span><span class="nx">query</span><span class="o">:</span><span class="w"> </span><span class="nx">query</span><span class="p">,</span>
</span><span id="__span-25-417"><a id="__codelineno-25-417" name="__codelineno-25-417" href="#__codelineno-25-417"></a><span class="w">            </span><span class="nx">results</span><span class="o">:</span><span class="w"> </span><span class="nx">filtered</span><span class="p">,</span>
</span><span id="__span-25-418"><a id="__codelineno-25-418" name="__codelineno-25-418" href="#__codelineno-25-418"></a><span class="w">            </span><span class="nx">total</span><span class="o">:</span><span class="w"> </span><span class="nx">filtered</span><span class="p">.</span><span class="nx">length</span>
</span><span id="__span-25-419"><a id="__codelineno-25-419" name="__codelineno-25-419" href="#__codelineno-25-419"></a><span class="w">        </span><span class="p">};</span>
</span><span id="__span-25-420"><a id="__codelineno-25-420" name="__codelineno-25-420" href="#__codelineno-25-420"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-25-421"><a id="__codelineno-25-421" name="__codelineno-25-421" href="#__codelineno-25-421"></a><span class="p">}</span>
</span><span id="__span-25-422"><a id="__codelineno-25-422" name="__codelineno-25-422" href="#__codelineno-25-422"></a>
</span><span id="__span-25-423"><a id="__codelineno-25-423" name="__codelineno-25-423" href="#__codelineno-25-423"></a><span class="c1">// Example CMS Plugin: SEO Analyzer</span>
</span><span id="__span-25-424"><a id="__codelineno-25-424" name="__codelineno-25-424" href="#__codelineno-25-424"></a><span class="kd">const</span><span class="w"> </span><span class="nx">seoPlugin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sb">`</span>
</span><span id="__span-25-425"><a id="__codelineno-25-425" name="__codelineno-25-425" href="#__codelineno-25-425"></a><span class="sb">{</span>
</span><span id="__span-25-426"><a id="__codelineno-25-426" name="__codelineno-25-426" href="#__codelineno-25-426"></a><span class="sb">    name: &#39;SEO Analyzer&#39;,</span>
</span><span id="__span-25-427"><a id="__codelineno-25-427" name="__codelineno-25-427" href="#__codelineno-25-427"></a><span class="sb">    version: &#39;1.0.0&#39;,</span>
</span><span id="__span-25-428"><a id="__codelineno-25-428" name="__codelineno-25-428" href="#__codelineno-25-428"></a>
</span><span id="__span-25-429"><a id="__codelineno-25-429" name="__codelineno-25-429" href="#__codelineno-25-429"></a><span class="sb">    init: function(cms) {</span>
</span><span id="__span-25-430"><a id="__codelineno-25-430" name="__codelineno-25-430" href="#__codelineno-25-430"></a><span class="sb">        console.log(&#39;ğŸ” SEO Plugin initialized&#39;);</span>
</span><span id="__span-25-431"><a id="__codelineno-25-431" name="__codelineno-25-431" href="#__codelineno-25-431"></a><span class="sb">        this.cms = cms;</span>
</span><span id="__span-25-432"><a id="__codelineno-25-432" name="__codelineno-25-432" href="#__codelineno-25-432"></a><span class="sb">    },</span>
</span><span id="__span-25-433"><a id="__codelineno-25-433" name="__codelineno-25-433" href="#__codelineno-25-433"></a>
</span><span id="__span-25-434"><a id="__codelineno-25-434" name="__codelineno-25-434" href="#__codelineno-25-434"></a><span class="sb">    hooks: {</span>
</span><span id="__span-25-435"><a id="__codelineno-25-435" name="__codelineno-25-435" href="#__codelineno-25-435"></a><span class="sb">        &#39;content.created&#39;: function(content) {</span>
</span><span id="__span-25-436"><a id="__codelineno-25-436" name="__codelineno-25-436" href="#__codelineno-25-436"></a><span class="sb">            if (content.contentType === &#39;article&#39; || content.contentType === &#39;page&#39;) {</span>
</span><span id="__span-25-437"><a id="__codelineno-25-437" name="__codelineno-25-437" href="#__codelineno-25-437"></a><span class="sb">                this.analyzeSEO(content);</span>
</span><span id="__span-25-438"><a id="__codelineno-25-438" name="__codelineno-25-438" href="#__codelineno-25-438"></a><span class="sb">            }</span>
</span><span id="__span-25-439"><a id="__codelineno-25-439" name="__codelineno-25-439" href="#__codelineno-25-439"></a><span class="sb">        },</span>
</span><span id="__span-25-440"><a id="__codelineno-25-440" name="__codelineno-25-440" href="#__codelineno-25-440"></a>
</span><span id="__span-25-441"><a id="__codelineno-25-441" name="__codelineno-25-441" href="#__codelineno-25-441"></a><span class="sb">        &#39;content.updated&#39;: function(content) {</span>
</span><span id="__span-25-442"><a id="__codelineno-25-442" name="__codelineno-25-442" href="#__codelineno-25-442"></a><span class="sb">            if (content.contentType === &#39;article&#39; || content.contentType === &#39;page&#39;) {</span>
</span><span id="__span-25-443"><a id="__codelineno-25-443" name="__codelineno-25-443" href="#__codelineno-25-443"></a><span class="sb">                this.analyzeSEO(content);</span>
</span><span id="__span-25-444"><a id="__codelineno-25-444" name="__codelineno-25-444" href="#__codelineno-25-444"></a><span class="sb">            }</span>
</span><span id="__span-25-445"><a id="__codelineno-25-445" name="__codelineno-25-445" href="#__codelineno-25-445"></a><span class="sb">        }</span>
</span><span id="__span-25-446"><a id="__codelineno-25-446" name="__codelineno-25-446" href="#__codelineno-25-446"></a><span class="sb">    },</span>
</span><span id="__span-25-447"><a id="__codelineno-25-447" name="__codelineno-25-447" href="#__codelineno-25-447"></a>
</span><span id="__span-25-448"><a id="__codelineno-25-448" name="__codelineno-25-448" href="#__codelineno-25-448"></a><span class="sb">    analyzeSEO: function(content) {</span>
</span><span id="__span-25-449"><a id="__codelineno-25-449" name="__codelineno-25-449" href="#__codelineno-25-449"></a><span class="sb">        const analysis = {</span>
</span><span id="__span-25-450"><a id="__codelineno-25-450" name="__codelineno-25-450" href="#__codelineno-25-450"></a><span class="sb">            contentId: content.id,</span>
</span><span id="__span-25-451"><a id="__codelineno-25-451" name="__codelineno-25-451" href="#__codelineno-25-451"></a><span class="sb">            score: 0,</span>
</span><span id="__span-25-452"><a id="__codelineno-25-452" name="__codelineno-25-452" href="#__codelineno-25-452"></a><span class="sb">            issues: [],</span>
</span><span id="__span-25-453"><a id="__codelineno-25-453" name="__codelineno-25-453" href="#__codelineno-25-453"></a><span class="sb">            suggestions: []</span>
</span><span id="__span-25-454"><a id="__codelineno-25-454" name="__codelineno-25-454" href="#__codelineno-25-454"></a><span class="sb">        };</span>
</span><span id="__span-25-455"><a id="__codelineno-25-455" name="__codelineno-25-455" href="#__codelineno-25-455"></a>
</span><span id="__span-25-456"><a id="__codelineno-25-456" name="__codelineno-25-456" href="#__codelineno-25-456"></a><span class="sb">        // Title length check</span>
</span><span id="__span-25-457"><a id="__codelineno-25-457" name="__codelineno-25-457" href="#__codelineno-25-457"></a><span class="sb">        if (!content.title || content.title.length &lt; 30) {</span>
</span><span id="__span-25-458"><a id="__codelineno-25-458" name="__codelineno-25-458" href="#__codelineno-25-458"></a><span class="sb">            analysis.issues.push(&#39;Title is too short (recommended: 30-60 characters)&#39;);</span>
</span><span id="__span-25-459"><a id="__codelineno-25-459" name="__codelineno-25-459" href="#__codelineno-25-459"></a><span class="sb">        } else if (content.title.length &gt; 60) {</span>
</span><span id="__span-25-460"><a id="__codelineno-25-460" name="__codelineno-25-460" href="#__codelineno-25-460"></a><span class="sb">            analysis.issues.push(&#39;Title is too long (recommended: 30-60 characters)&#39;);</span>
</span><span id="__span-25-461"><a id="__codelineno-25-461" name="__codelineno-25-461" href="#__codelineno-25-461"></a><span class="sb">        } else {</span>
</span><span id="__span-25-462"><a id="__codelineno-25-462" name="__codelineno-25-462" href="#__codelineno-25-462"></a><span class="sb">            analysis.score += 20;</span>
</span><span id="__span-25-463"><a id="__codelineno-25-463" name="__codelineno-25-463" href="#__codelineno-25-463"></a><span class="sb">        }</span>
</span><span id="__span-25-464"><a id="__codelineno-25-464" name="__codelineno-25-464" href="#__codelineno-25-464"></a>
</span><span id="__span-25-465"><a id="__codelineno-25-465" name="__codelineno-25-465" href="#__codelineno-25-465"></a><span class="sb">        // Meta description check</span>
</span><span id="__span-25-466"><a id="__codelineno-25-466" name="__codelineno-25-466" href="#__codelineno-25-466"></a><span class="sb">        if (!content.seoDescription) {</span>
</span><span id="__span-25-467"><a id="__codelineno-25-467" name="__codelineno-25-467" href="#__codelineno-25-467"></a><span class="sb">            analysis.issues.push(&#39;Missing meta description&#39;);</span>
</span><span id="__span-25-468"><a id="__codelineno-25-468" name="__codelineno-25-468" href="#__codelineno-25-468"></a><span class="sb">        } else if (content.seoDescription.length &lt; 120) {</span>
</span><span id="__span-25-469"><a id="__codelineno-25-469" name="__codelineno-25-469" href="#__codelineno-25-469"></a><span class="sb">            analysis.issues.push(&#39;Meta description is too short (recommended: 120-160 characters)&#39;);</span>
</span><span id="__span-25-470"><a id="__codelineno-25-470" name="__codelineno-25-470" href="#__codelineno-25-470"></a><span class="sb">        } else if (content.seoDescription.length &gt; 160) {</span>
</span><span id="__span-25-471"><a id="__codelineno-25-471" name="__codelineno-25-471" href="#__codelineno-25-471"></a><span class="sb">            analysis.issues.push(&#39;Meta description is too long (recommended: 120-160 characters)&#39;);</span>
</span><span id="__span-25-472"><a id="__codelineno-25-472" name="__codelineno-25-472" href="#__codelineno-25-472"></a><span class="sb">        } else {</span>
</span><span id="__span-25-473"><a id="__codelineno-25-473" name="__codelineno-25-473" href="#__codelineno-25-473"></a><span class="sb">            analysis.score += 20;</span>
</span><span id="__span-25-474"><a id="__codelineno-25-474" name="__codelineno-25-474" href="#__codelineno-25-474"></a><span class="sb">        }</span>
</span><span id="__span-25-475"><a id="__codelineno-25-475" name="__codelineno-25-475" href="#__codelineno-25-475"></a>
</span><span id="__span-25-476"><a id="__codelineno-25-476" name="__codelineno-25-476" href="#__codelineno-25-476"></a><span class="sb">        // Content length check</span>
</span><span id="__span-25-477"><a id="__codelineno-25-477" name="__codelineno-25-477" href="#__codelineno-25-477"></a><span class="sb">        if (content.content &amp;&amp; content.content.length &gt; 300) {</span>
</span><span id="__span-25-478"><a id="__codelineno-25-478" name="__codelineno-25-478" href="#__codelineno-25-478"></a><span class="sb">            analysis.score += 20;</span>
</span><span id="__span-25-479"><a id="__codelineno-25-479" name="__codelineno-25-479" href="#__codelineno-25-479"></a><span class="sb">        } else {</span>
</span><span id="__span-25-480"><a id="__codelineno-25-480" name="__codelineno-25-480" href="#__codelineno-25-480"></a><span class="sb">            analysis.issues.push(&#39;Content is too short for good SEO (recommended: 300+ words)&#39;);</span>
</span><span id="__span-25-481"><a id="__codelineno-25-481" name="__codelineno-25-481" href="#__codelineno-25-481"></a><span class="sb">        }</span>
</span><span id="__span-25-482"><a id="__codelineno-25-482" name="__codelineno-25-482" href="#__codelineno-25-482"></a>
</span><span id="__span-25-483"><a id="__codelineno-25-483" name="__codelineno-25-483" href="#__codelineno-25-483"></a><span class="sb">        // Heading structure check (simplified)</span>
</span><span id="__span-25-484"><a id="__codelineno-25-484" name="__codelineno-25-484" href="#__codelineno-25-484"></a><span class="sb">        if (content.content &amp;&amp; content.content.includes(&#39;&lt;h1&gt;&#39;)) {</span>
</span><span id="__span-25-485"><a id="__codelineno-25-485" name="__codelineno-25-485" href="#__codelineno-25-485"></a><span class="sb">            analysis.score += 10;</span>
</span><span id="__span-25-486"><a id="__codelineno-25-486" name="__codelineno-25-486" href="#__codelineno-25-486"></a><span class="sb">        } else {</span>
</span><span id="__span-25-487"><a id="__codelineno-25-487" name="__codelineno-25-487" href="#__codelineno-25-487"></a><span class="sb">            analysis.suggestions.push(&#39;Add H1 heading to improve structure&#39;);</span>
</span><span id="__span-25-488"><a id="__codelineno-25-488" name="__codelineno-25-488" href="#__codelineno-25-488"></a><span class="sb">        }</span>
</span><span id="__span-25-489"><a id="__codelineno-25-489" name="__codelineno-25-489" href="#__codelineno-25-489"></a>
</span><span id="__span-25-490"><a id="__codelineno-25-490" name="__codelineno-25-490" href="#__codelineno-25-490"></a><span class="sb">        // Images with alt text (simplified check)</span>
</span><span id="__span-25-491"><a id="__codelineno-25-491" name="__codelineno-25-491" href="#__codelineno-25-491"></a><span class="sb">        if (content.content &amp;&amp; content.content.includes(&#39;alt=&#39;)) {</span>
</span><span id="__span-25-492"><a id="__codelineno-25-492" name="__codelineno-25-492" href="#__codelineno-25-492"></a><span class="sb">            analysis.score += 10;</span>
</span><span id="__span-25-493"><a id="__codelineno-25-493" name="__codelineno-25-493" href="#__codelineno-25-493"></a><span class="sb">        } else if (content.content &amp;&amp; content.content.includes(&#39;&lt;img&#39;)) {</span>
</span><span id="__span-25-494"><a id="__codelineno-25-494" name="__codelineno-25-494" href="#__codelineno-25-494"></a><span class="sb">            analysis.issues.push(&#39;Images missing alt text&#39;);</span>
</span><span id="__span-25-495"><a id="__codelineno-25-495" name="__codelineno-25-495" href="#__codelineno-25-495"></a><span class="sb">        }</span>
</span><span id="__span-25-496"><a id="__codelineno-25-496" name="__codelineno-25-496" href="#__codelineno-25-496"></a>
</span><span id="__span-25-497"><a id="__codelineno-25-497" name="__codelineno-25-497" href="#__codelineno-25-497"></a><span class="sb">        // Keywords in title (simplified)</span>
</span><span id="__span-25-498"><a id="__codelineno-25-498" name="__codelineno-25-498" href="#__codelineno-25-498"></a><span class="sb">        if (content.tags &amp;&amp; content.tags.length &gt; 0) {</span>
</span><span id="__span-25-499"><a id="__codelineno-25-499" name="__codelineno-25-499" href="#__codelineno-25-499"></a><span class="sb">            const titleWords = content.title.toLowerCase().split(&#39; &#39;);</span>
</span><span id="__span-25-500"><a id="__codelineno-25-500" name="__codelineno-25-500" href="#__codelineno-25-500"></a><span class="sb">            const hasKeywords = content.tags.some(tag =&gt; </span>
</span><span id="__span-25-501"><a id="__codelineno-25-501" name="__codelineno-25-501" href="#__codelineno-25-501"></a><span class="sb">                titleWords.some(word =&gt; word.includes(tag.toLowerCase()))</span>
</span><span id="__span-25-502"><a id="__codelineno-25-502" name="__codelineno-25-502" href="#__codelineno-25-502"></a><span class="sb">            );</span>
</span><span id="__span-25-503"><a id="__codelineno-25-503" name="__codelineno-25-503" href="#__codelineno-25-503"></a><span class="sb">            if (hasKeywords) {</span>
</span><span id="__span-25-504"><a id="__codelineno-25-504" name="__codelineno-25-504" href="#__codelineno-25-504"></a><span class="sb">                analysis.score += 20;</span>
</span><span id="__span-25-505"><a id="__codelineno-25-505" name="__codelineno-25-505" href="#__codelineno-25-505"></a><span class="sb">            } else {</span>
</span><span id="__span-25-506"><a id="__codelineno-25-506" name="__codelineno-25-506" href="#__codelineno-25-506"></a><span class="sb">                analysis.suggestions.push(&#39;Include target keywords in title&#39;);</span>
</span><span id="__span-25-507"><a id="__codelineno-25-507" name="__codelineno-25-507" href="#__codelineno-25-507"></a><span class="sb">            }</span>
</span><span id="__span-25-508"><a id="__codelineno-25-508" name="__codelineno-25-508" href="#__codelineno-25-508"></a><span class="sb">        }</span>
</span><span id="__span-25-509"><a id="__codelineno-25-509" name="__codelineno-25-509" href="#__codelineno-25-509"></a>
</span><span id="__span-25-510"><a id="__codelineno-25-510" name="__codelineno-25-510" href="#__codelineno-25-510"></a><span class="sb">        console.log(\`ğŸ“Š SEO Analysis for \${content.id}: Score \${analysis.score}/100\`);</span>
</span><span id="__span-25-511"><a id="__codelineno-25-511" name="__codelineno-25-511" href="#__codelineno-25-511"></a><span class="sb">        if (analysis.issues.length &gt; 0) {</span>
</span><span id="__span-25-512"><a id="__codelineno-25-512" name="__codelineno-25-512" href="#__codelineno-25-512"></a><span class="sb">            console.log(&#39;âš ï¸ Issues:&#39;, analysis.issues);</span>
</span><span id="__span-25-513"><a id="__codelineno-25-513" name="__codelineno-25-513" href="#__codelineno-25-513"></a><span class="sb">        }</span>
</span><span id="__span-25-514"><a id="__codelineno-25-514" name="__codelineno-25-514" href="#__codelineno-25-514"></a><span class="sb">        if (analysis.suggestions.length &gt; 0) {</span>
</span><span id="__span-25-515"><a id="__codelineno-25-515" name="__codelineno-25-515" href="#__codelineno-25-515"></a><span class="sb">            console.log(&#39;ğŸ’¡ Suggestions:&#39;, analysis.suggestions);</span>
</span><span id="__span-25-516"><a id="__codelineno-25-516" name="__codelineno-25-516" href="#__codelineno-25-516"></a><span class="sb">        }</span>
</span><span id="__span-25-517"><a id="__codelineno-25-517" name="__codelineno-25-517" href="#__codelineno-25-517"></a>
</span><span id="__span-25-518"><a id="__codelineno-25-518" name="__codelineno-25-518" href="#__codelineno-25-518"></a><span class="sb">        return analysis;</span>
</span><span id="__span-25-519"><a id="__codelineno-25-519" name="__codelineno-25-519" href="#__codelineno-25-519"></a><span class="sb">    }</span>
</span><span id="__span-25-520"><a id="__codelineno-25-520" name="__codelineno-25-520" href="#__codelineno-25-520"></a><span class="sb">}</span>
</span><span id="__span-25-521"><a id="__codelineno-25-521" name="__codelineno-25-521" href="#__codelineno-25-521"></a><span class="sb">`</span><span class="p">;</span>
</span><span id="__span-25-522"><a id="__codelineno-25-522" name="__codelineno-25-522" href="#__codelineno-25-522"></a>
</span><span id="__span-25-523"><a id="__codelineno-25-523" name="__codelineno-25-523" href="#__codelineno-25-523"></a><span class="c1">// WordPress-style hooks system</span>
</span><span id="__span-25-524"><a id="__codelineno-25-524" name="__codelineno-25-524" href="#__codelineno-25-524"></a><span class="kd">class</span><span class="w"> </span><span class="nx">WordPressLikeHooks</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-25-525"><a id="__codelineno-25-525" name="__codelineno-25-525" href="#__codelineno-25-525"></a><span class="w">    </span><span class="kr">constructor</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-25-526"><a id="__codelineno-25-526" name="__codelineno-25-526" href="#__codelineno-25-526"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">actions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nb">Map</span><span class="p">();</span>
</span><span id="__span-25-527"><a id="__codelineno-25-527" name="__codelineno-25-527" href="#__codelineno-25-527"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">filters</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nb">Map</span><span class="p">();</span>
</span><span id="__span-25-528"><a id="__codelineno-25-528" name="__codelineno-25-528" href="#__codelineno-25-528"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-25-529"><a id="__codelineno-25-529" name="__codelineno-25-529" href="#__codelineno-25-529"></a>
</span><span id="__span-25-530"><a id="__codelineno-25-530" name="__codelineno-25-530" href="#__codelineno-25-530"></a><span class="w">    </span><span class="nx">addAction</span><span class="p">(</span><span class="nx">hookName</span><span class="p">,</span><span class="w"> </span><span class="nx">callback</span><span class="p">,</span><span class="w"> </span><span class="nx">priority</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">10</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-25-531"><a id="__codelineno-25-531" name="__codelineno-25-531" href="#__codelineno-25-531"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">actions</span><span class="p">.</span><span class="nx">has</span><span class="p">(</span><span class="nx">hookName</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-25-532"><a id="__codelineno-25-532" name="__codelineno-25-532" href="#__codelineno-25-532"></a><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="nx">actions</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="nx">hookName</span><span class="p">,</span><span class="w"> </span><span class="p">[]);</span>
</span><span id="__span-25-533"><a id="__codelineno-25-533" name="__codelineno-25-533" href="#__codelineno-25-533"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-25-534"><a id="__codelineno-25-534" name="__codelineno-25-534" href="#__codelineno-25-534"></a>
</span><span id="__span-25-535"><a id="__codelineno-25-535" name="__codelineno-25-535" href="#__codelineno-25-535"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">actions</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">hookName</span><span class="p">).</span><span class="nx">push</span><span class="p">({</span><span class="w"> </span><span class="nx">callback</span><span class="p">,</span><span class="w"> </span><span class="nx">priority</span><span class="w"> </span><span class="p">});</span>
</span><span id="__span-25-536"><a id="__codelineno-25-536" name="__codelineno-25-536" href="#__codelineno-25-536"></a>
</span><span id="__span-25-537"><a id="__codelineno-25-537" name="__codelineno-25-537" href="#__codelineno-25-537"></a><span class="w">        </span><span class="c1">// Sort by priority</span>
</span><span id="__span-25-538"><a id="__codelineno-25-538" name="__codelineno-25-538" href="#__codelineno-25-538"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">actions</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">hookName</span><span class="p">).</span><span class="nx">sort</span><span class="p">((</span><span class="nx">a</span><span class="p">,</span><span class="w"> </span><span class="nx">b</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">a</span><span class="p">.</span><span class="nx">priority</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nx">b</span><span class="p">.</span><span class="nx">priority</span><span class="p">);</span>
</span><span id="__span-25-539"><a id="__codelineno-25-539" name="__codelineno-25-539" href="#__codelineno-25-539"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-25-540"><a id="__codelineno-25-540" name="__codelineno-25-540" href="#__codelineno-25-540"></a>
</span><span id="__span-25-541"><a id="__codelineno-25-541" name="__codelineno-25-541" href="#__codelineno-25-541"></a><span class="w">    </span><span class="nx">doAction</span><span class="p">(</span><span class="nx">hookName</span><span class="p">,</span><span class="w"> </span><span class="p">...</span><span class="nx">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-25-542"><a id="__codelineno-25-542" name="__codelineno-25-542" href="#__codelineno-25-542"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">actions</span><span class="p">.</span><span class="nx">has</span><span class="p">(</span><span class="nx">hookName</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-25-543"><a id="__codelineno-25-543" name="__codelineno-25-543" href="#__codelineno-25-543"></a><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="nx">actions</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">hookName</span><span class="p">).</span><span class="nx">forEach</span><span class="p">(({</span><span class="w"> </span><span class="nx">callback</span><span class="w"> </span><span class="p">})</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-25-544"><a id="__codelineno-25-544" name="__codelineno-25-544" href="#__codelineno-25-544"></a><span class="w">                </span><span class="nx">callback</span><span class="p">(...</span><span class="nx">args</span><span class="p">);</span>
</span><span id="__span-25-545"><a id="__codelineno-25-545" name="__codelineno-25-545" href="#__codelineno-25-545"></a><span class="w">            </span><span class="p">});</span>
</span><span id="__span-25-546"><a id="__codelineno-25-546" name="__codelineno-25-546" href="#__codelineno-25-546"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-25-547"><a id="__codelineno-25-547" name="__codelineno-25-547" href="#__codelineno-25-547"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-25-548"><a id="__codelineno-25-548" name="__codelineno-25-548" href="#__codelineno-25-548"></a>
</span><span id="__span-25-549"><a id="__codelineno-25-549" name="__codelineno-25-549" href="#__codelineno-25-549"></a><span class="w">    </span><span class="nx">addFilter</span><span class="p">(</span><span class="nx">hookName</span><span class="p">,</span><span class="w"> </span><span class="nx">callback</span><span class="p">,</span><span class="w"> </span><span class="nx">priority</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">10</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-25-550"><a id="__codelineno-25-550" name="__codelineno-25-550" href="#__codelineno-25-550"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">filters</span><span class="p">.</span><span class="nx">has</span><span class="p">(</span><span class="nx">hookName</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-25-551"><a id="__codelineno-25-551" name="__codelineno-25-551" href="#__codelineno-25-551"></a><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="nx">filters</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="nx">hookName</span><span class="p">,</span><span class="w"> </span><span class="p">[]);</span>
</span><span id="__span-25-552"><a id="__codelineno-25-552" name="__codelineno-25-552" href="#__codelineno-25-552"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-25-553"><a id="__codelineno-25-553" name="__codelineno-25-553" href="#__codelineno-25-553"></a>
</span><span id="__span-25-554"><a id="__codelineno-25-554" name="__codelineno-25-554" href="#__codelineno-25-554"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">filters</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">hookName</span><span class="p">).</span><span class="nx">push</span><span class="p">({</span><span class="w"> </span><span class="nx">callback</span><span class="p">,</span><span class="w"> </span><span class="nx">priority</span><span class="w"> </span><span class="p">});</span>
</span><span id="__span-25-555"><a id="__codelineno-25-555" name="__codelineno-25-555" href="#__codelineno-25-555"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">filters</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">hookName</span><span class="p">).</span><span class="nx">sort</span><span class="p">((</span><span class="nx">a</span><span class="p">,</span><span class="w"> </span><span class="nx">b</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">a</span><span class="p">.</span><span class="nx">priority</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nx">b</span><span class="p">.</span><span class="nx">priority</span><span class="p">);</span>
</span><span id="__span-25-556"><a id="__codelineno-25-556" name="__codelineno-25-556" href="#__codelineno-25-556"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-25-557"><a id="__codelineno-25-557" name="__codelineno-25-557" href="#__codelineno-25-557"></a>
</span><span id="__span-25-558"><a id="__codelineno-25-558" name="__codelineno-25-558" href="#__codelineno-25-558"></a><span class="w">    </span><span class="nx">applyFilters</span><span class="p">(</span><span class="nx">hookName</span><span class="p">,</span><span class="w"> </span><span class="nx">value</span><span class="p">,</span><span class="w"> </span><span class="p">...</span><span class="nx">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-25-559"><a id="__codelineno-25-559" name="__codelineno-25-559" href="#__codelineno-25-559"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">filters</span><span class="p">.</span><span class="nx">has</span><span class="p">(</span><span class="nx">hookName</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-25-560"><a id="__codelineno-25-560" name="__codelineno-25-560" href="#__codelineno-25-560"></a><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">filters</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">hookName</span><span class="p">).</span><span class="nx">reduce</span><span class="p">((</span><span class="nx">acc</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">callback</span><span class="w"> </span><span class="p">})</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-25-561"><a id="__codelineno-25-561" name="__codelineno-25-561" href="#__codelineno-25-561"></a><span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="nx">callback</span><span class="p">(</span><span class="nx">acc</span><span class="p">,</span><span class="w"> </span><span class="p">...</span><span class="nx">args</span><span class="p">);</span>
</span><span id="__span-25-562"><a id="__codelineno-25-562" name="__codelineno-25-562" href="#__codelineno-25-562"></a><span class="w">            </span><span class="p">},</span><span class="w"> </span><span class="nx">value</span><span class="p">);</span>
</span><span id="__span-25-563"><a id="__codelineno-25-563" name="__codelineno-25-563" href="#__codelineno-25-563"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-25-564"><a id="__codelineno-25-564" name="__codelineno-25-564" href="#__codelineno-25-564"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">value</span><span class="p">;</span>
</span><span id="__span-25-565"><a id="__codelineno-25-565" name="__codelineno-25-565" href="#__codelineno-25-565"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-25-566"><a id="__codelineno-25-566" name="__codelineno-25-566" href="#__codelineno-25-566"></a><span class="p">}</span>
</span><span id="__span-25-567"><a id="__codelineno-25-567" name="__codelineno-25-567" href="#__codelineno-25-567"></a>
</span><span id="__span-25-568"><a id="__codelineno-25-568" name="__codelineno-25-568" href="#__codelineno-25-568"></a><span class="c1">// Demonstration of the CMS system</span>
</span><span id="__span-25-569"><a id="__codelineno-25-569" name="__codelineno-25-569" href="#__codelineno-25-569"></a><span class="kd">function</span><span class="w"> </span><span class="nx">demonstrateCMS</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-25-570"><a id="__codelineno-25-570" name="__codelineno-25-570" href="#__codelineno-25-570"></a><span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;ğŸš€ MODERN CMS DEMONSTRATION&#39;</span><span class="p">);</span>
</span><span id="__span-25-571"><a id="__codelineno-25-571" name="__codelineno-25-571" href="#__codelineno-25-571"></a><span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;=&#39;</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mf">50</span><span class="p">);</span>
</span><span id="__span-25-572"><a id="__codelineno-25-572" name="__codelineno-25-572" href="#__codelineno-25-572"></a>
</span><span id="__span-25-573"><a id="__codelineno-25-573" name="__codelineno-25-573" href="#__codelineno-25-573"></a><span class="w">    </span><span class="c1">// Initialize CMS</span>
</span><span id="__span-25-574"><a id="__codelineno-25-574" name="__codelineno-25-574" href="#__codelineno-25-574"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">cms</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">ModernCMS</span><span class="p">();</span>
</span><span id="__span-25-575"><a id="__codelineno-25-575" name="__codelineno-25-575" href="#__codelineno-25-575"></a>
</span><span id="__span-25-576"><a id="__codelineno-25-576" name="__codelineno-25-576" href="#__codelineno-25-576"></a><span class="w">    </span><span class="c1">// Install SEO plugin</span>
</span><span id="__span-25-577"><a id="__codelineno-25-577" name="__codelineno-25-577" href="#__codelineno-25-577"></a><span class="w">    </span><span class="nx">cms</span><span class="p">.</span><span class="nx">installPlugin</span><span class="p">(</span><span class="s1">&#39;seo-analyzer&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">seoPlugin</span><span class="p">);</span>
</span><span id="__span-25-578"><a id="__codelineno-25-578" name="__codelineno-25-578" href="#__codelineno-25-578"></a>
</span><span id="__span-25-579"><a id="__codelineno-25-579" name="__codelineno-25-579" href="#__codelineno-25-579"></a><span class="w">    </span><span class="c1">// Create API endpoints</span>
</span><span id="__span-25-580"><a id="__codelineno-25-580" name="__codelineno-25-580" href="#__codelineno-25-580"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">api</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">cms</span><span class="p">.</span><span class="nx">createAPIEndpoints</span><span class="p">();</span>
</span><span id="__span-25-581"><a id="__codelineno-25-581" name="__codelineno-25-581" href="#__codelineno-25-581"></a>
</span><span id="__span-25-582"><a id="__codelineno-25-582" name="__codelineno-25-582" href="#__codelineno-25-582"></a><span class="w">    </span><span class="c1">// Test API endpoints</span>
</span><span id="__span-25-583"><a id="__codelineno-25-583" name="__codelineno-25-583" href="#__codelineno-25-583"></a><span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;\\n1ï¸âƒ£ Testing Content Creation&#39;</span><span class="p">);</span>
</span><span id="__span-25-584"><a id="__codelineno-25-584" name="__codelineno-25-584" href="#__codelineno-25-584"></a><span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;-&#39;</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mf">30</span><span class="p">);</span>
</span><span id="__span-25-585"><a id="__codelineno-25-585" name="__codelineno-25-585" href="#__codelineno-25-585"></a>
</span><span id="__span-25-586"><a id="__codelineno-25-586" name="__codelineno-25-586" href="#__codelineno-25-586"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">newArticle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">api</span><span class="p">.</span><span class="nx">createContentItem</span><span class="p">(</span><span class="s1">&#39;article&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-25-587"><a id="__codelineno-25-587" name="__codelineno-25-587" href="#__codelineno-25-587"></a><span class="w">        </span><span class="nx">title</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Advanced JavaScript Techniques&#39;</span><span class="p">,</span>
</span><span id="__span-25-588"><a id="__codelineno-25-588" name="__codelineno-25-588" href="#__codelineno-25-588"></a><span class="w">        </span><span class="nx">content</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;&lt;h1&gt;Advanced JavaScript&lt;/h1&gt;&lt;p&gt;Learn modern JavaScript patterns and best practices...&lt;/p&gt;&#39;</span><span class="p">,</span>
</span><span id="__span-25-589"><a id="__codelineno-25-589" name="__codelineno-25-589" href="#__codelineno-25-589"></a><span class="w">        </span><span class="nx">author</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;user2&#39;</span><span class="p">,</span>
</span><span id="__span-25-590"><a id="__codelineno-25-590" name="__codelineno-25-590" href="#__codelineno-25-590"></a><span class="w">        </span><span class="nx">status</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;published&#39;</span><span class="p">,</span>
</span><span id="__span-25-591"><a id="__codelineno-25-591" name="__codelineno-25-591" href="#__codelineno-25-591"></a><span class="w">        </span><span class="nx">tags</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;javascript&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;advanced&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;programming&#39;</span><span class="p">],</span>
</span><span id="__span-25-592"><a id="__codelineno-25-592" name="__codelineno-25-592" href="#__codelineno-25-592"></a><span class="w">        </span><span class="nx">seoTitle</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Advanced JavaScript Techniques - Complete Guide&#39;</span><span class="p">,</span>
</span><span id="__span-25-593"><a id="__codelineno-25-593" name="__codelineno-25-593" href="#__codelineno-25-593"></a><span class="w">        </span><span class="nx">seoDescription</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Master advanced JavaScript techniques including closures, promises, async/await, and modern ES6+ features.&#39;</span>
</span><span id="__span-25-594"><a id="__codelineno-25-594" name="__codelineno-25-594" href="#__codelineno-25-594"></a><span class="w">    </span><span class="p">});</span>
</span><span id="__span-25-595"><a id="__codelineno-25-595" name="__codelineno-25-595" href="#__codelineno-25-595"></a>
</span><span id="__span-25-596"><a id="__codelineno-25-596" name="__codelineno-25-596" href="#__codelineno-25-596"></a><span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;âœ… Article created:&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">newArticle</span><span class="p">.</span><span class="nx">success</span><span class="p">);</span>
</span><span id="__span-25-597"><a id="__codelineno-25-597" name="__codelineno-25-597" href="#__codelineno-25-597"></a>
</span><span id="__span-25-598"><a id="__codelineno-25-598" name="__codelineno-25-598" href="#__codelineno-25-598"></a><span class="w">    </span><span class="c1">// Test content listing</span>
</span><span id="__span-25-599"><a id="__codelineno-25-599" name="__codelineno-25-599" href="#__codelineno-25-599"></a><span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;\\n2ï¸âƒ£ Testing Content Listing&#39;</span><span class="p">);</span>
</span><span id="__span-25-600"><a id="__codelineno-25-600" name="__codelineno-25-600" href="#__codelineno-25-600"></a><span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;-&#39;</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mf">30</span><span class="p">);</span>
</span><span id="__span-25-601"><a id="__codelineno-25-601" name="__codelineno-25-601" href="#__codelineno-25-601"></a>
</span><span id="__span-25-602"><a id="__codelineno-25-602" name="__codelineno-25-602" href="#__codelineno-25-602"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">articles</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">api</span><span class="p">.</span><span class="nx">getContentList</span><span class="p">(</span><span class="s1">&#39;article&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-25-603"><a id="__codelineno-25-603" name="__codelineno-25-603" href="#__codelineno-25-603"></a><span class="w">        </span><span class="nx">status</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;published&#39;</span><span class="p">,</span>
</span><span id="__span-25-604"><a id="__codelineno-25-604" name="__codelineno-25-604" href="#__codelineno-25-604"></a><span class="w">        </span><span class="nx">sortBy</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;createdAt&#39;</span><span class="p">,</span>
</span><span id="__span-25-605"><a id="__codelineno-25-605" name="__codelineno-25-605" href="#__codelineno-25-605"></a><span class="w">        </span><span class="nx">sortOrder</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;desc&#39;</span><span class="p">,</span>
</span><span id="__span-25-606"><a id="__codelineno-25-606" name="__codelineno-25-606" href="#__codelineno-25-606"></a><span class="w">        </span><span class="nx">limit</span><span class="o">:</span><span class="w"> </span><span class="mf">5</span>
</span><span id="__span-25-607"><a id="__codelineno-25-607" name="__codelineno-25-607" href="#__codelineno-25-607"></a><span class="w">    </span><span class="p">});</span>
</span><span id="__span-25-608"><a id="__codelineno-25-608" name="__codelineno-25-608" href="#__codelineno-25-608"></a>
</span><span id="__span-25-609"><a id="__codelineno-25-609" name="__codelineno-25-609" href="#__codelineno-25-609"></a><span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="err">\</span><span class="sb">`ğŸ“„ Found \${articles.data.length} published articles\`);</span>
</span><span id="__span-25-610"><a id="__codelineno-25-610" name="__codelineno-25-610" href="#__codelineno-25-610"></a><span class="sb">    articles.data.forEach(article =&gt; {</span>
</span><span id="__span-25-611"><a id="__codelineno-25-611" name="__codelineno-25-611" href="#__codelineno-25-611"></a><span class="sb">        console.log(\`   â€¢ \${article.title} (\${article.tags.join(&#39;, &#39;)})\`);</span>
</span><span id="__span-25-612"><a id="__codelineno-25-612" name="__codelineno-25-612" href="#__codelineno-25-612"></a><span class="sb">    });</span>
</span><span id="__span-25-613"><a id="__codelineno-25-613" name="__codelineno-25-613" href="#__codelineno-25-613"></a>
</span><span id="__span-25-614"><a id="__codelineno-25-614" name="__codelineno-25-614" href="#__codelineno-25-614"></a><span class="sb">    // Test search</span>
</span><span id="__span-25-615"><a id="__codelineno-25-615" name="__codelineno-25-615" href="#__codelineno-25-615"></a><span class="sb">    console.log(&#39;\\n3ï¸âƒ£ Testing Content Search&#39;);</span>
</span><span id="__span-25-616"><a id="__codelineno-25-616" name="__codelineno-25-616" href="#__codelineno-25-616"></a><span class="sb">    console.log(&#39;-&#39; * 30);</span>
</span><span id="__span-25-617"><a id="__codelineno-25-617" name="__codelineno-25-617" href="#__codelineno-25-617"></a>
</span><span id="__span-25-618"><a id="__codelineno-25-618" name="__codelineno-25-618" href="#__codelineno-25-618"></a><span class="sb">    const searchResults = cms.searchContent(&#39;javascript&#39;, {</span>
</span><span id="__span-25-619"><a id="__codelineno-25-619" name="__codelineno-25-619" href="#__codelineno-25-619"></a><span class="sb">        contentType: &#39;article&#39;</span>
</span><span id="__span-25-620"><a id="__codelineno-25-620" name="__codelineno-25-620" href="#__codelineno-25-620"></a><span class="sb">    });</span>
</span><span id="__span-25-621"><a id="__codelineno-25-621" name="__codelineno-25-621" href="#__codelineno-25-621"></a>
</span><span id="__span-25-622"><a id="__codelineno-25-622" name="__codelineno-25-622" href="#__codelineno-25-622"></a><span class="sb">    console.log(\`ğŸ” Search for &quot;javascript&quot; found \${searchResults.total} results\`);</span>
</span><span id="__span-25-623"><a id="__codelineno-25-623" name="__codelineno-25-623" href="#__codelineno-25-623"></a>
</span><span id="__span-25-624"><a id="__codelineno-25-624" name="__codelineno-25-624" href="#__codelineno-25-624"></a><span class="sb">    // Test content update</span>
</span><span id="__span-25-625"><a id="__codelineno-25-625" name="__codelineno-25-625" href="#__codelineno-25-625"></a><span class="sb">    console.log(&#39;\\n4ï¸âƒ£ Testing Content Update&#39;);</span>
</span><span id="__span-25-626"><a id="__codelineno-25-626" name="__codelineno-25-626" href="#__codelineno-25-626"></a><span class="sb">    console.log(&#39;-&#39; * 30);</span>
</span><span id="__span-25-627"><a id="__codelineno-25-627" name="__codelineno-25-627" href="#__codelineno-25-627"></a>
</span><span id="__span-25-628"><a id="__codelineno-25-628" name="__codelineno-25-628" href="#__codelineno-25-628"></a><span class="sb">    if (newArticle.success) {</span>
</span><span id="__span-25-629"><a id="__codelineno-25-629" name="__codelineno-25-629" href="#__codelineno-25-629"></a><span class="sb">        const updated = api.updateContentItem(&#39;article&#39;, newArticle.data.id, {</span>
</span><span id="__span-25-630"><a id="__codelineno-25-630" name="__codelineno-25-630" href="#__codelineno-25-630"></a><span class="sb">            content: newArticle.data.content + &#39;&lt;p&gt;Updated with additional information...&lt;/p&gt;&#39;,</span>
</span><span id="__span-25-631"><a id="__codelineno-25-631" name="__codelineno-25-631" href="#__codelineno-25-631"></a><span class="sb">            tags: [...newArticle.data.tags, &#39;updated&#39;]</span>
</span><span id="__span-25-632"><a id="__codelineno-25-632" name="__codelineno-25-632" href="#__codelineno-25-632"></a><span class="sb">        });</span>
</span><span id="__span-25-633"><a id="__codelineno-25-633" name="__codelineno-25-633" href="#__codelineno-25-633"></a>
</span><span id="__span-25-634"><a id="__codelineno-25-634" name="__codelineno-25-634" href="#__codelineno-25-634"></a><span class="sb">        console.log(&#39;âœï¸ Article updated:&#39;, updated.success);</span>
</span><span id="__span-25-635"><a id="__codelineno-25-635" name="__codelineno-25-635" href="#__codelineno-25-635"></a><span class="sb">    }</span>
</span><span id="__span-25-636"><a id="__codelineno-25-636" name="__codelineno-25-636" href="#__codelineno-25-636"></a>
</span><span id="__span-25-637"><a id="__codelineno-25-637" name="__codelineno-25-637" href="#__codelineno-25-637"></a><span class="sb">    console.log(&#39;\\nâœ… CMS Demonstration Complete!&#39;);</span>
</span><span id="__span-25-638"><a id="__codelineno-25-638" name="__codelineno-25-638" href="#__codelineno-25-638"></a><span class="sb">    console.log(&#39;\\nğŸ’¡ CMS FEATURES DEMONSTRATED:&#39;);</span>
</span><span id="__span-25-639"><a id="__codelineno-25-639" name="__codelineno-25-639" href="#__codelineno-25-639"></a><span class="sb">    console.log(&#39;1. Flexible content type system&#39;);</span>
</span><span id="__span-25-640"><a id="__codelineno-25-640" name="__codelineno-25-640" href="#__codelineno-25-640"></a><span class="sb">    console.log(&#39;2. RESTful API endpoints&#39;);</span>
</span><span id="__span-25-641"><a id="__codelineno-25-641" name="__codelineno-25-641" href="#__codelineno-25-641"></a><span class="sb">    console.log(&#39;3. Plugin architecture with hooks&#39;);</span>
</span><span id="__span-25-642"><a id="__codelineno-25-642" name="__codelineno-25-642" href="#__codelineno-25-642"></a><span class="sb">    console.log(&#39;4. Content validation and versioning&#39;);</span>
</span><span id="__span-25-643"><a id="__codelineno-25-643" name="__codelineno-25-643" href="#__codelineno-25-643"></a><span class="sb">    console.log(&#39;5. Search and filtering capabilities&#39;);</span>
</span><span id="__span-25-644"><a id="__codelineno-25-644" name="__codelineno-25-644" href="#__codelineno-25-644"></a><span class="sb">    console.log(&#39;6. SEO analysis and optimization&#39;);</span>
</span><span id="__span-25-645"><a id="__codelineno-25-645" name="__codelineno-25-645" href="#__codelineno-25-645"></a><span class="sb">    console.log(&#39;7. Headless architecture for modern frontends&#39;);</span>
</span><span id="__span-25-646"><a id="__codelineno-25-646" name="__codelineno-25-646" href="#__codelineno-25-646"></a><span class="sb">}</span>
</span><span id="__span-25-647"><a id="__codelineno-25-647" name="__codelineno-25-647" href="#__codelineno-25-647"></a>
</span><span id="__span-25-648"><a id="__codelineno-25-648" name="__codelineno-25-648" href="#__codelineno-25-648"></a><span class="sb">// Run the demonstration</span>
</span><span id="__span-25-649"><a id="__codelineno-25-649" name="__codelineno-25-649" href="#__codelineno-25-649"></a><span class="sb">demonstrateCMS();</span>
</span></code></pre></div>
</details>
<p><strong>ğŸŒ Open-Source License Comparison:</strong></p>
<table>
<thead>
<tr>
<th>License</th>
<th>Commercial Use</th>
<th>Modification</th>
<th>Distribution</th>
<th>Patent Grant</th>
<th>Attribution Required</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>MIT</strong></td>
<td>âœ… Yes</td>
<td>âœ… Yes</td>
<td>âœ… Yes</td>
<td>âŒ No</td>
<td>âœ… Yes</td>
</tr>
<tr>
<td><strong>Apache 2.0</strong></td>
<td>âœ… Yes</td>
<td>âœ… Yes</td>
<td>âœ… Yes</td>
<td>âœ… Yes</td>
<td>âœ… Yes</td>
</tr>
<tr>
<td><strong>GPL v3</strong></td>
<td>âœ… Yes</td>
<td>âœ… Yes</td>
<td>âœ… Yes (copyleft)</td>
<td>âœ… Yes</td>
<td>âœ… Yes</td>
</tr>
<tr>
<td><strong>BSD 3-Clause</strong></td>
<td>âœ… Yes</td>
<td>âœ… Yes</td>
<td>âœ… Yes</td>
<td>âŒ No</td>
<td>âœ… Yes</td>
</tr>
<tr>
<td><strong>Creative Commons</strong></td>
<td>Varies</td>
<td>Varies</td>
<td>Varies</td>
<td>âŒ No</td>
<td>âœ… Yes</td>
</tr>
</tbody>
</table>
<p><strong>ğŸ“Š Popular CMS Platform Analysis:</strong></p>
<table>
<thead>
<tr>
<th>Platform</th>
<th>Language</th>
<th>Market Share</th>
<th>Best For</th>
<th>Learning Curve</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>WordPress</strong></td>
<td>PHP</td>
<td>43%</td>
<td>Blogs, small business sites</td>
<td>Easy</td>
</tr>
<tr>
<td><strong>Shopify</strong></td>
<td>Ruby/Liquid</td>
<td>10%</td>
<td>E-commerce</td>
<td>Easy</td>
</tr>
<tr>
<td><strong>Drupal</strong></td>
<td>PHP</td>
<td>4%</td>
<td>Enterprise, complex sites</td>
<td>Hard</td>
</tr>
<tr>
<td><strong>Joomla</strong></td>
<td>PHP</td>
<td>3%</td>
<td>Community sites</td>
<td>Medium</td>
</tr>
<tr>
<td><strong>Ghost</strong></td>
<td>Node.js</td>
<td>1%</td>
<td>Publishing, blogs</td>
<td>Easy</td>
</tr>
<tr>
<td><strong>Strapi</strong></td>
<td>Node.js</td>
<td>Growing</td>
<td>Headless CMS</td>
<td>Medium</td>
</tr>
</tbody>
</table>
<h3 id="performance-load-management-speed-is-everything">Performance &amp; Load Management: Speed is Everything âš¡ğŸ¯<a class="headerlink" href="#performance-load-management-speed-is-everything" title="Permanent link">&para;</a></h3>
<p>In the web world, every millisecond counts. Users expect pages to load in under 3 seconds, and search engines heavily favor fast websites. Performance optimization isn't just about making things fasterâ€”it's about creating better user experiences, improving search rankings, and reducing server costs.</p>
<details class="example">
<summary>Web Performance Optimization Example</summary>
<div class="language-javascript highlight"><pre><span></span><code><span id="__span-26-1"><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a><span class="c1">// Advanced Performance Monitoring and Optimization System</span>
</span><span id="__span-26-2"><a id="__codelineno-26-2" name="__codelineno-26-2" href="#__codelineno-26-2"></a><span class="kd">class</span><span class="w"> </span><span class="nx">WebPerformanceOptimizer</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-3"><a id="__codelineno-26-3" name="__codelineno-26-3" href="#__codelineno-26-3"></a><span class="w">    </span><span class="kr">constructor</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-4"><a id="__codelineno-26-4" name="__codelineno-26-4" href="#__codelineno-26-4"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">metrics</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nb">Map</span><span class="p">();</span>
</span><span id="__span-26-5"><a id="__codelineno-26-5" name="__codelineno-26-5" href="#__codelineno-26-5"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">observers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nb">Map</span><span class="p">();</span>
</span><span id="__span-26-6"><a id="__codelineno-26-6" name="__codelineno-26-6" href="#__codelineno-26-6"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">optimizations</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nb">Map</span><span class="p">();</span>
</span><span id="__span-26-7"><a id="__codelineno-26-7" name="__codelineno-26-7" href="#__codelineno-26-7"></a>
</span><span id="__span-26-8"><a id="__codelineno-26-8" name="__codelineno-26-8" href="#__codelineno-26-8"></a><span class="w">        </span><span class="c1">// Initialize performance monitoring</span>
</span><span id="__span-26-9"><a id="__codelineno-26-9" name="__codelineno-26-9" href="#__codelineno-26-9"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">initializeMonitoring</span><span class="p">();</span>
</span><span id="__span-26-10"><a id="__codelineno-26-10" name="__codelineno-26-10" href="#__codelineno-26-10"></a>
</span><span id="__span-26-11"><a id="__codelineno-26-11" name="__codelineno-26-11" href="#__codelineno-26-11"></a><span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;âš¡ Web Performance Optimizer initialized&#39;</span><span class="p">);</span>
</span><span id="__span-26-12"><a id="__codelineno-26-12" name="__codelineno-26-12" href="#__codelineno-26-12"></a><span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Features: Real-time monitoring, Automatic optimization, Detailed analytics&#39;</span><span class="p">);</span>
</span><span id="__span-26-13"><a id="__codelineno-26-13" name="__codelineno-26-13" href="#__codelineno-26-13"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-26-14"><a id="__codelineno-26-14" name="__codelineno-26-14" href="#__codelineno-26-14"></a>
</span><span id="__span-26-15"><a id="__codelineno-26-15" name="__codelineno-26-15" href="#__codelineno-26-15"></a><span class="w">    </span><span class="nx">initializeMonitoring</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-16"><a id="__codelineno-26-16" name="__codelineno-26-16" href="#__codelineno-26-16"></a><span class="w">        </span><span class="c1">// Core Web Vitals monitoring</span>
</span><span id="__span-26-17"><a id="__codelineno-26-17" name="__codelineno-26-17" href="#__codelineno-26-17"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">observeWebVitals</span><span class="p">();</span>
</span><span id="__span-26-18"><a id="__codelineno-26-18" name="__codelineno-26-18" href="#__codelineno-26-18"></a>
</span><span id="__span-26-19"><a id="__codelineno-26-19" name="__codelineno-26-19" href="#__codelineno-26-19"></a><span class="w">        </span><span class="c1">// Resource loading monitoring</span>
</span><span id="__span-26-20"><a id="__codelineno-26-20" name="__codelineno-26-20" href="#__codelineno-26-20"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">observeResourceLoading</span><span class="p">();</span>
</span><span id="__span-26-21"><a id="__codelineno-26-21" name="__codelineno-26-21" href="#__codelineno-26-21"></a>
</span><span id="__span-26-22"><a id="__codelineno-26-22" name="__codelineno-26-22" href="#__codelineno-26-22"></a><span class="w">        </span><span class="c1">// User interaction monitoring</span>
</span><span id="__span-26-23"><a id="__codelineno-26-23" name="__codelineno-26-23" href="#__codelineno-26-23"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">observeUserInteractions</span><span class="p">();</span>
</span><span id="__span-26-24"><a id="__codelineno-26-24" name="__codelineno-26-24" href="#__codelineno-26-24"></a>
</span><span id="__span-26-25"><a id="__codelineno-26-25" name="__codelineno-26-25" href="#__codelineno-26-25"></a><span class="w">        </span><span class="c1">// Network conditions monitoring</span>
</span><span id="__span-26-26"><a id="__codelineno-26-26" name="__codelineno-26-26" href="#__codelineno-26-26"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">observeNetworkConditions</span><span class="p">();</span>
</span><span id="__span-26-27"><a id="__codelineno-26-27" name="__codelineno-26-27" href="#__codelineno-26-27"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-26-28"><a id="__codelineno-26-28" name="__codelineno-26-28" href="#__codelineno-26-28"></a>
</span><span id="__span-26-29"><a id="__codelineno-26-29" name="__codelineno-26-29" href="#__codelineno-26-29"></a><span class="w">    </span><span class="nx">observeWebVitals</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-30"><a id="__codelineno-26-30" name="__codelineno-26-30" href="#__codelineno-26-30"></a><span class="w">        </span><span class="c1">// Largest Contentful Paint (LCP)</span>
</span><span id="__span-26-31"><a id="__codelineno-26-31" name="__codelineno-26-31" href="#__codelineno-26-31"></a><span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">lcpObserver</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">PerformanceObserver</span><span class="p">((</span><span class="nx">list</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-32"><a id="__codelineno-26-32" name="__codelineno-26-32" href="#__codelineno-26-32"></a><span class="w">            </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">const</span><span class="w"> </span><span class="nx">entry</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="nx">list</span><span class="p">.</span><span class="nx">getEntries</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-33"><a id="__codelineno-26-33" name="__codelineno-26-33" href="#__codelineno-26-33"></a><span class="w">                </span><span class="k">this</span><span class="p">.</span><span class="nx">recordMetric</span><span class="p">(</span><span class="s1">&#39;LCP&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">entry</span><span class="p">.</span><span class="nx">startTime</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-34"><a id="__codelineno-26-34" name="__codelineno-26-34" href="#__codelineno-26-34"></a><span class="w">                    </span><span class="nx">element</span><span class="o">:</span><span class="w"> </span><span class="nx">entry</span><span class="p">.</span><span class="nx">element</span><span class="o">?</span><span class="p">.</span><span class="nx">tagName</span><span class="p">,</span>
</span><span id="__span-26-35"><a id="__codelineno-26-35" name="__codelineno-26-35" href="#__codelineno-26-35"></a><span class="w">                    </span><span class="nx">url</span><span class="o">:</span><span class="w"> </span><span class="nx">entry</span><span class="p">.</span><span class="nx">url</span>
</span><span id="__span-26-36"><a id="__codelineno-26-36" name="__codelineno-26-36" href="#__codelineno-26-36"></a><span class="w">                </span><span class="p">});</span>
</span><span id="__span-26-37"><a id="__codelineno-26-37" name="__codelineno-26-37" href="#__codelineno-26-37"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-26-38"><a id="__codelineno-26-38" name="__codelineno-26-38" href="#__codelineno-26-38"></a><span class="w">        </span><span class="p">});</span>
</span><span id="__span-26-39"><a id="__codelineno-26-39" name="__codelineno-26-39" href="#__codelineno-26-39"></a>
</span><span id="__span-26-40"><a id="__codelineno-26-40" name="__codelineno-26-40" href="#__codelineno-26-40"></a><span class="w">        </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-41"><a id="__codelineno-26-41" name="__codelineno-26-41" href="#__codelineno-26-41"></a><span class="w">            </span><span class="nx">lcpObserver</span><span class="p">.</span><span class="nx">observe</span><span class="p">({</span><span class="w"> </span><span class="nx">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;largest-contentful-paint&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">buffered</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="p">});</span>
</span><span id="__span-26-42"><a id="__codelineno-26-42" name="__codelineno-26-42" href="#__codelineno-26-42"></a><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="nx">observers</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">&#39;lcp&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">lcpObserver</span><span class="p">);</span>
</span><span id="__span-26-43"><a id="__codelineno-26-43" name="__codelineno-26-43" href="#__codelineno-26-43"></a><span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="nx">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-44"><a id="__codelineno-26-44" name="__codelineno-26-44" href="#__codelineno-26-44"></a><span class="w">            </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;LCP observer not supported&#39;</span><span class="p">);</span>
</span><span id="__span-26-45"><a id="__codelineno-26-45" name="__codelineno-26-45" href="#__codelineno-26-45"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-26-46"><a id="__codelineno-26-46" name="__codelineno-26-46" href="#__codelineno-26-46"></a>
</span><span id="__span-26-47"><a id="__codelineno-26-47" name="__codelineno-26-47" href="#__codelineno-26-47"></a><span class="w">        </span><span class="c1">// First Input Delay (FID)</span>
</span><span id="__span-26-48"><a id="__codelineno-26-48" name="__codelineno-26-48" href="#__codelineno-26-48"></a><span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">fidObserver</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">PerformanceObserver</span><span class="p">((</span><span class="nx">list</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-49"><a id="__codelineno-26-49" name="__codelineno-26-49" href="#__codelineno-26-49"></a><span class="w">            </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">const</span><span class="w"> </span><span class="nx">entry</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="nx">list</span><span class="p">.</span><span class="nx">getEntries</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-50"><a id="__codelineno-26-50" name="__codelineno-26-50" href="#__codelineno-26-50"></a><span class="w">                </span><span class="k">this</span><span class="p">.</span><span class="nx">recordMetric</span><span class="p">(</span><span class="s1">&#39;FID&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">entry</span><span class="p">.</span><span class="nx">processingStart</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nx">entry</span><span class="p">.</span><span class="nx">startTime</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-51"><a id="__codelineno-26-51" name="__codelineno-26-51" href="#__codelineno-26-51"></a><span class="w">                    </span><span class="nx">eventType</span><span class="o">:</span><span class="w"> </span><span class="nx">entry</span><span class="p">.</span><span class="nx">name</span>
</span><span id="__span-26-52"><a id="__codelineno-26-52" name="__codelineno-26-52" href="#__codelineno-26-52"></a><span class="w">                </span><span class="p">});</span>
</span><span id="__span-26-53"><a id="__codelineno-26-53" name="__codelineno-26-53" href="#__codelineno-26-53"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-26-54"><a id="__codelineno-26-54" name="__codelineno-26-54" href="#__codelineno-26-54"></a><span class="w">        </span><span class="p">});</span>
</span><span id="__span-26-55"><a id="__codelineno-26-55" name="__codelineno-26-55" href="#__codelineno-26-55"></a>
</span><span id="__span-26-56"><a id="__codelineno-26-56" name="__codelineno-26-56" href="#__codelineno-26-56"></a><span class="w">        </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-57"><a id="__codelineno-26-57" name="__codelineno-26-57" href="#__codelineno-26-57"></a><span class="w">            </span><span class="nx">fidObserver</span><span class="p">.</span><span class="nx">observe</span><span class="p">({</span><span class="w"> </span><span class="nx">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;first-input&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">buffered</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="p">});</span>
</span><span id="__span-26-58"><a id="__codelineno-26-58" name="__codelineno-26-58" href="#__codelineno-26-58"></a><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="nx">observers</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">&#39;fid&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">fidObserver</span><span class="p">);</span>
</span><span id="__span-26-59"><a id="__codelineno-26-59" name="__codelineno-26-59" href="#__codelineno-26-59"></a><span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="nx">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-60"><a id="__codelineno-26-60" name="__codelineno-26-60" href="#__codelineno-26-60"></a><span class="w">            </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;FID observer not supported&#39;</span><span class="p">);</span>
</span><span id="__span-26-61"><a id="__codelineno-26-61" name="__codelineno-26-61" href="#__codelineno-26-61"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-26-62"><a id="__codelineno-26-62" name="__codelineno-26-62" href="#__codelineno-26-62"></a>
</span><span id="__span-26-63"><a id="__codelineno-26-63" name="__codelineno-26-63" href="#__codelineno-26-63"></a><span class="w">        </span><span class="c1">// Cumulative Layout Shift (CLS)</span>
</span><span id="__span-26-64"><a id="__codelineno-26-64" name="__codelineno-26-64" href="#__codelineno-26-64"></a><span class="w">        </span><span class="kd">let</span><span class="w"> </span><span class="nx">clsValue</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span>
</span><span id="__span-26-65"><a id="__codelineno-26-65" name="__codelineno-26-65" href="#__codelineno-26-65"></a><span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">clsObserver</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">PerformanceObserver</span><span class="p">((</span><span class="nx">list</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-66"><a id="__codelineno-26-66" name="__codelineno-26-66" href="#__codelineno-26-66"></a><span class="w">            </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">const</span><span class="w"> </span><span class="nx">entry</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="nx">list</span><span class="p">.</span><span class="nx">getEntries</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-67"><a id="__codelineno-26-67" name="__codelineno-26-67" href="#__codelineno-26-67"></a><span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">entry</span><span class="p">.</span><span class="nx">hadRecentInput</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-68"><a id="__codelineno-26-68" name="__codelineno-26-68" href="#__codelineno-26-68"></a><span class="w">                    </span><span class="nx">clsValue</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="nx">entry</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>
</span><span id="__span-26-69"><a id="__codelineno-26-69" name="__codelineno-26-69" href="#__codelineno-26-69"></a><span class="w">                    </span><span class="k">this</span><span class="p">.</span><span class="nx">recordMetric</span><span class="p">(</span><span class="s1">&#39;CLS&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">clsValue</span><span class="p">);</span>
</span><span id="__span-26-70"><a id="__codelineno-26-70" name="__codelineno-26-70" href="#__codelineno-26-70"></a><span class="w">                </span><span class="p">}</span>
</span><span id="__span-26-71"><a id="__codelineno-26-71" name="__codelineno-26-71" href="#__codelineno-26-71"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-26-72"><a id="__codelineno-26-72" name="__codelineno-26-72" href="#__codelineno-26-72"></a><span class="w">        </span><span class="p">});</span>
</span><span id="__span-26-73"><a id="__codelineno-26-73" name="__codelineno-26-73" href="#__codelineno-26-73"></a>
</span><span id="__span-26-74"><a id="__codelineno-26-74" name="__codelineno-26-74" href="#__codelineno-26-74"></a><span class="w">        </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-75"><a id="__codelineno-26-75" name="__codelineno-26-75" href="#__codelineno-26-75"></a><span class="w">            </span><span class="nx">clsObserver</span><span class="p">.</span><span class="nx">observe</span><span class="p">({</span><span class="w"> </span><span class="nx">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;layout-shift&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">buffered</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="p">});</span>
</span><span id="__span-26-76"><a id="__codelineno-26-76" name="__codelineno-26-76" href="#__codelineno-26-76"></a><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="nx">observers</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">&#39;cls&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">clsObserver</span><span class="p">);</span>
</span><span id="__span-26-77"><a id="__codelineno-26-77" name="__codelineno-26-77" href="#__codelineno-26-77"></a><span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="nx">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-78"><a id="__codelineno-26-78" name="__codelineno-26-78" href="#__codelineno-26-78"></a><span class="w">            </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;CLS observer not supported&#39;</span><span class="p">);</span>
</span><span id="__span-26-79"><a id="__codelineno-26-79" name="__codelineno-26-79" href="#__codelineno-26-79"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-26-80"><a id="__codelineno-26-80" name="__codelineno-26-80" href="#__codelineno-26-80"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-26-81"><a id="__codelineno-26-81" name="__codelineno-26-81" href="#__codelineno-26-81"></a>
</span><span id="__span-26-82"><a id="__codelineno-26-82" name="__codelineno-26-82" href="#__codelineno-26-82"></a><span class="w">    </span><span class="nx">observeResourceLoading</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-83"><a id="__codelineno-26-83" name="__codelineno-26-83" href="#__codelineno-26-83"></a><span class="w">        </span><span class="c1">// Monitor all resource loading</span>
</span><span id="__span-26-84"><a id="__codelineno-26-84" name="__codelineno-26-84" href="#__codelineno-26-84"></a><span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">resourceObserver</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">PerformanceObserver</span><span class="p">((</span><span class="nx">list</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-85"><a id="__codelineno-26-85" name="__codelineno-26-85" href="#__codelineno-26-85"></a><span class="w">            </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">const</span><span class="w"> </span><span class="nx">entry</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="nx">list</span><span class="p">.</span><span class="nx">getEntries</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-86"><a id="__codelineno-26-86" name="__codelineno-26-86" href="#__codelineno-26-86"></a><span class="w">                </span><span class="k">this</span><span class="p">.</span><span class="nx">analyzeResourcePerformance</span><span class="p">(</span><span class="nx">entry</span><span class="p">);</span>
</span><span id="__span-26-87"><a id="__codelineno-26-87" name="__codelineno-26-87" href="#__codelineno-26-87"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-26-88"><a id="__codelineno-26-88" name="__codelineno-26-88" href="#__codelineno-26-88"></a><span class="w">        </span><span class="p">});</span>
</span><span id="__span-26-89"><a id="__codelineno-26-89" name="__codelineno-26-89" href="#__codelineno-26-89"></a>
</span><span id="__span-26-90"><a id="__codelineno-26-90" name="__codelineno-26-90" href="#__codelineno-26-90"></a><span class="w">        </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-91"><a id="__codelineno-26-91" name="__codelineno-26-91" href="#__codelineno-26-91"></a><span class="w">            </span><span class="nx">resourceObserver</span><span class="p">.</span><span class="nx">observe</span><span class="p">({</span><span class="w"> </span><span class="nx">entryTypes</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;resource&#39;</span><span class="p">]</span><span class="w"> </span><span class="p">});</span>
</span><span id="__span-26-92"><a id="__codelineno-26-92" name="__codelineno-26-92" href="#__codelineno-26-92"></a><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="nx">observers</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">&#39;resource&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">resourceObserver</span><span class="p">);</span>
</span><span id="__span-26-93"><a id="__codelineno-26-93" name="__codelineno-26-93" href="#__codelineno-26-93"></a><span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="nx">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-94"><a id="__codelineno-26-94" name="__codelineno-26-94" href="#__codelineno-26-94"></a><span class="w">            </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Resource observer not supported&#39;</span><span class="p">);</span>
</span><span id="__span-26-95"><a id="__codelineno-26-95" name="__codelineno-26-95" href="#__codelineno-26-95"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-26-96"><a id="__codelineno-26-96" name="__codelineno-26-96" href="#__codelineno-26-96"></a>
</span><span id="__span-26-97"><a id="__codelineno-26-97" name="__codelineno-26-97" href="#__codelineno-26-97"></a><span class="w">        </span><span class="c1">// Monitor navigation timing</span>
</span><span id="__span-26-98"><a id="__codelineno-26-98" name="__codelineno-26-98" href="#__codelineno-26-98"></a><span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">navigationObserver</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">PerformanceObserver</span><span class="p">((</span><span class="nx">list</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-99"><a id="__codelineno-26-99" name="__codelineno-26-99" href="#__codelineno-26-99"></a><span class="w">            </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">const</span><span class="w"> </span><span class="nx">entry</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="nx">list</span><span class="p">.</span><span class="nx">getEntries</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-100"><a id="__codelineno-26-100" name="__codelineno-26-100" href="#__codelineno-26-100"></a><span class="w">                </span><span class="k">this</span><span class="p">.</span><span class="nx">analyzeNavigationPerformance</span><span class="p">(</span><span class="nx">entry</span><span class="p">);</span>
</span><span id="__span-26-101"><a id="__codelineno-26-101" name="__codelineno-26-101" href="#__codelineno-26-101"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-26-102"><a id="__codelineno-26-102" name="__codelineno-26-102" href="#__codelineno-26-102"></a><span class="w">        </span><span class="p">});</span>
</span><span id="__span-26-103"><a id="__codelineno-26-103" name="__codelineno-26-103" href="#__codelineno-26-103"></a>
</span><span id="__span-26-104"><a id="__codelineno-26-104" name="__codelineno-26-104" href="#__codelineno-26-104"></a><span class="w">        </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-105"><a id="__codelineno-26-105" name="__codelineno-26-105" href="#__codelineno-26-105"></a><span class="w">            </span><span class="nx">navigationObserver</span><span class="p">.</span><span class="nx">observe</span><span class="p">({</span><span class="w"> </span><span class="nx">entryTypes</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;navigation&#39;</span><span class="p">]</span><span class="w"> </span><span class="p">});</span>
</span><span id="__span-26-106"><a id="__codelineno-26-106" name="__codelineno-26-106" href="#__codelineno-26-106"></a><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="nx">observers</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">&#39;navigation&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">navigationObserver</span><span class="p">);</span>
</span><span id="__span-26-107"><a id="__codelineno-26-107" name="__codelineno-26-107" href="#__codelineno-26-107"></a><span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="nx">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-108"><a id="__codelineno-26-108" name="__codelineno-26-108" href="#__codelineno-26-108"></a><span class="w">            </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Navigation observer not supported&#39;</span><span class="p">);</span>
</span><span id="__span-26-109"><a id="__codelineno-26-109" name="__codelineno-26-109" href="#__codelineno-26-109"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-26-110"><a id="__codelineno-26-110" name="__codelineno-26-110" href="#__codelineno-26-110"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-26-111"><a id="__codelineno-26-111" name="__codelineno-26-111" href="#__codelineno-26-111"></a>
</span><span id="__span-26-112"><a id="__codelineno-26-112" name="__codelineno-26-112" href="#__codelineno-26-112"></a><span class="w">    </span><span class="nx">analyzeResourcePerformance</span><span class="p">(</span><span class="nx">entry</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-113"><a id="__codelineno-26-113" name="__codelineno-26-113" href="#__codelineno-26-113"></a><span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">resourceType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">getResourceType</span><span class="p">(</span><span class="nx">entry</span><span class="p">.</span><span class="nx">name</span><span class="p">);</span>
</span><span id="__span-26-114"><a id="__codelineno-26-114" name="__codelineno-26-114" href="#__codelineno-26-114"></a><span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">loadTime</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">entry</span><span class="p">.</span><span class="nx">responseEnd</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nx">entry</span><span class="p">.</span><span class="nx">startTime</span><span class="p">;</span>
</span><span id="__span-26-115"><a id="__codelineno-26-115" name="__codelineno-26-115" href="#__codelineno-26-115"></a>
</span><span id="__span-26-116"><a id="__codelineno-26-116" name="__codelineno-26-116" href="#__codelineno-26-116"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">recordMetric</span><span class="p">(</span><span class="sb">`resource_</span><span class="si">${</span><span class="nx">resourceType</span><span class="si">}</span><span class="sb">_load_time`</span><span class="p">,</span><span class="w"> </span><span class="nx">loadTime</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-117"><a id="__codelineno-26-117" name="__codelineno-26-117" href="#__codelineno-26-117"></a><span class="w">            </span><span class="nx">url</span><span class="o">:</span><span class="w"> </span><span class="nx">entry</span><span class="p">.</span><span class="nx">name</span><span class="p">,</span>
</span><span id="__span-26-118"><a id="__codelineno-26-118" name="__codelineno-26-118" href="#__codelineno-26-118"></a><span class="w">            </span><span class="nx">size</span><span class="o">:</span><span class="w"> </span><span class="nx">entry</span><span class="p">.</span><span class="nx">transferSize</span><span class="p">,</span>
</span><span id="__span-26-119"><a id="__codelineno-26-119" name="__codelineno-26-119" href="#__codelineno-26-119"></a><span class="w">            </span><span class="nx">cached</span><span class="o">:</span><span class="w"> </span><span class="nx">entry</span><span class="p">.</span><span class="nx">transferSize</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="mf">0</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nx">entry</span><span class="p">.</span><span class="nx">decodedBodySize</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mf">0</span>
</span><span id="__span-26-120"><a id="__codelineno-26-120" name="__codelineno-26-120" href="#__codelineno-26-120"></a><span class="w">        </span><span class="p">});</span>
</span><span id="__span-26-121"><a id="__codelineno-26-121" name="__codelineno-26-121" href="#__codelineno-26-121"></a>
</span><span id="__span-26-122"><a id="__codelineno-26-122" name="__codelineno-26-122" href="#__codelineno-26-122"></a><span class="w">        </span><span class="c1">// Check for optimization opportunities</span>
</span><span id="__span-26-123"><a id="__codelineno-26-123" name="__codelineno-26-123" href="#__codelineno-26-123"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">resourceType</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;image&#39;</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nx">entry</span><span class="p">.</span><span class="nx">transferSize</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mf">500000</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">// 500KB</span>
</span><span id="__span-26-124"><a id="__codelineno-26-124" name="__codelineno-26-124" href="#__codelineno-26-124"></a><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="nx">suggestOptimization</span><span class="p">(</span><span class="s1">&#39;large_image&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-125"><a id="__codelineno-26-125" name="__codelineno-26-125" href="#__codelineno-26-125"></a><span class="w">                </span><span class="nx">url</span><span class="o">:</span><span class="w"> </span><span class="nx">entry</span><span class="p">.</span><span class="nx">name</span><span class="p">,</span>
</span><span id="__span-26-126"><a id="__codelineno-26-126" name="__codelineno-26-126" href="#__codelineno-26-126"></a><span class="w">                </span><span class="nx">size</span><span class="o">:</span><span class="w"> </span><span class="nx">entry</span><span class="p">.</span><span class="nx">transferSize</span><span class="p">,</span>
</span><span id="__span-26-127"><a id="__codelineno-26-127" name="__codelineno-26-127" href="#__codelineno-26-127"></a><span class="w">                </span><span class="nx">suggestion</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Consider compressing or using WebP format&#39;</span>
</span><span id="__span-26-128"><a id="__codelineno-26-128" name="__codelineno-26-128" href="#__codelineno-26-128"></a><span class="w">            </span><span class="p">});</span>
</span><span id="__span-26-129"><a id="__codelineno-26-129" name="__codelineno-26-129" href="#__codelineno-26-129"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-26-130"><a id="__codelineno-26-130" name="__codelineno-26-130" href="#__codelineno-26-130"></a>
</span><span id="__span-26-131"><a id="__codelineno-26-131" name="__codelineno-26-131" href="#__codelineno-26-131"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">resourceType</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;script&#39;</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nx">loadTime</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mf">1000</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">// 1 second</span>
</span><span id="__span-26-132"><a id="__codelineno-26-132" name="__codelineno-26-132" href="#__codelineno-26-132"></a><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="nx">suggestOptimization</span><span class="p">(</span><span class="s1">&#39;slow_script&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-133"><a id="__codelineno-26-133" name="__codelineno-26-133" href="#__codelineno-26-133"></a><span class="w">                </span><span class="nx">url</span><span class="o">:</span><span class="w"> </span><span class="nx">entry</span><span class="p">.</span><span class="nx">name</span><span class="p">,</span>
</span><span id="__span-26-134"><a id="__codelineno-26-134" name="__codelineno-26-134" href="#__codelineno-26-134"></a><span class="w">                </span><span class="nx">loadTime</span><span class="o">:</span><span class="w"> </span><span class="nx">loadTime</span><span class="p">,</span>
</span><span id="__span-26-135"><a id="__codelineno-26-135" name="__codelineno-26-135" href="#__codelineno-26-135"></a><span class="w">                </span><span class="nx">suggestion</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Consider code splitting or async loading&#39;</span>
</span><span id="__span-26-136"><a id="__codelineno-26-136" name="__codelineno-26-136" href="#__codelineno-26-136"></a><span class="w">            </span><span class="p">});</span>
</span><span id="__span-26-137"><a id="__codelineno-26-137" name="__codelineno-26-137" href="#__codelineno-26-137"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-26-138"><a id="__codelineno-26-138" name="__codelineno-26-138" href="#__codelineno-26-138"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-26-139"><a id="__codelineno-26-139" name="__codelineno-26-139" href="#__codelineno-26-139"></a>
</span><span id="__span-26-140"><a id="__codelineno-26-140" name="__codelineno-26-140" href="#__codelineno-26-140"></a><span class="w">    </span><span class="nx">analyzeNavigationPerformance</span><span class="p">(</span><span class="nx">entry</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-141"><a id="__codelineno-26-141" name="__codelineno-26-141" href="#__codelineno-26-141"></a><span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">metrics</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-142"><a id="__codelineno-26-142" name="__codelineno-26-142" href="#__codelineno-26-142"></a><span class="w">            </span><span class="nx">dns_lookup</span><span class="o">:</span><span class="w"> </span><span class="nx">entry</span><span class="p">.</span><span class="nx">domainLookupEnd</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nx">entry</span><span class="p">.</span><span class="nx">domainLookupStart</span><span class="p">,</span>
</span><span id="__span-26-143"><a id="__codelineno-26-143" name="__codelineno-26-143" href="#__codelineno-26-143"></a><span class="w">            </span><span class="nx">tcp_connect</span><span class="o">:</span><span class="w"> </span><span class="nx">entry</span><span class="p">.</span><span class="nx">connectEnd</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nx">entry</span><span class="p">.</span><span class="nx">connectStart</span><span class="p">,</span>
</span><span id="__span-26-144"><a id="__codelineno-26-144" name="__codelineno-26-144" href="#__codelineno-26-144"></a><span class="w">            </span><span class="nx">ssl_handshake</span><span class="o">:</span><span class="w"> </span><span class="nx">entry</span><span class="p">.</span><span class="nx">connectEnd</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nx">entry</span><span class="p">.</span><span class="nx">secureConnectionStart</span><span class="p">,</span>
</span><span id="__span-26-145"><a id="__codelineno-26-145" name="__codelineno-26-145" href="#__codelineno-26-145"></a><span class="w">            </span><span class="nx">request_response</span><span class="o">:</span><span class="w"> </span><span class="nx">entry</span><span class="p">.</span><span class="nx">responseEnd</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nx">entry</span><span class="p">.</span><span class="nx">requestStart</span><span class="p">,</span>
</span><span id="__span-26-146"><a id="__codelineno-26-146" name="__codelineno-26-146" href="#__codelineno-26-146"></a><span class="w">            </span><span class="nx">dom_parse</span><span class="o">:</span><span class="w"> </span><span class="nx">entry</span><span class="p">.</span><span class="nx">domContentLoadedEventEnd</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nx">entry</span><span class="p">.</span><span class="nx">responseEnd</span><span class="p">,</span>
</span><span id="__span-26-147"><a id="__codelineno-26-147" name="__codelineno-26-147" href="#__codelineno-26-147"></a><span class="w">            </span><span class="nx">resource_load</span><span class="o">:</span><span class="w"> </span><span class="nx">entry</span><span class="p">.</span><span class="nx">loadEventEnd</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nx">entry</span><span class="p">.</span><span class="nx">domContentLoadedEventEnd</span><span class="p">,</span>
</span><span id="__span-26-148"><a id="__codelineno-26-148" name="__codelineno-26-148" href="#__codelineno-26-148"></a><span class="w">            </span><span class="nx">total_load</span><span class="o">:</span><span class="w"> </span><span class="nx">entry</span><span class="p">.</span><span class="nx">loadEventEnd</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nx">entry</span><span class="p">.</span><span class="nx">navigationStart</span>
</span><span id="__span-26-149"><a id="__codelineno-26-149" name="__codelineno-26-149" href="#__codelineno-26-149"></a><span class="w">        </span><span class="p">};</span>
</span><span id="__span-26-150"><a id="__codelineno-26-150" name="__codelineno-26-150" href="#__codelineno-26-150"></a>
</span><span id="__span-26-151"><a id="__codelineno-26-151" name="__codelineno-26-151" href="#__codelineno-26-151"></a><span class="w">        </span><span class="nb">Object</span><span class="p">.</span><span class="nx">entries</span><span class="p">(</span><span class="nx">metrics</span><span class="p">).</span><span class="nx">forEach</span><span class="p">(([</span><span class="nx">key</span><span class="p">,</span><span class="w"> </span><span class="nx">value</span><span class="p">])</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-152"><a id="__codelineno-26-152" name="__codelineno-26-152" href="#__codelineno-26-152"></a><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">value</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mf">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-153"><a id="__codelineno-26-153" name="__codelineno-26-153" href="#__codelineno-26-153"></a><span class="w">                </span><span class="k">this</span><span class="p">.</span><span class="nx">recordMetric</span><span class="p">(</span><span class="sb">`navigation_</span><span class="si">${</span><span class="nx">key</span><span class="si">}</span><span class="sb">`</span><span class="p">,</span><span class="w"> </span><span class="nx">value</span><span class="p">);</span>
</span><span id="__span-26-154"><a id="__codelineno-26-154" name="__codelineno-26-154" href="#__codelineno-26-154"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-26-155"><a id="__codelineno-26-155" name="__codelineno-26-155" href="#__codelineno-26-155"></a><span class="w">        </span><span class="p">});</span>
</span><span id="__span-26-156"><a id="__codelineno-26-156" name="__codelineno-26-156" href="#__codelineno-26-156"></a>
</span><span id="__span-26-157"><a id="__codelineno-26-157" name="__codelineno-26-157" href="#__codelineno-26-157"></a><span class="w">        </span><span class="c1">// Performance analysis</span>
</span><span id="__span-26-158"><a id="__codelineno-26-158" name="__codelineno-26-158" href="#__codelineno-26-158"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">metrics</span><span class="p">.</span><span class="nx">total_load</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mf">3000</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">// 3 seconds</span>
</span><span id="__span-26-159"><a id="__codelineno-26-159" name="__codelineno-26-159" href="#__codelineno-26-159"></a><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="nx">suggestOptimization</span><span class="p">(</span><span class="s1">&#39;slow_page_load&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-160"><a id="__codelineno-26-160" name="__codelineno-26-160" href="#__codelineno-26-160"></a><span class="w">                </span><span class="nx">totalTime</span><span class="o">:</span><span class="w"> </span><span class="nx">metrics</span><span class="p">.</span><span class="nx">total_load</span><span class="p">,</span>
</span><span id="__span-26-161"><a id="__codelineno-26-161" name="__codelineno-26-161" href="#__codelineno-26-161"></a><span class="w">                </span><span class="nx">suggestion</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Page load time exceeds 3 seconds. Consider optimization strategies.&#39;</span>
</span><span id="__span-26-162"><a id="__codelineno-26-162" name="__codelineno-26-162" href="#__codelineno-26-162"></a><span class="w">            </span><span class="p">});</span>
</span><span id="__span-26-163"><a id="__codelineno-26-163" name="__codelineno-26-163" href="#__codelineno-26-163"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-26-164"><a id="__codelineno-26-164" name="__codelineno-26-164" href="#__codelineno-26-164"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-26-165"><a id="__codelineno-26-165" name="__codelineno-26-165" href="#__codelineno-26-165"></a>
</span><span id="__span-26-166"><a id="__codelineno-26-166" name="__codelineno-26-166" href="#__codelineno-26-166"></a><span class="w">    </span><span class="nx">observeUserInteractions</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-167"><a id="__codelineno-26-167" name="__codelineno-26-167" href="#__codelineno-26-167"></a><span class="w">        </span><span class="c1">// Monitor long tasks that block the main thread</span>
</span><span id="__span-26-168"><a id="__codelineno-26-168" name="__codelineno-26-168" href="#__codelineno-26-168"></a><span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">longTaskObserver</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">PerformanceObserver</span><span class="p">((</span><span class="nx">list</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-169"><a id="__codelineno-26-169" name="__codelineno-26-169" href="#__codelineno-26-169"></a><span class="w">            </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">const</span><span class="w"> </span><span class="nx">entry</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="nx">list</span><span class="p">.</span><span class="nx">getEntries</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-170"><a id="__codelineno-26-170" name="__codelineno-26-170" href="#__codelineno-26-170"></a><span class="w">                </span><span class="k">this</span><span class="p">.</span><span class="nx">recordMetric</span><span class="p">(</span><span class="s1">&#39;long_task&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">entry</span><span class="p">.</span><span class="nx">duration</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-171"><a id="__codelineno-26-171" name="__codelineno-26-171" href="#__codelineno-26-171"></a><span class="w">                    </span><span class="nx">attribution</span><span class="o">:</span><span class="w"> </span><span class="nx">entry</span><span class="p">.</span><span class="nx">attribution</span>
</span><span id="__span-26-172"><a id="__codelineno-26-172" name="__codelineno-26-172" href="#__codelineno-26-172"></a><span class="w">                </span><span class="p">});</span>
</span><span id="__span-26-173"><a id="__codelineno-26-173" name="__codelineno-26-173" href="#__codelineno-26-173"></a>
</span><span id="__span-26-174"><a id="__codelineno-26-174" name="__codelineno-26-174" href="#__codelineno-26-174"></a><span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">entry</span><span class="p">.</span><span class="nx">duration</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mf">100</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">// 100ms threshold</span>
</span><span id="__span-26-175"><a id="__codelineno-26-175" name="__codelineno-26-175" href="#__codelineno-26-175"></a><span class="w">                    </span><span class="k">this</span><span class="p">.</span><span class="nx">suggestOptimization</span><span class="p">(</span><span class="s1">&#39;long_task&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-176"><a id="__codelineno-26-176" name="__codelineno-26-176" href="#__codelineno-26-176"></a><span class="w">                        </span><span class="nx">duration</span><span class="o">:</span><span class="w"> </span><span class="nx">entry</span><span class="p">.</span><span class="nx">duration</span><span class="p">,</span>
</span><span id="__span-26-177"><a id="__codelineno-26-177" name="__codelineno-26-177" href="#__codelineno-26-177"></a><span class="w">                        </span><span class="nx">suggestion</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Break up long-running tasks to improve responsiveness&#39;</span>
</span><span id="__span-26-178"><a id="__codelineno-26-178" name="__codelineno-26-178" href="#__codelineno-26-178"></a><span class="w">                    </span><span class="p">});</span>
</span><span id="__span-26-179"><a id="__codelineno-26-179" name="__codelineno-26-179" href="#__codelineno-26-179"></a><span class="w">                </span><span class="p">}</span>
</span><span id="__span-26-180"><a id="__codelineno-26-180" name="__codelineno-26-180" href="#__codelineno-26-180"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-26-181"><a id="__codelineno-26-181" name="__codelineno-26-181" href="#__codelineno-26-181"></a><span class="w">        </span><span class="p">});</span>
</span><span id="__span-26-182"><a id="__codelineno-26-182" name="__codelineno-26-182" href="#__codelineno-26-182"></a>
</span><span id="__span-26-183"><a id="__codelineno-26-183" name="__codelineno-26-183" href="#__codelineno-26-183"></a><span class="w">        </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-184"><a id="__codelineno-26-184" name="__codelineno-26-184" href="#__codelineno-26-184"></a><span class="w">            </span><span class="nx">longTaskObserver</span><span class="p">.</span><span class="nx">observe</span><span class="p">({</span><span class="w"> </span><span class="nx">entryTypes</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;longtask&#39;</span><span class="p">]</span><span class="w"> </span><span class="p">});</span>
</span><span id="__span-26-185"><a id="__codelineno-26-185" name="__codelineno-26-185" href="#__codelineno-26-185"></a><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="nx">observers</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">&#39;longtask&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">longTaskObserver</span><span class="p">);</span>
</span><span id="__span-26-186"><a id="__codelineno-26-186" name="__codelineno-26-186" href="#__codelineno-26-186"></a><span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="nx">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-187"><a id="__codelineno-26-187" name="__codelineno-26-187" href="#__codelineno-26-187"></a><span class="w">            </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Long task observer not supported&#39;</span><span class="p">);</span>
</span><span id="__span-26-188"><a id="__codelineno-26-188" name="__codelineno-26-188" href="#__codelineno-26-188"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-26-189"><a id="__codelineno-26-189" name="__codelineno-26-189" href="#__codelineno-26-189"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-26-190"><a id="__codelineno-26-190" name="__codelineno-26-190" href="#__codelineno-26-190"></a>
</span><span id="__span-26-191"><a id="__codelineno-26-191" name="__codelineno-26-191" href="#__codelineno-26-191"></a><span class="w">    </span><span class="nx">observeNetworkConditions</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-192"><a id="__codelineno-26-192" name="__codelineno-26-192" href="#__codelineno-26-192"></a><span class="w">        </span><span class="c1">// Monitor network connection</span>
</span><span id="__span-26-193"><a id="__codelineno-26-193" name="__codelineno-26-193" href="#__codelineno-26-193"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="s1">&#39;connection&#39;</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="nx">navigator</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-194"><a id="__codelineno-26-194" name="__codelineno-26-194" href="#__codelineno-26-194"></a><span class="w">            </span><span class="kd">const</span><span class="w"> </span><span class="nx">connection</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">navigator</span><span class="p">.</span><span class="nx">connection</span><span class="p">;</span>
</span><span id="__span-26-195"><a id="__codelineno-26-195" name="__codelineno-26-195" href="#__codelineno-26-195"></a>
</span><span id="__span-26-196"><a id="__codelineno-26-196" name="__codelineno-26-196" href="#__codelineno-26-196"></a><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="nx">recordMetric</span><span class="p">(</span><span class="s1">&#39;network_type&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">connection</span><span class="p">.</span><span class="nx">effectiveType</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-197"><a id="__codelineno-26-197" name="__codelineno-26-197" href="#__codelineno-26-197"></a><span class="w">                </span><span class="nx">downlink</span><span class="o">:</span><span class="w"> </span><span class="nx">connection</span><span class="p">.</span><span class="nx">downlink</span><span class="p">,</span>
</span><span id="__span-26-198"><a id="__codelineno-26-198" name="__codelineno-26-198" href="#__codelineno-26-198"></a><span class="w">                </span><span class="nx">rtt</span><span class="o">:</span><span class="w"> </span><span class="nx">connection</span><span class="p">.</span><span class="nx">rtt</span><span class="p">,</span>
</span><span id="__span-26-199"><a id="__codelineno-26-199" name="__codelineno-26-199" href="#__codelineno-26-199"></a><span class="w">                </span><span class="nx">saveData</span><span class="o">:</span><span class="w"> </span><span class="nx">connection</span><span class="p">.</span><span class="nx">saveData</span>
</span><span id="__span-26-200"><a id="__codelineno-26-200" name="__codelineno-26-200" href="#__codelineno-26-200"></a><span class="w">            </span><span class="p">});</span>
</span><span id="__span-26-201"><a id="__codelineno-26-201" name="__codelineno-26-201" href="#__codelineno-26-201"></a>
</span><span id="__span-26-202"><a id="__codelineno-26-202" name="__codelineno-26-202" href="#__codelineno-26-202"></a><span class="w">            </span><span class="c1">// Adapt to network conditions</span>
</span><span id="__span-26-203"><a id="__codelineno-26-203" name="__codelineno-26-203" href="#__codelineno-26-203"></a><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">connection</span><span class="p">.</span><span class="nx">saveData</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nx">connection</span><span class="p">.</span><span class="nx">effectiveType</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;slow-2g&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-204"><a id="__codelineno-26-204" name="__codelineno-26-204" href="#__codelineno-26-204"></a><span class="w">                </span><span class="k">this</span><span class="p">.</span><span class="nx">enableDataSavingMode</span><span class="p">();</span>
</span><span id="__span-26-205"><a id="__codelineno-26-205" name="__codelineno-26-205" href="#__codelineno-26-205"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-26-206"><a id="__codelineno-26-206" name="__codelineno-26-206" href="#__codelineno-26-206"></a>
</span><span id="__span-26-207"><a id="__codelineno-26-207" name="__codelineno-26-207" href="#__codelineno-26-207"></a><span class="w">            </span><span class="nx">connection</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;change&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-208"><a id="__codelineno-26-208" name="__codelineno-26-208" href="#__codelineno-26-208"></a><span class="w">                </span><span class="k">this</span><span class="p">.</span><span class="nx">recordMetric</span><span class="p">(</span><span class="s1">&#39;network_change&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">connection</span><span class="p">.</span><span class="nx">effectiveType</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-209"><a id="__codelineno-26-209" name="__codelineno-26-209" href="#__codelineno-26-209"></a><span class="w">                    </span><span class="nx">downlink</span><span class="o">:</span><span class="w"> </span><span class="nx">connection</span><span class="p">.</span><span class="nx">downlink</span><span class="p">,</span>
</span><span id="__span-26-210"><a id="__codelineno-26-210" name="__codelineno-26-210" href="#__codelineno-26-210"></a><span class="w">                    </span><span class="nx">rtt</span><span class="o">:</span><span class="w"> </span><span class="nx">connection</span><span class="p">.</span><span class="nx">rtt</span>
</span><span id="__span-26-211"><a id="__codelineno-26-211" name="__codelineno-26-211" href="#__codelineno-26-211"></a><span class="w">                </span><span class="p">});</span>
</span><span id="__span-26-212"><a id="__codelineno-26-212" name="__codelineno-26-212" href="#__codelineno-26-212"></a><span class="w">            </span><span class="p">});</span>
</span><span id="__span-26-213"><a id="__codelineno-26-213" name="__codelineno-26-213" href="#__codelineno-26-213"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-26-214"><a id="__codelineno-26-214" name="__codelineno-26-214" href="#__codelineno-26-214"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-26-215"><a id="__codelineno-26-215" name="__codelineno-26-215" href="#__codelineno-26-215"></a>
</span><span id="__span-26-216"><a id="__codelineno-26-216" name="__codelineno-26-216" href="#__codelineno-26-216"></a><span class="w">    </span><span class="nx">getResourceType</span><span class="p">(</span><span class="nx">url</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-217"><a id="__codelineno-26-217" name="__codelineno-26-217" href="#__codelineno-26-217"></a><span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">extension</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">url</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">).</span><span class="nx">pop</span><span class="p">().</span><span class="nx">toLowerCase</span><span class="p">();</span>
</span><span id="__span-26-218"><a id="__codelineno-26-218" name="__codelineno-26-218" href="#__codelineno-26-218"></a>
</span><span id="__span-26-219"><a id="__codelineno-26-219" name="__codelineno-26-219" href="#__codelineno-26-219"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">([</span><span class="s1">&#39;jpg&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;jpeg&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;png&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;gif&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;webp&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;svg&#39;</span><span class="p">].</span><span class="nx">includes</span><span class="p">(</span><span class="nx">extension</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-220"><a id="__codelineno-26-220" name="__codelineno-26-220" href="#__codelineno-26-220"></a><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="s1">&#39;image&#39;</span><span class="p">;</span>
</span><span id="__span-26-221"><a id="__codelineno-26-221" name="__codelineno-26-221" href="#__codelineno-26-221"></a><span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">([</span><span class="s1">&#39;js&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;mjs&#39;</span><span class="p">].</span><span class="nx">includes</span><span class="p">(</span><span class="nx">extension</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-222"><a id="__codelineno-26-222" name="__codelineno-26-222" href="#__codelineno-26-222"></a><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="s1">&#39;script&#39;</span><span class="p">;</span>
</span><span id="__span-26-223"><a id="__codelineno-26-223" name="__codelineno-26-223" href="#__codelineno-26-223"></a><span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">extension</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;css&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-224"><a id="__codelineno-26-224" name="__codelineno-26-224" href="#__codelineno-26-224"></a><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="s1">&#39;stylesheet&#39;</span><span class="p">;</span>
</span><span id="__span-26-225"><a id="__codelineno-26-225" name="__codelineno-26-225" href="#__codelineno-26-225"></a><span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">([</span><span class="s1">&#39;woff&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;woff2&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;ttf&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;eot&#39;</span><span class="p">].</span><span class="nx">includes</span><span class="p">(</span><span class="nx">extension</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-226"><a id="__codelineno-26-226" name="__codelineno-26-226" href="#__codelineno-26-226"></a><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="s1">&#39;font&#39;</span><span class="p">;</span>
</span><span id="__span-26-227"><a id="__codelineno-26-227" name="__codelineno-26-227" href="#__codelineno-26-227"></a><span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">([</span><span class="s1">&#39;mp4&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;webm&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;ogg&#39;</span><span class="p">].</span><span class="nx">includes</span><span class="p">(</span><span class="nx">extension</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-228"><a id="__codelineno-26-228" name="__codelineno-26-228" href="#__codelineno-26-228"></a><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="s1">&#39;video&#39;</span><span class="p">;</span>
</span><span id="__span-26-229"><a id="__codelineno-26-229" name="__codelineno-26-229" href="#__codelineno-26-229"></a><span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-230"><a id="__codelineno-26-230" name="__codelineno-26-230" href="#__codelineno-26-230"></a><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="s1">&#39;other&#39;</span><span class="p">;</span>
</span><span id="__span-26-231"><a id="__codelineno-26-231" name="__codelineno-26-231" href="#__codelineno-26-231"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-26-232"><a id="__codelineno-26-232" name="__codelineno-26-232" href="#__codelineno-26-232"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-26-233"><a id="__codelineno-26-233" name="__codelineno-26-233" href="#__codelineno-26-233"></a>
</span><span id="__span-26-234"><a id="__codelineno-26-234" name="__codelineno-26-234" href="#__codelineno-26-234"></a><span class="w">    </span><span class="nx">recordMetric</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span><span class="w"> </span><span class="nx">value</span><span class="p">,</span><span class="w"> </span><span class="nx">metadata</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{})</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-235"><a id="__codelineno-26-235" name="__codelineno-26-235" href="#__codelineno-26-235"></a><span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">timestamp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">();</span>
</span><span id="__span-26-236"><a id="__codelineno-26-236" name="__codelineno-26-236" href="#__codelineno-26-236"></a>
</span><span id="__span-26-237"><a id="__codelineno-26-237" name="__codelineno-26-237" href="#__codelineno-26-237"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">metrics</span><span class="p">.</span><span class="nx">has</span><span class="p">(</span><span class="nx">name</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-238"><a id="__codelineno-26-238" name="__codelineno-26-238" href="#__codelineno-26-238"></a><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="nx">metrics</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span><span class="w"> </span><span class="p">[]);</span>
</span><span id="__span-26-239"><a id="__codelineno-26-239" name="__codelineno-26-239" href="#__codelineno-26-239"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-26-240"><a id="__codelineno-26-240" name="__codelineno-26-240" href="#__codelineno-26-240"></a>
</span><span id="__span-26-241"><a id="__codelineno-26-241" name="__codelineno-26-241" href="#__codelineno-26-241"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">metrics</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">name</span><span class="p">).</span><span class="nx">push</span><span class="p">({</span>
</span><span id="__span-26-242"><a id="__codelineno-26-242" name="__codelineno-26-242" href="#__codelineno-26-242"></a><span class="w">            </span><span class="nx">value</span><span class="o">:</span><span class="w"> </span><span class="nx">value</span><span class="p">,</span>
</span><span id="__span-26-243"><a id="__codelineno-26-243" name="__codelineno-26-243" href="#__codelineno-26-243"></a><span class="w">            </span><span class="nx">timestamp</span><span class="o">:</span><span class="w"> </span><span class="nx">timestamp</span><span class="p">,</span>
</span><span id="__span-26-244"><a id="__codelineno-26-244" name="__codelineno-26-244" href="#__codelineno-26-244"></a><span class="w">            </span><span class="nx">metadata</span><span class="o">:</span><span class="w"> </span><span class="nx">metadata</span>
</span><span id="__span-26-245"><a id="__codelineno-26-245" name="__codelineno-26-245" href="#__codelineno-26-245"></a><span class="w">        </span><span class="p">});</span>
</span><span id="__span-26-246"><a id="__codelineno-26-246" name="__codelineno-26-246" href="#__codelineno-26-246"></a>
</span><span id="__span-26-247"><a id="__codelineno-26-247" name="__codelineno-26-247" href="#__codelineno-26-247"></a><span class="w">        </span><span class="c1">// Keep only last 100 measurements per metric</span>
</span><span id="__span-26-248"><a id="__codelineno-26-248" name="__codelineno-26-248" href="#__codelineno-26-248"></a><span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">measurements</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">metrics</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">name</span><span class="p">);</span>
</span><span id="__span-26-249"><a id="__codelineno-26-249" name="__codelineno-26-249" href="#__codelineno-26-249"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">measurements</span><span class="p">.</span><span class="nx">length</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mf">100</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-250"><a id="__codelineno-26-250" name="__codelineno-26-250" href="#__codelineno-26-250"></a><span class="w">            </span><span class="nx">measurements</span><span class="p">.</span><span class="nx">shift</span><span class="p">();</span>
</span><span id="__span-26-251"><a id="__codelineno-26-251" name="__codelineno-26-251" href="#__codelineno-26-251"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-26-252"><a id="__codelineno-26-252" name="__codelineno-26-252" href="#__codelineno-26-252"></a>
</span><span id="__span-26-253"><a id="__codelineno-26-253" name="__codelineno-26-253" href="#__codelineno-26-253"></a><span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`ğŸ“Š Metric recorded: </span><span class="si">${</span><span class="nx">name</span><span class="si">}</span><span class="sb"> = </span><span class="si">${</span><span class="ow">typeof</span><span class="w"> </span><span class="nx">value</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;number&#39;</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="nx">value</span><span class="p">.</span><span class="nx">toFixed</span><span class="p">(</span><span class="mf">2</span><span class="p">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="nx">value</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
</span><span id="__span-26-254"><a id="__codelineno-26-254" name="__codelineno-26-254" href="#__codelineno-26-254"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-26-255"><a id="__codelineno-26-255" name="__codelineno-26-255" href="#__codelineno-26-255"></a>
</span><span id="__span-26-256"><a id="__codelineno-26-256" name="__codelineno-26-256" href="#__codelineno-26-256"></a><span class="w">    </span><span class="nx">suggestOptimization</span><span class="p">(</span><span class="nx">type</span><span class="p">,</span><span class="w"> </span><span class="nx">details</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-257"><a id="__codelineno-26-257" name="__codelineno-26-257" href="#__codelineno-26-257"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">optimizations</span><span class="p">.</span><span class="nx">has</span><span class="p">(</span><span class="nx">type</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-258"><a id="__codelineno-26-258" name="__codelineno-26-258" href="#__codelineno-26-258"></a><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="nx">optimizations</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="nx">type</span><span class="p">,</span><span class="w"> </span><span class="p">[]);</span>
</span><span id="__span-26-259"><a id="__codelineno-26-259" name="__codelineno-26-259" href="#__codelineno-26-259"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-26-260"><a id="__codelineno-26-260" name="__codelineno-26-260" href="#__codelineno-26-260"></a>
</span><span id="__span-26-261"><a id="__codelineno-26-261" name="__codelineno-26-261" href="#__codelineno-26-261"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">optimizations</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">type</span><span class="p">).</span><span class="nx">push</span><span class="p">({</span>
</span><span id="__span-26-262"><a id="__codelineno-26-262" name="__codelineno-26-262" href="#__codelineno-26-262"></a><span class="w">            </span><span class="nx">timestamp</span><span class="o">:</span><span class="w"> </span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">(),</span>
</span><span id="__span-26-263"><a id="__codelineno-26-263" name="__codelineno-26-263" href="#__codelineno-26-263"></a><span class="w">            </span><span class="nx">details</span><span class="o">:</span><span class="w"> </span><span class="nx">details</span>
</span><span id="__span-26-264"><a id="__codelineno-26-264" name="__codelineno-26-264" href="#__codelineno-26-264"></a><span class="w">        </span><span class="p">});</span>
</span><span id="__span-26-265"><a id="__codelineno-26-265" name="__codelineno-26-265" href="#__codelineno-26-265"></a>
</span><span id="__span-26-266"><a id="__codelineno-26-266" name="__codelineno-26-266" href="#__codelineno-26-266"></a><span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`ğŸ’¡ Optimization suggestion: </span><span class="si">${</span><span class="nx">type</span><span class="si">}</span><span class="sb">`</span><span class="p">,</span><span class="w"> </span><span class="nx">details</span><span class="p">);</span>
</span><span id="__span-26-267"><a id="__codelineno-26-267" name="__codelineno-26-267" href="#__codelineno-26-267"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-26-268"><a id="__codelineno-26-268" name="__codelineno-26-268" href="#__codelineno-26-268"></a>
</span><span id="__span-26-269"><a id="__codelineno-26-269" name="__codelineno-26-269" href="#__codelineno-26-269"></a><span class="w">    </span><span class="nx">enableDataSavingMode</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-270"><a id="__codelineno-26-270" name="__codelineno-26-270" href="#__codelineno-26-270"></a><span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;ğŸ“± Data saving mode enabled&#39;</span><span class="p">);</span>
</span><span id="__span-26-271"><a id="__codelineno-26-271" name="__codelineno-26-271" href="#__codelineno-26-271"></a>
</span><span id="__span-26-272"><a id="__codelineno-26-272" name="__codelineno-26-272" href="#__codelineno-26-272"></a><span class="w">        </span><span class="c1">// Reduce image quality</span>
</span><span id="__span-26-273"><a id="__codelineno-26-273" name="__codelineno-26-273" href="#__codelineno-26-273"></a><span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">images</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="s1">&#39;img&#39;</span><span class="p">);</span>
</span><span id="__span-26-274"><a id="__codelineno-26-274" name="__codelineno-26-274" href="#__codelineno-26-274"></a><span class="w">        </span><span class="nx">images</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">img</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-275"><a id="__codelineno-26-275" name="__codelineno-26-275" href="#__codelineno-26-275"></a><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">img</span><span class="p">.</span><span class="nx">dataset</span><span class="p">.</span><span class="nx">lowRes</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-276"><a id="__codelineno-26-276" name="__codelineno-26-276" href="#__codelineno-26-276"></a><span class="w">                </span><span class="nx">img</span><span class="p">.</span><span class="nx">src</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">img</span><span class="p">.</span><span class="nx">dataset</span><span class="p">.</span><span class="nx">lowRes</span><span class="p">;</span>
</span><span id="__span-26-277"><a id="__codelineno-26-277" name="__codelineno-26-277" href="#__codelineno-26-277"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-26-278"><a id="__codelineno-26-278" name="__codelineno-26-278" href="#__codelineno-26-278"></a><span class="w">        </span><span class="p">});</span>
</span><span id="__span-26-279"><a id="__codelineno-26-279" name="__codelineno-26-279" href="#__codelineno-26-279"></a>
</span><span id="__span-26-280"><a id="__codelineno-26-280" name="__codelineno-26-280" href="#__codelineno-26-280"></a><span class="w">        </span><span class="c1">// Defer non-critical resources</span>
</span><span id="__span-26-281"><a id="__codelineno-26-281" name="__codelineno-26-281" href="#__codelineno-26-281"></a><span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">scripts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="s1">&#39;script[data-defer-on-slow]&#39;</span><span class="p">);</span>
</span><span id="__span-26-282"><a id="__codelineno-26-282" name="__codelineno-26-282" href="#__codelineno-26-282"></a><span class="w">        </span><span class="nx">scripts</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">script</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-283"><a id="__codelineno-26-283" name="__codelineno-26-283" href="#__codelineno-26-283"></a><span class="w">            </span><span class="nx">script</span><span class="p">.</span><span class="nx">defer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span>
</span><span id="__span-26-284"><a id="__codelineno-26-284" name="__codelineno-26-284" href="#__codelineno-26-284"></a><span class="w">        </span><span class="p">});</span>
</span><span id="__span-26-285"><a id="__codelineno-26-285" name="__codelineno-26-285" href="#__codelineno-26-285"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-26-286"><a id="__codelineno-26-286" name="__codelineno-26-286" href="#__codelineno-26-286"></a>
</span><span id="__span-26-287"><a id="__codelineno-26-287" name="__codelineno-26-287" href="#__codelineno-26-287"></a><span class="w">    </span><span class="nx">generatePerformanceReport</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-288"><a id="__codelineno-26-288" name="__codelineno-26-288" href="#__codelineno-26-288"></a><span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">report</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-289"><a id="__codelineno-26-289" name="__codelineno-26-289" href="#__codelineno-26-289"></a><span class="w">            </span><span class="nx">timestamp</span><span class="o">:</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nb">Date</span><span class="p">().</span><span class="nx">toISOString</span><span class="p">(),</span>
</span><span id="__span-26-290"><a id="__codelineno-26-290" name="__codelineno-26-290" href="#__codelineno-26-290"></a><span class="w">            </span><span class="nx">coreWebVitals</span><span class="o">:</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">getCoreWebVitals</span><span class="p">(),</span>
</span><span id="__span-26-291"><a id="__codelineno-26-291" name="__codelineno-26-291" href="#__codelineno-26-291"></a><span class="w">            </span><span class="nx">resourcePerformance</span><span class="o">:</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">getResourcePerformanceSummary</span><span class="p">(),</span>
</span><span id="__span-26-292"><a id="__codelineno-26-292" name="__codelineno-26-292" href="#__codelineno-26-292"></a><span class="w">            </span><span class="nx">navigationMetrics</span><span class="o">:</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">getNavigationMetrics</span><span class="p">(),</span>
</span><span id="__span-26-293"><a id="__codelineno-26-293" name="__codelineno-26-293" href="#__codelineno-26-293"></a><span class="w">            </span><span class="nx">optimizationSuggestions</span><span class="o">:</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">getOptimizationSuggestions</span><span class="p">(),</span>
</span><span id="__span-26-294"><a id="__codelineno-26-294" name="__codelineno-26-294" href="#__codelineno-26-294"></a><span class="w">            </span><span class="nx">overallScore</span><span class="o">:</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">calculatePerformanceScore</span><span class="p">()</span>
</span><span id="__span-26-295"><a id="__codelineno-26-295" name="__codelineno-26-295" href="#__codelineno-26-295"></a><span class="w">        </span><span class="p">};</span>
</span><span id="__span-26-296"><a id="__codelineno-26-296" name="__codelineno-26-296" href="#__codelineno-26-296"></a>
</span><span id="__span-26-297"><a id="__codelineno-26-297" name="__codelineno-26-297" href="#__codelineno-26-297"></a><span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;ğŸ“ˆ PERFORMANCE REPORT GENERATED&#39;</span><span class="p">);</span>
</span><span id="__span-26-298"><a id="__codelineno-26-298" name="__codelineno-26-298" href="#__codelineno-26-298"></a><span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;================================&#39;</span><span class="p">);</span>
</span><span id="__span-26-299"><a id="__codelineno-26-299" name="__codelineno-26-299" href="#__codelineno-26-299"></a><span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`Overall Score: </span><span class="si">${</span><span class="nx">report</span><span class="p">.</span><span class="nx">overallScore</span><span class="si">}</span><span class="sb">/100`</span><span class="p">);</span>
</span><span id="__span-26-300"><a id="__codelineno-26-300" name="__codelineno-26-300" href="#__codelineno-26-300"></a><span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`LCP: </span><span class="si">${</span><span class="nx">report</span><span class="p">.</span><span class="nx">coreWebVitals</span><span class="p">.</span><span class="nx">lcp</span><span class="o">?</span><span class="p">.</span><span class="nx">toFixed</span><span class="p">(</span><span class="mf">2</span><span class="p">)</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="s1">&#39;N/A&#39;</span><span class="si">}</span><span class="sb">ms`</span><span class="p">);</span>
</span><span id="__span-26-301"><a id="__codelineno-26-301" name="__codelineno-26-301" href="#__codelineno-26-301"></a><span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`FID: </span><span class="si">${</span><span class="nx">report</span><span class="p">.</span><span class="nx">coreWebVitals</span><span class="p">.</span><span class="nx">fid</span><span class="o">?</span><span class="p">.</span><span class="nx">toFixed</span><span class="p">(</span><span class="mf">2</span><span class="p">)</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="s1">&#39;N/A&#39;</span><span class="si">}</span><span class="sb">ms`</span><span class="p">);</span>
</span><span id="__span-26-302"><a id="__codelineno-26-302" name="__codelineno-26-302" href="#__codelineno-26-302"></a><span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`CLS: </span><span class="si">${</span><span class="nx">report</span><span class="p">.</span><span class="nx">coreWebVitals</span><span class="p">.</span><span class="nx">cls</span><span class="o">?</span><span class="p">.</span><span class="nx">toFixed</span><span class="p">(</span><span class="mf">3</span><span class="p">)</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="s1">&#39;N/A&#39;</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
</span><span id="__span-26-303"><a id="__codelineno-26-303" name="__codelineno-26-303" href="#__codelineno-26-303"></a><span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`Total Load Time: </span><span class="si">${</span><span class="nx">report</span><span class="p">.</span><span class="nx">navigationMetrics</span><span class="p">.</span><span class="nx">totalLoad</span><span class="o">?</span><span class="p">.</span><span class="nx">toFixed</span><span class="p">(</span><span class="mf">2</span><span class="p">)</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="s1">&#39;N/A&#39;</span><span class="si">}</span><span class="sb">ms`</span><span class="p">);</span>
</span><span id="__span-26-304"><a id="__codelineno-26-304" name="__codelineno-26-304" href="#__codelineno-26-304"></a><span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`Optimization Suggestions: </span><span class="si">${</span><span class="nx">report</span><span class="p">.</span><span class="nx">optimizationSuggestions</span><span class="p">.</span><span class="nx">length</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
</span><span id="__span-26-305"><a id="__codelineno-26-305" name="__codelineno-26-305" href="#__codelineno-26-305"></a>
</span><span id="__span-26-306"><a id="__codelineno-26-306" name="__codelineno-26-306" href="#__codelineno-26-306"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">report</span><span class="p">;</span>
</span><span id="__span-26-307"><a id="__codelineno-26-307" name="__codelineno-26-307" href="#__codelineno-26-307"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-26-308"><a id="__codelineno-26-308" name="__codelineno-26-308" href="#__codelineno-26-308"></a>
</span><span id="__span-26-309"><a id="__codelineno-26-309" name="__codelineno-26-309" href="#__codelineno-26-309"></a><span class="w">    </span><span class="nx">getCoreWebVitals</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-310"><a id="__codelineno-26-310" name="__codelineno-26-310" href="#__codelineno-26-310"></a><span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">lcp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">getLatestMetric</span><span class="p">(</span><span class="s1">&#39;LCP&#39;</span><span class="p">);</span>
</span><span id="__span-26-311"><a id="__codelineno-26-311" name="__codelineno-26-311" href="#__codelineno-26-311"></a><span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">fid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">getLatestMetric</span><span class="p">(</span><span class="s1">&#39;FID&#39;</span><span class="p">);</span>
</span><span id="__span-26-312"><a id="__codelineno-26-312" name="__codelineno-26-312" href="#__codelineno-26-312"></a><span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">cls</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">getLatestMetric</span><span class="p">(</span><span class="s1">&#39;CLS&#39;</span><span class="p">);</span>
</span><span id="__span-26-313"><a id="__codelineno-26-313" name="__codelineno-26-313" href="#__codelineno-26-313"></a>
</span><span id="__span-26-314"><a id="__codelineno-26-314" name="__codelineno-26-314" href="#__codelineno-26-314"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-315"><a id="__codelineno-26-315" name="__codelineno-26-315" href="#__codelineno-26-315"></a><span class="w">            </span><span class="nx">lcp</span><span class="o">:</span><span class="w"> </span><span class="nx">lcp</span><span class="o">?</span><span class="p">.</span><span class="nx">value</span><span class="p">,</span>
</span><span id="__span-26-316"><a id="__codelineno-26-316" name="__codelineno-26-316" href="#__codelineno-26-316"></a><span class="w">            </span><span class="nx">fid</span><span class="o">:</span><span class="w"> </span><span class="nx">fid</span><span class="o">?</span><span class="p">.</span><span class="nx">value</span><span class="p">,</span>
</span><span id="__span-26-317"><a id="__codelineno-26-317" name="__codelineno-26-317" href="#__codelineno-26-317"></a><span class="w">            </span><span class="nx">cls</span><span class="o">:</span><span class="w"> </span><span class="nx">cls</span><span class="o">?</span><span class="p">.</span><span class="nx">value</span><span class="p">,</span>
</span><span id="__span-26-318"><a id="__codelineno-26-318" name="__codelineno-26-318" href="#__codelineno-26-318"></a><span class="w">            </span><span class="nx">assessment</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-319"><a id="__codelineno-26-319" name="__codelineno-26-319" href="#__codelineno-26-319"></a><span class="w">                </span><span class="nx">lcp</span><span class="o">:</span><span class="w"> </span><span class="nx">lcp</span><span class="o">?</span><span class="p">.</span><span class="nx">value</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mf">2500</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="s1">&#39;good&#39;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="nx">lcp</span><span class="o">?</span><span class="p">.</span><span class="nx">value</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mf">4000</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="s1">&#39;needs-improvement&#39;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;poor&#39;</span><span class="p">,</span>
</span><span id="__span-26-320"><a id="__codelineno-26-320" name="__codelineno-26-320" href="#__codelineno-26-320"></a><span class="w">                </span><span class="nx">fid</span><span class="o">:</span><span class="w"> </span><span class="nx">fid</span><span class="o">?</span><span class="p">.</span><span class="nx">value</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mf">100</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="s1">&#39;good&#39;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="nx">fid</span><span class="o">?</span><span class="p">.</span><span class="nx">value</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mf">300</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="s1">&#39;needs-improvement&#39;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;poor&#39;</span><span class="p">,</span>
</span><span id="__span-26-321"><a id="__codelineno-26-321" name="__codelineno-26-321" href="#__codelineno-26-321"></a><span class="w">                </span><span class="nx">cls</span><span class="o">:</span><span class="w"> </span><span class="nx">cls</span><span class="o">?</span><span class="p">.</span><span class="nx">value</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mf">0.1</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="s1">&#39;good&#39;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="nx">cls</span><span class="o">?</span><span class="p">.</span><span class="nx">value</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mf">0.25</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="s1">&#39;needs-improvement&#39;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;poor&#39;</span>
</span><span id="__span-26-322"><a id="__codelineno-26-322" name="__codelineno-26-322" href="#__codelineno-26-322"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-26-323"><a id="__codelineno-26-323" name="__codelineno-26-323" href="#__codelineno-26-323"></a><span class="w">        </span><span class="p">};</span>
</span><span id="__span-26-324"><a id="__codelineno-26-324" name="__codelineno-26-324" href="#__codelineno-26-324"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-26-325"><a id="__codelineno-26-325" name="__codelineno-26-325" href="#__codelineno-26-325"></a>
</span><span id="__span-26-326"><a id="__codelineno-26-326" name="__codelineno-26-326" href="#__codelineno-26-326"></a><span class="w">    </span><span class="nx">getResourcePerformanceSummary</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-327"><a id="__codelineno-26-327" name="__codelineno-26-327" href="#__codelineno-26-327"></a><span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">summary</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-328"><a id="__codelineno-26-328" name="__codelineno-26-328" href="#__codelineno-26-328"></a><span class="w">            </span><span class="nx">totalResources</span><span class="o">:</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span>
</span><span id="__span-26-329"><a id="__codelineno-26-329" name="__codelineno-26-329" href="#__codelineno-26-329"></a><span class="w">            </span><span class="nx">totalSize</span><span class="o">:</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span>
</span><span id="__span-26-330"><a id="__codelineno-26-330" name="__codelineno-26-330" href="#__codelineno-26-330"></a><span class="w">            </span><span class="nx">averageLoadTime</span><span class="o">:</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span>
</span><span id="__span-26-331"><a id="__codelineno-26-331" name="__codelineno-26-331" href="#__codelineno-26-331"></a><span class="w">            </span><span class="nx">resourceTypes</span><span class="o">:</span><span class="w"> </span><span class="p">{}</span>
</span><span id="__span-26-332"><a id="__codelineno-26-332" name="__codelineno-26-332" href="#__codelineno-26-332"></a><span class="w">        </span><span class="p">};</span>
</span><span id="__span-26-333"><a id="__codelineno-26-333" name="__codelineno-26-333" href="#__codelineno-26-333"></a>
</span><span id="__span-26-334"><a id="__codelineno-26-334" name="__codelineno-26-334" href="#__codelineno-26-334"></a><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">metricName</span><span class="p">,</span><span class="w"> </span><span class="nx">measurements</span><span class="p">]</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">metrics</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-335"><a id="__codelineno-26-335" name="__codelineno-26-335" href="#__codelineno-26-335"></a><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">metricName</span><span class="p">.</span><span class="nx">startsWith</span><span class="p">(</span><span class="s1">&#39;resource_&#39;</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nx">metricName</span><span class="p">.</span><span class="nx">endsWith</span><span class="p">(</span><span class="s1">&#39;_load_time&#39;</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-336"><a id="__codelineno-26-336" name="__codelineno-26-336" href="#__codelineno-26-336"></a><span class="w">                </span><span class="kd">const</span><span class="w"> </span><span class="nx">resourceType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">metricName</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s1">&#39;_&#39;</span><span class="p">)[</span><span class="mf">1</span><span class="p">];</span>
</span><span id="__span-26-337"><a id="__codelineno-26-337" name="__codelineno-26-337" href="#__codelineno-26-337"></a>
</span><span id="__span-26-338"><a id="__codelineno-26-338" name="__codelineno-26-338" href="#__codelineno-26-338"></a><span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">summary</span><span class="p">.</span><span class="nx">resourceTypes</span><span class="p">[</span><span class="nx">resourceType</span><span class="p">])</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-339"><a id="__codelineno-26-339" name="__codelineno-26-339" href="#__codelineno-26-339"></a><span class="w">                    </span><span class="nx">summary</span><span class="p">.</span><span class="nx">resourceTypes</span><span class="p">[</span><span class="nx">resourceType</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-340"><a id="__codelineno-26-340" name="__codelineno-26-340" href="#__codelineno-26-340"></a><span class="w">                        </span><span class="nx">count</span><span class="o">:</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span>
</span><span id="__span-26-341"><a id="__codelineno-26-341" name="__codelineno-26-341" href="#__codelineno-26-341"></a><span class="w">                        </span><span class="nx">totalLoadTime</span><span class="o">:</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span>
</span><span id="__span-26-342"><a id="__codelineno-26-342" name="__codelineno-26-342" href="#__codelineno-26-342"></a><span class="w">                        </span><span class="nx">totalSize</span><span class="o">:</span><span class="w"> </span><span class="mf">0</span>
</span><span id="__span-26-343"><a id="__codelineno-26-343" name="__codelineno-26-343" href="#__codelineno-26-343"></a><span class="w">                    </span><span class="p">};</span>
</span><span id="__span-26-344"><a id="__codelineno-26-344" name="__codelineno-26-344" href="#__codelineno-26-344"></a><span class="w">                </span><span class="p">}</span>
</span><span id="__span-26-345"><a id="__codelineno-26-345" name="__codelineno-26-345" href="#__codelineno-26-345"></a>
</span><span id="__span-26-346"><a id="__codelineno-26-346" name="__codelineno-26-346" href="#__codelineno-26-346"></a><span class="w">                </span><span class="nx">measurements</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">measurement</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-347"><a id="__codelineno-26-347" name="__codelineno-26-347" href="#__codelineno-26-347"></a><span class="w">                    </span><span class="nx">summary</span><span class="p">.</span><span class="nx">totalResources</span><span class="o">++</span><span class="p">;</span>
</span><span id="__span-26-348"><a id="__codelineno-26-348" name="__codelineno-26-348" href="#__codelineno-26-348"></a><span class="w">                    </span><span class="nx">summary</span><span class="p">.</span><span class="nx">totalSize</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="nx">measurement</span><span class="p">.</span><span class="nx">metadata</span><span class="p">.</span><span class="nx">size</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span>
</span><span id="__span-26-349"><a id="__codelineno-26-349" name="__codelineno-26-349" href="#__codelineno-26-349"></a><span class="w">                    </span><span class="nx">summary</span><span class="p">.</span><span class="nx">averageLoadTime</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="nx">measurement</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>
</span><span id="__span-26-350"><a id="__codelineno-26-350" name="__codelineno-26-350" href="#__codelineno-26-350"></a>
</span><span id="__span-26-351"><a id="__codelineno-26-351" name="__codelineno-26-351" href="#__codelineno-26-351"></a><span class="w">                    </span><span class="nx">summary</span><span class="p">.</span><span class="nx">resourceTypes</span><span class="p">[</span><span class="nx">resourceType</span><span class="p">].</span><span class="nx">count</span><span class="o">++</span><span class="p">;</span>
</span><span id="__span-26-352"><a id="__codelineno-26-352" name="__codelineno-26-352" href="#__codelineno-26-352"></a><span class="w">                    </span><span class="nx">summary</span><span class="p">.</span><span class="nx">resourceTypes</span><span class="p">[</span><span class="nx">resourceType</span><span class="p">].</span><span class="nx">totalLoadTime</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="nx">measurement</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>
</span><span id="__span-26-353"><a id="__codelineno-26-353" name="__codelineno-26-353" href="#__codelineno-26-353"></a><span class="w">                    </span><span class="nx">summary</span><span class="p">.</span><span class="nx">resourceTypes</span><span class="p">[</span><span class="nx">resourceType</span><span class="p">].</span><span class="nx">totalSize</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="nx">measurement</span><span class="p">.</span><span class="nx">metadata</span><span class="p">.</span><span class="nx">size</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span>
</span><span id="__span-26-354"><a id="__codelineno-26-354" name="__codelineno-26-354" href="#__codelineno-26-354"></a><span class="w">                </span><span class="p">});</span>
</span><span id="__span-26-355"><a id="__codelineno-26-355" name="__codelineno-26-355" href="#__codelineno-26-355"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-26-356"><a id="__codelineno-26-356" name="__codelineno-26-356" href="#__codelineno-26-356"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-26-357"><a id="__codelineno-26-357" name="__codelineno-26-357" href="#__codelineno-26-357"></a>
</span><span id="__span-26-358"><a id="__codelineno-26-358" name="__codelineno-26-358" href="#__codelineno-26-358"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">summary</span><span class="p">.</span><span class="nx">totalResources</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mf">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-359"><a id="__codelineno-26-359" name="__codelineno-26-359" href="#__codelineno-26-359"></a><span class="w">            </span><span class="nx">summary</span><span class="p">.</span><span class="nx">averageLoadTime</span><span class="w"> </span><span class="o">/=</span><span class="w"> </span><span class="nx">summary</span><span class="p">.</span><span class="nx">totalResources</span><span class="p">;</span>
</span><span id="__span-26-360"><a id="__codelineno-26-360" name="__codelineno-26-360" href="#__codelineno-26-360"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-26-361"><a id="__codelineno-26-361" name="__codelineno-26-361" href="#__codelineno-26-361"></a>
</span><span id="__span-26-362"><a id="__codelineno-26-362" name="__codelineno-26-362" href="#__codelineno-26-362"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">summary</span><span class="p">;</span>
</span><span id="__span-26-363"><a id="__codelineno-26-363" name="__codelineno-26-363" href="#__codelineno-26-363"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-26-364"><a id="__codelineno-26-364" name="__codelineno-26-364" href="#__codelineno-26-364"></a>
</span><span id="__span-26-365"><a id="__codelineno-26-365" name="__codelineno-26-365" href="#__codelineno-26-365"></a><span class="w">    </span><span class="nx">getNavigationMetrics</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-366"><a id="__codelineno-26-366" name="__codelineno-26-366" href="#__codelineno-26-366"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-367"><a id="__codelineno-26-367" name="__codelineno-26-367" href="#__codelineno-26-367"></a><span class="w">            </span><span class="nx">dnsLookup</span><span class="o">:</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">getLatestMetric</span><span class="p">(</span><span class="s1">&#39;navigation_dns_lookup&#39;</span><span class="p">)</span><span class="o">?</span><span class="p">.</span><span class="nx">value</span><span class="p">,</span>
</span><span id="__span-26-368"><a id="__codelineno-26-368" name="__codelineno-26-368" href="#__codelineno-26-368"></a><span class="w">            </span><span class="nx">tcpConnect</span><span class="o">:</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">getLatestMetric</span><span class="p">(</span><span class="s1">&#39;navigation_tcp_connect&#39;</span><span class="p">)</span><span class="o">?</span><span class="p">.</span><span class="nx">value</span><span class="p">,</span>
</span><span id="__span-26-369"><a id="__codelineno-26-369" name="__codelineno-26-369" href="#__codelineno-26-369"></a><span class="w">            </span><span class="nx">sslHandshake</span><span class="o">:</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">getLatestMetric</span><span class="p">(</span><span class="s1">&#39;navigation_ssl_handshake&#39;</span><span class="p">)</span><span class="o">?</span><span class="p">.</span><span class="nx">value</span><span class="p">,</span>
</span><span id="__span-26-370"><a id="__codelineno-26-370" name="__codelineno-26-370" href="#__codelineno-26-370"></a><span class="w">            </span><span class="nx">requestResponse</span><span class="o">:</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">getLatestMetric</span><span class="p">(</span><span class="s1">&#39;navigation_request_response&#39;</span><span class="p">)</span><span class="o">?</span><span class="p">.</span><span class="nx">value</span><span class="p">,</span>
</span><span id="__span-26-371"><a id="__codelineno-26-371" name="__codelineno-26-371" href="#__codelineno-26-371"></a><span class="w">            </span><span class="nx">domParse</span><span class="o">:</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">getLatestMetric</span><span class="p">(</span><span class="s1">&#39;navigation_dom_parse&#39;</span><span class="p">)</span><span class="o">?</span><span class="p">.</span><span class="nx">value</span><span class="p">,</span>
</span><span id="__span-26-372"><a id="__codelineno-26-372" name="__codelineno-26-372" href="#__codelineno-26-372"></a><span class="w">            </span><span class="nx">resourceLoad</span><span class="o">:</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">getLatestMetric</span><span class="p">(</span><span class="s1">&#39;navigation_resource_load&#39;</span><span class="p">)</span><span class="o">?</span><span class="p">.</span><span class="nx">value</span><span class="p">,</span>
</span><span id="__span-26-373"><a id="__codelineno-26-373" name="__codelineno-26-373" href="#__codelineno-26-373"></a><span class="w">            </span><span class="nx">totalLoad</span><span class="o">:</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">getLatestMetric</span><span class="p">(</span><span class="s1">&#39;navigation_total_load&#39;</span><span class="p">)</span><span class="o">?</span><span class="p">.</span><span class="nx">value</span>
</span><span id="__span-26-374"><a id="__codelineno-26-374" name="__codelineno-26-374" href="#__codelineno-26-374"></a><span class="w">        </span><span class="p">};</span>
</span><span id="__span-26-375"><a id="__codelineno-26-375" name="__codelineno-26-375" href="#__codelineno-26-375"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-26-376"><a id="__codelineno-26-376" name="__codelineno-26-376" href="#__codelineno-26-376"></a>
</span><span id="__span-26-377"><a id="__codelineno-26-377" name="__codelineno-26-377" href="#__codelineno-26-377"></a><span class="w">    </span><span class="nx">getOptimizationSuggestions</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-378"><a id="__codelineno-26-378" name="__codelineno-26-378" href="#__codelineno-26-378"></a><span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">suggestions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[];</span>
</span><span id="__span-26-379"><a id="__codelineno-26-379" name="__codelineno-26-379" href="#__codelineno-26-379"></a>
</span><span id="__span-26-380"><a id="__codelineno-26-380" name="__codelineno-26-380" href="#__codelineno-26-380"></a><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">type</span><span class="p">,</span><span class="w"> </span><span class="nx">optimizations</span><span class="p">]</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">optimizations</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-381"><a id="__codelineno-26-381" name="__codelineno-26-381" href="#__codelineno-26-381"></a><span class="w">            </span><span class="nx">suggestions</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
</span><span id="__span-26-382"><a id="__codelineno-26-382" name="__codelineno-26-382" href="#__codelineno-26-382"></a><span class="w">                </span><span class="nx">type</span><span class="o">:</span><span class="w"> </span><span class="nx">type</span><span class="p">,</span>
</span><span id="__span-26-383"><a id="__codelineno-26-383" name="__codelineno-26-383" href="#__codelineno-26-383"></a><span class="w">                </span><span class="nx">count</span><span class="o">:</span><span class="w"> </span><span class="nx">optimizations</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span>
</span><span id="__span-26-384"><a id="__codelineno-26-384" name="__codelineno-26-384" href="#__codelineno-26-384"></a><span class="w">                </span><span class="nx">latestSuggestion</span><span class="o">:</span><span class="w"> </span><span class="nx">optimizations</span><span class="p">[</span><span class="nx">optimizations</span><span class="p">.</span><span class="nx">length</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">1</span><span class="p">]</span>
</span><span id="__span-26-385"><a id="__codelineno-26-385" name="__codelineno-26-385" href="#__codelineno-26-385"></a><span class="w">            </span><span class="p">});</span>
</span><span id="__span-26-386"><a id="__codelineno-26-386" name="__codelineno-26-386" href="#__codelineno-26-386"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-26-387"><a id="__codelineno-26-387" name="__codelineno-26-387" href="#__codelineno-26-387"></a>
</span><span id="__span-26-388"><a id="__codelineno-26-388" name="__codelineno-26-388" href="#__codelineno-26-388"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">suggestions</span><span class="p">;</span>
</span><span id="__span-26-389"><a id="__codelineno-26-389" name="__codelineno-26-389" href="#__codelineno-26-389"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-26-390"><a id="__codelineno-26-390" name="__codelineno-26-390" href="#__codelineno-26-390"></a>
</span><span id="__span-26-391"><a id="__codelineno-26-391" name="__codelineno-26-391" href="#__codelineno-26-391"></a><span class="w">    </span><span class="nx">calculatePerformanceScore</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-392"><a id="__codelineno-26-392" name="__codelineno-26-392" href="#__codelineno-26-392"></a><span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">vitals</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">getCoreWebVitals</span><span class="p">();</span>
</span><span id="__span-26-393"><a id="__codelineno-26-393" name="__codelineno-26-393" href="#__codelineno-26-393"></a><span class="w">        </span><span class="kd">let</span><span class="w"> </span><span class="nx">score</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">100</span><span class="p">;</span>
</span><span id="__span-26-394"><a id="__codelineno-26-394" name="__codelineno-26-394" href="#__codelineno-26-394"></a>
</span><span id="__span-26-395"><a id="__codelineno-26-395" name="__codelineno-26-395" href="#__codelineno-26-395"></a><span class="w">        </span><span class="c1">// LCP scoring (25 points)</span>
</span><span id="__span-26-396"><a id="__codelineno-26-396" name="__codelineno-26-396" href="#__codelineno-26-396"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">vitals</span><span class="p">.</span><span class="nx">assessment</span><span class="p">.</span><span class="nx">lcp</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;poor&#39;</span><span class="p">)</span><span class="w"> </span><span class="nx">score</span><span class="w"> </span><span class="o">-=</span><span class="w"> </span><span class="mf">25</span><span class="p">;</span>
</span><span id="__span-26-397"><a id="__codelineno-26-397" name="__codelineno-26-397" href="#__codelineno-26-397"></a><span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">vitals</span><span class="p">.</span><span class="nx">assessment</span><span class="p">.</span><span class="nx">lcp</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;needs-improvement&#39;</span><span class="p">)</span><span class="w"> </span><span class="nx">score</span><span class="w"> </span><span class="o">-=</span><span class="w"> </span><span class="mf">12</span><span class="p">;</span>
</span><span id="__span-26-398"><a id="__codelineno-26-398" name="__codelineno-26-398" href="#__codelineno-26-398"></a>
</span><span id="__span-26-399"><a id="__codelineno-26-399" name="__codelineno-26-399" href="#__codelineno-26-399"></a><span class="w">        </span><span class="c1">// FID scoring (25 points)</span>
</span><span id="__span-26-400"><a id="__codelineno-26-400" name="__codelineno-26-400" href="#__codelineno-26-400"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">vitals</span><span class="p">.</span><span class="nx">assessment</span><span class="p">.</span><span class="nx">fid</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;poor&#39;</span><span class="p">)</span><span class="w"> </span><span class="nx">score</span><span class="w"> </span><span class="o">-=</span><span class="w"> </span><span class="mf">25</span><span class="p">;</span>
</span><span id="__span-26-401"><a id="__codelineno-26-401" name="__codelineno-26-401" href="#__codelineno-26-401"></a><span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">vitals</span><span class="p">.</span><span class="nx">assessment</span><span class="p">.</span><span class="nx">fid</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;needs-improvement&#39;</span><span class="p">)</span><span class="w"> </span><span class="nx">score</span><span class="w"> </span><span class="o">-=</span><span class="w"> </span><span class="mf">12</span><span class="p">;</span>
</span><span id="__span-26-402"><a id="__codelineno-26-402" name="__codelineno-26-402" href="#__codelineno-26-402"></a>
</span><span id="__span-26-403"><a id="__codelineno-26-403" name="__codelineno-26-403" href="#__codelineno-26-403"></a><span class="w">        </span><span class="c1">// CLS scoring (25 points)</span>
</span><span id="__span-26-404"><a id="__codelineno-26-404" name="__codelineno-26-404" href="#__codelineno-26-404"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">vitals</span><span class="p">.</span><span class="nx">assessment</span><span class="p">.</span><span class="nx">cls</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;poor&#39;</span><span class="p">)</span><span class="w"> </span><span class="nx">score</span><span class="w"> </span><span class="o">-=</span><span class="w"> </span><span class="mf">25</span><span class="p">;</span>
</span><span id="__span-26-405"><a id="__codelineno-26-405" name="__codelineno-26-405" href="#__codelineno-26-405"></a><span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">vitals</span><span class="p">.</span><span class="nx">assessment</span><span class="p">.</span><span class="nx">cls</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;needs-improvement&#39;</span><span class="p">)</span><span class="w"> </span><span class="nx">score</span><span class="w"> </span><span class="o">-=</span><span class="w"> </span><span class="mf">12</span><span class="p">;</span>
</span><span id="__span-26-406"><a id="__codelineno-26-406" name="__codelineno-26-406" href="#__codelineno-26-406"></a>
</span><span id="__span-26-407"><a id="__codelineno-26-407" name="__codelineno-26-407" href="#__codelineno-26-407"></a><span class="w">        </span><span class="c1">// Optimization suggestions penalty (25 points)</span>
</span><span id="__span-26-408"><a id="__codelineno-26-408" name="__codelineno-26-408" href="#__codelineno-26-408"></a><span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">suggestionCount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">getOptimizationSuggestions</span><span class="p">().</span><span class="nx">length</span><span class="p">;</span>
</span><span id="__span-26-409"><a id="__codelineno-26-409" name="__codelineno-26-409" href="#__codelineno-26-409"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">suggestionCount</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mf">10</span><span class="p">)</span><span class="w"> </span><span class="nx">score</span><span class="w"> </span><span class="o">-=</span><span class="w"> </span><span class="mf">25</span><span class="p">;</span>
</span><span id="__span-26-410"><a id="__codelineno-26-410" name="__codelineno-26-410" href="#__codelineno-26-410"></a><span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">suggestionCount</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mf">5</span><span class="p">)</span><span class="w"> </span><span class="nx">score</span><span class="w"> </span><span class="o">-=</span><span class="w"> </span><span class="mf">15</span><span class="p">;</span>
</span><span id="__span-26-411"><a id="__codelineno-26-411" name="__codelineno-26-411" href="#__codelineno-26-411"></a><span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">suggestionCount</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mf">2</span><span class="p">)</span><span class="w"> </span><span class="nx">score</span><span class="w"> </span><span class="o">-=</span><span class="w"> </span><span class="mf">8</span><span class="p">;</span>
</span><span id="__span-26-412"><a id="__codelineno-26-412" name="__codelineno-26-412" href="#__codelineno-26-412"></a>
</span><span id="__span-26-413"><a id="__codelineno-26-413" name="__codelineno-26-413" href="#__codelineno-26-413"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="nx">score</span><span class="p">);</span>
</span><span id="__span-26-414"><a id="__codelineno-26-414" name="__codelineno-26-414" href="#__codelineno-26-414"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-26-415"><a id="__codelineno-26-415" name="__codelineno-26-415" href="#__codelineno-26-415"></a>
</span><span id="__span-26-416"><a id="__codelineno-26-416" name="__codelineno-26-416" href="#__codelineno-26-416"></a><span class="w">    </span><span class="nx">getLatestMetric</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-417"><a id="__codelineno-26-417" name="__codelineno-26-417" href="#__codelineno-26-417"></a><span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">measurements</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">metrics</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">name</span><span class="p">);</span>
</span><span id="__span-26-418"><a id="__codelineno-26-418" name="__codelineno-26-418" href="#__codelineno-26-418"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">measurements</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nx">measurements</span><span class="p">.</span><span class="nx">length</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mf">0</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="nx">measurements</span><span class="p">[</span><span class="nx">measurements</span><span class="p">.</span><span class="nx">length</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">1</span><span class="p">]</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span>
</span><span id="__span-26-419"><a id="__codelineno-26-419" name="__codelineno-26-419" href="#__codelineno-26-419"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-26-420"><a id="__codelineno-26-420" name="__codelineno-26-420" href="#__codelineno-26-420"></a>
</span><span id="__span-26-421"><a id="__codelineno-26-421" name="__codelineno-26-421" href="#__codelineno-26-421"></a><span class="w">    </span><span class="c1">// Performance optimization techniques</span>
</span><span id="__span-26-422"><a id="__codelineno-26-422" name="__codelineno-26-422" href="#__codelineno-26-422"></a><span class="w">    </span><span class="nx">optimizeImages</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-423"><a id="__codelineno-26-423" name="__codelineno-26-423" href="#__codelineno-26-423"></a><span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;ğŸ–¼ï¸ Optimizing images...&#39;</span><span class="p">);</span>
</span><span id="__span-26-424"><a id="__codelineno-26-424" name="__codelineno-26-424" href="#__codelineno-26-424"></a>
</span><span id="__span-26-425"><a id="__codelineno-26-425" name="__codelineno-26-425" href="#__codelineno-26-425"></a><span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">images</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="s1">&#39;img&#39;</span><span class="p">);</span>
</span><span id="__span-26-426"><a id="__codelineno-26-426" name="__codelineno-26-426" href="#__codelineno-26-426"></a><span class="w">        </span><span class="nx">images</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">img</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-427"><a id="__codelineno-26-427" name="__codelineno-26-427" href="#__codelineno-26-427"></a><span class="w">            </span><span class="c1">// Add lazy loading</span>
</span><span id="__span-26-428"><a id="__codelineno-26-428" name="__codelineno-26-428" href="#__codelineno-26-428"></a><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">img</span><span class="p">.</span><span class="nx">loading</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-429"><a id="__codelineno-26-429" name="__codelineno-26-429" href="#__codelineno-26-429"></a><span class="w">                </span><span class="nx">img</span><span class="p">.</span><span class="nx">loading</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;lazy&#39;</span><span class="p">;</span>
</span><span id="__span-26-430"><a id="__codelineno-26-430" name="__codelineno-26-430" href="#__codelineno-26-430"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-26-431"><a id="__codelineno-26-431" name="__codelineno-26-431" href="#__codelineno-26-431"></a>
</span><span id="__span-26-432"><a id="__codelineno-26-432" name="__codelineno-26-432" href="#__codelineno-26-432"></a><span class="w">            </span><span class="c1">// Add responsive images if not present</span>
</span><span id="__span-26-433"><a id="__codelineno-26-433" name="__codelineno-26-433" href="#__codelineno-26-433"></a><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">img</span><span class="p">.</span><span class="nx">srcset</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nx">img</span><span class="p">.</span><span class="nx">dataset</span><span class="p">.</span><span class="nx">sizes</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-434"><a id="__codelineno-26-434" name="__codelineno-26-434" href="#__codelineno-26-434"></a><span class="w">                </span><span class="kd">const</span><span class="w"> </span><span class="nx">sizes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">img</span><span class="p">.</span><span class="nx">dataset</span><span class="p">.</span><span class="nx">sizes</span><span class="p">);</span>
</span><span id="__span-26-435"><a id="__codelineno-26-435" name="__codelineno-26-435" href="#__codelineno-26-435"></a><span class="w">                </span><span class="kd">const</span><span class="w"> </span><span class="nx">srcset</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">sizes</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">size</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="sb">`</span><span class="si">${</span><span class="nx">size</span><span class="p">.</span><span class="nx">url</span><span class="si">}</span><span class="sb"> </span><span class="si">${</span><span class="nx">size</span><span class="p">.</span><span class="nx">width</span><span class="si">}</span><span class="sb">w`</span><span class="p">).</span><span class="nx">join</span><span class="p">(</span><span class="s1">&#39;, &#39;</span><span class="p">);</span>
</span><span id="__span-26-436"><a id="__codelineno-26-436" name="__codelineno-26-436" href="#__codelineno-26-436"></a><span class="w">                </span><span class="nx">img</span><span class="p">.</span><span class="nx">srcset</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">srcset</span><span class="p">;</span>
</span><span id="__span-26-437"><a id="__codelineno-26-437" name="__codelineno-26-437" href="#__codelineno-26-437"></a><span class="w">                </span><span class="nx">img</span><span class="p">.</span><span class="nx">sizes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 25vw&#39;</span><span class="p">;</span>
</span><span id="__span-26-438"><a id="__codelineno-26-438" name="__codelineno-26-438" href="#__codelineno-26-438"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-26-439"><a id="__codelineno-26-439" name="__codelineno-26-439" href="#__codelineno-26-439"></a>
</span><span id="__span-26-440"><a id="__codelineno-26-440" name="__codelineno-26-440" href="#__codelineno-26-440"></a><span class="w">            </span><span class="c1">// Add WebP support detection</span>
</span><span id="__span-26-441"><a id="__codelineno-26-441" name="__codelineno-26-441" href="#__codelineno-26-441"></a><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="nx">addWebPSupport</span><span class="p">(</span><span class="nx">img</span><span class="p">);</span>
</span><span id="__span-26-442"><a id="__codelineno-26-442" name="__codelineno-26-442" href="#__codelineno-26-442"></a><span class="w">        </span><span class="p">});</span>
</span><span id="__span-26-443"><a id="__codelineno-26-443" name="__codelineno-26-443" href="#__codelineno-26-443"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-26-444"><a id="__codelineno-26-444" name="__codelineno-26-444" href="#__codelineno-26-444"></a>
</span><span id="__span-26-445"><a id="__codelineno-26-445" name="__codelineno-26-445" href="#__codelineno-26-445"></a><span class="w">    </span><span class="nx">addWebPSupport</span><span class="p">(</span><span class="nx">img</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-446"><a id="__codelineno-26-446" name="__codelineno-26-446" href="#__codelineno-26-446"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">img</span><span class="p">.</span><span class="nx">dataset</span><span class="p">.</span><span class="nx">webp</span><span class="p">)</span><span class="w"> </span><span class="k">return</span><span class="p">;</span>
</span><span id="__span-26-447"><a id="__codelineno-26-447" name="__codelineno-26-447" href="#__codelineno-26-447"></a>
</span><span id="__span-26-448"><a id="__codelineno-26-448" name="__codelineno-26-448" href="#__codelineno-26-448"></a><span class="w">        </span><span class="c1">// Feature detection for WebP</span>
</span><span id="__span-26-449"><a id="__codelineno-26-449" name="__codelineno-26-449" href="#__codelineno-26-449"></a><span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">webpTest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Image</span><span class="p">();</span>
</span><span id="__span-26-450"><a id="__codelineno-26-450" name="__codelineno-26-450" href="#__codelineno-26-450"></a><span class="w">        </span><span class="nx">webpTest</span><span class="p">.</span><span class="nx">onload</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">webpTest</span><span class="p">.</span><span class="nx">onerror</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-451"><a id="__codelineno-26-451" name="__codelineno-26-451" href="#__codelineno-26-451"></a><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">webpTest</span><span class="p">.</span><span class="nx">height</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="mf">2</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-452"><a id="__codelineno-26-452" name="__codelineno-26-452" href="#__codelineno-26-452"></a><span class="w">                </span><span class="c1">// WebP is supported</span>
</span><span id="__span-26-453"><a id="__codelineno-26-453" name="__codelineno-26-453" href="#__codelineno-26-453"></a><span class="w">                </span><span class="nx">img</span><span class="p">.</span><span class="nx">src</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">img</span><span class="p">.</span><span class="nx">dataset</span><span class="p">.</span><span class="nx">webp</span><span class="p">;</span>
</span><span id="__span-26-454"><a id="__codelineno-26-454" name="__codelineno-26-454" href="#__codelineno-26-454"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-26-455"><a id="__codelineno-26-455" name="__codelineno-26-455" href="#__codelineno-26-455"></a><span class="w">        </span><span class="p">};</span>
</span><span id="__span-26-456"><a id="__codelineno-26-456" name="__codelineno-26-456" href="#__codelineno-26-456"></a><span class="w">        </span><span class="nx">webpTest</span><span class="p">.</span><span class="nx">src</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA&#39;</span><span class="p">;</span>
</span><span id="__span-26-457"><a id="__codelineno-26-457" name="__codelineno-26-457" href="#__codelineno-26-457"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-26-458"><a id="__codelineno-26-458" name="__codelineno-26-458" href="#__codelineno-26-458"></a>
</span><span id="__span-26-459"><a id="__codelineno-26-459" name="__codelineno-26-459" href="#__codelineno-26-459"></a><span class="w">    </span><span class="nx">optimizeScripts</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-460"><a id="__codelineno-26-460" name="__codelineno-26-460" href="#__codelineno-26-460"></a><span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;âš¡ Optimizing scripts...&#39;</span><span class="p">);</span>
</span><span id="__span-26-461"><a id="__codelineno-26-461" name="__codelineno-26-461" href="#__codelineno-26-461"></a>
</span><span id="__span-26-462"><a id="__codelineno-26-462" name="__codelineno-26-462" href="#__codelineno-26-462"></a><span class="w">        </span><span class="c1">// Add async/defer to non-critical scripts</span>
</span><span id="__span-26-463"><a id="__codelineno-26-463" name="__codelineno-26-463" href="#__codelineno-26-463"></a><span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">scripts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="s1">&#39;script[src]&#39;</span><span class="p">);</span>
</span><span id="__span-26-464"><a id="__codelineno-26-464" name="__codelineno-26-464" href="#__codelineno-26-464"></a><span class="w">        </span><span class="nx">scripts</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">script</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-465"><a id="__codelineno-26-465" name="__codelineno-26-465" href="#__codelineno-26-465"></a><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">script</span><span class="p">.</span><span class="k">async</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="o">!</span><span class="nx">script</span><span class="p">.</span><span class="nx">defer</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="o">!</span><span class="nx">script</span><span class="p">.</span><span class="nx">dataset</span><span class="p">.</span><span class="nx">critical</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-466"><a id="__codelineno-26-466" name="__codelineno-26-466" href="#__codelineno-26-466"></a><span class="w">                </span><span class="nx">script</span><span class="p">.</span><span class="nx">defer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span>
</span><span id="__span-26-467"><a id="__codelineno-26-467" name="__codelineno-26-467" href="#__codelineno-26-467"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-26-468"><a id="__codelineno-26-468" name="__codelineno-26-468" href="#__codelineno-26-468"></a><span class="w">        </span><span class="p">});</span>
</span><span id="__span-26-469"><a id="__codelineno-26-469" name="__codelineno-26-469" href="#__codelineno-26-469"></a>
</span><span id="__span-26-470"><a id="__codelineno-26-470" name="__codelineno-26-470" href="#__codelineno-26-470"></a><span class="w">        </span><span class="c1">// Implement script loading prioritization</span>
</span><span id="__span-26-471"><a id="__codelineno-26-471" name="__codelineno-26-471" href="#__codelineno-26-471"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">prioritizeScriptLoading</span><span class="p">();</span>
</span><span id="__span-26-472"><a id="__codelineno-26-472" name="__codelineno-26-472" href="#__codelineno-26-472"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-26-473"><a id="__codelineno-26-473" name="__codelineno-26-473" href="#__codelineno-26-473"></a>
</span><span id="__span-26-474"><a id="__codelineno-26-474" name="__codelineno-26-474" href="#__codelineno-26-474"></a><span class="w">    </span><span class="nx">prioritizeScriptLoading</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-475"><a id="__codelineno-26-475" name="__codelineno-26-475" href="#__codelineno-26-475"></a><span class="w">        </span><span class="c1">// Load critical scripts first</span>
</span><span id="__span-26-476"><a id="__codelineno-26-476" name="__codelineno-26-476" href="#__codelineno-26-476"></a><span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">criticalScripts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="s1">&#39;script[data-critical=&quot;true&quot;]&#39;</span><span class="p">);</span>
</span><span id="__span-26-477"><a id="__codelineno-26-477" name="__codelineno-26-477" href="#__codelineno-26-477"></a><span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">nonCriticalScripts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="s1">&#39;script[data-critical=&quot;false&quot;]&#39;</span><span class="p">);</span>
</span><span id="__span-26-478"><a id="__codelineno-26-478" name="__codelineno-26-478" href="#__codelineno-26-478"></a>
</span><span id="__span-26-479"><a id="__codelineno-26-479" name="__codelineno-26-479" href="#__codelineno-26-479"></a><span class="w">        </span><span class="c1">// Wait for critical scripts to load before loading non-critical ones</span>
</span><span id="__span-26-480"><a id="__codelineno-26-480" name="__codelineno-26-480" href="#__codelineno-26-480"></a><span class="w">        </span><span class="nb">Promise</span><span class="p">.</span><span class="nx">all</span><span class="p">(</span><span class="nb">Array</span><span class="p">.</span><span class="kr">from</span><span class="p">(</span><span class="nx">criticalScripts</span><span class="p">).</span><span class="nx">map</span><span class="p">(</span><span class="nx">script</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">loadScript</span><span class="p">(</span><span class="nx">script</span><span class="p">.</span><span class="nx">src</span><span class="p">)))</span>
</span><span id="__span-26-481"><a id="__codelineno-26-481" name="__codelineno-26-481" href="#__codelineno-26-481"></a><span class="w">            </span><span class="p">.</span><span class="nx">then</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-482"><a id="__codelineno-26-482" name="__codelineno-26-482" href="#__codelineno-26-482"></a><span class="w">                </span><span class="nx">nonCriticalScripts</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">script</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-483"><a id="__codelineno-26-483" name="__codelineno-26-483" href="#__codelineno-26-483"></a><span class="w">                    </span><span class="k">this</span><span class="p">.</span><span class="nx">loadScript</span><span class="p">(</span><span class="nx">script</span><span class="p">.</span><span class="nx">src</span><span class="p">);</span>
</span><span id="__span-26-484"><a id="__codelineno-26-484" name="__codelineno-26-484" href="#__codelineno-26-484"></a><span class="w">                </span><span class="p">});</span>
</span><span id="__span-26-485"><a id="__codelineno-26-485" name="__codelineno-26-485" href="#__codelineno-26-485"></a><span class="w">            </span><span class="p">});</span>
</span><span id="__span-26-486"><a id="__codelineno-26-486" name="__codelineno-26-486" href="#__codelineno-26-486"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-26-487"><a id="__codelineno-26-487" name="__codelineno-26-487" href="#__codelineno-26-487"></a>
</span><span id="__span-26-488"><a id="__codelineno-26-488" name="__codelineno-26-488" href="#__codelineno-26-488"></a><span class="w">    </span><span class="nx">loadScript</span><span class="p">(</span><span class="nx">src</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-489"><a id="__codelineno-26-489" name="__codelineno-26-489" href="#__codelineno-26-489"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nb">Promise</span><span class="p">((</span><span class="nx">resolve</span><span class="p">,</span><span class="w"> </span><span class="nx">reject</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-490"><a id="__codelineno-26-490" name="__codelineno-26-490" href="#__codelineno-26-490"></a><span class="w">            </span><span class="kd">const</span><span class="w"> </span><span class="nx">script</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;script&#39;</span><span class="p">);</span>
</span><span id="__span-26-491"><a id="__codelineno-26-491" name="__codelineno-26-491" href="#__codelineno-26-491"></a><span class="w">            </span><span class="nx">script</span><span class="p">.</span><span class="nx">src</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">src</span><span class="p">;</span>
</span><span id="__span-26-492"><a id="__codelineno-26-492" name="__codelineno-26-492" href="#__codelineno-26-492"></a><span class="w">            </span><span class="nx">script</span><span class="p">.</span><span class="nx">onload</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">resolve</span><span class="p">;</span>
</span><span id="__span-26-493"><a id="__codelineno-26-493" name="__codelineno-26-493" href="#__codelineno-26-493"></a><span class="w">            </span><span class="nx">script</span><span class="p">.</span><span class="nx">onerror</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">reject</span><span class="p">;</span>
</span><span id="__span-26-494"><a id="__codelineno-26-494" name="__codelineno-26-494" href="#__codelineno-26-494"></a><span class="w">            </span><span class="nb">document</span><span class="p">.</span><span class="nx">head</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">script</span><span class="p">);</span>
</span><span id="__span-26-495"><a id="__codelineno-26-495" name="__codelineno-26-495" href="#__codelineno-26-495"></a><span class="w">        </span><span class="p">});</span>
</span><span id="__span-26-496"><a id="__codelineno-26-496" name="__codelineno-26-496" href="#__codelineno-26-496"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-26-497"><a id="__codelineno-26-497" name="__codelineno-26-497" href="#__codelineno-26-497"></a>
</span><span id="__span-26-498"><a id="__codelineno-26-498" name="__codelineno-26-498" href="#__codelineno-26-498"></a><span class="w">    </span><span class="nx">optimizeCSS</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-499"><a id="__codelineno-26-499" name="__codelineno-26-499" href="#__codelineno-26-499"></a><span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;ğŸ¨ Optimizing CSS...&#39;</span><span class="p">);</span>
</span><span id="__span-26-500"><a id="__codelineno-26-500" name="__codelineno-26-500" href="#__codelineno-26-500"></a>
</span><span id="__span-26-501"><a id="__codelineno-26-501" name="__codelineno-26-501" href="#__codelineno-26-501"></a><span class="w">        </span><span class="c1">// Identify and inline critical CSS</span>
</span><span id="__span-26-502"><a id="__codelineno-26-502" name="__codelineno-26-502" href="#__codelineno-26-502"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">inlineCriticalCSS</span><span class="p">();</span>
</span><span id="__span-26-503"><a id="__codelineno-26-503" name="__codelineno-26-503" href="#__codelineno-26-503"></a>
</span><span id="__span-26-504"><a id="__codelineno-26-504" name="__codelineno-26-504" href="#__codelineno-26-504"></a><span class="w">        </span><span class="c1">// Defer non-critical CSS</span>
</span><span id="__span-26-505"><a id="__codelineno-26-505" name="__codelineno-26-505" href="#__codelineno-26-505"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">deferNonCriticalCSS</span><span class="p">();</span>
</span><span id="__span-26-506"><a id="__codelineno-26-506" name="__codelineno-26-506" href="#__codelineno-26-506"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-26-507"><a id="__codelineno-26-507" name="__codelineno-26-507" href="#__codelineno-26-507"></a>
</span><span id="__span-26-508"><a id="__codelineno-26-508" name="__codelineno-26-508" href="#__codelineno-26-508"></a><span class="w">    </span><span class="nx">inlineCriticalCSS</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-509"><a id="__codelineno-26-509" name="__codelineno-26-509" href="#__codelineno-26-509"></a><span class="w">        </span><span class="c1">// This would typically be done at build time</span>
</span><span id="__span-26-510"><a id="__codelineno-26-510" name="__codelineno-26-510" href="#__codelineno-26-510"></a><span class="w">        </span><span class="c1">// For demonstration, we&#39;ll simulate identifying critical styles</span>
</span><span id="__span-26-511"><a id="__codelineno-26-511" name="__codelineno-26-511" href="#__codelineno-26-511"></a><span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">criticalSelectors</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
</span><span id="__span-26-512"><a id="__codelineno-26-512" name="__codelineno-26-512" href="#__codelineno-26-512"></a><span class="w">            </span><span class="s1">&#39;body&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;h1&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;h2&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;.header&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;.navigation&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;.hero&#39;</span><span class="p">,</span>
</span><span id="__span-26-513"><a id="__codelineno-26-513" name="__codelineno-26-513" href="#__codelineno-26-513"></a><span class="w">            </span><span class="s1">&#39;.container&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;.main-content&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;.footer&#39;</span>
</span><span id="__span-26-514"><a id="__codelineno-26-514" name="__codelineno-26-514" href="#__codelineno-26-514"></a><span class="w">        </span><span class="p">];</span>
</span><span id="__span-26-515"><a id="__codelineno-26-515" name="__codelineno-26-515" href="#__codelineno-26-515"></a>
</span><span id="__span-26-516"><a id="__codelineno-26-516" name="__codelineno-26-516" href="#__codelineno-26-516"></a><span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;ğŸ”¥ Critical CSS selectors identified:&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">criticalSelectors</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s1">&#39;, &#39;</span><span class="p">));</span>
</span><span id="__span-26-517"><a id="__codelineno-26-517" name="__codelineno-26-517" href="#__codelineno-26-517"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-26-518"><a id="__codelineno-26-518" name="__codelineno-26-518" href="#__codelineno-26-518"></a>
</span><span id="__span-26-519"><a id="__codelineno-26-519" name="__codelineno-26-519" href="#__codelineno-26-519"></a><span class="w">    </span><span class="nx">deferNonCriticalCSS</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-520"><a id="__codelineno-26-520" name="__codelineno-26-520" href="#__codelineno-26-520"></a><span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">stylesheets</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="s1">&#39;link[rel=&quot;stylesheet&quot;]:not([data-critical])&#39;</span><span class="p">);</span>
</span><span id="__span-26-521"><a id="__codelineno-26-521" name="__codelineno-26-521" href="#__codelineno-26-521"></a>
</span><span id="__span-26-522"><a id="__codelineno-26-522" name="__codelineno-26-522" href="#__codelineno-26-522"></a><span class="w">        </span><span class="nx">stylesheets</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">link</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-523"><a id="__codelineno-26-523" name="__codelineno-26-523" href="#__codelineno-26-523"></a><span class="w">            </span><span class="c1">// Load CSS asynchronously</span>
</span><span id="__span-26-524"><a id="__codelineno-26-524" name="__codelineno-26-524" href="#__codelineno-26-524"></a><span class="w">            </span><span class="kd">const</span><span class="w"> </span><span class="nx">newLink</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;link&#39;</span><span class="p">);</span>
</span><span id="__span-26-525"><a id="__codelineno-26-525" name="__codelineno-26-525" href="#__codelineno-26-525"></a><span class="w">            </span><span class="nx">newLink</span><span class="p">.</span><span class="nx">rel</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;preload&#39;</span><span class="p">;</span>
</span><span id="__span-26-526"><a id="__codelineno-26-526" name="__codelineno-26-526" href="#__codelineno-26-526"></a><span class="w">            </span><span class="nx">newLink</span><span class="p">.</span><span class="kr">as</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;style&#39;</span><span class="p">;</span>
</span><span id="__span-26-527"><a id="__codelineno-26-527" name="__codelineno-26-527" href="#__codelineno-26-527"></a><span class="w">            </span><span class="nx">newLink</span><span class="p">.</span><span class="nx">href</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">link</span><span class="p">.</span><span class="nx">href</span><span class="p">;</span>
</span><span id="__span-26-528"><a id="__codelineno-26-528" name="__codelineno-26-528" href="#__codelineno-26-528"></a><span class="w">            </span><span class="nx">newLink</span><span class="p">.</span><span class="nx">onload</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-529"><a id="__codelineno-26-529" name="__codelineno-26-529" href="#__codelineno-26-529"></a><span class="w">                </span><span class="k">this</span><span class="p">.</span><span class="nx">rel</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;stylesheet&#39;</span><span class="p">;</span>
</span><span id="__span-26-530"><a id="__codelineno-26-530" name="__codelineno-26-530" href="#__codelineno-26-530"></a><span class="w">            </span><span class="p">};</span>
</span><span id="__span-26-531"><a id="__codelineno-26-531" name="__codelineno-26-531" href="#__codelineno-26-531"></a>
</span><span id="__span-26-532"><a id="__codelineno-26-532" name="__codelineno-26-532" href="#__codelineno-26-532"></a><span class="w">            </span><span class="nb">document</span><span class="p">.</span><span class="nx">head</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">newLink</span><span class="p">);</span>
</span><span id="__span-26-533"><a id="__codelineno-26-533" name="__codelineno-26-533" href="#__codelineno-26-533"></a><span class="w">            </span><span class="nx">link</span><span class="p">.</span><span class="nx">remove</span><span class="p">();</span>
</span><span id="__span-26-534"><a id="__codelineno-26-534" name="__codelineno-26-534" href="#__codelineno-26-534"></a><span class="w">        </span><span class="p">});</span>
</span><span id="__span-26-535"><a id="__codelineno-26-535" name="__codelineno-26-535" href="#__codelineno-26-535"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-26-536"><a id="__codelineno-26-536" name="__codelineno-26-536" href="#__codelineno-26-536"></a>
</span><span id="__span-26-537"><a id="__codelineno-26-537" name="__codelineno-26-537" href="#__codelineno-26-537"></a><span class="w">    </span><span class="c1">// Caching strategies</span>
</span><span id="__span-26-538"><a id="__codelineno-26-538" name="__codelineno-26-538" href="#__codelineno-26-538"></a><span class="w">    </span><span class="nx">implementCaching</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-539"><a id="__codelineno-26-539" name="__codelineno-26-539" href="#__codelineno-26-539"></a><span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;ğŸ’¾ Implementing caching strategies...&#39;</span><span class="p">);</span>
</span><span id="__span-26-540"><a id="__codelineno-26-540" name="__codelineno-26-540" href="#__codelineno-26-540"></a>
</span><span id="__span-26-541"><a id="__codelineno-26-541" name="__codelineno-26-541" href="#__codelineno-26-541"></a><span class="w">        </span><span class="c1">// Service Worker for caching</span>
</span><span id="__span-26-542"><a id="__codelineno-26-542" name="__codelineno-26-542" href="#__codelineno-26-542"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="s1">&#39;serviceWorker&#39;</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="nx">navigator</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-543"><a id="__codelineno-26-543" name="__codelineno-26-543" href="#__codelineno-26-543"></a><span class="w">            </span><span class="nx">navigator</span><span class="p">.</span><span class="nx">serviceWorker</span><span class="p">.</span><span class="nx">register</span><span class="p">(</span><span class="s1">&#39;/sw.js&#39;</span><span class="p">)</span>
</span><span id="__span-26-544"><a id="__codelineno-26-544" name="__codelineno-26-544" href="#__codelineno-26-544"></a><span class="w">                </span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">registration</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-545"><a id="__codelineno-26-545" name="__codelineno-26-545" href="#__codelineno-26-545"></a><span class="w">                    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;âœ… Service Worker registered&#39;</span><span class="p">);</span>
</span><span id="__span-26-546"><a id="__codelineno-26-546" name="__codelineno-26-546" href="#__codelineno-26-546"></a><span class="w">                </span><span class="p">})</span>
</span><span id="__span-26-547"><a id="__codelineno-26-547" name="__codelineno-26-547" href="#__codelineno-26-547"></a><span class="w">                </span><span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">error</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-548"><a id="__codelineno-26-548" name="__codelineno-26-548" href="#__codelineno-26-548"></a><span class="w">                    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;âŒ Service Worker registration failed:&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">error</span><span class="p">);</span>
</span><span id="__span-26-549"><a id="__codelineno-26-549" name="__codelineno-26-549" href="#__codelineno-26-549"></a><span class="w">                </span><span class="p">});</span>
</span><span id="__span-26-550"><a id="__codelineno-26-550" name="__codelineno-26-550" href="#__codelineno-26-550"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-26-551"><a id="__codelineno-26-551" name="__codelineno-26-551" href="#__codelineno-26-551"></a>
</span><span id="__span-26-552"><a id="__codelineno-26-552" name="__codelineno-26-552" href="#__codelineno-26-552"></a><span class="w">        </span><span class="c1">// Browser caching headers simulation</span>
</span><span id="__span-26-553"><a id="__codelineno-26-553" name="__codelineno-26-553" href="#__codelineno-26-553"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">optimizeCacheHeaders</span><span class="p">();</span>
</span><span id="__span-26-554"><a id="__codelineno-26-554" name="__codelineno-26-554" href="#__codelineno-26-554"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-26-555"><a id="__codelineno-26-555" name="__codelineno-26-555" href="#__codelineno-26-555"></a>
</span><span id="__span-26-556"><a id="__codelineno-26-556" name="__codelineno-26-556" href="#__codelineno-26-556"></a><span class="w">    </span><span class="nx">optimizeCacheHeaders</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-557"><a id="__codelineno-26-557" name="__codelineno-26-557" href="#__codelineno-26-557"></a><span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;ğŸ“‹ Cache optimization recommendations:&#39;</span><span class="p">);</span>
</span><span id="__span-26-558"><a id="__codelineno-26-558" name="__codelineno-26-558" href="#__codelineno-26-558"></a><span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;   â€¢ Static assets: Cache-Control: public, max-age=31536000 (1 year)&#39;</span><span class="p">);</span>
</span><span id="__span-26-559"><a id="__codelineno-26-559" name="__codelineno-26-559" href="#__codelineno-26-559"></a><span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;   â€¢ HTML pages: Cache-Control: public, max-age=3600 (1 hour)&#39;</span><span class="p">);</span>
</span><span id="__span-26-560"><a id="__codelineno-26-560" name="__codelineno-26-560" href="#__codelineno-26-560"></a><span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;   â€¢ API responses: Cache-Control: private, max-age=300 (5 minutes)&#39;</span><span class="p">);</span>
</span><span id="__span-26-561"><a id="__codelineno-26-561" name="__codelineno-26-561" href="#__codelineno-26-561"></a><span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;   â€¢ Images: Cache-Control: public, max-age=2592000 (30 days)&#39;</span><span class="p">);</span>
</span><span id="__span-26-562"><a id="__codelineno-26-562" name="__codelineno-26-562" href="#__codelineno-26-562"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-26-563"><a id="__codelineno-26-563" name="__codelineno-26-563" href="#__codelineno-26-563"></a><span class="p">}</span>
</span><span id="__span-26-564"><a id="__codelineno-26-564" name="__codelineno-26-564" href="#__codelineno-26-564"></a>
</span><span id="__span-26-565"><a id="__codelineno-26-565" name="__codelineno-26-565" href="#__codelineno-26-565"></a><span class="c1">// Service Worker template for advanced caching</span>
</span><span id="__span-26-566"><a id="__codelineno-26-566" name="__codelineno-26-566" href="#__codelineno-26-566"></a><span class="kd">const</span><span class="w"> </span><span class="nx">serviceWorkerTemplate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sb">`</span>
</span><span id="__span-26-567"><a id="__codelineno-26-567" name="__codelineno-26-567" href="#__codelineno-26-567"></a><span class="sb">// sw.js - Service Worker for performance optimization</span>
</span><span id="__span-26-568"><a id="__codelineno-26-568" name="__codelineno-26-568" href="#__codelineno-26-568"></a><span class="sb">const CACHE_NAME = &#39;perf-optimizer-v1&#39;;</span>
</span><span id="__span-26-569"><a id="__codelineno-26-569" name="__codelineno-26-569" href="#__codelineno-26-569"></a><span class="sb">const CRITICAL_RESOURCES = [</span>
</span><span id="__span-26-570"><a id="__codelineno-26-570" name="__codelineno-26-570" href="#__codelineno-26-570"></a><span class="sb">    &#39;/&#39;,</span>
</span><span id="__span-26-571"><a id="__codelineno-26-571" name="__codelineno-26-571" href="#__codelineno-26-571"></a><span class="sb">    &#39;/css/critical.css&#39;,</span>
</span><span id="__span-26-572"><a id="__codelineno-26-572" name="__codelineno-26-572" href="#__codelineno-26-572"></a><span class="sb">    &#39;/js/critical.js&#39;,</span>
</span><span id="__span-26-573"><a id="__codelineno-26-573" name="__codelineno-26-573" href="#__codelineno-26-573"></a><span class="sb">    &#39;/images/hero-image.webp&#39;</span>
</span><span id="__span-26-574"><a id="__codelineno-26-574" name="__codelineno-26-574" href="#__codelineno-26-574"></a><span class="sb">];</span>
</span><span id="__span-26-575"><a id="__codelineno-26-575" name="__codelineno-26-575" href="#__codelineno-26-575"></a>
</span><span id="__span-26-576"><a id="__codelineno-26-576" name="__codelineno-26-576" href="#__codelineno-26-576"></a><span class="sb">const NON_CRITICAL_RESOURCES = [</span>
</span><span id="__span-26-577"><a id="__codelineno-26-577" name="__codelineno-26-577" href="#__codelineno-26-577"></a><span class="sb">    &#39;/css/non-critical.css&#39;,</span>
</span><span id="__span-26-578"><a id="__codelineno-26-578" name="__codelineno-26-578" href="#__codelineno-26-578"></a><span class="sb">    &#39;/js/non-critical.js&#39;,</span>
</span><span id="__span-26-579"><a id="__codelineno-26-579" name="__codelineno-26-579" href="#__codelineno-26-579"></a><span class="sb">    &#39;/fonts/main-font.woff2&#39;</span>
</span><span id="__span-26-580"><a id="__codelineno-26-580" name="__codelineno-26-580" href="#__codelineno-26-580"></a><span class="sb">];</span>
</span><span id="__span-26-581"><a id="__codelineno-26-581" name="__codelineno-26-581" href="#__codelineno-26-581"></a>
</span><span id="__span-26-582"><a id="__codelineno-26-582" name="__codelineno-26-582" href="#__codelineno-26-582"></a><span class="sb">// Install event - cache critical resources</span>
</span><span id="__span-26-583"><a id="__codelineno-26-583" name="__codelineno-26-583" href="#__codelineno-26-583"></a><span class="sb">self.addEventListener(&#39;install&#39;, event =&gt; {</span>
</span><span id="__span-26-584"><a id="__codelineno-26-584" name="__codelineno-26-584" href="#__codelineno-26-584"></a><span class="sb">    event.waitUntil(</span>
</span><span id="__span-26-585"><a id="__codelineno-26-585" name="__codelineno-26-585" href="#__codelineno-26-585"></a><span class="sb">        caches.open(CACHE_NAME)</span>
</span><span id="__span-26-586"><a id="__codelineno-26-586" name="__codelineno-26-586" href="#__codelineno-26-586"></a><span class="sb">            .then(cache =&gt; cache.addAll(CRITICAL_RESOURCES))</span>
</span><span id="__span-26-587"><a id="__codelineno-26-587" name="__codelineno-26-587" href="#__codelineno-26-587"></a><span class="sb">            .then(() =&gt; self.skipWaiting())</span>
</span><span id="__span-26-588"><a id="__codelineno-26-588" name="__codelineno-26-588" href="#__codelineno-26-588"></a><span class="sb">    );</span>
</span><span id="__span-26-589"><a id="__codelineno-26-589" name="__codelineno-26-589" href="#__codelineno-26-589"></a><span class="sb">});</span>
</span><span id="__span-26-590"><a id="__codelineno-26-590" name="__codelineno-26-590" href="#__codelineno-26-590"></a>
</span><span id="__span-26-591"><a id="__codelineno-26-591" name="__codelineno-26-591" href="#__codelineno-26-591"></a><span class="sb">// Activate event - clean up old caches</span>
</span><span id="__span-26-592"><a id="__codelineno-26-592" name="__codelineno-26-592" href="#__codelineno-26-592"></a><span class="sb">self.addEventListener(&#39;activate&#39;, event =&gt; {</span>
</span><span id="__span-26-593"><a id="__codelineno-26-593" name="__codelineno-26-593" href="#__codelineno-26-593"></a><span class="sb">    event.waitUntil(</span>
</span><span id="__span-26-594"><a id="__codelineno-26-594" name="__codelineno-26-594" href="#__codelineno-26-594"></a><span class="sb">        caches.keys().then(cacheNames =&gt; {</span>
</span><span id="__span-26-595"><a id="__codelineno-26-595" name="__codelineno-26-595" href="#__codelineno-26-595"></a><span class="sb">            return Promise.all(</span>
</span><span id="__span-26-596"><a id="__codelineno-26-596" name="__codelineno-26-596" href="#__codelineno-26-596"></a><span class="sb">                cacheNames.map(cacheName =&gt; {</span>
</span><span id="__span-26-597"><a id="__codelineno-26-597" name="__codelineno-26-597" href="#__codelineno-26-597"></a><span class="sb">                    if (cacheName !== CACHE_NAME) {</span>
</span><span id="__span-26-598"><a id="__codelineno-26-598" name="__codelineno-26-598" href="#__codelineno-26-598"></a><span class="sb">                        return caches.delete(cacheName);</span>
</span><span id="__span-26-599"><a id="__codelineno-26-599" name="__codelineno-26-599" href="#__codelineno-26-599"></a><span class="sb">                    }</span>
</span><span id="__span-26-600"><a id="__codelineno-26-600" name="__codelineno-26-600" href="#__codelineno-26-600"></a><span class="sb">                })</span>
</span><span id="__span-26-601"><a id="__codelineno-26-601" name="__codelineno-26-601" href="#__codelineno-26-601"></a><span class="sb">            );</span>
</span><span id="__span-26-602"><a id="__codelineno-26-602" name="__codelineno-26-602" href="#__codelineno-26-602"></a><span class="sb">        }).then(() =&gt; self.clients.claim())</span>
</span><span id="__span-26-603"><a id="__codelineno-26-603" name="__codelineno-26-603" href="#__codelineno-26-603"></a><span class="sb">    );</span>
</span><span id="__span-26-604"><a id="__codelineno-26-604" name="__codelineno-26-604" href="#__codelineno-26-604"></a><span class="sb">});</span>
</span><span id="__span-26-605"><a id="__codelineno-26-605" name="__codelineno-26-605" href="#__codelineno-26-605"></a>
</span><span id="__span-26-606"><a id="__codelineno-26-606" name="__codelineno-26-606" href="#__codelineno-26-606"></a><span class="sb">// Fetch event - implement caching strategies</span>
</span><span id="__span-26-607"><a id="__codelineno-26-607" name="__codelineno-26-607" href="#__codelineno-26-607"></a><span class="sb">self.addEventListener(&#39;fetch&#39;, event =&gt; {</span>
</span><span id="__span-26-608"><a id="__codelineno-26-608" name="__codelineno-26-608" href="#__codelineno-26-608"></a><span class="sb">    const { request } = event;</span>
</span><span id="__span-26-609"><a id="__codelineno-26-609" name="__codelineno-26-609" href="#__codelineno-26-609"></a><span class="sb">    const url = new URL(request.url);</span>
</span><span id="__span-26-610"><a id="__codelineno-26-610" name="__codelineno-26-610" href="#__codelineno-26-610"></a>
</span><span id="__span-26-611"><a id="__codelineno-26-611" name="__codelineno-26-611" href="#__codelineno-26-611"></a><span class="sb">    // Different strategies for different resource types</span>
</span><span id="__span-26-612"><a id="__codelineno-26-612" name="__codelineno-26-612" href="#__codelineno-26-612"></a><span class="sb">    if (request.destination === &#39;image&#39;) {</span>
</span><span id="__span-26-613"><a id="__codelineno-26-613" name="__codelineno-26-613" href="#__codelineno-26-613"></a><span class="sb">        // Cache-first strategy for images</span>
</span><span id="__span-26-614"><a id="__codelineno-26-614" name="__codelineno-26-614" href="#__codelineno-26-614"></a><span class="sb">        event.respondWith(cacheFirst(request));</span>
</span><span id="__span-26-615"><a id="__codelineno-26-615" name="__codelineno-26-615" href="#__codelineno-26-615"></a><span class="sb">    } else if (url.pathname.startsWith(&#39;/api/&#39;)) {</span>
</span><span id="__span-26-616"><a id="__codelineno-26-616" name="__codelineno-26-616" href="#__codelineno-26-616"></a><span class="sb">        // Network-first strategy for API calls</span>
</span><span id="__span-26-617"><a id="__codelineno-26-617" name="__codelineno-26-617" href="#__codelineno-26-617"></a><span class="sb">        event.respondWith(networkFirst(request));</span>
</span><span id="__span-26-618"><a id="__codelineno-26-618" name="__codelineno-26-618" href="#__codelineno-26-618"></a><span class="sb">    } else if (request.destination === &#39;document&#39;) {</span>
</span><span id="__span-26-619"><a id="__codelineno-26-619" name="__codelineno-26-619" href="#__codelineno-26-619"></a><span class="sb">        // Stale-while-revalidate for HTML pages</span>
</span><span id="__span-26-620"><a id="__codelineno-26-620" name="__codelineno-26-620" href="#__codelineno-26-620"></a><span class="sb">        event.respondWith(staleWhileRevalidate(request));</span>
</span><span id="__span-26-621"><a id="__codelineno-26-621" name="__codelineno-26-621" href="#__codelineno-26-621"></a><span class="sb">    } else {</span>
</span><span id="__span-26-622"><a id="__codelineno-26-622" name="__codelineno-26-622" href="#__codelineno-26-622"></a><span class="sb">        // Default cache-first strategy</span>
</span><span id="__span-26-623"><a id="__codelineno-26-623" name="__codelineno-26-623" href="#__codelineno-26-623"></a><span class="sb">        event.respondWith(cacheFirst(request));</span>
</span><span id="__span-26-624"><a id="__codelineno-26-624" name="__codelineno-26-624" href="#__codelineno-26-624"></a><span class="sb">    }</span>
</span><span id="__span-26-625"><a id="__codelineno-26-625" name="__codelineno-26-625" href="#__codelineno-26-625"></a><span class="sb">});</span>
</span><span id="__span-26-626"><a id="__codelineno-26-626" name="__codelineno-26-626" href="#__codelineno-26-626"></a>
</span><span id="__span-26-627"><a id="__codelineno-26-627" name="__codelineno-26-627" href="#__codelineno-26-627"></a><span class="sb">// Cache-first strategy</span>
</span><span id="__span-26-628"><a id="__codelineno-26-628" name="__codelineno-26-628" href="#__codelineno-26-628"></a><span class="sb">async function cacheFirst(request) {</span>
</span><span id="__span-26-629"><a id="__codelineno-26-629" name="__codelineno-26-629" href="#__codelineno-26-629"></a><span class="sb">    const cachedResponse = await caches.match(request);</span>
</span><span id="__span-26-630"><a id="__codelineno-26-630" name="__codelineno-26-630" href="#__codelineno-26-630"></a><span class="sb">    if (cachedResponse) {</span>
</span><span id="__span-26-631"><a id="__codelineno-26-631" name="__codelineno-26-631" href="#__codelineno-26-631"></a><span class="sb">        return cachedResponse;</span>
</span><span id="__span-26-632"><a id="__codelineno-26-632" name="__codelineno-26-632" href="#__codelineno-26-632"></a><span class="sb">    }</span>
</span><span id="__span-26-633"><a id="__codelineno-26-633" name="__codelineno-26-633" href="#__codelineno-26-633"></a>
</span><span id="__span-26-634"><a id="__codelineno-26-634" name="__codelineno-26-634" href="#__codelineno-26-634"></a><span class="sb">    try {</span>
</span><span id="__span-26-635"><a id="__codelineno-26-635" name="__codelineno-26-635" href="#__codelineno-26-635"></a><span class="sb">        const networkResponse = await fetch(request);</span>
</span><span id="__span-26-636"><a id="__codelineno-26-636" name="__codelineno-26-636" href="#__codelineno-26-636"></a><span class="sb">        const cache = await caches.open(CACHE_NAME);</span>
</span><span id="__span-26-637"><a id="__codelineno-26-637" name="__codelineno-26-637" href="#__codelineno-26-637"></a><span class="sb">        cache.put(request, networkResponse.clone());</span>
</span><span id="__span-26-638"><a id="__codelineno-26-638" name="__codelineno-26-638" href="#__codelineno-26-638"></a><span class="sb">        return networkResponse;</span>
</span><span id="__span-26-639"><a id="__codelineno-26-639" name="__codelineno-26-639" href="#__codelineno-26-639"></a><span class="sb">    } catch (error) {</span>
</span><span id="__span-26-640"><a id="__codelineno-26-640" name="__codelineno-26-640" href="#__codelineno-26-640"></a><span class="sb">        // Return offline fallback if available</span>
</span><span id="__span-26-641"><a id="__codelineno-26-641" name="__codelineno-26-641" href="#__codelineno-26-641"></a><span class="sb">        return caches.match(&#39;/offline.html&#39;);</span>
</span><span id="__span-26-642"><a id="__codelineno-26-642" name="__codelineno-26-642" href="#__codelineno-26-642"></a><span class="sb">    }</span>
</span><span id="__span-26-643"><a id="__codelineno-26-643" name="__codelineno-26-643" href="#__codelineno-26-643"></a><span class="sb">}</span>
</span><span id="__span-26-644"><a id="__codelineno-26-644" name="__codelineno-26-644" href="#__codelineno-26-644"></a>
</span><span id="__span-26-645"><a id="__codelineno-26-645" name="__codelineno-26-645" href="#__codelineno-26-645"></a><span class="sb">// Network-first strategy</span>
</span><span id="__span-26-646"><a id="__codelineno-26-646" name="__codelineno-26-646" href="#__codelineno-26-646"></a><span class="sb">async function networkFirst(request) {</span>
</span><span id="__span-26-647"><a id="__codelineno-26-647" name="__codelineno-26-647" href="#__codelineno-26-647"></a><span class="sb">    try {</span>
</span><span id="__span-26-648"><a id="__codelineno-26-648" name="__codelineno-26-648" href="#__codelineno-26-648"></a><span class="sb">        const networkResponse = await fetch(request);</span>
</span><span id="__span-26-649"><a id="__codelineno-26-649" name="__codelineno-26-649" href="#__codelineno-26-649"></a><span class="sb">        const cache = await caches.open(CACHE_NAME);</span>
</span><span id="__span-26-650"><a id="__codelineno-26-650" name="__codelineno-26-650" href="#__codelineno-26-650"></a><span class="sb">        cache.put(request, networkResponse.clone());</span>
</span><span id="__span-26-651"><a id="__codelineno-26-651" name="__codelineno-26-651" href="#__codelineno-26-651"></a><span class="sb">        return networkResponse;</span>
</span><span id="__span-26-652"><a id="__codelineno-26-652" name="__codelineno-26-652" href="#__codelineno-26-652"></a><span class="sb">    } catch (error) {</span>
</span><span id="__span-26-653"><a id="__codelineno-26-653" name="__codelineno-26-653" href="#__codelineno-26-653"></a><span class="sb">        const cachedResponse = await caches.match(request);</span>
</span><span id="__span-26-654"><a id="__codelineno-26-654" name="__codelineno-26-654" href="#__codelineno-26-654"></a><span class="sb">        return cachedResponse || new Response(&#39;Offline&#39;, { status: 503 });</span>
</span><span id="__span-26-655"><a id="__codelineno-26-655" name="__codelineno-26-655" href="#__codelineno-26-655"></a><span class="sb">    }</span>
</span><span id="__span-26-656"><a id="__codelineno-26-656" name="__codelineno-26-656" href="#__codelineno-26-656"></a><span class="sb">}</span>
</span><span id="__span-26-657"><a id="__codelineno-26-657" name="__codelineno-26-657" href="#__codelineno-26-657"></a>
</span><span id="__span-26-658"><a id="__codelineno-26-658" name="__codelineno-26-658" href="#__codelineno-26-658"></a><span class="sb">// Stale-while-revalidate strategy</span>
</span><span id="__span-26-659"><a id="__codelineno-26-659" name="__codelineno-26-659" href="#__codelineno-26-659"></a><span class="sb">async function staleWhileRevalidate(request) {</span>
</span><span id="__span-26-660"><a id="__codelineno-26-660" name="__codelineno-26-660" href="#__codelineno-26-660"></a><span class="sb">    const cachedResponse = await caches.match(request);</span>
</span><span id="__span-26-661"><a id="__codelineno-26-661" name="__codelineno-26-661" href="#__codelineno-26-661"></a>
</span><span id="__span-26-662"><a id="__codelineno-26-662" name="__codelineno-26-662" href="#__codelineno-26-662"></a><span class="sb">    const fetchPromise = fetch(request).then(networkResponse =&gt; {</span>
</span><span id="__span-26-663"><a id="__codelineno-26-663" name="__codelineno-26-663" href="#__codelineno-26-663"></a><span class="sb">        const cache = caches.open(CACHE_NAME);</span>
</span><span id="__span-26-664"><a id="__codelineno-26-664" name="__codelineno-26-664" href="#__codelineno-26-664"></a><span class="sb">        cache.then(c =&gt; c.put(request, networkResponse.clone()));</span>
</span><span id="__span-26-665"><a id="__codelineno-26-665" name="__codelineno-26-665" href="#__codelineno-26-665"></a><span class="sb">        return networkResponse;</span>
</span><span id="__span-26-666"><a id="__codelineno-26-666" name="__codelineno-26-666" href="#__codelineno-26-666"></a><span class="sb">    });</span>
</span><span id="__span-26-667"><a id="__codelineno-26-667" name="__codelineno-26-667" href="#__codelineno-26-667"></a>
</span><span id="__span-26-668"><a id="__codelineno-26-668" name="__codelineno-26-668" href="#__codelineno-26-668"></a><span class="sb">    return cachedResponse || fetchPromise;</span>
</span><span id="__span-26-669"><a id="__codelineno-26-669" name="__codelineno-26-669" href="#__codelineno-26-669"></a><span class="sb">}</span>
</span><span id="__span-26-670"><a id="__codelineno-26-670" name="__codelineno-26-670" href="#__codelineno-26-670"></a><span class="sb">`</span><span class="p">;</span>
</span><span id="__span-26-671"><a id="__codelineno-26-671" name="__codelineno-26-671" href="#__codelineno-26-671"></a>
</span><span id="__span-26-672"><a id="__codelineno-26-672" name="__codelineno-26-672" href="#__codelineno-26-672"></a><span class="c1">// Demonstration function</span>
</span><span id="__span-26-673"><a id="__codelineno-26-673" name="__codelineno-26-673" href="#__codelineno-26-673"></a><span class="kd">function</span><span class="w"> </span><span class="nx">demonstratePerformanceOptimization</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-674"><a id="__codelineno-26-674" name="__codelineno-26-674" href="#__codelineno-26-674"></a><span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;ğŸš€ PERFORMANCE OPTIMIZATION DEMONSTRATION&#39;</span><span class="p">);</span>
</span><span id="__span-26-675"><a id="__codelineno-26-675" name="__codelineno-26-675" href="#__codelineno-26-675"></a><span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;=&#39;</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mf">50</span><span class="p">);</span>
</span><span id="__span-26-676"><a id="__codelineno-26-676" name="__codelineno-26-676" href="#__codelineno-26-676"></a>
</span><span id="__span-26-677"><a id="__codelineno-26-677" name="__codelineno-26-677" href="#__codelineno-26-677"></a><span class="w">    </span><span class="c1">// Initialize performance optimizer</span>
</span><span id="__span-26-678"><a id="__codelineno-26-678" name="__codelineno-26-678" href="#__codelineno-26-678"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">optimizer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">WebPerformanceOptimizer</span><span class="p">();</span>
</span><span id="__span-26-679"><a id="__codelineno-26-679" name="__codelineno-26-679" href="#__codelineno-26-679"></a>
</span><span id="__span-26-680"><a id="__codelineno-26-680" name="__codelineno-26-680" href="#__codelineno-26-680"></a><span class="w">    </span><span class="c1">// Simulate some performance data</span>
</span><span id="__span-26-681"><a id="__codelineno-26-681" name="__codelineno-26-681" href="#__codelineno-26-681"></a><span class="w">    </span><span class="nx">setTimeout</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-682"><a id="__codelineno-26-682" name="__codelineno-26-682" href="#__codelineno-26-682"></a><span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;\\nğŸ“Š Generating Performance Report...&#39;</span><span class="p">);</span>
</span><span id="__span-26-683"><a id="__codelineno-26-683" name="__codelineno-26-683" href="#__codelineno-26-683"></a><span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">report</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">optimizer</span><span class="p">.</span><span class="nx">generatePerformanceReport</span><span class="p">();</span>
</span><span id="__span-26-684"><a id="__codelineno-26-684" name="__codelineno-26-684" href="#__codelineno-26-684"></a>
</span><span id="__span-26-685"><a id="__codelineno-26-685" name="__codelineno-26-685" href="#__codelineno-26-685"></a><span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;\\nğŸ”§ Running Optimizations...&#39;</span><span class="p">);</span>
</span><span id="__span-26-686"><a id="__codelineno-26-686" name="__codelineno-26-686" href="#__codelineno-26-686"></a><span class="w">        </span><span class="nx">optimizer</span><span class="p">.</span><span class="nx">optimizeImages</span><span class="p">();</span>
</span><span id="__span-26-687"><a id="__codelineno-26-687" name="__codelineno-26-687" href="#__codelineno-26-687"></a><span class="w">        </span><span class="nx">optimizer</span><span class="p">.</span><span class="nx">optimizeScripts</span><span class="p">();</span>
</span><span id="__span-26-688"><a id="__codelineno-26-688" name="__codelineno-26-688" href="#__codelineno-26-688"></a><span class="w">        </span><span class="nx">optimizer</span><span class="p">.</span><span class="nx">optimizeCSS</span><span class="p">();</span>
</span><span id="__span-26-689"><a id="__codelineno-26-689" name="__codelineno-26-689" href="#__codelineno-26-689"></a><span class="w">        </span><span class="nx">optimizer</span><span class="p">.</span><span class="nx">implementCaching</span><span class="p">();</span>
</span><span id="__span-26-690"><a id="__codelineno-26-690" name="__codelineno-26-690" href="#__codelineno-26-690"></a>
</span><span id="__span-26-691"><a id="__codelineno-26-691" name="__codelineno-26-691" href="#__codelineno-26-691"></a><span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;\\nâœ… Performance Optimization Complete!&#39;</span><span class="p">);</span>
</span><span id="__span-26-692"><a id="__codelineno-26-692" name="__codelineno-26-692" href="#__codelineno-26-692"></a><span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;\\nğŸ’¡ KEY OPTIMIZATION STRATEGIES:&#39;</span><span class="p">);</span>
</span><span id="__span-26-693"><a id="__codelineno-26-693" name="__codelineno-26-693" href="#__codelineno-26-693"></a><span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;1. Core Web Vitals monitoring (LCP, FID, CLS)&#39;</span><span class="p">);</span>
</span><span id="__span-26-694"><a id="__codelineno-26-694" name="__codelineno-26-694" href="#__codelineno-26-694"></a><span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;2. Resource loading optimization&#39;</span><span class="p">);</span>
</span><span id="__span-26-695"><a id="__codelineno-26-695" name="__codelineno-26-695" href="#__codelineno-26-695"></a><span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;3. Image lazy loading and WebP support&#39;</span><span class="p">);</span>
</span><span id="__span-26-696"><a id="__codelineno-26-696" name="__codelineno-26-696" href="#__codelineno-26-696"></a><span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;4. Script prioritization and async loading&#39;</span><span class="p">);</span>
</span><span id="__span-26-697"><a id="__codelineno-26-697" name="__codelineno-26-697" href="#__codelineno-26-697"></a><span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;5. Critical CSS extraction and inlining&#39;</span><span class="p">);</span>
</span><span id="__span-26-698"><a id="__codelineno-26-698" name="__codelineno-26-698" href="#__codelineno-26-698"></a><span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;6. Service Worker caching strategies&#39;</span><span class="p">);</span>
</span><span id="__span-26-699"><a id="__codelineno-26-699" name="__codelineno-26-699" href="#__codelineno-26-699"></a><span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;7. Network condition adaptation&#39;</span><span class="p">);</span>
</span><span id="__span-26-700"><a id="__codelineno-26-700" name="__codelineno-26-700" href="#__codelineno-26-700"></a><span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;8. Real-time performance monitoring&#39;</span><span class="p">);</span>
</span><span id="__span-26-701"><a id="__codelineno-26-701" name="__codelineno-26-701" href="#__codelineno-26-701"></a>
</span><span id="__span-26-702"><a id="__codelineno-26-702" name="__codelineno-26-702" href="#__codelineno-26-702"></a><span class="w">    </span><span class="p">},</span><span class="w"> </span><span class="mf">1000</span><span class="p">);</span>
</span><span id="__span-26-703"><a id="__codelineno-26-703" name="__codelineno-26-703" href="#__codelineno-26-703"></a><span class="p">}</span>
</span><span id="__span-26-704"><a id="__codelineno-26-704" name="__codelineno-26-704" href="#__codelineno-26-704"></a>
</span><span id="__span-26-705"><a id="__codelineno-26-705" name="__codelineno-26-705" href="#__codelineno-26-705"></a><span class="c1">// Run the demonstration</span>
</span><span id="__span-26-706"><a id="__codelineno-26-706" name="__codelineno-26-706" href="#__codelineno-26-706"></a><span class="nx">demonstratePerformanceOptimization</span><span class="p">();</span>
</span></code></pre></div>
</details>
<p><strong>âš¡ Performance Optimization Checklist:</strong></p>
<p><strong>Images &amp; Media:</strong></p>
<ul>
<li>âœ… Use WebP format with fallbacks</li>
<li>âœ… Implement lazy loading</li>
<li>âœ… Add responsive images with srcset</li>
<li>âœ… Compress images (aim for &lt;100KB)</li>
<li>âœ… Use CDN for media delivery</li>
</ul>
<p><strong>JavaScript:</strong></p>
<ul>
<li>âœ… Code splitting and tree shaking</li>
<li>âœ… Async/defer for non-critical scripts</li>
<li>âœ… Minify and compress JS files</li>
<li>âœ… Remove unused dependencies</li>
<li>âœ… Use modern ES modules</li>
</ul>
<p><strong>CSS:</strong></p>
<ul>
<li>âœ… Extract and inline critical CSS</li>
<li>âœ… Defer non-critical stylesheets</li>
<li>âœ… Minify CSS files</li>
<li>âœ… Remove unused CSS</li>
<li>âœ… Use CSS containment</li>
</ul>
<p><strong>Caching:</strong></p>
<ul>
<li>âœ… Implement service workers</li>
<li>âœ… Set appropriate cache headers</li>
<li>âœ… Use browser caching strategies</li>
<li>âœ… Implement CDN caching</li>
<li>âœ… Database query caching</li>
</ul>
<p><strong>Network:</strong></p>
<ul>
<li>âœ… Enable GZIP/Brotli compression</li>
<li>âœ… Use HTTP/2 or HTTP/3</li>
<li>âœ… Minimize HTTP requests</li>
<li>âœ… Implement resource hints</li>
<li>âœ… Use CDN for global delivery</li>
</ul>
<h3 id="back-end-processes-the-engine-room-of-the-web">Back-End Processes: The Engine Room of the Web ğŸ”§âš™ï¸<a class="headerlink" href="#back-end-processes-the-engine-room-of-the-web" title="Permanent link">&para;</a></h3>
<p>While users see the beautiful frontend, the real magic happens behind the scenes in the backend. Think of it as the engine room of a cruise shipâ€”passengers don't see it, but without it, nothing works. Backend processes handle data storage, business logic, security, and all the complex operations that make modern web applications possible.</p>
<details class="example">
<summary>Complete Backend System with Flask and Advanced Features</summary>
<div class="language-python highlight"><pre><span></span><code><span id="__span-27-1"><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a><span class="c1"># Complete Backend System with Flask and Advanced Features</span>
</span><span id="__span-27-2"><a id="__codelineno-27-2" name="__codelineno-27-2" href="#__codelineno-27-2"></a><span class="kn">import</span><span class="w"> </span><span class="nn">sqlite3</span>
</span><span id="__span-27-3"><a id="__codelineno-27-3" name="__codelineno-27-3" href="#__codelineno-27-3"></a><span class="kn">import</span><span class="w"> </span><span class="nn">json</span>
</span><span id="__span-27-4"><a id="__codelineno-27-4" name="__codelineno-27-4" href="#__codelineno-27-4"></a><span class="kn">import</span><span class="w"> </span><span class="nn">hashlib</span>
</span><span id="__span-27-5"><a id="__codelineno-27-5" name="__codelineno-27-5" href="#__codelineno-27-5"></a><span class="kn">import</span><span class="w"> </span><span class="nn">jwt</span>
</span><span id="__span-27-6"><a id="__codelineno-27-6" name="__codelineno-27-6" href="#__codelineno-27-6"></a><span class="kn">import</span><span class="w"> </span><span class="nn">functools</span>
</span><span id="__span-27-7"><a id="__codelineno-27-7" name="__codelineno-27-7" href="#__codelineno-27-7"></a><span class="kn">import</span><span class="w"> </span><span class="nn">threading</span>
</span><span id="__span-27-8"><a id="__codelineno-27-8" name="__codelineno-27-8" href="#__codelineno-27-8"></a><span class="kn">import</span><span class="w"> </span><span class="nn">time</span>
</span><span id="__span-27-9"><a id="__codelineno-27-9" name="__codelineno-27-9" href="#__codelineno-27-9"></a><span class="kn">from</span><span class="w"> </span><span class="nn">datetime</span><span class="w"> </span><span class="kn">import</span> <span class="n">datetime</span><span class="p">,</span> <span class="n">timedelta</span>
</span><span id="__span-27-10"><a id="__codelineno-27-10" name="__codelineno-27-10" href="#__codelineno-27-10"></a><span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">List</span><span class="p">,</span> <span class="n">Any</span><span class="p">,</span> <span class="n">Optional</span>
</span><span id="__span-27-11"><a id="__codelineno-27-11" name="__codelineno-27-11" href="#__codelineno-27-11"></a><span class="kn">from</span><span class="w"> </span><span class="nn">dataclasses</span><span class="w"> </span><span class="kn">import</span> <span class="n">dataclass</span><span class="p">,</span> <span class="n">asdict</span>
</span><span id="__span-27-12"><a id="__codelineno-27-12" name="__codelineno-27-12" href="#__codelineno-27-12"></a><span class="kn">from</span><span class="w"> </span><span class="nn">contextlib</span><span class="w"> </span><span class="kn">import</span> <span class="n">contextmanager</span>
</span><span id="__span-27-13"><a id="__codelineno-27-13" name="__codelineno-27-13" href="#__codelineno-27-13"></a><span class="kn">import</span><span class="w"> </span><span class="nn">logging</span>
</span><span id="__span-27-14"><a id="__codelineno-27-14" name="__codelineno-27-14" href="#__codelineno-27-14"></a>
</span><span id="__span-27-15"><a id="__codelineno-27-15" name="__codelineno-27-15" href="#__codelineno-27-15"></a><span class="c1"># Configure logging</span>
</span><span id="__span-27-16"><a id="__codelineno-27-16" name="__codelineno-27-16" href="#__codelineno-27-16"></a><span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">INFO</span><span class="p">)</span>
</span><span id="__span-27-17"><a id="__codelineno-27-17" name="__codelineno-27-17" href="#__codelineno-27-17"></a><span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
</span><span id="__span-27-18"><a id="__codelineno-27-18" name="__codelineno-27-18" href="#__codelineno-27-18"></a>
</span><span id="__span-27-19"><a id="__codelineno-27-19" name="__codelineno-27-19" href="#__codelineno-27-19"></a><span class="nd">@dataclass</span>
</span><span id="__span-27-20"><a id="__codelineno-27-20" name="__codelineno-27-20" href="#__codelineno-27-20"></a><span class="k">class</span><span class="w"> </span><span class="nc">User</span><span class="p">:</span>
</span><span id="__span-27-21"><a id="__codelineno-27-21" name="__codelineno-27-21" href="#__codelineno-27-21"></a>    <span class="nb">id</span><span class="p">:</span> <span class="nb">int</span>
</span><span id="__span-27-22"><a id="__codelineno-27-22" name="__codelineno-27-22" href="#__codelineno-27-22"></a>    <span class="n">username</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="__span-27-23"><a id="__codelineno-27-23" name="__codelineno-27-23" href="#__codelineno-27-23"></a>    <span class="n">email</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="__span-27-24"><a id="__codelineno-27-24" name="__codelineno-27-24" href="#__codelineno-27-24"></a>    <span class="n">password_hash</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="__span-27-25"><a id="__codelineno-27-25" name="__codelineno-27-25" href="#__codelineno-27-25"></a>    <span class="n">role</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;user&#39;</span>
</span><span id="__span-27-26"><a id="__codelineno-27-26" name="__codelineno-27-26" href="#__codelineno-27-26"></a>    <span class="n">created_at</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="__span-27-27"><a id="__codelineno-27-27" name="__codelineno-27-27" href="#__codelineno-27-27"></a>    <span class="n">last_login</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="__span-27-28"><a id="__codelineno-27-28" name="__codelineno-27-28" href="#__codelineno-27-28"></a>    <span class="n">is_active</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="__span-27-29"><a id="__codelineno-27-29" name="__codelineno-27-29" href="#__codelineno-27-29"></a>
</span><span id="__span-27-30"><a id="__codelineno-27-30" name="__codelineno-27-30" href="#__codelineno-27-30"></a><span class="nd">@dataclass</span>
</span><span id="__span-27-31"><a id="__codelineno-27-31" name="__codelineno-27-31" href="#__codelineno-27-31"></a><span class="k">class</span><span class="w"> </span><span class="nc">Product</span><span class="p">:</span>
</span><span id="__span-27-32"><a id="__codelineno-27-32" name="__codelineno-27-32" href="#__codelineno-27-32"></a>    <span class="nb">id</span><span class="p">:</span> <span class="nb">int</span>
</span><span id="__span-27-33"><a id="__codelineno-27-33" name="__codelineno-27-33" href="#__codelineno-27-33"></a>    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="__span-27-34"><a id="__codelineno-27-34" name="__codelineno-27-34" href="#__codelineno-27-34"></a>    <span class="n">description</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="__span-27-35"><a id="__codelineno-27-35" name="__codelineno-27-35" href="#__codelineno-27-35"></a>    <span class="n">price</span><span class="p">:</span> <span class="nb">float</span>
</span><span id="__span-27-36"><a id="__codelineno-27-36" name="__codelineno-27-36" href="#__codelineno-27-36"></a>    <span class="n">category_id</span><span class="p">:</span> <span class="nb">int</span>
</span><span id="__span-27-37"><a id="__codelineno-27-37" name="__codelineno-27-37" href="#__codelineno-27-37"></a>    <span class="n">stock_quantity</span><span class="p">:</span> <span class="nb">int</span>
</span><span id="__span-27-38"><a id="__codelineno-27-38" name="__codelineno-27-38" href="#__codelineno-27-38"></a>    <span class="n">created_at</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="__span-27-39"><a id="__codelineno-27-39" name="__codelineno-27-39" href="#__codelineno-27-39"></a>    <span class="n">is_active</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="__span-27-40"><a id="__codelineno-27-40" name="__codelineno-27-40" href="#__codelineno-27-40"></a>
</span><span id="__span-27-41"><a id="__codelineno-27-41" name="__codelineno-27-41" href="#__codelineno-27-41"></a><span class="nd">@dataclass</span>
</span><span id="__span-27-42"><a id="__codelineno-27-42" name="__codelineno-27-42" href="#__codelineno-27-42"></a><span class="k">class</span><span class="w"> </span><span class="nc">Order</span><span class="p">:</span>
</span><span id="__span-27-43"><a id="__codelineno-27-43" name="__codelineno-27-43" href="#__codelineno-27-43"></a>    <span class="nb">id</span><span class="p">:</span> <span class="nb">int</span>
</span><span id="__span-27-44"><a id="__codelineno-27-44" name="__codelineno-27-44" href="#__codelineno-27-44"></a>    <span class="n">user_id</span><span class="p">:</span> <span class="nb">int</span>
</span><span id="__span-27-45"><a id="__codelineno-27-45" name="__codelineno-27-45" href="#__codelineno-27-45"></a>    <span class="n">total_amount</span><span class="p">:</span> <span class="nb">float</span>
</span><span id="__span-27-46"><a id="__codelineno-27-46" name="__codelineno-27-46" href="#__codelineno-27-46"></a>    <span class="n">status</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;pending&#39;</span>
</span><span id="__span-27-47"><a id="__codelineno-27-47" name="__codelineno-27-47" href="#__codelineno-27-47"></a>    <span class="n">created_at</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="__span-27-48"><a id="__codelineno-27-48" name="__codelineno-27-48" href="#__codelineno-27-48"></a>    <span class="n">items</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="__span-27-49"><a id="__codelineno-27-49" name="__codelineno-27-49" href="#__codelineno-27-49"></a>
</span><span id="__span-27-50"><a id="__codelineno-27-50" name="__codelineno-27-50" href="#__codelineno-27-50"></a><span class="k">class</span><span class="w"> </span><span class="nc">DatabaseManager</span><span class="p">:</span>
</span><span id="__span-27-51"><a id="__codelineno-27-51" name="__codelineno-27-51" href="#__codelineno-27-51"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Advanced database management with connection pooling and transactions&quot;&quot;&quot;</span>
</span><span id="__span-27-52"><a id="__codelineno-27-52" name="__codelineno-27-52" href="#__codelineno-27-52"></a>
</span><span id="__span-27-53"><a id="__codelineno-27-53" name="__codelineno-27-53" href="#__codelineno-27-53"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">db_path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;advanced_app.db&#39;</span><span class="p">,</span> <span class="n">pool_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">5</span><span class="p">):</span>
</span><span id="__span-27-54"><a id="__codelineno-27-54" name="__codelineno-27-54" href="#__codelineno-27-54"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">db_path</span> <span class="o">=</span> <span class="n">db_path</span>
</span><span id="__span-27-55"><a id="__codelineno-27-55" name="__codelineno-27-55" href="#__codelineno-27-55"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">pool_size</span> <span class="o">=</span> <span class="n">pool_size</span>
</span><span id="__span-27-56"><a id="__codelineno-27-56" name="__codelineno-27-56" href="#__codelineno-27-56"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">connection_pool</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="__span-27-57"><a id="__codelineno-27-57" name="__codelineno-27-57" href="#__codelineno-27-57"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">pool_lock</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Lock</span><span class="p">()</span>
</span><span id="__span-27-58"><a id="__codelineno-27-58" name="__codelineno-27-58" href="#__codelineno-27-58"></a>
</span><span id="__span-27-59"><a id="__codelineno-27-59" name="__codelineno-27-59" href="#__codelineno-27-59"></a>        <span class="c1"># Initialize database and connection pool</span>
</span><span id="__span-27-60"><a id="__codelineno-27-60" name="__codelineno-27-60" href="#__codelineno-27-60"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">init_database</span><span class="p">()</span>
</span><span id="__span-27-61"><a id="__codelineno-27-61" name="__codelineno-27-61" href="#__codelineno-27-61"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">init_connection_pool</span><span class="p">()</span>
</span><span id="__span-27-62"><a id="__codelineno-27-62" name="__codelineno-27-62" href="#__codelineno-27-62"></a>
</span><span id="__span-27-63"><a id="__codelineno-27-63" name="__codelineno-27-63" href="#__codelineno-27-63"></a>        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;âœ… Database manager initialized with pool size: </span><span class="si">{</span><span class="n">pool_size</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-27-64"><a id="__codelineno-27-64" name="__codelineno-27-64" href="#__codelineno-27-64"></a>
</span><span id="__span-27-65"><a id="__codelineno-27-65" name="__codelineno-27-65" href="#__codelineno-27-65"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">init_database</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-27-66"><a id="__codelineno-27-66" name="__codelineno-27-66" href="#__codelineno-27-66"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize database with complete schema&quot;&quot;&quot;</span>
</span><span id="__span-27-67"><a id="__codelineno-27-67" name="__codelineno-27-67" href="#__codelineno-27-67"></a>        <span class="k">with</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">db_path</span><span class="p">)</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
</span><span id="__span-27-68"><a id="__codelineno-27-68" name="__codelineno-27-68" href="#__codelineno-27-68"></a>            <span class="n">cursor</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
</span><span id="__span-27-69"><a id="__codelineno-27-69" name="__codelineno-27-69" href="#__codelineno-27-69"></a>
</span><span id="__span-27-70"><a id="__codelineno-27-70" name="__codelineno-27-70" href="#__codelineno-27-70"></a>            <span class="c1"># Users table</span>
</span><span id="__span-27-71"><a id="__codelineno-27-71" name="__codelineno-27-71" href="#__codelineno-27-71"></a>            <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
</span><span id="__span-27-72"><a id="__codelineno-27-72" name="__codelineno-27-72" href="#__codelineno-27-72"></a><span class="s1">                CREATE TABLE IF NOT EXISTS users (</span>
</span><span id="__span-27-73"><a id="__codelineno-27-73" name="__codelineno-27-73" href="#__codelineno-27-73"></a><span class="s1">                    id INTEGER PRIMARY KEY AUTOINCREMENT,</span>
</span><span id="__span-27-74"><a id="__codelineno-27-74" name="__codelineno-27-74" href="#__codelineno-27-74"></a><span class="s1">                    username TEXT UNIQUE NOT NULL,</span>
</span><span id="__span-27-75"><a id="__codelineno-27-75" name="__codelineno-27-75" href="#__codelineno-27-75"></a><span class="s1">                    email TEXT UNIQUE NOT NULL,</span>
</span><span id="__span-27-76"><a id="__codelineno-27-76" name="__codelineno-27-76" href="#__codelineno-27-76"></a><span class="s1">                    password_hash TEXT NOT NULL,</span>
</span><span id="__span-27-77"><a id="__codelineno-27-77" name="__codelineno-27-77" href="#__codelineno-27-77"></a><span class="s1">                    role TEXT DEFAULT &#39;user&#39;,</span>
</span><span id="__span-27-78"><a id="__codelineno-27-78" name="__codelineno-27-78" href="#__codelineno-27-78"></a><span class="s1">                    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,</span>
</span><span id="__span-27-79"><a id="__codelineno-27-79" name="__codelineno-27-79" href="#__codelineno-27-79"></a><span class="s1">                    last_login TIMESTAMP,</span>
</span><span id="__span-27-80"><a id="__codelineno-27-80" name="__codelineno-27-80" href="#__codelineno-27-80"></a><span class="s1">                    is_active BOOLEAN DEFAULT 1</span>
</span><span id="__span-27-81"><a id="__codelineno-27-81" name="__codelineno-27-81" href="#__codelineno-27-81"></a><span class="s1">                )</span>
</span><span id="__span-27-82"><a id="__codelineno-27-82" name="__codelineno-27-82" href="#__codelineno-27-82"></a><span class="s1">            &#39;&#39;&#39;</span><span class="p">)</span>
</span><span id="__span-27-83"><a id="__codelineno-27-83" name="__codelineno-27-83" href="#__codelineno-27-83"></a>
</span><span id="__span-27-84"><a id="__codelineno-27-84" name="__codelineno-27-84" href="#__codelineno-27-84"></a>            <span class="c1"># Categories table</span>
</span><span id="__span-27-85"><a id="__codelineno-27-85" name="__codelineno-27-85" href="#__codelineno-27-85"></a>            <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
</span><span id="__span-27-86"><a id="__codelineno-27-86" name="__codelineno-27-86" href="#__codelineno-27-86"></a><span class="s1">                CREATE TABLE IF NOT EXISTS categories (</span>
</span><span id="__span-27-87"><a id="__codelineno-27-87" name="__codelineno-27-87" href="#__codelineno-27-87"></a><span class="s1">                    id INTEGER PRIMARY KEY AUTOINCREMENT,</span>
</span><span id="__span-27-88"><a id="__codelineno-27-88" name="__codelineno-27-88" href="#__codelineno-27-88"></a><span class="s1">                    name TEXT NOT NULL,</span>
</span><span id="__span-27-89"><a id="__codelineno-27-89" name="__codelineno-27-89" href="#__codelineno-27-89"></a><span class="s1">                    description TEXT,</span>
</span><span id="__span-27-90"><a id="__codelineno-27-90" name="__codelineno-27-90" href="#__codelineno-27-90"></a><span class="s1">                    parent_id INTEGER,</span>
</span><span id="__span-27-91"><a id="__codelineno-27-91" name="__codelineno-27-91" href="#__codelineno-27-91"></a><span class="s1">                    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,</span>
</span><span id="__span-27-92"><a id="__codelineno-27-92" name="__codelineno-27-92" href="#__codelineno-27-92"></a><span class="s1">                    FOREIGN KEY (parent_id) REFERENCES categories (id)</span>
</span><span id="__span-27-93"><a id="__codelineno-27-93" name="__codelineno-27-93" href="#__codelineno-27-93"></a><span class="s1">                )</span>
</span><span id="__span-27-94"><a id="__codelineno-27-94" name="__codelineno-27-94" href="#__codelineno-27-94"></a><span class="s1">            &#39;&#39;&#39;</span><span class="p">)</span>
</span><span id="__span-27-95"><a id="__codelineno-27-95" name="__codelineno-27-95" href="#__codelineno-27-95"></a>
</span><span id="__span-27-96"><a id="__codelineno-27-96" name="__codelineno-27-96" href="#__codelineno-27-96"></a>            <span class="c1"># Products table</span>
</span><span id="__span-27-97"><a id="__codelineno-27-97" name="__codelineno-27-97" href="#__codelineno-27-97"></a>            <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
</span><span id="__span-27-98"><a id="__codelineno-27-98" name="__codelineno-27-98" href="#__codelineno-27-98"></a><span class="s1">                CREATE TABLE IF NOT EXISTS products (</span>
</span><span id="__span-27-99"><a id="__codelineno-27-99" name="__codelineno-27-99" href="#__codelineno-27-99"></a><span class="s1">                    id INTEGER PRIMARY KEY AUTOINCREMENT,</span>
</span><span id="__span-27-100"><a id="__codelineno-27-100" name="__codelineno-27-100" href="#__codelineno-27-100"></a><span class="s1">                    name TEXT NOT NULL,</span>
</span><span id="__span-27-101"><a id="__codelineno-27-101" name="__codelineno-27-101" href="#__codelineno-27-101"></a><span class="s1">                    description TEXT,</span>
</span><span id="__span-27-102"><a id="__codelineno-27-102" name="__codelineno-27-102" href="#__codelineno-27-102"></a><span class="s1">                    price DECIMAL(10, 2) NOT NULL,</span>
</span><span id="__span-27-103"><a id="__codelineno-27-103" name="__codelineno-27-103" href="#__codelineno-27-103"></a><span class="s1">                    category_id INTEGER,</span>
</span><span id="__span-27-104"><a id="__codelineno-27-104" name="__codelineno-27-104" href="#__codelineno-27-104"></a><span class="s1">                    stock_quantity INTEGER DEFAULT 0,</span>
</span><span id="__span-27-105"><a id="__codelineno-27-105" name="__codelineno-27-105" href="#__codelineno-27-105"></a><span class="s1">                    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,</span>
</span><span id="__span-27-106"><a id="__codelineno-27-106" name="__codelineno-27-106" href="#__codelineno-27-106"></a><span class="s1">                    is_active BOOLEAN DEFAULT 1,</span>
</span><span id="__span-27-107"><a id="__codelineno-27-107" name="__codelineno-27-107" href="#__codelineno-27-107"></a><span class="s1">                    FOREIGN KEY (category_id) REFERENCES categories (id)</span>
</span><span id="__span-27-108"><a id="__codelineno-27-108" name="__codelineno-27-108" href="#__codelineno-27-108"></a><span class="s1">                )</span>
</span><span id="__span-27-109"><a id="__codelineno-27-109" name="__codelineno-27-109" href="#__codelineno-27-109"></a><span class="s1">            &#39;&#39;&#39;</span><span class="p">)</span>
</span><span id="__span-27-110"><a id="__codelineno-27-110" name="__codelineno-27-110" href="#__codelineno-27-110"></a>
</span><span id="__span-27-111"><a id="__codelineno-27-111" name="__codelineno-27-111" href="#__codelineno-27-111"></a>            <span class="c1"># Orders table</span>
</span><span id="__span-27-112"><a id="__codelineno-27-112" name="__codelineno-27-112" href="#__codelineno-27-112"></a>            <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
</span><span id="__span-27-113"><a id="__codelineno-27-113" name="__codelineno-27-113" href="#__codelineno-27-113"></a><span class="s1">                CREATE TABLE IF NOT EXISTS orders (</span>
</span><span id="__span-27-114"><a id="__codelineno-27-114" name="__codelineno-27-114" href="#__codelineno-27-114"></a><span class="s1">                    id INTEGER PRIMARY KEY AUTOINCREMENT,</span>
</span><span id="__span-27-115"><a id="__codelineno-27-115" name="__codelineno-27-115" href="#__codelineno-27-115"></a><span class="s1">                    user_id INTEGER NOT NULL,</span>
</span><span id="__span-27-116"><a id="__codelineno-27-116" name="__codelineno-27-116" href="#__codelineno-27-116"></a><span class="s1">                    total_amount DECIMAL(10, 2) NOT NULL,</span>
</span><span id="__span-27-117"><a id="__codelineno-27-117" name="__codelineno-27-117" href="#__codelineno-27-117"></a><span class="s1">                    status TEXT DEFAULT &#39;pending&#39;,</span>
</span><span id="__span-27-118"><a id="__codelineno-27-118" name="__codelineno-27-118" href="#__codelineno-27-118"></a><span class="s1">                    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,</span>
</span><span id="__span-27-119"><a id="__codelineno-27-119" name="__codelineno-27-119" href="#__codelineno-27-119"></a><span class="s1">                    FOREIGN KEY (user_id) REFERENCES users (id)</span>
</span><span id="__span-27-120"><a id="__codelineno-27-120" name="__codelineno-27-120" href="#__codelineno-27-120"></a><span class="s1">                )</span>
</span><span id="__span-27-121"><a id="__codelineno-27-121" name="__codelineno-27-121" href="#__codelineno-27-121"></a><span class="s1">            &#39;&#39;&#39;</span><span class="p">)</span>
</span><span id="__span-27-122"><a id="__codelineno-27-122" name="__codelineno-27-122" href="#__codelineno-27-122"></a>
</span><span id="__span-27-123"><a id="__codelineno-27-123" name="__codelineno-27-123" href="#__codelineno-27-123"></a>            <span class="c1"># Order items table</span>
</span><span id="__span-27-124"><a id="__codelineno-27-124" name="__codelineno-27-124" href="#__codelineno-27-124"></a>            <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
</span><span id="__span-27-125"><a id="__codelineno-27-125" name="__codelineno-27-125" href="#__codelineno-27-125"></a><span class="s1">                CREATE TABLE IF NOT EXISTS order_items (</span>
</span><span id="__span-27-126"><a id="__codelineno-27-126" name="__codelineno-27-126" href="#__codelineno-27-126"></a><span class="s1">                    id INTEGER PRIMARY KEY AUTOINCREMENT,</span>
</span><span id="__span-27-127"><a id="__codelineno-27-127" name="__codelineno-27-127" href="#__codelineno-27-127"></a><span class="s1">                    order_id INTEGER NOT NULL,</span>
</span><span id="__span-27-128"><a id="__codelineno-27-128" name="__codelineno-27-128" href="#__codelineno-27-128"></a><span class="s1">                    product_id INTEGER NOT NULL,</span>
</span><span id="__span-27-129"><a id="__codelineno-27-129" name="__codelineno-27-129" href="#__codelineno-27-129"></a><span class="s1">                    quantity INTEGER NOT NULL,</span>
</span><span id="__span-27-130"><a id="__codelineno-27-130" name="__codelineno-27-130" href="#__codelineno-27-130"></a><span class="s1">                    price DECIMAL(10, 2) NOT NULL,</span>
</span><span id="__span-27-131"><a id="__codelineno-27-131" name="__codelineno-27-131" href="#__codelineno-27-131"></a><span class="s1">                    FOREIGN KEY (order_id) REFERENCES orders (id),</span>
</span><span id="__span-27-132"><a id="__codelineno-27-132" name="__codelineno-27-132" href="#__codelineno-27-132"></a><span class="s1">                    FOREIGN KEY (product_id) REFERENCES products (id)</span>
</span><span id="__span-27-133"><a id="__codelineno-27-133" name="__codelineno-27-133" href="#__codelineno-27-133"></a><span class="s1">                )</span>
</span><span id="__span-27-134"><a id="__codelineno-27-134" name="__codelineno-27-134" href="#__codelineno-27-134"></a><span class="s1">            &#39;&#39;&#39;</span><span class="p">)</span>
</span><span id="__span-27-135"><a id="__codelineno-27-135" name="__codelineno-27-135" href="#__codelineno-27-135"></a>
</span><span id="__span-27-136"><a id="__codelineno-27-136" name="__codelineno-27-136" href="#__codelineno-27-136"></a>            <span class="c1"># Sessions table for user sessions</span>
</span><span id="__span-27-137"><a id="__codelineno-27-137" name="__codelineno-27-137" href="#__codelineno-27-137"></a>            <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
</span><span id="__span-27-138"><a id="__codelineno-27-138" name="__codelineno-27-138" href="#__codelineno-27-138"></a><span class="s1">                CREATE TABLE IF NOT EXISTS sessions (</span>
</span><span id="__span-27-139"><a id="__codelineno-27-139" name="__codelineno-27-139" href="#__codelineno-27-139"></a><span class="s1">                    id TEXT PRIMARY KEY,</span>
</span><span id="__span-27-140"><a id="__codelineno-27-140" name="__codelineno-27-140" href="#__codelineno-27-140"></a><span class="s1">                    user_id INTEGER NOT NULL,</span>
</span><span id="__span-27-141"><a id="__codelineno-27-141" name="__codelineno-27-141" href="#__codelineno-27-141"></a><span class="s1">                    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,</span>
</span><span id="__span-27-142"><a id="__codelineno-27-142" name="__codelineno-27-142" href="#__codelineno-27-142"></a><span class="s1">                    expires_at TIMESTAMP NOT NULL,</span>
</span><span id="__span-27-143"><a id="__codelineno-27-143" name="__codelineno-27-143" href="#__codelineno-27-143"></a><span class="s1">                    is_active BOOLEAN DEFAULT 1,</span>
</span><span id="__span-27-144"><a id="__codelineno-27-144" name="__codelineno-27-144" href="#__codelineno-27-144"></a><span class="s1">                    FOREIGN KEY (user_id) REFERENCES users (id)</span>
</span><span id="__span-27-145"><a id="__codelineno-27-145" name="__codelineno-27-145" href="#__codelineno-27-145"></a><span class="s1">                )</span>
</span><span id="__span-27-146"><a id="__codelineno-27-146" name="__codelineno-27-146" href="#__codelineno-27-146"></a><span class="s1">            &#39;&#39;&#39;</span><span class="p">)</span>
</span><span id="__span-27-147"><a id="__codelineno-27-147" name="__codelineno-27-147" href="#__codelineno-27-147"></a>
</span><span id="__span-27-148"><a id="__codelineno-27-148" name="__codelineno-27-148" href="#__codelineno-27-148"></a>            <span class="c1"># API logs table</span>
</span><span id="__span-27-149"><a id="__codelineno-27-149" name="__codelineno-27-149" href="#__codelineno-27-149"></a>            <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
</span><span id="__span-27-150"><a id="__codelineno-27-150" name="__codelineno-27-150" href="#__codelineno-27-150"></a><span class="s1">                CREATE TABLE IF NOT EXISTS api_logs (</span>
</span><span id="__span-27-151"><a id="__codelineno-27-151" name="__codelineno-27-151" href="#__codelineno-27-151"></a><span class="s1">                    id INTEGER PRIMARY KEY AUTOINCREMENT,</span>
</span><span id="__span-27-152"><a id="__codelineno-27-152" name="__codelineno-27-152" href="#__codelineno-27-152"></a><span class="s1">                    endpoint TEXT NOT NULL,</span>
</span><span id="__span-27-153"><a id="__codelineno-27-153" name="__codelineno-27-153" href="#__codelineno-27-153"></a><span class="s1">                    method TEXT NOT NULL,</span>
</span><span id="__span-27-154"><a id="__codelineno-27-154" name="__codelineno-27-154" href="#__codelineno-27-154"></a><span class="s1">                    user_id INTEGER,</span>
</span><span id="__span-27-155"><a id="__codelineno-27-155" name="__codelineno-27-155" href="#__codelineno-27-155"></a><span class="s1">                    ip_address TEXT,</span>
</span><span id="__span-27-156"><a id="__codelineno-27-156" name="__codelineno-27-156" href="#__codelineno-27-156"></a><span class="s1">                    response_code INTEGER,</span>
</span><span id="__span-27-157"><a id="__codelineno-27-157" name="__codelineno-27-157" href="#__codelineno-27-157"></a><span class="s1">                    response_time REAL,</span>
</span><span id="__span-27-158"><a id="__codelineno-27-158" name="__codelineno-27-158" href="#__codelineno-27-158"></a><span class="s1">                    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,</span>
</span><span id="__span-27-159"><a id="__codelineno-27-159" name="__codelineno-27-159" href="#__codelineno-27-159"></a><span class="s1">                    FOREIGN KEY (user_id) REFERENCES users (id)</span>
</span><span id="__span-27-160"><a id="__codelineno-27-160" name="__codelineno-27-160" href="#__codelineno-27-160"></a><span class="s1">                )</span>
</span><span id="__span-27-161"><a id="__codelineno-27-161" name="__codelineno-27-161" href="#__codelineno-27-161"></a><span class="s1">            &#39;&#39;&#39;</span><span class="p">)</span>
</span><span id="__span-27-162"><a id="__codelineno-27-162" name="__codelineno-27-162" href="#__codelineno-27-162"></a>
</span><span id="__span-27-163"><a id="__codelineno-27-163" name="__codelineno-27-163" href="#__codelineno-27-163"></a>            <span class="c1"># Insert sample data</span>
</span><span id="__span-27-164"><a id="__codelineno-27-164" name="__codelineno-27-164" href="#__codelineno-27-164"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">insert_sample_data</span><span class="p">(</span><span class="n">cursor</span><span class="p">)</span>
</span><span id="__span-27-165"><a id="__codelineno-27-165" name="__codelineno-27-165" href="#__codelineno-27-165"></a>
</span><span id="__span-27-166"><a id="__codelineno-27-166" name="__codelineno-27-166" href="#__codelineno-27-166"></a>            <span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
</span><span id="__span-27-167"><a id="__codelineno-27-167" name="__codelineno-27-167" href="#__codelineno-27-167"></a>            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;ğŸ“Š Database schema created and sample data inserted&quot;</span><span class="p">)</span>
</span><span id="__span-27-168"><a id="__codelineno-27-168" name="__codelineno-27-168" href="#__codelineno-27-168"></a>
</span><span id="__span-27-169"><a id="__codelineno-27-169" name="__codelineno-27-169" href="#__codelineno-27-169"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">insert_sample_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cursor</span><span class="p">):</span>
</span><span id="__span-27-170"><a id="__codelineno-27-170" name="__codelineno-27-170" href="#__codelineno-27-170"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Insert sample data for demonstration&quot;&quot;&quot;</span>
</span><span id="__span-27-171"><a id="__codelineno-27-171" name="__codelineno-27-171" href="#__codelineno-27-171"></a>
</span><span id="__span-27-172"><a id="__codelineno-27-172" name="__codelineno-27-172" href="#__codelineno-27-172"></a>        <span class="c1"># Sample categories</span>
</span><span id="__span-27-173"><a id="__codelineno-27-173" name="__codelineno-27-173" href="#__codelineno-27-173"></a>        <span class="n">categories</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="__span-27-174"><a id="__codelineno-27-174" name="__codelineno-27-174" href="#__codelineno-27-174"></a>            <span class="p">(</span><span class="s1">&#39;Electronics&#39;</span><span class="p">,</span> <span class="s1">&#39;Electronic devices and accessories&#39;</span><span class="p">),</span>
</span><span id="__span-27-175"><a id="__codelineno-27-175" name="__codelineno-27-175" href="#__codelineno-27-175"></a>            <span class="p">(</span><span class="s1">&#39;Books&#39;</span><span class="p">,</span> <span class="s1">&#39;Books and educational materials&#39;</span><span class="p">),</span>
</span><span id="__span-27-176"><a id="__codelineno-27-176" name="__codelineno-27-176" href="#__codelineno-27-176"></a>            <span class="p">(</span><span class="s1">&#39;Clothing&#39;</span><span class="p">,</span> <span class="s1">&#39;Apparel and fashion items&#39;</span><span class="p">),</span>
</span><span id="__span-27-177"><a id="__codelineno-27-177" name="__codelineno-27-177" href="#__codelineno-27-177"></a>            <span class="p">(</span><span class="s1">&#39;Home &amp; Garden&#39;</span><span class="p">,</span> <span class="s1">&#39;Home improvement and gardening supplies&#39;</span><span class="p">)</span>
</span><span id="__span-27-178"><a id="__codelineno-27-178" name="__codelineno-27-178" href="#__codelineno-27-178"></a>        <span class="p">]</span>
</span><span id="__span-27-179"><a id="__codelineno-27-179" name="__codelineno-27-179" href="#__codelineno-27-179"></a>
</span><span id="__span-27-180"><a id="__codelineno-27-180" name="__codelineno-27-180" href="#__codelineno-27-180"></a>        <span class="n">cursor</span><span class="o">.</span><span class="n">executemany</span><span class="p">(</span>
</span><span id="__span-27-181"><a id="__codelineno-27-181" name="__codelineno-27-181" href="#__codelineno-27-181"></a>            <span class="s1">&#39;INSERT OR IGNORE INTO categories (name, description) VALUES (?, ?)&#39;</span><span class="p">,</span>
</span><span id="__span-27-182"><a id="__codelineno-27-182" name="__codelineno-27-182" href="#__codelineno-27-182"></a>            <span class="n">categories</span>
</span><span id="__span-27-183"><a id="__codelineno-27-183" name="__codelineno-27-183" href="#__codelineno-27-183"></a>        <span class="p">)</span>
</span><span id="__span-27-184"><a id="__codelineno-27-184" name="__codelineno-27-184" href="#__codelineno-27-184"></a>
</span><span id="__span-27-185"><a id="__codelineno-27-185" name="__codelineno-27-185" href="#__codelineno-27-185"></a>        <span class="c1"># Sample products</span>
</span><span id="__span-27-186"><a id="__codelineno-27-186" name="__codelineno-27-186" href="#__codelineno-27-186"></a>        <span class="n">products</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="__span-27-187"><a id="__codelineno-27-187" name="__codelineno-27-187" href="#__codelineno-27-187"></a>            <span class="p">(</span><span class="s1">&#39;Laptop Pro 15&quot;&#39;</span><span class="p">,</span> <span class="s1">&#39;High-performance laptop for professionals&#39;</span><span class="p">,</span> <span class="mf">1299.99</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">50</span><span class="p">),</span>
</span><span id="__span-27-188"><a id="__codelineno-27-188" name="__codelineno-27-188" href="#__codelineno-27-188"></a>            <span class="p">(</span><span class="s1">&#39;Wireless Headphones&#39;</span><span class="p">,</span> <span class="s1">&#39;Premium noise-canceling headphones&#39;</span><span class="p">,</span> <span class="mf">299.99</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">100</span><span class="p">),</span>
</span><span id="__span-27-189"><a id="__codelineno-27-189" name="__codelineno-27-189" href="#__codelineno-27-189"></a>            <span class="p">(</span><span class="s1">&#39;Python Programming Guide&#39;</span><span class="p">,</span> <span class="s1">&#39;Complete guide to Python development&#39;</span><span class="p">,</span> <span class="mf">49.99</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">200</span><span class="p">),</span>
</span><span id="__span-27-190"><a id="__codelineno-27-190" name="__codelineno-27-190" href="#__codelineno-27-190"></a>            <span class="p">(</span><span class="s1">&#39;JavaScript Essentials&#39;</span><span class="p">,</span> <span class="s1">&#39;Modern JavaScript for web developers&#39;</span><span class="p">,</span> <span class="mf">39.99</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">150</span><span class="p">),</span>
</span><span id="__span-27-191"><a id="__codelineno-27-191" name="__codelineno-27-191" href="#__codelineno-27-191"></a>            <span class="p">(</span><span class="s1">&#39;Designer T-Shirt&#39;</span><span class="p">,</span> <span class="s1">&#39;Premium cotton designer t-shirt&#39;</span><span class="p">,</span> <span class="mf">29.99</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">75</span><span class="p">),</span>
</span><span id="__span-27-192"><a id="__codelineno-27-192" name="__codelineno-27-192" href="#__codelineno-27-192"></a>            <span class="p">(</span><span class="s1">&#39;Smart Home Hub&#39;</span><span class="p">,</span> <span class="s1">&#39;Connect and control your smart devices&#39;</span><span class="p">,</span> <span class="mf">199.99</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">30</span><span class="p">)</span>
</span><span id="__span-27-193"><a id="__codelineno-27-193" name="__codelineno-27-193" href="#__codelineno-27-193"></a>        <span class="p">]</span>
</span><span id="__span-27-194"><a id="__codelineno-27-194" name="__codelineno-27-194" href="#__codelineno-27-194"></a>
</span><span id="__span-27-195"><a id="__codelineno-27-195" name="__codelineno-27-195" href="#__codelineno-27-195"></a>        <span class="n">cursor</span><span class="o">.</span><span class="n">executemany</span><span class="p">(</span>
</span><span id="__span-27-196"><a id="__codelineno-27-196" name="__codelineno-27-196" href="#__codelineno-27-196"></a>            <span class="s1">&#39;INSERT OR IGNORE INTO products (name, description, price, category_id, stock_quantity) VALUES (?, ?, ?, ?, ?)&#39;</span><span class="p">,</span>
</span><span id="__span-27-197"><a id="__codelineno-27-197" name="__codelineno-27-197" href="#__codelineno-27-197"></a>            <span class="n">products</span>
</span><span id="__span-27-198"><a id="__codelineno-27-198" name="__codelineno-27-198" href="#__codelineno-27-198"></a>        <span class="p">)</span>
</span><span id="__span-27-199"><a id="__codelineno-27-199" name="__codelineno-27-199" href="#__codelineno-27-199"></a>
</span><span id="__span-27-200"><a id="__codelineno-27-200" name="__codelineno-27-200" href="#__codelineno-27-200"></a>        <span class="c1"># Sample admin user</span>
</span><span id="__span-27-201"><a id="__codelineno-27-201" name="__codelineno-27-201" href="#__codelineno-27-201"></a>        <span class="n">admin_password</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">hash_password</span><span class="p">(</span><span class="s1">&#39;admin123&#39;</span><span class="p">)</span>
</span><span id="__span-27-202"><a id="__codelineno-27-202" name="__codelineno-27-202" href="#__codelineno-27-202"></a>        <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
</span><span id="__span-27-203"><a id="__codelineno-27-203" name="__codelineno-27-203" href="#__codelineno-27-203"></a>            <span class="s1">&#39;INSERT OR IGNORE INTO users (username, email, password_hash, role) VALUES (?, ?, ?, ?)&#39;</span><span class="p">,</span>
</span><span id="__span-27-204"><a id="__codelineno-27-204" name="__codelineno-27-204" href="#__codelineno-27-204"></a>            <span class="p">(</span><span class="s1">&#39;admin&#39;</span><span class="p">,</span> <span class="s1">&#39;admin@example.com&#39;</span><span class="p">,</span> <span class="n">admin_password</span><span class="p">,</span> <span class="s1">&#39;admin&#39;</span><span class="p">)</span>
</span><span id="__span-27-205"><a id="__codelineno-27-205" name="__codelineno-27-205" href="#__codelineno-27-205"></a>        <span class="p">)</span>
</span><span id="__span-27-206"><a id="__codelineno-27-206" name="__codelineno-27-206" href="#__codelineno-27-206"></a>
</span><span id="__span-27-207"><a id="__codelineno-27-207" name="__codelineno-27-207" href="#__codelineno-27-207"></a>        <span class="c1"># Sample regular user</span>
</span><span id="__span-27-208"><a id="__codelineno-27-208" name="__codelineno-27-208" href="#__codelineno-27-208"></a>        <span class="n">user_password</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">hash_password</span><span class="p">(</span><span class="s1">&#39;user123&#39;</span><span class="p">)</span>
</span><span id="__span-27-209"><a id="__codelineno-27-209" name="__codelineno-27-209" href="#__codelineno-27-209"></a>        <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
</span><span id="__span-27-210"><a id="__codelineno-27-210" name="__codelineno-27-210" href="#__codelineno-27-210"></a>            <span class="s1">&#39;INSERT OR IGNORE INTO users (username, email, password_hash, role) VALUES (?, ?, ?, ?)&#39;</span><span class="p">,</span>
</span><span id="__span-27-211"><a id="__codelineno-27-211" name="__codelineno-27-211" href="#__codelineno-27-211"></a>            <span class="p">(</span><span class="s1">&#39;john_doe&#39;</span><span class="p">,</span> <span class="s1">&#39;john@example.com&#39;</span><span class="p">,</span> <span class="n">user_password</span><span class="p">,</span> <span class="s1">&#39;user&#39;</span><span class="p">)</span>
</span><span id="__span-27-212"><a id="__codelineno-27-212" name="__codelineno-27-212" href="#__codelineno-27-212"></a>        <span class="p">)</span>
</span><span id="__span-27-213"><a id="__codelineno-27-213" name="__codelineno-27-213" href="#__codelineno-27-213"></a>
</span><span id="__span-27-214"><a id="__codelineno-27-214" name="__codelineno-27-214" href="#__codelineno-27-214"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">hash_password</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">password</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="__span-27-215"><a id="__codelineno-27-215" name="__codelineno-27-215" href="#__codelineno-27-215"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Hash password using SHA-256 (in production, use bcrypt)&quot;&quot;&quot;</span>
</span><span id="__span-27-216"><a id="__codelineno-27-216" name="__codelineno-27-216" href="#__codelineno-27-216"></a>        <span class="k">return</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">(</span><span class="n">password</span><span class="o">.</span><span class="n">encode</span><span class="p">())</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">()</span>
</span><span id="__span-27-217"><a id="__codelineno-27-217" name="__codelineno-27-217" href="#__codelineno-27-217"></a>
</span><span id="__span-27-218"><a id="__codelineno-27-218" name="__codelineno-27-218" href="#__codelineno-27-218"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">init_connection_pool</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-27-219"><a id="__codelineno-27-219" name="__codelineno-27-219" href="#__codelineno-27-219"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize connection pool&quot;&quot;&quot;</span>
</span><span id="__span-27-220"><a id="__codelineno-27-220" name="__codelineno-27-220" href="#__codelineno-27-220"></a>        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">pool_lock</span><span class="p">:</span>
</span><span id="__span-27-221"><a id="__codelineno-27-221" name="__codelineno-27-221" href="#__codelineno-27-221"></a>            <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pool_size</span><span class="p">):</span>
</span><span id="__span-27-222"><a id="__codelineno-27-222" name="__codelineno-27-222" href="#__codelineno-27-222"></a>                <span class="n">conn</span> <span class="o">=</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">db_path</span><span class="p">,</span> <span class="n">check_same_thread</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="__span-27-223"><a id="__codelineno-27-223" name="__codelineno-27-223" href="#__codelineno-27-223"></a>                <span class="n">conn</span><span class="o">.</span><span class="n">row_factory</span> <span class="o">=</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">Row</span>  <span class="c1"># Enable dict-like access</span>
</span><span id="__span-27-224"><a id="__codelineno-27-224" name="__codelineno-27-224" href="#__codelineno-27-224"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">connection_pool</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">conn</span><span class="p">)</span>
</span><span id="__span-27-225"><a id="__codelineno-27-225" name="__codelineno-27-225" href="#__codelineno-27-225"></a>
</span><span id="__span-27-226"><a id="__codelineno-27-226" name="__codelineno-27-226" href="#__codelineno-27-226"></a>    <span class="nd">@contextmanager</span>
</span><span id="__span-27-227"><a id="__codelineno-27-227" name="__codelineno-27-227" href="#__codelineno-27-227"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_connection</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-27-228"><a id="__codelineno-27-228" name="__codelineno-27-228" href="#__codelineno-27-228"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get connection from pool with context manager&quot;&quot;&quot;</span>
</span><span id="__span-27-229"><a id="__codelineno-27-229" name="__codelineno-27-229" href="#__codelineno-27-229"></a>        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">pool_lock</span><span class="p">:</span>
</span><span id="__span-27-230"><a id="__codelineno-27-230" name="__codelineno-27-230" href="#__codelineno-27-230"></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">connection_pool</span><span class="p">:</span>
</span><span id="__span-27-231"><a id="__codelineno-27-231" name="__codelineno-27-231" href="#__codelineno-27-231"></a>                <span class="n">conn</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">connection_pool</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
</span><span id="__span-27-232"><a id="__codelineno-27-232" name="__codelineno-27-232" href="#__codelineno-27-232"></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="__span-27-233"><a id="__codelineno-27-233" name="__codelineno-27-233" href="#__codelineno-27-233"></a>                <span class="c1"># Create new connection if pool is empty</span>
</span><span id="__span-27-234"><a id="__codelineno-27-234" name="__codelineno-27-234" href="#__codelineno-27-234"></a>                <span class="n">conn</span> <span class="o">=</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">db_path</span><span class="p">,</span> <span class="n">check_same_thread</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="__span-27-235"><a id="__codelineno-27-235" name="__codelineno-27-235" href="#__codelineno-27-235"></a>                <span class="n">conn</span><span class="o">.</span><span class="n">row_factory</span> <span class="o">=</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">Row</span>
</span><span id="__span-27-236"><a id="__codelineno-27-236" name="__codelineno-27-236" href="#__codelineno-27-236"></a>
</span><span id="__span-27-237"><a id="__codelineno-27-237" name="__codelineno-27-237" href="#__codelineno-27-237"></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="__span-27-238"><a id="__codelineno-27-238" name="__codelineno-27-238" href="#__codelineno-27-238"></a>            <span class="k">yield</span> <span class="n">conn</span>
</span><span id="__span-27-239"><a id="__codelineno-27-239" name="__codelineno-27-239" href="#__codelineno-27-239"></a>        <span class="k">finally</span><span class="p">:</span>
</span><span id="__span-27-240"><a id="__codelineno-27-240" name="__codelineno-27-240" href="#__codelineno-27-240"></a>            <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">pool_lock</span><span class="p">:</span>
</span><span id="__span-27-241"><a id="__codelineno-27-241" name="__codelineno-27-241" href="#__codelineno-27-241"></a>                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">connection_pool</span><span class="p">)</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">pool_size</span><span class="p">:</span>
</span><span id="__span-27-242"><a id="__codelineno-27-242" name="__codelineno-27-242" href="#__codelineno-27-242"></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">connection_pool</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">conn</span><span class="p">)</span>
</span><span id="__span-27-243"><a id="__codelineno-27-243" name="__codelineno-27-243" href="#__codelineno-27-243"></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="__span-27-244"><a id="__codelineno-27-244" name="__codelineno-27-244" href="#__codelineno-27-244"></a>                    <span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span id="__span-27-245"><a id="__codelineno-27-245" name="__codelineno-27-245" href="#__codelineno-27-245"></a>
</span><span id="__span-27-246"><a id="__codelineno-27-246" name="__codelineno-27-246" href="#__codelineno-27-246"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">execute_query</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">query</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">params</span><span class="p">:</span> <span class="nb">tuple</span> <span class="o">=</span> <span class="p">(),</span> <span class="n">fetch_all</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">fetch_one</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
</span><span id="__span-27-247"><a id="__codelineno-27-247" name="__codelineno-27-247" href="#__codelineno-27-247"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Execute database query with error handling&quot;&quot;&quot;</span>
</span><span id="__span-27-248"><a id="__codelineno-27-248" name="__codelineno-27-248" href="#__codelineno-27-248"></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="__span-27-249"><a id="__codelineno-27-249" name="__codelineno-27-249" href="#__codelineno-27-249"></a>            <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_connection</span><span class="p">()</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
</span><span id="__span-27-250"><a id="__codelineno-27-250" name="__codelineno-27-250" href="#__codelineno-27-250"></a>                <span class="n">cursor</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
</span><span id="__span-27-251"><a id="__codelineno-27-251" name="__codelineno-27-251" href="#__codelineno-27-251"></a>                <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="n">params</span><span class="p">)</span>
</span><span id="__span-27-252"><a id="__codelineno-27-252" name="__codelineno-27-252" href="#__codelineno-27-252"></a>
</span><span id="__span-27-253"><a id="__codelineno-27-253" name="__codelineno-27-253" href="#__codelineno-27-253"></a>                <span class="k">if</span> <span class="n">fetch_all</span><span class="p">:</span>
</span><span id="__span-27-254"><a id="__codelineno-27-254" name="__codelineno-27-254" href="#__codelineno-27-254"></a>                    <span class="k">return</span> <span class="p">[</span><span class="nb">dict</span><span class="p">(</span><span class="n">row</span><span class="p">)</span> <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()]</span>
</span><span id="__span-27-255"><a id="__codelineno-27-255" name="__codelineno-27-255" href="#__codelineno-27-255"></a>                <span class="k">elif</span> <span class="n">fetch_one</span><span class="p">:</span>
</span><span id="__span-27-256"><a id="__codelineno-27-256" name="__codelineno-27-256" href="#__codelineno-27-256"></a>                    <span class="n">row</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchone</span><span class="p">()</span>
</span><span id="__span-27-257"><a id="__codelineno-27-257" name="__codelineno-27-257" href="#__codelineno-27-257"></a>                    <span class="k">return</span> <span class="nb">dict</span><span class="p">(</span><span class="n">row</span><span class="p">)</span> <span class="k">if</span> <span class="n">row</span> <span class="k">else</span> <span class="kc">None</span>
</span><span id="__span-27-258"><a id="__codelineno-27-258" name="__codelineno-27-258" href="#__codelineno-27-258"></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="__span-27-259"><a id="__codelineno-27-259" name="__codelineno-27-259" href="#__codelineno-27-259"></a>                    <span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
</span><span id="__span-27-260"><a id="__codelineno-27-260" name="__codelineno-27-260" href="#__codelineno-27-260"></a>                    <span class="k">return</span> <span class="n">cursor</span><span class="o">.</span><span class="n">lastrowid</span>
</span><span id="__span-27-261"><a id="__codelineno-27-261" name="__codelineno-27-261" href="#__codelineno-27-261"></a>
</span><span id="__span-27-262"><a id="__codelineno-27-262" name="__codelineno-27-262" href="#__codelineno-27-262"></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="__span-27-263"><a id="__codelineno-27-263" name="__codelineno-27-263" href="#__codelineno-27-263"></a>            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Database query failed: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-27-264"><a id="__codelineno-27-264" name="__codelineno-27-264" href="#__codelineno-27-264"></a>            <span class="k">raise</span>
</span><span id="__span-27-265"><a id="__codelineno-27-265" name="__codelineno-27-265" href="#__codelineno-27-265"></a>
</span><span id="__span-27-266"><a id="__codelineno-27-266" name="__codelineno-27-266" href="#__codelineno-27-266"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">execute_transaction</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">operations</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">tuple</span><span class="p">]):</span>
</span><span id="__span-27-267"><a id="__codelineno-27-267" name="__codelineno-27-267" href="#__codelineno-27-267"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Execute multiple operations in a transaction&quot;&quot;&quot;</span>
</span><span id="__span-27-268"><a id="__codelineno-27-268" name="__codelineno-27-268" href="#__codelineno-27-268"></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="__span-27-269"><a id="__codelineno-27-269" name="__codelineno-27-269" href="#__codelineno-27-269"></a>            <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_connection</span><span class="p">()</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
</span><span id="__span-27-270"><a id="__codelineno-27-270" name="__codelineno-27-270" href="#__codelineno-27-270"></a>                <span class="n">cursor</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
</span><span id="__span-27-271"><a id="__codelineno-27-271" name="__codelineno-27-271" href="#__codelineno-27-271"></a>
</span><span id="__span-27-272"><a id="__codelineno-27-272" name="__codelineno-27-272" href="#__codelineno-27-272"></a>                <span class="k">for</span> <span class="n">operation</span> <span class="ow">in</span> <span class="n">operations</span><span class="p">:</span>
</span><span id="__span-27-273"><a id="__codelineno-27-273" name="__codelineno-27-273" href="#__codelineno-27-273"></a>                    <span class="n">query</span><span class="p">,</span> <span class="n">params</span> <span class="o">=</span> <span class="n">operation</span>
</span><span id="__span-27-274"><a id="__codelineno-27-274" name="__codelineno-27-274" href="#__codelineno-27-274"></a>                    <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="n">params</span><span class="p">)</span>
</span><span id="__span-27-275"><a id="__codelineno-27-275" name="__codelineno-27-275" href="#__codelineno-27-275"></a>
</span><span id="__span-27-276"><a id="__codelineno-27-276" name="__codelineno-27-276" href="#__codelineno-27-276"></a>                <span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
</span><span id="__span-27-277"><a id="__codelineno-27-277" name="__codelineno-27-277" href="#__codelineno-27-277"></a>                <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;âœ… Transaction completed: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">operations</span><span class="p">)</span><span class="si">}</span><span class="s2"> operations&quot;</span><span class="p">)</span>
</span><span id="__span-27-278"><a id="__codelineno-27-278" name="__codelineno-27-278" href="#__codelineno-27-278"></a>                <span class="k">return</span> <span class="kc">True</span>
</span><span id="__span-27-279"><a id="__codelineno-27-279" name="__codelineno-27-279" href="#__codelineno-27-279"></a>
</span><span id="__span-27-280"><a id="__codelineno-27-280" name="__codelineno-27-280" href="#__codelineno-27-280"></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="__span-27-281"><a id="__codelineno-27-281" name="__codelineno-27-281" href="#__codelineno-27-281"></a>            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Transaction failed: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-27-282"><a id="__codelineno-27-282" name="__codelineno-27-282" href="#__codelineno-27-282"></a>            <span class="k">raise</span>
</span><span id="__span-27-283"><a id="__codelineno-27-283" name="__codelineno-27-283" href="#__codelineno-27-283"></a>
</span><span id="__span-27-284"><a id="__codelineno-27-284" name="__codelineno-27-284" href="#__codelineno-27-284"></a><span class="k">class</span><span class="w"> </span><span class="nc">AuthenticationManager</span><span class="p">:</span>
</span><span id="__span-27-285"><a id="__codelineno-27-285" name="__codelineno-27-285" href="#__codelineno-27-285"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Advanced authentication and authorization system&quot;&quot;&quot;</span>
</span><span id="__span-27-286"><a id="__codelineno-27-286" name="__codelineno-27-286" href="#__codelineno-27-286"></a>
</span><span id="__span-27-287"><a id="__codelineno-27-287" name="__codelineno-27-287" href="#__codelineno-27-287"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">db_manager</span><span class="p">:</span> <span class="n">DatabaseManager</span><span class="p">,</span> <span class="n">jwt_secret</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;your-secret-key&#39;</span><span class="p">):</span>
</span><span id="__span-27-288"><a id="__codelineno-27-288" name="__codelineno-27-288" href="#__codelineno-27-288"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">db</span> <span class="o">=</span> <span class="n">db_manager</span>
</span><span id="__span-27-289"><a id="__codelineno-27-289" name="__codelineno-27-289" href="#__codelineno-27-289"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">jwt_secret</span> <span class="o">=</span> <span class="n">jwt_secret</span>
</span><span id="__span-27-290"><a id="__codelineno-27-290" name="__codelineno-27-290" href="#__codelineno-27-290"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">token_blacklist</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>  <span class="c1"># In production, use Redis</span>
</span><span id="__span-27-291"><a id="__codelineno-27-291" name="__codelineno-27-291" href="#__codelineno-27-291"></a>
</span><span id="__span-27-292"><a id="__codelineno-27-292" name="__codelineno-27-292" href="#__codelineno-27-292"></a>        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;ğŸ” Authentication manager initialized&quot;</span><span class="p">)</span>
</span><span id="__span-27-293"><a id="__codelineno-27-293" name="__codelineno-27-293" href="#__codelineno-27-293"></a>
</span><span id="__span-27-294"><a id="__codelineno-27-294" name="__codelineno-27-294" href="#__codelineno-27-294"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">register_user</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">username</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">email</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">password</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">role</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;user&#39;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
</span><span id="__span-27-295"><a id="__codelineno-27-295" name="__codelineno-27-295" href="#__codelineno-27-295"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Register a new user&quot;&quot;&quot;</span>
</span><span id="__span-27-296"><a id="__codelineno-27-296" name="__codelineno-27-296" href="#__codelineno-27-296"></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="__span-27-297"><a id="__codelineno-27-297" name="__codelineno-27-297" href="#__codelineno-27-297"></a>            <span class="c1"># Check if user already exists</span>
</span><span id="__span-27-298"><a id="__codelineno-27-298" name="__codelineno-27-298" href="#__codelineno-27-298"></a>            <span class="n">existing_user</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">execute_query</span><span class="p">(</span>
</span><span id="__span-27-299"><a id="__codelineno-27-299" name="__codelineno-27-299" href="#__codelineno-27-299"></a>                <span class="s1">&#39;SELECT id FROM users WHERE username = ? OR email = ?&#39;</span><span class="p">,</span>
</span><span id="__span-27-300"><a id="__codelineno-27-300" name="__codelineno-27-300" href="#__codelineno-27-300"></a>                <span class="p">(</span><span class="n">username</span><span class="p">,</span> <span class="n">email</span><span class="p">),</span>
</span><span id="__span-27-301"><a id="__codelineno-27-301" name="__codelineno-27-301" href="#__codelineno-27-301"></a>                <span class="n">fetch_one</span><span class="o">=</span><span class="kc">True</span>
</span><span id="__span-27-302"><a id="__codelineno-27-302" name="__codelineno-27-302" href="#__codelineno-27-302"></a>            <span class="p">)</span>
</span><span id="__span-27-303"><a id="__codelineno-27-303" name="__codelineno-27-303" href="#__codelineno-27-303"></a>
</span><span id="__span-27-304"><a id="__codelineno-27-304" name="__codelineno-27-304" href="#__codelineno-27-304"></a>            <span class="k">if</span> <span class="n">existing_user</span><span class="p">:</span>
</span><span id="__span-27-305"><a id="__codelineno-27-305" name="__codelineno-27-305" href="#__codelineno-27-305"></a>                <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;success&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span> <span class="s1">&#39;error&#39;</span><span class="p">:</span> <span class="s1">&#39;User already exists&#39;</span><span class="p">}</span>
</span><span id="__span-27-306"><a id="__codelineno-27-306" name="__codelineno-27-306" href="#__codelineno-27-306"></a>
</span><span id="__span-27-307"><a id="__codelineno-27-307" name="__codelineno-27-307" href="#__codelineno-27-307"></a>            <span class="c1"># Hash password and create user</span>
</span><span id="__span-27-308"><a id="__codelineno-27-308" name="__codelineno-27-308" href="#__codelineno-27-308"></a>            <span class="n">password_hash</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">hash_password</span><span class="p">(</span><span class="n">password</span><span class="p">)</span>
</span><span id="__span-27-309"><a id="__codelineno-27-309" name="__codelineno-27-309" href="#__codelineno-27-309"></a>            <span class="n">user_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">execute_query</span><span class="p">(</span>
</span><span id="__span-27-310"><a id="__codelineno-27-310" name="__codelineno-27-310" href="#__codelineno-27-310"></a>                <span class="s1">&#39;INSERT INTO users (username, email, password_hash, role) VALUES (?, ?, ?, ?)&#39;</span><span class="p">,</span>
</span><span id="__span-27-311"><a id="__codelineno-27-311" name="__codelineno-27-311" href="#__codelineno-27-311"></a>                <span class="p">(</span><span class="n">username</span><span class="p">,</span> <span class="n">email</span><span class="p">,</span> <span class="n">password_hash</span><span class="p">,</span> <span class="n">role</span><span class="p">)</span>
</span><span id="__span-27-312"><a id="__codelineno-27-312" name="__codelineno-27-312" href="#__codelineno-27-312"></a>            <span class="p">)</span>
</span><span id="__span-27-313"><a id="__codelineno-27-313" name="__codelineno-27-313" href="#__codelineno-27-313"></a>
</span><span id="__span-27-314"><a id="__codelineno-27-314" name="__codelineno-27-314" href="#__codelineno-27-314"></a>            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ğŸ‘¤ User registered: </span><span class="si">{</span><span class="n">username</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-27-315"><a id="__codelineno-27-315" name="__codelineno-27-315" href="#__codelineno-27-315"></a>            <span class="k">return</span> <span class="p">{</span>
</span><span id="__span-27-316"><a id="__codelineno-27-316" name="__codelineno-27-316" href="#__codelineno-27-316"></a>                <span class="s1">&#39;success&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="__span-27-317"><a id="__codelineno-27-317" name="__codelineno-27-317" href="#__codelineno-27-317"></a>                <span class="s1">&#39;user_id&#39;</span><span class="p">:</span> <span class="n">user_id</span><span class="p">,</span>
</span><span id="__span-27-318"><a id="__codelineno-27-318" name="__codelineno-27-318" href="#__codelineno-27-318"></a>                <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;User registered successfully&#39;</span>
</span><span id="__span-27-319"><a id="__codelineno-27-319" name="__codelineno-27-319" href="#__codelineno-27-319"></a>            <span class="p">}</span>
</span><span id="__span-27-320"><a id="__codelineno-27-320" name="__codelineno-27-320" href="#__codelineno-27-320"></a>
</span><span id="__span-27-321"><a id="__codelineno-27-321" name="__codelineno-27-321" href="#__codelineno-27-321"></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="__span-27-322"><a id="__codelineno-27-322" name="__codelineno-27-322" href="#__codelineno-27-322"></a>            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Registration failed: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-27-323"><a id="__codelineno-27-323" name="__codelineno-27-323" href="#__codelineno-27-323"></a>            <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;success&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span> <span class="s1">&#39;error&#39;</span><span class="p">:</span> <span class="s1">&#39;Registration failed&#39;</span><span class="p">}</span>
</span><span id="__span-27-324"><a id="__codelineno-27-324" name="__codelineno-27-324" href="#__codelineno-27-324"></a>
</span><span id="__span-27-325"><a id="__codelineno-27-325" name="__codelineno-27-325" href="#__codelineno-27-325"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">authenticate_user</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">username</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">password</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
</span><span id="__span-27-326"><a id="__codelineno-27-326" name="__codelineno-27-326" href="#__codelineno-27-326"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Authenticate user and return JWT token&quot;&quot;&quot;</span>
</span><span id="__span-27-327"><a id="__codelineno-27-327" name="__codelineno-27-327" href="#__codelineno-27-327"></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="__span-27-328"><a id="__codelineno-27-328" name="__codelineno-27-328" href="#__codelineno-27-328"></a>            <span class="c1"># Get user from database</span>
</span><span id="__span-27-329"><a id="__codelineno-27-329" name="__codelineno-27-329" href="#__codelineno-27-329"></a>            <span class="n">user</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">execute_query</span><span class="p">(</span>
</span><span id="__span-27-330"><a id="__codelineno-27-330" name="__codelineno-27-330" href="#__codelineno-27-330"></a>                <span class="s1">&#39;SELECT * FROM users WHERE username = ? AND is_active = 1&#39;</span><span class="p">,</span>
</span><span id="__span-27-331"><a id="__codelineno-27-331" name="__codelineno-27-331" href="#__codelineno-27-331"></a>                <span class="p">(</span><span class="n">username</span><span class="p">,),</span>
</span><span id="__span-27-332"><a id="__codelineno-27-332" name="__codelineno-27-332" href="#__codelineno-27-332"></a>                <span class="n">fetch_one</span><span class="o">=</span><span class="kc">True</span>
</span><span id="__span-27-333"><a id="__codelineno-27-333" name="__codelineno-27-333" href="#__codelineno-27-333"></a>            <span class="p">)</span>
</span><span id="__span-27-334"><a id="__codelineno-27-334" name="__codelineno-27-334" href="#__codelineno-27-334"></a>
</span><span id="__span-27-335"><a id="__codelineno-27-335" name="__codelineno-27-335" href="#__codelineno-27-335"></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">user</span><span class="p">:</span>
</span><span id="__span-27-336"><a id="__codelineno-27-336" name="__codelineno-27-336" href="#__codelineno-27-336"></a>                <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;success&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span> <span class="s1">&#39;error&#39;</span><span class="p">:</span> <span class="s1">&#39;User not found&#39;</span><span class="p">}</span>
</span><span id="__span-27-337"><a id="__codelineno-27-337" name="__codelineno-27-337" href="#__codelineno-27-337"></a>
</span><span id="__span-27-338"><a id="__codelineno-27-338" name="__codelineno-27-338" href="#__codelineno-27-338"></a>            <span class="c1"># Verify password</span>
</span><span id="__span-27-339"><a id="__codelineno-27-339" name="__codelineno-27-339" href="#__codelineno-27-339"></a>            <span class="n">password_hash</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">hash_password</span><span class="p">(</span><span class="n">password</span><span class="p">)</span>
</span><span id="__span-27-340"><a id="__codelineno-27-340" name="__codelineno-27-340" href="#__codelineno-27-340"></a>            <span class="k">if</span> <span class="n">user</span><span class="p">[</span><span class="s1">&#39;password_hash&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="n">password_hash</span><span class="p">:</span>
</span><span id="__span-27-341"><a id="__codelineno-27-341" name="__codelineno-27-341" href="#__codelineno-27-341"></a>                <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;success&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span> <span class="s1">&#39;error&#39;</span><span class="p">:</span> <span class="s1">&#39;Invalid password&#39;</span><span class="p">}</span>
</span><span id="__span-27-342"><a id="__codelineno-27-342" name="__codelineno-27-342" href="#__codelineno-27-342"></a>
</span><span id="__span-27-343"><a id="__codelineno-27-343" name="__codelineno-27-343" href="#__codelineno-27-343"></a>            <span class="c1"># Update last login</span>
</span><span id="__span-27-344"><a id="__codelineno-27-344" name="__codelineno-27-344" href="#__codelineno-27-344"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">execute_query</span><span class="p">(</span>
</span><span id="__span-27-345"><a id="__codelineno-27-345" name="__codelineno-27-345" href="#__codelineno-27-345"></a>                <span class="s1">&#39;UPDATE users SET last_login = CURRENT_TIMESTAMP WHERE id = ?&#39;</span><span class="p">,</span>
</span><span id="__span-27-346"><a id="__codelineno-27-346" name="__codelineno-27-346" href="#__codelineno-27-346"></a>                <span class="p">(</span><span class="n">user</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">],)</span>
</span><span id="__span-27-347"><a id="__codelineno-27-347" name="__codelineno-27-347" href="#__codelineno-27-347"></a>            <span class="p">)</span>
</span><span id="__span-27-348"><a id="__codelineno-27-348" name="__codelineno-27-348" href="#__codelineno-27-348"></a>
</span><span id="__span-27-349"><a id="__codelineno-27-349" name="__codelineno-27-349" href="#__codelineno-27-349"></a>            <span class="c1"># Generate JWT token</span>
</span><span id="__span-27-350"><a id="__codelineno-27-350" name="__codelineno-27-350" href="#__codelineno-27-350"></a>            <span class="n">token</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">generate_jwt_token</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>
</span><span id="__span-27-351"><a id="__codelineno-27-351" name="__codelineno-27-351" href="#__codelineno-27-351"></a>
</span><span id="__span-27-352"><a id="__codelineno-27-352" name="__codelineno-27-352" href="#__codelineno-27-352"></a>            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;âœ… User authenticated: </span><span class="si">{</span><span class="n">username</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-27-353"><a id="__codelineno-27-353" name="__codelineno-27-353" href="#__codelineno-27-353"></a>            <span class="k">return</span> <span class="p">{</span>
</span><span id="__span-27-354"><a id="__codelineno-27-354" name="__codelineno-27-354" href="#__codelineno-27-354"></a>                <span class="s1">&#39;success&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="__span-27-355"><a id="__codelineno-27-355" name="__codelineno-27-355" href="#__codelineno-27-355"></a>                <span class="s1">&#39;token&#39;</span><span class="p">:</span> <span class="n">token</span><span class="p">,</span>
</span><span id="__span-27-356"><a id="__codelineno-27-356" name="__codelineno-27-356" href="#__codelineno-27-356"></a>                <span class="s1">&#39;user&#39;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-27-357"><a id="__codelineno-27-357" name="__codelineno-27-357" href="#__codelineno-27-357"></a>                    <span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="n">user</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">],</span>
</span><span id="__span-27-358"><a id="__codelineno-27-358" name="__codelineno-27-358" href="#__codelineno-27-358"></a>                    <span class="s1">&#39;username&#39;</span><span class="p">:</span> <span class="n">user</span><span class="p">[</span><span class="s1">&#39;username&#39;</span><span class="p">],</span>
</span><span id="__span-27-359"><a id="__codelineno-27-359" name="__codelineno-27-359" href="#__codelineno-27-359"></a>                    <span class="s1">&#39;email&#39;</span><span class="p">:</span> <span class="n">user</span><span class="p">[</span><span class="s1">&#39;email&#39;</span><span class="p">],</span>
</span><span id="__span-27-360"><a id="__codelineno-27-360" name="__codelineno-27-360" href="#__codelineno-27-360"></a>                    <span class="s1">&#39;role&#39;</span><span class="p">:</span> <span class="n">user</span><span class="p">[</span><span class="s1">&#39;role&#39;</span><span class="p">]</span>
</span><span id="__span-27-361"><a id="__codelineno-27-361" name="__codelineno-27-361" href="#__codelineno-27-361"></a>                <span class="p">}</span>
</span><span id="__span-27-362"><a id="__codelineno-27-362" name="__codelineno-27-362" href="#__codelineno-27-362"></a>            <span class="p">}</span>
</span><span id="__span-27-363"><a id="__codelineno-27-363" name="__codelineno-27-363" href="#__codelineno-27-363"></a>
</span><span id="__span-27-364"><a id="__codelineno-27-364" name="__codelineno-27-364" href="#__codelineno-27-364"></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="__span-27-365"><a id="__codelineno-27-365" name="__codelineno-27-365" href="#__codelineno-27-365"></a>            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Authentication failed: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-27-366"><a id="__codelineno-27-366" name="__codelineno-27-366" href="#__codelineno-27-366"></a>            <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;success&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span> <span class="s1">&#39;error&#39;</span><span class="p">:</span> <span class="s1">&#39;Authentication failed&#39;</span><span class="p">}</span>
</span><span id="__span-27-367"><a id="__codelineno-27-367" name="__codelineno-27-367" href="#__codelineno-27-367"></a>
</span><span id="__span-27-368"><a id="__codelineno-27-368" name="__codelineno-27-368" href="#__codelineno-27-368"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">generate_jwt_token</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user</span><span class="p">:</span> <span class="n">Dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="__span-27-369"><a id="__codelineno-27-369" name="__codelineno-27-369" href="#__codelineno-27-369"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Generate JWT token for authenticated user&quot;&quot;&quot;</span>
</span><span id="__span-27-370"><a id="__codelineno-27-370" name="__codelineno-27-370" href="#__codelineno-27-370"></a>        <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="__span-27-371"><a id="__codelineno-27-371" name="__codelineno-27-371" href="#__codelineno-27-371"></a>            <span class="s1">&#39;user_id&#39;</span><span class="p">:</span> <span class="n">user</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">],</span>
</span><span id="__span-27-372"><a id="__codelineno-27-372" name="__codelineno-27-372" href="#__codelineno-27-372"></a>            <span class="s1">&#39;username&#39;</span><span class="p">:</span> <span class="n">user</span><span class="p">[</span><span class="s1">&#39;username&#39;</span><span class="p">],</span>
</span><span id="__span-27-373"><a id="__codelineno-27-373" name="__codelineno-27-373" href="#__codelineno-27-373"></a>            <span class="s1">&#39;role&#39;</span><span class="p">:</span> <span class="n">user</span><span class="p">[</span><span class="s1">&#39;role&#39;</span><span class="p">],</span>
</span><span id="__span-27-374"><a id="__codelineno-27-374" name="__codelineno-27-374" href="#__codelineno-27-374"></a>            <span class="s1">&#39;exp&#39;</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">utcnow</span><span class="p">()</span> <span class="o">+</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">hours</span><span class="o">=</span><span class="mi">24</span><span class="p">),</span>  <span class="c1"># 24 hour expiration</span>
</span><span id="__span-27-375"><a id="__codelineno-27-375" name="__codelineno-27-375" href="#__codelineno-27-375"></a>            <span class="s1">&#39;iat&#39;</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">utcnow</span><span class="p">()</span>
</span><span id="__span-27-376"><a id="__codelineno-27-376" name="__codelineno-27-376" href="#__codelineno-27-376"></a>        <span class="p">}</span>
</span><span id="__span-27-377"><a id="__codelineno-27-377" name="__codelineno-27-377" href="#__codelineno-27-377"></a>
</span><span id="__span-27-378"><a id="__codelineno-27-378" name="__codelineno-27-378" href="#__codelineno-27-378"></a>        <span class="k">return</span> <span class="n">jwt</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">payload</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">jwt_secret</span><span class="p">,</span> <span class="n">algorithm</span><span class="o">=</span><span class="s1">&#39;HS256&#39;</span><span class="p">)</span>
</span><span id="__span-27-379"><a id="__codelineno-27-379" name="__codelineno-27-379" href="#__codelineno-27-379"></a>
</span><span id="__span-27-380"><a id="__codelineno-27-380" name="__codelineno-27-380" href="#__codelineno-27-380"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">verify_jwt_token</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">token</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
</span><span id="__span-27-381"><a id="__codelineno-27-381" name="__codelineno-27-381" href="#__codelineno-27-381"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Verify JWT token and return user data&quot;&quot;&quot;</span>
</span><span id="__span-27-382"><a id="__codelineno-27-382" name="__codelineno-27-382" href="#__codelineno-27-382"></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="__span-27-383"><a id="__codelineno-27-383" name="__codelineno-27-383" href="#__codelineno-27-383"></a>            <span class="k">if</span> <span class="n">token</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">token_blacklist</span><span class="p">:</span>
</span><span id="__span-27-384"><a id="__codelineno-27-384" name="__codelineno-27-384" href="#__codelineno-27-384"></a>                <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;success&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span> <span class="s1">&#39;error&#39;</span><span class="p">:</span> <span class="s1">&#39;Token has been revoked&#39;</span><span class="p">}</span>
</span><span id="__span-27-385"><a id="__codelineno-27-385" name="__codelineno-27-385" href="#__codelineno-27-385"></a>
</span><span id="__span-27-386"><a id="__codelineno-27-386" name="__codelineno-27-386" href="#__codelineno-27-386"></a>            <span class="n">payload</span> <span class="o">=</span> <span class="n">jwt</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">jwt_secret</span><span class="p">,</span> <span class="n">algorithms</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;HS256&#39;</span><span class="p">])</span>
</span><span id="__span-27-387"><a id="__codelineno-27-387" name="__codelineno-27-387" href="#__codelineno-27-387"></a>
</span><span id="__span-27-388"><a id="__codelineno-27-388" name="__codelineno-27-388" href="#__codelineno-27-388"></a>            <span class="c1"># Check if user still exists and is active</span>
</span><span id="__span-27-389"><a id="__codelineno-27-389" name="__codelineno-27-389" href="#__codelineno-27-389"></a>            <span class="n">user</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">execute_query</span><span class="p">(</span>
</span><span id="__span-27-390"><a id="__codelineno-27-390" name="__codelineno-27-390" href="#__codelineno-27-390"></a>                <span class="s1">&#39;SELECT * FROM users WHERE id = ? AND is_active = 1&#39;</span><span class="p">,</span>
</span><span id="__span-27-391"><a id="__codelineno-27-391" name="__codelineno-27-391" href="#__codelineno-27-391"></a>                <span class="p">(</span><span class="n">payload</span><span class="p">[</span><span class="s1">&#39;user_id&#39;</span><span class="p">],),</span>
</span><span id="__span-27-392"><a id="__codelineno-27-392" name="__codelineno-27-392" href="#__codelineno-27-392"></a>                <span class="n">fetch_one</span><span class="o">=</span><span class="kc">True</span>
</span><span id="__span-27-393"><a id="__codelineno-27-393" name="__codelineno-27-393" href="#__codelineno-27-393"></a>            <span class="p">)</span>
</span><span id="__span-27-394"><a id="__codelineno-27-394" name="__codelineno-27-394" href="#__codelineno-27-394"></a>
</span><span id="__span-27-395"><a id="__codelineno-27-395" name="__codelineno-27-395" href="#__codelineno-27-395"></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">user</span><span class="p">:</span>
</span><span id="__span-27-396"><a id="__codelineno-27-396" name="__codelineno-27-396" href="#__codelineno-27-396"></a>                <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;success&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span> <span class="s1">&#39;error&#39;</span><span class="p">:</span> <span class="s1">&#39;User no longer exists&#39;</span><span class="p">}</span>
</span><span id="__span-27-397"><a id="__codelineno-27-397" name="__codelineno-27-397" href="#__codelineno-27-397"></a>
</span><span id="__span-27-398"><a id="__codelineno-27-398" name="__codelineno-27-398" href="#__codelineno-27-398"></a>            <span class="k">return</span> <span class="p">{</span>
</span><span id="__span-27-399"><a id="__codelineno-27-399" name="__codelineno-27-399" href="#__codelineno-27-399"></a>                <span class="s1">&#39;success&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="__span-27-400"><a id="__codelineno-27-400" name="__codelineno-27-400" href="#__codelineno-27-400"></a>                <span class="s1">&#39;user&#39;</span><span class="p">:</span> <span class="n">payload</span>
</span><span id="__span-27-401"><a id="__codelineno-27-401" name="__codelineno-27-401" href="#__codelineno-27-401"></a>            <span class="p">}</span>
</span><span id="__span-27-402"><a id="__codelineno-27-402" name="__codelineno-27-402" href="#__codelineno-27-402"></a>
</span><span id="__span-27-403"><a id="__codelineno-27-403" name="__codelineno-27-403" href="#__codelineno-27-403"></a>        <span class="k">except</span> <span class="n">jwt</span><span class="o">.</span><span class="n">ExpiredSignatureError</span><span class="p">:</span>
</span><span id="__span-27-404"><a id="__codelineno-27-404" name="__codelineno-27-404" href="#__codelineno-27-404"></a>            <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;success&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span> <span class="s1">&#39;error&#39;</span><span class="p">:</span> <span class="s1">&#39;Token has expired&#39;</span><span class="p">}</span>
</span><span id="__span-27-405"><a id="__codelineno-27-405" name="__codelineno-27-405" href="#__codelineno-27-405"></a>        <span class="k">except</span> <span class="n">jwt</span><span class="o">.</span><span class="n">InvalidTokenError</span><span class="p">:</span>
</span><span id="__span-27-406"><a id="__codelineno-27-406" name="__codelineno-27-406" href="#__codelineno-27-406"></a>            <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;success&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span> <span class="s1">&#39;error&#39;</span><span class="p">:</span> <span class="s1">&#39;Invalid token&#39;</span><span class="p">}</span>
</span><span id="__span-27-407"><a id="__codelineno-27-407" name="__codelineno-27-407" href="#__codelineno-27-407"></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="__span-27-408"><a id="__codelineno-27-408" name="__codelineno-27-408" href="#__codelineno-27-408"></a>            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Token verification failed: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-27-409"><a id="__codelineno-27-409" name="__codelineno-27-409" href="#__codelineno-27-409"></a>            <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;success&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span> <span class="s1">&#39;error&#39;</span><span class="p">:</span> <span class="s1">&#39;Token verification failed&#39;</span><span class="p">}</span>
</span><span id="__span-27-410"><a id="__codelineno-27-410" name="__codelineno-27-410" href="#__codelineno-27-410"></a>
</span><span id="__span-27-411"><a id="__codelineno-27-411" name="__codelineno-27-411" href="#__codelineno-27-411"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">logout_user</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">token</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
</span><span id="__span-27-412"><a id="__codelineno-27-412" name="__codelineno-27-412" href="#__codelineno-27-412"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Logout user by blacklisting token&quot;&quot;&quot;</span>
</span><span id="__span-27-413"><a id="__codelineno-27-413" name="__codelineno-27-413" href="#__codelineno-27-413"></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="__span-27-414"><a id="__codelineno-27-414" name="__codelineno-27-414" href="#__codelineno-27-414"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">token_blacklist</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">token</span><span class="p">)</span>
</span><span id="__span-27-415"><a id="__codelineno-27-415" name="__codelineno-27-415" href="#__codelineno-27-415"></a>            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;ğŸ‘‹ User logged out&quot;</span><span class="p">)</span>
</span><span id="__span-27-416"><a id="__codelineno-27-416" name="__codelineno-27-416" href="#__codelineno-27-416"></a>            <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;success&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;Logged out successfully&#39;</span><span class="p">}</span>
</span><span id="__span-27-417"><a id="__codelineno-27-417" name="__codelineno-27-417" href="#__codelineno-27-417"></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="__span-27-418"><a id="__codelineno-27-418" name="__codelineno-27-418" href="#__codelineno-27-418"></a>            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Logout failed: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-27-419"><a id="__codelineno-27-419" name="__codelineno-27-419" href="#__codelineno-27-419"></a>            <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;success&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span> <span class="s1">&#39;error&#39;</span><span class="p">:</span> <span class="s1">&#39;Logout failed&#39;</span><span class="p">}</span>
</span><span id="__span-27-420"><a id="__codelineno-27-420" name="__codelineno-27-420" href="#__codelineno-27-420"></a>
</span><span id="__span-27-421"><a id="__codelineno-27-421" name="__codelineno-27-421" href="#__codelineno-27-421"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">require_auth</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">required_role</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="__span-27-422"><a id="__codelineno-27-422" name="__codelineno-27-422" href="#__codelineno-27-422"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Decorator for requiring authentication&quot;&quot;&quot;</span>
</span><span id="__span-27-423"><a id="__codelineno-27-423" name="__codelineno-27-423" href="#__codelineno-27-423"></a>        <span class="k">def</span><span class="w"> </span><span class="nf">decorator</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
</span><span id="__span-27-424"><a id="__codelineno-27-424" name="__codelineno-27-424" href="#__codelineno-27-424"></a>            <span class="nd">@functools</span><span class="o">.</span><span class="n">wraps</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>
</span><span id="__span-27-425"><a id="__codelineno-27-425" name="__codelineno-27-425" href="#__codelineno-27-425"></a>            <span class="k">def</span><span class="w"> </span><span class="nf">wrapper</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span><span id="__span-27-426"><a id="__codelineno-27-426" name="__codelineno-27-426" href="#__codelineno-27-426"></a>                <span class="c1"># In a real Flask app, this would get the token from request headers</span>
</span><span id="__span-27-427"><a id="__codelineno-27-427" name="__codelineno-27-427" href="#__codelineno-27-427"></a>                <span class="n">token</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;auth_token&#39;</span><span class="p">)</span>
</span><span id="__span-27-428"><a id="__codelineno-27-428" name="__codelineno-27-428" href="#__codelineno-27-428"></a>                <span class="k">if</span> <span class="ow">not</span> <span class="n">token</span><span class="p">:</span>
</span><span id="__span-27-429"><a id="__codelineno-27-429" name="__codelineno-27-429" href="#__codelineno-27-429"></a>                    <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;success&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span> <span class="s1">&#39;error&#39;</span><span class="p">:</span> <span class="s1">&#39;Authentication required&#39;</span><span class="p">}</span>
</span><span id="__span-27-430"><a id="__codelineno-27-430" name="__codelineno-27-430" href="#__codelineno-27-430"></a>
</span><span id="__span-27-431"><a id="__codelineno-27-431" name="__codelineno-27-431" href="#__codelineno-27-431"></a>                <span class="n">auth_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">verify_jwt_token</span><span class="p">(</span><span class="n">token</span><span class="p">)</span>
</span><span id="__span-27-432"><a id="__codelineno-27-432" name="__codelineno-27-432" href="#__codelineno-27-432"></a>                <span class="k">if</span> <span class="ow">not</span> <span class="n">auth_result</span><span class="p">[</span><span class="s1">&#39;success&#39;</span><span class="p">]:</span>
</span><span id="__span-27-433"><a id="__codelineno-27-433" name="__codelineno-27-433" href="#__codelineno-27-433"></a>                    <span class="k">return</span> <span class="n">auth_result</span>
</span><span id="__span-27-434"><a id="__codelineno-27-434" name="__codelineno-27-434" href="#__codelineno-27-434"></a>
</span><span id="__span-27-435"><a id="__codelineno-27-435" name="__codelineno-27-435" href="#__codelineno-27-435"></a>                <span class="n">user</span> <span class="o">=</span> <span class="n">auth_result</span><span class="p">[</span><span class="s1">&#39;user&#39;</span><span class="p">]</span>
</span><span id="__span-27-436"><a id="__codelineno-27-436" name="__codelineno-27-436" href="#__codelineno-27-436"></a>
</span><span id="__span-27-437"><a id="__codelineno-27-437" name="__codelineno-27-437" href="#__codelineno-27-437"></a>                <span class="c1"># Check role if required</span>
</span><span id="__span-27-438"><a id="__codelineno-27-438" name="__codelineno-27-438" href="#__codelineno-27-438"></a>                <span class="k">if</span> <span class="n">required_role</span> <span class="ow">and</span> <span class="n">user</span><span class="p">[</span><span class="s1">&#39;role&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="n">required_role</span> <span class="ow">and</span> <span class="n">user</span><span class="p">[</span><span class="s1">&#39;role&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;admin&#39;</span><span class="p">:</span>
</span><span id="__span-27-439"><a id="__codelineno-27-439" name="__codelineno-27-439" href="#__codelineno-27-439"></a>                    <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;success&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span> <span class="s1">&#39;error&#39;</span><span class="p">:</span> <span class="s1">&#39;Insufficient permissions&#39;</span><span class="p">}</span>
</span><span id="__span-27-440"><a id="__codelineno-27-440" name="__codelineno-27-440" href="#__codelineno-27-440"></a>
</span><span id="__span-27-441"><a id="__codelineno-27-441" name="__codelineno-27-441" href="#__codelineno-27-441"></a>                <span class="c1"># Add user to kwargs</span>
</span><span id="__span-27-442"><a id="__codelineno-27-442" name="__codelineno-27-442" href="#__codelineno-27-442"></a>                <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;current_user&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">user</span>
</span><span id="__span-27-443"><a id="__codelineno-27-443" name="__codelineno-27-443" href="#__codelineno-27-443"></a>                <span class="k">return</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="__span-27-444"><a id="__codelineno-27-444" name="__codelineno-27-444" href="#__codelineno-27-444"></a>
</span><span id="__span-27-445"><a id="__codelineno-27-445" name="__codelineno-27-445" href="#__codelineno-27-445"></a>            <span class="k">return</span> <span class="n">wrapper</span>
</span><span id="__span-27-446"><a id="__codelineno-27-446" name="__codelineno-27-446" href="#__codelineno-27-446"></a>        <span class="k">return</span> <span class="n">decorator</span>
</span><span id="__span-27-447"><a id="__codelineno-27-447" name="__codelineno-27-447" href="#__codelineno-27-447"></a>
</span><span id="__span-27-448"><a id="__codelineno-27-448" name="__codelineno-27-448" href="#__codelineno-27-448"></a><span class="k">class</span><span class="w"> </span><span class="nc">BusinessLogicManager</span><span class="p">:</span>
</span><span id="__span-27-449"><a id="__codelineno-27-449" name="__codelineno-27-449" href="#__codelineno-27-449"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Advanced business logic and data management&quot;&quot;&quot;</span>
</span><span id="__span-27-450"><a id="__codelineno-27-450" name="__codelineno-27-450" href="#__codelineno-27-450"></a>
</span><span id="__span-27-451"><a id="__codelineno-27-451" name="__codelineno-27-451" href="#__codelineno-27-451"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">db_manager</span><span class="p">:</span> <span class="n">DatabaseManager</span><span class="p">,</span> <span class="n">auth_manager</span><span class="p">:</span> <span class="n">AuthenticationManager</span><span class="p">):</span>
</span><span id="__span-27-452"><a id="__codelineno-27-452" name="__codelineno-27-452" href="#__codelineno-27-452"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">db</span> <span class="o">=</span> <span class="n">db_manager</span>
</span><span id="__span-27-453"><a id="__codelineno-27-453" name="__codelineno-27-453" href="#__codelineno-27-453"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">auth</span> <span class="o">=</span> <span class="n">auth_manager</span>
</span><span id="__span-27-454"><a id="__codelineno-27-454" name="__codelineno-27-454" href="#__codelineno-27-454"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">cache</span> <span class="o">=</span> <span class="p">{}</span>  <span class="c1"># In production, use Redis</span>
</span><span id="__span-27-455"><a id="__codelineno-27-455" name="__codelineno-27-455" href="#__codelineno-27-455"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">cache_ttl</span> <span class="o">=</span> <span class="mi">300</span>  <span class="c1"># 5 minutes</span>
</span><span id="__span-27-456"><a id="__codelineno-27-456" name="__codelineno-27-456" href="#__codelineno-27-456"></a>
</span><span id="__span-27-457"><a id="__codelineno-27-457" name="__codelineno-27-457" href="#__codelineno-27-457"></a>        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;ğŸ§  Business logic manager initialized&quot;</span><span class="p">)</span>
</span><span id="__span-27-458"><a id="__codelineno-27-458" name="__codelineno-27-458" href="#__codelineno-27-458"></a>
</span><span id="__span-27-459"><a id="__codelineno-27-459" name="__codelineno-27-459" href="#__codelineno-27-459"></a>    <span class="nd">@AuthenticationManager</span><span class="o">.</span><span class="n">require_auth</span><span class="p">(</span><span class="n">required_role</span><span class="o">=</span><span class="s1">&#39;user&#39;</span><span class="p">)</span>
</span><span id="__span-27-460"><a id="__codelineno-27-460" name="__codelineno-27-460" href="#__codelineno-27-460"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_user_profile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
</span><span id="__span-27-461"><a id="__codelineno-27-461" name="__codelineno-27-461" href="#__codelineno-27-461"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get user profile with caching&quot;&quot;&quot;</span>
</span><span id="__span-27-462"><a id="__codelineno-27-462" name="__codelineno-27-462" href="#__codelineno-27-462"></a>        <span class="n">cache_key</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;user_profile_</span><span class="si">{</span><span class="n">user_id</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="__span-27-463"><a id="__codelineno-27-463" name="__codelineno-27-463" href="#__codelineno-27-463"></a>
</span><span id="__span-27-464"><a id="__codelineno-27-464" name="__codelineno-27-464" href="#__codelineno-27-464"></a>        <span class="c1"># Check cache first</span>
</span><span id="__span-27-465"><a id="__codelineno-27-465" name="__codelineno-27-465" href="#__codelineno-27-465"></a>        <span class="k">if</span> <span class="n">cache_key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">cache</span><span class="p">:</span>
</span><span id="__span-27-466"><a id="__codelineno-27-466" name="__codelineno-27-466" href="#__codelineno-27-466"></a>            <span class="n">cache_entry</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cache</span><span class="p">[</span><span class="n">cache_key</span><span class="p">]</span>
</span><span id="__span-27-467"><a id="__codelineno-27-467" name="__codelineno-27-467" href="#__codelineno-27-467"></a>            <span class="k">if</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">cache_entry</span><span class="p">[</span><span class="s1">&#39;timestamp&#39;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">cache_ttl</span><span class="p">:</span>
</span><span id="__span-27-468"><a id="__codelineno-27-468" name="__codelineno-27-468" href="#__codelineno-27-468"></a>                <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ğŸ“‹ User profile served from cache: </span><span class="si">{</span><span class="n">user_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-27-469"><a id="__codelineno-27-469" name="__codelineno-27-469" href="#__codelineno-27-469"></a>                <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;success&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="n">cache_entry</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">]}</span>
</span><span id="__span-27-470"><a id="__codelineno-27-470" name="__codelineno-27-470" href="#__codelineno-27-470"></a>
</span><span id="__span-27-471"><a id="__codelineno-27-471" name="__codelineno-27-471" href="#__codelineno-27-471"></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="__span-27-472"><a id="__codelineno-27-472" name="__codelineno-27-472" href="#__codelineno-27-472"></a>            <span class="n">user</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">execute_query</span><span class="p">(</span>
</span><span id="__span-27-473"><a id="__codelineno-27-473" name="__codelineno-27-473" href="#__codelineno-27-473"></a><span class="w">                </span><span class="sd">&#39;&#39;&#39;SELECT u.*, COUNT(o.id) as order_count, COALESCE(SUM(o.total_amount), 0) as total_spent</span>
</span><span id="__span-27-474"><a id="__codelineno-27-474" name="__codelineno-27-474" href="#__codelineno-27-474"></a><span class="sd">                   FROM users u </span>
</span><span id="__span-27-475"><a id="__codelineno-27-475" name="__codelineno-27-475" href="#__codelineno-27-475"></a><span class="sd">                   LEFT JOIN orders o ON u.id = o.user_id </span>
</span><span id="__span-27-476"><a id="__codelineno-27-476" name="__codelineno-27-476" href="#__codelineno-27-476"></a><span class="sd">                   WHERE u.id = ? AND u.is_active = 1</span>
</span><span id="__span-27-477"><a id="__codelineno-27-477" name="__codelineno-27-477" href="#__codelineno-27-477"></a><span class="sd">                   GROUP BY u.id&#39;&#39;&#39;</span><span class="p">,</span>
</span><span id="__span-27-478"><a id="__codelineno-27-478" name="__codelineno-27-478" href="#__codelineno-27-478"></a>                <span class="p">(</span><span class="n">user_id</span><span class="p">,),</span>
</span><span id="__span-27-479"><a id="__codelineno-27-479" name="__codelineno-27-479" href="#__codelineno-27-479"></a>                <span class="n">fetch_one</span><span class="o">=</span><span class="kc">True</span>
</span><span id="__span-27-480"><a id="__codelineno-27-480" name="__codelineno-27-480" href="#__codelineno-27-480"></a>            <span class="p">)</span>
</span><span id="__span-27-481"><a id="__codelineno-27-481" name="__codelineno-27-481" href="#__codelineno-27-481"></a>
</span><span id="__span-27-482"><a id="__codelineno-27-482" name="__codelineno-27-482" href="#__codelineno-27-482"></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">user</span><span class="p">:</span>
</span><span id="__span-27-483"><a id="__codelineno-27-483" name="__codelineno-27-483" href="#__codelineno-27-483"></a>                <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;success&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span> <span class="s1">&#39;error&#39;</span><span class="p">:</span> <span class="s1">&#39;User not found&#39;</span><span class="p">}</span>
</span><span id="__span-27-484"><a id="__codelineno-27-484" name="__codelineno-27-484" href="#__codelineno-27-484"></a>
</span><span id="__span-27-485"><a id="__codelineno-27-485" name="__codelineno-27-485" href="#__codelineno-27-485"></a>            <span class="c1"># Remove sensitive data</span>
</span><span id="__span-27-486"><a id="__codelineno-27-486" name="__codelineno-27-486" href="#__codelineno-27-486"></a>            <span class="n">user_data</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>
</span><span id="__span-27-487"><a id="__codelineno-27-487" name="__codelineno-27-487" href="#__codelineno-27-487"></a>            <span class="k">del</span> <span class="n">user_data</span><span class="p">[</span><span class="s1">&#39;password_hash&#39;</span><span class="p">]</span>
</span><span id="__span-27-488"><a id="__codelineno-27-488" name="__codelineno-27-488" href="#__codelineno-27-488"></a>
</span><span id="__span-27-489"><a id="__codelineno-27-489" name="__codelineno-27-489" href="#__codelineno-27-489"></a>            <span class="c1"># Cache the result</span>
</span><span id="__span-27-490"><a id="__codelineno-27-490" name="__codelineno-27-490" href="#__codelineno-27-490"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">cache</span><span class="p">[</span><span class="n">cache_key</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="__span-27-491"><a id="__codelineno-27-491" name="__codelineno-27-491" href="#__codelineno-27-491"></a>                <span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="n">user_data</span><span class="p">,</span>
</span><span id="__span-27-492"><a id="__codelineno-27-492" name="__codelineno-27-492" href="#__codelineno-27-492"></a>                <span class="s1">&#39;timestamp&#39;</span><span class="p">:</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
</span><span id="__span-27-493"><a id="__codelineno-27-493" name="__codelineno-27-493" href="#__codelineno-27-493"></a>            <span class="p">}</span>
</span><span id="__span-27-494"><a id="__codelineno-27-494" name="__codelineno-27-494" href="#__codelineno-27-494"></a>
</span><span id="__span-27-495"><a id="__codelineno-27-495" name="__codelineno-27-495" href="#__codelineno-27-495"></a>            <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;success&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="n">user_data</span><span class="p">}</span>
</span><span id="__span-27-496"><a id="__codelineno-27-496" name="__codelineno-27-496" href="#__codelineno-27-496"></a>
</span><span id="__span-27-497"><a id="__codelineno-27-497" name="__codelineno-27-497" href="#__codelineno-27-497"></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="__span-27-498"><a id="__codelineno-27-498" name="__codelineno-27-498" href="#__codelineno-27-498"></a>            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to get user profile: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-27-499"><a id="__codelineno-27-499" name="__codelineno-27-499" href="#__codelineno-27-499"></a>            <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;success&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span> <span class="s1">&#39;error&#39;</span><span class="p">:</span> <span class="s1">&#39;Failed to retrieve user profile&#39;</span><span class="p">}</span>
</span><span id="__span-27-500"><a id="__codelineno-27-500" name="__codelineno-27-500" href="#__codelineno-27-500"></a>
</span><span id="__span-27-501"><a id="__codelineno-27-501" name="__codelineno-27-501" href="#__codelineno-27-501"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">search_products</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">query</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">category_id</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> 
</span><span id="__span-27-502"><a id="__codelineno-27-502" name="__codelineno-27-502" href="#__codelineno-27-502"></a>                       <span class="n">min_price</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">max_price</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="__span-27-503"><a id="__codelineno-27-503" name="__codelineno-27-503" href="#__codelineno-27-503"></a>                       <span class="n">sort_by</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="n">sort_order</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;asc&#39;</span><span class="p">,</span>
</span><span id="__span-27-504"><a id="__codelineno-27-504" name="__codelineno-27-504" href="#__codelineno-27-504"></a>                       <span class="n">page</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">per_page</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">20</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
</span><span id="__span-27-505"><a id="__codelineno-27-505" name="__codelineno-27-505" href="#__codelineno-27-505"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Advanced product search with filtering and pagination&quot;&quot;&quot;</span>
</span><span id="__span-27-506"><a id="__codelineno-27-506" name="__codelineno-27-506" href="#__codelineno-27-506"></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="__span-27-507"><a id="__codelineno-27-507" name="__codelineno-27-507" href="#__codelineno-27-507"></a>            <span class="c1"># Build dynamic query</span>
</span><span id="__span-27-508"><a id="__codelineno-27-508" name="__codelineno-27-508" href="#__codelineno-27-508"></a>            <span class="n">base_query</span> <span class="o">=</span> <span class="s1">&#39;&#39;&#39;</span>
</span><span id="__span-27-509"><a id="__codelineno-27-509" name="__codelineno-27-509" href="#__codelineno-27-509"></a><span class="s1">                SELECT p.*, c.name as category_name </span>
</span><span id="__span-27-510"><a id="__codelineno-27-510" name="__codelineno-27-510" href="#__codelineno-27-510"></a><span class="s1">                FROM products p </span>
</span><span id="__span-27-511"><a id="__codelineno-27-511" name="__codelineno-27-511" href="#__codelineno-27-511"></a><span class="s1">                LEFT JOIN categories c ON p.category_id = c.id </span>
</span><span id="__span-27-512"><a id="__codelineno-27-512" name="__codelineno-27-512" href="#__codelineno-27-512"></a><span class="s1">                WHERE p.is_active = 1</span>
</span><span id="__span-27-513"><a id="__codelineno-27-513" name="__codelineno-27-513" href="#__codelineno-27-513"></a><span class="s1">            &#39;&#39;&#39;</span>
</span><span id="__span-27-514"><a id="__codelineno-27-514" name="__codelineno-27-514" href="#__codelineno-27-514"></a>
</span><span id="__span-27-515"><a id="__codelineno-27-515" name="__codelineno-27-515" href="#__codelineno-27-515"></a>            <span class="n">conditions</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="__span-27-516"><a id="__codelineno-27-516" name="__codelineno-27-516" href="#__codelineno-27-516"></a>            <span class="n">params</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="__span-27-517"><a id="__codelineno-27-517" name="__codelineno-27-517" href="#__codelineno-27-517"></a>
</span><span id="__span-27-518"><a id="__codelineno-27-518" name="__codelineno-27-518" href="#__codelineno-27-518"></a>            <span class="k">if</span> <span class="n">query</span><span class="p">:</span>
</span><span id="__span-27-519"><a id="__codelineno-27-519" name="__codelineno-27-519" href="#__codelineno-27-519"></a>                <span class="n">conditions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;(p.name LIKE ? OR p.description LIKE ?)&#39;</span><span class="p">)</span>
</span><span id="__span-27-520"><a id="__codelineno-27-520" name="__codelineno-27-520" href="#__codelineno-27-520"></a>                <span class="n">params</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="sa">f</span><span class="s1">&#39;%</span><span class="si">{</span><span class="n">query</span><span class="si">}</span><span class="s1">%&#39;</span><span class="p">,</span> <span class="sa">f</span><span class="s1">&#39;%</span><span class="si">{</span><span class="n">query</span><span class="si">}</span><span class="s1">%&#39;</span><span class="p">])</span>
</span><span id="__span-27-521"><a id="__codelineno-27-521" name="__codelineno-27-521" href="#__codelineno-27-521"></a>
</span><span id="__span-27-522"><a id="__codelineno-27-522" name="__codelineno-27-522" href="#__codelineno-27-522"></a>            <span class="k">if</span> <span class="n">category_id</span><span class="p">:</span>
</span><span id="__span-27-523"><a id="__codelineno-27-523" name="__codelineno-27-523" href="#__codelineno-27-523"></a>                <span class="n">conditions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;p.category_id = ?&#39;</span><span class="p">)</span>
</span><span id="__span-27-524"><a id="__codelineno-27-524" name="__codelineno-27-524" href="#__codelineno-27-524"></a>                <span class="n">params</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">category_id</span><span class="p">)</span>
</span><span id="__span-27-525"><a id="__codelineno-27-525" name="__codelineno-27-525" href="#__codelineno-27-525"></a>
</span><span id="__span-27-526"><a id="__codelineno-27-526" name="__codelineno-27-526" href="#__codelineno-27-526"></a>            <span class="k">if</span> <span class="n">min_price</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="__span-27-527"><a id="__codelineno-27-527" name="__codelineno-27-527" href="#__codelineno-27-527"></a>                <span class="n">conditions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;p.price &gt;= ?&#39;</span><span class="p">)</span>
</span><span id="__span-27-528"><a id="__codelineno-27-528" name="__codelineno-27-528" href="#__codelineno-27-528"></a>                <span class="n">params</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">min_price</span><span class="p">)</span>
</span><span id="__span-27-529"><a id="__codelineno-27-529" name="__codelineno-27-529" href="#__codelineno-27-529"></a>
</span><span id="__span-27-530"><a id="__codelineno-27-530" name="__codelineno-27-530" href="#__codelineno-27-530"></a>            <span class="k">if</span> <span class="n">max_price</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="__span-27-531"><a id="__codelineno-27-531" name="__codelineno-27-531" href="#__codelineno-27-531"></a>                <span class="n">conditions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;p.price &lt;= ?&#39;</span><span class="p">)</span>
</span><span id="__span-27-532"><a id="__codelineno-27-532" name="__codelineno-27-532" href="#__codelineno-27-532"></a>                <span class="n">params</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">max_price</span><span class="p">)</span>
</span><span id="__span-27-533"><a id="__codelineno-27-533" name="__codelineno-27-533" href="#__codelineno-27-533"></a>
</span><span id="__span-27-534"><a id="__codelineno-27-534" name="__codelineno-27-534" href="#__codelineno-27-534"></a>            <span class="k">if</span> <span class="n">conditions</span><span class="p">:</span>
</span><span id="__span-27-535"><a id="__codelineno-27-535" name="__codelineno-27-535" href="#__codelineno-27-535"></a>                <span class="n">base_query</span> <span class="o">+=</span> <span class="s1">&#39; AND &#39;</span> <span class="o">+</span> <span class="s1">&#39; AND &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">conditions</span><span class="p">)</span>
</span><span id="__span-27-536"><a id="__codelineno-27-536" name="__codelineno-27-536" href="#__codelineno-27-536"></a>
</span><span id="__span-27-537"><a id="__codelineno-27-537" name="__codelineno-27-537" href="#__codelineno-27-537"></a>            <span class="c1"># Add sorting</span>
</span><span id="__span-27-538"><a id="__codelineno-27-538" name="__codelineno-27-538" href="#__codelineno-27-538"></a>            <span class="n">valid_sort_fields</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;price&#39;</span><span class="p">,</span> <span class="s1">&#39;created_at&#39;</span><span class="p">,</span> <span class="s1">&#39;stock_quantity&#39;</span><span class="p">]</span>
</span><span id="__span-27-539"><a id="__codelineno-27-539" name="__codelineno-27-539" href="#__codelineno-27-539"></a>            <span class="k">if</span> <span class="n">sort_by</span> <span class="ow">in</span> <span class="n">valid_sort_fields</span><span class="p">:</span>
</span><span id="__span-27-540"><a id="__codelineno-27-540" name="__codelineno-27-540" href="#__codelineno-27-540"></a>                <span class="n">sort_direction</span> <span class="o">=</span> <span class="s1">&#39;DESC&#39;</span> <span class="k">if</span> <span class="n">sort_order</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;desc&#39;</span> <span class="k">else</span> <span class="s1">&#39;ASC&#39;</span>
</span><span id="__span-27-541"><a id="__codelineno-27-541" name="__codelineno-27-541" href="#__codelineno-27-541"></a>                <span class="n">base_query</span> <span class="o">+=</span> <span class="sa">f</span><span class="s1">&#39; ORDER BY p.</span><span class="si">{</span><span class="n">sort_by</span><span class="si">}</span><span class="s1"> </span><span class="si">{</span><span class="n">sort_direction</span><span class="si">}</span><span class="s1">&#39;</span>
</span><span id="__span-27-542"><a id="__codelineno-27-542" name="__codelineno-27-542" href="#__codelineno-27-542"></a>
</span><span id="__span-27-543"><a id="__codelineno-27-543" name="__codelineno-27-543" href="#__codelineno-27-543"></a>            <span class="c1"># Add pagination</span>
</span><span id="__span-27-544"><a id="__codelineno-27-544" name="__codelineno-27-544" href="#__codelineno-27-544"></a>            <span class="n">offset</span> <span class="o">=</span> <span class="p">(</span><span class="n">page</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="n">per_page</span>
</span><span id="__span-27-545"><a id="__codelineno-27-545" name="__codelineno-27-545" href="#__codelineno-27-545"></a>            <span class="n">base_query</span> <span class="o">+=</span> <span class="s1">&#39; LIMIT ? OFFSET ?&#39;</span>
</span><span id="__span-27-546"><a id="__codelineno-27-546" name="__codelineno-27-546" href="#__codelineno-27-546"></a>            <span class="n">params</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">per_page</span><span class="p">,</span> <span class="n">offset</span><span class="p">])</span>
</span><span id="__span-27-547"><a id="__codelineno-27-547" name="__codelineno-27-547" href="#__codelineno-27-547"></a>
</span><span id="__span-27-548"><a id="__codelineno-27-548" name="__codelineno-27-548" href="#__codelineno-27-548"></a>            <span class="n">products</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">execute_query</span><span class="p">(</span><span class="n">base_query</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">params</span><span class="p">),</span> <span class="n">fetch_all</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="__span-27-549"><a id="__codelineno-27-549" name="__codelineno-27-549" href="#__codelineno-27-549"></a>
</span><span id="__span-27-550"><a id="__codelineno-27-550" name="__codelineno-27-550" href="#__codelineno-27-550"></a>            <span class="c1"># Get total count for pagination</span>
</span><span id="__span-27-551"><a id="__codelineno-27-551" name="__codelineno-27-551" href="#__codelineno-27-551"></a>            <span class="n">count_query</span> <span class="o">=</span> <span class="s1">&#39;&#39;&#39;</span>
</span><span id="__span-27-552"><a id="__codelineno-27-552" name="__codelineno-27-552" href="#__codelineno-27-552"></a><span class="s1">                SELECT COUNT(*) as total </span>
</span><span id="__span-27-553"><a id="__codelineno-27-553" name="__codelineno-27-553" href="#__codelineno-27-553"></a><span class="s1">                FROM products p </span>
</span><span id="__span-27-554"><a id="__codelineno-27-554" name="__codelineno-27-554" href="#__codelineno-27-554"></a><span class="s1">                WHERE p.is_active = 1</span>
</span><span id="__span-27-555"><a id="__codelineno-27-555" name="__codelineno-27-555" href="#__codelineno-27-555"></a><span class="s1">            &#39;&#39;&#39;</span>
</span><span id="__span-27-556"><a id="__codelineno-27-556" name="__codelineno-27-556" href="#__codelineno-27-556"></a>
</span><span id="__span-27-557"><a id="__codelineno-27-557" name="__codelineno-27-557" href="#__codelineno-27-557"></a>            <span class="k">if</span> <span class="n">conditions</span><span class="p">:</span>
</span><span id="__span-27-558"><a id="__codelineno-27-558" name="__codelineno-27-558" href="#__codelineno-27-558"></a>                <span class="n">count_query</span> <span class="o">+=</span> <span class="s1">&#39; AND &#39;</span> <span class="o">+</span> <span class="s1">&#39; AND &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">conditions</span><span class="p">)</span>
</span><span id="__span-27-559"><a id="__codelineno-27-559" name="__codelineno-27-559" href="#__codelineno-27-559"></a>
</span><span id="__span-27-560"><a id="__codelineno-27-560" name="__codelineno-27-560" href="#__codelineno-27-560"></a>            <span class="n">total_count</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">execute_query</span><span class="p">(</span>
</span><span id="__span-27-561"><a id="__codelineno-27-561" name="__codelineno-27-561" href="#__codelineno-27-561"></a>                <span class="n">count_query</span><span class="p">,</span> 
</span><span id="__span-27-562"><a id="__codelineno-27-562" name="__codelineno-27-562" href="#__codelineno-27-562"></a>                <span class="nb">tuple</span><span class="p">(</span><span class="n">params</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]),</span>  <span class="c1"># Exclude LIMIT and OFFSET params</span>
</span><span id="__span-27-563"><a id="__codelineno-27-563" name="__codelineno-27-563" href="#__codelineno-27-563"></a>                <span class="n">fetch_one</span><span class="o">=</span><span class="kc">True</span>
</span><span id="__span-27-564"><a id="__codelineno-27-564" name="__codelineno-27-564" href="#__codelineno-27-564"></a>            <span class="p">)[</span><span class="s1">&#39;total&#39;</span><span class="p">]</span>
</span><span id="__span-27-565"><a id="__codelineno-27-565" name="__codelineno-27-565" href="#__codelineno-27-565"></a>
</span><span id="__span-27-566"><a id="__codelineno-27-566" name="__codelineno-27-566" href="#__codelineno-27-566"></a>            <span class="k">return</span> <span class="p">{</span>
</span><span id="__span-27-567"><a id="__codelineno-27-567" name="__codelineno-27-567" href="#__codelineno-27-567"></a>                <span class="s1">&#39;success&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="__span-27-568"><a id="__codelineno-27-568" name="__codelineno-27-568" href="#__codelineno-27-568"></a>                <span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-27-569"><a id="__codelineno-27-569" name="__codelineno-27-569" href="#__codelineno-27-569"></a>                    <span class="s1">&#39;products&#39;</span><span class="p">:</span> <span class="n">products</span><span class="p">,</span>
</span><span id="__span-27-570"><a id="__codelineno-27-570" name="__codelineno-27-570" href="#__codelineno-27-570"></a>                    <span class="s1">&#39;pagination&#39;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-27-571"><a id="__codelineno-27-571" name="__codelineno-27-571" href="#__codelineno-27-571"></a>                        <span class="s1">&#39;page&#39;</span><span class="p">:</span> <span class="n">page</span><span class="p">,</span>
</span><span id="__span-27-572"><a id="__codelineno-27-572" name="__codelineno-27-572" href="#__codelineno-27-572"></a>                        <span class="s1">&#39;per_page&#39;</span><span class="p">:</span> <span class="n">per_page</span><span class="p">,</span>
</span><span id="__span-27-573"><a id="__codelineno-27-573" name="__codelineno-27-573" href="#__codelineno-27-573"></a>                        <span class="s1">&#39;total&#39;</span><span class="p">:</span> <span class="n">total_count</span><span class="p">,</span>
</span><span id="__span-27-574"><a id="__codelineno-27-574" name="__codelineno-27-574" href="#__codelineno-27-574"></a>                        <span class="s1">&#39;pages&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">total_count</span> <span class="o">+</span> <span class="n">per_page</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">//</span> <span class="n">per_page</span>
</span><span id="__span-27-575"><a id="__codelineno-27-575" name="__codelineno-27-575" href="#__codelineno-27-575"></a>                    <span class="p">}</span>
</span><span id="__span-27-576"><a id="__codelineno-27-576" name="__codelineno-27-576" href="#__codelineno-27-576"></a>                <span class="p">}</span>
</span><span id="__span-27-577"><a id="__codelineno-27-577" name="__codelineno-27-577" href="#__codelineno-27-577"></a>            <span class="p">}</span>
</span><span id="__span-27-578"><a id="__codelineno-27-578" name="__codelineno-27-578" href="#__codelineno-27-578"></a>
</span><span id="__span-27-579"><a id="__codelineno-27-579" name="__codelineno-27-579" href="#__codelineno-27-579"></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="__span-27-580"><a id="__codelineno-27-580" name="__codelineno-27-580" href="#__codelineno-27-580"></a>            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Product search failed: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-27-581"><a id="__codelineno-27-581" name="__codelineno-27-581" href="#__codelineno-27-581"></a>            <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;success&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span> <span class="s1">&#39;error&#39;</span><span class="p">:</span> <span class="s1">&#39;Product search failed&#39;</span><span class="p">}</span>
</span><span id="__span-27-582"><a id="__codelineno-27-582" name="__codelineno-27-582" href="#__codelineno-27-582"></a>
</span><span id="__span-27-583"><a id="__codelineno-27-583" name="__codelineno-27-583" href="#__codelineno-27-583"></a>    <span class="nd">@AuthenticationManager</span><span class="o">.</span><span class="n">require_auth</span><span class="p">(</span><span class="n">required_role</span><span class="o">=</span><span class="s1">&#39;user&#39;</span><span class="p">)</span>
</span><span id="__span-27-584"><a id="__codelineno-27-584" name="__codelineno-27-584" href="#__codelineno-27-584"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">create_order</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">items</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">],</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
</span><span id="__span-27-585"><a id="__codelineno-27-585" name="__codelineno-27-585" href="#__codelineno-27-585"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Create order with inventory management&quot;&quot;&quot;</span>
</span><span id="__span-27-586"><a id="__codelineno-27-586" name="__codelineno-27-586" href="#__codelineno-27-586"></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="__span-27-587"><a id="__codelineno-27-587" name="__codelineno-27-587" href="#__codelineno-27-587"></a>            <span class="c1"># Validate items and calculate total</span>
</span><span id="__span-27-588"><a id="__codelineno-27-588" name="__codelineno-27-588" href="#__codelineno-27-588"></a>            <span class="n">total_amount</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="__span-27-589"><a id="__codelineno-27-589" name="__codelineno-27-589" href="#__codelineno-27-589"></a>            <span class="n">validated_items</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="__span-27-590"><a id="__codelineno-27-590" name="__codelineno-27-590" href="#__codelineno-27-590"></a>
</span><span id="__span-27-591"><a id="__codelineno-27-591" name="__codelineno-27-591" href="#__codelineno-27-591"></a>            <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">items</span><span class="p">:</span>
</span><span id="__span-27-592"><a id="__codelineno-27-592" name="__codelineno-27-592" href="#__codelineno-27-592"></a>                <span class="n">product_id</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;product_id&#39;</span><span class="p">)</span>
</span><span id="__span-27-593"><a id="__codelineno-27-593" name="__codelineno-27-593" href="#__codelineno-27-593"></a>                <span class="n">quantity</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;quantity&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="__span-27-594"><a id="__codelineno-27-594" name="__codelineno-27-594" href="#__codelineno-27-594"></a>
</span><span id="__span-27-595"><a id="__codelineno-27-595" name="__codelineno-27-595" href="#__codelineno-27-595"></a>                <span class="c1"># Get product details</span>
</span><span id="__span-27-596"><a id="__codelineno-27-596" name="__codelineno-27-596" href="#__codelineno-27-596"></a>                <span class="n">product</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">execute_query</span><span class="p">(</span>
</span><span id="__span-27-597"><a id="__codelineno-27-597" name="__codelineno-27-597" href="#__codelineno-27-597"></a>                    <span class="s1">&#39;SELECT * FROM products WHERE id = ? AND is_active = 1&#39;</span><span class="p">,</span>
</span><span id="__span-27-598"><a id="__codelineno-27-598" name="__codelineno-27-598" href="#__codelineno-27-598"></a>                    <span class="p">(</span><span class="n">product_id</span><span class="p">,),</span>
</span><span id="__span-27-599"><a id="__codelineno-27-599" name="__codelineno-27-599" href="#__codelineno-27-599"></a>                    <span class="n">fetch_one</span><span class="o">=</span><span class="kc">True</span>
</span><span id="__span-27-600"><a id="__codelineno-27-600" name="__codelineno-27-600" href="#__codelineno-27-600"></a>                <span class="p">)</span>
</span><span id="__span-27-601"><a id="__codelineno-27-601" name="__codelineno-27-601" href="#__codelineno-27-601"></a>
</span><span id="__span-27-602"><a id="__codelineno-27-602" name="__codelineno-27-602" href="#__codelineno-27-602"></a>                <span class="k">if</span> <span class="ow">not</span> <span class="n">product</span><span class="p">:</span>
</span><span id="__span-27-603"><a id="__codelineno-27-603" name="__codelineno-27-603" href="#__codelineno-27-603"></a>                    <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;success&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span> <span class="s1">&#39;error&#39;</span><span class="p">:</span> <span class="sa">f</span><span class="s1">&#39;Product </span><span class="si">{</span><span class="n">product_id</span><span class="si">}</span><span class="s1"> not found&#39;</span><span class="p">}</span>
</span><span id="__span-27-604"><a id="__codelineno-27-604" name="__codelineno-27-604" href="#__codelineno-27-604"></a>
</span><span id="__span-27-605"><a id="__codelineno-27-605" name="__codelineno-27-605" href="#__codelineno-27-605"></a>                <span class="k">if</span> <span class="n">product</span><span class="p">[</span><span class="s1">&#39;stock_quantity&#39;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">quantity</span><span class="p">:</span>
</span><span id="__span-27-606"><a id="__codelineno-27-606" name="__codelineno-27-606" href="#__codelineno-27-606"></a>                    <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;success&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span> <span class="s1">&#39;error&#39;</span><span class="p">:</span> <span class="sa">f</span><span class="s1">&#39;Insufficient stock for </span><span class="si">{</span><span class="n">product</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">}</span>
</span><span id="__span-27-607"><a id="__codelineno-27-607" name="__codelineno-27-607" href="#__codelineno-27-607"></a>
</span><span id="__span-27-608"><a id="__codelineno-27-608" name="__codelineno-27-608" href="#__codelineno-27-608"></a>                <span class="n">item_total</span> <span class="o">=</span> <span class="n">product</span><span class="p">[</span><span class="s1">&#39;price&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="n">quantity</span>
</span><span id="__span-27-609"><a id="__codelineno-27-609" name="__codelineno-27-609" href="#__codelineno-27-609"></a>                <span class="n">total_amount</span> <span class="o">+=</span> <span class="n">item_total</span>
</span><span id="__span-27-610"><a id="__codelineno-27-610" name="__codelineno-27-610" href="#__codelineno-27-610"></a>
</span><span id="__span-27-611"><a id="__codelineno-27-611" name="__codelineno-27-611" href="#__codelineno-27-611"></a>                <span class="n">validated_items</span><span class="o">.</span><span class="n">append</span><span class="p">({</span>
</span><span id="__span-27-612"><a id="__codelineno-27-612" name="__codelineno-27-612" href="#__codelineno-27-612"></a>                    <span class="s1">&#39;product_id&#39;</span><span class="p">:</span> <span class="n">product_id</span><span class="p">,</span>
</span><span id="__span-27-613"><a id="__codelineno-27-613" name="__codelineno-27-613" href="#__codelineno-27-613"></a>                    <span class="s1">&#39;quantity&#39;</span><span class="p">:</span> <span class="n">quantity</span><span class="p">,</span>
</span><span id="__span-27-614"><a id="__codelineno-27-614" name="__codelineno-27-614" href="#__codelineno-27-614"></a>                    <span class="s1">&#39;price&#39;</span><span class="p">:</span> <span class="n">product</span><span class="p">[</span><span class="s1">&#39;price&#39;</span><span class="p">],</span>
</span><span id="__span-27-615"><a id="__codelineno-27-615" name="__codelineno-27-615" href="#__codelineno-27-615"></a>                    <span class="s1">&#39;total&#39;</span><span class="p">:</span> <span class="n">item_total</span>
</span><span id="__span-27-616"><a id="__codelineno-27-616" name="__codelineno-27-616" href="#__codelineno-27-616"></a>                <span class="p">})</span>
</span><span id="__span-27-617"><a id="__codelineno-27-617" name="__codelineno-27-617" href="#__codelineno-27-617"></a>
</span><span id="__span-27-618"><a id="__codelineno-27-618" name="__codelineno-27-618" href="#__codelineno-27-618"></a>            <span class="c1"># Create order and order items in a transaction</span>
</span><span id="__span-27-619"><a id="__codelineno-27-619" name="__codelineno-27-619" href="#__codelineno-27-619"></a>            <span class="n">operations</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="__span-27-620"><a id="__codelineno-27-620" name="__codelineno-27-620" href="#__codelineno-27-620"></a>
</span><span id="__span-27-621"><a id="__codelineno-27-621" name="__codelineno-27-621" href="#__codelineno-27-621"></a>            <span class="c1"># Insert order</span>
</span><span id="__span-27-622"><a id="__codelineno-27-622" name="__codelineno-27-622" href="#__codelineno-27-622"></a>            <span class="n">operations</span><span class="o">.</span><span class="n">append</span><span class="p">((</span>
</span><span id="__span-27-623"><a id="__codelineno-27-623" name="__codelineno-27-623" href="#__codelineno-27-623"></a>                <span class="s1">&#39;INSERT INTO orders (user_id, total_amount, status) VALUES (?, ?, ?)&#39;</span><span class="p">,</span>
</span><span id="__span-27-624"><a id="__codelineno-27-624" name="__codelineno-27-624" href="#__codelineno-27-624"></a>                <span class="p">(</span><span class="n">user_id</span><span class="p">,</span> <span class="n">total_amount</span><span class="p">,</span> <span class="s1">&#39;pending&#39;</span><span class="p">)</span>
</span><span id="__span-27-625"><a id="__codelineno-27-625" name="__codelineno-27-625" href="#__codelineno-27-625"></a>            <span class="p">))</span>
</span><span id="__span-27-626"><a id="__codelineno-27-626" name="__codelineno-27-626" href="#__codelineno-27-626"></a>
</span><span id="__span-27-627"><a id="__codelineno-27-627" name="__codelineno-27-627" href="#__codelineno-27-627"></a>            <span class="c1"># For simplicity, we&#39;ll execute the order creation separately to get the ID</span>
</span><span id="__span-27-628"><a id="__codelineno-27-628" name="__codelineno-27-628" href="#__codelineno-27-628"></a>            <span class="n">order_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">execute_query</span><span class="p">(</span>
</span><span id="__span-27-629"><a id="__codelineno-27-629" name="__codelineno-27-629" href="#__codelineno-27-629"></a>                <span class="s1">&#39;INSERT INTO orders (user_id, total_amount, status) VALUES (?, ?, ?)&#39;</span><span class="p">,</span>
</span><span id="__span-27-630"><a id="__codelineno-27-630" name="__codelineno-27-630" href="#__codelineno-27-630"></a>                <span class="p">(</span><span class="n">user_id</span><span class="p">,</span> <span class="n">total_amount</span><span class="p">,</span> <span class="s1">&#39;pending&#39;</span><span class="p">)</span>
</span><span id="__span-27-631"><a id="__codelineno-27-631" name="__codelineno-27-631" href="#__codelineno-27-631"></a>            <span class="p">)</span>
</span><span id="__span-27-632"><a id="__codelineno-27-632" name="__codelineno-27-632" href="#__codelineno-27-632"></a>
</span><span id="__span-27-633"><a id="__codelineno-27-633" name="__codelineno-27-633" href="#__codelineno-27-633"></a>            <span class="c1"># Insert order items and update stock</span>
</span><span id="__span-27-634"><a id="__codelineno-27-634" name="__codelineno-27-634" href="#__codelineno-27-634"></a>            <span class="n">transaction_ops</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="__span-27-635"><a id="__codelineno-27-635" name="__codelineno-27-635" href="#__codelineno-27-635"></a>            <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">validated_items</span><span class="p">:</span>
</span><span id="__span-27-636"><a id="__codelineno-27-636" name="__codelineno-27-636" href="#__codelineno-27-636"></a>                <span class="c1"># Insert order item</span>
</span><span id="__span-27-637"><a id="__codelineno-27-637" name="__codelineno-27-637" href="#__codelineno-27-637"></a>                <span class="n">transaction_ops</span><span class="o">.</span><span class="n">append</span><span class="p">((</span>
</span><span id="__span-27-638"><a id="__codelineno-27-638" name="__codelineno-27-638" href="#__codelineno-27-638"></a>                    <span class="s1">&#39;INSERT INTO order_items (order_id, product_id, quantity, price) VALUES (?, ?, ?, ?)&#39;</span><span class="p">,</span>
</span><span id="__span-27-639"><a id="__codelineno-27-639" name="__codelineno-27-639" href="#__codelineno-27-639"></a>                    <span class="p">(</span><span class="n">order_id</span><span class="p">,</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;product_id&#39;</span><span class="p">],</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;quantity&#39;</span><span class="p">],</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;price&#39;</span><span class="p">])</span>
</span><span id="__span-27-640"><a id="__codelineno-27-640" name="__codelineno-27-640" href="#__codelineno-27-640"></a>                <span class="p">))</span>
</span><span id="__span-27-641"><a id="__codelineno-27-641" name="__codelineno-27-641" href="#__codelineno-27-641"></a>
</span><span id="__span-27-642"><a id="__codelineno-27-642" name="__codelineno-27-642" href="#__codelineno-27-642"></a>                <span class="c1"># Update stock</span>
</span><span id="__span-27-643"><a id="__codelineno-27-643" name="__codelineno-27-643" href="#__codelineno-27-643"></a>                <span class="n">transaction_ops</span><span class="o">.</span><span class="n">append</span><span class="p">((</span>
</span><span id="__span-27-644"><a id="__codelineno-27-644" name="__codelineno-27-644" href="#__codelineno-27-644"></a>                    <span class="s1">&#39;UPDATE products SET stock_quantity = stock_quantity - ? WHERE id = ?&#39;</span><span class="p">,</span>
</span><span id="__span-27-645"><a id="__codelineno-27-645" name="__codelineno-27-645" href="#__codelineno-27-645"></a>                    <span class="p">(</span><span class="n">item</span><span class="p">[</span><span class="s1">&#39;quantity&#39;</span><span class="p">],</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;product_id&#39;</span><span class="p">])</span>
</span><span id="__span-27-646"><a id="__codelineno-27-646" name="__codelineno-27-646" href="#__codelineno-27-646"></a>                <span class="p">))</span>
</span><span id="__span-27-647"><a id="__codelineno-27-647" name="__codelineno-27-647" href="#__codelineno-27-647"></a>
</span><span id="__span-27-648"><a id="__codelineno-27-648" name="__codelineno-27-648" href="#__codelineno-27-648"></a>            <span class="c1"># Execute transaction</span>
</span><span id="__span-27-649"><a id="__codelineno-27-649" name="__codelineno-27-649" href="#__codelineno-27-649"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">execute_transaction</span><span class="p">(</span><span class="n">transaction_ops</span><span class="p">)</span>
</span><span id="__span-27-650"><a id="__codelineno-27-650" name="__codelineno-27-650" href="#__codelineno-27-650"></a>
</span><span id="__span-27-651"><a id="__codelineno-27-651" name="__codelineno-27-651" href="#__codelineno-27-651"></a>            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ğŸ“¦ Order created: </span><span class="si">{</span><span class="n">order_id</span><span class="si">}</span><span class="s2"> for user </span><span class="si">{</span><span class="n">user_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-27-652"><a id="__codelineno-27-652" name="__codelineno-27-652" href="#__codelineno-27-652"></a>            <span class="k">return</span> <span class="p">{</span>
</span><span id="__span-27-653"><a id="__codelineno-27-653" name="__codelineno-27-653" href="#__codelineno-27-653"></a>                <span class="s1">&#39;success&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="__span-27-654"><a id="__codelineno-27-654" name="__codelineno-27-654" href="#__codelineno-27-654"></a>                <span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-27-655"><a id="__codelineno-27-655" name="__codelineno-27-655" href="#__codelineno-27-655"></a>                    <span class="s1">&#39;order_id&#39;</span><span class="p">:</span> <span class="n">order_id</span><span class="p">,</span>
</span><span id="__span-27-656"><a id="__codelineno-27-656" name="__codelineno-27-656" href="#__codelineno-27-656"></a>                    <span class="s1">&#39;total_amount&#39;</span><span class="p">:</span> <span class="n">total_amount</span><span class="p">,</span>
</span><span id="__span-27-657"><a id="__codelineno-27-657" name="__codelineno-27-657" href="#__codelineno-27-657"></a>                    <span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;pending&#39;</span><span class="p">,</span>
</span><span id="__span-27-658"><a id="__codelineno-27-658" name="__codelineno-27-658" href="#__codelineno-27-658"></a>                    <span class="s1">&#39;items&#39;</span><span class="p">:</span> <span class="n">validated_items</span>
</span><span id="__span-27-659"><a id="__codelineno-27-659" name="__codelineno-27-659" href="#__codelineno-27-659"></a>                <span class="p">}</span>
</span><span id="__span-27-660"><a id="__codelineno-27-660" name="__codelineno-27-660" href="#__codelineno-27-660"></a>            <span class="p">}</span>
</span><span id="__span-27-661"><a id="__codelineno-27-661" name="__codelineno-27-661" href="#__codelineno-27-661"></a>
</span><span id="__span-27-662"><a id="__codelineno-27-662" name="__codelineno-27-662" href="#__codelineno-27-662"></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="__span-27-663"><a id="__codelineno-27-663" name="__codelineno-27-663" href="#__codelineno-27-663"></a>            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Order creation failed: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-27-664"><a id="__codelineno-27-664" name="__codelineno-27-664" href="#__codelineno-27-664"></a>            <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;success&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span> <span class="s1">&#39;error&#39;</span><span class="p">:</span> <span class="s1">&#39;Order creation failed&#39;</span><span class="p">}</span>
</span><span id="__span-27-665"><a id="__codelineno-27-665" name="__codelineno-27-665" href="#__codelineno-27-665"></a>
</span><span id="__span-27-666"><a id="__codelineno-27-666" name="__codelineno-27-666" href="#__codelineno-27-666"></a>    <span class="nd">@AuthenticationManager</span><span class="o">.</span><span class="n">require_auth</span><span class="p">(</span><span class="n">required_role</span><span class="o">=</span><span class="s1">&#39;admin&#39;</span><span class="p">)</span>
</span><span id="__span-27-667"><a id="__codelineno-27-667" name="__codelineno-27-667" href="#__codelineno-27-667"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_analytics_dashboard</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
</span><span id="__span-27-668"><a id="__codelineno-27-668" name="__codelineno-27-668" href="#__codelineno-27-668"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get business analytics dashboard data&quot;&quot;&quot;</span>
</span><span id="__span-27-669"><a id="__codelineno-27-669" name="__codelineno-27-669" href="#__codelineno-27-669"></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="__span-27-670"><a id="__codelineno-27-670" name="__codelineno-27-670" href="#__codelineno-27-670"></a>            <span class="n">analytics</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="__span-27-671"><a id="__codelineno-27-671" name="__codelineno-27-671" href="#__codelineno-27-671"></a>
</span><span id="__span-27-672"><a id="__codelineno-27-672" name="__codelineno-27-672" href="#__codelineno-27-672"></a>            <span class="c1"># User statistics</span>
</span><span id="__span-27-673"><a id="__codelineno-27-673" name="__codelineno-27-673" href="#__codelineno-27-673"></a>            <span class="n">user_stats</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">execute_query</span><span class="p">(</span>
</span><span id="__span-27-674"><a id="__codelineno-27-674" name="__codelineno-27-674" href="#__codelineno-27-674"></a><span class="w">                </span><span class="sd">&#39;&#39;&#39;SELECT </span>
</span><span id="__span-27-675"><a id="__codelineno-27-675" name="__codelineno-27-675" href="#__codelineno-27-675"></a><span class="sd">                    COUNT(*) as total_users,</span>
</span><span id="__span-27-676"><a id="__codelineno-27-676" name="__codelineno-27-676" href="#__codelineno-27-676"></a><span class="sd">                    COUNT(CASE WHEN created_at &gt;= datetime(&#39;now&#39;, &#39;-30 days&#39;) THEN 1 END) as new_users_30d,</span>
</span><span id="__span-27-677"><a id="__codelineno-27-677" name="__codelineno-27-677" href="#__codelineno-27-677"></a><span class="sd">                    COUNT(CASE WHEN last_login &gt;= datetime(&#39;now&#39;, &#39;-7 days&#39;) THEN 1 END) as active_users_7d</span>
</span><span id="__span-27-678"><a id="__codelineno-27-678" name="__codelineno-27-678" href="#__codelineno-27-678"></a><span class="sd">                   FROM users WHERE is_active = 1&#39;&#39;&#39;</span><span class="p">,</span>
</span><span id="__span-27-679"><a id="__codelineno-27-679" name="__codelineno-27-679" href="#__codelineno-27-679"></a>                <span class="n">fetch_one</span><span class="o">=</span><span class="kc">True</span>
</span><span id="__span-27-680"><a id="__codelineno-27-680" name="__codelineno-27-680" href="#__codelineno-27-680"></a>            <span class="p">)</span>
</span><span id="__span-27-681"><a id="__codelineno-27-681" name="__codelineno-27-681" href="#__codelineno-27-681"></a>            <span class="n">analytics</span><span class="p">[</span><span class="s1">&#39;users&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">user_stats</span>
</span><span id="__span-27-682"><a id="__codelineno-27-682" name="__codelineno-27-682" href="#__codelineno-27-682"></a>
</span><span id="__span-27-683"><a id="__codelineno-27-683" name="__codelineno-27-683" href="#__codelineno-27-683"></a>            <span class="c1"># Order statistics</span>
</span><span id="__span-27-684"><a id="__codelineno-27-684" name="__codelineno-27-684" href="#__codelineno-27-684"></a>            <span class="n">order_stats</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">execute_query</span><span class="p">(</span>
</span><span id="__span-27-685"><a id="__codelineno-27-685" name="__codelineno-27-685" href="#__codelineno-27-685"></a><span class="w">                </span><span class="sd">&#39;&#39;&#39;SELECT </span>
</span><span id="__span-27-686"><a id="__codelineno-27-686" name="__codelineno-27-686" href="#__codelineno-27-686"></a><span class="sd">                    COUNT(*) as total_orders,</span>
</span><span id="__span-27-687"><a id="__codelineno-27-687" name="__codelineno-27-687" href="#__codelineno-27-687"></a><span class="sd">                    COUNT(CASE WHEN created_at &gt;= datetime(&#39;now&#39;, &#39;-30 days&#39;) THEN 1 END) as orders_30d,</span>
</span><span id="__span-27-688"><a id="__codelineno-27-688" name="__codelineno-27-688" href="#__codelineno-27-688"></a><span class="sd">                    COALESCE(SUM(total_amount), 0) as total_revenue,</span>
</span><span id="__span-27-689"><a id="__codelineno-27-689" name="__codelineno-27-689" href="#__codelineno-27-689"></a><span class="sd">                    COALESCE(SUM(CASE WHEN created_at &gt;= datetime(&#39;now&#39;, &#39;-30 days&#39;) THEN total_amount END), 0) as revenue_30d</span>
</span><span id="__span-27-690"><a id="__codelineno-27-690" name="__codelineno-27-690" href="#__codelineno-27-690"></a><span class="sd">                   FROM orders&#39;&#39;&#39;</span><span class="p">,</span>
</span><span id="__span-27-691"><a id="__codelineno-27-691" name="__codelineno-27-691" href="#__codelineno-27-691"></a>                <span class="n">fetch_one</span><span class="o">=</span><span class="kc">True</span>
</span><span id="__span-27-692"><a id="__codelineno-27-692" name="__codelineno-27-692" href="#__codelineno-27-692"></a>            <span class="p">)</span>
</span><span id="__span-27-693"><a id="__codelineno-27-693" name="__codelineno-27-693" href="#__codelineno-27-693"></a>            <span class="n">analytics</span><span class="p">[</span><span class="s1">&#39;orders&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">order_stats</span>
</span><span id="__span-27-694"><a id="__codelineno-27-694" name="__codelineno-27-694" href="#__codelineno-27-694"></a>
</span><span id="__span-27-695"><a id="__codelineno-27-695" name="__codelineno-27-695" href="#__codelineno-27-695"></a>            <span class="c1"># Product statistics</span>
</span><span id="__span-27-696"><a id="__codelineno-27-696" name="__codelineno-27-696" href="#__codelineno-27-696"></a>            <span class="n">product_stats</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">execute_query</span><span class="p">(</span>
</span><span id="__span-27-697"><a id="__codelineno-27-697" name="__codelineno-27-697" href="#__codelineno-27-697"></a><span class="w">                </span><span class="sd">&#39;&#39;&#39;SELECT </span>
</span><span id="__span-27-698"><a id="__codelineno-27-698" name="__codelineno-27-698" href="#__codelineno-27-698"></a><span class="sd">                    COUNT(*) as total_products,</span>
</span><span id="__span-27-699"><a id="__codelineno-27-699" name="__codelineno-27-699" href="#__codelineno-27-699"></a><span class="sd">                    COUNT(CASE WHEN stock_quantity &gt; 0 THEN 1 END) as in_stock,</span>
</span><span id="__span-27-700"><a id="__codelineno-27-700" name="__codelineno-27-700" href="#__codelineno-27-700"></a><span class="sd">                    COUNT(CASE WHEN stock_quantity = 0 THEN 1 END) as out_of_stock</span>
</span><span id="__span-27-701"><a id="__codelineno-27-701" name="__codelineno-27-701" href="#__codelineno-27-701"></a><span class="sd">                   FROM products WHERE is_active = 1&#39;&#39;&#39;</span><span class="p">,</span>
</span><span id="__span-27-702"><a id="__codelineno-27-702" name="__codelineno-27-702" href="#__codelineno-27-702"></a>                <span class="n">fetch_one</span><span class="o">=</span><span class="kc">True</span>
</span><span id="__span-27-703"><a id="__codelineno-27-703" name="__codelineno-27-703" href="#__codelineno-27-703"></a>            <span class="p">)</span>
</span><span id="__span-27-704"><a id="__codelineno-27-704" name="__codelineno-27-704" href="#__codelineno-27-704"></a>            <span class="n">analytics</span><span class="p">[</span><span class="s1">&#39;products&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">product_stats</span>
</span><span id="__span-27-705"><a id="__codelineno-27-705" name="__codelineno-27-705" href="#__codelineno-27-705"></a>
</span><span id="__span-27-706"><a id="__codelineno-27-706" name="__codelineno-27-706" href="#__codelineno-27-706"></a>            <span class="c1"># Top selling products</span>
</span><span id="__span-27-707"><a id="__codelineno-27-707" name="__codelineno-27-707" href="#__codelineno-27-707"></a>            <span class="n">top_products</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">execute_query</span><span class="p">(</span>
</span><span id="__span-27-708"><a id="__codelineno-27-708" name="__codelineno-27-708" href="#__codelineno-27-708"></a><span class="w">                </span><span class="sd">&#39;&#39;&#39;SELECT p.name, SUM(oi.quantity) as total_sold, SUM(oi.quantity * oi.price) as revenue</span>
</span><span id="__span-27-709"><a id="__codelineno-27-709" name="__codelineno-27-709" href="#__codelineno-27-709"></a><span class="sd">                   FROM products p</span>
</span><span id="__span-27-710"><a id="__codelineno-27-710" name="__codelineno-27-710" href="#__codelineno-27-710"></a><span class="sd">                   JOIN order_items oi ON p.id = oi.product_id</span>
</span><span id="__span-27-711"><a id="__codelineno-27-711" name="__codelineno-27-711" href="#__codelineno-27-711"></a><span class="sd">                   JOIN orders o ON oi.order_id = o.id</span>
</span><span id="__span-27-712"><a id="__codelineno-27-712" name="__codelineno-27-712" href="#__codelineno-27-712"></a><span class="sd">                   WHERE o.created_at &gt;= datetime(&#39;now&#39;, &#39;-30 days&#39;)</span>
</span><span id="__span-27-713"><a id="__codelineno-27-713" name="__codelineno-27-713" href="#__codelineno-27-713"></a><span class="sd">                   GROUP BY p.id, p.name</span>
</span><span id="__span-27-714"><a id="__codelineno-27-714" name="__codelineno-27-714" href="#__codelineno-27-714"></a><span class="sd">                   ORDER BY total_sold DESC</span>
</span><span id="__span-27-715"><a id="__codelineno-27-715" name="__codelineno-27-715" href="#__codelineno-27-715"></a><span class="sd">                   LIMIT 10&#39;&#39;&#39;</span><span class="p">,</span>
</span><span id="__span-27-716"><a id="__codelineno-27-716" name="__codelineno-27-716" href="#__codelineno-27-716"></a>                <span class="n">fetch_all</span><span class="o">=</span><span class="kc">True</span>
</span><span id="__span-27-717"><a id="__codelineno-27-717" name="__codelineno-27-717" href="#__codelineno-27-717"></a>            <span class="p">)</span>
</span><span id="__span-27-718"><a id="__codelineno-27-718" name="__codelineno-27-718" href="#__codelineno-27-718"></a>            <span class="n">analytics</span><span class="p">[</span><span class="s1">&#39;top_products&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">top_products</span>
</span><span id="__span-27-719"><a id="__codelineno-27-719" name="__codelineno-27-719" href="#__codelineno-27-719"></a>
</span><span id="__span-27-720"><a id="__codelineno-27-720" name="__codelineno-27-720" href="#__codelineno-27-720"></a>            <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;success&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="n">analytics</span><span class="p">}</span>
</span><span id="__span-27-721"><a id="__codelineno-27-721" name="__codelineno-27-721" href="#__codelineno-27-721"></a>
</span><span id="__span-27-722"><a id="__codelineno-27-722" name="__codelineno-27-722" href="#__codelineno-27-722"></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="__span-27-723"><a id="__codelineno-27-723" name="__codelineno-27-723" href="#__codelineno-27-723"></a>            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Analytics dashboard failed: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-27-724"><a id="__codelineno-27-724" name="__codelineno-27-724" href="#__codelineno-27-724"></a>            <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;success&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span> <span class="s1">&#39;error&#39;</span><span class="p">:</span> <span class="s1">&#39;Failed to generate analytics&#39;</span><span class="p">}</span>
</span><span id="__span-27-725"><a id="__codelineno-27-725" name="__codelineno-27-725" href="#__codelineno-27-725"></a>
</span><span id="__span-27-726"><a id="__codelineno-27-726" name="__codelineno-27-726" href="#__codelineno-27-726"></a><span class="k">class</span><span class="w"> </span><span class="nc">APIManager</span><span class="p">:</span>
</span><span id="__span-27-727"><a id="__codelineno-27-727" name="__codelineno-27-727" href="#__codelineno-27-727"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;RESTful API endpoint manager with logging and rate limiting&quot;&quot;&quot;</span>
</span><span id="__span-27-728"><a id="__codelineno-27-728" name="__codelineno-27-728" href="#__codelineno-27-728"></a>
</span><span id="__span-27-729"><a id="__codelineno-27-729" name="__codelineno-27-729" href="#__codelineno-27-729"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">db_manager</span><span class="p">:</span> <span class="n">DatabaseManager</span><span class="p">,</span> <span class="n">auth_manager</span><span class="p">:</span> <span class="n">AuthenticationManager</span><span class="p">,</span> 
</span><span id="__span-27-730"><a id="__codelineno-27-730" name="__codelineno-27-730" href="#__codelineno-27-730"></a>                 <span class="n">business_manager</span><span class="p">:</span> <span class="n">BusinessLogicManager</span><span class="p">):</span>
</span><span id="__span-27-731"><a id="__codelineno-27-731" name="__codelineno-27-731" href="#__codelineno-27-731"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">db</span> <span class="o">=</span> <span class="n">db_manager</span>
</span><span id="__span-27-732"><a id="__codelineno-27-732" name="__codelineno-27-732" href="#__codelineno-27-732"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">auth</span> <span class="o">=</span> <span class="n">auth_manager</span>
</span><span id="__span-27-733"><a id="__codelineno-27-733" name="__codelineno-27-733" href="#__codelineno-27-733"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">business</span> <span class="o">=</span> <span class="n">business_manager</span>
</span><span id="__span-27-734"><a id="__codelineno-27-734" name="__codelineno-27-734" href="#__codelineno-27-734"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">rate_limits</span> <span class="o">=</span> <span class="p">{}</span>  <span class="c1"># In production, use Redis</span>
</span><span id="__span-27-735"><a id="__codelineno-27-735" name="__codelineno-27-735" href="#__codelineno-27-735"></a>
</span><span id="__span-27-736"><a id="__codelineno-27-736" name="__codelineno-27-736" href="#__codelineno-27-736"></a>        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;ğŸŒ API manager initialized&quot;</span><span class="p">)</span>
</span><span id="__span-27-737"><a id="__codelineno-27-737" name="__codelineno-27-737" href="#__codelineno-27-737"></a>
</span><span id="__span-27-738"><a id="__codelineno-27-738" name="__codelineno-27-738" href="#__codelineno-27-738"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">log_api_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">endpoint</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">method</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">user_id</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> 
</span><span id="__span-27-739"><a id="__codelineno-27-739" name="__codelineno-27-739" href="#__codelineno-27-739"></a>                       <span class="n">ip_address</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">response_code</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">200</span><span class="p">,</span> 
</span><span id="__span-27-740"><a id="__codelineno-27-740" name="__codelineno-27-740" href="#__codelineno-27-740"></a>                       <span class="n">response_time</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">0</span><span class="p">):</span>
</span><span id="__span-27-741"><a id="__codelineno-27-741" name="__codelineno-27-741" href="#__codelineno-27-741"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Log API request for monitoring and analytics&quot;&quot;&quot;</span>
</span><span id="__span-27-742"><a id="__codelineno-27-742" name="__codelineno-27-742" href="#__codelineno-27-742"></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="__span-27-743"><a id="__codelineno-27-743" name="__codelineno-27-743" href="#__codelineno-27-743"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">execute_query</span><span class="p">(</span>
</span><span id="__span-27-744"><a id="__codelineno-27-744" name="__codelineno-27-744" href="#__codelineno-27-744"></a><span class="w">                </span><span class="sd">&#39;&#39;&#39;INSERT INTO api_logs (endpoint, method, user_id, ip_address, response_code, response_time)</span>
</span><span id="__span-27-745"><a id="__codelineno-27-745" name="__codelineno-27-745" href="#__codelineno-27-745"></a><span class="sd">                   VALUES (?, ?, ?, ?, ?, ?)&#39;&#39;&#39;</span><span class="p">,</span>
</span><span id="__span-27-746"><a id="__codelineno-27-746" name="__codelineno-27-746" href="#__codelineno-27-746"></a>                <span class="p">(</span><span class="n">endpoint</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">user_id</span><span class="p">,</span> <span class="n">ip_address</span><span class="p">,</span> <span class="n">response_code</span><span class="p">,</span> <span class="n">response_time</span><span class="p">)</span>
</span><span id="__span-27-747"><a id="__codelineno-27-747" name="__codelineno-27-747" href="#__codelineno-27-747"></a>            <span class="p">)</span>
</span><span id="__span-27-748"><a id="__codelineno-27-748" name="__codelineno-27-748" href="#__codelineno-27-748"></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="__span-27-749"><a id="__codelineno-27-749" name="__codelineno-27-749" href="#__codelineno-27-749"></a>            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to log API request: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-27-750"><a id="__codelineno-27-750" name="__codelineno-27-750" href="#__codelineno-27-750"></a>
</span><span id="__span-27-751"><a id="__codelineno-27-751" name="__codelineno-27-751" href="#__codelineno-27-751"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">check_rate_limit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">endpoint</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">limit</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">100</span><span class="p">,</span> <span class="n">window</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">3600</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="__span-27-752"><a id="__codelineno-27-752" name="__codelineno-27-752" href="#__codelineno-27-752"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Check if user has exceeded rate limit&quot;&quot;&quot;</span>
</span><span id="__span-27-753"><a id="__codelineno-27-753" name="__codelineno-27-753" href="#__codelineno-27-753"></a>        <span class="n">key</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">user_id</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">endpoint</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="__span-27-754"><a id="__codelineno-27-754" name="__codelineno-27-754" href="#__codelineno-27-754"></a>        <span class="n">current_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
</span><span id="__span-27-755"><a id="__codelineno-27-755" name="__codelineno-27-755" href="#__codelineno-27-755"></a>
</span><span id="__span-27-756"><a id="__codelineno-27-756" name="__codelineno-27-756" href="#__codelineno-27-756"></a>        <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">rate_limits</span><span class="p">:</span>
</span><span id="__span-27-757"><a id="__codelineno-27-757" name="__codelineno-27-757" href="#__codelineno-27-757"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">rate_limits</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="__span-27-758"><a id="__codelineno-27-758" name="__codelineno-27-758" href="#__codelineno-27-758"></a>
</span><span id="__span-27-759"><a id="__codelineno-27-759" name="__codelineno-27-759" href="#__codelineno-27-759"></a>        <span class="c1"># Remove old requests outside the window</span>
</span><span id="__span-27-760"><a id="__codelineno-27-760" name="__codelineno-27-760" href="#__codelineno-27-760"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">rate_limits</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="__span-27-761"><a id="__codelineno-27-761" name="__codelineno-27-761" href="#__codelineno-27-761"></a>            <span class="n">timestamp</span> <span class="k">for</span> <span class="n">timestamp</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">rate_limits</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
</span><span id="__span-27-762"><a id="__codelineno-27-762" name="__codelineno-27-762" href="#__codelineno-27-762"></a>            <span class="k">if</span> <span class="n">current_time</span> <span class="o">-</span> <span class="n">timestamp</span> <span class="o">&lt;</span> <span class="n">window</span>
</span><span id="__span-27-763"><a id="__codelineno-27-763" name="__codelineno-27-763" href="#__codelineno-27-763"></a>        <span class="p">]</span>
</span><span id="__span-27-764"><a id="__codelineno-27-764" name="__codelineno-27-764" href="#__codelineno-27-764"></a>
</span><span id="__span-27-765"><a id="__codelineno-27-765" name="__codelineno-27-765" href="#__codelineno-27-765"></a>        <span class="c1"># Check if limit exceeded</span>
</span><span id="__span-27-766"><a id="__codelineno-27-766" name="__codelineno-27-766" href="#__codelineno-27-766"></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rate_limits</span><span class="p">[</span><span class="n">key</span><span class="p">])</span> <span class="o">&gt;=</span> <span class="n">limit</span><span class="p">:</span>
</span><span id="__span-27-767"><a id="__codelineno-27-767" name="__codelineno-27-767" href="#__codelineno-27-767"></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="__span-27-768"><a id="__codelineno-27-768" name="__codelineno-27-768" href="#__codelineno-27-768"></a>
</span><span id="__span-27-769"><a id="__codelineno-27-769" name="__codelineno-27-769" href="#__codelineno-27-769"></a>        <span class="c1"># Add current request</span>
</span><span id="__span-27-770"><a id="__codelineno-27-770" name="__codelineno-27-770" href="#__codelineno-27-770"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">rate_limits</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">current_time</span><span class="p">)</span>
</span><span id="__span-27-771"><a id="__codelineno-27-771" name="__codelineno-27-771" href="#__codelineno-27-771"></a>        <span class="k">return</span> <span class="kc">True</span>
</span><span id="__span-27-772"><a id="__codelineno-27-772" name="__codelineno-27-772" href="#__codelineno-27-772"></a>
</span><span id="__span-27-773"><a id="__codelineno-27-773" name="__codelineno-27-773" href="#__codelineno-27-773"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">handle_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">endpoint</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">method</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">Dict</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> 
</span><span id="__span-27-774"><a id="__codelineno-27-774" name="__codelineno-27-774" href="#__codelineno-27-774"></a>                      <span class="n">auth_token</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">ip_address</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;127.0.0.1&#39;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
</span><span id="__span-27-775"><a id="__codelineno-27-775" name="__codelineno-27-775" href="#__codelineno-27-775"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle API request with logging and rate limiting&quot;&quot;&quot;</span>
</span><span id="__span-27-776"><a id="__codelineno-27-776" name="__codelineno-27-776" href="#__codelineno-27-776"></a>        <span class="n">start_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
</span><span id="__span-27-777"><a id="__codelineno-27-777" name="__codelineno-27-777" href="#__codelineno-27-777"></a>        <span class="n">user_id</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="__span-27-778"><a id="__codelineno-27-778" name="__codelineno-27-778" href="#__codelineno-27-778"></a>
</span><span id="__span-27-779"><a id="__codelineno-27-779" name="__codelineno-27-779" href="#__codelineno-27-779"></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="__span-27-780"><a id="__codelineno-27-780" name="__codelineno-27-780" href="#__codelineno-27-780"></a>            <span class="c1"># Authenticate if token provided</span>
</span><span id="__span-27-781"><a id="__codelineno-27-781" name="__codelineno-27-781" href="#__codelineno-27-781"></a>            <span class="k">if</span> <span class="n">auth_token</span><span class="p">:</span>
</span><span id="__span-27-782"><a id="__codelineno-27-782" name="__codelineno-27-782" href="#__codelineno-27-782"></a>                <span class="n">auth_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">auth</span><span class="o">.</span><span class="n">verify_jwt_token</span><span class="p">(</span><span class="n">auth_token</span><span class="p">)</span>
</span><span id="__span-27-783"><a id="__codelineno-27-783" name="__codelineno-27-783" href="#__codelineno-27-783"></a>                <span class="k">if</span> <span class="n">auth_result</span><span class="p">[</span><span class="s1">&#39;success&#39;</span><span class="p">]:</span>
</span><span id="__span-27-784"><a id="__codelineno-27-784" name="__codelineno-27-784" href="#__codelineno-27-784"></a>                    <span class="n">user_id</span> <span class="o">=</span> <span class="n">auth_result</span><span class="p">[</span><span class="s1">&#39;user&#39;</span><span class="p">][</span><span class="s1">&#39;user_id&#39;</span><span class="p">]</span>
</span><span id="__span-27-785"><a id="__codelineno-27-785" name="__codelineno-27-785" href="#__codelineno-27-785"></a>
</span><span id="__span-27-786"><a id="__codelineno-27-786" name="__codelineno-27-786" href="#__codelineno-27-786"></a>                    <span class="c1"># Check rate limit</span>
</span><span id="__span-27-787"><a id="__codelineno-27-787" name="__codelineno-27-787" href="#__codelineno-27-787"></a>                    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_rate_limit</span><span class="p">(</span><span class="n">user_id</span><span class="p">,</span> <span class="n">endpoint</span><span class="p">):</span>
</span><span id="__span-27-788"><a id="__codelineno-27-788" name="__codelineno-27-788" href="#__codelineno-27-788"></a>                        <span class="n">response</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;success&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span> <span class="s1">&#39;error&#39;</span><span class="p">:</span> <span class="s1">&#39;Rate limit exceeded&#39;</span><span class="p">}</span>
</span><span id="__span-27-789"><a id="__codelineno-27-789" name="__codelineno-27-789" href="#__codelineno-27-789"></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">log_api_request</span><span class="p">(</span><span class="n">endpoint</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">user_id</span><span class="p">,</span> <span class="n">ip_address</span><span class="p">,</span> <span class="mi">429</span><span class="p">,</span> 
</span><span id="__span-27-790"><a id="__codelineno-27-790" name="__codelineno-27-790" href="#__codelineno-27-790"></a>                                           <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start_time</span><span class="p">)</span>
</span><span id="__span-27-791"><a id="__codelineno-27-791" name="__codelineno-27-791" href="#__codelineno-27-791"></a>                        <span class="k">return</span> <span class="n">response</span>
</span><span id="__span-27-792"><a id="__codelineno-27-792" name="__codelineno-27-792" href="#__codelineno-27-792"></a>
</span><span id="__span-27-793"><a id="__codelineno-27-793" name="__codelineno-27-793" href="#__codelineno-27-793"></a>            <span class="c1"># Route request to appropriate handler</span>
</span><span id="__span-27-794"><a id="__codelineno-27-794" name="__codelineno-27-794" href="#__codelineno-27-794"></a>            <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">route_request</span><span class="p">(</span><span class="n">endpoint</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">data</span> <span class="ow">or</span> <span class="p">{},</span> <span class="n">auth_token</span><span class="p">)</span>
</span><span id="__span-27-795"><a id="__codelineno-27-795" name="__codelineno-27-795" href="#__codelineno-27-795"></a>
</span><span id="__span-27-796"><a id="__codelineno-27-796" name="__codelineno-27-796" href="#__codelineno-27-796"></a>            <span class="c1"># Log successful request</span>
</span><span id="__span-27-797"><a id="__codelineno-27-797" name="__codelineno-27-797" href="#__codelineno-27-797"></a>            <span class="n">response_code</span> <span class="o">=</span> <span class="mi">200</span> <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;success&#39;</span><span class="p">)</span> <span class="k">else</span> <span class="mi">400</span>
</span><span id="__span-27-798"><a id="__codelineno-27-798" name="__codelineno-27-798" href="#__codelineno-27-798"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">log_api_request</span><span class="p">(</span><span class="n">endpoint</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">user_id</span><span class="p">,</span> <span class="n">ip_address</span><span class="p">,</span> <span class="n">response_code</span><span class="p">,</span>
</span><span id="__span-27-799"><a id="__codelineno-27-799" name="__codelineno-27-799" href="#__codelineno-27-799"></a>                               <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start_time</span><span class="p">)</span>
</span><span id="__span-27-800"><a id="__codelineno-27-800" name="__codelineno-27-800" href="#__codelineno-27-800"></a>
</span><span id="__span-27-801"><a id="__codelineno-27-801" name="__codelineno-27-801" href="#__codelineno-27-801"></a>            <span class="k">return</span> <span class="n">response</span>
</span><span id="__span-27-802"><a id="__codelineno-27-802" name="__codelineno-27-802" href="#__codelineno-27-802"></a>
</span><span id="__span-27-803"><a id="__codelineno-27-803" name="__codelineno-27-803" href="#__codelineno-27-803"></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="__span-27-804"><a id="__codelineno-27-804" name="__codelineno-27-804" href="#__codelineno-27-804"></a>            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;API request failed: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-27-805"><a id="__codelineno-27-805" name="__codelineno-27-805" href="#__codelineno-27-805"></a>            <span class="n">response</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;success&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span> <span class="s1">&#39;error&#39;</span><span class="p">:</span> <span class="s1">&#39;Internal server error&#39;</span><span class="p">}</span>
</span><span id="__span-27-806"><a id="__codelineno-27-806" name="__codelineno-27-806" href="#__codelineno-27-806"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">log_api_request</span><span class="p">(</span><span class="n">endpoint</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">user_id</span><span class="p">,</span> <span class="n">ip_address</span><span class="p">,</span> <span class="mi">500</span><span class="p">,</span>
</span><span id="__span-27-807"><a id="__codelineno-27-807" name="__codelineno-27-807" href="#__codelineno-27-807"></a>                               <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start_time</span><span class="p">)</span>
</span><span id="__span-27-808"><a id="__codelineno-27-808" name="__codelineno-27-808" href="#__codelineno-27-808"></a>            <span class="k">return</span> <span class="n">response</span>
</span><span id="__span-27-809"><a id="__codelineno-27-809" name="__codelineno-27-809" href="#__codelineno-27-809"></a>
</span><span id="__span-27-810"><a id="__codelineno-27-810" name="__codelineno-27-810" href="#__codelineno-27-810"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">route_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">endpoint</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">method</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">auth_token</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
</span><span id="__span-27-811"><a id="__codelineno-27-811" name="__codelineno-27-811" href="#__codelineno-27-811"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Route API request to appropriate handler&quot;&quot;&quot;</span>
</span><span id="__span-27-812"><a id="__codelineno-27-812" name="__codelineno-27-812" href="#__codelineno-27-812"></a>
</span><span id="__span-27-813"><a id="__codelineno-27-813" name="__codelineno-27-813" href="#__codelineno-27-813"></a>        <span class="c1"># Authentication endpoints</span>
</span><span id="__span-27-814"><a id="__codelineno-27-814" name="__codelineno-27-814" href="#__codelineno-27-814"></a>        <span class="k">if</span> <span class="n">endpoint</span> <span class="o">==</span> <span class="s1">&#39;/api/auth/register&#39;</span> <span class="ow">and</span> <span class="n">method</span> <span class="o">==</span> <span class="s1">&#39;POST&#39;</span><span class="p">:</span>
</span><span id="__span-27-815"><a id="__codelineno-27-815" name="__codelineno-27-815" href="#__codelineno-27-815"></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">auth</span><span class="o">.</span><span class="n">register_user</span><span class="p">(</span>
</span><span id="__span-27-816"><a id="__codelineno-27-816" name="__codelineno-27-816" href="#__codelineno-27-816"></a>                <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;username&#39;</span><span class="p">),</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;email&#39;</span><span class="p">),</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;password&#39;</span><span class="p">)</span>
</span><span id="__span-27-817"><a id="__codelineno-27-817" name="__codelineno-27-817" href="#__codelineno-27-817"></a>            <span class="p">)</span>
</span><span id="__span-27-818"><a id="__codelineno-27-818" name="__codelineno-27-818" href="#__codelineno-27-818"></a>
</span><span id="__span-27-819"><a id="__codelineno-27-819" name="__codelineno-27-819" href="#__codelineno-27-819"></a>        <span class="k">if</span> <span class="n">endpoint</span> <span class="o">==</span> <span class="s1">&#39;/api/auth/login&#39;</span> <span class="ow">and</span> <span class="n">method</span> <span class="o">==</span> <span class="s1">&#39;POST&#39;</span><span class="p">:</span>
</span><span id="__span-27-820"><a id="__codelineno-27-820" name="__codelineno-27-820" href="#__codelineno-27-820"></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">auth</span><span class="o">.</span><span class="n">authenticate_user</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;username&#39;</span><span class="p">),</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;password&#39;</span><span class="p">))</span>
</span><span id="__span-27-821"><a id="__codelineno-27-821" name="__codelineno-27-821" href="#__codelineno-27-821"></a>
</span><span id="__span-27-822"><a id="__codelineno-27-822" name="__codelineno-27-822" href="#__codelineno-27-822"></a>        <span class="k">if</span> <span class="n">endpoint</span> <span class="o">==</span> <span class="s1">&#39;/api/auth/logout&#39;</span> <span class="ow">and</span> <span class="n">method</span> <span class="o">==</span> <span class="s1">&#39;POST&#39;</span><span class="p">:</span>
</span><span id="__span-27-823"><a id="__codelineno-27-823" name="__codelineno-27-823" href="#__codelineno-27-823"></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">auth</span><span class="o">.</span><span class="n">logout_user</span><span class="p">(</span><span class="n">auth_token</span> <span class="ow">or</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
</span><span id="__span-27-824"><a id="__codelineno-27-824" name="__codelineno-27-824" href="#__codelineno-27-824"></a>
</span><span id="__span-27-825"><a id="__codelineno-27-825" name="__codelineno-27-825" href="#__codelineno-27-825"></a>        <span class="c1"># User endpoints</span>
</span><span id="__span-27-826"><a id="__codelineno-27-826" name="__codelineno-27-826" href="#__codelineno-27-826"></a>        <span class="k">if</span> <span class="n">endpoint</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;/api/user/&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">method</span> <span class="o">==</span> <span class="s1">&#39;GET&#39;</span><span class="p">:</span>
</span><span id="__span-27-827"><a id="__codelineno-27-827" name="__codelineno-27-827" href="#__codelineno-27-827"></a>            <span class="n">user_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">endpoint</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
</span><span id="__span-27-828"><a id="__codelineno-27-828" name="__codelineno-27-828" href="#__codelineno-27-828"></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">business</span><span class="o">.</span><span class="n">get_user_profile</span><span class="p">(</span><span class="n">user_id</span><span class="p">,</span> <span class="n">auth_token</span><span class="o">=</span><span class="n">auth_token</span><span class="p">)</span>
</span><span id="__span-27-829"><a id="__codelineno-27-829" name="__codelineno-27-829" href="#__codelineno-27-829"></a>
</span><span id="__span-27-830"><a id="__codelineno-27-830" name="__codelineno-27-830" href="#__codelineno-27-830"></a>        <span class="c1"># Product endpoints</span>
</span><span id="__span-27-831"><a id="__codelineno-27-831" name="__codelineno-27-831" href="#__codelineno-27-831"></a>        <span class="k">if</span> <span class="n">endpoint</span> <span class="o">==</span> <span class="s1">&#39;/api/products&#39;</span> <span class="ow">and</span> <span class="n">method</span> <span class="o">==</span> <span class="s1">&#39;GET&#39;</span><span class="p">:</span>
</span><span id="__span-27-832"><a id="__codelineno-27-832" name="__codelineno-27-832" href="#__codelineno-27-832"></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">business</span><span class="o">.</span><span class="n">search_products</span><span class="p">(</span><span class="o">**</span><span class="n">data</span><span class="p">)</span>
</span><span id="__span-27-833"><a id="__codelineno-27-833" name="__codelineno-27-833" href="#__codelineno-27-833"></a>
</span><span id="__span-27-834"><a id="__codelineno-27-834" name="__codelineno-27-834" href="#__codelineno-27-834"></a>        <span class="c1"># Order endpoints</span>
</span><span id="__span-27-835"><a id="__codelineno-27-835" name="__codelineno-27-835" href="#__codelineno-27-835"></a>        <span class="k">if</span> <span class="n">endpoint</span> <span class="o">==</span> <span class="s1">&#39;/api/orders&#39;</span> <span class="ow">and</span> <span class="n">method</span> <span class="o">==</span> <span class="s1">&#39;POST&#39;</span><span class="p">:</span>
</span><span id="__span-27-836"><a id="__codelineno-27-836" name="__codelineno-27-836" href="#__codelineno-27-836"></a>            <span class="n">user_id</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;user_id&#39;</span><span class="p">)</span>
</span><span id="__span-27-837"><a id="__codelineno-27-837" name="__codelineno-27-837" href="#__codelineno-27-837"></a>            <span class="n">items</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;items&#39;</span><span class="p">,</span> <span class="p">[])</span>
</span><span id="__span-27-838"><a id="__codelineno-27-838" name="__codelineno-27-838" href="#__codelineno-27-838"></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">business</span><span class="o">.</span><span class="n">create_order</span><span class="p">(</span><span class="n">user_id</span><span class="p">,</span> <span class="n">items</span><span class="p">,</span> <span class="n">auth_token</span><span class="o">=</span><span class="n">auth_token</span><span class="p">)</span>
</span><span id="__span-27-839"><a id="__codelineno-27-839" name="__codelineno-27-839" href="#__codelineno-27-839"></a>
</span><span id="__span-27-840"><a id="__codelineno-27-840" name="__codelineno-27-840" href="#__codelineno-27-840"></a>        <span class="c1"># Analytics endpoints</span>
</span><span id="__span-27-841"><a id="__codelineno-27-841" name="__codelineno-27-841" href="#__codelineno-27-841"></a>        <span class="k">if</span> <span class="n">endpoint</span> <span class="o">==</span> <span class="s1">&#39;/api/analytics/dashboard&#39;</span> <span class="ow">and</span> <span class="n">method</span> <span class="o">==</span> <span class="s1">&#39;GET&#39;</span><span class="p">:</span>
</span><span id="__span-27-842"><a id="__codelineno-27-842" name="__codelineno-27-842" href="#__codelineno-27-842"></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">business</span><span class="o">.</span><span class="n">get_analytics_dashboard</span><span class="p">(</span><span class="n">auth_token</span><span class="o">=</span><span class="n">auth_token</span><span class="p">)</span>
</span><span id="__span-27-843"><a id="__codelineno-27-843" name="__codelineno-27-843" href="#__codelineno-27-843"></a>
</span><span id="__span-27-844"><a id="__codelineno-27-844" name="__codelineno-27-844" href="#__codelineno-27-844"></a>        <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;success&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span> <span class="s1">&#39;error&#39;</span><span class="p">:</span> <span class="s1">&#39;Endpoint not found&#39;</span><span class="p">}</span>
</span><span id="__span-27-845"><a id="__codelineno-27-845" name="__codelineno-27-845" href="#__codelineno-27-845"></a>
</span><span id="__span-27-846"><a id="__codelineno-27-846" name="__codelineno-27-846" href="#__codelineno-27-846"></a><span class="c1"># Demonstration of the complete backend system</span>
</span><span id="__span-27-847"><a id="__codelineno-27-847" name="__codelineno-27-847" href="#__codelineno-27-847"></a><span class="k">def</span><span class="w"> </span><span class="nf">demonstrate_backend_system</span><span class="p">():</span>
</span><span id="__span-27-848"><a id="__codelineno-27-848" name="__codelineno-27-848" href="#__codelineno-27-848"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Demonstrate the complete backend system&quot;&quot;&quot;</span>
</span><span id="__span-27-849"><a id="__codelineno-27-849" name="__codelineno-27-849" href="#__codelineno-27-849"></a>
</span><span id="__span-27-850"><a id="__codelineno-27-850" name="__codelineno-27-850" href="#__codelineno-27-850"></a>    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;ğŸš€ COMPLETE BACKEND SYSTEM DEMONSTRATION&#39;</span><span class="p">)</span>
</span><span id="__span-27-851"><a id="__codelineno-27-851" name="__codelineno-27-851" href="#__codelineno-27-851"></a>    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;=&#39;</span> <span class="o">*</span> <span class="mi">50</span><span class="p">)</span>
</span><span id="__span-27-852"><a id="__codelineno-27-852" name="__codelineno-27-852" href="#__codelineno-27-852"></a>
</span><span id="__span-27-853"><a id="__codelineno-27-853" name="__codelineno-27-853" href="#__codelineno-27-853"></a>    <span class="c1"># Initialize all components</span>
</span><span id="__span-27-854"><a id="__codelineno-27-854" name="__codelineno-27-854" href="#__codelineno-27-854"></a>    <span class="n">db_manager</span> <span class="o">=</span> <span class="n">DatabaseManager</span><span class="p">()</span>
</span><span id="__span-27-855"><a id="__codelineno-27-855" name="__codelineno-27-855" href="#__codelineno-27-855"></a>    <span class="n">auth_manager</span> <span class="o">=</span> <span class="n">AuthenticationManager</span><span class="p">(</span><span class="n">db_manager</span><span class="p">)</span>
</span><span id="__span-27-856"><a id="__codelineno-27-856" name="__codelineno-27-856" href="#__codelineno-27-856"></a>    <span class="n">business_manager</span> <span class="o">=</span> <span class="n">BusinessLogicManager</span><span class="p">(</span><span class="n">db_manager</span><span class="p">,</span> <span class="n">auth_manager</span><span class="p">)</span>
</span><span id="__span-27-857"><a id="__codelineno-27-857" name="__codelineno-27-857" href="#__codelineno-27-857"></a>    <span class="n">api_manager</span> <span class="o">=</span> <span class="n">APIManager</span><span class="p">(</span><span class="n">db_manager</span><span class="p">,</span> <span class="n">auth_manager</span><span class="p">,</span> <span class="n">business_manager</span><span class="p">)</span>
</span><span id="__span-27-858"><a id="__codelineno-27-858" name="__codelineno-27-858" href="#__codelineno-27-858"></a>
</span><span id="__span-27-859"><a id="__codelineno-27-859" name="__codelineno-27-859" href="#__codelineno-27-859"></a>    <span class="c1"># Test user registration</span>
</span><span id="__span-27-860"><a id="__codelineno-27-860" name="__codelineno-27-860" href="#__codelineno-27-860"></a>    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\\</span><span class="s1">n1ï¸âƒ£ Testing User Registration&#39;</span><span class="p">)</span>
</span><span id="__span-27-861"><a id="__codelineno-27-861" name="__codelineno-27-861" href="#__codelineno-27-861"></a>    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;-&#39;</span> <span class="o">*</span> <span class="mi">30</span><span class="p">)</span>
</span><span id="__span-27-862"><a id="__codelineno-27-862" name="__codelineno-27-862" href="#__codelineno-27-862"></a>
</span><span id="__span-27-863"><a id="__codelineno-27-863" name="__codelineno-27-863" href="#__codelineno-27-863"></a>    <span class="n">registration_response</span> <span class="o">=</span> <span class="n">api_manager</span><span class="o">.</span><span class="n">handle_request</span><span class="p">(</span>
</span><span id="__span-27-864"><a id="__codelineno-27-864" name="__codelineno-27-864" href="#__codelineno-27-864"></a>        <span class="s1">&#39;/api/auth/register&#39;</span><span class="p">,</span> <span class="s1">&#39;POST&#39;</span><span class="p">,</span>
</span><span id="__span-27-865"><a id="__codelineno-27-865" name="__codelineno-27-865" href="#__codelineno-27-865"></a>        <span class="p">{</span>
</span><span id="__span-27-866"><a id="__codelineno-27-866" name="__codelineno-27-866" href="#__codelineno-27-866"></a>            <span class="s1">&#39;username&#39;</span><span class="p">:</span> <span class="s1">&#39;test_user&#39;</span><span class="p">,</span>
</span><span id="__span-27-867"><a id="__codelineno-27-867" name="__codelineno-27-867" href="#__codelineno-27-867"></a>            <span class="s1">&#39;email&#39;</span><span class="p">:</span> <span class="s1">&#39;test@example.com&#39;</span><span class="p">,</span>
</span><span id="__span-27-868"><a id="__codelineno-27-868" name="__codelineno-27-868" href="#__codelineno-27-868"></a>            <span class="s1">&#39;password&#39;</span><span class="p">:</span> <span class="s1">&#39;secure123&#39;</span>
</span><span id="__span-27-869"><a id="__codelineno-27-869" name="__codelineno-27-869" href="#__codelineno-27-869"></a>        <span class="p">}</span>
</span><span id="__span-27-870"><a id="__codelineno-27-870" name="__codelineno-27-870" href="#__codelineno-27-870"></a>    <span class="p">)</span>
</span><span id="__span-27-871"><a id="__codelineno-27-871" name="__codelineno-27-871" href="#__codelineno-27-871"></a>    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Registration: </span><span class="si">{</span><span class="n">registration_response</span><span class="p">[</span><span class="s1">&#39;success&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-27-872"><a id="__codelineno-27-872" name="__codelineno-27-872" href="#__codelineno-27-872"></a>
</span><span id="__span-27-873"><a id="__codelineno-27-873" name="__codelineno-27-873" href="#__codelineno-27-873"></a>    <span class="c1"># Test user login</span>
</span><span id="__span-27-874"><a id="__codelineno-27-874" name="__codelineno-27-874" href="#__codelineno-27-874"></a>    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\\</span><span class="s1">n2ï¸âƒ£ Testing User Authentication&#39;</span><span class="p">)</span>
</span><span id="__span-27-875"><a id="__codelineno-27-875" name="__codelineno-27-875" href="#__codelineno-27-875"></a>    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;-&#39;</span> <span class="o">*</span> <span class="mi">30</span><span class="p">)</span>
</span><span id="__span-27-876"><a id="__codelineno-27-876" name="__codelineno-27-876" href="#__codelineno-27-876"></a>
</span><span id="__span-27-877"><a id="__codelineno-27-877" name="__codelineno-27-877" href="#__codelineno-27-877"></a>    <span class="n">login_response</span> <span class="o">=</span> <span class="n">api_manager</span><span class="o">.</span><span class="n">handle_request</span><span class="p">(</span>
</span><span id="__span-27-878"><a id="__codelineno-27-878" name="__codelineno-27-878" href="#__codelineno-27-878"></a>        <span class="s1">&#39;/api/auth/login&#39;</span><span class="p">,</span> <span class="s1">&#39;POST&#39;</span><span class="p">,</span>
</span><span id="__span-27-879"><a id="__codelineno-27-879" name="__codelineno-27-879" href="#__codelineno-27-879"></a>        <span class="p">{</span>
</span><span id="__span-27-880"><a id="__codelineno-27-880" name="__codelineno-27-880" href="#__codelineno-27-880"></a>            <span class="s1">&#39;username&#39;</span><span class="p">:</span> <span class="s1">&#39;john_doe&#39;</span><span class="p">,</span>
</span><span id="__span-27-881"><a id="__codelineno-27-881" name="__codelineno-27-881" href="#__codelineno-27-881"></a>            <span class="s1">&#39;password&#39;</span><span class="p">:</span> <span class="s1">&#39;user123&#39;</span>
</span><span id="__span-27-882"><a id="__codelineno-27-882" name="__codelineno-27-882" href="#__codelineno-27-882"></a>        <span class="p">}</span>
</span><span id="__span-27-883"><a id="__codelineno-27-883" name="__codelineno-27-883" href="#__codelineno-27-883"></a>    <span class="p">)</span>
</span><span id="__span-27-884"><a id="__codelineno-27-884" name="__codelineno-27-884" href="#__codelineno-27-884"></a>
</span><span id="__span-27-885"><a id="__codelineno-27-885" name="__codelineno-27-885" href="#__codelineno-27-885"></a>    <span class="k">if</span> <span class="n">login_response</span><span class="p">[</span><span class="s1">&#39;success&#39;</span><span class="p">]:</span>
</span><span id="__span-27-886"><a id="__codelineno-27-886" name="__codelineno-27-886" href="#__codelineno-27-886"></a>        <span class="n">auth_token</span> <span class="o">=</span> <span class="n">login_response</span><span class="p">[</span><span class="s1">&#39;token&#39;</span><span class="p">]</span>
</span><span id="__span-27-887"><a id="__codelineno-27-887" name="__codelineno-27-887" href="#__codelineno-27-887"></a>        <span class="n">user_data</span> <span class="o">=</span> <span class="n">login_response</span><span class="p">[</span><span class="s1">&#39;user&#39;</span><span class="p">]</span>
</span><span id="__span-27-888"><a id="__codelineno-27-888" name="__codelineno-27-888" href="#__codelineno-27-888"></a>        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;âœ… Authenticated: </span><span class="si">{</span><span class="n">user_data</span><span class="p">[</span><span class="s1">&#39;username&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> (</span><span class="si">{</span><span class="n">user_data</span><span class="p">[</span><span class="s1">&#39;role&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>
</span><span id="__span-27-889"><a id="__codelineno-27-889" name="__codelineno-27-889" href="#__codelineno-27-889"></a>
</span><span id="__span-27-890"><a id="__codelineno-27-890" name="__codelineno-27-890" href="#__codelineno-27-890"></a>    <span class="c1"># Test product search</span>
</span><span id="__span-27-891"><a id="__codelineno-27-891" name="__codelineno-27-891" href="#__codelineno-27-891"></a>    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\\</span><span class="s1">n3ï¸âƒ£ Testing Product Search&#39;</span><span class="p">)</span>
</span><span id="__span-27-892"><a id="__codelineno-27-892" name="__codelineno-27-892" href="#__codelineno-27-892"></a>    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;-&#39;</span> <span class="o">*</span> <span class="mi">30</span><span class="p">)</span>
</span><span id="__span-27-893"><a id="__codelineno-27-893" name="__codelineno-27-893" href="#__codelineno-27-893"></a>
</span><span id="__span-27-894"><a id="__codelineno-27-894" name="__codelineno-27-894" href="#__codelineno-27-894"></a>    <span class="n">product_search</span> <span class="o">=</span> <span class="n">api_manager</span><span class="o">.</span><span class="n">handle_request</span><span class="p">(</span>
</span><span id="__span-27-895"><a id="__codelineno-27-895" name="__codelineno-27-895" href="#__codelineno-27-895"></a>        <span class="s1">&#39;/api/products&#39;</span><span class="p">,</span> <span class="s1">&#39;GET&#39;</span><span class="p">,</span>
</span><span id="__span-27-896"><a id="__codelineno-27-896" name="__codelineno-27-896" href="#__codelineno-27-896"></a>        <span class="p">{</span>
</span><span id="__span-27-897"><a id="__codelineno-27-897" name="__codelineno-27-897" href="#__codelineno-27-897"></a>            <span class="s1">&#39;query&#39;</span><span class="p">:</span> <span class="s1">&#39;laptop&#39;</span><span class="p">,</span>
</span><span id="__span-27-898"><a id="__codelineno-27-898" name="__codelineno-27-898" href="#__codelineno-27-898"></a>            <span class="s1">&#39;min_price&#39;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>
</span><span id="__span-27-899"><a id="__codelineno-27-899" name="__codelineno-27-899" href="#__codelineno-27-899"></a>            <span class="s1">&#39;max_price&#39;</span><span class="p">:</span> <span class="mi">2000</span><span class="p">,</span>
</span><span id="__span-27-900"><a id="__codelineno-27-900" name="__codelineno-27-900" href="#__codelineno-27-900"></a>            <span class="s1">&#39;sort_by&#39;</span><span class="p">:</span> <span class="s1">&#39;price&#39;</span><span class="p">,</span>
</span><span id="__span-27-901"><a id="__codelineno-27-901" name="__codelineno-27-901" href="#__codelineno-27-901"></a>            <span class="s1">&#39;sort_order&#39;</span><span class="p">:</span> <span class="s1">&#39;asc&#39;</span>
</span><span id="__span-27-902"><a id="__codelineno-27-902" name="__codelineno-27-902" href="#__codelineno-27-902"></a>        <span class="p">}</span>
</span><span id="__span-27-903"><a id="__codelineno-27-903" name="__codelineno-27-903" href="#__codelineno-27-903"></a>    <span class="p">)</span>
</span><span id="__span-27-904"><a id="__codelineno-27-904" name="__codelineno-27-904" href="#__codelineno-27-904"></a>
</span><span id="__span-27-905"><a id="__codelineno-27-905" name="__codelineno-27-905" href="#__codelineno-27-905"></a>    <span class="k">if</span> <span class="n">product_search</span><span class="p">[</span><span class="s1">&#39;success&#39;</span><span class="p">]:</span>
</span><span id="__span-27-906"><a id="__codelineno-27-906" name="__codelineno-27-906" href="#__codelineno-27-906"></a>        <span class="n">products</span> <span class="o">=</span> <span class="n">product_search</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;products&#39;</span><span class="p">]</span>
</span><span id="__span-27-907"><a id="__codelineno-27-907" name="__codelineno-27-907" href="#__codelineno-27-907"></a>        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ğŸ” Found </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">products</span><span class="p">)</span><span class="si">}</span><span class="s2"> products matching criteria&quot;</span><span class="p">)</span>
</span><span id="__span-27-908"><a id="__codelineno-27-908" name="__codelineno-27-908" href="#__codelineno-27-908"></a>        <span class="k">for</span> <span class="n">product</span> <span class="ow">in</span> <span class="n">products</span><span class="p">[:</span><span class="mi">3</span><span class="p">]:</span>  <span class="c1"># Show first 3</span>
</span><span id="__span-27-909"><a id="__codelineno-27-909" name="__codelineno-27-909" href="#__codelineno-27-909"></a>            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   â€¢ </span><span class="si">{</span><span class="n">product</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">: $</span><span class="si">{</span><span class="n">product</span><span class="p">[</span><span class="s1">&#39;price&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-27-910"><a id="__codelineno-27-910" name="__codelineno-27-910" href="#__codelineno-27-910"></a>
</span><span id="__span-27-911"><a id="__codelineno-27-911" name="__codelineno-27-911" href="#__codelineno-27-911"></a>    <span class="c1"># Test order creation</span>
</span><span id="__span-27-912"><a id="__codelineno-27-912" name="__codelineno-27-912" href="#__codelineno-27-912"></a>    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\\</span><span class="s1">n4ï¸âƒ£ Testing Order Creation&#39;</span><span class="p">)</span>
</span><span id="__span-27-913"><a id="__codelineno-27-913" name="__codelineno-27-913" href="#__codelineno-27-913"></a>    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;-&#39;</span> <span class="o">*</span> <span class="mi">30</span><span class="p">)</span>
</span><span id="__span-27-914"><a id="__codelineno-27-914" name="__codelineno-27-914" href="#__codelineno-27-914"></a>
</span><span id="__span-27-915"><a id="__codelineno-27-915" name="__codelineno-27-915" href="#__codelineno-27-915"></a>    <span class="k">if</span> <span class="n">login_response</span><span class="p">[</span><span class="s1">&#39;success&#39;</span><span class="p">]:</span>
</span><span id="__span-27-916"><a id="__codelineno-27-916" name="__codelineno-27-916" href="#__codelineno-27-916"></a>        <span class="n">order_response</span> <span class="o">=</span> <span class="n">api_manager</span><span class="o">.</span><span class="n">handle_request</span><span class="p">(</span>
</span><span id="__span-27-917"><a id="__codelineno-27-917" name="__codelineno-27-917" href="#__codelineno-27-917"></a>            <span class="s1">&#39;/api/orders&#39;</span><span class="p">,</span> <span class="s1">&#39;POST&#39;</span><span class="p">,</span>
</span><span id="__span-27-918"><a id="__codelineno-27-918" name="__codelineno-27-918" href="#__codelineno-27-918"></a>            <span class="p">{</span>
</span><span id="__span-27-919"><a id="__codelineno-27-919" name="__codelineno-27-919" href="#__codelineno-27-919"></a>                <span class="s1">&#39;user_id&#39;</span><span class="p">:</span> <span class="n">user_data</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">],</span>
</span><span id="__span-27-920"><a id="__codelineno-27-920" name="__codelineno-27-920" href="#__codelineno-27-920"></a>                <span class="s1">&#39;items&#39;</span><span class="p">:</span> <span class="p">[</span>
</span><span id="__span-27-921"><a id="__codelineno-27-921" name="__codelineno-27-921" href="#__codelineno-27-921"></a>                    <span class="p">{</span><span class="s1">&#39;product_id&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;quantity&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">},</span>
</span><span id="__span-27-922"><a id="__codelineno-27-922" name="__codelineno-27-922" href="#__codelineno-27-922"></a>                    <span class="p">{</span><span class="s1">&#39;product_id&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;quantity&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">}</span>
</span><span id="__span-27-923"><a id="__codelineno-27-923" name="__codelineno-27-923" href="#__codelineno-27-923"></a>                <span class="p">]</span>
</span><span id="__span-27-924"><a id="__codelineno-27-924" name="__codelineno-27-924" href="#__codelineno-27-924"></a>            <span class="p">},</span>
</span><span id="__span-27-925"><a id="__codelineno-27-925" name="__codelineno-27-925" href="#__codelineno-27-925"></a>            <span class="n">auth_token</span><span class="o">=</span><span class="n">auth_token</span>
</span><span id="__span-27-926"><a id="__codelineno-27-926" name="__codelineno-27-926" href="#__codelineno-27-926"></a>        <span class="p">)</span>
</span><span id="__span-27-927"><a id="__codelineno-27-927" name="__codelineno-27-927" href="#__codelineno-27-927"></a>
</span><span id="__span-27-928"><a id="__codelineno-27-928" name="__codelineno-27-928" href="#__codelineno-27-928"></a>        <span class="k">if</span> <span class="n">order_response</span><span class="p">[</span><span class="s1">&#39;success&#39;</span><span class="p">]:</span>
</span><span id="__span-27-929"><a id="__codelineno-27-929" name="__codelineno-27-929" href="#__codelineno-27-929"></a>            <span class="n">order</span> <span class="o">=</span> <span class="n">order_response</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">]</span>
</span><span id="__span-27-930"><a id="__codelineno-27-930" name="__codelineno-27-930" href="#__codelineno-27-930"></a>            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ğŸ“¦ Order created: #</span><span class="si">{</span><span class="n">order</span><span class="p">[</span><span class="s1">&#39;order_id&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-27-931"><a id="__codelineno-27-931" name="__codelineno-27-931" href="#__codelineno-27-931"></a>            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Total: $</span><span class="si">{</span><span class="n">order</span><span class="p">[</span><span class="s1">&#39;total_amount&#39;</span><span class="p">]</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-27-932"><a id="__codelineno-27-932" name="__codelineno-27-932" href="#__codelineno-27-932"></a>            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Items: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">order</span><span class="p">[</span><span class="s1">&#39;items&#39;</span><span class="p">])</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-27-933"><a id="__codelineno-27-933" name="__codelineno-27-933" href="#__codelineno-27-933"></a>
</span><span id="__span-27-934"><a id="__codelineno-27-934" name="__codelineno-27-934" href="#__codelineno-27-934"></a>    <span class="c1"># Test admin analytics (using admin token)</span>
</span><span id="__span-27-935"><a id="__codelineno-27-935" name="__codelineno-27-935" href="#__codelineno-27-935"></a>    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\\</span><span class="s1">n5ï¸âƒ£ Testing Admin Analytics&#39;</span><span class="p">)</span>
</span><span id="__span-27-936"><a id="__codelineno-27-936" name="__codelineno-27-936" href="#__codelineno-27-936"></a>    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;-&#39;</span> <span class="o">*</span> <span class="mi">30</span><span class="p">)</span>
</span><span id="__span-27-937"><a id="__codelineno-27-937" name="__codelineno-27-937" href="#__codelineno-27-937"></a>
</span><span id="__span-27-938"><a id="__codelineno-27-938" name="__codelineno-27-938" href="#__codelineno-27-938"></a>    <span class="n">admin_login</span> <span class="o">=</span> <span class="n">api_manager</span><span class="o">.</span><span class="n">handle_request</span><span class="p">(</span>
</span><span id="__span-27-939"><a id="__codelineno-27-939" name="__codelineno-27-939" href="#__codelineno-27-939"></a>        <span class="s1">&#39;/api/auth/login&#39;</span><span class="p">,</span> <span class="s1">&#39;POST&#39;</span><span class="p">,</span>
</span><span id="__span-27-940"><a id="__codelineno-27-940" name="__codelineno-27-940" href="#__codelineno-27-940"></a>        <span class="p">{</span>
</span><span id="__span-27-941"><a id="__codelineno-27-941" name="__codelineno-27-941" href="#__codelineno-27-941"></a>            <span class="s1">&#39;username&#39;</span><span class="p">:</span> <span class="s1">&#39;admin&#39;</span><span class="p">,</span>
</span><span id="__span-27-942"><a id="__codelineno-27-942" name="__codelineno-27-942" href="#__codelineno-27-942"></a>            <span class="s1">&#39;password&#39;</span><span class="p">:</span> <span class="s1">&#39;admin123&#39;</span>
</span><span id="__span-27-943"><a id="__codelineno-27-943" name="__codelineno-27-943" href="#__codelineno-27-943"></a>        <span class="p">}</span>
</span><span id="__span-27-944"><a id="__codelineno-27-944" name="__codelineno-27-944" href="#__codelineno-27-944"></a>    <span class="p">)</span>
</span><span id="__span-27-945"><a id="__codelineno-27-945" name="__codelineno-27-945" href="#__codelineno-27-945"></a>
</span><span id="__span-27-946"><a id="__codelineno-27-946" name="__codelineno-27-946" href="#__codelineno-27-946"></a>    <span class="k">if</span> <span class="n">admin_login</span><span class="p">[</span><span class="s1">&#39;success&#39;</span><span class="p">]:</span>
</span><span id="__span-27-947"><a id="__codelineno-27-947" name="__codelineno-27-947" href="#__codelineno-27-947"></a>        <span class="n">admin_token</span> <span class="o">=</span> <span class="n">admin_login</span><span class="p">[</span><span class="s1">&#39;token&#39;</span><span class="p">]</span>
</span><span id="__span-27-948"><a id="__codelineno-27-948" name="__codelineno-27-948" href="#__codelineno-27-948"></a>
</span><span id="__span-27-949"><a id="__codelineno-27-949" name="__codelineno-27-949" href="#__codelineno-27-949"></a>        <span class="n">analytics_response</span> <span class="o">=</span> <span class="n">api_manager</span><span class="o">.</span><span class="n">handle_request</span><span class="p">(</span>
</span><span id="__span-27-950"><a id="__codelineno-27-950" name="__codelineno-27-950" href="#__codelineno-27-950"></a>            <span class="s1">&#39;/api/analytics/dashboard&#39;</span><span class="p">,</span> <span class="s1">&#39;GET&#39;</span><span class="p">,</span>
</span><span id="__span-27-951"><a id="__codelineno-27-951" name="__codelineno-27-951" href="#__codelineno-27-951"></a>            <span class="p">{},</span>
</span><span id="__span-27-952"><a id="__codelineno-27-952" name="__codelineno-27-952" href="#__codelineno-27-952"></a>            <span class="n">auth_token</span><span class="o">=</span><span class="n">admin_token</span>
</span><span id="__span-27-953"><a id="__codelineno-27-953" name="__codelineno-27-953" href="#__codelineno-27-953"></a>        <span class="p">)</span>
</span><span id="__span-27-954"><a id="__codelineno-27-954" name="__codelineno-27-954" href="#__codelineno-27-954"></a>
</span><span id="__span-27-955"><a id="__codelineno-27-955" name="__codelineno-27-955" href="#__codelineno-27-955"></a>        <span class="k">if</span> <span class="n">analytics_response</span><span class="p">[</span><span class="s1">&#39;success&#39;</span><span class="p">]:</span>
</span><span id="__span-27-956"><a id="__codelineno-27-956" name="__codelineno-27-956" href="#__codelineno-27-956"></a>            <span class="n">analytics</span> <span class="o">=</span> <span class="n">analytics_response</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">]</span>
</span><span id="__span-27-957"><a id="__codelineno-27-957" name="__codelineno-27-957" href="#__codelineno-27-957"></a>            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ğŸ“Š Analytics Dashboard:&quot;</span><span class="p">)</span>
</span><span id="__span-27-958"><a id="__codelineno-27-958" name="__codelineno-27-958" href="#__codelineno-27-958"></a>            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Total Users: </span><span class="si">{</span><span class="n">analytics</span><span class="p">[</span><span class="s1">&#39;users&#39;</span><span class="p">][</span><span class="s1">&#39;total_users&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-27-959"><a id="__codelineno-27-959" name="__codelineno-27-959" href="#__codelineno-27-959"></a>            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Total Orders: </span><span class="si">{</span><span class="n">analytics</span><span class="p">[</span><span class="s1">&#39;orders&#39;</span><span class="p">][</span><span class="s1">&#39;total_orders&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-27-960"><a id="__codelineno-27-960" name="__codelineno-27-960" href="#__codelineno-27-960"></a>            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Total Revenue: $</span><span class="si">{</span><span class="n">analytics</span><span class="p">[</span><span class="s1">&#39;orders&#39;</span><span class="p">][</span><span class="s1">&#39;total_revenue&#39;</span><span class="p">]</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-27-961"><a id="__codelineno-27-961" name="__codelineno-27-961" href="#__codelineno-27-961"></a>            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Products in Stock: </span><span class="si">{</span><span class="n">analytics</span><span class="p">[</span><span class="s1">&#39;products&#39;</span><span class="p">][</span><span class="s1">&#39;in_stock&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-27-962"><a id="__codelineno-27-962" name="__codelineno-27-962" href="#__codelineno-27-962"></a>
</span><span id="__span-27-963"><a id="__codelineno-27-963" name="__codelineno-27-963" href="#__codelineno-27-963"></a>    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\\</span><span class="s1">nâœ… Backend System Demonstration Complete!&#39;</span><span class="p">)</span>
</span><span id="__span-27-964"><a id="__codelineno-27-964" name="__codelineno-27-964" href="#__codelineno-27-964"></a>    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\\</span><span class="s1">nğŸ’¡ BACKEND FEATURES DEMONSTRATED:&#39;</span><span class="p">)</span>
</span><span id="__span-27-965"><a id="__codelineno-27-965" name="__codelineno-27-965" href="#__codelineno-27-965"></a>    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;1. Database connection pooling and transactions&#39;</span><span class="p">)</span>
</span><span id="__span-27-966"><a id="__codelineno-27-966" name="__codelineno-27-966" href="#__codelineno-27-966"></a>    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;2. JWT-based authentication and authorization&#39;</span><span class="p">)</span>
</span><span id="__span-27-967"><a id="__codelineno-27-967" name="__codelineno-27-967" href="#__codelineno-27-967"></a>    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;3. Role-based access control&#39;</span><span class="p">)</span>
</span><span id="__span-27-968"><a id="__codelineno-27-968" name="__codelineno-27-968" href="#__codelineno-27-968"></a>    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;4. Advanced business logic with caching&#39;</span><span class="p">)</span>
</span><span id="__span-27-969"><a id="__codelineno-27-969" name="__codelineno-27-969" href="#__codelineno-27-969"></a>    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;5. RESTful API with rate limiting&#39;</span><span class="p">)</span>
</span><span id="__span-27-970"><a id="__codelineno-27-970" name="__codelineno-27-970" href="#__codelineno-27-970"></a>    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;6. Comprehensive logging and monitoring&#39;</span><span class="p">)</span>
</span><span id="__span-27-971"><a id="__codelineno-27-971" name="__codelineno-27-971" href="#__codelineno-27-971"></a>    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;7. Error handling and data validation&#39;</span><span class="p">)</span>
</span><span id="__span-27-972"><a id="__codelineno-27-972" name="__codelineno-27-972" href="#__codelineno-27-972"></a>    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;8. Analytics and reporting capabilities&#39;</span><span class="p">)</span>
</span><span id="__span-27-973"><a id="__codelineno-27-973" name="__codelineno-27-973" href="#__codelineno-27-973"></a>
</span><span id="__span-27-974"><a id="__codelineno-27-974" name="__codelineno-27-974" href="#__codelineno-27-974"></a><span class="c1"># Run the demonstration</span>
</span><span id="__span-27-975"><a id="__codelineno-27-975" name="__codelineno-27-975" href="#__codelineno-27-975"></a><span class="n">demonstrate_backend_system</span><span class="p">()</span>
</span></code></pre></div>
</details>
<p><strong>ğŸ”§ Popular Backend Framework Comparison:</strong></p>
<table>
<thead>
<tr>
<th>Framework</th>
<th>Language</th>
<th>Strengths</th>
<th>Best For</th>
<th>Learning Curve</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Flask</strong></td>
<td>Python</td>
<td>Lightweight, flexible</td>
<td>APIs, microservices</td>
<td>Easy</td>
</tr>
<tr>
<td><strong>Django</strong></td>
<td>Python</td>
<td>Full-featured, batteries included</td>
<td>Full web apps</td>
<td>Medium</td>
</tr>
<tr>
<td><strong>Express.js</strong></td>
<td>Node.js</td>
<td>Fast, minimalist</td>
<td>Real-time apps</td>
<td>Easy</td>
</tr>
<tr>
<td><strong>Spring Boot</strong></td>
<td>Java</td>
<td>Enterprise-grade, robust</td>
<td>Large applications</td>
<td>Hard</td>
</tr>
<tr>
<td><strong>Ruby on Rails</strong></td>
<td>Ruby</td>
<td>Convention over configuration</td>
<td>Rapid development</td>
<td>Medium</td>
</tr>
<tr>
<td><strong>ASP.NET Core</strong></td>
<td>C#</td>
<td>High performance, Microsoft ecosystem</td>
<td>Enterprise apps</td>
<td>Medium</td>
</tr>
</tbody>
</table>
<p><strong>âš¡ Backend Performance Best Practices:</strong></p>
<p><strong>Database Optimization:</strong>
- âœ… Use connection pooling
- âœ… Implement proper indexing
- âœ… Use prepared statements
- âœ… Implement query caching
- âœ… Database connection limits</p>
<p><strong>API Design:</strong>
- âœ… RESTful endpoint design
- âœ… Proper HTTP status codes
- âœ… API versioning strategy
- âœ… Rate limiting implementation
- âœ… Request/response logging</p>
<p><strong>Security Measures:</strong>
- âœ… JWT token authentication
- âœ… Role-based access control
- âœ… Input validation and sanitization
- âœ… SQL injection prevention
- âœ… CORS configuration</p>
<p><strong>Scalability Features:</strong>
- âœ… Horizontal scaling support
- âœ… Caching strategies (Redis/Memcached)
- âœ… Load balancing compatibility
- âœ… Microservices architecture
- âœ… Message queue integration</p>
<p><strong>Back-End Request Lifecycle Diagram:</strong></p>
<pre  class="mermaid"><code>sequenceDiagram
    participant Client
    participant LoadBalancer
    participant WebServer
    participant AppFramework
    participant Cache
    participant Database
    participant MessageQueue

    Client->>LoadBalancer: HTTPS Request
    LoadBalancer->>WebServer: Route to Server
    WebServer->>AppFramework: Process Request
    AppFramework->>Cache: Check Cache

    alt Cache Hit
        Cache-->>AppFramework: Return Cached Data
    else Cache Miss
        AppFramework->>Database: Query Database
        Database-->>AppFramework: Return Data
        AppFramework->>Cache: Store in Cache
    end

    AppFramework->>MessageQueue: Queue Background Tasks
    AppFramework-->>WebServer: Return Response
    WebServer-->>LoadBalancer: HTTP Response
    LoadBalancer-->>Client: Response to Client

    MessageQueue->>AppFramework: Process Background Task
</code></pre>
<h3 id="full-stack-implementation">Full-Stack Implementation<a class="headerlink" href="#full-stack-implementation" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Basic Web App Example (Shell + SQL):</strong>
    <div class="language-bash highlight"><pre><span></span><code><span id="__span-28-1"><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a><span class="c1"># Shell script for file operations</span>
</span><span id="__span-28-2"><a id="__codelineno-28-2" name="__codelineno-28-2" href="#__codelineno-28-2"></a>grep<span class="w"> </span><span class="s2">&quot;search_term&quot;</span><span class="w"> </span>*.txt<span class="w"> </span>&gt;<span class="w"> </span>results.txt
</span><span id="__span-28-3"><a id="__codelineno-28-3" name="__codelineno-28-3" href="#__codelineno-28-3"></a><span class="c1"># SQL queries</span>
</span><span id="__span-28-4"><a id="__codelineno-28-4" name="__codelineno-28-4" href="#__codelineno-28-4"></a>SELECT<span class="w"> </span>name,<span class="w"> </span>COUNT<span class="o">(</span>*<span class="o">)</span><span class="w"> </span>FROM<span class="w"> </span>users<span class="w"> </span>WHERE<span class="w"> </span><span class="nv">active</span><span class="o">=</span><span class="m">1</span><span class="w"> </span>GROUP<span class="w"> </span>BY<span class="w"> </span>name<span class="p">;</span>
</span><span id="__span-28-5"><a id="__codelineno-28-5" name="__codelineno-28-5" href="#__codelineno-28-5"></a>SELECT<span class="w"> </span>*<span class="w"> </span>FROM<span class="w"> </span>orders<span class="w"> </span>JOIN<span class="w"> </span>customers<span class="w"> </span>ON<span class="w"> </span>orders.customer_id<span class="w"> </span><span class="o">=</span><span class="w"> </span>customers.id<span class="p">;</span>
</span></code></pre></div></li>
<li><strong>ORM-Based Approach:</strong>
    <div class="language-python highlight"><pre><span></span><code><span id="__span-29-1"><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a><span class="c1"># Python with SQLAlchemy ORM</span>
</span><span id="__span-29-2"><a id="__codelineno-29-2" name="__codelineno-29-2" href="#__codelineno-29-2"></a><span class="kn">from</span><span class="w"> </span><span class="nn">sqlalchemy</span><span class="w"> </span><span class="kn">import</span> <span class="n">create_engine</span><span class="p">,</span> <span class="n">select</span>
</span><span id="__span-29-3"><a id="__codelineno-29-3" name="__codelineno-29-3" href="#__codelineno-29-3"></a><span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s1">&#39;sqlite:///app.db&#39;</span><span class="p">)</span>
</span><span id="__span-29-4"><a id="__codelineno-29-4" name="__codelineno-29-4" href="#__codelineno-29-4"></a><span class="n">conn</span> <span class="o">=</span> <span class="n">engine</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
</span><span id="__span-29-5"><a id="__codelineno-29-5" name="__codelineno-29-5" href="#__codelineno-29-5"></a><span class="n">result</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">select</span><span class="p">(</span><span class="n">User</span><span class="p">)</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">User</span><span class="o">.</span><span class="n">active</span><span class="o">==</span><span class="kc">True</span><span class="p">))</span>
</span><span id="__span-29-6"><a id="__codelineno-29-6" name="__codelineno-29-6" href="#__codelineno-29-6"></a><span class="k">for</span> <span class="n">user</span> <span class="ow">in</span> <span class="n">result</span><span class="p">:</span>
</span><span id="__span-29-7"><a id="__codelineno-29-7" name="__codelineno-29-7" href="#__codelineno-29-7"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">user</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</span></code></pre></div></li>
</ul>
<h3 id="collaboration-pwa-design">Collaboration &amp; PWA Design<a class="headerlink" href="#collaboration-pwa-design" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Front-End/Back-End Collaboration:</strong> Shared APIs, clear contracts, and regular communication improve reliability and user experience.</li>
<li><strong>Progressive Web App (PWA) Design:</strong><ul>
<li><em>UI/UX Principles:</em> Consistent fonts, colors, audio/video integration, intuitive navigation.</li>
<li><em>Accessibility &amp; Inclusivity:</em> Use semantic HTML, ARIA roles, keyboard navigation, and color contrast for all users.</li>
<li><em>Steps to Implement a PWA:</em><ol>
<li>Design responsive UI and navigation.</li>
<li>Add service workers for offline support.</li>
<li>Implement push notifications.</li>
<li>Ensure accessibility and inclusivity.</li>
<li>Test across devices and browsers.</li>
</ol>
</li>
</ul>
</li>
</ul>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs", "navigation.top", "navigation.instant", "navigation.instant.prefetch", "search.highlight", "search.suggest", "content.code.annotate", "content.code.copy", "content.code.select", "content.tabs.link", "toc.follow"], "search": "../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.50899def.min.js"></script>
      
        <script src="../../assets/diagram-modal.js"></script>
      
    
  </body>
</html>